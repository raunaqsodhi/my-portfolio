(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["9415"],{60344:function(e,t,r){var n={"./landing-page-pt/feature-1_1x.png":["61309","8903"],"./landing-page-en/feature-3_1x.png":["57803","4255"],"./landing-page-pt/feature-3_1x.png":["57211","5107"],"./landing-page-pt/feature-2_1x.png":["59538","5634"],"./landing-page-en/feature-2_1x.png":["91234","1947"],"./landing-page-en/feature-1_1x.png":["94167","989"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=60344,e.exports=i},50542:function(e,t,r){var n={"./landing-page-pt/feature-1_1x.png":["61309","8903"],"./landing-page-en/feature-3_1x.png":["57803","4255"],"./landing-page-pt/feature-3_1x.png":["57211","5107"],"./landing-page-pt/feature-2_1x.png":["59538","5634"],"./landing-page-en/feature-2_1x.png":["91234","1947"],"./landing-page-en/feature-1_1x.png":["94167","989"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=50542,e.exports=i},29631:function(e,t,r){var n={"./landing-page-en/feature-2_2x.png":["81128","8483"],"./landing-page-pt/feature-1_2x.png":["93279","662"],"./landing-page-pt/feature-3_2x.png":["85250","9110"],"./landing-page-pt/feature-2_2x.png":["48543","1568"],"./landing-page-en/feature-1_2x.png":["39382","3682"],"./landing-page-en/feature-3_2x.png":["70556","3421"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=29631,e.exports=i},65994:function(e,t,r){var n={"./landing-page-pt/feature-2_3x.png":["442","9762"],"./landing-page-en/feature-2_3x.png":["28552","9670"],"./landing-page-pt/feature-1_3x.png":["79230","9503"],"./landing-page-en/feature-1_3x.png":["79458","217"],"./landing-page-pt/feature-3_3x.png":["82259","5715"],"./landing-page-en/feature-3_3x.png":["54182","2398"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=65994,e.exports=i},77065:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=77065,e.exports=t},32196:function(e,t,r){var n={"./authentication_form_controller.js":"73123","./back_controller.js":"21793","./collapsible_controller.js":"93736","./daterange_controller.js":"98206","./dropdown_controller.js":"96735","./flash_controller.js":"87818","./form_controller.js":"66677","./mobile_sidebar_controller.js":"48366","./multiselect_controller.js":"14486","./popup_controller.js":"2713","./react_mount_controller.ts":"38159","./recaptcha_controller.js":"99588","./reorder_controller.js":"78413","./reorderparent_controller.js":"22447","./toggle_controller.js":"28396","./validation_controller.js":"557"};function i(e){return r(o(e))}function o(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=32196},33578:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/in-app-payments/mobile-1x-217c5f2355307f08.png"},75834:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/in-app-payments/mobile-2x-6b7bf11064134146.png"},89335:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/in-app-payments/mobile-4x-d82406b02b246d5b.png"},60954:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-1_1x-9ecd76904e5b75ff.png"},664:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-1_2x-d1cd1ab0eb08033c.png"},48706:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-1_4x-fb88d0dcf6d564de.png"},86542:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-2_1x-067b6767a175569b.png"},53894:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-2_2x-f50647782b3b9b0a.png"},54120:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-2_4x-5684315adb69bb5f.png"},68134:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-3_1x-d0ae75aae34bdd5f.png"},5131:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-3_2x-f8272786f47c15e0.png"},47324:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-3_4x-ceaebb07bb490cb4.png"},36191:function(e,t,r){var n=r(77065);n.keys().forEach(n)},24674:function(e,t,r){"use strict";var n=r(34258),i=r(84326),o=r(76614),a=r.n(o);r(1508),r(65052);var s=r(13735);r(66337),r(12918).start(),r(94849).BL(),r(36191),r(22837),r(69810),window.I18n=i.Z,a().start(),window.initialiseTippy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=(0,s.ZP)(e.querySelectorAll("[data-tippy-content]"),{allowHTML:!0});document.addEventListener("touchstart",function e(){t.forEach(function(e){e.destroy()}),document.removeEventListener("touchstart",e)})},document.addEventListener("turbolinks:load",function(){if(window.initialiseTippy(),document.querySelectorAll(".iframe-mode")[0])for(var e=document.getElementsByTagName("a"),t=0,r=e.length;t<r;t++)e[t].target="_blank";window.location.href.includes("show_back_link=true")&&window.history.replaceState({},document.title,location.href.split("?")[0])}),document.addEventListener("turbolinks:click",function(e){var t=e.target;t.hash&&t.origin===window.location.origin&&t.pathname===window.location.pathname&&(Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(e.data.url,Turbolinks.uuid()),e.preventDefault())}),document.addEventListener("turbolinks:load",function(){if(window.location.hash){var e=document.getElementById(window.location.hash.slice(1));if(e)return void e.scrollIntoView(!0);var t=document.getElementsByName(window.location.hash.slice(1));t.length&&t[0].scrollIntoView(!0)}}),window.webview={isComingFromReactNativeWebview:!1,isComingFromReactNativeAuthenticatedWebview:!1,isInsideMobileWebview:!1,electronAPI:{},onLeaveLiveStream:null,onEndLiveStream:null},n.Z.start()},3176:function(e,t,r){"use strict";r.d(t,{L:()=>o});var n=r(93199),i=r(13532),o=function(){return{listAccessGroups:function(e){var t=e.params;return(0,n.UT)(i.av.admin.accessGroups.index({params:void 0===t?{}:t}))},createAccessGroup:function(e){return(0,n.Cu)(i.av.admin.accessGroups.create(),e)},showAccessGroup:function(e){return(0,n.UT)(i.av.admin.accessGroups.show(e))},updateAccessGroup:function(e){var t=e.id,r=e.params;return(0,n.aU)(i.av.admin.accessGroups.update(t),r)},destroyAccessGroup:function(e){return(0,n.pC)(i.av.admin.accessGroups.delete(e))},unarchiveAccessGroup:function(e){return(0,n.aU)(i.av.admin.accessGroups.unarchive(e))}}}},85674:function(e,t,r){"use strict";r.d(t,{H:()=>o});var n=r(93199),i=r(13532),o=function(){return{manageAccessGroupSources:function(e){var t=e.params;return(0,n.aU)(i.av.admin.accessGroupSources.manage(),t)}}}},80106:function(e,t,r){"use strict";r.d(t,{v:()=>o});var n=r(93199),i=r(57349),o={preview:function(e){var t=e.subscriptionProcessorId,r=e.couponCode;return function(){return(0,n.UT)(i.q.subscriptions.coupons.preview({subscriptionProcessorId:t,couponCode:r}))}},create:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.q.subscriptions.coupons.create({subscriptionProcessorId:t}),r)},delete:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.q.subscriptions.coupons.delete({subscriptionProcessorId:t}))}}},62880:function(e,t,r){"use strict";r.d(t,{G:()=>o});var n=r(93199),i=r(95533),o={create:function(e){return(0,n.Cu)(i.a.forms.create(),e)},index:function(e){return(0,n.UT)(i.a.forms.index(e))},show:function(e){return(0,n.UT)(i.a.forms.show(e))},update:function(e){return(0,n.gN)(i.a.forms.update(e.id),e)},destroy:function(e){return(0,n.pC)(i.a.forms.destroy(e))},duplicate:function(e){return(0,n.Cu)(i.a.forms.duplicate(e))}}},26816:function(e,t,r){"use strict";r.d(t,{G:()=>o});var n=r(93199),i=r(13532),o={show:function(){return(0,n.UT)(i.av.marketingEmailAddressSettings.show())},upsert:function(e){return(0,n.Cu)(i.av.marketingEmailAddressSettings.upsert(),e)},footerHtml:function(e){return(0,n.UT)(i.av.marketingEmailAddressSettings.footerHtml(e))}}},5463:function(e,t,r){"use strict";r.d(t,{t:()=>o});var n=r(93199),i=r(13532),o={list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params;return(0,n.UT)(i.av.marketingEmailTemplates.index({params:void 0===t?{}:t}))},create:function(e){return(0,n.Cu)(i.av.marketingEmailTemplates.index(),e)},show:function(e){var t=e.id;return(0,n.UT)(i.av.marketingEmailTemplates.item({id:t}))},update:function(e){var t=e.id,r=e.body;return(0,n.aU)(i.av.marketingEmailTemplates.item({id:t}),r)},deleteTemplate:function(e){var t=e.id;return(0,n.pC)(i.av.marketingEmailTemplates.item({id:t}))},exists:function(){return(0,n.UT)(i.av.marketingEmailTemplates.exists())},disableSaveEmailTemplatePrompt:function(e){return(0,n.gN)(i.av.marketingEmailTemplates.disableSaveEmailTemplatePrompt(),e)}}},94836:function(e,t,r){"use strict";r.d(t,{D:()=>o});var n=r(93199),i=r(13532),o={show:function(){return(0,n.UT)(i.av.settings.mobileApp.show())},update:function(e){return(0,n.aU)(i.av.settings.mobileApp.update(),e)}}},29306:function(e,t,r){"use strict";r.d(t,{c:()=>o});var n=r(93199),i=r(13532),o={getNextPlanWithFeature:function(e,t){return(0,n.UT)(i.av.nextPlanWithFeature.show({planId:e,params:t}))}}},47373:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(93199),i=r(13532),o={index:function(e){return function(){return Object.keys(e).forEach(function(t){null===e[t]&&delete e[t]}),(0,n.UT)(i.av.paywalls.index({params:e}))}},getPaywall:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.UT)(i.av.paywalls.show({paywallId:e,params:t}))},createPaywall:function(e){return(0,n.Cu)(i.av.paywalls.create(),e)},updatePaywall:function(e,t){return(0,n.aU)(i.av.paywalls.update({paywallId:e}),t)},deletePaywall:function(e){return(0,n.pC)(i.av.paywalls.delete({paywallId:e}))},updateMemberAccess:function(e){return(0,n.Cu)(i.av.paywalls.updateMemberAccess({paywallId:e}))}}},3471:function(e,t,r){"use strict";r.d(t,{p:()=>o});var n=r(93199),i=r(13532),o={index:function(e){var t=e.paywallId,r=e.skipDateValidations,o=e.couponStatuses;return function(){return(0,n.UT)(i.av.paywallCoupons.index({params:{paywall_id:t,skip_date_validations:r,status:o}}))}},createPaywallCoupon:function(e){return(0,n.Cu)(i.av.paywallCoupons.create(),{paywall_coupon:e})},updatePaywallCoupon:function(e,t){return(0,n.aU)(i.av.paywallCoupons.update({paywallCouponId:e}),{paywall_coupon:t,forReactQuery:!0})},calculateDiscount:function(e){return(0,n.UT)(i.av.paywallCoupons.calculateDiscount({params:e}))},destroyPaywallCoupon:function(e){return(0,n.pC)(i.av.paywallCoupons.destroy({paywallCouponId:e}))},showPaywallCoupon:function(e){return(0,n.UT)(i.av.paywallCoupons.show({paywallCouponId:e}))}}},30169:function(e,t,r){"use strict";r.d(t,{Y:()=>o});var n=r(93199),i=r(13532),o={index:function(e){var t=e.filters,r=e.order,o=e.page,a=e.perPage,s=e.searchKey,l=s?{search_key:s}:{};return function(){return(0,n.UT)(i.av.admin.paywalls.subscriptions.index({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({filters:t,order:r,page:o,per_page:a},l)}))}},create:function(e){var t=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.create(),t)},cancelAndRefundSubscription:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}),r)},resumeSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}))},refundOptionsSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.UT)(i.av.admin.paywalls.subscriptions.refundOptions({subscriptionProcessorId:t}))}}},4825:function(e,t,r){"use strict";r.d(t,{r:()=>o});var n=r(93199),i=r(13532),o={index:function(e){return(0,n.UT)(i.av.paywalls.affiliates.index(e))},invite:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.invite(),e)},attributions:{create:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.attributions.create(),e)},destroy:function(e){return(0,n.pC)(i.av.paywalls.affiliates.attributions.destroy(),e)}}}},79054:function(e,t,r){"use strict";r.d(t,{O:()=>o});var n=r(93199),i=r(13532),o={create:function(e,t){return(0,n.Cu)(i.av.paywalls.communityMembers.billingInfo.create(e),{billing_info:t})},show:function(e){return(0,n.UT)(i.av.paywalls.communityMembers.billingInfo.show(e))},update:function(e,t){return(0,n.aU)(i.av.paywalls.communityMembers.billingInfo.update(e),{billing_info:t})}}},14640:function(e,t,r){"use strict";r.d(t,{p:()=>o});var n=r(93199),i=r(92463),o={create:function(e){return(0,n.Cu)(i.yT.create(),e)},refresh:function(){return(0,n.UT)(i.yT.refresh())}}},43445:function(e,t,r){"use strict";r.d(t,{W:()=>o});var n=r(93199),i=r(13532),o={list:function(e){var t=e.params;return(0,n.UT)(i.av.segments.index({params:void 0===t?{}:t}))},delete:function(e){var t=e.id;return(0,n.pC)(i.av.segments.detail({id:t}))},create:function(e){var t=e.title,r=e.rules,o=e.visible,a=e.community_segment_consumer_attributes;return(0,n.Cu)(i.av.segments.index(),{title:t,rules:r,visible:o,community_segment_consumer_attributes:a})},show:function(e){var t=e.id;return(0,n.UT)(i.av.segments.detail({id:t}))},update:function(e){var t=e.id,r=e.title,o=e.rules;return(0,n.aU)(i.av.segments.detail({id:t}),{title:r,rules:o})},duplicate:function(e){var t=e.id,r=e.title;return(0,n.Cu)(i.av.segments.duplicate({id:t}),{title:r})},usageStatus:function(e){var t=e.id;return(0,n.UT)(i.av.segments.usageStatus({id:t}))},consumers:function(e){var t=e.id,r=e.params;return(0,n.UT)(i.av.segments.consumers({id:t,params:void 0===r?{}:r}))}}},16252:function(e,t,r){"use strict";r.d(t,{F:()=>nX});var n=r(85893),i=r(67294),o=r(25362),a=r(88767),s=r(52928),l=r(88990),c=r(91149),u=r(81190),d=r(96486),f=r(70442),p=r(35756),m=r(72624),b=r(93291),h=r(52293),y=r(84326),v=r(6057),g=r(17617);let _=r.p+"static/images/bot-builder-canvas-dark-5146bc285d97cd03.png",x=r.p+"static/images/bot-builder-canvas-f4114a227282aa73.png";var j=r(41342),w=r(93199),O=r(13532),S=r(85924),k=r(57363),P=r(65121),C=r(41553),N=r(51466),A=r(36394),I=r(8383),E=r(86195),T=r(61853),L=r(51169),D=function(){return(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)(L.a,{})})},M=r(45665),R=r(18943),B=function(){var e=(0,M.h$)().data,t=(0,M.qN)();return(0,n.jsx)("div",{className:"flex w-full items-center pt-4",children:e&&!(null==e?void 0:e.hide_preview_banner)&&(0,n.jsxs)(R.v,{className:"bg-secondary border-primary mx-5 flex w-full flex-row justify-between rounded border text-base",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(k.JO,{className:"mr-3",type:"20-info",size:20}),(0,n.jsx)(C.Z.BodySm,{children:(0,y.t)("community_bot.bot_builder.preview_banner")})]}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(k.JO,{type:"20-close",size:20,className:"cursor-pointer",onClick:function(e){e.preventDefault(),t.mutate({hide_preview_banner:!0})}})})]})})},F=r(87545),z=r(48298),U=function(){var e=(0,h.Gc)().control,t=(0,h.qo)({control:e}),r=(0,i.useMemo)(function(){var e,r;return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,d.omit)(t,["id","enabled","members_filters","send_welcome_message"])),r=r={avatar:t.avatar||t.avatar_signed_id},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e},[t]);return(0,z.c)(r,500)};function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(){var e=(0,T.Dk)().messages,t=G((0,i.useState)(!1),2),r=t[0],o=t[1],a=G((0,i.useState)(),2),s=a[0],l=a[1];(0,I.e)({currentChatId:s,isPreview:!0});var c=(0,T.Dk)(),u=c.setCurrentBotProfile,d=c.setPreviewChat,f=c.currentBotProfile,p=U(),m=(0,i.useCallback)(function(){p&&(o(!0),A.MW.previewChat({community_bot_profile:p}).then(function(e){d(e),l(e.id),u(e.community_bot_profile)}).catch(function(e){console.error(e)}).finally(function(){o(!1)}))},[p,u,d]);(0,i.useEffect)(function(){m()},[m]);var b=(null==e?void 0:e.length)>0;return s?(0,n.jsxs)("div",{className:"flex h-[calc(100vh-67px)] grow flex-col items-center justify-center gap-7 pb-10",children:[(0,n.jsx)(B,{}),(0,n.jsx)("div",{className:"bg-primary border-primary relative h-full min-w-[436px] max-w-[628px] overflow-hidden rounded-3xl border pb-0 pt-2 shadow-xl md:w-1/2",children:r?(0,n.jsx)(D,{}):(0,n.jsx)(E.o,{previewId:s,isDms:!0,onRestart:m},"".concat(s,"-").concat(null==f?void 0:f.updated_at))}),b&&(0,n.jsx)(F.J,{onClick:m})]}):null},V=r(94184),H=r.n(V),W=r(80171),Q=function(e){var t=e.children,r=e.path;return(0,n.jsx)(s.OL,{exact:!0,to:r,className:"hover:bg-secondary hover:border-dark flex items-center justify-center rounded-lg border border-transparent p-2.5 transition-all duration-150 ease-linear",activeClassName:"bg-tertiary",isActive:function(e,t){return t.pathname===r},children:t})},J=function(e){var t=e.label,r=e.path,i=e.icon,o=!!(0,f.$B)({path:r,exact:!0});return(0,n.jsx)(W.T,{interactive:!1,content:t,placement:"right",arrow:!1,children:(0,n.jsx)(Q,{path:r,children:(0,n.jsx)(k.JO,{type:i,className:H()({"text-default":!o,"text-selector-active":o}),size:20})})},t)},K=r(78456),$=r(82705),X=function(){var e=(0,j.wh)(),t=e.currentCommunityMember,r=e.currentCommunitySettings,n=(0,f.UO)().botPublicId,i=(0,f.TH)().pathname,o=function(e){return i.includes(e)};return[{label:(0,y.t)("community_bot.bot_builder.customize_page.title"),icon:o($.X.customize({botPublicId:n}))?"20-bot-customize-active":"20-bot-customize",path:$.X.customize({botPublicId:n}),enabled:(0,K.vb)(t)},{label:(0,y.t)("community_bot.bot_builder.audience_page.title"),icon:o($.X.audience({botPublicId:n}))?"20-audience-active":"20-audience",path:$.X.audience({botPublicId:n}),enabled:(0,K.vb)(t)},{label:(0,y.t)("community_bot.bot_builder.behavior_page.title"),icon:"20-bot-behavior",path:$.X.behavior({botPublicId:n}),enabled:(0,K.vb)(t)},{label:(0,y.t)("community_bot.bot_builder.knowledge_page.title"),icon:o($.X.knowledge({botPublicId:n}))?"20-bot-content-active":"20-bot-content",path:$.X.knowledge({botPublicId:n}),enabled:(0,K.vb)(t)},{label:(0,y.t)("community_bot.bot_builder.automations_page.title"),icon:o($.X.automations({botPublicId:n}))?"20-automation-cursor-active":"20-automation-cursor",path:$.X.automations({botPublicId:n}),enabled:(0,K.vb)(t)&&!!(null==r?void 0:r.ai_automations_enabled)}]},Y=function(){var e=X();return(0,n.jsx)("div",{className:"bg-primary border-r-primary flex h-[calc(100vh-67px)] w-16 shrink-0 flex-col items-center justify-start space-y-2 border-r p-3","data-testid":"collapsed-sidebar",children:e.map(function(e){var t=e.label,r=e.path,i=e.icon;return e.enabled?(0,n.jsx)(J,{label:t,path:r,icon:i},t):null})})},ee=r(69260),et=r.n(ee),er=(0,i.createContext)(null);er.displayName="ProgressContext";var en=function(){var e=(0,i.useContext)(er);if(!e)throw Error("useProgress must be used within a ProgressProvider");return e},ei=function(e){var t=e.children,r=e.communityBotProfileId,o=(0,h.Gc)().watch,s=o("space_ids")||[],l=o("snippet_ids")||[],c=(0,a.useQuery)(["progress",r,s,l],function(){return(0,w.UT)(O.av.communityBot.resources.progress({params:{spaceIds:s,snippetIds:l}}))},{enabled:!!(r&&(s.length||l.length)),refetchInterval:function(e){return(null==e?void 0:e.progress)!==100&&800},staleTime:0}),u=c.data,d=c.isError,f=(0,i.useMemo)(function(){if(d)return{totalProgress:100,isLoading:!1,spaceProgresses:[],snippetProgresses:[]};var e,t=(null==u?void 0:u.spaces)||[],r=(null==u?void 0:u.snippets)||[];if(0===t.length+r.length)return{totalProgress:100,isLoading:!1,spaceProgresses:t,snippetProgresses:r};var n=null!=(e=null==u?void 0:u.progress)?e:100;return{totalProgress:n,isLoading:100!==n,spaceProgresses:t,snippetProgresses:r}},[u,d]);return(0,n.jsx)(er.Provider,{value:f,children:t})},eo=r(29306),ea=r(79869),es=r(94375),el=r(39905),ec=r(14596),eu=r(85712);function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ef(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function ep(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ef(o,n,i,a,s,"next",e)}function s(e){ef(o,n,i,a,s,"throw",e)}a(void 0)})}}function em(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var eb=function(e){var t,r=e.agent,o=(0,eu.k)(r),a=(0,ec.g)(r),s=(t=(0,i.useState)(r.enabled),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ed(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=(0,b.vQ)({id:r.id}).mutate,d=(0,j.wh)(),f=d.currentCommunity,p=d.refetch,m=(0,ea.w)();(0,i.useEffect)(function(){c(r.enabled)},[r.enabled]);var h=function(){u({enabled:!0},{onSuccess:function(){c(!0)},onError:function(e){console.error("Failed to enable agent:",e),c(!1)}})};return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,n.jsx)(el.z,{type:"submit",form:"bot-builder-form",variant:"secondary",children:(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.header_buttons.save.title")})}),l?(0,n.jsx)(el.z,{variant:"circle",onClick:function(e){e.preventDefault(),a.show({agent:r})},children:(0,n.jsx)(C.Z.LabelSm,{color:"white",weight:"semibold",children:(0,y.t)("community_bot.bot_builder.header_buttons.disable.title")})}):(0,n.jsx)(el.z,{variant:"circle",onClick:function(e){e.preventDefault(),(null==f?void 0:f.ai_agents_feature_flag_enabled)?o.show({agent:r}):ep(function(){var e,t,r,n;return em(this,function(i){switch(i.label){case 0:return[4,eo.c.getNextPlanWithFeature((null!=(t=null==f||null==(e=f.current_plan)?void 0:e.id)?t:"").toString(),{plan_feature_flag:"ai_agents"})];case 1:return n=(null==(r=i.sent())?void 0:r.plan_tier)||"enterprise",[4,m.show({planTier:n,source:es.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,y.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,y.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,y.t)("pricing_plans.upgrade_modal.actions.go_to_community_ai"),showPlanDetails:!0,onSuccess:function(){h()},onCloseModal:function(){return ep(function(){var e,t;return em(this,function(r){switch(r.label){case 0:return[4,p()];case 1:return(null==(t=r.sent())||null==(e=t.data)?void 0:e.current_community.ai_agents_feature_flag_enabled)&&h(),[2]}})})()}})];case 2:return i.sent(),[2]}})})()},children:(0,n.jsx)(C.Z.LabelSm,{color:"white",weight:"semibold",children:(0,y.t)("community_bot.bot_builder.header_buttons.enable.title")})})]})},eh=JSON.parse('{"assets":[{"id":"4","layers":[{"ind":3,"ty":4,"ks":{},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[8,8]},"r":{"a":0,"k":0},"s":{"a":0,"k":[16,16]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,-3.31],[-3.31,0],[0,3.31],[3.31,0]],"o":[[-3.31,0],[0,3.31],[3.31,0],[0,-3.31],[0,0]],"v":[[6,0],[0,6],[6,12],[12,6],[6,0]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.19,0.16],[0.16,-0.19],[0,0],[0,0],[0.18,-0.18],[-0.18,-0.18],[0,0],[-0.12,0],[-0.08,0.1]],"o":[[0.16,-0.19],[-0.2,-0.16],[0,0],[0,0],[-0.18,-0.18],[-0.18,0.18],[0,0],[0.09,0.09],[0.13,-0.01],[0,0]],"v":[[8.15,4.79],[8.09,4.15],[7.45,4.21],[5.07,7.13],[4.22,6.28],[3.58,6.28],[3.58,6.92],[4.78,8.12],[5.12,8.25],[5.45,8.09]]}}},{"ty":"fl","c":{"a":0,"k":[0.09,0.64,0.29,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"7","layers":[{"ind":6,"ty":0,"ks":{},"w":16,"h":16,"ip":0,"op":173.8,"st":0,"refId":"4"}]},{"id":"13","layers":[{"ind":12,"ty":4,"ks":{},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[3,3]},"r":{"a":0,"k":0},"s":{"a":0,"k":[6,6]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.26,0],[0,0],[-0.01,0.26],[0,0],[-0.26,-0.01],[0,-0.26],[0,0],[0,0],[0.01,-0.26]],"o":[[0,0.26],[0,0],[-0.26,-0.01],[0,0],[0,-0.26],[0.26,0],[0,0],[0,0],[0.26,0],[0,0]],"v":[[3.81,3.45],[3.34,3.91],[1.02,3.88],[0.56,3.4],[0.6,1.08],[1.07,0.62],[1.54,1.09],[1.5,2.95],[3.35,2.98],[3.81,3.45]]}}},{"ty":"fl","c":{"a":0,"k":[0.33,0.35,0.38,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"18","layers":[{"ind":17,"ty":4,"ks":{},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[2.5,3]},"r":{"a":0,"k":0},"s":{"a":0,"k":[5,6]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-0.01,0.26],[0,0],[0,0],[0,0.26],[-0.26,0],[0,0],[0,-0.26],[0,0],[0.26,0]],"o":[[-0.26,-0.01],[0,0],[0,0],[-0.26,0],[0,-0.26],[0,0],[0.26,0],[0,0],[-0.01,0.26],[0,0]],"v":[[3.22,3.89],[2.76,3.41],[2.79,1.55],[0.94,1.52],[0.48,1.05],[0.95,0.59],[3.27,0.63],[3.73,1.11],[3.7,3.43],[3.22,3.89]]}}},{"ty":"fl","c":{"a":0,"k":[0.33,0.35,0.38,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"23","layers":[{"ind":22,"ty":4,"ks":{},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[7.5,4.5]},"r":{"a":0,"k":0},"s":{"a":0,"k":[15,9]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,0.26],[2.64,0.05],[0.86,-1.52],[0.22,0.13],[-0.13,0.23],[-2.1,-0.04],[0.05,-3.16],[0,0],[0.26,0.01]],"o":[[-0.26,0],[0.05,-2.64],[-1.75,-0.03],[-0.13,0.23],[-0.23,-0.13],[1.04,-1.82],[3.16,0.05],[0,0],[0,0.26],[0,0]],"v":[[10.39,6.56],[9.93,6.08],[5.23,1.22],[0.98,3.64],[0.35,3.82],[0.17,3.18],[5.25,0.28],[10.86,6.1],[10.86,6.1],[10.39,6.56]]}}},{"ty":"fl","c":{"a":0,"k":[0.33,0.35,0.38,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"28","layers":[{"ind":27,"ty":4,"ks":{},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[7.5,4.5]},"r":{"a":0,"k":0},"s":{"a":0,"k":[15,9]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":173.8,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-1.3,2.3],[-0.23,-0.13],[0.13,-0.22],[2.75,1.56],[-0.04,2.09],[-0.26,0],[0,-0.26],[-1.52,-0.86]],"o":[[2.3,1.3],[0.13,-0.23],[0.22,0.13],[-1.56,2.75],[-1.82,-1.04],[0,-0.26],[0.26,0],[-0.03,1.75],[0,0]],"v":[[3.54,4.91],[10.05,3.11],[10.7,2.93],[10.87,3.57],[3.07,5.73],[0.18,0.65],[0.65,0.19],[1.11,0.67],[3.54,4.91]]}}},{"ty":"fl","c":{"a":0,"k":[0.33,0.35,0.38,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"31","layers":[{"ind":15,"ty":0,"parent":11,"ks":{},"w":6,"h":6,"ip":0,"op":173.8,"st":0,"refId":"13"},{"ind":11,"ty":3,"ks":{},"ip":0,"op":173.8,"st":0},{"ind":20,"ty":0,"parent":16,"ks":{},"w":5,"h":6,"ip":0,"op":173.8,"st":0,"refId":"18"},{"ind":16,"ty":3,"ks":{"p":{"a":0,"k":[10,10]}},"ip":0,"op":173.8,"st":0},{"ind":25,"ty":0,"parent":21,"ks":{},"w":15,"h":9,"ip":0,"op":173.8,"st":0,"refId":"23"},{"ind":21,"ty":3,"ks":{"p":{"a":0,"k":[1,0]}},"ip":0,"op":173.8,"st":0},{"ind":30,"ty":0,"parent":26,"ks":{},"w":15,"h":9,"ip":0,"op":173.8,"st":0,"refId":"28"},{"ind":26,"ty":3,"ks":{"p":{"a":0,"k":[0,7]}},"ip":0,"op":173.8,"st":0}]}],"fr":60,"h":24,"ip":0,"layers":[{"ind":9,"ty":0,"parent":2,"ks":{"a":{"a":0,"k":[8,8]},"o":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":124.8,"s":[0],"i":{"x":0.2,"y":1},"o":{"x":0.8,"y":0}},{"t":172.8,"s":[100],"h":1}]},"p":{"a":0,"k":[8,8]},"s":{"a":1,"k":[{"t":0,"s":[50,50],"i":{"x":[1,1],"y":[1,1]},"o":{"x":[0,0],"y":[0,0]}},{"t":124.8,"s":[50,50],"i":{"x":[0.2,0.2],"y":[1,1]},"o":{"x":[0.8,0.8],"y":[0,0]}},{"t":172.8,"s":[100,100],"h":1}]}},"w":16,"h":16,"ip":0,"op":173.8,"st":0,"refId":"7"},{"ind":2,"ty":3,"parent":1,"ks":{"p":{"a":0,"k":[4,4]}},"ip":0,"op":173.8,"st":0},{"ind":33,"ty":0,"parent":10,"ks":{"a":{"a":0,"k":[8,8]},"o":{"a":1,"k":[{"t":0,"s":[100],"h":1},{"t":118.8,"s":[100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":140.4,"s":[0],"h":1},{"t":172.8,"s":[0],"h":1}]},"p":{"a":0,"k":[8,8]},"r":{"a":1,"k":[{"t":0,"s":[-45],"i":{"x":0.2,"y":1},"o":{"x":0.8,"y":0}},{"t":42,"s":[0],"h":1},{"t":172.8,"s":[0],"h":1}]},"s":{"a":1,"k":[{"t":0,"s":[0,0],"i":{"x":[0.2,0.2],"y":[1,1]},"o":{"x":[0.8,0.8],"y":[0,0]}},{"t":42,"s":[100,100],"i":{"x":[1,1],"y":[1,1]},"o":{"x":[0,0],"y":[0,0]}},{"t":172.8,"s":[100,100],"h":1}]}},"w":16,"h":16,"ip":0,"op":173.8,"st":0,"refId":"31"},{"ind":10,"ty":3,"parent":1,"ks":{"a":{"a":0,"k":[8,8]},"p":{"a":0,"k":[12,12]},"r":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":42,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":118.8,"s":[360],"h":1},{"t":172.8,"s":[360],"h":1}]}},"ip":0,"op":173.8,"st":0},{"ind":1,"ty":3,"parent":0,"ks":{},"ip":0,"op":173.8,"st":0},{"ind":0,"ty":3,"ks":{},"ip":0,"op":173.8,"st":0}],"meta":{"g":"https://jitter.video"},"op":172.8,"v":"5.7.4","w":24}'),ey=r(75148),ev=function(e){var t=e.onClick;return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)(ey.h,{name:"20-arrow-left",onClick:t,ariaLabel:(0,y.t)("back"),iconSize:20,buttonSize:32}),(0,n.jsx)("div",{className:"border-primary h-7 border-l"})]})},eg=function(e){var t=e.isEditing,r=e.transformValue,i=e.onBlur,o=e.maxLength,a=(0,(0,h.Gc)().register)("name"),s=a.ref,l=a.onChange,c=a.onBlur;return(0,n.jsx)("input",{autoComplete:"off",type:"text","data-1p-ignore":!0,ref:s,name:"name",spellCheck:"false",onChange:function(e){(0,d.isFunction)(r)&&(e.target.value=r(e.target.value)),l(e)},onBlur:function(e){c(e),null==i||i(e)},maxLength:o,className:H()("placeholder:text-light w-full min-w-[6rem] max-w-full border-0 bg-transparent p-0 text-xl font-semibold placeholder:opacity-100 focus:outline-none focus:ring-0",{hidden:!t})})},e_=function(e){var t,r,i=e.isEditing,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isEditing"]),a=(0,(0,h.Gc)().getValues)("name");return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={className:H()("flex h-7 min-w-0 flex-col",{hidden:i}),children:(0,n.jsx)("span",{className:H()("hover:border-dark focus:border-dark text-dark truncate border-b border-dashed border-transparent text-xl font-semibold"),children:a})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ej=function(){var e,t=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ex(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ex(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1],a=(0,h.Gc)().setFocus;return(0,i.useEffect)(function(){r&&a("name")},[r,a]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e_,{isEditing:r,onClick:function(){return o(!0)}}),(0,n.jsx)(eg,{isEditing:r,onBlur:function(){return o(!1)},maxLength:50})]})};function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eS=function(e){var t=e.agent,r=e.onClose,o=en(),a=o.totalProgress,s=o.isLoading,l=(0,i.useRef)(null),c=(0,i.useRef)(!1),u=eO((0,i.useState)(!1),2),d=u[0],f=u[1],p=eO((0,i.useState)(!1),2),m=p[0],b=p[1],h=eO((0,i.useState)(!1),2),v=h[0],g=h[1];return((0,i.useEffect)(function(){if(s){f(!0),b(!0),g(!1);return}if(d&&100===a){b(!1);var e=setTimeout(function(){g(!0)},1500);return function(){return clearTimeout(e)}}},[s,d,a]),(0,i.useEffect)(function(){if(null==(e=l.current)?void 0:e.animationItem){var e,t=l.current.animationItem;if(v)return void t.pause();s&&!c.current?(c.current=!0,t.loop=!1,t.playSegments([0,42],!0)):s?(t.setSegment(42,119),t.loop=!0,t.play()):!s&&100===a&&d&&(t.loop=!1,t.playSegments([119,172],!0))}},[s,d,a,v]),d||s)?(0,n.jsx)("div",{className:"text-dark border-primary bg-primary sticky flex w-full items-center justify-between border-b px-5 py-4",children:(0,n.jsxs)("div",{className:"bg-primary flex h-full w-full justify-between",children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-6 truncate",children:[(0,n.jsx)(ev,{onClick:r}),(0,n.jsx)(ej,{})]}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-end gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"overflow-hidden transition-all duration-500 ease-in-out ".concat(m&&!v?"max-h-6 opacity-100":"max-h-0 opacity-0"),children:(0,n.jsx)(C.Z.LabelSm,{color:"text-light",children:(0,y.t)("community_bot.bot_builder.knowledge_page.content_loading_message",{progress:a})})}),(0,n.jsx)("div",{className:"transition-all duration-500 ease-in-out ".concat(v?"w-0 opacity-0":"w-6 opacity-100"),children:(0,n.jsx)(et(),{lottieRef:l,animationData:eh,autoplay:!1,loop:!1})})]}),(0,n.jsx)(eb,{agent:t})]})]})}):(0,n.jsx)("div",{className:"text-dark border-primary bg-primary sticky flex w-full items-center justify-between border-b px-5 py-4",children:(0,n.jsxs)("div",{className:"bg-primary flex h-full w-full justify-between",children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-6 truncate",children:[(0,n.jsx)(ev,{onClick:r}),(0,n.jsx)(ej,{})]}),(0,n.jsx)("div",{className:"flex w-full items-center justify-end gap-3",children:(0,n.jsx)(eb,{agent:t})})]})})},ek=r(72903),eP=r(1041),eC=r(57596),eN=r(89539),eA=Object.assign(function(e){var t,r,i=e.defaultFilterNames,o=e.stateFilters,a=e.className,s=e.children,l=e.platformFilters,c=e.profileFieldFilters,u=e.showBackground,f=(0,eN.t)({defaultFilterNames:void 0===i?[]:i}),p=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f),r=r={displayedFilters:(0,d.merge)(f.displayedFilters,o),platformFilters:l,profileFieldFilters:void 0===c?[]:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);return(0,n.jsx)(eP.N.Provider,{value:p,children:(0,n.jsx)("div",{className:H()("flex w-full items-center justify-between gap-x-1 overflow-x-scroll rounded-b-md px-6 py-3",(void 0===u||u)&&"bg-primary",a),children:s})})},{Panel:eC.S,ClearButton:ek.z}),eI=function(e){return e?"bg-secondary text-[var(--color-text-disabled)]":""},eE=function(e){return e?"text-[var(--color-text-disabled)]":void 0},eT=function(e){return e?"text-[var(--color-icon-disabled)]":"text-light"},eL=function(e){return e?"var(--color-icon-disabled)":"#A5A9AD"},eD=function(){var e=(0,h.Gc)(),t=e.getValues,r=e.watch,i=e.setValue,o=t("send_welcome_message"),a=t("welcome_message"),s=r("allow_direct_messages"),l=r("allow_search_conversations"),c=r("send_welcome_message"),u=!s,d=u||!l,f=u||!c;return(0,n.jsxs)("div",{className:"border-primary border-t px-6 py-5",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.audience_page.touchpoints_title")})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(C.Z.LabelSm,{color:"text-light",children:(0,y.t)("community_bot.bot_builder.audience_page.touchpoints_description")})}),(0,n.jsx)("div",{className:"border-primary flex h-12 border-collapse items-center rounded-xl border px-4 py-3 ".concat(eI(u)),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",shouldUseCheckmark:!1,name:"allow_direct_messages",onToggleChange:function(e){e?i("allow_search_conversations",!0):(i("allow_search_conversations",!1),i("send_welcome_message",!1))}}),(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:eE(u),children:(0,y.t)("community_bot.bot_builder.audience_page.allow_direct_messages")}),(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.audience_page.allow_direct_messages_tooltip"),className:"flex",children:(0,n.jsx)(k.JO,{type:"16-question-mark",className:"".concat(eT(u)),size:16,useWithStrokeCurrentColor:!0})})]})}),s&&(0,n.jsxs)("div",{className:"mt-3 flex items-start",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"48.5",viewBox:"0 0 13 48.5",fill:"none",className:"shrink-0",style:{marginRight:"8px",marginLeft:"30px"},children:(0,n.jsx)("path",{opacity:"0.5",d:"M1 1V13.75M14 26.5H7C3.68629 26.5 1 23.8137 1 20.5V13.75M1 13.75V49.5",stroke:eL(u),strokeLinecap:"round"})}),(0,n.jsx)("div",{className:"border-primary mb-3 flex h-12 flex-1 border-collapse items-center rounded-xl border px-4 py-3 ".concat(eI(d)),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",shouldUseCheckmark:!1,name:"allow_search_conversations",disabled:u}),(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:eE(d),children:(0,y.t)("community_bot.bot_builder.audience_page.allow_search_conversations")}),(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.audience_page.allow_search_conversations_tooltip"),className:"flex",children:(0,n.jsx)(k.JO,{type:"16-question-mark",className:"".concat(eT(d)),size:16,useWithStrokeCurrentColor:!0})})]})})]}),s&&(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"48.5",viewBox:"0 0 13 48.5",fill:"none",className:"shrink-0",style:{marginRight:"8px",marginLeft:"30px"},children:(0,n.jsx)("path",{opacity:"0.5",d:"M1 0.5V20C1 23.3137 3.68629 26 7 26H14",stroke:eL(u),strokeLinecap:"round"})}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,n.jsx)("div",{className:"border-primary flex h-12 border-collapse items-center rounded-xl border px-4 py-3 ".concat(eI(f)," ").concat(o?"rounded-b-none":""),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",shouldUseCheckmark:!1,name:"send_welcome_message",disabled:u}),(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:eE(f),children:(0,y.t)("community_bot.bot_builder.audience_page.send_welcome_message")}),(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.audience_page.welcome_message_tooltip"),className:"flex",children:(0,n.jsx)(k.JO,{type:"16-question-mark",className:"".concat(eT(f)),size:16,useWithStrokeCurrentColor:!0})})]})}),o&&(0,n.jsx)("div",{className:"border-primary rounded-b-xl border border-t-0 px-4 pb-4 pt-3 ".concat(eI(f)),children:(0,n.jsx)(P.T,{editorClassName:"bg-secondary p-3 text-sm text-light border border-primary rounded-xl",disabled:!0,editable:!1,value:null==a?void 0:a.body,showMenuBar:!1})})]})]}),(0,n.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(k.JO,{type:"16-info",size:16,className:"text-light"}),(0,n.jsx)(C.Z.LabelSm,{children:(0,y.t)("community_bot.bot_builder.audience_page.workflows_note")})]}),(0,n.jsx)("svg",{width:"56",height:"54",viewBox:"0 0 72 69",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M32.4521 3V8.52226M53.278 11.6267L49.373 15.5316M15.5312 49.373L11.6263 53.278M8.52226 32.4521H3M15.5312 15.5312L11.6263 11.6263M44.6511 68.4112L30.4405 31.6307C30.1526 30.8856 30.8856 30.1526 31.6307 30.4405L68.4112 44.6511C69.1294 44.9283 69.2097 45.9124 68.5463 46.303L54.7469 54.42C54.6118 54.4995 54.4995 54.6118 54.42 54.7469L46.303 68.5463C45.9124 69.2097 44.9283 69.1294 44.6511 68.4112Z",stroke:"#A5A9AD",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})},eM=r(10586),eR=r(11570),eB=r(4117),eF=r(62089),ez=r(90380),eU=r(28847),eZ=r(22937),eG=r(40768),eq=r(2527),eV=r(41040),eH=r(1863),eW=r(94248);function eQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eJ=eB.f2.RoleFilter,eK=eB.f2.SpaceGroupsFilterV2,e$=eB.f2.SpacesFilter,eX=eB.f2.MemberTagsFilter,eY=eB.f2.PaywallsFilter,e0=eB.f2.EventsFilter,e1=eB.f2.HasPastDueSubscriptionFilter,e2=eB.f2.JoinedCommunityDaysAgoFilter,e3=eB.f2.LastLoggedInDaysAgoFilter,e6=eB.f2.AvatarSet,e4=eB.f2.ActivityScoreFilter,e5=eB.f2.NameFilter,e8=eB.f2.BioFilter,e9=eB.f2.HeadlineFilter,e7=eB.f2.LocationFilter,te=eB.f2.InvitationLinksFilter,tt=eB.f2.LevelFilter,tr=eB.f2.EmailFilter,tn=eB.f2.EmailMarketingFilter,ti=eB.f2.SegmentFilter,to=eB.f2.AccessGroupsFilter,ta=[{name:"joined_community_days_ago",component:e2,label:(0,y.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,y.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:e3,label:(0,y.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],ts=[{name:"segment_id",component:ti,label:(0,y.t)("members_directory.header.search.filters.segments.singular_title")},{name:"tags",component:eX,label:(0,y.t)("members_directory.header.search.filters.tags.singular_title")},{name:"name",component:e5,label:(0,y.t)("members_directory.header.search.filters.name")},{name:"bio",component:e8,label:(0,y.t)("members_directory.header.search.filters.bio")},{name:"email",component:tr,label:(0,y.t)("members_directory.header.search.filters.email")},{name:"subscribed_to_marketing_emails",component:tn,label:(0,y.t)("members_directory.header.search.filters.email_marketing")},{name:"member",component:eR.n,label:(0,y.t)("members_directory.header.search.filters.member")},{name:"invitation_link_ids",component:te,label:(0,y.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},{name:"role",component:eJ,label:(0,y.t)("members_directory.header.search.filters.role")},{name:"spaces",component:e$,label:(0,y.t)("members_directory.header.search.filters.spaces.singular_title")},{name:"space_groups",component:eK,label:(0,y.t)("members_directory.header.search.filters.space_groups.singular_title")},{name:"headline",component:e9,label:(0,y.t)("members_directory.header.search.filters.headline")},{name:"location",component:e7,label:(0,y.t)("members_directory.header.search.filters.location")},{name:"paywalls",component:eY,label:(0,y.t)("members_directory.header.search.filters.paywalls.singular_title")},{name:"events",component:e0,label:(0,y.t)("members_directory.header.search.filters.events.singular_title")},{name:"has_past_due_subscription",component:e1,label:(0,y.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(function(e){if(Array.isArray(e))return eQ(e)}(ta)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(ta)||function(e,t){if(e){if("string"==typeof e)return eQ(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eQ(e,t)}}(ta)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{name:"is_avatar_set",component:e6,label:(0,y.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:e4,label:(0,y.t)("members_directory.header.search.filters.activity_score")},{name:"level",component:tt,label:(0,y.t)("members_directory.header.search.filters.level")},{name:"access_group_ids",component:(0,eM.G)(to,"audience"),label:(0,y.t)("members_directory.header.search.filters.access_groups.singular_title")}]),tl=function(){var e=(0,eU.C)({platformFilters:ts,component:eF.L}),t=e.isLoadingProfileFields,r=e.customProfileFields,n=e.filteredDefaultFilters,i=(0,d.flow)(ez.h,eq.$,eG.x,eW.C,eV._,eH.S)(n);return{finalFilters:(0,eZ.c)({filters:i,canShowActivityScoreDisabled:!0}),customProfileFields:r,isLoadingProfileFields:t}};function tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tc(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var td=function(e){var t=e.agent,r=e.filters,o=(0,S.TC)().isDarkAppearance,a=(0,j.wh)().currentCommunitySettings,s=tu((0,i.useState)(null),2),l=s[0],c=s[1],u=tu((0,i.useState)(!1),2),d=u[0],f=u[1],p=(0,i.useRef)(""),m=(0,h.Gc)().getValues,b=m("send_welcome_message"),A=m("welcome_message"),I=!(0,g.BT)(),E=!!(null==a?void 0:a.ai_automations_enabled);(0,i.useEffect)(function(){var e=JSON.stringify(r);p.current!==e&&(p.current=e,f(!0),(0,w.Cu)(O.av.communityBot.agents.audienceCount(),{members_filters:r}).then(function(t){p.current===e&&(c(t.total_count),f(!1))}).catch(function(){p.current===e&&f(!1)}))},[r]);var T=tl(),L=T.finalFilters,D=T.isLoadingProfileFields,M=T.customProfileFields,R=function(){window.location.href="/settings/ai-agents/agents"};return!t||D?null:E?(0,n.jsxs)("div",{className:"audience-page flex flex-col",children:[(0,n.jsx)(eS,{agent:t,onClose:R}),(0,n.jsxs)("div",{className:"flex h-full",style:{backgroundImage:"url(".concat(o?_:x,")")},children:[(0,n.jsx)(Y,{}),(0,n.jsxs)("div",{className:"bg-primary border-r-primary h-[calc(100vh-67px)] w-[586px] flex-col overflow-y-auto border-r",children:[(0,n.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,n.jsx)(C.Z.LabelLg,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.audience_page.title")})}),(0,n.jsx)("div",{className:"h-auto px-6 pt-5",children:(0,n.jsxs)("div",{className:"pb-5",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.audience_page.targeting_title")})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(C.Z.LabelSm,{color:"text-light",children:(0,y.t)("community_bot.bot_builder.audience_page.targeting_description")})}),(0,n.jsxs)("div",{className:"border-primary border-collapse rounded-t-xl border bg-white px-6 py-3",children:[(0,n.jsx)(k.JO,{type:"16-audience",size:16,className:"mr-2"}),(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"text-light",children:(0,y.t)("community_bot.bot_builder.audience_page.audience_label_new")}),(0,n.jsx)("span",{className:"ml-1",children:(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"text-dark",children:d||null===l?"-":l})})]}),(0,n.jsx)("div",{className:"border-primary border-collapse rounded-b-xl border-x border-b",children:(0,n.jsx)(eA,{stateFilters:r,platformFilters:L,profileFieldFilters:M,showBackground:!1,children:(0,n.jsx)(eA.Panel,{children:(0,n.jsx)(v.z,{})})})})]})}),(0,n.jsx)(eD,{})]}),I&&(0,n.jsx)(q,{})]})]}):(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(eS,{agent:t,onClose:R}),(0,n.jsxs)("div",{className:"flex h-full",style:{backgroundImage:"url(".concat(o?_:x,")")},children:[(0,n.jsx)(Y,{}),(0,n.jsxs)("div",{className:"bg-primary border-r-primary w-[453px] flex-col border-r",children:[(0,n.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,n.jsx)(C.Z.LabelLg,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.audience_page.title")})}),(0,n.jsxs)("div",{className:"h-auto px-6",children:[(0,n.jsx)(N.l.Label,{fieldId:"members_filters",label:(0,y.t)("community_bot.bot_builder.audience_page.filters_label"),hideBorder:!0,labelClassName:"cursor-text text-sm"}),(0,n.jsxs)("div",{className:"bg-secondary border-primary border-collapse rounded-t-lg border px-6 py-3",children:[(0,n.jsx)(k.JO,{type:"16-audience",size:16,className:"mr-2"}),(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"text-light",children:(0,y.t)("community_bot.bot_builder.audience_page.audience_label")}),(0,n.jsx)("span",{className:"ml-1",children:(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"text-dark",children:d||null===l?"-":l})})]}),(0,n.jsx)("div",{className:"border-primary border-collapse rounded-b-lg border-x border-b",children:(0,n.jsx)(eA,{stateFilters:r,platformFilters:L,profileFieldFilters:M,children:(0,n.jsx)(eA.Panel,{children:(0,n.jsx)(v.z,{})})})})]}),(0,n.jsx)("div",{className:"my-2 flex w-full items-center justify-center",children:(0,n.jsx)(k.JO,{type:"audience-dots"})}),(0,n.jsx)("div",{className:"h-auto px-6",children:(0,n.jsxs)("div",{className:"border-primary rounded border px-6 pb-3",children:[(0,n.jsx)(N.l.Checkbox,{className:"flex w-auto font-normal",tooltipClassName:"mt-[2px]",name:"send_welcome_message",description:(0,y.t)("community_bot.bot_builder.audience_page.welcome_message_tooltip"),isDescriptionTooltip:!0,label:(0,y.t)("community_bot.bot_builder.audience_page.send_welcome_message")}),b&&(0,n.jsx)(P.T,{className:"mt-2",editorClassName:"mt-2 bg-secondary p-3 text-sm border-t-md rounded-t-md rounded-br-md",disabled:!0,editable:!1,value:null==A?void 0:A.body,showMenuBar:!1})]})})]}),I&&(0,n.jsx)(q,{})]})]})},tf=r(28116);function tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tm=r(64981),tb=r(11294),th=r(4501),ty=r(41051),tv=r(84555),tg=r(1168),t_=r(85798),tx=r(34062),tj=r(76454),tw=r(71923);function tO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tk(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tP=function(e){var t,r=e.workflow,o=e.agentId,s=r.id,l=r.status,c=r.steps,u=!!(null==c?void 0:c.length),d=l===tv.qN.ACTIVE,f=l===tv.qN.DRAFT,p=(0,a.useQueryClient)(),m=(t=(0,i.useState)(d),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tO(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tO(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],h=m[1];(0,i.useEffect)(function(){h(d)},[d]);var y=(0,tw.q)({workflowId:s,isActive:d}),v=y.onChangeActiveStatus,g=y.isLoading;return(0,n.jsx)(tj.p,{isWorkflowActive:b,isDisabled:!u||f,hasNoActions:!u,isDraft:f,isLoading:g,onChange:function(){h(!b);var e=d?tv.qN.INACTIVE:tv.qN.ACTIVE;p.setQueryData(["bot-workflows",o],function(t){return t&&(void 0===t?"undefined":t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)=="object"&&"pages"in t?tk(tS({},t),{pages:t.pages.map(function(t){var r;return tk(tS({},t),{records:null==(r=t.records)?void 0:r.map(function(t){return t.id===s?tk(tS({},t),{status:e}):t})})})}):t}),v()}})},tC=r(85564),tN=r.n(tC),tA=r(56414);function tI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var tE=function(e){var t,r,n,o,s,l=e.agentId,c=e.query,u=void 0===c?"":c,d=e.sort,f=void 0===d?"latest":d,p=e.perPage,m=void 0===p?20:p,b=e.initialPage,h=void 0===b?1:b,y=e.options,v=["bot-workflows",l,u,f,m,h],g=tI({getNextPageParam:function(e){return e.has_next_page&&e.page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page&&e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===y?{}:y),_=(0,a.useInfiniteQuery)(v,function(e){var t=e.pageParam,r=void 0===t?h:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,sort:f,per_page:m,q:{actions_action_type_in:["ai_agents_post_comment","ai_agents_report_comment","ai_agents_report_post","ai_agents_hide_post_from_featured_areas"],actions_community_bot_profile_id_eq:l}};return u&&(i.query=u),tA.n.list({params:i})},g),x=(0,i.useMemo)(function(){var e;return(null==(e=_.data)?void 0:e.pages)||[]},[null==(n=_.data)?void 0:n.pages]),j=(null==(o=x[0])?void 0:o.total_count)||0,w=(null==(s=x[0])?void 0:s.per_page)||m,O=(0,i.useMemo)(function(){return tN()(x.map(function(e){return e.records}))},[x]);return t=tI({},_),r=r={queryKey:v,totalWorkflows:j,workflows:O,pageSize:w,pages:x,hasWorkflows:j>0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},tT=function(e){var t=tE({agentId:e,perPage:1});return{hasWorkflows:t.totalWorkflows>0,isLoading:t.isLoading}};function tL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tR="settings.workflows.table",tB="w-[260px] min-w-[260x]",tF="w-[240px] min-w-[240px]",tz="w-[120px] min-w-[120px]",tU="w-[100px] min-w-[100px]",tZ="w-[140px] min-w-[140px]",tG="w-[80px] min-w-[80px]",tq="w-[60px] min-w-[60px]",tV=function(e){return(0,n.jsx)(ty.W,{children:e.getValue()||(0,y.t)([tR,"untitled_workflow"])})},tH=function(e){return(0,n.jsx)(tb.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})},tW=function(e){return(0,n.jsx)(tm.Xg,{id:e.getValue(),isLastNameHidden:!0})},tQ=function(e){return(0,n.jsx)(th.u,{date:e.getValue(),shouldIncludeTime:!1})},tJ=function(e){return(0,n.jsx)(th.u,{date:e.getValue(),shouldIncludeTime:!0})},tK=function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})},t$=function(e,t){var r=e.row.original,i=tM(tD({},r),{status:r.status||"inactive"});return(0,n.jsx)(tP,{workflow:i,agentId:t})},tX=function(e){var t,r,o,a=e.agent,s=e.onNewWorkflow,l=(t=(0,i.useState)(1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tL(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tL(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],d=tE({agentId:a.id,initialPage:c,perPage:20}),f=d.data,p=d.isLoading,m=(0,i.useMemo)(function(){return(null==f?void 0:f.pages)?f.pages.flatMap(function(e){return e.records||[]}):[]},[null==f?void 0:f.pages]),b=(null==f||null==(o=f.pages)||null==(r=o[0])?void 0:r.total_count)||0,h=(0,i.useMemo)(function(){return p||!m?null:m.map(function(e){return e.created_by_community_member_id})},[m,p]),v=(0,i.useMemo)(function(){return[{accessorKey:"name",header:(0,y.t)([tR,"name"]),thClassName:tB,cellClassName:tB,cell:tV},{accessorKey:"steps",header:(0,y.t)([tR,"steps"]),thClassName:tF,cellClassName:(0,tg.A)("!py-0",tF),cell:tH},{accessorKey:"created_by_community_member_id",header:(0,y.t)([tR,"created_by"]),thClassName:tz,cellClassName:tz,cell:tW},{accessorKey:"created_at",header:(0,y.t)([tR,"created_on"]),thClassName:tU,cellClassName:tU,cell:tQ},{accessorKey:"last_run_at",header:(0,y.t)([tR,"last_run"]),thClassName:tZ,cellClassName:tZ,cell:tJ},{accessorKey:"tasks_count",header:(0,y.t)([tR,"total_runs"]),thClassName:tG,thInnerClassName:"justify-end",cellClassName:(0,tg.A)("text-right",tG),cell:tK},{header:(0,y.t)([tR,"active"]),thClassName:tq,thInnerClassName:"justify-center",cellClassName:(0,tg.A)("!py-4 cursor-default",tq),onClick:function(e){return e.event.stopPropagation()},cell:function(e){return t$(e,a.id)}}]},[a.id]),g=tM(tD({},d),{data:{pages:(null==f?void 0:f.pages)||[]},workflows:m});return(0,n.jsxs)("div",{className:"bg-primary flex h-full flex-col",children:[(0,n.jsx)("div",{className:"bg-primary border-primary flex items-center justify-start gap-2 border-b px-6 py-5",children:(0,n.jsx)(C.Z.LabelLg,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.automations_page.empty_state.title")})}),(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,n.jsx)("span",{className:"text-dark text-sm font-semibold",children:(0,y.t)([tR,"workflows_count"],{count:b})}),(0,n.jsx)(el.z,{type:"button",variant:"circle",onClick:s,disabled:!a.enabled,children:(0,y.t)("community_bot.bot_builder.automations_page.empty_state.new_workflow_button")})]}),(0,n.jsx)("div",{className:"flex-1 px-6 pb-6",children:(0,n.jsx)(tm.I,{ids:h,children:(0,n.jsx)("div",{className:"-mx-6 lg:-mx-9",children:(0,n.jsx)(t_.J,{columns:v,infiniteQuery:g,pageSize:20,initialPage:c,totalCountPath:"total_count",onChangePage:function(e){return u(e)},onClickRow:function(e){var t=e.original||{},r=t.id,n=t.status;if(r){var i=n===tv.qN.DRAFT?O.o0.edit({workflowId:r}):O.o0.view({workflowId:r});window.location.href=i}},children:(0,n.jsxs)(tx.w.TableWrapper,{children:[(0,n.jsxs)(tx.w.Table,{children:[(0,n.jsx)(tx.w.Header,{className:"z-10"}),(0,n.jsx)(tx.w.Loader,{}),(0,n.jsx)(tx.w.NoRecords,{text:(0,y.t)([tR,"no_workflows_found"])}),(0,n.jsx)(tx.w.Body,{})]}),(0,n.jsx)(tx.w.Pagination,{align:"left",direction:"reverse",buttonType:"button"})]})})})})})]})};let tY=r.p+"static/react/pages/BotBuilder/AutomationsPage/svgs/workflows-empty-state-91f66b3942b4ab1a.svg";var t0=function(e){var t=e.agent,r=e.onPrimaryClick;return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center p-8 text-center","data-testid":"empty-state",children:[(0,n.jsx)("img",{width:134,height:134,src:tY,alt:"","aria-hidden":"true",loading:"eager",className:"mb-6"}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,n.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,n.jsx)(C.Z.TitleMd,{weight:"font-semibold",children:(0,y.t)("community_bot.bot_builder.automations_page.empty_state.title")}),(0,n.jsx)(C.Z.BodyMd,{children:(0,y.t)("community_bot.bot_builder.automations_page.empty_state.description")})]}),(0,n.jsx)("div",{className:"flex gap-3",children:(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.automations_page.empty_state.tooltip"),placement:"top",enabled:!t.enabled,children:(0,n.jsx)(el.z,{type:"button",variant:"circle",large:!0,disabled:!t.enabled,onClick:r,children:(0,y.t)("community_bot.bot_builder.automations_page.empty_state.new_workflow_button")})})})]})]})},t1=function(e){var t=e.agent,r=(0,S.TC)().isDarkAppearance,i=tT(t.id),o=i.hasWorkflows,a=i.isLoading,s=function(){window.location.href="/settings/ai-agents/agents"},l=function(){window.location.href="/settings/workflows/new"};return t?a?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(eS,{agent:t,onClose:s}),(0,n.jsxs)("div",{className:"flex h-full",children:[(0,n.jsx)(Y,{}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(L.a,{center:!0})})]})]}):(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(eS,{agent:t,onClose:s}),o?(0,n.jsxs)("div",{className:"flex h-full",children:[(0,n.jsx)(Y,{}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(tX,{agent:t,onNewWorkflow:l})})]}):(0,n.jsxs)("div",{className:"flex h-full",style:{backgroundImage:"url(".concat(r?_:x,")")},children:[(0,n.jsx)(Y,{}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(t0,{agent:t,onPrimaryClick:l})})]})]}):null},t2=r(27742),t3=r(93723),t6=r(27036),t4=r(60878);function t5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||t9(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t9(e,t){if(e){if("string"==typeof e)return t5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t5(e,t)}}var t7=function(e){var t=e.name,r=e.placeholder,o=e.maxTags,a=void 0===o?10:o,s=t8((0,i.useState)(""),2),l=s[0],c=s[1],u=(0,h.Gc)(),d=u.setValue,f=u.trigger,p=(0,h.qo)({name:t})||[],m=(0,i.useRef)(null),b=t8((0,i.useState)(!1),2),v=b[0],g=b[1],_=(0,t4.pm)().error,x=function(e){d(t,p.filter(function(t){return t!==e}),{shouldValidate:!0,shouldTouch:!0}),f(t)};return(0,i.useEffect)(function(){var e=function(){g(document.activeElement===m.current)};return document.addEventListener("focusin",e),document.addEventListener("focusout",e),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}},[]),(0,n.jsxs)("div",{className:(0,tg.A)("border-primary focus-within:border-light h-fit-content flex min-h-[3rem] flex-wrap items-center gap-2 rounded-md border py-2 pl-3 pr-2",{"!border-light":v}),"aria-label":r,children:[p.map(function(e){return(0,n.jsxs)("div",{className:"bg-tertiary text-default flex items-center gap-1 rounded-md py-0.5 pl-2 pr-1 text-sm font-medium",children:[e,(0,n.jsx)("button",{type:"button",onClick:function(t){t.stopPropagation(),x(e)},className:"text-default cursor-pointer rounded-full p-0.5 hover:bg-black/10 dark:hover:bg-white/10","aria-label":(0,y.t)("community_bot.bot_builder.common.remove_tag",{tag:e}),children:(0,n.jsx)(k.JO,{type:"16-close",size:16})})]},e)}),p.length<a&&(0,n.jsx)("input",{ref:m,type:"text",className:"text-default grow border-none bg-transparent p-0.5 text-sm placeholder:text-sm placeholder:font-medium focus:shadow-none focus:outline-none focus:ring-0",placeholder:p.length<5?(0,y.t)("community_bot.bot_builder.common.type_and_press_enter",{defaultValue:"Type and press Enter"}):"",value:l,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){if("Enter"===e.key&&""!==l.trim()){e.preventDefault();var r=l.trim();if(p.length>=a)return void _((0,y.t)("community_bot.bot_builder.common.errors.max_".concat(t,"_reached"),{count:a}));var n=r.toLowerCase(),i=p.find(function(e){return e.toLowerCase()===n});if(i)return void _((0,y.t)("community_bot.bot_builder.common.errors.duplicate_".concat(t),{tag:i}));d(t,((function(e){if(Array.isArray(e))return t5(e)})(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||t9(p)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([r]),{shouldValidate:!0,shouldTouch:!0}),c(""),f(t)}else"Backspace"===e.key&&""===l&&p.length>0&&(e.preventDefault(),x(p[p.length-1]))}})]})},re=r(67142),rt=r(14258),rr=r(625),rn=function(){var e=(0,rt.j)(),t=e.searchCommunityMembers,r=e.communityMembers,o=(0,h.Gc)().setValue,a=(0,h.qo)({name:"ai_paused_notification_recipient_ids"}),s=Array.isArray(a)?a.map(String):[],l=r.map(function(e){return{text:e.name,value:String(e.id),listItemText:(0,n.jsxs)("div",{className:"flex items-start px-2",children:[(0,n.jsx)(re.sJ,{src:e.avatar_url,name:e.name,size:"5",isFullRounded:!0}),(0,n.jsx)("div",{className:"ml-3 flex min-w-0 flex-col",children:(0,n.jsx)(C.Z.LabelSm,{weight:"medium",children:e.name})})]})}}),c=function(e){return t({query:e,filters:{role:"Admin"},per_page:100})};return(0,i.useEffect)(function(){c("")},[]),(0,n.jsx)(rr.P,{name:"ai_paused_notification_recipient_ids",placeholder:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.select_admins"),onSearch:c,onChange:function(e){o("ai_paused_notification_recipient_ids",e.value.map(Number))},data:l,direction:"up",variant:"tags",value:s,showSearchIcon:!1,shouldFilterSelectedItems:!0,hideIcon:!0})},ri={type:"doc",content:[{type:"paragraph",content:[{text:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.handoff_message_placeholder"),type:"text"}]}]},ro=[(0,y.t)("community_bot.bot_builder.behavior_page.suggested_pause_ai_keywords.support"),(0,y.t)("community_bot.bot_builder.behavior_page.suggested_pause_ai_keywords.error"),(0,y.t)("community_bot.bot_builder.behavior_page.suggested_pause_ai_keywords.human"),(0,y.t)("community_bot.bot_builder.behavior_page.suggested_pause_ai_keywords.need_help")];function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rs=function(e){var t=e.formDefaultValues,r=(0,h.Gc)(),o=r.setValue,a=r.getValues,s=(0,h.qo)({name:"pause_ai_handoff_message"}),l=(0,h.qo)({name:"pause_ai_keywords"}),c=!!(0,h.qo)({name:"send_ai_paused_notification"});return(0,i.useEffect)(function(){s||o("pause_ai_handoff_message",ri,{shouldTouch:!0}),l||o("pause_ai_keywords",[],{shouldTouch:!0})},[o,s,l]),(0,n.jsx)("div",{className:"border-primary border-t px-6 py-5",children:(0,n.jsxs)(t2.U.Item,{title:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.title"),children:[(0,n.jsx)(C.Z.LabelSm,{color:"text-light",children:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.description")}),(0,n.jsxs)(t3.x,{name:"pause_ai_keywords",translationRoot:"community_bot.bot_builder.behavior_page.pause_ai_setting",hidePlaceholder:!0,hideDescription:!0,children:[(0,n.jsx)(t7,{name:"pause_ai_keywords",placeholder:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.pause_ai_keywords_placeholder")}),(0,n.jsx)("div",{className:"flex flex-wrap gap-3",children:(function(){if(!l)return ro;var e=l.map(function(e){return e.toLowerCase()});return ro.filter(function(t){return!e.includes(t.toLowerCase())})})().map(function(e){return(0,n.jsx)(el.z,{variant:"link",className:"!px-0 pt-2 underline",onClick:function(t){var r;t.preventDefault(),o("pause_ai_keywords",((function(e){if(Array.isArray(e))return ra(e)})(r=a("pause_ai_keywords")||[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ra(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ra(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]),{shouldTouch:!0})},children:(0,n.jsx)(C.Z.LabelSm,{color:"text-lightest",weight:"medium",children:e})},e)})})]}),(0,n.jsx)(N.l.Label,{fieldId:"pause_ai_handoff_message",label:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.handoff_message"),hideBorder:!0,labelClassName:"cursor-text"}),(0,n.jsx)(t6._,{name:"pause_ai_handoff_message",value:t.pause_ai_handoff_message,placeholder:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.handoff_message_input_placeholder"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary !bg-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",type:"workflow"}),(0,n.jsx)("div",{className:(0,tg.A)("border-primary mt-6 border-collapse border px-6 py-3",{"rounded-md":!c,"rounded-t-md":c}),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",shouldUseCheckmark:!1,name:"send_ai_paused_notification"}),(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.behavior_page.pause_ai_setting.send_ai_paused_notification")})]})}),c&&(0,n.jsx)("div",{className:"bot-builder-behavior-ai-paused-notification border-primary border-collapse rounded-b-md border-x border-b p-4",children:(0,n.jsx)(rn,{})})]})})},rl=r(13411),rc=function(e){var t=e.option,r=t.label,i=t.disabled,o=t.description,a=e.checked,s=e.rightIcon;return(0,n.jsx)("div",{className:H()("option-group__option-wrapper",{disabled:i&&!a,"!items-start":!0}),children:(0,n.jsxs)("div",{className:H()("option-group__option hover:border-secondary hover:border-[1.5px]",{active:a,"!items-start":!0}),children:[!!r&&(0,n.jsxs)("div",{className:H()("flex w-full flex-row items-center justify-between gap-2"),children:[(0,n.jsxs)("p",{className:"option-group__option-label flex items-baseline gap-2 !text-left",children:[(0,n.jsx)("span",{className:"text-[14px] font-semibold leading-5",children:r}),i&&(0,n.jsx)("span",{id:"coming-soon-pill",className:"inline-flex items-center justify-center rounded-[64px] bg-zinc-200 px-3 py-1 font-[InterVariable,sans-serif] text-[10px] font-bold leading-[10px] text-zinc-950",children:(0,y.t)("community_bot.bot_builder.behavior_page.soon")})]}),s&&(0,n.jsx)("div",{className:H()("option__icon",{active:a}),children:s})]}),o&&(0,n.jsx)("p",{className:"option-group__option-description !text-left",children:o})]})})},ru=function(e){var t=e.name,r=e.className,i=e.options,o=e.onChange,a=e.fullWidth,s=void 0!==a&&a,l=(0,h.Gc)().control;return(0,n.jsx)(h.Qr,{control:l,name:t,render:function(e){var t=e.field,a=t.onChange,l=t.value;return(0,n.jsx)("div",{children:(0,n.jsx)(rl.E,{value:l,onChange:function(e){null==o||o(e),a(e)},className:H()("bot-builder-behavior-option-group",r,{"bot-builder-behavior-option-group--full-width":s}),children:i.map(function(e){return(0,n.jsx)(rl.E.Option,{value:e.value,className:H()({"pointer-events-none":e.disabled}),children:function(t){var r=t.checked;return(0,n.jsx)(rc,{checked:r,option:e,rightIcon:e.rightIcon})}},e.value)})})})}})},rd=r(99725),rf=function(e){var t=e.agent,r=(0,S.TC)().isDarkAppearance,i=!(0,g.BT)();if(!t)return null;var o={name:t.name,purpose:t.purpose,answer_type:t.answer_type,tone:t.tone,pause_ai_keywords:t.pause_ai_keywords,pause_ai_handoff_message:t.pause_ai_handoff_message||ri};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(eS,{agent:t,onClose:function(){window.location.href="/settings/ai-agents/agents"}}),(0,n.jsxs)("div",{className:"flex",style:{backgroundImage:"url(".concat(r?_:x,")")},children:[(0,n.jsx)(Y,{}),(0,n.jsx)("div",{className:"bg-primary border-r-primary h-[calc(100vh-67px)] w-[453px] flex-col overflow-y-auto border-r",children:(0,n.jsxs)(t2.U,{defaultOpen:!0,children:[(0,n.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,n.jsx)(C.Z.LabelLg,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.behavior_page.title")})}),(0,n.jsx)("div",{className:"h-auto px-6 pt-5",children:(0,n.jsxs)(t2.U.Item,{title:(0,y.t)("community_bot.bot_builder.behavior_page.general"),children:[(0,n.jsxs)("div",{className:"text-dark flex items-center",children:[(0,n.jsx)(k.JO,{type:"20-ai-prompt",size:20,className:"mb-3 mr-1"}),(0,n.jsx)(N.l.Label,{fieldId:"purpose",label:(0,y.t)("community_bot.bot_builder.behavior_page.form.purpose.label"),hideBorder:!0,className:"!pt-0",labelClassName:"cursor-text text-sm"}),(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.behavior_page.form.purpose.tooltip_text"),children:(0,n.jsx)(k.JO,{type:"16-question-mark",className:"mb-3 ml-1",size:16,useWithStrokeCurrentColor:!0})})]}),(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsx)(rd.t,{name:"purpose",defaultValue:o.purpose,rows:4,maxLength:1500,fullWidth:!0,focusRequired:!1,className:"form-control focus:!border-secondary focus:!ring-0 focus:!ring-offset-0",placeholder:(0,y.t)("community_bot.bot_builder.behavior_page.form.purpose.placeholder")})})]})}),(0,n.jsx)("div",{className:"border-primary h-auto border-t px-6 pt-5",children:(0,n.jsxs)(t2.U.Item,{title:(0,y.t)("community_bot.bot_builder.behavior_page.style"),children:[(0,n.jsx)(N.l.Label,{fieldId:"answer_type",label:(0,y.t)("community_bot.bot_builder.behavior_page.form.answer_type.label"),hideBorder:!0,className:"!pt-0",labelClassName:"cursor-text text-sm"}),(0,n.jsx)(ru,{fullWidth:!0,name:"answer_type",options:[{label:(0,y.t)("community_bot.bot_builder.behavior_page.form.answer_type.ai_generated"),value:"ai-generated",rightIcon:(0,n.jsx)(k.JO,{type:"24-ai-list-sparkle",size:24,useWithStrokeCurrentColor:!0})},{label:(0,y.t)("community_bot.bot_builder.behavior_page.form.answer_type.custom"),value:"custom",disabled:!0,rightIcon:(0,n.jsx)(k.JO,{type:"24-note-text",size:24,useWithStrokeCurrentColor:!0})}]}),(0,n.jsx)(N.l.Label,{fieldId:"tone",label:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.label"),hideBorder:!0,labelClassName:"cursor-text text-sm"}),(0,n.jsx)(ru,{className:"mb-5 grid grid-cols-2 gap-4",name:"tone",options:[{label:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.normal_label"),value:"normal",rightIcon:(0,n.jsx)(k.JO,{type:"20-normal-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.normal_description")},{label:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.friendly_label"),value:"friendly",rightIcon:(0,n.jsx)(k.JO,{type:"20-friendly-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.friendly_description")},{label:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.short_and_sweet_label"),value:"short-and-sweet",rightIcon:(0,n.jsx)(k.JO,{type:"20-short-and-sweet-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.short_and_sweet_description")},{label:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.descriptive_label"),value:"descriptive",rightIcon:(0,n.jsx)(k.JO,{type:"20-descriptive-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,y.t)("community_bot.bot_builder.behavior_page.form.tone.descriptive_description")}]})]})}),(0,n.jsx)(rs,{formDefaultValues:o})]})}),i&&(0,n.jsx)(q,{})]})]})},rp=r(184),rm=r(59892),rb=r(7391),rh=r(22974),ry=function(){return(0,n.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_2515_109087)",children:[(0,n.jsx)("rect",{width:"32",height:"32",fill:"url(#paint0_linear_2515_109087)"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.25 22.5C15.25 22.9142 15.5858 23.25 16 23.25C16.4142 23.25 16.75 22.9142 16.75 22.5C16.75 19.3244 19.3244 16.75 22.5 16.75C22.9142 16.75 23.25 16.4142 23.25 16C23.25 15.5858 22.9142 15.25 22.5 15.25C19.3244 15.25 16.75 12.6756 16.75 9.5C16.75 9.08579 16.4142 8.75 16 8.75C15.5858 8.75 15.25 9.08579 15.25 9.5C15.25 12.6756 12.6756 15.25 9.5 15.25C9.08579 15.25 8.75 15.5858 8.75 16C8.75 16.4142 9.08579 16.75 9.5 16.75C12.6756 16.75 15.25 19.3244 15.25 22.5Z",fill:"url(#paint1_linear_2515_109087)"})]}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{id:"paint0_linear_2515_109087",x1:"16",y1:"0",x2:"16",y2:"32",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#516DF1"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#6C47D2"})]}),(0,n.jsxs)("linearGradient",{id:"paint1_linear_2515_109087",x1:"16",y1:"22.5",x2:"16",y2:"9.5",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#F7F9FF"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#C4AFFF"})]}),(0,n.jsx)("clipPath",{id:"clip0_2515_109087",children:(0,n.jsx)("rect",{width:"32",height:"32",rx:"16",fill:"white"})})]})]})},rv=function(e){var t=e.avatarUrl,r=e.response;return t||(null==r?void 0:r.blob_url)?(0,n.jsx)("img",{loading:"eager",src:(null==r?void 0:r.blob_url)||t,alt:(0,y.t)("community_bot.bot_builder.customize_page.avatar"),className:"h-16 w-16 rounded-full"}):(0,n.jsx)(ry,{})};function rg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function r_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rx=function(e){var t=e.avatarUrl,r=(0,t4.pm)().error,o=(0,rh.A)(),a=o.uploadFile,s=o.status,l=o.response,c=(0,h.Gc)(),u=c.register,d=c.setValue;u("avatar");var f=(0,rb.uI)({maxFiles:1,multiple:!1,accept:{"image/*":[".jpeg",".gif",".png",".jpg"]},onDropAccepted:function(e){a(e[0])},onDropRejected:function(){r((0,y.t)("community_bot.bot_builder.customize_page.avatar_invalid"))},disabled:!1}),p=f.getRootProps,m=f.getInputProps;return(0,i.useEffect)(function(){(null==l?void 0:l.signed_id)&&d("avatar",l.signed_id)},[l,d]),(0,n.jsxs)("div",r_(rg({},p()),{className:"focus-within:border-secondary border-primary flex h-28 w-full cursor-pointer items-center justify-center rounded-md border",children:[(0,n.jsx)("input",r_(rg({},m()),{type:"file",className:"hidden"})),"uploading"===s?(0,n.jsx)(k.JO,{type:"loader"}):(0,n.jsx)(rv,{avatarUrl:t,response:l})]}))},rj={disabledExtensions:["file","image","embeds","poll","cta","ai_copilot","horizontal_rule","code_block","mention","entities","headings"],disabledSlashMenuCategories:["Upload","Embed"],disabledSlashMenuCommands:["h1","h2","h3","block-quote","divider","code","mention","cta","poll","image","file","audio","video","pdf"],showListsInTextModifierMenu:!1,headingLevels:[]};function rw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rO(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rS=function(e){var t=e.agent,r=(0,S.TC)().isDarkAppearance,i=!(0,g.BT)();return t?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(eS,{agent:t,onClose:function(){window.location.href="/settings/ai-agents/agents"}}),(0,n.jsxs)("div",{className:"flex h-full items-stretch justify-start",style:{backgroundImage:"url(".concat(r?_:x,")")},children:[(0,n.jsx)(Y,{}),(0,n.jsxs)("div",{className:"bg-primary border-r-primary w-[453px] shrink-0 flex-col border-r",children:[(0,n.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,n.jsx)(C.Z.LabelLg,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.customize_page.title")})}),(0,n.jsxs)("div",{className:"h-auto px-6",children:[(0,n.jsxs)("div",{className:"text-dark flex items-baseline gap-1",children:[(0,n.jsx)(N.l.Label,{fieldId:"avatar",label:(0,y.t)("community_bot.profiles.avatar"),hideBorder:!0,labelClassName:"cursor-text text-sm"}),(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.customize_page.avatar_dimension_tooltip"),children:(0,n.jsx)(k.JO,{type:"16-question-mark",size:16,useWithStrokeCurrentColor:!0})})]}),(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.customize_page.avatar_tooltip_text"),children:(0,n.jsx)(rx,{avatarUrl:t.avatar_url})}),(0,n.jsx)(N.l.Label,{fieldId:"welcome_message",label:(0,y.t)("community_bot.profiles.welcome_message_label"),hideBorder:!0,labelClassName:"cursor-text text-sm"}),(0,n.jsx)("div",{className:H()("focus-within:border-secondary border-primary h-28 resize-y overflow-y-auto rounded-md border px-4 py-3"),children:(0,n.jsx)(rm.$,rO(rw({},rp.rp),{name:"welcome_message.body",editorClassName:"quick-post-modal--v2",placeholder:(0,y.t)("community_bot.profiles.welcome_message_placeholder")}))}),(0,n.jsx)(N.l.Label,{fieldId:"bio",label:(0,y.t)("community_bot.profiles.bio_label"),hideBorder:!0,labelClassName:"cursor-text text-sm"}),(0,n.jsx)("div",{className:H()("focus-within:border-secondary border-primary h-28 resize-y overflow-y-auto rounded-md border px-4 py-3"),children:(0,n.jsx)(rm.$,rO(rw({},rj),{name:"bio.body",editorClassName:"quick-post-modal--v2",placeholder:(0,y.t)("community_bot.profiles.bio_placeholder")}))}),(0,n.jsx)(N.l.Label,{fieldId:"suggested_questions",label:(0,y.t)("community_bot.profiles.suggested_questions_label"),hideBorder:!0,labelClassName:"cursor-text text-sm"}),(0,n.jsx)(t7,{name:"suggested_questions",placeholder:(0,y.t)("community_bot.profiles.suggested_questions_add_placeholder"),maxTags:5})]})]}),i&&(0,n.jsx)(q,{})]})]}):null},rk=r(19408);let rP=r.p+"static/images/bot-builder-knowledge-logo-4243af7a58adcb6e.png";var rC=r(98540);function rN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rA=function(){var e,t=(0,h.Gc)().watch,r=t("use_platform_support"),i=(e=t(["space_ids","snippet_ids"]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rN(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return(0,n.jsxs)("div",{className:(0,tg.A)("bg-primary border-primary relative flex flex-col gap-3 !overflow-clip rounded-lg border p-4 leading-[18px] hover:border-[#D4D4D8] hover:[box-shadow:0px_12px_16px_-4px_rgba(25,27,31,0.08),0px_4px_6px_-2px_rgba(25,27,31,0.05)]",{"gradient-border-active":r}),children:[(0,n.jsx)("div",{className:"w-[132px]",children:(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.tabs.train_agent_on_platform_support")})}),(0,n.jsx)(W.T,{className:"absolute right-[9px] top-[12px]",content:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"text-dark-inverse",children:(0,y.t)("community_bot.bot_builder.knowledge_page.use_platform_support_tooltip_title")}),(0,n.jsxs)(C.Z.BodySm,{color:"text-dark-inverse font-[InterVariable,sans-serif]",children:[(0,y.t)("community_bot.bot_builder.knowledge_page.use_platform_support_tooltip_description"),(0,n.jsx)("a",{className:"ml-1 font-bold text-inherit underline hover:text-inherit",href:"https://help.circle.so/p/members",target:"_blank",rel:"noreferrer",children:(0,y.t)("community_bot.bot_builder.knowledge_page.learn_more")})]})]}),children:(0,n.jsx)(k.JO,{type:"info",size:16})}),0===o.length&&0===a.length?(0,n.jsx)(W.T,{content:(0,y.t)("community_bot.bot_builder.knowledge_page.at_least_one_tooltip"),className:"w-8",children:(0,n.jsx)("div",{className:"pointer-events-none",children:(0,n.jsx)(rC.Z,{name:"use_platform_support",shouldUseCheckmark:!0,variant:"small"})})}):(0,n.jsx)(rC.Z,{name:"use_platform_support",shouldUseCheckmark:!0,variant:"small"}),(0,n.jsx)("img",{src:rP,width:57,height:57,alt:"",loading:"eager",className:(0,tg.A)("absolute -bottom-4 right-4",{"opacity-20 grayscale":!r})})]})},rI=r(19614);function rE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rE(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rL=function(){var e=(0,t4.pm)(),t=rT((0,i.useState)(!1),2),r=t[0],o=t[1],a=(0,h.Gc)(),s=a.watch,l=a.setValue,c=s("limit_to_admin_content"),u=s("filter_old_content"),d=s("filter_hidden_posts"),f=s("old_content_cutoff_date"),p=function(e){if(!e)return null;var t=rT(e.split("T")[0].split("-"),3),r=t[0],n=t[1],i=t[2];return new Date(Number(r),Number(n)-1,Number(i)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}(f),m=function(e){return function(t){l(e,t),"filter_old_content"!==e||t||l("old_content_cutoff_date",null)}};return(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"flex w-full flex-row items-center justify-start",children:(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.title")})}),(0,n.jsxs)("div",{className:"flex w-full flex-row items-start justify-start gap-4",children:[(0,n.jsxs)("div",{className:"flex grow flex-col gap-1",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"medium",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.limit_to_admin_content.title")}),(0,n.jsx)(C.Z.BodySm,{color:"text-tertiary",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.limit_to_admin_content.description")})]}),(0,n.jsx)(rC.Z,{name:"limit_to_admin_content",checked:c,onToggleChange:m("limit_to_admin_content"),variant:"small"})]}),(0,n.jsxs)("div",{className:"flex w-full flex-row items-start justify-start gap-4",children:[(0,n.jsxs)("div",{className:"flex grow flex-col gap-1",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"medium",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.filter_hidden_posts.title")}),(0,n.jsx)(C.Z.BodySm,{color:"text-tertiary",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.filter_hidden_posts.description")})]}),(0,n.jsx)(rC.Z,{name:"filter_hidden_posts",checked:d,onToggleChange:m("filter_hidden_posts"),variant:"small"})]}),(0,n.jsxs)("div",{className:"flex w-full flex-row items-start justify-start gap-4",children:[(0,n.jsxs)("div",{className:"flex grow flex-col gap-1",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"medium",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.filter_old_content.title")}),(0,n.jsx)(C.Z.BodySm,{color:"text-tertiary",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.filter_old_content.description")})]}),(0,n.jsx)(rC.Z,{name:"filter_old_content",checked:u,onToggleChange:m("filter_old_content"),variant:"small"})]}),u&&(0,n.jsxs)("div",{className:"ml-0 flex flex-col gap-2",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"medium",children:(0,y.t)("community_bot.bot_builder.knowledge_page.settings.select_date.label")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{type:"button",onClick:function(){return o(!0)},className:"flex w-full items-center justify-between rounded-lg border border-[#e4e7eb] bg-white px-4 py-2 text-left text-base font-normal text-[#545861] focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("span",{children:p||(0,y.t)("select_a_date")}),(0,n.jsx)(k.JO,{type:"16-calendar",size:16,className:"!h-4 !w-4"})]}),(0,n.jsx)(rI.M,{datePickerVisible:r,enableTime:!1,minDate:new Date("2000-01-01"),onCancel:function(){o(!1)},value:f?"".concat(f,"T12:00:00.000Z"):new Date().toISOString(),onSave:function(t){var r=new Date(t),n=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0");l("old_content_cutoff_date","".concat(n,"-").concat(i,"-").concat(a)),o(!1),e.success((0,y.t)("community_bot.bot_builder.knowledge_page.settings.date_set_successfully"))},placement:"bottom-end",className:"flatpickr-with-gaps",saveButtonVariant:"circle"})]})]})]})},rD=r(71367),rM=function(e){var t,r,i=e.row,o=e.handleCheckboxChange,a=e.selectedIds;return(0,n.jsx)(rD.X,{checked:a.includes(null==(t=i.original)?void 0:t.id),onChange:function(){var e;return o(null==(e=i.original)?void 0:e.id)},name:"resource-".concat(null==(r=i.original)?void 0:r.id),isFormItem:!1,onClick:function(e){return e.stopPropagation()}})},rR=function(e){var t=e.allOnPageSelected,r=e.handleSelectAllOnPage;return(0,n.jsx)(rD.X,{checked:t,onChange:function(e){return r(e.target.checked)},name:"select-all",isFormItem:!1})},rB=r(16823);let rF=r.p+"static/react/pages/BotBuilder/KnowledgePage/svgs/knowledge-empty-state-dark-pt-87c28e0419412db3.svg",rz=r.p+"static/react/pages/BotBuilder/KnowledgePage/svgs/knowledge-empty-state-dark-b04ff9356de4dcc4.svg",rU=r.p+"static/react/pages/BotBuilder/KnowledgePage/svgs/knowledge-empty-state-light-pt-dc503047be831141.svg",rZ=r.p+"static/react/pages/BotBuilder/KnowledgePage/svgs/knowledge-empty-state-light-8f8511410d601b79.svg";var rG=function(e){var t=e.onPrimaryClick,r=(0,S.TC)().isDarkAppearance,i="pt"===(0,rB.cm)();return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 p-8 text-center","data-testid":"empty-state",children:[(0,n.jsx)("img",{width:248,height:182,src:i?r?rF:rU:r?rz:rZ,alt:"","aria-hidden":"true",loading:"eager"}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,n.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,n.jsx)(C.Z.TitleMd,{children:(0,y.t)("settings.community_bot.bot_builder.knowledge_page.empty_state.header")}),(0,n.jsx)(C.Z.BodyMd,{children:(0,y.t)("settings.community_bot.bot_builder.knowledge_page.empty_state.description")})]}),(0,n.jsx)("div",{className:"flex gap-3",children:(0,n.jsx)(el.z,{type:"button",variant:"circle",large:!0,onClick:t,children:(0,y.t)("settings.community_bot.bot_builder.knowledge_page.empty_state.primary_label")})})]})]})},rq=r(57105),rV=r(33989),rH=r(73786),rW=r(34519),rQ=function(e){var t=e.onImport,r=e.count,i=e.selectedCount,a=(0,o.dd)();return(0,n.jsx)("div",{className:"border-primary border-t",children:(0,n.jsxs)("div",{className:"flex justify-end gap-3 px-5 py-4",children:[(0,n.jsx)(el.z,{type:"button",variant:"secondary",onClick:a.hide,children:(0,y.t)("community_bot.bot_builder.knowledge_page.cancel")}),(0,n.jsx)(el.z,{type:"button",variant:"circle",onClick:t,disabled:0===r||0===i,children:(0,y.t)("community_bot.bot_builder.knowledge_page.import")})]})})},rJ=function(e){var t=e.title,r=(0,o.dd)();return(0,n.jsxs)("header",{className:"border-primary flex items-center justify-between border-b px-5 py-4",children:[(0,n.jsx)(C.Z.TitleSm,{weight:"semibold",children:t}),(0,n.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,n.jsx)("li",{children:(0,n.jsx)(W.T,{placement:"bottom",content:(0,y.t)("quick_post_v2.header.close"),children:(0,n.jsx)(ey.h,{variant:"secondary",iconSize:20,onClick:r.hide,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,y.t)("quick_post_v2.header.close")})})})})]})};function rK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rX(e){return function(e){if(Array.isArray(e))return rK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rK(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rK(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rY=["internal_api","community_bot","custom_resources","for_knowledge"],r0=["internal_api","community_bot","custom_resources","for_import"],r1=function(e){var t=e.currentPage,r=e.snippetIds;return(0,a.useQuery)({queryKey:rX(rY).concat([r]),queryFn:function(){return(0,w.UT)(O.av.communityBot.customResources.index({params:{page:t,per_page:10,snippet_ids:r.join(","),imported:"true"}}))},keepPreviousData:!0})},r2=function(e){var t=e.currentPage,r=e.snippetIds,n=e.title,i=e.type;return(0,a.useQuery)({queryKey:rX(r0).concat([r,n,i]),queryFn:function(){return(0,w.UT)(O.av.communityBot.customResources.index({params:r$({page:t,per_page:10,snippet_ids:r.join(","),imported:"false"},n?{title:n}:{},i?{type:i}:{})}))},keepPreviousData:!0})},r3=["internal_api","community_bot","community_resources","for_knowledge"],r6=["internal_api","community_bot","community_resources","for_import"],r4=function(e){var t=e.currentPage,r=e.spaceIds;return(0,a.useQuery)({queryKey:rX(r3).concat([r]),queryFn:function(){return(0,w.UT)(O.av.communityBot.communityResources.index({params:{page:t,per_page:10,imported:"true",space_ids:r.join(",")}}))},keepPreviousData:!0})},r5=function(e){var t=e.currentPage,r=e.spaceIds,n=e.name,i=e.type,o=e.spaceGroup;return(0,a.useQuery)({queryKey:rX(r6).concat([r,n,i,o]),queryFn:function(){return(0,w.UT)(O.av.communityBot.communityResources.index({params:r$({page:t,per_page:10,imported:"false",space_ids:r.join(",")},n?{name:n}:{},i?{type:i}:{},o?{space_group:o}:{})}))},keepPreviousData:!0})};function r8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r9(e,t){if(e){if("string"==typeof e)return r8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r8(e,t)}}var r7=function(e){var t,r,n,o=e.query,a=(t=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||r9(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=(null==(n=o.data)||null==(r=n.records)?void 0:r.map(function(e){return e.id}))||[];return{selectedIds:s,allIdsOnPage:c,handleCheckboxChange:function(e){l(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return r8(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||r9(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},handleSelectAllOnPage:function(e){l(function(t){var r=new Set(t);return e?c.forEach(function(e){return r.add(e)}):c.forEach(function(e){return r.delete(e)}),Array.from(r)})},reset:function(){l([])}}},ne=r(555),nt=function(e){var t,r,i,o,a,s,l,c=e.columns,u=e.query,d=e.onChangePage;return(0,n.jsxs)(tx.w,{columns:c,data:null!=(l=null==u||null==(t=u.data)?void 0:t.records)?l:[],isLoading:null==u?void 0:u.isLoading,initialPage:null==u||null==(r=u.data)?void 0:r.page,pageSize:null==u||null==(i=u.data)?void 0:i.per_page,totalRecordsCount:null==u||null==(o=u.data)?void 0:o.count,onChangePage:d,children:[(0,n.jsxs)(tx.w.Table,{children:[(0,n.jsx)(tx.w.Header,{isSticky:!1}),(0,n.jsx)(tx.w.Loader,{}),(0,n.jsx)(tx.w.Body,{})]}),(null==u||null==(a=u.data)?void 0:a.count)>(null==u||null==(s=u.data)?void 0:s.per_page)&&(0,n.jsx)(tx.w.Pagination,{align:"left",direction:"reverse",buttonType:"button"})]})},nr=r(19573),nn=function(e,t,r,i,o){return[{header:(0,n.jsx)(rR,{allOnPageSelected:i.length>0&&i.every(function(t){return e.includes(t)}),handleSelectAllOnPage:r}),accessorKey:"checkbox",cellClassName:"align-middle gap-0 !px-0",thClassName:"!px-0 w-4",canSort:!1,cell:function(r){var i=r.row;return(0,n.jsx)(rM,{row:i,handleCheckboxChange:t,selectedIds:e})}},{header:(0,n.jsx)("span",{className:"text-xxs text-default font-semibold uppercase leading-tight tracking-wide",children:(0,y.t)("community_bot.bot_builder.knowledge_page.import_table.columns.title")}),accessorKey:"title",cellClassName:"align-middle",cell:function(e){var t,r,i=e.row;return(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"line-clamp-1",children:"spaces"===o?null==(t=i.original)?void 0:t.name:null==(r=i.original)?void 0:r.title})},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_table.columns.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,n.jsx)(nr.y,{type:(null==(t=r.original)?void 0:t.type)||("spaces"===o?"Post":"Snippet")})},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_table.columns.space_group"),accessorKey:"space_group",cellClassName:"align-middle",cell:function(e){var t,r=e.row;return(0,n.jsx)(C.Z.LabelSm,{weight:"regular",color:"line-clamp-1",children:null==(t=r.original)?void 0:t.space_group})},canSort:!1},"spaces"===o&&{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_table.columns.items_included"),accessorKey:"items_included",cell:function(e){var t,r=e.row;return(0,n.jsx)(C.Z.LabelSm,{weight:"regular",children:null==(t=r.original)?void 0:t.posts_count})},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_table.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t,r=e.row;return(0,n.jsx)(C.Z.LabelSm,{weight:"regular",children:null==(t=r.original)?void 0:t.used_in_replies})},canSort:!1}].filter(Boolean)},ni=function(e){var t,r,i=e.snippetsQuery,o=e.selectedIds,a=e.handleCheckboxChange,s=e.handleSelectAllOnPage,l=e.allIdsOnPage,c=e.onChangePage,u=e.hasFilters,f=(null==i||null==(t=i.data)?void 0:t.count)||0,p=(0,d.isEmpty)((null==i||null==(r=i.data)?void 0:r.records)||[]);return(null==i?void 0:i.isLoading)?(0,n.jsx)(L.a,{}):p?u?(0,n.jsx)("div",{className:"mt-[20vh]",children:(0,n.jsx)(ne.u,{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_custom_resources_no_matching_results.header"),description:(0,y.t)("community_bot.bot_builder.knowledge_page.import_custom_resources_no_matching_results.description")})}):(0,n.jsx)("div",{className:"mt-[20vh]",children:(0,n.jsx)(ne.u,{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_custom_resources_empty_state.header"),description:(0,y.t)("community_bot.bot_builder.knowledge_page.import_custom_resources_empty_state.description"),primaryLabel:(0,y.t)("community_bot.bot_builder.knowledge_page.import_custom_resources_empty_state.primary_label"),onPrimaryClick:function(){window.location.href="/settings/ai-agents/knowledge"}})}):(0,n.jsxs)(N.l,{name:"import-snippets",onSubmit:d.noop,children:[f>0&&(0,n.jsx)("div",{className:"px-5 pb-1 pt-5",children:(0,n.jsx)("div",{className:"flex min-h-[1.75rem] items-center justify-between gap-4",children:o.length>0?(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.selected_count",{selected_count:o.length,count:f})})}):(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.count",{count:f})})})}),(0,n.jsx)("div",{className:"px-5",children:(0,n.jsx)(nt,{columns:nn(o,a,s,l,"snippets"),query:i,onChangePage:c})})]})},no=[{label:(0,y.t)("settings.community_bot.knowledge.custom.types.snippet"),value:"Snippet"},{label:(0,y.t)("settings.community_bot.knowledge.custom.types.pdf"),value:"PDF"},{label:(0,y.t)("settings.community_bot.knowledge.custom.types.txt"),value:"TXT"},{label:(0,y.t)("settings.community_bot.knowledge.custom.types.srt"),value:"SRT"}];function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ns(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return na(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return na(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nu=function(e){var t,r=e.snippetIds,a=e.onImport,s=e.page,l=(0,o.dd)(),c=nc((0,i.useState)(s),2),u=c[0],d=c[1],f=nc((0,i.useState)({name:"",type:""}),2),p=f[0],m=f[1],b=r2({currentPage:u,snippetIds:r,title:p.name,type:p.type}),h=r7({query:b}),v=h.selectedIds,g=h.allIdsOnPage,_=h.handleCheckboxChange,x=h.handleSelectAllOnPage,j=h.reset;return(0,n.jsx)(rH._p,{section:rH.kS.ADMIN,children:(0,n.jsxs)(rW.u_,{isOpen:l.visible,onClose:l.hide,children:[(0,n.jsx)(rW.u_.Overlay,{}),(0,n.jsxs)(rW.u_.Content,{size:"auto",className:"flex h-full max-h-full max-w-[768px] flex-col overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-w-[992px]",children:[(0,n.jsx)(rJ,{title:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.title")}),(0,n.jsx)(rV.S,{name:p.name,onNameChange:function(e){return m(nl(ns({},p),{name:e}))},type:p.type,onTypeChange:function(e){return m(nl(ns({},p),{type:e}))},typeOptions:no,showSpaceGroup:!1,isModal:!0}),(0,n.jsx)("div",{className:"flex-1 overflow-auto",children:(0,n.jsx)(ni,{snippetsQuery:b,selectedIds:v,handleCheckboxChange:_,handleSelectAllOnPage:x,allIdsOnPage:g,onChangePage:function(e){d(e),b.remove()},hasFilters:!!(p.name||p.type)})}),(0,n.jsx)(rQ,{onImport:function(){a(v),l.hide(),j()},selectedCount:v.length,count:(null==(t=b.data)?void 0:t.count)||0})]})]})})},nd=rq.gk.create(function(e){var t=e.snippetIds,r=e.onImport;return(0,n.jsx)(nu,{snippetIds:t,onImport:r,page:1})}),nf=function(e){var t=e.snippet,r=e.onRemove;return(0,n.jsx)(tx.w.Actions,{children:(0,n.jsx)(tx.w.Actions.Item,{hasDanger:!0,onClick:function(e){e.stopPropagation(),r(t.id)},children:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.dropdown_actions.remove")})})},np=JSON.parse('{"assets":[{"id":"4","layers":[{"ind":3,"ty":4,"ks":{},"ip":0,"op":325,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[8,8]},"r":{"a":0,"k":0},"s":{"a":0,"k":[16,16]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":325,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,-3.31],[-3.31,0],[0,3.31],[3.31,0]],"o":[[-3.31,0],[0,3.31],[3.31,0],[0,-3.31],[0,0]],"v":[[6,0],[0,6],[6,12],[12,6],[6,0]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.19,0.16],[0.16,-0.19],[0,0],[0,0],[0.18,-0.18],[-0.18,-0.18],[0,0],[-0.12,0],[-0.08,0.1]],"o":[[0.16,-0.19],[-0.2,-0.16],[0,0],[0,0],[-0.18,-0.18],[-0.18,0.18],[0,0],[0.09,0.09],[0.13,-0.01],[0,0]],"v":[[8.15,4.79],[8.09,4.15],[7.45,4.21],[5.07,7.13],[4.22,6.28],[3.58,6.28],[3.58,6.92],[4.78,8.12],[5.12,8.25],[5.45,8.09]]}}},{"ty":"fl","c":{"a":0,"k":[0.09,0.64,0.29,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"7","layers":[{"ind":6,"ty":0,"ks":{},"w":16,"h":16,"ip":0,"op":325,"st":0,"refId":"4"}]},{"id":"14","layers":[{"ind":13,"ty":4,"ks":{},"ip":0,"op":325,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[5,5]},"r":{"a":0,"k":0},"s":{"a":0,"k":[10,10]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":325,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.04,-0.36],[2.81,-0.31],[0.04,0.36],[-0.36,0.04],[-0.24,2.2],[-0.36,-0.04]],"o":[[0.36,0.04],[-0.31,2.81],[-0.36,0.04],[-0.04,-0.36],[2.2,-0.24],[0.04,-0.36],[0,0]],"v":[[6.19,0.7],[6.77,1.42],[1.42,6.77],[0.7,6.19],[1.28,5.46],[5.46,1.28],[6.19,0.7]]}}},{"ty":"fl","c":{"a":0,"k":[0.33,0.35,0.38,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"19","layers":[{"ind":18,"ty":4,"ks":{},"ip":0,"op":325,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[9,9]},"r":{"a":0,"k":0},"s":{"a":0,"k":[18,18]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":325,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,-2.62],[-2.62,0],[0,2.62],[2.62,0]],"o":[[-2.62,0],[0,2.62],[2.62,0],[0,-2.62],[0,0]],"v":[[6.75,2.01],[2.01,6.75],[6.75,11.49],[11.5,6.75],[6.75,2.01]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-3.34,0],[0,-3.34],[3.34,0],[0,3.34]],"o":[[0,-3.34],[3.34,0],[0,3.34],[-3.34,0],[0,0]],"v":[[0.7,6.75],[6.75,0.7],[12.81,6.75],[6.75,12.8],[0.7,6.75]]}}},{"ty":"fl","c":{"a":0,"k":[0.82,0.84,0.86,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"22","layers":[{"ind":16,"ty":0,"parent":12,"ks":{},"w":10,"h":10,"ip":0,"op":325,"st":0,"refId":"14"},{"ind":12,"ty":3,"parent":11,"ks":{"p":{"a":0,"k":[7,7]}},"ip":0,"op":325,"st":0},{"ind":21,"ty":0,"parent":17,"ks":{},"w":18,"h":18,"ip":0,"op":325,"st":0,"refId":"19"},{"ind":17,"ty":3,"parent":11,"ks":{"p":{"a":0,"k":[-1,-1]}},"ip":0,"op":325,"st":0},{"ind":11,"ty":3,"ks":{"p":{"a":0,"k":[1,1]}},"ip":0,"op":325,"st":0}]},{"id":"29","layers":[{"ind":28,"ty":4,"ks":{},"ip":0,"op":325,"st":0,"shapes":[{"ty":"rc","p":{"a":0,"k":[9,9]},"r":{"a":0,"k":0},"s":{"a":0,"k":[18,18]}},{"ty":"fl","c":{"a":0,"k":[0,0,0,0]},"o":{"a":0,"k":0}}]},{"ind":0,"ty":4,"ks":{"s":{"a":0,"k":[133.33,133.33]}},"ip":0,"op":325,"st":0,"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-0.4,0],[-0.38,-0.07],[0.07,-0.36],[0.36,0.07],[0.32,0],[0.3,-0.06],[0.07,0.36],[-0.36,0.07]],"o":[[0.38,-0.07],[0.4,0],[0.36,0.07],[-0.07,0.36],[-0.3,-0.06],[-0.32,0],[-0.36,0.07],[-0.07,-0.36],[0,0]],"v":[[5.57,0.81],[6.75,0.7],[7.93,0.81],[8.45,1.58],[7.68,2.1],[6.75,2.01],[5.82,2.1],[5.05,1.58],[5.57,0.81]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-0.3,-0.2],[-0.44,-0.66],[0.3,-0.2],[0.2,0.3],[0.52,0.35],[-0.2,0.3]],"o":[[0.2,-0.3],[0.66,0.44],[0.2,0.3],[-0.3,0.2],[-0.35,-0.52],[-0.3,-0.2],[0,0]],"v":[[9.21,1.89],[10.12,1.71],[11.79,3.38],[11.61,4.29],[10.7,4.11],[9.39,2.8],[9.21,1.89]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.3,-0.2],[0.35,-0.52],[0.3,0.2],[-0.2,0.3],[-0.66,0.44],[-0.2,-0.3]],"o":[[0.2,0.3],[-0.52,0.35],[-0.2,0.3],[-0.3,-0.2],[0.44,-0.66],[0.3,-0.2],[0,0]],"v":[[4.3,1.89],[4.12,2.8],[2.8,4.11],[1.89,4.29],[1.71,3.38],[3.39,1.71],[4.3,1.89]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-0.07,-0.36],[0,-0.4],[0.07,-0.38],[0.36,0.07],[-0.07,0.36],[0,0.32],[0.06,0.3],[-0.36,0.07]],"o":[[0.36,-0.07],[0.07,0.38],[0,0.4],[-0.07,0.36],[-0.36,-0.07],[0.06,-0.3],[0,-0.32],[-0.07,-0.36],[0,0]],"v":[[11.92,5.05],[12.69,5.57],[12.81,6.75],[12.69,7.93],[11.92,8.45],[11.4,7.68],[11.5,6.75],[11.4,5.82],[11.92,5.05]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.07,-0.36],[0,-0.32],[-0.06,-0.3],[0.36,-0.07],[0.07,0.36],[0,0.4],[-0.07,0.38],[-0.36,-0.07]],"o":[[0.36,0.07],[-0.06,0.3],[0,0.32],[0.07,0.36],[-0.36,0.07],[-0.07,-0.38],[0,-0.4],[0.07,-0.36],[0,0]],"v":[[1.58,5.05],[2.1,5.82],[2.01,6.75],[2.1,7.68],[1.58,8.45],[0.81,7.93],[0.7,6.75],[0.81,5.57],[1.58,5.05]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-0.2,-0.3],[-0.52,-0.35],[0.2,-0.3],[0.3,0.2],[0.44,0.66],[-0.3,0.2]],"o":[[0.3,-0.2],[0.35,0.52],[0.3,0.2],[-0.2,0.3],[-0.66,-0.44],[-0.2,-0.3],[0,0]],"v":[[1.89,9.2],[2.8,9.39],[4.12,10.7],[4.3,11.61],[3.39,11.79],[1.71,10.12],[1.89,9.2]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[0.2,-0.3],[0.66,-0.44],[0.2,0.3],[-0.3,0.2],[-0.35,0.52],[-0.3,-0.2]],"o":[[0.3,0.2],[-0.44,0.66],[-0.3,0.2],[-0.2,-0.3],[0.52,-0.35],[0.2,-0.3],[0,0]],"v":[[11.61,9.2],[11.79,10.12],[10.12,11.79],[9.21,11.61],[9.39,10.7],[10.7,9.39],[11.61,9.2]]}}},{"ty":"sh","ks":{"a":0,"k":{"c":true,"i":[[0,0],[-0.36,-0.07],[-0.32,0],[-0.3,0.06],[-0.07,-0.36],[0.36,-0.07],[0.4,0],[0.38,0.07],[-0.07,0.36]],"o":[[0.07,-0.36],[0.3,0.06],[0.32,0],[0.36,-0.07],[0.07,0.36],[-0.38,0.07],[-0.4,0],[-0.36,-0.07],[0,0]],"v":[[5.05,11.92],[5.82,11.4],[6.75,11.49],[7.68,11.4],[8.45,11.92],[7.93,12.69],[6.75,12.8],[5.57,12.69],[5.05,11.92]]}}},{"ty":"fl","c":{"a":0,"k":[0.82,0.84,0.86,1]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","o":{"a":0,"k":100}}]},{"ty":"tr","o":{"a":0,"k":100}}]}]}]},{"id":"32","layers":[{"ind":31,"ty":0,"parent":27,"ks":{},"w":18,"h":18,"ip":0,"op":325,"st":0,"refId":"29"},{"ind":27,"ty":3,"parent":26,"ks":{"p":{"a":0,"k":[-1,-1]}},"ip":0,"op":325,"st":0},{"ind":26,"ty":3,"ks":{"p":{"a":0,"k":[1,1]}},"ip":0,"op":325,"st":0}]}],"fr":60,"h":16,"ip":0,"layers":[{"ind":9,"ty":0,"parent":2,"ks":{"a":{"a":0,"k":[8,8]},"o":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":297.72,"s":[0],"i":{"x":0.205,"y":0.994},"o":{"x":0.803,"y":0}},{"t":324,"s":[100],"h":1}]},"p":{"a":0,"k":[8,8]},"s":{"a":1,"k":[{"t":0,"s":[50,50],"i":{"x":[1,1],"y":[1,1]},"o":{"x":[0,0],"y":[0,0]}},{"t":297.72,"s":[50,50],"i":{"x":[0.205,0.205],"y":[0.994,0.994]},"o":{"x":[0.803,0.803],"y":[0,0]}},{"t":324,"s":[100,100],"h":1}]}},"w":16,"h":16,"ip":0,"op":325,"st":0,"refId":"7"},{"ind":2,"ty":3,"parent":1,"ks":{},"ip":0,"op":325,"st":0},{"ind":24,"ty":0,"parent":10,"ks":{"a":{"a":0,"k":[1,1]},"o":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":85.8,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":102,"s":[100],"h":1},{"t":282,"s":[100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":302.16,"s":[0],"h":1},{"t":324,"s":[0],"h":1}]}},"w":19,"h":19,"ip":0,"op":325,"st":0,"refId":"22"},{"ind":10,"ty":3,"parent":1,"ks":{"a":{"a":0,"k":[8,8]},"p":{"a":0,"k":[8,8]},"r":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":102,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":193.26,"s":[360],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":284.52,"s":[720],"h":1},{"t":324,"s":[720],"h":1}]}},"ip":0,"op":325,"st":0},{"ind":34,"ty":0,"parent":25,"ks":{"a":{"a":0,"k":[9,9]},"o":{"a":1,"k":[{"t":0,"s":[100],"h":1},{"t":86.4,"s":[100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":108.42,"s":[0],"h":1},{"t":324,"s":[0],"h":1}]},"p":{"a":0,"k":[8,8]},"r":{"a":1,"k":[{"t":0,"s":[-45],"i":{"x":0,"y":1},"o":{"x":0.5,"y":0}},{"t":26.4,"s":[0],"h":1},{"t":324,"s":[0],"h":1}]},"s":{"a":1,"k":[{"t":0,"s":[0,0],"i":{"x":[0,0],"y":[1,1]},"o":{"x":[0.5,0.5],"y":[0,0]}},{"t":26.4,"s":[100,100],"i":{"x":[1,1],"y":[1,1]},"o":{"x":[0,0],"y":[0,0]}},{"t":324,"s":[100,100],"h":1}]}},"w":19,"h":19,"ip":0,"op":325,"st":0,"refId":"32"},{"ind":25,"ty":3,"parent":1,"ks":{"a":{"a":0,"k":[8,8]},"p":{"a":0,"k":[8,8]},"r":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":26.4,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":86.4,"s":[90],"h":1},{"t":324,"s":[90],"h":1}]}},"ip":0,"op":325,"st":0},{"ind":1,"ty":3,"parent":0,"ks":{},"ip":0,"op":325,"st":0},{"ind":0,"ty":3,"ks":{},"ip":0,"op":325,"st":0}],"meta":{"g":"https://jitter.video"},"op":324,"v":"5.7.4","w":16}');function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nm(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nh=function(e){var t,r,o,a,s,l=e.row,c=en().snippetProgresses,u=(0,i.useRef)(null),d=(0,i.useRef)("done"),f=(0,i.useRef)(!1),p=(0,i.useRef)(0),m=nb((0,i.useState)(!1),2),b=m[0],h=m[1],v=nb((0,i.useState)(!1),2),g=v[0],_=v[1],x=nb((0,i.useState)(!1),2),j=x[0],w=x[1],O=c.find(function(e){var t;return e.id===(null==(t=l.original)?void 0:t.id)}),S=null!=(r=null==O?void 0:O.progress)?r:100,k=null!=(o=null==O?void 0:O.total_progress)?o:100,P=null!=(a=null==O?void 0:O.status)?a:"done",N="done"!==P&&100!==k,A="enqueued"===P;return((0,i.useEffect)(function(){if(N){h(!0),_(!0),w(!1);return}if(b&&100===k){_(!1);var e=setTimeout(function(){w(!0)},1500);return function(){return clearTimeout(e)}}},[N,b,k]),(0,i.useEffect)(function(){if(null==(e=u.current)?void 0:e.animationItem){var e,t=u.current.animationItem;if(j)return void t.destroy();var r=P!==d.current,n=100===k&&100!==p.current;d.current=P,p.current=k,(r||n)&&(A&&!f.current?(f.current=!0,t.playSegments([0,86],!0)):N&&!t.loop?(t.playSegments([86,102],!0),t.setSegment(102,284),t.loop=!0):100===k&&b&&(t.loop=!1,t.playSegments([284,324],!0)))}},[A,N,P,b,k,j]),b||N)?(0,n.jsxs)("div",{className:"flex h-[20px] items-center ".concat(j?"":"gap-2"),children:[(0,n.jsx)("div",{className:"transition-all duration-500 ease-in-out ".concat(j?"w-0":"w-[20px]"),children:(0,n.jsx)(et(),{lottieRef:u,animationData:np,autoplay:!1,loop:!1,style:{width:16,height:16}})}),(0,n.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"line-clamp-1",children:null==(t=l.original)?void 0:t.title}),(0,n.jsx)("div",{className:"overflow-hidden transition-all duration-500 ease-in-out ".concat(g&&!j?"max-h-6":"max-h-0"),children:(0,n.jsxs)(C.Z.BodyXs,{children:[(0,y.t)("community_bot.bot_builder.knowledge_page.content_loading_states.".concat(P)),": ",S,"%"]})})]})]}):(0,n.jsx)("div",{className:"flex h-[20px] items-center gap-2",children:(0,n.jsx)("div",{className:"flex flex-col justify-center",children:(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"line-clamp-1",children:null==(s=l.original)?void 0:s.title})})})};function ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||n_(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ng(e){return function(e){if(Array.isArray(e))return ny(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n_(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n_(e,t){if(e){if("string"==typeof e)return ny(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ny(e,t)}}var nx=function(e){var t=e.onRemove,r=e.allIdsOnPage,i=e.handleSelectAllOnPage,o=e.handleCheckboxChange,a=e.selectedIds;return[{header:(0,n.jsx)(rR,{allOnPageSelected:r.length>0&&r.every(function(e){return a.includes(e)}),handleSelectAllOnPage:i}),accessorKey:"checkbox",cellClassName:"align-middle gap-0 !px-0",thClassName:"!px-0 w-4",canSort:!1,cell:function(e){var t=e.row;return(0,n.jsx)(rM,{row:t,handleCheckboxChange:o,selectedIds:a})}},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.columns.title"),accessorKey:"title",cell:function(e){var t=e.row;return(0,n.jsx)(nh,{row:t})},canSort:!1,cellClassName:"align-middle w-2/3"},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.columns.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,n.jsx)(nr.y,{type:(null==(t=r.original)?void 0:t.type)||"Snippet"})},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t,r=e.row;return(0,n.jsx)(C.Z.LabelSm,{weight:"regular",children:null==(t=r.original)?void 0:t.used_in_replies})},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var r=e.row;return(0,n.jsx)(nf,{snippet:r.original,onRemove:t})}}]},nj=function(){var e,t=(0,h.Gc)(),r=t.watch,o=t.setValue,a=nv(r(["snippet_ids"]),1)[0],s=nv((0,i.useState)(1),2),l=s[0],c=s[1],u=(0,t4.pm)(),d=r1({currentPage:l,snippetIds:a}),f=r7({query:d}),p=f.selectedIds,m=f.allIdsOnPage,b=f.handleCheckboxChange,v=f.handleSelectAllOnPage,g=f.reset,_=(null==d||null==(e=d.data)?void 0:e.count)||0,x=(0,rq.dd)(nd),j=function(){x.show({snippetIds:a,onImport:function(e){o("snippet_ids",ng(a).concat(ng(e))),u.success((0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.import_success",{count:e.length}))}})};return d.isLoading?(0,n.jsx)(L.a,{}):0===_?(0,n.jsx)(rG,{onPrimaryClick:j}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex min-h-[1.75rem] items-center justify-between gap-4",children:[p.length>0?(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.selected_count",{selected_count:p.length,count:_})}),(0,n.jsx)(el.z,{type:"button",variant:"secondary",onClick:function(){o("snippet_ids",a.filter(function(e){return!p.includes(e)})),g(),u.success((0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.remove_selected_success",{count:p.length}))},children:(0,y.t)("community_bot.bot_builder.knowledge_page.remove_selected")})]}):(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.custom_resources_table.count",{count:_})}),(0,n.jsx)(el.z,{type:"button",onClick:j,variant:"secondary",children:(0,y.t)("community_bot.bot_builder.knowledge_page.import")})]}),(0,n.jsx)(nt,{columns:nx({onRemove:function(e){o("snippet_ids",a.filter(function(t){return t!==e}))},allIdsOnPage:m,handleCheckboxChange:b,handleSelectAllOnPage:v,selectedIds:p}),query:d,onChangePage:function(e){c(e),d.remove()}})]})},nw=r(2703),nO=function(e){var t,r,i=e.spacesQuery,o=e.selectedIds,a=e.handleCheckboxChange,s=e.handleSelectAllOnPage,l=e.allIdsOnPage,c=e.onChangePage,u=e.hasFilters,f=(null==i||null==(t=i.data)?void 0:t.count)||0,p=(0,d.isEmpty)((null==i||null==(r=i.data)?void 0:r.records)||[]),m=(0,nw.G)();return(null==i?void 0:i.isLoading)?(0,n.jsx)(L.a,{}):p?u?(0,n.jsx)("div",{className:"mt-[20vh]",children:(0,n.jsx)(ne.u,{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_community_resources_no_matching_results.header"),description:(0,y.t)("community_bot.bot_builder.knowledge_page.import_community_resources_no_matching_results.description")})}):(0,n.jsx)("div",{className:"mt-[20vh]",children:(0,n.jsx)(ne.u,{header:(0,y.t)("community_bot.bot_builder.knowledge_page.import_community_resources_empty_state.header"),description:(0,y.t)("community_bot.bot_builder.knowledge_page.import_community_resources_empty_state.description"),primaryLabel:(0,y.t)("community_bot.bot_builder.knowledge_page.import_community_resources_empty_state.primary_label"),onPrimaryClick:function(){return m.show()}})}):(0,n.jsxs)(N.l,{name:"import-spaces",onSubmit:d.noop,children:[f>0&&(0,n.jsx)("div",{className:"px-5 pb-1 pt-5",children:(0,n.jsx)("div",{className:"flex min-h-[1.75rem] items-center justify-between gap-4",children:o.length>0?(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.selected_count",{selected_count:o.length,count:f})})}):(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.count",{count:f})})})}),(0,n.jsx)("div",{className:"px-5",children:(0,n.jsx)(nt,{columns:nn(o,a,s,l,"spaces"),query:i,onChangePage:c})})]})},nS=[{label:(0,y.t)("settings.community_bot.knowledge.type.course"),value:"course"},{label:(0,y.t)("settings.community_bot.knowledge.type.post"),value:"basic"}];function nk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nk(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nA=function(e){var t,r=e.spaceIds,a=e.onImport,s=e.page,l=(0,o.dd)(),c=nN((0,i.useState)(s),2),u=c[0],d=c[1],f=nN((0,i.useState)({name:"",type:"",spaceGroup:""}),2),p=f[0],m=f[1],b=r5({currentPage:u,spaceIds:r,name:p.name,type:p.type,spaceGroup:p.spaceGroup}),h=r7({query:b}),v=h.selectedIds,g=h.allIdsOnPage,_=h.handleCheckboxChange,x=h.handleSelectAllOnPage,w=h.reset;return(0,n.jsx)(j.CM,{children:(0,n.jsx)(j.HB,{children:(0,n.jsx)(rH._p,{section:rH.kS.ADMIN,children:(0,n.jsxs)(rW.u_,{isOpen:l.visible,onClose:l.hide,children:[(0,n.jsx)(rW.u_.Overlay,{}),(0,n.jsxs)(rW.u_.Content,{size:"auto",className:"flex h-full max-h-full max-w-[768px] flex-col overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-w-[992px]",children:[(0,n.jsx)(rJ,{title:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.title")}),(0,n.jsx)(rV.S,{name:p.name,onNameChange:function(e){return m(nC(nP({},p),{name:e}))},type:p.type,onTypeChange:function(e){return m(nC(nP({},p),{type:e}))},typeOptions:nS,spaceGroup:p.spaceGroup,onSpaceGroupChange:function(e){return m(nC(nP({},p),{spaceGroup:e}))},showSpaceGroup:!0,isModal:!0}),(0,n.jsx)("div",{className:"flex-1 overflow-auto",children:(0,n.jsx)(nO,{spacesQuery:b,selectedIds:v,handleCheckboxChange:_,handleSelectAllOnPage:x,allIdsOnPage:g,onChangePage:function(e){d(e),b.remove()},hasFilters:!!(p.name||p.type||p.spaceGroup)})}),(0,n.jsx)(rQ,{onImport:function(){a(v),l.hide(),w()},selectedCount:v.length,count:(null==(t=b.data)?void 0:t.count)||0})]})]})})})})},nI=rq.gk.create(function(e){var t=e.spaceIds,r=e.onImport;return(0,n.jsx)(nA,{spaceIds:t,onImport:r,page:1})}),nE=function(e){var t=e.space,r=e.onRemove;return(0,n.jsx)(tx.w.Actions,{children:(0,n.jsx)(tx.w.Actions.Item,{hasDanger:!0,onClick:function(e){e.stopPropagation(),r(t.id)},children:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.dropdown_actions.remove")})})};function nT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nT(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nD=function(e){var t,r,o,a,s,l=e.row,c=en().spaceProgresses,u=(0,i.useRef)(null),d=(0,i.useRef)("done"),f=(0,i.useRef)(!1),p=(0,i.useRef)(0),m=nL((0,i.useState)(!1),2),b=m[0],h=m[1],v=nL((0,i.useState)(!1),2),g=v[0],_=v[1],x=nL((0,i.useState)(!1),2),j=x[0],w=x[1],O=c.find(function(e){var t;return e.id===(null==(t=l.original)?void 0:t.id)}),S=null!=(r=null==O?void 0:O.progress)?r:100,k=null!=(o=null==O?void 0:O.total_progress)?o:100,P=null!=(a=null==O?void 0:O.status)?a:"done",N="done"!==P&&100!==k,A="enqueued"===P;return((0,i.useEffect)(function(){if(N){h(!0),_(!0),w(!1);return}if(b&&100===k){_(!1);var e=setTimeout(function(){w(!0)},1500);return function(){return clearTimeout(e)}}},[N,b,k]),(0,i.useEffect)(function(){if(null==(e=u.current)?void 0:e.animationItem){var e,t=u.current.animationItem;if(j)return void t.destroy();var r=P!==d.current,n=100===k&&100!==p.current;d.current=P,p.current=k,(r||n)&&(A&&!f.current?(f.current=!0,t.playSegments([0,86],!0)):N&&!t.loop?(t.playSegments([86,102],!0),t.setSegment(102,284),t.loop=!0):100===k&&b&&(t.loop=!1,t.playSegments([284,324],!0)))}},[A,N,P,b,k,j]),b||N)?(0,n.jsxs)("div",{className:"flex h-[20px] items-center gap-2",children:[(0,n.jsx)("div",{className:"transition-all duration-500 ease-in-out ".concat(j?"w-0":"w-[20px]"),children:(0,n.jsx)(et(),{lottieRef:u,animationData:np,autoplay:!1,loop:!1,style:{width:16,height:16}})}),(0,n.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"line-clamp-1",children:null==(t=l.original)?void 0:t.name}),(0,n.jsx)("div",{className:"overflow-hidden transition-all duration-500 ease-in-out ".concat(g&&!j?"max-h-6":"max-h-0"),children:(0,n.jsxs)(C.Z.BodyXs,{children:[(0,y.t)("community_bot.bot_builder.knowledge_page.content_loading_states.".concat(P)),": ",S,"%"]})})]})]}):(0,n.jsx)("div",{className:"flex h-[20px] items-center gap-2",children:(0,n.jsx)("div",{className:"flex flex-col justify-center",children:(0,n.jsx)(C.Z.LabelSm,{weight:"semibold",color:"line-clamp-1",children:null==(s=l.original)?void 0:s.name})})})};function nM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||nF(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nB(e){return function(e){if(Array.isArray(e))return nM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nF(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nF(e,t){if(e){if("string"==typeof e)return nM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nM(e,t)}}var nz=function(e){var t=e.onRemove,r=e.allIdsOnPage,i=e.handleSelectAllOnPage,o=e.handleCheckboxChange,a=e.selectedIds;return[{header:(0,n.jsx)(rR,{allOnPageSelected:r.length>0&&r.every(function(e){return a.includes(e)}),handleSelectAllOnPage:i}),accessorKey:"checkbox",cellClassName:"align-middle gap-0 !px-0",thClassName:"!px-0 w-4",canSort:!1,cell:function(e){var t=e.row;return(0,n.jsx)(rM,{row:t,handleCheckboxChange:o,selectedIds:a})}},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.columns.title"),accessorKey:"title",cell:function(e){var t=e.row;return(0,n.jsx)(nD,{row:t})},canSort:!1,cellClassName:"align-middle w-1/2"},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.columns.space_group"),accessorKey:"space_group",cellClassName:"align-middle",cell:function(e){var t,r=e.row;return(0,n.jsx)(C.Z.LabelSm,{weight:"regular",color:"line-clamp-1",children:null==(t=r.original)?void 0:t.space_group})},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.columns.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,n.jsx)(nr.y,{type:(null==(t=r.original)?void 0:t.type)||"Post"})},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.columns.items"),accessorKey:"posts_count",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.posts_count},canSort:!1},{header:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.used_in_replies},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var r=e.row;return(0,n.jsx)(nE,{space:r.original,onRemove:t})}}]},nU=function(){var e,t=(0,h.Gc)(),r=t.watch,o=t.setValue,a=nR(r(["space_ids"]),1)[0],s=nR((0,i.useState)(1),2),l=s[0],c=s[1],u=r4({currentPage:l,spaceIds:a}),d=r7({query:u}),f=d.selectedIds,p=d.allIdsOnPage,m=d.handleCheckboxChange,b=d.handleSelectAllOnPage,v=d.reset,g=(null==u||null==(e=u.data)?void 0:e.count)||0,_=(0,t4.pm)(),x=(0,rq.dd)(nI),j=function(){x.show({spaceIds:a,onImport:function(e){o("space_ids",nB(a).concat(nB(e))),_.success((0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.import_success",{count:e.length}))}})};return u.isLoading?(0,n.jsx)(L.a,{}):0===g?(0,n.jsx)(rG,{onPrimaryClick:j}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex min-h-[1.75rem] w-full items-center justify-between gap-4",children:[f.length>0?(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.selected_count",{selected_count:f.length,count:g})}),(0,n.jsx)(el.z,{type:"button",variant:"secondary",onClick:function(){o("space_ids",a.filter(function(e){return!f.includes(e)})),v(),_.success((0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.remove_selected_success",{count:f.length}))},children:(0,y.t)("community_bot.bot_builder.knowledge_page.remove_selected")})]}):(0,n.jsx)(C.Z.LabelMd,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.community_resources_table.count",{count:g})}),(0,n.jsx)(el.z,{type:"button",onClick:j,variant:"secondary",children:(0,y.t)("community_bot.bot_builder.knowledge_page.import")})]}),(0,n.jsx)(nt,{columns:nz({onRemove:function(e){o("space_ids",a.filter(function(t){return t!==e}))},allIdsOnPage:p,handleSelectAllOnPage:b,handleCheckboxChange:m,selectedIds:f}),query:u,onChangePage:function(e){c(e),u.remove()},tableContainerClassName:"h-[500px] overflow-y-auto",tableContainerStyle:{paddingRight:"0px",scrollbarGutter:"stable"}})]})};function nZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nG=function(e){var t,r=e.agent,o=(0,j.wh)().currentCommunitySettings,a=!!(null==o?void 0:o.ai_documents_metadata),s=(t=(0,i.useState)("community"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nZ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nZ(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=(0,S.TC)().isDarkAppearance,d=(0,g.js)();return r?(0,n.jsxs)("div",{children:[(0,n.jsx)(eS,{agent:r,onClose:function(){window.location.href="/settings/ai-agents/agents"}}),(0,n.jsxs)("div",{className:"flex h-full",style:{backgroundImage:"url(".concat(u?_:x,")")},children:[(0,n.jsx)(Y,{}),(0,n.jsxs)("div",{className:"bg-secondary border-r-primary w-[912px] border-r",children:[(0,n.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-start gap-2 border-b px-6 py-5",children:[(0,n.jsx)(C.Z.LabelLg,{weight:"semibold",children:(0,y.t)("community_bot.bot_builder.knowledge_page.title")}),(0,n.jsx)(W.T,{className:"flex h-5 items-center",content:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(C.Z.BodySm,{weight:"semibold",color:"text-dark-inverse",children:(0,y.t)("community_bot.bot_builder.knowledge_page.title_tooltip")})}),children:(0,n.jsx)(k.JO,{type:"info",size:20})})]}),(0,n.jsxs)("div",{className:"border-primary flex h-[calc(100vh-67px-66px)] border-b",children:[(0,n.jsxs)("div",{className:"border-r-primary flex h-full w-[224px] flex-col justify-between border-r px-4 py-5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("button",{type:"button",className:(0,tg.A)("hover:bg-primary flex h-[34px] items-center rounded-lg px-3 py-[10px] text-left",{"bg-primary":"community"===l}),onClick:function(){return c("community")},children:(0,n.jsx)(rk.u,{as:"span",color:(0,tg.A)("font-[InterVariable,sans-serif] block",{"text-darkest":"community"===l,"text-tertiary":"community"!==l}),weight:"font-medium",size:"text-[14px]",leading:"leading-[1]",tracking:"tracking-normal",textAlign:"",children:(0,y.t)("community_bot.bot_builder.knowledge_page.tabs.community")})}),(0,n.jsx)("button",{type:"button",className:(0,tg.A)("hover:bg-primary rounded-lg px-3 py-[10px] text-left",{"bg-primary":"custom"===l}),onClick:function(){return c("custom")},children:(0,n.jsx)(rk.u,{as:"span",color:(0,tg.A)("font-[InterVariable,sans-serif] block",{"text-darkest":"custom"===l,"text-tertiary":"custom"!==l}),weight:"font-medium",size:"text-[14px]",leading:"leading-[1]",tracking:"tracking-normal",textAlign:"",children:(0,y.t)("community_bot.bot_builder.knowledge_page.tabs.custom")})}),a&&(0,n.jsx)("button",{type:"button",className:(0,tg.A)("hover:bg-primary rounded-lg px-3 py-[10px] text-left",{"bg-primary":"settings"===l}),onClick:function(){return c("settings")},children:(0,n.jsx)(rk.u,{as:"span",color:(0,tg.A)("font-[InterVariable,sans-serif] block",{"text-darkest":"settings"===l,"text-tertiary":"settings"!==l}),weight:"font-medium",size:"text-[14px]",leading:"leading-[1]",tracking:"tracking-normal",textAlign:"",children:(0,y.t)("community_bot.bot_builder.knowledge_page.tabs.settings")})})]}),(0,n.jsx)(rA,{})]}),(0,n.jsxs)("div",{className:"bg-primary flex h-full w-[688px] justify-center py-6 pl-5",children:[(0,n.jsx)("div",{className:"community"===l?"block w-full overflow-y-scroll pl-1 pr-6":"hidden",children:(0,n.jsx)(nU,{})}),(0,n.jsx)("div",{className:"custom"===l?"block w-full overflow-y-scroll pl-1 pr-6":"hidden",children:(0,n.jsx)(nj,{})}),a&&(0,n.jsx)("div",{className:"settings"===l?"block w-full pl-1 pr-6":"hidden",children:(0,n.jsx)(rL,{})})]})]})]}),d&&(0,n.jsx)(q,{})]})]}):null},nq=r(460),nV=r(29268);function nH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nJ=function(){return(0,n.jsx)(m.D,{})},nK=function(){(0,nq.ss)();var e,t=window.location.pathname.split("/"),r=parseInt(t[t.length-2]),o=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return nH(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nH(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],l=(0,b.q_)({id:r}).data,c=(0,b.vQ)({id:r}).mutate,u={updateFilters:(0,i.useCallback)(function(e,t){s(function(){if((0,tf.N)(t))return a.filter(function(t){return e!==t.id});var r=a.some(function(t){return e===t.id}),n=(0,d.omit)(t,["isInitialOpen"]);return r?a.map(function(t){return t.id===e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t,n):t}):((function(e){if(Array.isArray(e))return tp(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return tp(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tp(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([n])}())},[a,s])}.updateFilters;return((0,i.useEffect)(function(){s((null==l?void 0:l.members_filters)||[])},[l,s]),l)?(0,n.jsx)(eB.OL,{filterParams:a,onApply:function(e,t){u(e,t)},onClearAll:function(){return s([])},children:(0,n.jsx)(N.l,{id:"bot-builder-form",encType:"multipart/form-data",defaultValues:(0,d.omit)(l,"members_filters"),onSubmit:function(e,t,r){var n,i;"bot-builder-form"===(null==r||null==(i=r.nativeEvent)||null==(n=i.srcElement)?void 0:n.getAttribute("id"))&&c(nQ(nW({},e),{members_filters:a}))},children:(0,n.jsx)(p.S,{renderFunc:nJ,children:(0,n.jsx)(rH._p,{section:rH.kS.ADMIN,children:(0,n.jsx)(ei,{communityBotProfileId:l.id,children:(0,n.jsxs)(f.rs,{children:[(0,n.jsx)(nV.i,{path:"/settings/ai-agents/edit/:botPublicId/audience",render:function(e){return(0,n.jsx)(td,nQ(nW({},e),{agent:l,filters:a}))}}),(0,n.jsx)(nV.i,{path:"/settings/ai-agents/edit/:botPublicId/customize",render:function(e){return(0,n.jsx)(rS,nQ(nW({},e),{agent:l}))}}),(0,n.jsx)(nV.i,{path:"/settings/ai-agents/edit/:botPublicId/behavior",render:function(e){return(0,n.jsx)(rf,nQ(nW({},e),{agent:l}))}}),(0,n.jsx)(nV.i,{path:"/settings/ai-agents/edit/:botPublicId/knowledge",render:function(e){return(0,n.jsx)(nG,nQ(nW({},e),{agent:l}))}}),(0,n.jsx)(nV.i,{path:"/settings/ai-agents/edit/:botPublicId/automations",render:function(e){return(0,n.jsx)(t1,nQ(nW({},e),{agent:l}))}})]})})})})})}):null},n$=r(71571),nX=function(){var e=new a.QueryClient,t=(0,i.useMemo)(function(){return{usage:"contacts"}},[]);return(0,n.jsx)(a.QueryClientProvider,{client:e,children:(0,n.jsx)(s.VK,{children:(0,n.jsx)(u.f,{children:(0,n.jsx)(t4.VW,{children:(0,n.jsx)(o.ZP.Provider,{children:(0,n.jsx)(c.H,{children:(0,n.jsx)(l.C,{children:(0,n.jsx)(n$.r.Provider,{value:t,children:(0,n.jsx)(nK,{})})})})})})})})})}},24244:function(e,t,r){"use strict";r.d(t,{g:()=>fA});var n,i=r(85893),o=r(67294),a=r(72624),s=r(91946),l=r(72727),c=r(43784);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e;return(e=function(){var e,t,n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if((null==(e=window)?void 0:e.locale)!=="pt")return[3,2];return[4,r.e("878").then(r.bind(r,96821))];case 1:return t=i.sent(),(0,c.Z)({locale:t.default,weekStartsOn:1}),[3,4];case 2:return[4,Promise.resolve().then(r.bind(r,23605))];case 3:n=i.sent(),(0,c.Z)({locale:n.default}),i.label=4;case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)})})()},f=r(94845),p=r(16823);function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var b=function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if("pt"!==(0,p.cm)())return[3,2];return[4,r.e("3009").then(r.t.bind(r,6924,23))];case 1:e=t.sent(),f.default.setDefaults({locale:e.Portuguese}),t.label=2;case 2:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})})()},h=r(52770),y=r(85924),v=r(38500),g=r(57105),_=r(90926),x=r(76012),j=r(18059),w=[_.Cz,j.Rl,_.x3,g.yB,x.hg,v.JB],O=function(e){var t=e.children;return w.reduceRight(function(e,t){return(0,i.jsx)(t,{children:e})},t)},S=r(460),k=r(41597),P=r(86463),C=r(35756),N=r(96486),A=r(84326),I=r(41342),E=r(57363),T=r(46681),L=r(61193),D=function(){var e,t,r,n,o=(0,I.wh)(),a=o.currentCommunityMember,s=o.isViewOnlyMasquerading,l=o.masqueradingEntity,c=(0,y.wC)().masquerade_referrer_url,u=(0,L.D)(),d=(0,x.Vu)(),f=d.isBannerVisible,p=d.openViewMasqueradingSearch,m=d.openEditMasqueradingSearch,b=d.hideBanner;return c&&!u||f?(f?(e=(0,A.t)("view_only_masquerading.banner.title_not_selected"),t=(0,A.t)("view_only_masquerading.banner.title_selected"),r=(0,A.t)("view_only_masquerading.banner.placeholder"),n=p):s?(e=(0,A.t)("view_only_masquerading.banner.title_selected"),t=(0,A.t)("view_only_masquerading.banner.title_selected"),r=(0,N.truncate)((null==l?void 0:l.name)||"",{length:50}),n=p):(e=(0,A.t)("masquerade.banner.title"),t=(0,A.t)("masquerade.banner.title"),r=(0,N.truncate)((null==a?void 0:a.name)||"",{length:50}),n=m),(0,i.jsxs)("div",{className:"flex h-12 items-center justify-between bg-gray-900 px-6 dark:bg-gray-700",children:[(0,i.jsx)("div",{})," ",(0,i.jsxs)("div",{className:"flex","data-testid":"masquerade-banner",children:[(0,i.jsx)("div",{className:"mr-2",children:(0,i.jsx)(T.Di,{weight:"semibold",color:"text-feature-dark",children:e})}),(0,i.jsxs)("button",{type:"button",onClick:n,className:"flex","aria-label":t,children:[(0,i.jsx)("div",{className:"border-dark dark:border-secondary border-b border-dashed",children:(0,i.jsx)(T.Di,{color:"text-feature-dark",children:r})}),(0,i.jsx)("div",{children:(0,i.jsx)(E.JO,{type:"20-chevron-down-sm",className:"text-feature-dark ml-[3px]","aria-hidden":!0})})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"button",onClick:function(){b(),c&&(window.location.href=c)},children:(0,i.jsx)(T.Di,{color:"text-feature-dark",weight:"semibold",children:(0,A.t)("view_only_masquerading.banner.exit")})})})]})):null},M=r(28008),R=r(73935),B=r(70442),F=r(25986),z=function(){return null},U=r(50312),Z=r(94184),G=r.n(Z),q=r(88767),V=r(81881),H=r(60622),W=function(e){var t=e.isOpen,r=e.onClick;return(0,i.jsx)(H.T,{children:(0,i.jsx)("button",{type:"submit",className:"bg-support-widget float-right hidden h-14 w-14 self-end rounded-full text-white shadow-md lg:block",onClick:r,"aria-label":(0,A.t)("support_widget.floating_button_aria_label"),"aria-expanded":t,"aria-controls":"support-widget",children:(0,i.jsx)(E.JO,{type:t?"20-chevron-down":"chat",size:t?20:null})})})},Q=r(37137),J=r(52939),K=r(22246),$=function(e){var t=e.onClick,r=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=r.current;if(e){var t=e.offsetHeight;e.style.setProperty("--arrow-top","".concat(t,"px"))}},[]),(0,i.jsxs)("div",{ref:r,className:"support-widget-onboarding bg-circle w-[303px] rounded-lg p-6 text-white",children:[(0,i.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,i.jsx)("img",{loading:"lazy",src:Q,alt:(0,A.t)("support_widget.circle_logo_alt_text"),className:"h-8 w-8"}),(0,i.jsx)("button",{type:"button",className:"-mt-1",onClick:t,children:(0,i.jsx)(E.JO,{type:"20-close",size:20})})]}),(0,i.jsx)(K.o,{color:"text-white",children:(0,A.t)("support_widget.onboarding.title")}),(0,i.jsx)(J.Q,{color:"text-white",children:(0,A.t)("support_widget.onboarding.content")})]})},X=r(45697),Y=r.n(X),ee=r(69802),et=function(e){var t=e.children,r=(0,B.TH)(),n=(0,F.J1)().collapseWidget;return(0,o.useEffect)(function(){var e,t;(0,ee.qQ)((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,ee.$o)()),t=t={location:r.pathname},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),"/form"===r.pathname||r.pathname.startsWith("/posts/")||r.pathname.startsWith("/news/")||n()},[r.pathname,n]),t};et.propTypes={children:Y().node};var er=r(52928),en=function(e){return G()({"text-circle link-active":e,"text-default link-inactive":!e},"relative flex flex-col gap-2 hover:text-circle focus:text-circle w-1/5 text-center")},ei=function(){var e=(0,F.J1)().unreadConversations,t=(0,F.J1)().isDraftConversationPresent;return(0,i.jsxs)("div",{className:"flex h-[76px] w-full items-center justify-evenly text-xs",children:[(0,i.jsxs)(er.OL,{to:"/",className:en,isActive:function(e,t){return"/"===t.pathname},children:[(0,i.jsx)(E.JO,{type:"home-v2",viewBox:"0 0 16 16"}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.home")})]}),(0,i.jsxs)(er.OL,{to:"/conversations",className:en,children:[(0,i.jsx)(E.JO,{type:"16-messages",viewBox:"0 0 16 16"}),e.length>0?(0,i.jsx)("span",{className:"absolute right-5 top-[-2px] h-2 w-2 rounded-full bg-blue-600"}):t&&(0,i.jsx)("span",{className:"bg-dark absolute right-5 top-[-2px] h-2 w-2 rounded-full"}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.messages")})]}),(0,i.jsxs)(er.OL,{to:"/space_groups",className:en,isActive:function(e,t){var r;return t.pathname.startsWith("/space_groups")||t.pathname.startsWith("/spaces")||t.pathname.startsWith("/posts")&&!["848480","3422440","3701502"].includes(null==(r=t.pathname.split("/"))?void 0:r.slice(-1)[0])},children:[(0,i.jsx)(E.JO,{type:"question-mark",viewBox:"0 0 24 24"}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.help")})]}),(0,i.jsxs)(er.OL,{to:"/news",className:en,isActive:function(e,t){return t.pathname.startsWith("/news")},children:[(0,i.jsx)(E.JO,{type:"announcements",size:20}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.news")})]}),(0,i.jsxs)(er.OL,{to:"/events",className:en,isActive:function(e,t){return t.pathname.startsWith("/events")},children:[(0,i.jsx)(E.JO,{type:"support-widget-calendar",size:20}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.events")})]})]})},eo=function(e){var t=e.children,r=(0,B.TH)(),n=(0,F.J1)().isExpanded;return"/ask"===r.pathname||r.pathname.match(/\/conversations\/\d+/)?(0,i.jsx)("div",{className:G()("xxl:h-full support-widget-container border-primary bg-primary hidden origin-bottom-right overflow-y-auto rounded-t-lg border lg:flex lg:flex-col",{"h-[min(75vh,100vh-224px)] max-h-[75vh] min-h-[min(658px,100vh-224px)] w-[688px]":n,"h-[min(658px,100vh-224px)] max-h-[658px] min-h-[80px] w-[400px]":!n}),style:{transition:"width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:t}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:G()("xxl:h-full support-widget-container border-primary bg-primary hidden origin-bottom-right overflow-y-auto rounded-t-lg border-x border-t lg:flex lg:flex-col",{"h-[min(75vh,100vh-224px)] max-h-[75vh] min-h-[min(580px,100vh-224px)] w-[688px]":n,"h-[min(580px,100vh-224px)] max-h-[580px] min-h-[80px] w-[400px]":!n}),style:{transition:"width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:t}),(0,i.jsx)("div",{className:"border-primary bg-primary hidden origin-bottom-right rounded-b-lg border-y border-l shadow-lg lg:flex",children:(0,i.jsx)(ei,{})})]})};eo.propTypes={children:Y().node};var ea=r(76235),es=r(41553),el=r(80171),ec=r(51466),eu=r(13532),ed=r(39905),ef="type_live_chat",ep=function(e){var t=e.onClick,r=e.type;return(0,i.jsxs)("div",{className:"bg-tertiary flex flex-col gap-6 px-4 py-6",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)(es.Z.BodySm,{children:(0,A.t)("support_widget.chatbot.live_chat_ended")}),r==ef?(0,i.jsx)(es.Z.BodySm,{weight:"font-bold",children:(0,A.t)("support_widget.chatbot.live_chat_follow_up")}):null]}),(0,i.jsx)(ed.z,{variant:"circle",large:!0,onClick:t,children:(0,A.t)("support_widget.chatbot.live_chat_back_home")})]})},em=r(3682),eb=r(52293),eh=function(e){var t=e.onSubmit,r=(0,eb.Gc)(),n=r.handleSubmit,a=r.reset,s=(0,eb.qo)({name:"message"}),l=(0,o.useRef)(null),c=function(){(0,em.Z)(l.current)};return(0,o.useEffect)(function(){c()},[]),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(ec.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,A.t)("support_widget.chatbot.message_placeholder"),ref:l,rows:1,onInput:c,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(n(t)(),a(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar max-h-[128px] resize-none !py-4 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,i.jsx)("div",{className:"text-circle pr-4 pt-4",children:s&&(0,i.jsx)(el.T,{placement:"top",content:(0,A.t)("support_widget.chatbot.send"),children:(0,i.jsx)(E.JO,{type:"tiptap-send",className:"cursor-pointer",onClick:function(){n(t)(),a()}})})})]})},ey=r(66007),ev=r(46122),eg=r(94250),e_=r(98363),ex=r(8807);function ej(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ew=function(e){var t,r,n,a=e.attachment,s=null==(n=a.thumbnails)||null==(r=n[0])?void 0:r.content_url,l=(t=(0,o.useState)(!!s),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ej(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ej(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1];return(0,i.jsx)("div",{children:(0,i.jsxs)("a",{href:a.content_url,target:"_blank",rel:"noreferrer",className:"flex gap-2 rounded-lg border border-gray-300 p-3 dark:border-gray-600",download:!0,children:[c?(0,i.jsx)("img",{loading:"lazy",alt:"",className:"h-10 w-10 rounded-lg object-cover",src:s,onError:function(){return u(!1)}}):(0,i.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100 object-cover text-gray-400 dark:bg-gray-700",children:(0,i.jsx)(E.JO,{type:"tiptap-paperclip",size:20})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(ex.T1,{weight:"semibold",className:"break-all",children:(0,N.truncate)(a.file_name,{length:28})}),(0,i.jsx)(eg.wN,{children:(0,N.truncate)(a.content_type.split("/").pop().toUpperCase(),{length:28})})]})]})})};function eO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}ew.propTypes={attachment:Y().object};var eS=function(e){var t,r=e.attachments,n=e.collapsed,a=(t=(0,o.useState)(void 0===n||n),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eO(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eO(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=1===r.length?I18n.t("support_widget.file"):I18n.t("support_widget.files");return 0===r.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es.Z.LabelXs,{children:(0,i.jsxs)("button",{type:"button",onClick:function(){return l(function(e){return!e})},className:"text-dark hover:text-dark focus:text-dark cursor-pointer hover:underline",children:["".concat(r.length," ").concat(c),s?(0,i.jsx)(E.JO,{type:"cheveron-up",useWithFillCurrentColor:!0}):(0,i.jsx)(E.JO,{type:"cheveron-down",useWithFillCurrentColor:!0})]})}),(0,i.jsx)("div",{className:"flex flex-col gap-2",children:!s&&r.map(function(e){return(0,i.jsx)(ew,{attachment:e},e.id)})})]})};eS.propTypes={attachments:Y().array};var ek=function(){return(0,i.jsx)("div",{className:"from-circle flex h-[40px] w-[40px] shrink-0 justify-center overflow-hidden rounded bg-gradient-to-b to-[#6B47D2] text-white",children:(0,i.jsx)(E.JO,{type:"20-ai",size:20})})},eP=function(e){var t=e.label,r=e.sublabel,n=e.event,o=e.value,a=e.selected,s=e.setSelected,l=e.process;return(0,i.jsxs)("button",{type:"button",className:G()("border-primary rounded-full border px-4 py-2 text-sm font-medium",{"hover:border-secondary cursor-pointer":null===a,"border-secondary bg-gray-100 dark:bg-gray-700":a===t,"cursor-not-allowed":null!==a,"w-full":r}),onClick:function(){null===a&&(s(t),l({event:n,value:o}))},children:[(0,i.jsx)(ex.T1,{weight:"medium",children:t}),r&&(0,i.jsxs)(i.Fragment,{children:["  ",(0,i.jsx)(ex.T1,{weight:"medium",color:"text-gray-400",children:r})]})]})};function eC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eN=function(e){var t,r,n,a=e.type,s=e.authorAvatarUrl,l=e.authorName,c=e.content,u=e.buttons,d=e.attachments,f=void 0===d?[]:d,p=e.createdAt,m=e.showDisclaimer,b=e.process,h=void 0===b?function(){}:b,y=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eC(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],_=(0,I.wh)().currentCommunityMember,x={business:{avatarUrl:null!=s?s:"",name:null!=l?l:""},bot:{avatarUrl:"",name:(0,A.t)("support_widget.chatbot.name")},user:{avatarUrl:null!=(r=null==_?void 0:_.avatar_url)?r:"",name:null!=(n=null==_?void 0:_.name)?n:""}},j=u.map(function(e){var t,r,n=e.label;return(0,i.jsx)(eP,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={selected:v,setSelected:g,process:h},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),n)});return(0,i.jsxs)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:["bot"===a?(0,i.jsx)(ek,{}):(0,i.jsx)(e_.s,{src:x[a].avatarUrl,size:"10",name:x[a].name}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)(T.Di,{weight:"semibold",color:"text-dark",children:x[a].name}),(0,i.jsx)(eg.wN,{color:"text-light",children:p}),void 0!==m&&m&&(0,i.jsx)(el.T,{maxWidth:250,className:"mt-[-4px]",content:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,A.t)("support_widget.chatbot.disclaimer")}}),children:(0,i.jsx)(E.JO,{type:"16-info",size:16})})]}),(0,i.jsxs)("div",{className:"message-content pr-6",children:[(0,i.jsx)(ev.p,{children:(0,i.jsx)(ey.Z,{html:c})}),f.length>0?(0,i.jsx)(eS,{attachments:f,collapsed:!1}):null,j.length>0?(0,i.jsx)("div",{className:"mt-4 flex flex-row flex-wrap gap-2",children:j}):null]})]})]})},eA=function(){return(0,i.jsxs)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:[(0,i.jsx)(ek,{}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(T.Di,{weight:"semibold",color:"text-dark",children:(0,A.t)("support_widget.chatbot.name")}),(0,i.jsxs)("div",{className:"typing flex h-5 items-center gap-1",children:[(0,i.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"}),(0,i.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"}),(0,i.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"})]})]})]})},eI=r(33681),eE=function(e){var t=e.attachment,r=e.onCancel;return(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2 break-all rounded-md bg-gray-50 px-4 py-2 dark:bg-gray-700",children:[t.status===ea.L9?(0,i.jsx)("a",{href:t.blobUrl,target:"_blank",rel:"noopener noreferrer",className:"text-circle hover:text-circle focus:text-circle dark:text-dark dark:hover:text-dark text-sm font-semibold underline",children:(0,N.truncate)(t.filename,{length:40})}):(0,i.jsx)(ex.T1,{weight:"semibold",children:(0,N.truncate)(t.filename,{length:28})}),(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(t.status===ea.si||t.status===ea.X)&&(0,i.jsx)(eI.Z,{variant:"determinate",value:t.progress||0,className:"linear-progress h-1 w-14 rounded-full"}),(0,i.jsx)(E.JO,{type:"16-close",size:16,onClick:function(){r(t)},className:"text-dark cursor-pointer"})]})]})};eE.propTypes={attachment:Y().object,onCancel:Y().func};var eT=function(e){var t,r,n,o,a,s,l,c=e.ariaLabel,u=e.onClick,d=e.href,f=void 0===d?"":d,p=e.icon,m=e.type,b=void 0===m?"":m,h=e.className,y=e.size,v=(0,B.k6)(),g=(0,F.J1)(),_=g.isExpanded,x=g.expandWidget,j=g.collapseWidget,w={back:{ariaLabel:(0,A.t)("support_widget.search_container.back_button_label"),icon:"20-chevron-left",onClick:v.goBack},expand:{ariaLabel:(0,A.t)("support_widget.search_container.expand_widget_label"),icon:_?"shrink":"20-expand",onClick:function(){return _?j():x()}}};return f?(a="a",s={href:f,target:"_blank",rel:"noopener noreferrer"}):(a="button",s={onClick:(void 0===u?null:u)||(null==(l=w[b])?void 0:l.onClick)}),(0,i.jsx)(a,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:G()("text-dark hover:bg-tertiary w-10 rounded-lg p-2",{"visited:text-dark hover:text-dark focus:bg-tertiary focus:text-dark inline-block text-center":f},void 0===h?"":h),"aria-label":(null==(n=w[b])?void 0:n.ariaLabel)||(void 0===c?"":c)},s),r=r={children:(0,i.jsx)(E.JO,{useWithFillCurrentColor:!0,type:(null==(o=w[b])?void 0:o.icon)||(void 0===p?"":p),size:void 0===y?20:y})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};eT.propTypes={ariaLabel:Y().string,onClick:Y().func,icon:Y().string,type:Y().oneOf(["back","expand"]),href:Y().string,className:Y().string,size:Y().number};var eL=r(7391);function eD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var eM=function(e){var t,r,n=e.onSubmit,a=e.uploadAttachments,s=e.uploadingEnabled,l=(0,eb.Gc)(),c=l.handleSubmit,u=l.reset,d=(0,eb.qo)({name:"message"}),f=(0,o.useRef)(null),p=(0,eL.uI)({onDrop:a,noClick:!0,multiple:!1}),m=p.getRootProps,b=p.getInputProps,h=p.inputRef,y=function(){(0,em.Z)(f.current)};return(0,o.useEffect)(function(){y()},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ec.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,A.t)("support_widget.chatbot.message_placeholder"),ref:f,rows:1,onInput:y,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(c(n)(),u(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar !mb-1 !mt-2 max-h-[128px] resize-none !py-3 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,i.jsxs)("div",(t=eD({className:"flex justify-between pb-4 pl-6 pr-4"},m()),r=r={children:[(0,i.jsx)("input",eD({},b())),(0,i.jsx)(el.T,{placement:"right",content:s?(0,A.t)("tiptap.attach_file"):(0,A.t)("support_widget.chatbot.live_chat_send_a_message_first"),className:G()({"hover:text-circle focus:text-circle text-dark visited:text-dark":s,"text-dark visited:text-dark":!s}),children:(0,i.jsx)("button",{type:"submit","aria-label":(0,A.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),h.current.click()},disabled:!s,className:G()({"cursor-not-allowed":!s}),children:(0,i.jsx)(E.JO,{type:"tiptap-paperclip",size:20})})}),(0,i.jsx)("span",{className:G()({"text-circle dark:text-circle visited:text-circle":d,"text-dark visited:text-dark":!d}),children:(0,i.jsx)(E.JO,{type:"tiptap-send",className:G()({"cursor-pointer":d,"cursor-not-allowed":!d}),onClick:function(){d&&(c(n)(),u())},size:20})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))]})},eR="in_queue",eB="chatting",eF=function(e){var t=e.onStay,r=e.onLeave,n=e.warningType==eR?(0,A.t)("support_widget.chatbot.live_chat_leave_dialog.explanation_when_in_queue"):(0,A.t)("support_widget.chatbot.live_chat_leave_dialog.explanation_when_chatting");return(0,i.jsx)("div",{className:"my-auto px-14",children:(0,i.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-center text-sm",children:[(0,i.jsx)(es.Z.TitleSm,{weight:"bold",children:(0,i.jsx)("span",{className:"text-lg",children:(0,A.t)("support_widget.chatbot.live_chat_leave_dialog.are_you_sure")})}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)(es.Z.BodySm,{children:n})})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)(ed.z,{large:!0,full:!0,className:"!bg-[#2B2E33] dark:!bg-white dark:text-[#19283a]",onClick:t,children:(0,A.t)("support_widget.chatbot.live_chat_leave_dialog.stay")}),(0,i.jsx)(ed.z,{variant:"secondary",full:!0,large:!0,onClick:r,children:(0,A.t)("support_widget.chatbot.live_chat_leave_dialog.leave")})]})]})})};let ez=r.p+"0add643a01338187.mp3";var eU=r(63271),eZ=r(93199),eG=r(34870),eq="select-conversation-type",eV=function(e){var t=e.displayLiveChat,r=[{label:(0,A.t)("support_widget.chatbot.templates.conversation_select_type_answers.question"),event:eq,value:"question"},{label:(0,A.t)("support_widget.chatbot.templates.conversation_select_type_answers.feedback"),event:eq,value:"feedback"},{label:(0,A.t)("support_widget.chatbot.templates.conversation_select_type_answers.bug"),event:eq,value:"bug"}];return t&&r.push({label:(0,A.t)("support_widget.chatbot.templates.conversation_select_type_answers.live_chat"),event:eq,value:"live-chat"}),{content:(0,A.t)("support_widget.chatbot.templates.conversation_select_type"),buttons:r}},eH=function(e){var t=e.displayLiveChat,r=e.emailWaitTime,n=e.liveChatWaitTime;return t?{content:(0,A.t)("support_widget.chatbot.templates.select_contact_method"),buttons:[{label:(0,A.t)("support_widget.chatbot.contact_methods.live_chat"),sublabel:(0,A.t)("support_widget.chatbot.estimated_wait_time",{time:n}),event:eq,value:"live-chat"},{label:(0,A.t)("support_widget.chatbot.contact_methods.email"),sublabel:(0,A.t)("support_widget.chatbot.estimated_wait_time",{time:r}),event:"contact-support",value:null}]}:{content:(0,A.t)("support_widget.chatbot.templates.reach_out_to_support"),buttons:[{label:(0,A.t)("support_widget.send_a_message"),event:"contact-support",value:null}]}};function eW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eJ=function(e){var t=e.history,r=e.addMessage,n=e.setIsUserInputEnabled,i=e.setConversationType,o=e.setProductArea,a=e.conversationType,s=e.setIsBotProcessing,l=e.createSupportWidgetFeedback,c=e.productArea,u=e.createChatMessage,d=e.sessionId,f=e.setSessionId,p=e.setIsConversationEnded,m=e.displayLiveChat,b=e.createLiveChatMessage,h=e.setIsLiveChatEnded,y=e.hasPostedLiveMessage,v=e.setIsLiveChatWithDeflectionEnabled,g=function(e){"bug"===e?r("bot",{content:(0,A.t)("support_widget.chatbot.templates.reach_out_to_support"),buttons:[{label:(0,A.t)("support_widget.send_a_message"),event:"contact-support",value:null}]}):"feedback"==e?r("bot",{content:(0,A.t)("support_widget.chatbot.templates.feedback_select_product_area"),buttons:ea.Dh.map(function(e){return{label:e.text,event:"select-product-type",value:e.value}})}):"question"==e?r("bot",{content:(0,A.t)("support_widget.chatbot.templates.question_select_product_area"),buttons:ea.Dh.map(function(e){return{label:e.text,event:"select-product-type",value:e.value}})}):"live-chat"==e&&(0,eZ.t5)(eu.av.supportWidget.getLiveChatStatus({flow:"any"})).then(function(e){return e.json()}).then(function(e){if(e.is_available)r("bot",{content:(0,A.t)("support_widget.chatbot.templates.live_chat_start"),buttons:[]}),n(!0);else{var t=null==e?void 0:e.opening_time,i=null==e?void 0:e.closing_time;n(!1),s(!1),r("bot",{content:(0,A.t)("support_widget.chatbot.templates.live_chat_closed",{openingTime:t,closingTime:i}),buttons:[{label:(0,A.t)("support_widget.send_a_message"),event:"contact-support",value:null}]})}}).catch(function(){}),i(e)},_=function(e){r("user",{content:(0,ee.jY)(e),buttons:[]}),"feedback"===a?(s(!0),n(!1),l({text:e,area:c,type:"feedback",priority:"normal"})):"question"===a?(s(!0),n(!1),u({message:e,sessionId:d,productArea:c})):"live-chat"===a&&(y||s(!0),b({message:e,sessionId:d}))};return function(e){var l=e.event,u=e.value;"select-conversation-type"===l?g(u):"contact-support"===l?((0,ee.qQ)(eQ(eW({},(0,ee.$o)()),{formValues:eQ(eW({},ea.E$),{type:a,area:c,text:u})})),t.push("/form",{source:"chat",chatBotSessionId:d})):"start-chat"===l?(r("bot",eV({displayLiveChat:m})),f(null),o(null),i(null),n(!1),s(!1),p(!1),h(!1)):"restart-chat"===l?(r("bot",eV({displayLiveChat:m})),f(null),o(null),i(null),n(!1),s(!1),v(!1)):"select-product-type"==l?("feedback"===a?r("bot",{content:(0,A.t)("support_widget.chatbot.templates.feedback_prompt"),buttons:[]}):"question"===a&&r("bot",{content:(0,A.t)("support_widget.chatbot.templates.question_prompt"),buttons:[]}),o(u),n(!0)):"post-message"==l?_(u):"complete-chat"==l&&(r("bot",{content:["Enjoy the rest of your day!"],buttons:[]}),n(!1),p(!0))}},eK=r(89888);function e$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eX(){return(eX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function eY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||e0(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e0(e,t){if(e){if("string"==typeof e)return e$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e$(e,t)}}var e1=function(){var e=(0,F.J1)().liveChatEnabled,t=(0,eK.Pi)({enabled:e}),r=t.data,n=t.isLoading,i=eY((0,o.useState)(!1),2),a=i[0],s=i[1],l=null==r?void 0:r.is_available,c=(0,B.k6)(),u=eY((0,o.useState)(null),2),d=u[0],f=u[1],p=eY((0,o.useState)(null),2),m=p[0],b=p[1],h=eY((0,o.useState)(null),2),y=h[0],v=h[1],g=eY((0,o.useState)(e),2),_=g[0],x=g[1],j=eY((0,o.useState)(!1),2),w=j[0],O=j[1],S=eY((0,o.useState)(!1),2),k=S[0],P=S[1],C=eY((0,o.useState)(!1),2),N=C[0],I=C[1],E=eY((0,o.useState)([]),2),T=E[0],L=E[1],D=eY((0,o.useState)(!1),2),M=D[0],R=D[1],z=eY((0,o.useState)(!1),2),U=z[0],Z=z[1],G=eY((0,o.useState)(null),2),q=G[0],V=G[1],H=new Audio(ez),W=eY((0,o.useState)(!1),2),Q=W[0],J=W[1],K=eY((0,o.useState)(!1),2),$=K[0],X=K[1];H.oncanplaythrough=function(){return J(!0)};var Y=function(e,t){var r=eX({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(t));L(function(t){return((function(e){if(Array.isArray(e))return e$(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||e0(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:new Date().getTime().toString(),type:e,createdAt:(0,eG.w)({dateTime:new Date,format:eG.f.short_time})},r)])})},et=(0,eK.Gi)({attachments:[],source:"chat",onSuccess:function(){x(!1),Y("bot",{content:(0,A.t)("support_widget.chatbot.templates.feedback_received"),buttons:[]}),Y("bot",{content:(0,A.t)("support_widget.chatbot.templates.restart_prompt"),buttons:[{label:(0,A.t)("support_widget.chatbot.answer_yes"),event:"restart-chat",value:null},{label:(0,A.t)("support_widget.chatbot.answer_no"),event:"complete-chat",value:null}]})}}).mutate,er=(0,eK.N9)({onSuccess:function(e){f(e.result.session_id),x(!1),O(!0);var t=e.result.answer,r=[],n=t.match(RegExp("<sources>(.*)<\\/sources>","s"));if(n){t=t.replace(n[0],"");var i=JSON.parse(n[1]).filter(function(e){return"Not Available"!==e.url}).map(function(e){var t=e.url,r=e.title;return{url:t?t.replace("https://help-en.circle.so","https://help.circle.so"):null,title:r}}).map(function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.title,"</a></li>")});i.length>0&&(t=t.concat('<h6 class="sources-title">'.concat((0,A.t)("support_widget.chatbot.helpful_resources"),"</h6><ul>").concat(i.join(""),"</ul>")))}if(t.match(RegExp("<ticket>(.*)<\\/ticket>","s"))){var o,a,l,c,u=eH({displayLiveChat:null==e||null==(o=e.live_chat)?void 0:o.is_available,emailWaitTime:null==e||null==(a=e.live_chat)?void 0:a.email_wait_time,liveChatWaitTime:null==e||null==(l=e.live_chat)?void 0:l.live_chat_wait_time});t=u.content,r=u.buttons,O(!1),s(null==e||null==(c=e.live_chat)?void 0:c.is_available)}Y("bot",{content:t,buttons:r,showDisclaimer:!0})}}).mutate,en=(0,eK.bj)({onSuccess:function(e){var t;if((null==(t=e.result)?void 0:t.error)=="chat_closed"){var r,n,i=null==(r=e.result)?void 0:r.opening_time,o=null==(n=e.result)?void 0:n.closing_time;O(!1),x(!1),Y("bot",{content:(0,A.t)("support_widget.chatbot.templates.live_chat_closed",{openingTime:i,closingTime:o}),buttons:[{label:(0,A.t)("support_widget.send_a_message"),event:"contact-support",value:null}]})}else f(e.result.session_id),U||Z(!0)}}).mutate;(0,eU.s)({channel:"SupportWidget::LiveChatChannel",onMessageReceive:function(e){"newMessage"===e.event?(Y(e.userType,{content:(0,ee.jY)(e.content),authorAvatarUrl:e.author.avatarUrl,authorName:e.author.name,buttons:[],attachments:e.attachments}),"user"!=e.userType&&Q&&H.play()):"completeChat"===e.event?(P(!0),O(!1),R(!1)):"enterQueue"===e.event?(V(e.position),R(!0),x(!1),Y("bot",{content:(0,A.t)("support_widget.chatbot.templates.live_chat_first_message_posted"),buttons:[]})):"updateQueue"===e.event?V(e.position):"agentJoined"===e.event&&(Y("bot",{content:(0,A.t)("support_widget.chatbot.templates.live_chat_agent_joined",{agent_first_name:e.agent_first_name}),buttons:[]}),Q&&H.play(),R(!1),X(!0))},chat_bot_session_id:d,canCreateConnection:(l||a)&&d},[]);var ei=eJ({history:c,addMessage:Y,setIsUserInputEnabled:O,setConversationType:b,setProductArea:v,conversationType:m,setIsBotProcessing:x,createSupportWidgetFeedback:et,productArea:y,createChatMessage:er,sessionId:d,setSessionId:f,setIsConversationEnded:I,displayLiveChat:l,createLiveChatMessage:en,setIsLiveChatEnded:P,setIsWaiting:R,hasPostedLiveMessage:U,setIsLiveChatWithDeflectionEnabled:s});return{sessionId:d,conversationType:m,messages:T,isBotProcessing:_,isUserInputEnabled:w,isLiveChatEnded:k,isConversationEnded:N,process:ei,isWaiting:M,currentQueuePosition:q,isLiveChatStatusLoading:n,hasPostedLiveMessage:U,hasAgentJoined:$}},e2=r(94849);function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e6(e){return function(e){if(Array.isArray(e))return e3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||e4(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e4(e,t){if(e){if("string"==typeof e)return e3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e3(e,t)}}var e5=function(e){var t,r=e.sessionId,n=(t=(0,o.useState)(function(){return[]}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||e4(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],a=n[1],s=(0,o.useRef)({}),l=function(e,t){a(function(r){return r.map(function(r){return r.url===e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r,t):r})})},c=function(e){var t=e.url,n=e.zendeskUploadId,i=null;i=setInterval(function(){V.R.checkAttachment({zendeskUploadId:n,target:"sunshine"}).then(function(e){s.current[t]?clearInterval(i):e.success&&(clearInterval(i),a(function(e){return e.filter(function(e){return e.url!==t})}),V.R.uploadLiveChatAttachment({mediaUrl:e.sunshine_media_url,mediaIsImage:e.sunshine_is_image,sessionId:r}))}).catch(function(e){console.error(e)})},1e3)},u=function(e){var t=e.url,r=e.file,n=e.filename;l(t,{status:ea.si}),new e2.TX(r,(0,eu.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(r){s.current[t]&&e.abort(),l(t,{progress:r.loaded/r.total*100})})}}).create(function(e,r){if(e)throw l(t,{status:ea.sM}),Error("Direct upload failed: ".concat(e));V.R.createAttachment({signedId:r.signed_id,target:"sunshine"}).then(function(e){return e.json()}).then(function(e){var i=(0,eu.Gd)({signed_id:r.signed_id,filename:r.filename}),o=e.zendesk_upload_id;l(t,{status:ea.X,zendeskUploadId:o,blobUrl:i}),c({url:t,filename:n,zendeskUploadId:o,blobUrl:i})}).catch(function(e){console.error(e)})})};return{uploadAttachments:function(e){var t=e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}});a(e6(i).concat(e6(t)));var r=!0,n=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;u({url:c.url,file:c.file,filename:c.filename,status:ea.si})}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}},attachments:i,setAttachments:a,cancelAttachment:function(e){s.current[e.url]=!0,a(function(t){return t.filter(function(t){return t.url!==e.url})})}}},e8=function(e){if(0===e)return e;if(e>=11&&e<=13)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}};function e9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e9(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te="back",tt=function(){var e=e1(),t=e.sessionId,r=e.conversationType,n=e.messages,a=e.isBotProcessing,s=e.isUserInputEnabled,l=e.isLiveChatEnded,c=e.isConversationEnded,u=e.process,d=e.isWaiting,f=e.currentQueuePosition,p=e.isLiveChatStatusLoading,m=e.hasPostedLiveMessage,b=e.hasAgentJoined,h=(0,F.J1)(),y=h.setOnWidgetClose,v=h.toggleWidget,g=(0,B.k6)(),_=e7((0,o.useState)(null),2),x=_[0],j=_[1],w=e7((0,o.useState)(null),2),O=w[0],S=w[1],k=e5({sessionId:t}),P=k.attachments,C=k.uploadAttachments,N=k.cancelAttachment,I="live-chat"==r&&m&&!l;(0,o.useEffect)(function(){0!=n.length||p||u({event:"start-chat"});var e=document.getElementById("message-scroll-view");e&&e.scrollIntoView()},[n.length,u,p]),(0,o.useEffect)(function(){if(I){var e=function(e){return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),y(function(){S("collapse"),j(b?eB:eR)}),function(){window.removeEventListener("beforeunload",e),y(null)}}},[I,y,b]);var T=function(e){u({event:"post-message",value:e.message})};return x?(0,i.jsx)(eF,{warningType:x,onStay:function(){S(null),j(null)},onLeave:function(){O==te?g.replace("/"):v({shouldTriggerOnWidgetClose:!1})}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"sticky top-0 z-10",children:[(0,i.jsxs)("div",{className:"border-primary bg-primary flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,i.jsx)(eT,{type:"back",onClick:function(){I?(S(te),j(b?eB:eR)):g.replace("/")}}),(0,i.jsx)("div",{children:t&&(0,i.jsx)(el.T,{placement:"top",content:(0,A.t)("support_widget.chatbot.download_chat"),children:(0,i.jsx)(eT,{href:eu.av.supportWidget.downloadChat(t),icon:"download",className:""})})})]}),d&&(0,i.jsxs)("div",{className:"border-primary bg-secondary flex gap-4 border-b p-4",children:[(0,i.jsx)("div",{className:"bg-primary flex h-10 w-10 shrink-0 items-center justify-center rounded-lg text-[#6550D9]",children:(0,i.jsx)(E.JO,{type:"20-time-delay",size:20})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(es.Z.BodySm,{children:(0,A.t)("support_widget.chatbot.live_chat_wait_queue.please_wait")}),(0,i.jsx)(es.Z.BodySm,{weight:"font-bold",children:(0,A.t)("support_widget.chatbot.live_chat_wait_queue.current_position",{position:e8(f)})})]})]})]}),(0,i.jsxs)("div",{className:"mb-6 mt-auto flex flex-col",children:[n.map(function(e){var t,r;return(0,i.jsx)(eN,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={process:u},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),e.id)}),a&&(0,i.jsx)(eA,{}),P.length>0&&(0,i.jsx)("div",{className:"mt-4 flex flex-col gap-2 pl-6 pr-4",children:P.map(function(e){return(0,i.jsx)(eE,{attachment:e,onCancel:N},e.url)})}),(0,i.jsx)("div",{id:"message-scroll-view"})]}),s?(0,i.jsx)("div",{className:"bg-primary sticky bottom-0 z-10",children:(0,i.jsx)("div",{className:"border-primary border-t",children:(0,i.jsx)(ec.l,{onSubmit:T,children:"live-chat"==r?(0,i.jsx)(eM,{onSubmit:T,uploadAttachments:C,uploadingEnabled:m}):(0,i.jsx)(eh,{onSubmit:T})})})}):null,c&&(0,i.jsx)(ep,{type:"type_ai_chat",onClick:function(){return g.replace("/")}}),l&&(0,i.jsx)(ep,{type:ef,onClick:function(){return g.replace("/")}})]})},tr=r(60878),tn=r(57338),ti=function(e){var t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll(":empty:not(br):not(img)").forEach(function(e){return e.remove()}),t.body.innerHTML},to=function(e){var t=document.createElement("div");return t.innerHTML=e.replace(/\n/g,"<br>").replace(/(<br\s*\/?>\s*)+/g,"<br>"),t.querySelectorAll("[style]").forEach(function(e){return e.removeAttribute("style")}),ti(t.innerHTML)},ta=function(e){var t=e.author,r=e.avatar,n=e.content,o=e.attachments,a=e.createdAt,s=to(n),l=(0,tn.H)(a).time;return(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("div",{className:"pt-1",children:(0,i.jsx)(e_.s,{src:r,size:"10",name:t})}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,i.jsx)(T.Di,{weight:"bold",children:t}),(0,i.jsx)(es.Z.LabelSm,{children:l})]}),(0,i.jsx)(ev.p,{children:(0,i.jsx)(ey.Z,{html:s,className:"comment-body"})}),(0,i.jsx)(eS,{attachments:o})]})]})};function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var tl=function(e){var t,r,n=e.isSubmitting,a=e.uploadAttachments,s=e.attachments,l=e.cancelAttachment,c=e.commentsCount,u=e.onSubmit,d=(0,eb.Gc)(),f=d.setValue,p=d.handleSubmit,m=d.reset,b=(0,eb.qo)({name:"comment"}),h=s.every(function(e){return e.completed}),y=(0,eL.uI)({onDrop:a,noClick:!0}),v=y.getRootProps,g=y.getInputProps,_=y.inputRef,x=!n&&b&&h,j=(0,o.useRef)(null),w=function(){(0,em.Z)(j.current),document.getElementById("scroll-to-bottom").scrollIntoView()};return(0,o.useEffect)(function(){f("comment",""),m(),j.current.disabled=!1,j.current.style.height="44px",document.getElementById("scroll-to-bottom").scrollIntoView()},[f,m,c]),(0,o.useEffect)(function(){w()},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ec.l.Input,{name:"comment",variant:"textarea",label:null,placeholder:(0,A.t)("support_widget.chatbot.message_placeholder"),ref:j,rows:1,onInput:w,hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar !mb-1 !mt-2 max-h-[128px] resize-none !py-3 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),s.length>0&&(0,i.jsx)("div",{className:"my-4 flex flex-col gap-2 pl-6 pr-4",children:s.map(function(e){return(0,i.jsx)(eE,{attachment:e,onCancel:l},e.url)})}),(0,i.jsxs)("div",(t=ts({className:"flex justify-between pb-4 pl-6 pr-4"},v()),r=r={children:[(0,i.jsx)("input",ts({},g())),(0,i.jsx)(el.T,{placement:"right",content:(0,A.t)("tiptap.attach_file"),className:"hover:text-circle focus:text-circle text-dark visited:text-dark",children:(0,i.jsx)("button",{type:"submit","aria-label":(0,A.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),_.current.click()},children:(0,i.jsx)(E.JO,{type:"tiptap-paperclip",size:20})})}),(0,i.jsx)("span",{className:G()({"text-circle dark:text-circle visited:text-circle":x,"text-dark visited:text-dark":!x}),children:(0,i.jsx)(E.JO,{type:"tiptap-send",className:G()({"cursor-pointer":x,"cursor-not-allowed":!x}),onClick:function(){x&&(p(u)(),j.current.disabled=!0)},size:20})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))]})},tc=function(e){var t=e.current,r=e.previous,n=(0,tn.H)(t).day;return n!==(0,tn.H)(r).day?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"}),(0,i.jsx)("div",{className:"mx-5 grow-0",children:(0,i.jsx)(es.Z.LabelXs,{color:"text-light",weight:"semibold",children:n.toUpperCase()})}),(0,i.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"})]}):null};tc.propTypes={current:Y().string,previous:Y().string};var tu=function(e){var t=e.rows,r=e.wrapperClassName,n=e.loaderClassName,o=void 0===n?"":n,a=e.width,s=void 0===a?"100%":a,l=e.height,c=void 0===l?"24px":l;return(0,i.jsx)("div",{className:G()("animate-pulse space-y-2 px-6 last:pb-4",void 0===r?"":r),children:Array(void 0===t?1:t).fill().map(function(e,t){return(0,i.jsx)("div",{className:G()("bg-secondary rounded-md",o),style:{width:s,height:c}},t)})})};function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tf(e,t,r[t])})}return e}function tm(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tb(e){return function(e){if(Array.isArray(e))return td(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||th(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function th(e,t){if(e){if("string"==typeof e)return td(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return td(e,t)}}tu.propTypes={rows:Y().number,wrapperClassName:Y().string,loaderClassName:Y().string,width:Y().string,height:Y().string};var ty=function(e){var t,r=e.controlName,n=e.cachingEnabled,i=(t=(0,o.useState)(function(){return n&&(0,ee.$o)()["".concat(r,"-attachments")]||[]}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||th(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1],l=(0,o.useRef)({}),c=function(e,t){s(function(r){return r.map(function(r){return r.url===e?tp({},r,t):r})})},u=function(e){var t=e.url,i=e.filename,o=e.zendeskUploadId,a=e.blobUrl,s=null;s=setInterval(function(){V.R.checkAttachment({zendeskUploadId:o.current}).then(function(e){if(l.current[t])clearInterval(s);else if(e.success){if(c(t,{status:ea.L9,completed:!0}),n){var u=(0,ee.$o)()["".concat(r,"-attachments")]||[];(0,ee.qQ)(tm(tp({},(0,ee.$o)()),tf({},"".concat(r,"-attachments"),tb(u).concat([{status:ea.L9,completed:!0,url:t,filename:i,zendeskUploadId:o,blobUrl:a}]))))}clearInterval(s)}}).catch(function(e){console.error(e)})},1e3)},d=function(e){var t=e.url,r=e.file,n=e.filename;c(t,{status:ea.si}),new e2.TX(r,(0,eu.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(r){l.current[t]&&e.abort(),c(t,{progress:r.loaded/r.total*100})})}}).create(function(e,r){if(e)throw c(t,{status:ea.sM}),Error("Direct upload failed: ".concat(e));V.R.createAttachment({signedId:r.signed_id}).then(function(e){return e.json()}).then(function(e){var i=(0,eu.Gd)({signed_id:r.signed_id,filename:r.filename}),o=e.zendesk_upload_id;c(t,{status:ea.X,zendeskUploadId:o,blobUrl:i}),u({url:t,filename:n,zendeskUploadId:o,blobUrl:i})}).catch(function(e){console.error(e)})})};return{uploadAttachments:function(e){var t=e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}});s(tb(a).concat(tb(t)));var r=!0,n=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;d({url:c.url,file:c.file,filename:c.filename,status:ea.si})}}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}},attachments:a,setAttachments:s,cancelAttachment:function(e){l.current[e.url]=!0,s(function(t){return t.filter(function(t){return t.url!==e.url})}),n&&(0,ee.qQ)(tm(tp({},(0,ee.$o)()),tf({},"".concat(r,"-attachments"),((0,ee.$o)()["".concat(r,"-attachments")]||[]).filter(function(t){return t.url!==e.url}))))}}},tv=r(65978),tg=tv.Ry().shape({text:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.text")),type:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.type")),area:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.area")),priority:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.priority"))}),t_=tv.Ry().shape({comment:tv.Z_().required("This field is required")});function tx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tj=function(){var e,t=(0,o.useRef)(null),r=(0,tr.pm)(),n=(0,I.wh)().currentCommunityMember,a=(0,B.$B)(),s=(0,B.TH)(),l=(0,B.k6)(),c=Number(a.params.id),u=(0,eK.Y1)(c),d=u.isError,f=u.isLoading,p=u.data,m=null==p?void 0:p.conversation,b=null==p?void 0:p.comments,h=ty({controlName:"conversation-view-".concat(c),cachingEnabled:!1}),y=h.uploadAttachments,v=h.attachments,g=h.setAttachments,_=h.cancelAttachment,x=(0,q.useQueryClient)(),j=(0,q.useMutation)(function(e){var t=e.comment;return V.R.updateConversation({comment:t,id:c,zendeskUploadIds:v.map(function(e){return e.zendeskUploadId})}).then(function(e){return e.json()})},{onSuccess:function(e){x.setQueryData(["conversations","show",c],function(t){var r;return{conversation:t.conversation,comments:((function(e){if(Array.isArray(e))return tx(e)})(r=t.comments)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return tx(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tx(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e.comment])}}),g([]),r.success((0,A.t)("support_widget.send_message_form.success"))},onError:N.noop}),w=j.mutate,O=j.isLoading;if((0,o.useEffect)(function(){f||d||!t.current||(t.current.querySelectorAll(".comment-body a").forEach(function(e){e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer noopener")}),t.current.querySelectorAll(".comment-body img").forEach(function(e){var t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("rel","noreferrer noopener"),t.setAttribute("href",e.getAttribute("src")),e.parentNode.insertBefore(t,e),t.appendChild(e)}),t.current.querySelectorAll(".signature").forEach(function(e){return e.remove()}),document.getElementById("scroll-to-bottom").scrollIntoView())},[f,d]),f)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,i.jsx)(tu,{rows:4,height:"60px"})]});if(d)return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"support-widget-post__header border-primary flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:(0,i.jsx)(eT,{type:"back"})}),(0,i.jsx)("div",{className:"grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,A.t)("support_widget.no_messages_found")})})]});var S="solved"===m.status&&m.tags.some(function(e){return"auto_close"===e});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-primary support-widget-post__header border-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(null==(e=s.state)?void 0:e.from)=="CreateConversationView"?(0,i.jsx)(eT,{type:"back",onClick:function(){return l.push("/")}}):(0,i.jsx)(eT,{type:"back"}),(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-dark",children:O?(0,A.t)("support_widget.sending"):(0,N.truncate)(m.subject,{length:30})}),(0,i.jsx)("div",{className:"w-[44px]"})]}),(0,i.jsx)("div",{className:"mt-auto flex flex-col",children:(0,i.jsx)("div",{className:"mx-6 my-4 flex flex-col gap-4",ref:t,children:b.map(function(e,t){var r,o;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tc,{current:e.created_at,previous:null==(r=b[t-1])?void 0:r.created_at}),(0,i.jsx)(ta,{author:e.author_id===m.requester_id?n.name:e.author.name,avatar:e.author_id===m.requester_id?n.avatar_url:null==(o=e.author.photo)?void 0:o.content_url,attachments:e.attachments,content:e.html_body,createdAt:e.created_at},e.id)]})})})}),(0,i.jsxs)("div",{children:["closed"===m.status&&(0,i.jsx)("div",{className:"dark:border-light mt-auto flex flex-col items-center gap-5 border-t p-5",children:(0,i.jsx)(T.Di,{weight:"medium",color:"text-light",children:(0,A.t)("support_widget.conversation_closed")})}),S&&(0,i.jsxs)("div",{className:"dark:border-light mt-auto flex flex-col items-center gap-5 border-t p-5 text-center",children:[(0,i.jsx)(T.Di,{weight:"medium",color:"text-light",children:(0,A.t)("support_widget.conversation_auto_closed")}),(0,i.jsx)(T.Di,{weight:"medium",color:"text-light",children:(0,i.jsx)("button",{type:"button",onClick:function(){return l.push("/ask")},className:"text-link",children:(0,A.t)("support_widget.conversation_auto_closed_still_need_help")})})]}),!S&&"closed"!==m.status&&(0,i.jsx)("div",{className:"border-t-primary border-t",children:(0,i.jsx)(ec.l,{preventAccidentalLeave:!0,validationSchema:t_,id:"update-message-form",onSubmit:w,mode:"onSubmit",defaultValues:{comment:""},children:(0,i.jsx)(tl,{isSubmitting:O||f,attachments:v,uploadAttachments:y,cancelAttachment:_,commentsCount:b.length,onSubmit:w})})}),(0,i.jsx)("div",{id:"scroll-to-bottom"})]})]})},tw=function(e){var t,r,n=e.onClick,o=void 0===n?N.noop:n,a=e.className,s=e.label,l=e.type,c=e.dataTestId,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","className","label","type","dataTestId"]);return(0,i.jsx)("button",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:G()("w-full rounded-lg bg-[#506CF0] px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",a),onClick:o,type:void 0===l?"button":l,"data-testid":c},u),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};tw.propTypes={onClick:Y().func,className:Y().string,label:Y().string.isRequired,type:Y().string,dataTestId:Y().string};var tO=function(e){var t=e.conversation,r=t.id,n=t.subject,o=t.status,a=t.custom_fields.find(function(e){return 0xaff66b84297===e.id}),s=a?I18n.t("support_widget.conversation_item.source.".concat(a.value)):void 0,l=(0,tn.H)(t.updated_at).day;return(0,i.jsxs)(er.rU,{to:"/conversations/".concat(r),className:"text-dark hover:bg-tertiary hover:text-dark focus:bg-secondary focus:text-dark cursor-pointer px-6 py-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(es.Z.LabelSm,{truncate:!0,weight:t.unread?"medium":"normal",children:n}),(0,i.jsxs)("div",{className:"ml-4 flex self-center",children:[t.unread&&(0,i.jsx)("div",{className:"mr-3 flex self-center",children:(0,i.jsx)("span",{className:"h-2 w-2 rounded-full bg-blue-600"})}),(0,i.jsx)("span",{className:G()("inline-flex w-14 items-center justify-center rounded-full px-2 py-1 text-xs font-medium ring-1 ring-inset",{"bg-gray-50 text-gray-500 ring-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:ring-gray-600":"closed"===o||"solved"===o,"bg-green-50 text-green-600 ring-green-600/50 dark:bg-[#0D6E30] dark:text-white dark:ring-[#199543]":"closed"!==o&&"solved"!==o}),children:{closed:I18n.t("support_widget.conversation_item.status.closed"),solved:I18n.t("support_widget.conversation_item.status.solved")}[o]||I18n.t("support_widget.conversation_item.status.open")})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)(es.Z.BodyXs,{className:"text-xs",color:"text-gray-400 flex",children:[s,(0,i.jsx)("div",{className:"mx-2 flex self-center",children:(0,i.jsx)("span",{className:"h-1 w-1 rounded-full bg-[#9ca3af]"})}),l]})})]})};tO.propTypes={conversation:X.PropTypes.object};var tS=function(){var e,t=(0,F.J1)(),r=t.isDraftConversationPresent,n=t.setIsDraftConversationPresent,o=(0,B.k6)(),a=null==(e=(0,ee.$o)().formValues)?void 0:e.text,s=(0,A.t)("support_widget.draft_message_button.title")+" "+(a||(0,A.t)("support_widget.draft_message_button.default_title"));return r?(0,i.jsx)("button",{type:"button",className:"text-dark hover:bg-tertiary hover:text-dark focus:bg-secondary focus:text-dark cursor-pointer px-6 py-2",onClick:function(){o.replace("/form")},children:(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"mr-5 flex min-w-0 flex-col text-left",children:[(0,i.jsx)(es.Z.LabelSm,{truncate:!0,weight:"medium",children:s}),(0,i.jsx)("div",{children:(0,i.jsx)(es.Z.BodyXs,{className:"text-xs",color:"text-gray-400",children:(0,A.t)("support_widget.draft_message_button.subtitle")})})]}),(0,i.jsx)("div",{className:"items-center self-center",children:(0,i.jsx)("span",{className:"text-dark px-4",children:(0,i.jsx)(E.JO,{type:"16-trash-bin",useWithFillCurrentColor:!0,onClick:function(e){var t,r;(0,ee.qQ)((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,ee.$o)()),r=r={formValues:ea.E$},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),n(!1),e.stopPropagation()},size:20})})})]})}):null},tk=function(){var e=(0,eK.FG)(),t=e.isLoading,r=e.data;if(t)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"!px-0"}),[,,,,].fill(null).map(function(e,t){return(0,i.jsxs)("div",{className:"my-2",children:[(0,i.jsx)(tu,{rows:1,height:"20px",width:"80%",loaderClassName:"mb-2"}),(0,i.jsx)(tu,{rows:1,height:"13px",width:"25%",wrapperClassName:"last:pb-0"})]},t)})]});var n=(null==r?void 0:r.conversations)||[];return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("support_widget.messages_screen.title")})}),(0,i.jsx)(tS,{}),0===n.length?(0,i.jsx)("div",{className:"flex flex-col justify-center px-6 py-8",children:(0,i.jsx)("div",{className:"mx-auto mb-5 mt-auto w-full",children:(0,i.jsxs)("div",{className:"border-primary bg-primary rounded-lg border",children:[(0,i.jsx)("div",{className:"mt-4 text-center",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"dark:text-secondary",children:(0,A.t)("support_widget.no_messages_found")})}),(0,i.jsx)("div",{className:"mx-6 my-5",children:(0,i.jsx)(er.rU,{to:eu._N.askChatBot(),children:(0,i.jsx)(tw,{label:(0,A.t)("support_widget.need_help"),className:"dark:bg-primary dark:text-white"})})})]})})}):n.map(function(e){return(0,i.jsx)(tO,{conversation:e},e.id)})]})},tP=r(48298),tC=function(e){return(0,i.jsx)(ec.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,fullWidth:!0,translationRoot:"support_widget.send_message_form"},e))};function tN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tN(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tT=function(e){var t=e.isLoading,r=e.uploadAttachments,n=e.attachments,a=e.cancelAttachment,s=tE((0,eb.qo)({name:["text","type","area","priority"]}),4),l=s[0],c=s[1],u=s[2],d=s[3],f=l&&c&&u&&d,p=(0,tP.c)(l,500),m=tE((0,o.useState)(ea.Mj),2),b=m[0],h=m[1],y=tE((0,o.useState)(ea.Dh),2),v=y[0],g=y[1],_=tE((0,o.useState)(ea.a$),2),x=_[0],j=_[1],w=(0,F.J1)().setIsDraftConversationPresent,O=n.every(function(e){return e.completed}),S=(0,eL.uI)({onDrop:r,noClick:!0}),k=S.getRootProps,P=S.getInputProps,C=S.inputRef;return(0,o.useEffect)(function(){(0,ee.qQ)(tI(tA({},(0,ee.$o)()),{formValues:{text:p,type:c,area:u,priority:d}})),w(p||c||u||d)},[p,c,u,w,d]),(0,o.useEffect)(function(){document.getElementById("send-message-form-container").scrollIntoView()},[]),(0,i.jsxs)("div",{className:"flex max-h-full flex-col px-6",children:[(0,i.jsx)(tC,{hidePlaceholder:!1,name:"type",children:(0,i.jsx)(ec.l.Select,{name:"type",data:b,onSearch:function(e){""===e?h(ea.Mj):h(ea.Mj.filter(function(t){return t.value.toLowerCase().includes(e.toLowerCase())}))}})}),(0,i.jsx)(tC,{hidePlaceholder:!1,className:"!pt-2",name:"area",children:(0,i.jsx)(ec.l.Select,{name:"area",data:v,onSearch:function(e){""===e?g(ea.Dh):g(ea.Dh.filter(function(t){return t.value.toLowerCase().includes(e.toLowerCase())}))}})}),(0,i.jsx)(tC,{name:"priority",className:"!pt-2",hidePlaceholder:!1,children:(0,i.jsx)(ec.l.Select,{name:"priority",inputContainerClassName:"priority-select-input-container",data:x,onSearch:function(e){""===e?j(ea.a$):j(ea.a$.filter(function(t){return t.text.toLowerCase().includes(e.toLowerCase())}))}})}),(0,i.jsx)(tC,{className:"!pt-2",name:"text",children:(0,i.jsx)(ec.l.Input,{name:"text",variant:"textarea",rows:12,className:"form-control resize-none"})}),n.length>0&&(0,i.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:n.map(function(e){return(0,i.jsx)(eE,{attachment:e,onCancel:a},e.url)})}),(0,i.jsxs)("div",tI(tA({className:"my-6 flex justify-between"},k()),{children:[(0,i.jsx)("input",tA({},P())),(0,i.jsx)(el.T,{placement:"right",content:(0,A.t)("tiptap.attach_file"),className:"text-dark visited:text-dark hover:bg-tertiary hover:text-dark focus:bg-tertiary flex w-10 items-center justify-center rounded-lg text-center",children:(0,i.jsx)("button",{type:"button","aria-label":(0,A.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),C.current.click()},className:"p-2",children:(0,i.jsx)(E.JO,{type:"tiptap-paperclip",size:20})})}),(0,i.jsx)(el.T,{placement:"left",content:(0,A.t)("support_widget.send_message_form.button_tooltip"),disabled:f&&O,children:(0,i.jsx)("button",{className:"bg-circle rounded-lg px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",disabled:t||!f||!O,type:"submit",children:(0,A.t)("support_widget.send_message_form.button_label")})})]}))]})};tT.propTypes={isLoading:Y().bool,uploadAttachments:Y().func,attachments:Y().array,cancelAttachment:Y().func};var tL=function(){var e,t,r=(0,B.k6)(),n=(0,B.TH)(),o=(0,tr.pm)(),a=ty({controlName:"conversation-create",cachingEnabled:!0}),s=a.uploadAttachments,l=a.attachments,c=a.cancelAttachment,u=(0,F.J1)().setIsDraftConversationPresent,d=(0,eK.Gi)({attachments:l,source:null==(e=n.state)?void 0:e.source,chatBotSessionId:null==(t=n.state)?void 0:t.chatBotSessionId,onSuccess:function(e){var t=(0,ee.$o)();delete t["conversation-create-attachments"],delete t.formValues,(0,ee.qQ)(t),u(!1),o.success((0,A.t)("support_widget.conversation_created_toast")),r.push("/conversations/".concat(e.id),{from:"CreateConversationView"})},onError:function(){o.error((0,A.t)("request_failure_message"))}}),f=d.mutate,p=d.isLoading,m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},ea.E$,(0,ee.$o)().formValues);return(0,i.jsxs)("div",{className:"flex flex-col",id:"send-message-form-container",children:[(0,i.jsxs)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-start space-x-4 border-b px-3",children:[(0,i.jsx)(eT,{type:"back",onClick:function(){return r.replace("/")}}),(0,i.jsx)("span",{className:"flex-1 text-center",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-dark",children:p?(0,A.t)("support_widget.sending_message"):(0,A.t)("support_widget.send_a_message")})}),(0,i.jsx)(eT,{type:"expand"})]}),(0,i.jsx)("div",{className:"grow overflow-y-auto",children:(0,i.jsx)(ec.l,{preventAccidentalLeave:!0,validationSchema:tg,id:"send-message-form",onSubmit:f,mode:"onSubmit",defaultValues:m,children:(0,i.jsx)(tT,{isLoading:p,attachments:l,uploadAttachments:s,cancelAttachment:c})})})]})},tD=function(e){var t=e.event,r=e.last,n=new Date(t.starts_at).toLocaleString("en-US",{month:"long",day:"numeric"}),o=new Date(t.starts_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,i.jsxs)("a",{href:t.post_url,target:"_blank",rel:"noreferrer",className:G()("flex items-start justify-between p-4 hover:bg-gray-100 dark:border-gray-700 hover:dark:bg-gray-900",{"border-b":!r}),children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("span",{className:"text-sm font-semibold text-[#1A283B] dark:font-medium dark:text-gray-300",children:t.name}),(0,i.jsxs)("span",{className:"text-[11px] font-medium text-gray-500",children:[n," ",(0,A.t)("support_widget.at")," ",o]})]}),(0,i.jsx)("div",{className:"text-gray-400",children:(0,i.jsx)(E.JO,{type:"16-arrow-right",size:16})})]})},tM=function(e){var t=e.current,r=e.previous,n=new Date(t),o=new Date(r),a=n.getFullYear(),s=n.toLocaleString("en-US",{month:"long"}),l=o.getFullYear(),c=o.toLocaleString("en-US",{month:"long"});return a!==l||s!==c?(0,i.jsx)("div",{className:"bg-[#F7F9FB] p-4 dark:bg-[#42464D]",children:(0,i.jsxs)("span",{className:"text-base font-semibold leading-5 text-gray-900 dark:text-gray-100",children:[s," ",a]})}):null};tM.propTypes={current:Y().string,previous:Y().string};var tR=function(){var e=(0,eK.C8)(),t=e.isLoading,r=e.data;if(t)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,i.jsx)(tu,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,i.jsx)(tu,{rows:4,height:"70px",wrapperClassName:"px-2 mb-4"}),(0,i.jsx)(tu,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,i.jsx)(tu,{rows:1,height:"70px",wrapperClassName:"px-2 mb-4"})]});var n=(null==r?void 0:r.records)||[];return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,i.jsx)(T.Di,{weight:"semibold",children:(0,A.t)("support_widget.events")})}),n.map(function(e,t){var r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tM,{current:e.starts_at,previous:null==(r=n[t-1])?void 0:r.starts_at}),(0,i.jsx)(tD,{event:e,last:t===n.length-1},e.id)]})})]})},tB=r(80219),tF=r(41609),tz=r.n(tF),tU=function(e){var t=e.post,r=t.id,n=t.name,o=(0,B.k6)();return(0,i.jsxs)("button",{type:"submit",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out",onClick:function(){o.push(eu._N.showPost(r))},children:[(0,i.jsx)("span",{className:"text-dark text-left",children:(0,i.jsx)(es.Z.LabelSm,{weight:"medium",children:n})}),(0,i.jsx)("span",{className:"-mr-1 ml-2.5",children:(0,i.jsx)(E.JO,{type:"16-chevron-right",size:16,className:"text-dark"})})]})};tU.propTypes={post:Y().object};var tZ=function(e){var t=e.spaceId,r=e.searchText,n=(0,tP.c)(r,500),o=(0,eK.fw)(t,n),a=o.isLoading,s=o.data,l=(null==s?void 0:s.records)||[];return a?(0,i.jsx)(tu,{rows:5}):tz()(l)?(0,i.jsx)("div",{className:"flex flex-col justify-center px-6 py-2",children:(0,i.jsx)("div",{className:"mx-auto mb-5 mt-auto w-full",children:(0,i.jsxs)("div",{className:"border-primary bg-primary rounded-lg border",children:[(0,i.jsx)("div",{className:"mt-4 text-center",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"dark:text-[#ABAFB2]",children:(0,A.t)("support_widget.no_articles_found")})}),(0,i.jsx)("div",{className:"mx-6 my-5",children:(0,i.jsx)(er.rU,{to:eu._N.askChatBot(),children:(0,i.jsx)(tw,{label:(0,A.t)("support_widget.still_need_help"),className:"dark:bg-gray-50 dark:text-gray-800"})})})]})})}):(0,i.jsx)("div",{className:"overflow-auto",children:(0,i.jsx)("div",{className:"mt-1.5 flex flex-col justify-center",children:l.map(function(e){return(0,i.jsx)(tU,{post:e},e.id)})})})},tG=function(e){var t=e.searchText,r=e.setSearchText,n=e.initialFocus,a=void 0===n||n,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["searchText","setSearchText","initialFocus"]),l=(0,o.useRef)(null),c=(0,B.TH)();return(0,o.useEffect)(function(){if(a){var e;null==(e=l.current)||e.focus()}},[a,c]),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"text-dark pointer-events-none absolute left-0 top-[11px] flex items-center pl-3",children:(0,i.jsx)(E.JO,{type:"16-search",size:20})}),(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:l,type:"text",defaultValue:t,className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,A.t)("support_widget.placeholder_text"),onChange:function(e){r(e.target.value)}},s))]})};tG.propTypes={searchText:Y().string,setSearchText:Y().func,initialFocus:Y().bool};var tq=function(e){var t=e.spaceGroup,r=(0,F.J1)().setCurrentSpaceProperties,n=(0,B.k6)(),o=function(e,t){r(e),n.push(eu._N.posts(t))};return(0,N.isEmpty)(t.spaces)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"px-6",children:(0,i.jsx)(es.Z.LabelXxs,{color:"text-light",children:t.name})}),(0,i.jsx)("div",{className:"flex flex-col",children:t.spaces.map(function(e){var t=e.id,r=e.name,n=e.emoji,a=e.custom_emoji_url,s=e.custom_emoji_dark_url;return(0,i.jsxs)("button",{type:"submit",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out last:mb-4",onClick:function(){return o({name:r,emoji:n,custom_emoji_url:a,custom_emoji_dark_url:s},t)},children:[(0,i.jsx)(es.Z.LabelSm,{weight:"medium",children:(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)(tB.S,{className:"!h-5 !w-auto",emoji:n,customEmojiUrl:a,customEmojiDarkUrl:s}),(0,i.jsx)("span",{className:"ml-2 break-all",children:r})]})}),(0,i.jsx)(E.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},t)})})]})};tq.propTypes={spaceGroup:Y().object};var tV=function(){var e=(0,eK.ys)(),t=e.isLoading,r=e.data,n=(null==r?void 0:r.records)||[];return t?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(tu,{width:"50px"}),(0,i.jsx)(tu,{rows:5})]}):tz()(n)?(0,i.jsx)("div",{className:"px-6",children:(0,i.jsx)(es.Z.BodyMd,{children:(0,A.t)("support_widget.no_spaces_found")})}):(0,i.jsx)("div",{className:"mb-4 overflow-auto",children:(0,i.jsx)("div",{className:"mt-1.5",children:n.map(function(e){return(0,i.jsx)(tq,{spaceGroup:e},e.id)})})})};function tH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tW=function(){var e,t=(e=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tH(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tH(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],a=(0,B.k6)(),s=(0,B.UO)().spaceId,l=(0,F.J1)().currentSpaceProperties,c=l.custom_emoji_url,u=l.custom_emoji_dark_url,d=l.emoji,f=l.name,p=r||s,m=(0,B.$B)(eu._N.spaceGroups());return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:G()("bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center space-x-4 border-b px-3",{"justify-between":s,"justify-center":!s}),children:[s&&(0,i.jsx)(eT,{type:"back",onClick:function(){return a.replace("/space_groups")}}),m?(0,i.jsx)(T.Di,{weight:"semibold",children:(0,A.t)("support_widget.search_container.title")}):(0,i.jsxs)("div",{className:"text-dark help-view-title flex",children:[(0,i.jsx)(tB.S,{className:"!h-5 !w-auto",emoji:d,customEmojiUrl:c,customEmojiDarkUrl:u}),(0,i.jsx)("span",{className:"ml-2",children:(0,i.jsx)(T.Di,{weight:"semibold",children:f})})]}),s&&(0,i.jsx)("div",{className:"w-[44px]"})]}),(0,i.jsx)("div",{className:"px-6 pb-2 pt-5",children:(0,i.jsx)(tG,{searchText:r,setSearchText:n})}),p?(0,i.jsx)(tZ,{spaceId:s,searchText:r}):(0,i.jsx)(tV,{})]})},tQ=function(){var e=(0,B.k6)();return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute left-0 top-2.5 flex items-center pl-3 text-gray-500",children:(0,i.jsx)(E.JO,{type:"20-ai",size:20})}),(0,i.jsx)("input",{type:"text",className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,A.t)("support_widget.chatbot.what_do_you_need_help_with"),onFocus:function(){return e.push("/ask")}})]})},tJ=function(){var e=(0,eK.mb)(),t=e.isError,r=e.isLoading,n=e.data;return r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,i.jsx)(tu,{rows:1,height:"200px",wrapperClassName:"px-4 mb-4"})]}):t||0===Object.keys(n).length?null:(0,i.jsxs)(er.rU,{className:"border-primary bg-primary block cursor-pointer rounded-lg border p-4",to:"/news/".concat(n.id),children:[n.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",className:"mb-4 rounded",src:n.cover_image_url})}),(0,i.jsxs)("div",{className:"text-dark mb-1",children:[(0,i.jsx)("div",{className:"news-title pb-3",children:(0,i.jsx)(T.Di,{weight:"semibold",children:n.name})}),(0,i.jsx)("div",{className:"news-excerpt",children:(0,i.jsx)(J.Q,{children:(0,N.truncate)(n.body_plain_text,{length:200})})})]})]})},tK=function(){var e=(0,eK.HF)(),t=e.isLoading,r=e.data,n=(void 0===r?{records:[]}:r).records;return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,wrapperClassName:"mb-1.5"}),(0,i.jsx)(tu,{rows:3,wrapperClassName:"space-y-1"})]}):(0,i.jsx)("div",{className:"mt-1.5 flex flex-col justify-center pb-4",children:n.slice(0,ea.St).map(function(e){return(0,i.jsx)(tU,{post:e},e.id)})})};let t$=r.p+"static/react/components/SupportWidget/views/HomeView/hand-wave-24-7d5aae032d3f265d.png";var tX=function(){var e=(0,I.wh)().currentCommunityMember;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"bg-circle h-[220px] rounded-lg rounded-b-none pb-[140px] pt-7",children:(0,i.jsxs)("div",{className:"pl-8",children:[(0,i.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,i.jsx)("img",{loading:"lazy",src:Q,alt:(0,A.t)("support_widget.circle_logo_alt_text"),className:"h-10 w-10"})}),(0,i.jsxs)("div",{className:"mt-4 flex items-center text-white",children:[(0,i.jsx)(es.Z.TitleMd,{color:"text-white",children:(0,A.t)("support_widget.greeting",{first_name:(null==e?void 0:e.first_name)||(0,A.t)("support_widget.default_greeting_name")})}),(0,i.jsx)("img",{loading:"lazy",src:t$,alt:(0,A.t)("support_widget.hand_wave_alt_text"),className:"ml-2 h-6 w-6"})]}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)(es.Z.BodySm,{color:"text-white",children:(0,A.t)("support_widget.greeting_question_1")})})]})}),(0,i.jsxs)("div",{className:"px-4 pb-4",children:[(0,i.jsxs)("div",{className:"border-primary bg-primary mb-4 mt-[-64px] rounded-lg border pt-4",children:[(0,i.jsx)("div",{className:"ml-6",children:(0,i.jsx)("span",{className:"flex items-center gap-3",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-dark",children:(0,A.t)("support_widget.chatbot.i_need_help")})})}),(0,i.jsx)("div",{className:"px-6 py-4",children:(0,i.jsx)(tQ,{})})]}),(0,i.jsxs)("div",{className:"border-primary bg-primary mb-4 rounded-lg border pt-4",children:[(0,i.jsx)("div",{className:"mb-3 ml-6",children:(0,i.jsx)("a",{href:"https://community.circle.so/c/tutorials",target:"_blank",rel:"noreferrer",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-dark hover:text-circle",children:(0,A.t)("support_widget.tutorial_posts")})})}),(0,i.jsx)(tK,{})]}),(0,i.jsx)(tJ,{})]})]})},tY=function(e){var t=e.post;return(0,i.jsxs)(er.rU,{className:"border-primary bg-primary mb-4 block cursor-pointer rounded-lg border p-4",to:"/news/".concat(t.id),children:[t.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",className:"mb-4 rounded",src:t.cover_image_url})}),(0,i.jsxs)("div",{className:"text-dark mb-1",children:[(0,i.jsx)("div",{className:"news-title pb-3",children:(0,i.jsx)(T.Di,{weight:"semibold",children:t.name})}),(0,i.jsx)("div",{className:"news-excerpt",children:(0,i.jsx)(J.Q,{children:(0,N.truncate)(t.body_plain_text,{length:200})})})]})]})},t0=function(){var e=(0,eK.bc)(),t=e.isLoading,r=e.data;if(t)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,i.jsx)(tu,{rows:2,height:"170px",wrapperClassName:"px-2 mb-4"})]});var n=(null==r?void 0:r.records)||[];return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 mb-4 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,i.jsx)(T.Di,{weight:"semibold",children:(0,A.t)("support_widget.news.news")})}),(0,i.jsxs)("div",{className:"mb-4 px-4",children:[n.map(function(e){return(0,i.jsx)(tY,{post:e},e.id)}),(0,i.jsxs)("a",{href:ea.NA,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-circle my-4 flex w-full justify-center gap-2 rounded-md border p-1",children:[(0,A.t)("support_widget.news.see_more"),(0,i.jsx)(E.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})]})]})},t1=r(41084),t2=r(91704),t3=r(23627),t6=function(e){var t=e.postUrl;return(0,i.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"border-circle my-2 flex w-full justify-center gap-2 rounded-lg border p-1",children:[(0,i.jsx)(E.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16}),(0,A.t)("support_widget.open_post")]})};t6.propTypes={postUrl:Y().string};var t4=function(){var e=(0,B.$B)().params.id,t=(0,eK.HG)(e),r=t.isError,n=t.isLoading,o=t.data;return n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,i.jsx)(tu,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,i.jsx)(tu,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,i.jsx)(tu,{rows:6})]}):r?(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] items-center justify-between border-b px-3",children:[(0,i.jsx)(eT,{type:"back"}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(eT,{type:"expand"})})]}),(0,i.jsx)("div",{className:"support-widget-post__body grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,A.t)("support_widget.post_not_found")})})]}):(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,i.jsx)(eT,{type:"back"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(eT,{href:null==o?void 0:o.post_url,icon:"share-support-widget",size:16}),(0,i.jsx)(eT,{type:"expand"})]})]}),(0,i.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[o.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",src:o.cover_image_url})}),(0,i.jsx)("div",{className:"mx-6 my-4",children:(0,i.jsx)(es.Z.TitleMd,{children:(0,i.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:o.post_url||ea.NA,target:"_blank",rel:"noreferrer noopener",children:o.name})})}),(0,i.jsxs)("div",{id:"news_view_post_body",className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,t1.Iz)(o)&&o.body_trix_content&&(0,i.jsx)(t2.P,{content:o.body_trix_content}),(0,t1.s8)(o)&&o.tiptap_body&&(0,i.jsx)(t3.R,{readOnly:!0,value:o.tiptap_body.body,sgidToObjectMap:o.tiptap_body.sgids_to_object_map,inlineAttachments:o.tiptap_body.inline_attachments,disabledExtensions:["cta"]}),(0,i.jsx)("div",{className:"py-4",children:(0,i.jsx)(t6,{postUrl:o.post_url})})]})]})]})},t5=r(99666);function t8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var t9=function(e){var t,r=e.post,n=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return t8(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t8(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],s=n[1],l=(0,q.useMutation)(function(e){var t=e.postId,r=e.value;return V.R.createPostFeedback({postId:t,helpful:r})}).mutate;return(0,o.useEffect)(function(){null!==a&&document.getElementById("feedback-response-container").scrollIntoView()},[a]),(0,i.jsxs)("div",{className:"mx-auto w-full pt-4",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(T.Di,{weight:"semibold",children:(0,A.t)("support_widget.was_this_article_helpful")})}),(0,i.jsx)("div",{className:"mb-6 flex justify-center gap-4",children:(0,i.jsx)(t5.O,{value:a,handleFeedback:function(e){s(e),l({postId:r.id,value:e})}})}),(0,i.jsxs)("div",{id:"feedback-response-container",children:[a&&(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(J.Q,{children:(0,A.t)("support_widget.thank_you_for_article_feedback")})}),!1===a&&(0,i.jsx)("div",{className:"mt-8",children:(0,i.jsx)("div",{className:"bg-primary",children:(0,i.jsx)("div",{className:"my-5",children:(0,i.jsx)(er.rU,{to:eu._N.askChatBot(),children:(0,i.jsx)(tw,{label:(0,A.t)("support_widget.still_need_help"),className:"dark:bg-gray-50 dark:text-gray-800"})})})})})]})]})},t7=function(e){var t=e.id,r=(0,o.useRef)(null),n=(0,B.k6)(),a=(0,eK.vc)(t),s=a.isError,l=a.isLoading,c=a.data,u=(null==c?void 0:c.post_url)||ea.kL;["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach(function(e){u.includes(e)&&(u=u.replace(e,"help.circle.so"))});var d=(0,o.useCallback)(function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.getAttribute("data-post-id");n.push(eu._N.showPost(t))},[n]),f=(0,o.useCallback)(function(e){var t=e.containerElement;c&&(t.querySelectorAll(".trix-content a").forEach(function(e){c.urls_hash[e.href]?e.setAttribute("data-post-id",c.urls_hash[e.href]):(e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer"))}),t.querySelectorAll(".trix-content a[data-post-id]").forEach(function(e){e.addEventListener("click",d)}),r.current=t)},[c,d]);return((0,o.useEffect)(function(){return function(){r.current&&r.current.querySelectorAll(".trix-content a[data-post-id]").forEach(function(e){e.removeEventListener("click",d)})}},[d]),l)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,i.jsx)(tu,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,i.jsx)(tu,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,i.jsx)(tu,{rows:6})]}):s?(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,i.jsx)(eT,{type:"back"}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(eT,{type:"expand"})})]}),(0,i.jsx)("div",{className:"support-widget-post__body grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,A.t)("support_widget.post_not_found")})})]}):(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,i.jsx)(eT,{type:"back"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(eT,{href:u,icon:"share-support-widget",size:16}),(0,i.jsx)(eT,{type:"expand"})]})]}),(0,i.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[c.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",src:c.cover_image_url})}),(0,i.jsx)("div",{className:"mx-6 my-4",children:(0,i.jsx)(es.Z.TitleLg,{children:(0,i.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:u,target:"_blank",rel:"noreferrer noopener",children:c.name})})}),(0,i.jsxs)("div",{className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,t1.Iz)(c)&&c.body_trix_content&&(0,i.jsx)(t2.P,{content:c.body_trix_content,transformLinks:f}),(0,t1.s8)(c)&&c.tiptap_body&&(0,i.jsx)(t3.R,{readOnly:!0,value:c.tiptap_body.body,sgidToObjectMap:c.tiptap_body.sgids_to_object_map,inlineAttachments:c.tiptap_body.inline_attachments}),(0,i.jsx)(t6,{postUrl:u}),"tutorials"!==c.space_slug&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"border-primary mb-0 grow border-b pt-2"}),(0,i.jsx)(t9,{post:c})]})]})]})]})};function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t7.propTypes={id:Y().string};var rr=function(){var e,t,r,n=(0,F.J1)(),a=n.isOpen,s=n.shouldDisplayOnboarding,l=n.toggleWidget,c=rt((0,o.useState)(0),2),u=c[0],d=c[1],f=rt((0,o.useState)(!1),2),p=f[0],m=f[1],b=rt((0,o.useState)(!0),2),h=b[0],y=b[1],v=rt((0,o.useState)(s),2),g=v[0],_=v[1],x=["/"],j=null==(r=(0,ee.$o)())?void 0:r.location,w=(0,I.wh)(),O=w.currentCommunity,S=w.currentCommunitySettings;j&&"/"!=j&&x.push(j);var k=(0,q.useMutation)(function(){return V.R.completeOnboarding()},{onSuccess:function(){},onError:function(){}}).mutate;(0,o.useEffect)(function(){d((0,ee.pj)())},[]);var P=function(){g&&k(),_(!1)},C=function(){return m(!0)},N=function(){return m(!1)},T=!a&&h&&g;return(0,i.jsxs)("div",{className:"fixed bottom-4 z-[60] flex flex-col",style:{right:u},children:[(0,i.jsx)(U.u,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({show:a},ea.sm),t=t={children:(0,i.jsxs)(B.VA,{initialEntries:x,initialIndex:x.length-1,children:[(null==S?void 0:S.support_widget_analytics_enabled)&&(0,i.jsx)(B.AW,{render:function(e){var t=e.location;return"function"==typeof window.gtag&&window.gtag("event","page_view",{page_location:window.location.href,page_path:t.pathname+t.search,page_title:(0,A.t)("support_widget.support_widget"),community_name:null==O?void 0:O.name,community_id:null==O?void 0:O.id}),null}}),(0,i.jsx)(eo,{children:(0,i.jsx)(et,{children:(0,i.jsxs)(B.rs,{children:[(0,i.jsx)(B.AW,{exact:!0,path:"/",component:tX},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/ask",component:tt},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/form",component:tL},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/space_groups",component:tW},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/news",component:t0},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/spaces/:spaceId/posts",component:tW},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/conversations",component:tk},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/conversations/:id",component:tj},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/news/:id",component:t4},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/posts/:id",render:function(e){var t=e.match;return(0,i.jsx)(t7,{id:t.params.id},t.params.id)}},"path"),(0,i.jsx)(B.AW,{exact:!0,path:"/events",component:tR},"path")]})})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),T&&(0,i.jsx)($,{onClick:function(){return P()}}),(0,i.jsxs)("div",{className:"-mr-5 mt-5 flex justify-end align-baseline",onMouseOver:C,onFocus:C,onMouseOut:N,onBlur:N,children:[(0,i.jsx)("div",{className:G()("transition-[width,transform] duration-300 ease-linear",{"translate-x-30 w-0":!h}),children:(0,i.jsx)(W,{isOpen:a,onClick:function(){h&&(P(),l({shouldTriggerOnWidgetClose:!0}))}})}),(0,i.jsx)(E.JO,{type:h?"12-chevron-right":"12-chevron-left",size:12,className:G()("cursor-pointer text-gray-400",{invisible:g||a||h&&!p}),onClick:h?function(){return y(!1)}:function(){return y(!0)}})]})]})},rn=function(e){var t=e.showWidgetBot,r=(0,B.TH)(),n=(0,I.nT)().records,a=(0,I.wh)().currentCommunityMember,s=(0,ee.$o)();for(var l in s)(l.match(/conversation-view-\d+-comment/)&&""===s[l]||l.match(/conversation-view-\d+-attachments/)&&0===s[l].length||"isChatWindowExpanded"===l)&&delete s[l];(0,ee.qQ)(s);var c=!(null==a?void 0:a.is_admin),u=n.filter(function(e){return"chat"===e.post_type}).map(function(e){return e.slug}),d=ea._9.concat(u).some(function(e){return r.pathname.includes(e)}),f=(0,F.J1)().openWidget;return((0,o.useEffect)(function(){if(t){var e,r;(0,ee.qQ)((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,ee.$o)()),r=r={location:"/ask"},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e)),f()}},[]),c||d)?null:(0,i.jsx)(i.Fragment,{children:(0,R.createPortal)((0,i.jsx)(C.S,{renderFunc:z,children:(0,i.jsx)(rr,{})}),document.body)})},ri=r(45273),ro=r(63656);function ra(e){"undefined"!=typeof pendo&&pendo&&setTimeout(function(){try{var t,r,n,i;pendo.setGuidesDisabled(e),e?null==(t=(r=pendo).stopGuides)||t.call(r):null==(n=(i=pendo).loadGuides)||n.call(i)}catch(t){console.error("[Pendo] Error ".concat(e?"disabling":"enabling"," guides:"),t)}},1e3)}function rs(){var e=(0,B.TH)(),t=(0,ro.O)().isSitePageRoute,r=(0,ri.H)().isLivePage;(0,o.useEffect)(function(){t||r?ra(!0):ra(!1)},[t,r,e.pathname])}var rl=function(){var e=(0,B.TH)().pathname;return{isPlansPageLayout:[eu.Lo.plans.general,eu.Lo.plans.billing,eu.Lo.plans.brandedApps].some(function(t){return e.includes(t)})}},rc=r(94414),ru=r(53564),rd=r(34568),rf=r(93291),rp=r(81097),rm=function(){var e=(0,B.TH)().pathname,t=(0,rf.OH)({currentPage:1}).data,r=!(null==t?void 0:t.count);return(e.includes(rp.L.community_bot.knowledge)||e.includes(rp.L.community_bot.agents))&&r},rb=function(){var e=(0,B.TH)().pathname,t=(0,rf.OH)({currentPage:1}).data,r=!(null==t?void 0:t.count);return e.includes(rp.L.community_inbox.index)&&r},rh=r(18014),ry=r(27732),rv=r(36372),rg=r(54237);function r_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rj=function(e){var t=e.children,r=e.hideAppBar,n=e.shouldHideSidebarNestedNavBar,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","hideAppBar","shouldHideSidebarNestedNavBar"]),s=(0,rh.l)(),l=s.config,c=s.setConfig,u=(0,rg.T)().isReactFlowWorkflowsRoute;return(0,o.useEffect)(function(){c(function(e){return rx(r_({},e),{hideAppBar:null!=r?r:e.hideAppBar,shouldHideSidebarNestedNavBar:null!=n?n:e.shouldHideSidebarNestedNavBar})})},[r,n,c]),(0,rv.T)(),(0,i.jsx)(ry.a,rx(r_({},a),{disableRightSidebar:l.disableRightSidebar,renderLeftSidebar:l.renderLeftSidebar,disableSidebar:l.disableSidebar||u,hideAppBar:l.hideAppBar,shouldHideSidebarNestedNavBar:l.shouldHideSidebarNestedNavBar,children:t}))},rw=function(e){var t,r,n=e.children,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,rv.M)(),(0,i.jsx)(rj,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={children:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function rO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rS(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rk=function(e){var t=e.shouldHideMainHeader,r=e.children,n=e.hideAppBar,o=e.shouldHideSidebarNestedNavBar,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["shouldHideMainHeader","children","hideAppBar","shouldHideSidebarNestedNavBar"]);return void 0===t||t?(0,i.jsx)(rh.S,{children:(0,i.jsx)(rw,rS(rO({},a),{children:r}))}):(0,i.jsx)(rh.S,{children:(0,i.jsx)(rj,rS(rO({hideAppBar:void 0!==n&&n,shouldHideSidebarNestedNavBar:void 0!==o&&o},a),{children:r}))})},rP=r(6439),rC=r(29378),rN=r(73786),rA=r(80981),rI=r(60621),rE=r(65280),rT=(0,rI.u)(function(){return r.e("7661").then(r.bind(r,76457))}),rL=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(rT,{})})},rD=(0,rI.u)(function(){return Promise.all([r.e("3496"),r.e("2416")]).then(r.bind(r,27883))}),rM=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(rD,{})})},rR=(0,rI.u)(function(){return r.e("5960").then(r.bind(r,27976))}),rB=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(rR,{})})},rF=(0,rI.u)(function(){return Promise.resolve().then(r.bind(r,48857))}),rz=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(rF,{})})},rU=(0,rI.u)(function(){return r.e("4863").then(r.bind(r,87324))}),rZ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(rU,{})})},rG=(0,rI.u)(function(){return Promise.all([r.e("7223"),r.e("8999")]).then(r.bind(r,56987))}),rq=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(rG,{})})},rV=r(91525),rH=r(37744),rW=function(){var e=(0,rV.wh)().currentCommunity,t=(0,rC.Z1)(e)||(0,rC.Aq)(e);return(0,i.jsx)("div",{children:(0,i.jsx)(rH.K,{isExpired:t})})},rQ=r(71462),rJ=r(17617),rK=r(63676),r$=r(82705),rX=r(34062),rY=r(51169),r0=function(){return(0,i.jsx)("div",{children:(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_2515_109087)",children:[(0,i.jsx)("rect",{width:"32",height:"32",fill:"url(#paint0_linear_2515_109087)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.25 22.5C15.25 22.9142 15.5858 23.25 16 23.25C16.4142 23.25 16.75 22.9142 16.75 22.5C16.75 19.3244 19.3244 16.75 22.5 16.75C22.9142 16.75 23.25 16.4142 23.25 16C23.25 15.5858 22.9142 15.25 22.5 15.25C19.3244 15.25 16.75 12.6756 16.75 9.5C16.75 9.08579 16.4142 8.75 16 8.75C15.5858 8.75 15.25 9.08579 15.25 9.5C15.25 12.6756 12.6756 15.25 9.5 15.25C9.08579 15.25 8.75 15.5858 8.75 16C8.75 16.4142 9.08579 16.75 9.5 16.75C12.6756 16.75 15.25 19.3244 15.25 22.5Z",fill:"url(#paint1_linear_2515_109087)"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"paint0_linear_2515_109087",x1:"16",y1:"0",x2:"16",y2:"32",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#516DF1"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#6C47D2"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_2515_109087",x1:"16",y1:"22.5",x2:"16",y2:"9.5",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F9FF"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#C4AFFF"})]}),(0,i.jsx)("clipPath",{id:"clip0_2515_109087",children:(0,i.jsx)("rect",{width:"32",height:"32",rx:"16",fill:"white"})})]})]})})},r1=r(29306),r2=r(14596),r3=r(85712),r6=r(79869),r4=r(94375),r5=r(84121);function r8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r9(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function r7(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){r9(o,n,i,a,s,"next",e)}function s(e){r9(o,n,i,a,s,"throw",e)}a(void 0)})}}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r8(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var nr=function(e){var t,r,n=e.row,a=ne((0,o.useState)(null==(t=n.original)?void 0:t.enabled),2),s=a[0],l=a[1],c=ne((0,o.useState)(!1),2),u=c[0],d=c[1],f=(0,r3.k)(n.original),p=(0,r2.g)(n.original),m=(0,I.wh)(),b=m.currentCommunity,h=m.refetch,y=(0,r6.w)(),v=(0,rf.vQ)({id:n.original.id}).mutate;(0,o.useEffect)(function(){var e;l(null==(e=n.original)?void 0:e.enabled)},[null==(r=n.original)?void 0:r.enabled,l]);var g=function(){v({enabled:!0},{onSuccess:function(){l(!0)},onError:function(e){console.error("Failed to enable agent:",e),l(!1)}})};return(0,i.jsx)("div",{id:"toggle-wrapper-agent-".concat(n.original.id),children:(0,i.jsx)(r5.J,{isChecked:s,checkedLabel:(0,A.t)("settings.community_bot.agents.on_value"),uncheckedLabel:(0,A.t)("settings.community_bot.agents.off_value"),tooltipCheckedLabel:"",tooltipUncheckedLabel:"",tooltipPlacement:"bottom",isLoading:u,isDisabled:u,onChange:function(){(null==b?void 0:b.ai_agents_feature_flag_enabled)?s?p.show({agent:n.original}):f.show({agent:n.original}):r7(function(){var e,t,r,n;return nt(this,function(i){switch(i.label){case 0:return d(!0),[4,r1.c.getNextPlanWithFeature((null!=(t=null==b||null==(e=b.current_plan)?void 0:e.id)?t:"").toString(),{plan_feature_flag:"ai_agents"})];case 1:return n=(null==(r=i.sent())?void 0:r.plan_tier)||"enterprise",[4,y.show({planTier:n,source:r4.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,A.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,A.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,A.t)("pricing_plans.upgrade_modal.actions.go_to_community_ai"),showPlanDetails:!0,onSuccess:function(){g(),d(!1)},onCloseModal:function(){return r7(function(){var e,t;return nt(this,function(r){switch(r.label){case 0:return[4,h()];case 1:return(null==(t=r.sent())||null==(e=t.data)?void 0:e.current_community.ai_agents_feature_flag_enabled)&&g(),d(!1),[2]}})})()}})];case 2:return i.sent(),[2]}})})()},containerClassName:"",className:""})})},nn=r(43244),ni=function(){return(0,y.TC)().isDarkAppearance?(0,i.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4781_81533)",children:[(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"url(#paint0_radial_4781_81533)"}),(0,i.jsx)("rect",{width:"134",height:"134",fill:"url(#paint1_linear_4781_81533)"}),(0,i.jsx)("rect",{x:"62",y:"62",width:"10",height:"10",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"41",y:"57",width:"10",height:"20",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"83",y:"51",width:"10",height:"32",rx:"5",fill:"white"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("radialGradient",{id:"paint0_radial_4781_81533",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(67 67) rotate(90) scale(67)",children:[(0,i.jsx)("stop",{stopColor:"#469AFC"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_4781_81533",x1:"154",y1:"-82",x2:"10",y2:"170",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#2B2E33"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#212428"})]}),(0,i.jsx)("clipPath",{id:"clip0_4781_81533",children:(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"white"})})]})]}):(0,i.jsx)("div",{children:(0,i.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("g",{id:"Avatar",children:(0,i.jsxs)("g",{clipPath:"url(#clip0_4495_28245)",children:[(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"url(#paint0_radial_4495_28245)"}),(0,i.jsx)("rect",{id:"Img",width:"134",height:"134",fill:"url(#paint1_linear_4495_28245)"}),(0,i.jsx)("rect",{id:"Rectangle 1940",x:"62",y:"62",width:"10",height:"10",rx:"5",fill:"white"}),(0,i.jsx)("rect",{id:"Rectangle 1942",x:"41",y:"57",width:"10",height:"20",rx:"5",fill:"white"}),(0,i.jsx)("rect",{id:"Rectangle 1941",x:"83",y:"51",width:"10",height:"32",rx:"5",fill:"white"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("radialGradient",{id:"paint0_radial_4495_28245",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(67 67) rotate(90) scale(67)",children:[(0,i.jsx)("stop",{stopColor:"#469AFC"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_4495_28245",x1:"154",y1:"-82",x2:"10",y2:"170",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F9FA"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#E6ECEF"})]}),(0,i.jsx)("clipPath",{id:"clip0_4495_28245",children:(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"white"})})]})]})})},no=r(45665),na=function(e){var t=e.agents,r=e.handleEditAgent,n=(0,no.qN)();return(0,i.jsxs)("div",{className:"bg-secondary border-primary flex justify-between border-b px-12 py-8",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-8",children:[(0,i.jsx)(ni,{}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(nn.s6,{weight:"semibold",children:(0,A.t)("settings.community_bot.agents.banner.title")}),(0,i.jsx)(ev.p,{color:"text-light",children:(0,A.t)("settings.community_bot.agents.banner.description")}),t.length>0&&(0,i.jsx)(ed.z,{variant:"secondary","aria-hidden":!0,className:"text-darkest mt-2 flex w-fit gap-1.5",onClick:function(){return r(t[0])},children:(0,i.jsx)(J.Q,{weight:"bold",children:(0,A.t)("settings.community_bot.agents.banner.edit_profile_button.title")})})]})]}),(0,i.jsx)(E.JO,{type:"20-close",size:20,className:"cursor-pointer !self-start",onClick:function(){n.mutate({hide_agents_banner:!0})}})]})},ns=function(e){var t=e.agent,r=function(e){window.location.href=r$.X.customize({botPublicId:e.toString()})};return(0,i.jsx)(rX.w.Actions,{children:(0,i.jsx)(rX.w.Actions.Item,{onClick:function(){return r(t.id)},children:(0,A.t)("settings.community_bot.knowledge.custom.edit")})})},nl=function(e){return"ai-generated"==e.answerType?(0,i.jsx)("div",{className:"border-primary h-8 w-8 rounded-full border pl-2 pt-1",children:(0,i.jsx)(E.JO,{type:"16-ai",size:16,"aria-hidden":!0,stroke:"secondary",className:"-ml-1"})}):null},nc=function(){return(0,i.jsx)("div",{className:"border-primary h-8 w-8 rounded-full border pl-2 pt-1",children:(0,i.jsx)(E.JO,{type:"16-audience",size:16,"aria-hidden":!0,stroke:"secondary",className:"-ml-1"})})},nu=function(e){var t=e.tone;return"normal"==t?(0,i.jsx)("div",{className:"border-primary h-8 w-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(E.JO,{type:"20-normal-behavior-type",size:20,useWithStrokeCurrentColor:!0})}):"friendly"==t?(0,i.jsx)("div",{className:"border-primary h-8 w-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(E.JO,{type:"20-friendly-behavior-type",size:20,useWithStrokeCurrentColor:!0})}):"short-and-sweet"==t?(0,i.jsx)("div",{className:"border-primary h-8 w-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(E.JO,{type:"20-short-and-sweet-behavior-type",size:20,useWithStrokeCurrentColor:!0})}):(0,i.jsx)("div",{className:"border-primary h-8 w-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(E.JO,{type:"20-descriptive-behavior-type",size:20,useWithStrokeCurrentColor:!0})})},nd="settings.community_bot.agents.landing_page",nf=function(){var e=(0,rf.X5)();return(0,i.jsx)("div",{children:(0,i.jsx)(ed.z,{variant:"circle",onClick:function(){e.mutate(void 0,{onSuccess:function(e){window.location.href=r$.X.customize({botPublicId:e.id.toString()})}})},extraLarge:!0,children:(0,A.t)([nd,"call_to_action"])})})},np=r(41877);function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nb(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function nh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nm(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ny=function(e){var t=(0,p.cm)(),n=nh((0,o.useState)(null),2),i=n[0],a=n[1];return(0,o.useEffect)(function(){var n;(n=function(){var n,i,o,s,l,c;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:n="pt"===t?"landing-page-pt":"landing-page-en",u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all([r(50542)("./".concat(n,"/feature-").concat(e,"_1x.png")),r(60344)("./".concat(n,"/feature-").concat(e,"_1x.png")),r(29631)("./".concat(n,"/feature-").concat(e,"_2x.png")),r(65994)("./".concat(n,"/feature-").concat(e,"_3x.png"))])];case 2:return o=(i=nh.apply(void 0,[u.sent(),4]))[0],s=i[1],l=i[2],c=i[3],a({thumbnail:o.default,small:s.default,medium:l.default,large:c.default}),[3,4];case 3:return console.error("Failed to load feature images:",u.sent()),a(null),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){nb(o,r,i,a,s,"next",e)}function s(e){nb(o,r,i,a,s,"throw",e)}a(void 0)})})()},[t,e]),i},nv=Object.assign(function(e){var t=e.children;return(0,i.jsx)("div",{className:"flex w-full flex-col gap-x-6 gap-y-8 md:flex-row md:gap-y-0",children:t})},{FeatureItem:function(e){var t=e.children,r=e.backgroundColor;return(0,i.jsx)("li",{children:(0,i.jsxs)("div",{className:"flex flex-row items-start gap-x-3",children:[(0,i.jsx)("div",{children:(0,i.jsx)(E.JO,{type:"20-checkmark-circle-fill-dark",className:"text-default h-5 w-5",viewBox:"0 0 20 20",style:{color:r}})}),(0,i.jsx)(es.Z.LabelSm,{color:"text-[#2B2E33]",weight:"medium",children:(0,i.jsx)("span",{children:t})})]})})},FeatureList:function(e){var t=e.children;return(0,i.jsx)("ul",{className:"flex list-none flex-col gap-y-4",children:t})},FeatureSummary:function(e){var t=e.children,r=e.backgroundColor;return(0,i.jsx)("div",{className:"flex w-full flex-col gap-y-5 rounded-xl p-10 md:w-[41%]",style:{backgroundColor:r},children:t})},FeaturePreview:function(e){var t=e.children,r=e.backgroundColor,n=e.className;return(0,i.jsx)("div",{className:G()("w-full rounded-xl md:w-[60%]",n),style:{backgroundColor:r},children:t})},Header:function(e){var t=e.localeRoot,r=e.backgroundColor,n=e.iconName;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex h-[60px] w-[60px] flex-col items-center justify-center rounded-full",style:{backgroundColor:r},children:(0,i.jsx)(E.JO,{type:n,className:"text-default !h-7 !w-7",viewBox:"0 0 24 24",style:{color:"#191B1F"}})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)(es.Z.TitleLg,{color:"text-[#2B2E33]",children:(0,A.t)([t,"title"])}),(0,i.jsx)(es.Z.LabelLg,{color:"text-[#2B2E33]",weight:"bold",children:(0,A.t)([t,"subtitle"])})]})]})}}),ng="".concat(nd,".blocks.ai_inbox_feature"),n_="#FFC9D3",nx=function(e){var t=ny(e.featureNumber);return(0,i.jsxs)(nv,{children:[(0,i.jsxs)(nv.FeatureSummary,{backgroundColor:"#FFF1F3",children:[(0,i.jsx)(nv.Header,{localeRoot:ng,iconName:"20-ai-inbox",backgroundColor:n_}),(0,i.jsxs)(nv.FeatureList,{children:[(0,i.jsx)(nv.FeatureItem,{backgroundColor:n_,children:(0,A.t)([ng,"features","0"])}),(0,i.jsx)(nv.FeatureItem,{backgroundColor:n_,children:(0,A.t)([ng,"features","1"])}),(0,i.jsx)(nv.FeatureItem,{backgroundColor:n_,children:(0,A.t)([ng,"features","2"])})]})]}),(0,i.jsx)(nv.FeaturePreview,{backgroundColor:n_,className:"flex flex-col items-center justify-center p-8",children:t&&(0,i.jsx)(np.Q,{src:t.large,srcVariants:t,alt:(0,A.t)([ng,"image_alt"]),className:"w-[300px] md:w-auto"})})]})},nj="".concat(nd,".blocks.chat_agents_feature"),nw="#CFD8FE",nO=function(e){var t=ny(e.featureNumber);return(0,i.jsxs)(nv,{children:[(0,i.jsxs)(nv.FeatureSummary,{backgroundColor:"#F4F6FF",children:[(0,i.jsx)(nv.Header,{localeRoot:nj,iconName:"20-ai-agents",backgroundColor:nw}),(0,i.jsxs)(nv.FeatureList,{children:[(0,i.jsx)(nv.FeatureItem,{backgroundColor:nw,children:(0,A.t)([nj,"features","0"])}),(0,i.jsx)(nv.FeatureItem,{backgroundColor:nw,children:(0,A.t)([nj,"features","1"])}),(0,i.jsx)(nv.FeatureItem,{backgroundColor:nw,children:(0,A.t)([nj,"features","2"])})]})]}),(0,i.jsx)(nv.FeaturePreview,{backgroundColor:nw,className:"flex flex-col items-center justify-center",children:t&&(0,i.jsx)(np.Q,{src:t.large,srcVariants:t,alt:(0,A.t)([nj,"image_alt"]),className:"w-[300px] md:w-auto"})})]})},nS="".concat(nd,".blocks.knowledge_engine_feature"),nk="#B0EBD9",nP=function(e){var t=ny(e.featureNumber);return(0,i.jsxs)(nv,{children:[(0,i.jsxs)(nv.FeatureSummary,{backgroundColor:"#EBFAF5",children:[(0,i.jsx)(nv.Header,{localeRoot:nS,iconName:"20-ai-knowledge-engine",backgroundColor:nk}),(0,i.jsxs)(nv.FeatureList,{children:[(0,i.jsx)(nv.FeatureItem,{backgroundColor:nk,children:(0,A.t)([nS,"features","0"])}),(0,i.jsx)(nv.FeatureItem,{backgroundColor:nk,children:(0,A.t)([nS,"features","1"])}),(0,i.jsx)(nv.FeatureItem,{backgroundColor:nk,children:(0,A.t)([nS,"features","2"])})]})]}),(0,i.jsx)(nv.FeaturePreview,{backgroundColor:nk,className:"flex flex-col items-center pt-12",children:t&&(0,i.jsx)(np.Q,{src:t.large,srcVariants:t,alt:(0,A.t)([nS,"image_alt"]),className:"w-[584px] md:w-[789.175px]"})})]})},nC=function(){return(0,i.jsxs)("div",{className:"flex flex-col items-center gap-y-6 text-center",children:[(0,i.jsx)(es.Z.TitleXxl,{children:(0,A.t)([nd,"title"])}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-y-2",children:[(0,i.jsx)(es.Z.LabelLg,{weight:"bold",children:(0,A.t)([nd,"subtitle"])}),(0,i.jsx)(es.Z.LabelLg,{children:(0,A.t)([nd,"description"])})]}),(0,i.jsx)(nf,{})]})};function nN(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var nA=function(){var e=(0,r6.w)(),t=(0,I.wh)().currentCommunity,r=(0,rf.X5)(),n=(0,o.useCallback)(function(){var n;return(n=function(){var n,i,o,a;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return[4,r1.c.getNextPlanWithFeature((null!=(i=null==t||null==(n=t.current_plan)?void 0:n.id)?i:"").toString(),{plan_feature_flag:"ai_agents"})];case 1:return a=(null==(o=s.sent())?void 0:o.plan_tier)||"enterprise",[4,e.show({planTier:a,source:r4.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,A.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,A.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,A.t)("pricing_plans.upgrade_modal.actions.go_to_customize_agent"),showPlanDetails:!0,onSuccess:function(){r.mutate(void 0,{onSuccess:function(e){window.location.href=r$.X.customize({botPublicId:e.id.toString()})}})}})];case 2:return s.sent(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){nN(o,r,i,a,s,"next",e)}function s(e){nN(o,r,i,a,s,"throw",e)}a(void 0)})})()},[e,t,r]);return(0,i.jsxs)("div",{className:"bg-primary flex h-full w-full flex-col items-center pb-4",children:[(0,i.jsx)("div",{className:"inline-flex h-10 w-full flex-col items-start justify-start gap-2 overflow-hidden bg-zinc-100 px-9 py-2.5",children:(0,i.jsx)("div",{className:"inline-flex items-center justify-center gap-4 self-stretch",children:(0,i.jsx)("button",{onClick:n,className:"cursor-pointer",type:"button",children:(0,i.jsx)(es.Z.LabelXs,{weight:"normal",children:(0,i.jsx)("span",{className:"underline",children:(0,A.t)([nd,"banner.upgrade_notice"])})})})})}),(0,i.jsxs)("div",{className:"flex h-full w-full max-w-[1078px] flex-col items-center gap-y-14 px-8 py-14",children:[(0,i.jsx)(nC,{}),(0,i.jsxs)("div",{className:"bg-primary flex flex-col gap-y-6",children:[(0,i.jsx)(nO,{featureNumber:1}),(0,i.jsx)(nP,{featureNumber:2}),(0,i.jsx)(nx,{featureNumber:3})]}),(0,i.jsx)(nf,{})]})]})},nI=function(){return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center px-6",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,i.jsx)("div",{className:"bg-tertiary mb-4 flex h-16 w-16 items-center justify-center rounded-lg",children:(0,i.jsx)(E.JO,{type:"20-community-bot",className:"text-default h-8 !w-8",size:20})}),(0,i.jsx)(es.Z.TitleMd,{color:"text-default",children:(0,A.t)("settings.community_ai.ai_agents_feature_name")}),(0,i.jsx)(es.Z.BodyMd,{color:"text-default",textAlign:"text-center",children:(0,A.t)("settings.community_ai.ai_agents_feature_mobile_description")})]})})};let nE=r.p+"static/react/components/SettingsApp/CommunityBot/svgs/setup-agents-dark-8ab164ddcbab8653.svg",nT=r.p+"static/react/components/SettingsApp/CommunityBot/svgs/setup-agents-light-5ee70885e4300830.svg";var nL=function(){var e=(0,y.TC)().isDarkAppearance,t=(0,rf.X5)(),r=function(){t.mutate(void 0,{onSuccess:function(e){window.location.href=r$.X.customize({botPublicId:e.id.toString()})}})};return(0,i.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center p-8 text-center","data-testid":"empty-state",children:[(0,i.jsx)("img",{width:343,height:435,src:e?nE:nT,alt:"","aria-hidden":"true",loading:"eager"}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,i.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,i.jsx)(es.Z.TitleMd,{weight:"font-semibold",children:(0,A.t)("settings.community_bot.empty.header")}),(0,i.jsx)(es.Z.BodyMd,{children:(0,A.t)("settings.community_bot.empty.description")})]}),(0,i.jsx)("div",{className:"flex gap-3",children:(0,i.jsx)(ed.z,{type:"button",variant:"circle",large:!0,onClick:function(){return r()},children:(0,A.t)("settings.community_bot.empty.primary_label")})})]})]})};function nD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nM=[{header:(0,A.t)("settings.community_bot.agents.columns.name"),accessorKey:"name",cell:function(e){var t,r,n,o,a,s,l=e.row;return(0,i.jsxs)("div",{className:"ml-2 flex items-center gap-4",children:[(null==(t=l.original)?void 0:t.avatar_url)?(0,i.jsx)("img",{src:l.original.avatar_url,alt:(0,A.t)("community_bot.bot_builder.customize_page.avatar"),loading:"eager",className:"h-8 w-8 rounded-full",width:32,height:32}):(0,i.jsx)(r0,{}),(0,i.jsx)("span",{className:"font-[InterVariable,sans-serif] font-semibold",children:null==(r=l.original)?void 0:r.name}),(0,i.jsxs)("div",{className:"hidden items-center gap-1 md:flex",children:[(0,i.jsx)(el.T,{content:(0,A.t)("settings.community_bot.agents.ai_generated_answers_button.title"),children:(0,i.jsx)(nl,{answerType:null==(n=l.original)?void 0:n.answer_type})}),(0,i.jsx)(el.T,{content:null==(o=l.original)?void 0:o.members_filters_tooltip,children:(0,i.jsx)(nc,{})}),(0,i.jsx)(el.T,{content:(0,A.t)("settings.community_bot.agents.behavior_type_button.options.".concat(null==(a=l.original)?void 0:a.tone.replaceAll("-","_"))),children:(0,i.jsx)(nu,{tone:null==(s=l.original)?void 0:s.tone})})]})]})},canSort:!1},{header:(0,A.t)("settings.community_bot.agents.columns.conversations"),accessorKey:"conversations",cell:function(e){var t,r=e.row;return(0,rK.HA)((null==(t=r.original)?void 0:t.conversations)||0)},canSort:!1},{header:(0,A.t)("settings.community_bot.agents.columns.messages"),accessorKey:"messages",cell:function(e){var t,r=e.row;return(0,rK.HA)((null==(t=r.original)?void 0:t.messages)||0)},canSort:!1},{header:(0,A.t)("settings.community_bot.agents.columns.modified_on"),accessorKey:"modified_on",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.modified_on},canSort:!1},{header:(0,A.t)("settings.community_bot.agents.columns.active"),accessorKey:"active",cell:function(e){var t=e.row;return(0,i.jsx)("div",{className:"flex w-16 justify-start",children:(0,i.jsx)(nr,{row:t})})},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var t=e.row;return(0,i.jsx)(ns,{agent:t.original})}}],nR=function(){var e,t,r,n,a,s,l,c,u,d,f,p,m,b,h,y,v=(e=(0,o.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return nD(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nD(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],_=v[1],x=(0,no.h$)(),j=null==(t=x.data)?void 0:t.agents_limit,w=(0,rf.OH)({currentPage:g,perPage:null!=j?j:void 0,enabled:void 0!==j}),O=(0,rJ.BT)(),S=(0,I.wh)().currentCommunity,k=(0,rf.X5)(),P=null!=(p=null==w||null==(r=w.data)?void 0:r.records)?p:[],C=0===P.length,N=P.length>=(null!=(m=null==x||null==(n=x.data)?void 0:n.agents_limit)?m:10),E=!(null==S?void 0:S.ai_agents_feature_flag_enabled),T=(0,tr.pm)();if(O)return(0,i.jsx)(nI,{});if(w.isLoading||x.isLoading)return(0,i.jsx)(rY.a,{});if(E&&C)return(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsx)(nA,{})});if(!E&&C)return(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsx)(nL,{})});var L=function(e){window.location.href=r$.X.customize({botPublicId:e.id.toString()})};return(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsxs)("div",{className:"bg-primary flex h-full flex-col",children:[(0,i.jsx)(rQ.b,{pageTitle:(0,A.t)("settings.community_bot.agents.title"),rightContent:(0,i.jsx)(el.T,{disabled:!N,content:(0,A.t)("settings.community_bot.agents.validation.max_profiles_reached",{limit:null!=(b=null==x||null==(a=x.data)?void 0:a.agents_limit)?b:10}),children:(0,i.jsx)(ed.z,{variant:"circle",onClick:function(){k.mutate(void 0,{onSuccess:function(e){window.location.href=r$.X.customize({botPublicId:e.id.toString()})},onError:function(e){T.error(e.message)}})},disabled:N,children:(0,A.t)("settings.community_bot.agents.new_agent")})})}),!(null==x||null==(s=x.data)?void 0:s.hide_agents_banner)&&(0,i.jsx)(na,{agents:null!=(h=null==w||null==(l=w.data)?void 0:l.records)?h:[],handleEditAgent:L}),(0,i.jsx)(rX.w.TableWrapper,{children:(0,i.jsx)(rX.w,{columns:nM,onClickRow:function(e){var t=e.original,r=e.clickEvent;if(r&&r.target){var n=document.getElementById("toggle-wrapper-agent-".concat(t.id));(null==n?void 0:n.contains(r.target))||L(t)}},data:null!=(y=null==w||null==(c=w.data)?void 0:c.records)?y:[],isLoading:null==w?void 0:w.isLoading,initialPage:null==w||null==(u=w.data)?void 0:u.page,pageSize:null==w||null==(d=w.data)?void 0:d.per_page,totalRecordsCount:null==w||null==(f=w.data)?void 0:f.count,onChangePage:function(e){_(e),w.remove()},children:(0,i.jsxs)(rX.w.Table,{children:[(0,i.jsx)(rX.w.Header,{}),(0,i.jsx)(rX.w.Loader,{}),(0,i.jsx)(rX.w.Body,{})]})})})]})})},nB=r(11944),nF=r(33989),nz=r(19784),nU=r(19573),nZ=r(1168),nG=r(555),nq=r(25362),nV=r(75148),nH=r(34519),nW=r(22974);function nQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var nK=["internal_api","community_bot","snippets"],n$=function(e){var t=e.currentPage,r=e.title,n=e.type;return(0,q.useQuery)({queryKey:((function(e){if(Array.isArray(e))return nQ(e)})(nK)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(nK)||function(e,t){if(e){if("string"==typeof e)return nQ(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nQ(e,t)}}(nK)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t,r,n]),queryFn:function(){return(0,eZ.UT)(eu.av.communityBot.snippets.index({params:nJ({page:t,per_page:30},r?{title:r}:{},n?{type:n}:{})}))}})},nX=function(e){var t=e.id;return(0,q.useQuery)(["snippets",t,"preview"],function(){return(0,eZ.UT)(eu.av.communityBot.snippets.showPreview({id:t}))})},nY=function(e){var t=e.onSuccess,r=(0,q.useQueryClient)(),n=(0,tr.pm)(),i=n.success,o=n.error;return(0,q.useMutation)(function(e){return(0,eZ.pC)(eu.av.communityBot.snippets.bulkDestroy(),{ids:e.ids})},{onSuccess:function(e,n){var o,a;r.invalidateQueries({queryKey:nK}),null==(o=n.ids)||o.forEach(function(e){r.invalidateQueries(["snippet",e])}),t(),i((0,A.t)("settings.community_bot.knowledge.custom.resources_deleted_success",{count:null==(a=n.ids)?void 0:a.length}))},onError:function(){o((0,A.t)("request_failure_message"))}})},n0=function(e){var t=e.onSuccess,r=(0,q.useQueryClient)(),n=(0,tr.pm)(),i=n.success,o=n.error;return(0,q.useMutation)(function(e){var t=e.id,r=nJ({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["id"]));return(0,eZ.aU)(eu.av.communityBot.snippets.update({id:t}),r)},{onSuccess:function(e){r.invalidateQueries({queryKey:nK}),r.invalidateQueries(["snippets",e.id]),t(),i((0,A.t)("changes_saved"))},onError:function(){o((0,A.t)("request_failure_message"))}})},n1=function(e){var t=e.onSuccess,r=(0,tr.pm)(),n=r.success,i=r.error,o=(0,q.useQueryClient)();return(0,q.useMutation)(function(e){return(0,eZ.Cu)(eu.av.communityBot.snippets.create(),{snippet:e})},{onSuccess:function(){o.invalidateQueries({queryKey:nK}),n((0,A.t)("settings.community_bot.knowledge.custom.resource_created_success")),t()},onError:function(){return i((0,A.t)("quick_post.toasts.failed_to_create"))}})},n2=function(e){var t=e.onSuccess,r=(0,tr.pm)(),n=r.success,i=r.error,o=(0,q.useQueryClient)();return(0,q.useMutation)(function(e){return(0,eZ.Cu)(eu.av.communityBot.snippets.createFromFiles(),{files:e})},{onSuccess:function(){o.invalidateQueries({queryKey:nK}),n((0,A.t)("settings.community_bot.knowledge.custom.files_uploaded")),t()},onError:function(){return i((0,A.t)("quick_post.toasts.failed_to_create"))}})},n3=r(795),n6=function(e){var t=e.openFilePicker;return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[(0,i.jsx)("div",{className:"text-dark",children:(0,i.jsx)(E.JO,{className:"!h-[25px] !w-[25px]",type:"25-arrow",size:25,useWithStrokeCurrentColor:!0})}),(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.title")}),(0,i.jsx)(es.Z.LabelSm,{as:"div",children:(0,i.jsx)(n3.w,{content:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.description")})}),(0,i.jsx)(ed.z,{variant:"secondary",onClick:function(e){e.stopPropagation(),t()},children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.button")})]})},n4=function(e){var t=e.files,r=e.setFiles,n=e.openFilePicker;return(0,i.jsx)("div",{className:"flex h-full w-full flex-col",children:(0,i.jsx)("div",{className:"flex-1 overflow-auto",children:(0,i.jsxs)("div",{className:"flex min-h-full w-full flex-col items-center justify-center gap-4 py-4",children:[(0,i.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-2",children:t.map(function(e){var n,o;return(0,i.jsxs)("div",{className:"text-dark bg-tertiary border-primary flex w-full max-w-[450px] flex-row justify-between rounded-lg border p-2 text-base",children:[(0,i.jsxs)("div",{className:"flex justify-center",children:[(0,i.jsx)(E.JO,{className:"mr-3",type:"20-ai-file",size:20,useWithStrokeCurrentColor:!0}),(0,i.jsx)(es.Z.BodySm,{children:null==(n=e.file)?void 0:n.name})]}),(0,i.jsx)("div",{className:"flex",children:"valid"===e.status?(0,i.jsx)(E.JO,{type:"20-close",size:20,className:"cursor-pointer",useWithStrokeCurrentColor:!0,onClick:function(n){n.stopPropagation(),r(t.filter(function(t){var r,n;return(null==(r=t.file)?void 0:r.name)!==(null==(n=e.file)?void 0:n.name)}))}}):(0,i.jsx)(E.JO,{type:"loader",size:20,useWithStrokeCurrentColor:!0})})]},null==(o=e.file)?void 0:o.name)})}),(0,i.jsx)(ed.z,{variant:"secondary",onClick:function(e){e.stopPropagation(),n()},children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.upload_more")})]})})})};function n5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function n9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function n7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||ie(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return n5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n5(e,t)}}var it=function(){var e=n7((0,o.useState)(!1),2),t=e[0],r=e[1],n=n7((0,o.useState)([]),2),a=n[0],s=n[1],l=(0,nq.dd)(),c=iy(),u=n2({onSuccess:function(){l.remove()}}),d=(0,nW.A)(),f=d.uploadFile,p=d.status,m=d.response,b=d.isError,h=(0,tr.pm)().error,y=(0,eL.uI)({multiple:!0,accept:{"text/plain":[".txt"],"application/pdf":[".pdf"],"application/x-subrip":[".srt"]},noClick:a.length>0,maxSize:0x6400000,onDropAccepted:function(e){if(a.length+e.length>15)return void h((0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.max_files",{max_files:15}));e.forEach(function(e){f(e),s(function(t){return((function(e){if(Array.isArray(e))return n5(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||ie(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{file:e,signedId:null,status:"selected"}])})})},onDropRejected:function(e){e.forEach(function(e){h((0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.rejected",{file_name:e.file.name}))})}}),v=y.getRootProps,g=y.getInputProps,_=y.open;return(0,o.useEffect)(function(){b&&(m?m.filename&&(s(a.filter(function(e){var t;return(null==(t=e.file)?void 0:t.name)!==m.filename})),h((0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.file_upload_failed",{file_name:m.filename}))):(s([]),h((0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.upload_failed")))),"completed"===p&&m&&a.find(function(e){var t;return(null==(t=e.file)?void 0:t.name)===m.filename&&"selected"===e.status})&&s(function(e){return e.map(function(e){var t;return m.filename===(null==(t=e.file)?void 0:t.name)?n9(n8({},e),{signedId:m.signed_id,status:"valid"}):e})})},[p,m,b,h,a]),(0,i.jsxs)(nH.u_,{isOpen:l.visible,onClose:l.hide,children:[(0,i.jsx)(nH.u_.Overlay,{}),(0,i.jsxs)(nH.u_.Content,{size:"auto",className:"h-3 max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[500px]",children:[(0,i.jsxs)("header",{className:"flex items-center justify-between px-5 py-4",children:[(0,i.jsx)(es.Z.TitleSm,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.title")}),(0,i.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,i.jsx)("li",{children:(0,i.jsx)(el.T,{placement:"bottom",content:(0,A.t)("quick_post_v2.header.close"),children:(0,i.jsx)(nV.h,{variant:"secondary",iconSize:20,onClick:l.hide,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,A.t)("quick_post_v2.header.close")})})})})]}),(0,i.jsx)("div",{className:"flex h-full flex-row overflow-hidden pb-4",children:(0,i.jsxs)("div",n9(n8({},v()),{className:(0,nZ.A)("focus-within:border-secondary border-primary mx-4 mb-4 flex h-full w-full items-center justify-center rounded-md border border-dashed",{"cursor-pointer":0===a.length}),children:[0===a.length&&(0,i.jsx)(n6,{openFilePicker:_}),a.length>0&&(0,i.jsx)(n4,{files:a,setFiles:s,openFilePicker:_}),(0,i.jsx)("input",n9(n8({},g()),{type:"file",className:"hidden"}))]}))}),(0,i.jsx)("footer",{className:"border-primary flex items-center justify-end border-t px-5 py-4","data-testid":"quick-post-footer",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ed.z,{type:"button",variant:"secondary",onClick:function(){l.hide(),c.show()},children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.back")}),(0,i.jsx)(ed.z,{variant:"circle",type:"button",disabled:t||0===a.length||a.some(function(e){return"valid"!==e.status}),onClick:function(){r(!0),u.mutate(a.map(function(e){var t;return null!=(t=e.signedId)?t:""}).filter(function(e){return e.length>0}),{onError:function(){r(!1),h((0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.errors.upload_failed"))}})},children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.add")})]})})]})]})},ir=g.gk.create(function(){return(0,i.jsx)(it,{})}),ii=r(184),io=r(96619),ia=r(59892),is=function(){var e,t;return(0,i.jsx)("div",{className:"flex-1 overflow-auto px-5 py-4","data-ai-scrollable":!0,children:(0,i.jsxs)("div",{className:"trix-v2 mx-auto grid h-full max-w-3xl grid-rows-[auto,auto,1fr]",children:[(0,i.jsx)(io.n,{maxLength:255,draggable:!1,name:"title",autoFocus:!0,placeholder:(0,A.t)("settings.community_bot.knowledge.custom.placeholders.title"),className:"bg-primary text-dark mb-2 block w-full resize-none border-none p-0 text-2xl font-bold focus:ring-0",rows:1,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},tabIndex:0}),(0,i.jsx)(ia.$,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},ii.rp),t=t={placeholder:(0,A.t)("settings.community_bot.knowledge.custom.placeholders.body"),name:"body.body",className:"h-full",editorClassName:"h-full quick-post-modal--v2"},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))]})})},il=function(e){var t,r;return void 0===e||void 0===e.body||(null==e||null==(r=e.body)||null==(t=r.content)?void 0:t.length)===1&&"paragraph"===e.body.content[0].type&&!e.body.content[0].content},ic=function(e){var t=e.label,r=e.onBack,n=(0,eb.Gc)(),o=n.watch,a=n.formState.isSubmitting,s=o(),l=s.title,c=s.body,u=!l||il(c)||a;return(0,i.jsx)("footer",{className:"border-primary flex items-center justify-end border-t px-5 py-4","data-testid":"quick-post-footer",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&(0,i.jsx)(ed.z,{type:"button",variant:"secondary",onClick:r,children:(0,A.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.back")}),(0,i.jsx)(ed.z,{disabled:u,type:"submit",variant:"circle",children:t})]})})},iu=function(e){var t=e.defaultValues,r=e.onSubmit,n=e.actionLabel,o=e.onBack;return(0,i.jsxs)(ec.l,{defaultValues:t,mode:"all",className:"h-[calc(100%-62px)]",formClassName:"h-full flex flex-col",onSubmit:r,children:[(0,i.jsx)(is,{}),(0,i.jsx)(ic,{label:n,onBack:o})]})},id=function(e){var t=e.title,r=(0,nq.dd)();return(0,i.jsxs)("header",{className:"border-primary flex items-center justify-between border-b px-5 py-4",children:[(0,i.jsx)(es.Z.TitleSm,{weight:"semibold",children:t}),(0,i.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,i.jsx)("li",{children:(0,i.jsx)(el.T,{placement:"bottom",content:(0,A.t)("quick_post_v2.header.close"),children:(0,i.jsx)(nV.h,{variant:"secondary",iconSize:20,onClick:r.remove,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,A.t)("quick_post_v2.header.close")})})})})]})},ip=function(){var e=(0,nq.dd)(),t=n1({onSuccess:e.remove}),r=iy();return(0,i.jsxs)(nH.u_,{isOpen:e.visible,onClose:e.hide,children:[(0,i.jsx)(nH.u_.Overlay,{}),(0,i.jsxs)(nH.u_.Content,{size:"auto",className:"h-full max-h-full max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[550px]",children:[(0,i.jsx)(id,{title:(0,A.t)("settings.community_bot.knowledge.custom.create_modal.title")}),(0,i.jsx)(iu,{defaultValues:{},onSubmit:function(e){return t.mutate(e)},actionLabel:(0,A.t)("settings.community_bot.knowledge.custom.add"),onBack:function(){e.hide(),r.show()}})]})]})},im=g.gk.create(function(){return(0,i.jsx)(ip,{})}),ib=function(){var e=(0,nq.dd)(),t=(0,g.dd)(im),r=(0,g.dd)(ir);return(0,i.jsxs)(nH.u_,{isOpen:e.visible,onClose:e.hide,children:[(0,i.jsx)(nH.u_.Overlay,{}),(0,i.jsxs)(nH.u_.Content,{size:"auto",className:"h-3 max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[260px]",children:[(0,i.jsxs)("header",{className:"flex items-center justify-between px-8 pb-4 pt-6",children:[(0,i.jsx)(es.Z.TitleSm,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.title")}),(0,i.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,i.jsx)("li",{children:(0,i.jsx)(el.T,{placement:"bottom",content:(0,A.t)("quick_post_v2.header.close"),children:(0,i.jsx)(nV.h,{variant:"secondary",iconSize:20,onClick:e.hide,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,A.t)("quick_post_v2.header.close"),className:"!p-0"})})})})]}),(0,i.jsxs)("div",{className:"flex h-full flex-row gap-6 px-6 pb-6",children:[(0,i.jsx)("button",{type:"button",className:"hover:border-secondary flex h-full w-1/2 cursor-pointer flex-col justify-center rounded-lg border","aria-label":(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.snippet.title"),onClick:function(){e.hide(),t.show()},children:(0,i.jsxs)("div",{className:"m-2 flex flex-col items-start justify-start gap-2 p-3",children:[(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(E.JO,{className:"!h-[36px] !w-[36px]",type:"36-ai-snippet",size:36})}),(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.snippet.title")}),(0,i.jsx)(es.Z.LabelXs,{children:(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.snippet.description")})]})}),(0,i.jsx)("button",{type:"button",className:"hover:border-secondary flex h-full w-1/2 cursor-pointer flex-col justify-center rounded-lg border","aria-label":(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.file.title"),onClick:function(){e.hide(),r.show()},children:(0,i.jsxs)("div",{className:"m-2 flex flex-col items-start justify-start gap-2 p-3",children:[(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(E.JO,{className:"!h-[36px] !w-[36px]",type:"36-ai-file",size:36})}),(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.file.title")}),(0,i.jsx)(es.Z.LabelXs,{children:(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.file.description")})]})})]})]})]})},ih=g.gk.create(function(){return(0,i.jsx)(ib,{})}),iy=function(){return(0,g.dd)(ih)},iv=r(63549);function ig(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var i_=function(e){var t=e.selectedIds,r=e.setSelectedIds,n=e.onDelete,o=(0,g.dd)(),a=nY({onSuccess:function(){o.remove(),r([]),null==n||n()}});return(0,i.jsx)(iv.c,{size:"lg",isOpen:o.visible,onClose:o.hide,title:(0,A.t)("settings.community_bot.knowledge.custom.delete_resource",{count:t.length}),confirmVariant:"danger",confirmText:a.isLoading?(0,A.t)("settings.community_bot.knowledge.custom.bulk_delete_snippet_modal.confirming"):(0,A.t)("settings.community_bot.knowledge.custom.bulk_delete_snippet_modal.confirm"),onConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,a.mutateAsync({ids:t})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ig(o,n,i,a,s,"next",e)}function s(e){ig(o,n,i,a,s,"throw",e)}a(void 0)})})()},disabled:a.isLoading,children:(0,i.jsx)(es.Z.BodyMd,{children:(0,i.jsx)(n3.w,{content:(0,A.t)("settings.community_bot.knowledge.custom.bulk_delete_snippet_modal.description",{count:t.length})})})})},ix=g.gk.create(function(e){var t=e.selectedIds,r=e.setSelectedIds,n=e.onDelete;return(0,i.jsx)(i_,{selectedIds:t,setSelectedIds:r,onDelete:n})}),ij=function(){return(0,g.dd)(ix)},iw=r(52569),iO=function(e){return["PDF","TXT","SRT"].includes(e)},iS=r(87279),ik=function(e){var t=e.url,r=e.onDelete;return(0,i.jsxs)("div",{className:"text-dark flex gap-3",children:[(0,i.jsx)(el.T,{arrow:!1,content:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.download"),children:(0,i.jsx)(ed.z,{variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){window.open(t,"_blank"),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(E.JO,{size:20,type:"20-snippet-preview-arrow-box"})})}),(0,i.jsx)(el.T,{arrow:!1,content:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.delete"),children:(0,i.jsx)(ed.z,{variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){r(),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(E.JO,{size:20,type:"20-snippet-preview-trash"})})})]})},iP=function(e){var t=e.isEditing,r=e.onCancel,n=e.onEdit,o=e.onDelete,a=(0,eb.Gc)();return(0,i.jsx)("div",{className:"text-dark flex gap-3",children:t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ed.z,{variant:"secondary",onClick:function(){a.reset(),r()},children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.cancel")}),(0,i.jsx)(ed.z,{variant:"circle",type:"submit",children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.save")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el.T,{arrow:!1,content:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.edit"),children:(0,i.jsx)(ed.z,{type:"button",variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){n(),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(E.JO,{size:20,type:"20-snippet-preview-pencil"})})}),(0,i.jsx)(el.T,{arrow:!1,content:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.delete"),children:(0,i.jsx)(ed.z,{variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){o(),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(E.JO,{size:20,type:"20-snippet-preview-trash"})})})]})})};function iC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function iA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var iI=function(e){var t,r,n,a=e.snippet,s=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return iC(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iC(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=ij(),d=(0,g.dd)(),f=n0({onSuccess:function(){return c(!1)}}),p=iO(null!=(r=null==a?void 0:a.type)?r:""),m=function(){var e;u.show({selectedIds:[null!=(e=null==a?void 0:a.id)?e:0],setSelectedIds:N.noop,onDelete:function(){d.remove()}})};return(0,i.jsx)("div",{className:"border-primary flex h-full min-h-0 flex-1 flex-col border-r",children:void 0===a?(0,i.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,i.jsx)(rY.a,{})}):(0,i.jsxs)(iS.l,{name:"preview-snippet",onSubmit:function(e){p||f.mutate(iA(iN({},e),{id:null==a?void 0:a.id}))},defaultValues:{title:null==a?void 0:a.title,body:null==a?void 0:a.body},className:"flex h-full min-h-0 flex-1 flex-col",formClassName:"flex flex-col min-h-0 h-full",children:[(0,i.jsxs)("div",{className:"border-primary flex h-[72px] items-center justify-between border-b p-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",color:"text-light",children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.custom")}),(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",children:p?(0,A.t)("settings.community_bot.knowledge.custom.types.file"):(0,A.t)("settings.community_bot.knowledge.custom.types.snippet")})]}),p?(0,i.jsx)(ik,{url:null!=(n=null==a?void 0:a.file_url)?n:"",onDelete:function(){return m()}}):(0,i.jsx)(iP,{isEditing:l,onCancel:function(){c(!1)},onEdit:function(){c(!0)},onDelete:function(){return m()}})]}),(0,i.jsx)("div",{id:"scroll_this_one",className:"h-full min-h-0 flex-1 overflow-y-scroll",children:(0,i.jsxs)("div",{className:"px-6 py-4",children:[(0,i.jsx)(io.n,{disabled:!l,draggable:!1,name:"title",placeholder:(0,A.t)("settings.community_bot.knowledge.custom.placeholders.title"),className:"bg-primary text-dark mb-2 block w-full resize-none border-none p-0 text-2xl font-bold focus:ring-0",rows:1,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},tabIndex:0}),(null==a?void 0:a.body)===null?(0,i.jsx)("div",{className:"flex h-[calc(100vh-200px)] items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)(rY.a,{}),(0,i.jsx)(es.Z.BodySm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.still_processing")})]})}):(0,i.jsxs)("div",{className:"flex h-full flex-col",children:[(0,i.jsxs)("div",{className:(0,nZ.A)("relative",a.truncated&&"h-[calc(100vh-300px)] overflow-hidden"),children:[(0,i.jsx)(ia.$,iA(iN({},ii.rp),{placeholder:(0,A.t)("settings.community_bot.knowledge.custom.placeholders.body"),readOnly:!l,name:"body.body",className:(0,nZ.A)("h-full",a.truncated&&"overflow-hidden"),editorClassName:"quick-post-modal--v2",shouldRefetch:!0})),a.truncated&&(0,i.jsx)("div",{className:"from-primary absolute inset-x-0 bottom-0 h-24 bg-gradient-to-t to-transparent"})]}),a.truncated&&(0,i.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-4 pt-4",children:[(0,i.jsx)(es.Z.BodyMd,{weight:"bold",children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.too_large")}),(0,i.jsx)(ed.z,{variant:"circle",onClick:function(){window.open(a.file_url,"_blank")},children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.download_file")})]})]})]})})]})})},iE=r(27742),iT=function(e){var t=e.snippet,r=iO(String(null==t?void 0:t.type));return(0,i.jsxs)("div",{className:"flex w-full flex-col gap-4 pb-6",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-36 shrink-0",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.name")})}),(0,i.jsx)("div",{className:"flex-1",style:{wordBreak:"break-word",wordWrap:"break-word",overflowWrap:"break-word"},children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:t.title})})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.type")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(nU.y,{type:t.type})})]}),r&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.size")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:t.file_size})})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.used_in_replies")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:t.used_in_replies})})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.created")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,eG.w)({dateTime:new Date(t.created_at),format:eG.f.long_date})})})]}),t.creator&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.created_by")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(e_.s,{name:t.creator.name,src:t.creator.avatar_url,size:"5",isFullRounded:!0}),(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:t.creator.name})]})})]}),!r&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.last_updated")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,eG.w)({dateTime:new Date(t.updated_at),format:eG.f.long_date})})})]}),!r&&t.updater&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.updated_by")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(e_.s,{name:t.updater.name,src:t.updater.avatar_url,size:"5",isFullRounded:!0}),(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:t.updater.name})]})})]})]})},iL=function(e){var t=e.snippet,r=(0,g.dd)();return(0,i.jsx)("div",{className:"h-full w-[344px] overflow-hidden",children:void 0===t?(0,i.jsx)("div",{className:"flex h-full flex-1 items-center justify-center",children:(0,i.jsx)(rY.a,{})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"border-primary flex h-[72px] items-center justify-between border-b p-6",children:[(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",children:(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details")})}),(0,i.jsx)(ed.z,{onClick:r.hide,variant:"text",children:(0,i.jsx)(E.JO,{type:"24-close",size:24})})]}),(0,i.jsx)("div",{className:"border-primary border-b px-6 pb-1 pt-6",children:(0,i.jsx)(iE.U,{defaultActiveItemTitle:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.assigned_to"),children:(0,i.jsx)(iE.U.Item,{title:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.assigned_to"),children:(0,i.jsx)("div",{className:"pb-6",children:0===t.community_bot_profiles.length?(0,i.jsx)(es.Z.LabelSm,{children:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.not_assigned")}):(0,i.jsx)("div",{className:"flex flex-col gap-2",children:t.community_bot_profiles.map(function(e){return(0,i.jsxs)("div",{className:"text-dark bg-tertiary border-primary flex w-full flex-row gap-2 rounded-lg border p-2 text-base",children:[e.avatar_url?(0,i.jsx)(e_.s,{src:e.avatar_url,name:e.name,size:"5",isFullRounded:!0}):(0,i.jsx)(E.JO,{type:"20-ai-bot",size:20,className:"!h-[1.25rem] !w-[1.25rem]"}),(0,i.jsx)(es.Z.BodySm,{truncate:!0,children:e.name})]},e.id)})})})})})}),(0,i.jsx)("div",{className:"border-primary border-b px-6 pb-1 pt-6",children:(0,i.jsx)(iE.U,{defaultActiveItemTitle:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.resource"),children:(0,i.jsx)(iE.U.Item,{title:(0,A.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.resource"),children:(0,i.jsx)(iT,{snippet:t})})})})]})})},iD=function(e){var t=e.id,r=(0,g.dd)(),n=nX({id:t}).data;return(0,i.jsx)(iw.d,{isOpen:!!r.visible,onClose:r.hide,size:"xl",children:(0,i.jsx)(iw.d.Body,{className:"!p-0",children:(0,i.jsxs)("div",{className:"flex h-full flex-row",children:[(0,i.jsx)(iI,{snippet:n}),(0,i.jsx)(iL,{snippet:n})]})})})},iM=g.gk.create(function(e){var t=e.snippetId;return(0,i.jsx)(iD,{id:t})}),iR=function(){return(0,g.dd)(iM)},iB=function(e){var t,r=e.snippet,n=iR(),o=ij(),a=iO(null!=(t=String(null==r?void 0:r.type))?t:"");return(0,i.jsxs)(rX.w.Actions,{children:[(0,i.jsx)(rX.w.Actions.Item,{onClick:function(e){e.stopPropagation(),n.show({snippetId:r.id})},children:(0,A.t)("settings.community_bot.knowledge.custom.preview")}),a&&(0,i.jsx)(rX.w.Actions.Item,{onClick:function(e){e.stopPropagation(),window.open(r.file_url,"_blank")},children:(0,A.t)("settings.community_bot.knowledge.custom.download")}),(0,i.jsx)(rX.w.Actions.Item,{hasDanger:!0,onClick:function(e){e.stopPropagation(),o.show({selectedIds:[r.id],setSelectedIds:N.noop})},children:(0,A.t)("settings.community_bot.knowledge.custom.delete")})]})},iF=r(71367),iz=function(e){var t,r,n=e.row,o=e.handleCheckboxChange,a=e.selectedIds;return(0,i.jsx)(iF.X,{checked:a.includes(null==(t=n.original)?void 0:t.id),onChange:function(){var e;return o(null==(e=n.original)?void 0:e.id)},name:"snippet-".concat(null==(r=n.original)?void 0:r.id),isFormItem:!1,onClick:function(e){return e.stopPropagation()}})},iU=function(e){var t=e.allOnPageSelected,r=e.handleSelectAllOnPage;return(0,i.jsx)(iF.X,{checked:t,onChange:function(e){return r(e.target.checked)},name:"select-all",isFormItem:!1})},iZ=function(e){var t,r,n,o,a,s=e.columns,l=e.snippetsQuery,c=e.onChangePage,u=iR();return(0,i.jsxs)(rX.w,{columns:s,data:null!=(a=null==l||null==(t=l.data)?void 0:t.records)?a:[],isLoading:null==l?void 0:l.isLoading,initialPage:null==l||null==(r=l.data)?void 0:r.page,pageSize:null==l||null==(n=l.data)?void 0:n.per_page,totalRecordsCount:null==l||null==(o=l.data)?void 0:o.count,onChangePage:c,onClickRow:function(e){var t=e.original;u.show({snippetId:t.id})},children:[(0,i.jsxs)(rX.w.Table,{children:[(0,i.jsx)(rX.w.Header,{}),(0,i.jsx)(rX.w.Loader,{}),(0,i.jsx)(rX.w.Body,{})]}),(0,i.jsx)(rX.w.Pagination,{align:"left",direction:"reverse"})]})};function iG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||iV(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iV(e,t){if(e){if("string"==typeof e)return iG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iG(e,t)}}var iH=function(e){var t,r,n,a,s,l,c=e.nameFilter,u=void 0===c?"":c,d=e.typeFilter,f=void 0===d?"":d,p=iq((0,o.useState)(1),2),m=p[0],b=p[1],h=n$({currentPage:m,title:u,type:f}),y=iq((0,o.useState)([]),2),v=y[0],g=y[1],_=(null==(a=h.data)||null==(n=a.records)?void 0:n.map(function(e){return e.id}))||[],x=!!(u||f);(0,o.useEffect)(function(){b(1)},[u,f]);var j=ij(),w=iy(),O=function(){w.show()},S=(null==h||null==(s=h.data)?void 0:s.count)||0,k=(0,N.isEmpty)((null==h||null==(l=h.data)?void 0:l.records)||[]);return(null==h?void 0:h.isLoading)?(0,i.jsx)(rY.a,{}):k?x?(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(nG.u,{header:(0,A.t)("settings.community_bot.knowledge.custom.no_matching_results.header"),description:(0,A.t)("settings.community_bot.knowledge.custom.no_matching_results.description")})}):(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(nG.u,{header:(0,A.t)("settings.community_bot.knowledge.custom.empty_state.header"),description:(0,A.t)("settings.community_bot.knowledge.custom.empty_state.description"),primaryLabel:(0,A.t)("settings.community_bot.knowledge.custom.empty_state.primary_label"),onPrimaryClick:O})}):(0,i.jsxs)(ec.l,{name:"delete-snippets",onSubmit:N.noop,children:[S>0&&(0,i.jsx)("div",{className:"px-6 pb-1 pt-5 lg:px-9",children:(0,i.jsxs)("div",{className:"flex min-h-[1.75rem] items-center justify-between gap-4",children:[(0,i.jsx)("div",{className:"flex items-center gap-4",children:v.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.selected_count",{selected_count:v.length,count:S})}),(0,i.jsx)(ed.z,{type:"button",variant:"secondary",onClick:function(){j.show({selectedIds:v,setSelectedIds:g})},children:(0,A.t)("settings.community_bot.knowledge.custom.delete_resource",{count:v.length})})]}):(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.custom.count",{count:S})})}),(0,i.jsxs)(ed.z,{type:"button",onClick:O,variant:"circle",children:[(0,i.jsx)(E.JO,{className:"mr-1 align-bottom",type:"20-plus-v3",size:20,useWithStrokeCurrentColor:!0}),(0,A.t)("settings.community_bot.knowledge.custom.add_content_modal.title")]})]})}),(0,i.jsx)(rX.w.TableWrapper,{children:(0,i.jsx)(nz.n,{children:(0,i.jsx)(iZ,{columns:(t=function(e){g(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return iG(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||iV(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},r=function(e){g(function(t){var r=new Set(t);return e?_.forEach(function(e){return r.add(e)}):_.forEach(function(e){return r.delete(e)}),Array.from(r)})},[{header:(0,i.jsx)(iU,{allOnPageSelected:_.length>0&&_.every(function(e){return v.includes(e)}),handleSelectAllOnPage:r}),accessorKey:"checkbox",cellClassName:"align-middle gap-0 !px-0",thClassName:"!px-0 w-4",canSort:!1,cell:function(e){var r=e.row;return(0,i.jsx)(iz,{row:r,handleCheckboxChange:t,selectedIds:v})}},{header:(0,i.jsx)("span",{className:"text-xxs text-default font-semibold uppercase leading-tight tracking-wide",children:(0,A.t)("settings.community_bot.knowledge.custom.columns.title")}),accessorKey:"title",cell:function(e){var t,r,n=e.row;return(0,i.jsx)("div",{className:(0,nZ.A)({"cursor-default":(null==(t=n.original)?void 0:t.type)===(0,A.t)("settings.community_bot.knowledge.custom.types.file")}),children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:null==(r=n.original)?void 0:r.title})})},canSort:!1},{header:(0,A.t)("settings.community_bot.knowledge.custom.columns.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,i.jsx)(nU.y,{type:(null==(t=r.original)?void 0:t.type)||"Snippet"})},canSort:!1},{header:(0,A.t)("settings.community_bot.knowledge.custom.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t,r=e.row;return(0,i.jsx)(es.Z.LabelSm,{weight:"regular",children:null==(t=r.original)?void 0:t.used_in_replies})},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var t=e.row;return(0,i.jsx)(iB,{snippet:t.original})}}]),snippetsQuery:h,onChangePage:function(e){b(e),h.remove()}})})})]})},iW=r(2703),iQ=function(){var e=(0,no.qN)();return(0,i.jsxs)("div",{className:"bg-secondary border-primary flex justify-between border-b px-6 py-8 lg:px-9",children:[(0,i.jsx)("div",{className:"flex items-start space-x-8",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(nn.s6,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.banner.title")}),(0,i.jsx)(ev.p,{color:"text-light",children:(0,A.t)("settings.community_bot.knowledge.banner.description_v2")})]})}),(0,i.jsx)(E.JO,{type:"20-close",size:20,className:"cursor-pointer !self-start",onClick:function(){e.mutate({hide_knowledge_banner:!0})}})]})},iJ=function(e){var t,r,n,o,a,s=e.columns,l=e.spacesQuery,c=e.onChangePage;return(0,i.jsxs)(rX.w,{columns:s,data:null!=(a=null==l||null==(t=l.data)?void 0:t.records)?a:[],isLoading:null==l?void 0:l.isLoading,initialPage:null==l||null==(r=l.data)?void 0:r.page,pageSize:null==l||null==(n=l.data)?void 0:n.per_page,totalRecordsCount:null==l||null==(o=l.data)?void 0:o.count,onChangePage:c,children:[(0,i.jsxs)(rX.w.Table,{children:[(0,i.jsx)(rX.w.Header,{}),(0,i.jsx)(rX.w.Loader,{}),(0,i.jsx)(rX.w.Body,{})]}),(0,i.jsx)(rX.w.Pagination,{align:"left",direction:"reverse"})]})};function iK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i$=function(e){var t,r,n,a,s=e.nameFilter,l=void 0===s?"":s,c=e.typeFilter,u=void 0===c?"":c,d=e.spaceGroupFilter,f=void 0===d?"":d,p=(t=(0,o.useState)(1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return iK(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iK(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1],h=(0,iW.G)(),y=!!(l||u||f),v=(0,no.t8)({currentPage:m,name:l,type:u,spaceGroup:f}),g=(0,no.h$)(),_=(null==v||null==(r=v.data)?void 0:r.count)||0,x=(0,N.isEmpty)((null==v||null==(n=v.data)?void 0:n.records)||[]);return g.isLoading||(null==v?void 0:v.isLoading)?(0,i.jsx)(rY.a,{}):x?y?(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(nG.u,{header:(0,A.t)("settings.community_bot.knowledge.community.no_matching_results.header"),description:(0,A.t)("settings.community_bot.knowledge.community.no_matching_results.description")})}):(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(nG.u,{header:(0,A.t)("settings.community_bot.knowledge.community.empty_state.header"),description:(0,A.t)("settings.community_bot.knowledge.community.empty_state.description"),primaryLabel:(0,A.t)("settings.community_bot.knowledge.community.empty_state.primary_label"),onPrimaryClick:function(){return h.show()}})}):(0,i.jsxs)(i.Fragment,{children:[_>0&&(0,i.jsxs)(i.Fragment,{children:[!(null==g||null==(a=g.data)?void 0:a.hide_knowledge_banner)&&(0,i.jsx)(iQ,{}),(0,i.jsx)("div",{className:"px-6 pb-1 pt-5 lg:px-9",children:(0,i.jsx)("div",{className:"flex min-h-[1.75rem] items-center gap-4",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,A.t)("settings.community_bot.knowledge.spaces.count",{count:_})})})})]}),(0,i.jsx)(rX.w.TableWrapper,{children:(0,i.jsx)("div",{className:"mt-0.5",children:(0,i.jsx)(iJ,{columns:[{header:(0,A.t)("settings.community_bot.knowledge.spaces.columns_v2.name"),accessorKey:"name",cell:function(e){var t,r=e.row;return(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:null==(t=r.original)?void 0:t.name})},canSort:!1,cellClassName:"w-1/2"},{header:(0,A.t)("settings.community_bot.knowledge.spaces.columns_v2.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,i.jsx)(nU.y,{type:(null==(t=r.original)?void 0:t.type)||"Post"})},canSort:!1},{header:(0,A.t)("settings.community_bot.knowledge.spaces.columns_v2.space_group"),accessorKey:"space_group",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.space_group},canSort:!1},{header:(0,A.t)("settings.community_bot.knowledge.spaces.columns_v2.items_included"),accessorKey:"posts_count",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.posts_count},canSort:!1},{header:(0,A.t)("settings.community_bot.knowledge.spaces.columns_v2.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.used_in_replies},canSort:!1}],spacesQuery:v,onChangePage:function(e){b(e),v.remove()}})})})]})};function iX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iY={TAB_COMMUNITY:"tab_community",TAB_CUSTOM:"tab_custom"},i0=(iX(n={},iY.TAB_COMMUNITY,(0,A.t)("settings.community_bot.knowledge.tab_community")),iX(n,iY.TAB_CUSTOM,(0,A.t)("settings.community_bot.knowledge.tab_custom")),n),i1=[{label:(0,A.t)("settings.community_bot.knowledge.type.course"),value:"course"},{label:(0,A.t)("settings.community_bot.knowledge.type.post"),value:"basic"}],i2=[{label:(0,A.t)("settings.community_bot.knowledge.custom.types.snippet"),value:"Snippet"},{label:(0,A.t)("settings.community_bot.knowledge.custom.types.pdf"),value:"PDF"},{label:(0,A.t)("settings.community_bot.knowledge.custom.types.txt"),value:"TXT"},{label:(0,A.t)("settings.community_bot.knowledge.custom.types.srt"),value:"SRT"}];function i3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function i4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function i5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i8=Object.values(iY),i9=function(){var e=(0,rf.OH)({currentPage:1}),t=e.data,r=e.isLoading,n=(0,rJ.BT)(),a=i5((0,o.useState)(i8.indexOf(iY.TAB_COMMUNITY)),2),s=a[0],l=a[1],c=i5((0,o.useState)({name:"",type:"",spaceGroup:""}),2),u=c[0],d=c[1],f=(0,I.wh)().currentCommunity,p=!(null==t?void 0:t.records)||0===t.records.length,m=!(null==f?void 0:f.ai_agents_feature_flag_enabled)&&p,b=!!(null==f?void 0:f.ai_agents_feature_flag_enabled)&&p;(0,o.useEffect)(function(){d({name:"",type:"",spaceGroup:""})},[s]);var h=function(e){var t=e===i8.indexOf(iY.TAB_COMMUNITY);return(0,i.jsx)(nF.S,{name:u.name,onNameChange:function(e){return d(i4(i6({},u),{name:e}))},type:u.type,onTypeChange:function(e){return d(i4(i6({},u),{type:e}))},typeOptions:t?i1:i2,spaceGroup:u.spaceGroup,onSpaceGroupChange:function(e){return d(i4(i6({},u),{spaceGroup:e}))},showSpaceGroup:t})};return n?(0,i.jsx)(nI,{}):r?(0,i.jsx)(rY.a,{}):m?(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsx)(nA,{})}):b?(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsx)(nL,{})}):(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsx)("div",{className:"bg-primary h-full",children:(0,i.jsxs)(nB.O.Group,{className:"!h-auto overflow-visible",selectedIndex:s,onChange:function(e){return l(e)},children:[(0,i.jsx)(rQ.b,{pageTitle:(0,A.t)("settings.community_bot.knowledge.title"),hasBorder:!1,filters:(0,i.jsx)(nB.O.ListWrapper,{className:"lg:px-9",children:(0,i.jsx)(nB.O.List,{children:i8.map(function(e){return(0,i.jsx)(nB.O,{children:i0[e]},e)})})})}),(0,i.jsxs)(nB.O.Panels,{children:[(0,i.jsxs)(nB.O.Panel,{children:[h(s),(0,i.jsx)(i$,{nameFilter:u.name,typeFilter:u.type,spaceGroupFilter:u.spaceGroup})]}),(0,i.jsxs)(nB.O.Panel,{children:[h(s),(0,i.jsx)(iH,{nameFilter:u.name,typeFilter:u.type})]})]})]})})})},i7=r(86195);let oe=r.p+"static/images/inbox-avatars-38bf8b0f2b268160.png";var ot=function(){var e,t,r=(0,B.k6)(),n=(0,rf.OH)({currentPage:1}),o=!(null==n?void 0:n.isLoading)&&!(null==n||null==(e=n.data)?void 0:e.count),a=(0,I.wh)().currentCommunity,s=(0,rf.X5)(),l=null==n||null==(t=n.data)?void 0:t.records,c=!(null==l?void 0:l.length),u=!(null==a?void 0:a.ai_agents_feature_flag_enabled);return n.isLoading?(0,i.jsx)(rY.a,{}):u&&c?(0,i.jsx)(nA,{}):(0,i.jsx)("div",{className:"bg-secondary flex h-full w-full items-center justify-center text-center",children:(0,i.jsxs)("div",{className:"flex w-[31rem] flex-col items-center gap-4",children:[(0,i.jsx)("img",{alt:"",loading:"lazy",src:oe,className:"mb-2 object-cover"}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",children:(0,A.t)("community_inbox.title")}),(0,i.jsx)(es.Z.BodyMd,{color:"text-default",children:(0,A.t)("community_inbox.description")})]}),o&&(0,i.jsx)(ed.z,{variant:"circle",onClick:function(){s.mutate(void 0,{onSuccess:function(e){r.push(r$.X.customize({botPublicId:e.id.toString()}))}})},large:!0,children:(0,A.t)("community_inbox.setup_agent_cta")})]})})},or=function(){return(0,i.jsxs)(B.rs,{children:[(0,i.jsx)(B.AW,{exact:!0,path:"/settings/ai-inbox/conversations/:id",component:i7.o}),(0,i.jsx)(B.AW,{path:"/",component:ot})]})},on=(0,rI.u)(function(){return r.e("2495").then(r.bind(r,6869))}),oi=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(on,{})})},oo=(0,rI.u)(function(){return r.e("5147").then(r.bind(r,85693))}),oa=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oo,{})})},os=(0,rI.u)(function(){return Promise.all([r.e("5805"),r.e("2549")]).then(r.bind(r,97959))}),ol=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(os,{})})},oc=(0,rI.u)(function(){return r.e("7673").then(r.bind(r,40173))}),ou=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oc,{})})},od=(0,rI.u)(function(){return r.e("687").then(r.bind(r,48165))}),of=function(e){var t=e.pageTitle;return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(od,{pageTitle:t})})},op=(0,rI.u)(function(){return r.e("3026").then(r.bind(r,82811))}),om=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(op,{})})},ob=(0,rI.u)(function(){return r.e("6072").then(r.bind(r,49706))}),oh=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ob,{})})},oy=(0,rI.u)(function(){return r.e("9094").then(r.bind(r,53699))}),ov=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oy,{})})},og=(0,rI.u)(function(){return Promise.all([r.e("6123"),r.e("2862"),r.e("1427"),r.e("3633")]).then(r.bind(r,15420))}),o_=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(og,{})})},ox=(0,rI.u)(function(){return Promise.all([r.e("4502"),r.e("140"),r.e("5702"),r.e("7401")]).then(r.bind(r,96983))}),oj=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ox,{})})},ow=(0,rI.u)(function(){return Promise.all([r.e("1427"),r.e("1553")]).then(r.bind(r,8914))}),oO=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ow,{})})},oS=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("1223"),r.e("5122"),r.e("6077"),r.e("2435"),r.e("6110")]).then(r.bind(r,24168))}),ok=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oS,{})})},oP=(0,rI.u)(function(){return r.e("3058").then(r.bind(r,14757))}),oC=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oP,{})})},oN=(0,rI.u)(function(){return r.e("6156").then(r.bind(r,96769))}),oA=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oN,{})})},oI=(0,rI.u)(function(){return r.e("4298").then(r.bind(r,2101))}),oE=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oI,{})})},oT=(0,rI.u)(function(){return r.e("7125").then(r.bind(r,37661))}),oL=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oT,{})})},oD=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("8909"),r.e("6740"),r.e("7877")]).then(r.bind(r,45739))}),oM=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oD,{})})},oR=(0,rI.u)(function(){return Promise.all([r.e("3613"),r.e("2620")]).then(r.bind(r,83079))}),oB=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oR,{})})},oF=(0,rI.u)(function(){return Promise.all([r.e("7810"),r.e("2139")]).then(r.bind(r,80948))}),oz=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oF,{})})},oU=(0,rI.u)(function(){return r.e("6912").then(r.bind(r,61509))}),oZ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oU,{})})},oG=r(24869),oq=(0,rI.u)(function(){return Promise.all([r.e("3496"),r.e("212")]).then(r.bind(r,37831))}),oV=function(){return(0,oG.E)().isCommunityOnPlus?(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oq,{})}):(0,i.jsx)(B.l_,{to:rp.L.plans.brandedApps})},oH=(0,rI.u)(function(){return Promise.all([r.e("3613"),r.e("8591")]).then(r.bind(r,87030))}),oW=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oH,{})})},oQ=(0,rI.u)(function(){return Promise.all([r.e("6077"),r.e("7010")]).then(r.bind(r,83269))}),oJ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oQ,{})})},oK=(0,rI.u)(function(){return r.e("74").then(r.bind(r,84067))}),o$=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oK,{})})},oX=(0,rI.u)(function(){return Promise.all([r.e("756"),r.e("5476")]).then(r.bind(r,80539))}),oY=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(oX,{})})},o0=(0,rI.u)(function(){return r.e("6219").then(r.bind(r,15348))}),o1=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(o0,{})})},o2=(0,rI.u)(function(){return r.e("3203").then(r.bind(r,17809))}),o3=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(o2,{})})},o6=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("7742"),r.e("9458"),r.e("3232"),r.e("9020"),r.e("1822"),r.e("5022")]).then(r.bind(r,47644))}),o4=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(o6,{})})},o5=(0,rI.u)(function(){return r.e("5760").then(r.bind(r,30810))}),o8=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(o5,{})})},o9=(0,rI.u)(function(){return r.e("7766").then(r.bind(r,84392))}),o7=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(o9,{})})},ae=(0,rI.u)(function(){return r.e("9324").then(r.bind(r,66685))}),at=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ae,{})})},ar=(0,rI.u)(function(){return Promise.all([r.e("2281"),r.e("4297")]).then(r.bind(r,72448))}),an=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ar,{})})},ai=(0,rI.u)(function(){return Promise.resolve().then(r.bind(r,55666))}),ao=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ai,{})})},aa=(0,rI.u)(function(){return r.e("4962").then(r.bind(r,40261))}),as=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aa,{})})},al=(0,rI.u)(function(){return r.e("2407").then(r.bind(r,62504))}),ac=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(al,{})})},au=(0,rI.u)(function(){return r.e("5239").then(r.bind(r,13476))}),ad=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(au,{})})},af=(0,rI.u)(function(){return r.e("9880").then(r.bind(r,23379))}),ap=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(af,{})})},am=(0,rI.u)(function(){return Promise.all([r.e("3613"),r.e("1674")]).then(r.bind(r,68679))}),ab=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(am,{})})},ah=(0,rI.u)(function(){return Promise.all([r.e("9306"),r.e("7256")]).then(r.bind(r,37857))}),ay=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ah,{})})},av=function(){return(0,i.jsx)(B.l_,{to:"/members/onboarding"})},ag=(0,rI.u)(function(){return Promise.all([r.e("7673"),r.e("6955")]).then(r.bind(r,36962))}),a_=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ag,{})})},ax=(0,rI.u)(function(){return r.e("2705").then(r.bind(r,78411))}),aj=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ax,{})})},aw=(0,rI.u)(function(){return r.e("8546").then(r.bind(r,66771))}),aO=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aw,{})})},aS=(0,rI.u)(function(){return r.e("3789").then(r.bind(r,97920))}),ak=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aS,{})})},aP=(0,rI.u)(function(){return r.e("6692").then(r.bind(r,18945))}),aC=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aP,{})})},aN=(0,rI.u)(function(){return r.e("9034").then(r.bind(r,12707))}),aA=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aN,{})})},aI=(0,rI.u)(function(){return Promise.all([r.e("4786"),r.e("994")]).then(r.bind(r,32805))}),aE=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aI,{})})},aT=(0,rI.u)(function(){return Promise.all([r.e("7810"),r.e("316")]).then(r.bind(r,79709))}),aL=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aT,{})})},aD=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("9431"),r.e("8834")]).then(r.bind(r,17926))}),aM=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aD,{})})},aR=(0,rI.u)(function(){return r.e("1370").then(r.bind(r,46302))}),aB=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aR,{})})},aF=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("1822"),r.e("2444")]).then(r.bind(r,88572))}),az=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aF,{})})},aU=(0,rI.u)(function(){return Promise.all([r.e("4502"),r.e("140"),r.e("5702"),r.e("7964")]).then(r.bind(r,20326))}),aZ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aU,{})})},aG=(0,rI.u)(function(){return r.e("2322").then(r.bind(r,10509))}),aq=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aG,{})})},aV=(0,rI.u)(function(){return Promise.all([r.e("9735"),r.e("2015")]).then(r.bind(r,57104))}),aH=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aV,{})})},aW=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("9530"),r.e("9306"),r.e("9735"),r.e("7223"),r.e("2281"),r.e("8095")]).then(r.bind(r,22162))}),aQ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aW,{})})},aJ=(0,rI.u)(function(){return r.e("2791").then(r.bind(r,69595))}),aK=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aJ,{})})},a$=(0,rI.u)(function(){return r.e("1117").then(r.bind(r,69896))}),aX=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(a$,{})})},aY=(0,rI.u)(function(){return r.e("66").then(r.bind(r,86060))}),a0=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(aY,{})})},a1=(0,rI.u)(function(){return r.e("6851").then(r.bind(r,41505))}),a2=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(a1,{})})},a3=(0,rI.u)(function(){return r.e("3408").then(r.bind(r,27262))}),a6=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(a3,{})})},a4=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("6651"),r.e("7742"),r.e("9219"),r.e("4502"),r.e("3869")]).then(r.bind(r,27467))}),a5=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(a4,{})})},a8=r(29268),a9=function(e){var t=e.isPaywallTaxAvailable,r=e.isAffiliatesEnabled,n=void 0!==r&&r,o=e.isWorkflowsEnabled,a=e.isPaywallPaymentSettingsAvailable,s=e.isSitesEnabled,l=e.isConnectCoreEnabled;return rs(),(0,i.jsxs)(B.rs,{children:[void 0!==l&&l&&(0,i.jsx)(a8.i,{component:rB,path:"/settings/connect"}),(0,i.jsx)(a8.i,{component:rM,path:"/settings/branded_apps_builder_ui",exact:!0}),(0,i.jsx)(a8.i,{component:rL,path:"/settings/branded_apps_builder_landing_page",exact:!0}),(0,i.jsx)(a8.i,{component:at,path:"/settings",exact:!0}),(0,i.jsx)(a8.i,{component:oY,path:"/settings/custom_domain",exact:!0}),(0,i.jsx)(a8.i,{component:an,path:"/settings/home",exact:!0}),(0,i.jsx)(a8.i,{component:av,path:"/settings/onboarding/:tab?",exact:!0}),(0,i.jsx)(a8.i,{component:oJ,path:"/settings/community_ai",exact:!0}),(0,i.jsx)(a8.i,{component:aX,path:"/settings/spaces",exact:!0}),(0,i.jsx)(a8.i,{component:a2,path:"/settings/topics",exact:!0}),(0,i.jsx)(a8.i,{component:aB,path:"/settings/posts/bulk_actions",exact:!0}),(0,i.jsx)(a8.i,{component:rZ,path:"/settings/files",exact:!0}),(0,i.jsx)(a8.i,{component:oW,path:"/settings/code_snippets",exact:!0}),(0,i.jsx)(a8.i,{component:a6,path:"/settings/weekly_digest",exact:!0}),(0,i.jsx)(a8.i,{component:rz,path:"/settings/mobile_app",exact:!0}),(0,i.jsx)(a8.i,{component:ad,path:"/settings/messaging",exact:!0}),(0,i.jsx)(a8.i,{component:ay,path:"/settings/navigation",exact:!0}),(0,i.jsx)(a8.i,{component:aq,path:"/settings/sso",exact:!0}),(0,i.jsx)(a8.i,{component:o8,path:"/settings/embed",exact:!0}),(0,i.jsx)(a8.i,{component:aM,path:"/settings/posts",exact:!0}),(0,i.jsx)(B.AW,{component:aL,path:"/settings/plans",exact:!0}),(0,i.jsx)(B.AW,{component:oz,path:"/settings/billing"}),(0,i.jsx)(B.AW,{component:oZ,path:"/settings/branded_apps"}),(0,i.jsx)(a8.i,{component:oB,path:"/settings/api"}),(0,i.jsx)(a8.i,{component:ap,path:"/settings/moderation",exact:!0}),(0,i.jsx)(a8.i,{component:ab,path:"/settings/moderation/edit",exact:!0}),(0,i.jsx)(a8.i,{component:aO,path:"/settings/paywall_groups",exact:!0}),void 0!==a&&a&&(0,i.jsx)(a8.i,{component:ak,path:rp.L.paywalls.payment_settings,exact:!0}),void 0!==t&&t&&(0,i.jsx)(a8.i,{component:aA,path:"/settings/paywall_tax_settings",exact:!0}),(0,i.jsx)(a8.i,{component:aE,path:"/settings/paywalls",exact:!1}),n&&(0,i.jsx)(a8.i,{component:oE,path:"/settings/affiliates_directory",exact:!0}),n&&(0,i.jsx)(a8.i,{component:oA,path:"/settings/affiliates_commissions",exact:!0}),n&&(0,i.jsx)(a8.i,{component:oL,path:"/settings/affiliates_settings",exact:!0}),(0,i.jsx)(a8.i,{component:as,path:"/settings/member_billing"}),(0,i.jsx)(a8.i,{component:aC,path:"/settings/paywall_subscriptions",exact:!1}),(0,i.jsx)(a8.i,{component:o3,path:"/settings/developers",exact:!0}),(0,i.jsx)(a8.i,{component:oV,path:"/settings/plus",exact:!0}),(0,i.jsx)(a8.i,{component:rA.s,path:"/settings/plus/lite",exact:!0}),(0,i.jsx)(a8.i,{component:az,path:rp.L.plus.push_notifications}),(0,i.jsx)(a8.i,{component:rW,path:"/settings/plus/billing",exact:!0}),(0,i.jsx)(a8.i,{component:aj,path:"/settings/paywall_charges",exact:!1}),(0,i.jsx)(a8.i,{component:a_,path:"/settings/paywall_bulk_logs",exact:!0}),(0,i.jsx)(a8.i,{component:ac,path:"/settings/member_tags",exact:!1}),(0,i.jsx)(a8.i,{component:o$,path:rp.L.paywalls.coupons}),(0,i.jsx)(a8.i,{component:a0,path:"/settings/theme",exact:!0}),(0,i.jsx)(a8.i,{component:or,path:["/settings/ai-inbox/conversations/:id","/settings/ai-inbox"],exact:!0}),(0,i.jsx)(a8.i,{component:i9,path:"/settings/ai-agents/knowledge",exact:!0}),(0,i.jsx)(a8.i,{component:nR,path:"/settings/ai-agents/agents",exact:!0}),(0,i.jsx)(B.AW,{component:ao,path:"/settings/live_streams",exact:!1}),(0,i.jsx)(a8.i,{component:oj,path:"/audience/manage",exact:!0}),(0,i.jsx)(a8.i,{component:oC,path:rp.L.members.access_groups}),(0,i.jsx)(a8.i,{component:o_,path:"/members/invite"}),(0,i.jsx)(a8.i,{path:"/members/edit/:id",exact:!1,render:function(){return(0,i.jsx)(of,{pageTitle:(0,A.t)("settings.edit_member.title")})}}),(0,i.jsx)(a8.i,{component:om,path:"/members/invitation_links"}),(0,i.jsx)(a8.i,{component:oh,path:"/members/invitation_links/:id/edit",exact:!0}),(0,i.jsx)(a8.i,{component:ov,path:"/members/invitation_links/new",exact:!0}),(0,i.jsx)(a8.i,{path:"/members/invitation_links/:action",exact:!0,render:function(){return(0,i.jsx)(of,{pageTitle:(0,A.t)("settings.invitation_links.title")})}}),(0,i.jsx)(a8.i,{path:"/members/invitation_links/:id/:action",exact:!0,render:function(){return(0,i.jsx)(of,{pageTitle:(0,A.t)("settings.invitation_links.title")})}}),(0,i.jsx)(a8.i,{component:oO,path:"/members/onboarding/:tab?",exact:!0}),(0,i.jsx)(a8.i,{path:"/members/bulk_import",exact:!0,render:function(){return(0,i.jsx)(of,{pageTitle:(0,A.t)("settings.import_members.title")})}}),(0,i.jsx)(a8.i,{component:ou,path:"/settings/members/bulk_import_tasks",exact:!0}),(0,i.jsx)(a8.i,{component:ok,path:"/members/profile_fields"}),(0,i.jsx)(a8.i,{component:ol,path:"/settings/members/activity_logs",exact:!0}),(0,i.jsx)(a8.i,{component:oa,path:"/settings/legal",exact:!0}),(0,i.jsx)(a8.i,{component:oi,path:"/settings/discover",exact:!0}),(0,i.jsx)(a8.i,{component:oM,path:"/settings/analytics/:action?"}),(0,i.jsx)(a8.i,{component:o7,path:"/settings/gamification"}),void 0!==o&&o&&(0,i.jsx)(a8.i,{component:a5,path:"/settings/workflows"}),(0,i.jsx)(a8.i,{component:aZ,path:rp.L.members.segments}),(0,i.jsx)(a8.i,{component:o4,path:"/settings/emails"}),void 0!==s&&s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a8.i,{exact:!0,component:aH,path:"/settings/pages"}),(0,i.jsx)(a8.i,{component:aQ,path:"/settings/pages/edit/:id"}),(0,i.jsx)(a8.i,{component:aK,path:"/settings/seo"}),(0,i.jsx)(a8.i,{component:rq,path:"/settings/redirects"})]}),(0,i.jsx)(a8.i,{component:o1,path:"/settings/:component/:action/",exact:!0}),(0,i.jsx)(a8.i,{component:o1,path:"/settings/:component",exact:!0})]})},a7=r(82684),se=r(93266),st=function(){var e=(0,I.wh)(),t=e.isLoading,r=e.currentCommunity,n=(0,rC.Aq)(r),a=(0,B.k6)(),s=(0,a7.I)(),l=(0,rP.s)(),c=(0,ri.H)().isSettingsPage,u=rl().isPlansPageLayout,d=(0,se.n)(),f=(0,ru.x)()||!(null==r?void 0:r.payment_processor),p=(0,rc.N)(),m=rb(),b=rm();if((0,o.useEffect)(function(){var e=a.listen(function(){window.scrollTo(0,0)});return function(){return e()}}),(0,rd.I)(),t)return(0,i.jsx)(rY.a,{});if(!c)return null;var h=!!(null==r?void 0:r.affiliates_feature_flag_enabled);return(0,i.jsx)(rN._p,{section:rN.kS.ADMIN,children:(0,i.jsx)(rk,{shouldHideMainHeader:!1,hideAppBar:n,shouldHideSidebarNestedNavBar:m||b||u,children:(0,i.jsx)(a9,{isPaywallTaxAvailable:f,isAffiliatesEnabled:h,isWorkflowsEnabled:s,isSitesEnabled:l,isPaywallPaymentSettingsAvailable:p,isConnectCoreEnabled:d})})})},sr=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("1223"),r.e("9431"),r.e("6532"),r.e("4303"),r.e("2435"),r.e("9414")]).then(r.bind(r,5918))}),sn=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sr,{})})},si=r(78152),so=r(48150),sa=r(30244),ss=r(72171),sl=(0,rI.u)(function(){return Promise.resolve().then(r.bind(r,76017))}),sc=function(){return(0,i.jsx)(ry.a,{disableRightSidebar:!0,children:(0,i.jsx)(sa.W,{fullWidth:!0,fullHeight:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsxs)(ry.a.Body,{children:[(0,i.jsx)(si.S,{title:(0,A.t)("header_v3.bookmarks")}),(0,i.jsx)(so.Z,{leftContent:(0,i.jsx)(ss.y,{children:(0,A.t)("header_v3.bookmarks")}),hasBorder:!0}),(0,i.jsx)(ry.a.Content,{fullWidth:!0,children:(0,i.jsx)("div",{className:"bg-primary m-4 mx-auto max-w-4xl overflow-auto lg:h-[calc(100vh-160px)]",children:(0,i.jsx)(sl,{})})})]})})})})},su=(0,rI.u)(function(){return Promise.all([r.e("6123"),r.e("2862"),r.e("3555")]).then(r.bind(r,84161))}),sd=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(su,{})})},sf=(0,rI.u)(function(){return r.e("4091").then(r.bind(r,16861))}),sp=function(){return(0,i.jsx)(sa.W,{fullWidth:!0,fullHeight:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sf,{})})})},sm=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("1155")]).then(r.bind(r,5897))}),sb=function(){return(0,i.jsx)(ry.a,{disableRightSidebar:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sm,{})})})},sh=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("5247"),r.e("8926"),r.e("6180"),r.e("4174"),r.e("4780"),r.e("1343"),r.e("4213"),r.e("7554"),r.e("2391")]).then(r.bind(r,82385))}),sy=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sh,{})})},sv=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("5611")]).then(r.bind(r,82447))}),sg=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sv,{})})},s_=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("5247"),r.e("6180"),r.e("1343"),r.e("6364"),r.e("1164")]).then(r.bind(r,76160))}),sx=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(s_,{})})},sj=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("4174"),r.e("9184"),r.e("1343"),r.e("4213"),r.e("8174"),r.e("7697")]).then(r.bind(r,47725))}),sw=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sj,{})})},sO=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("5247"),r.e("8926"),r.e("6180"),r.e("4174"),r.e("9184"),r.e("4780"),r.e("1343"),r.e("4213"),r.e("7554"),r.e("8174"),r.e("6364"),r.e("5613")]).then(r.bind(r,35520))}),sS=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sO,{})})},sk=(0,rI.u)(function(){return r.e("1042").then(r.bind(r,42506))}),sP=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sk,{})})},sC=(0,rI.u)(function(){return r.e("1802").then(r.bind(r,79041))}),sN=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sC,{})})},sA=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("4999")]).then(r.bind(r,16472))}),sI=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sA,{})})},sE=(0,rI.u)(function(){return r.e("5130").then(r.bind(r,89538))}),sT=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sE,{})})},sL=(0,rI.u)(function(){return r.e("3463").then(r.bind(r,84931))}),sD=function(){return(0,i.jsx)(I.BD,{children:(0,i.jsx)(ry.a,{disableRightSidebar:!0,children:(0,i.jsx)(sa.W,{fullWidth:!0,fullHeight:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sL,{})})})})})},sM=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("4238")]).then(r.bind(r,35285))}),sR=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sM,{})})},sB=function(){var e=(0,B.UO)().memberPublicId;return(0,o.useEffect)(function(){var t="Accessing deprecated public_uid based admin member edit page ".concat(e);(0,h.d)(t),console.warn(t),window.location.reload()},[e]),null},sF=(0,eu.NQ)({type:"CommunityMember"}),sz=[sF.index,sF.info,sF.access,sF.billing,sF.activityLogs],sU=function(){return(0,i.jsx)(a8.i,{component:sB,path:sz,exact:!0})},sZ=r(96354),sG=(0,rI.u)(function(){return r.e("9525").then(r.bind(r,99240))}),sq=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sG,{})})},sV=(0,rI.u)(function(){return r.e("6422").then(r.bind(r,26729))}),sH=function(){return(0,i.jsx)(sa.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(sV,{})})})},sW=r(61826),sQ=r(40725),sJ=r.n(sQ),sK=r(93233),s$=r(9397),sX=r(37840),sY=r(86976),s0=r(56993),s1=function(e){var t=e.level,r=e.isLocked,n=e.membersPercentage,o=e.levelName,a=e.pointsRequired,s=(0,s0.O)(t);return(0,i.jsxs)("div",{className:(0,nZ.A)("flex space-x-2",n?"items-start":"items-center",r?"opacity-60":""),children:[(0,i.jsx)("div",{className:(0,nZ.A)("flex h-8 w-8 items-center justify-center rounded-full border",r?"bg-primary text-dark border-primary":["border-transparent",s.bg]),children:r?(0,i.jsx)(E.JO,{size:14,type:"16-lock"}):(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,i.jsx)("span",{className:(0,nZ.A)(r?"text-dark":s.text),children:t})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,i.jsx)("div",{className:"text-dark",children:o||(0,A.t)("leaderboard.level_n",{level:t})})}),(0,N.isNumber)(a)&&(0,i.jsx)(es.Z.LabelXs,{weight:"regular",children:(0,i.jsx)("div",{className:"text-default",children:(0,A.t)("leaderboard.n_points_required",{count:(0,rK.HA)(a)})})})]})]})},s2=function(){return(0,i.jsx)(i.Fragment,{children:Array.from(Array(9).keys()).map(function(e){return(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"bg-tertiary h-8 w-8 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"space-y-1 py-0.5",children:[(0,i.jsx)("div",{className:"bg-tertiary h-4 w-12 animate-pulse rounded"}),(0,i.jsx)("div",{className:"bg-tertiary h-3 w-20 animate-pulse rounded"})]})]},"loading-state-".concat(e))})})},s3=function(e){var t,r=e.isLoadingGamificationMember,n=e.currentLevel,o=(0,sY.c8)(),a=o.data,s=o.isLoading||!a||r||!n;return(0,i.jsx)("div",{className:"mt-6 grid grid-flow-col-dense grid-rows-5 gap-5 md:grid-rows-3",children:s?(0,i.jsx)(s2,{}):null==(t=a.levels)?void 0:t.map(function(e){return(0,i.jsx)(s1,{isLocked:e.level>n,level:e.level,levelName:e.name,pointsRequired:e.points_required},e.level)})})},s6=function(e){var t=e.level,r=e.levelName,n=e.pointsRequired,o=(0,s0.O)(t);return(0,i.jsx)("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:space-y-0",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,i.jsx)("div",{className:(0,nZ.A)(o.text),children:r||(0,A.t)("leaderboard.level_n",{level:t})})}),(0,N.isNumber)(n)&&(0,i.jsx)(es.Z.LabelXs,{weight:"regular",children:(0,i.jsx)("div",{className:"text-default",children:(0,A.t)("leaderboard.n_points_required",{count:(0,rK.HA)(n)})})})]})})},s4=function(){var e,t=(0,g.dd)(),r=(0,sY.c8)().data;return(0,i.jsxs)(nH.u_,{title:(0,A.t)("leaderboard.points_info.title"),isOpen:t.visible,onClose:t.hide,children:[(0,i.jsx)(nH.u_.Overlay,{}),(0,i.jsxs)(nH.u_.Content,{children:[(0,i.jsxs)(nH.u_.Header,{children:[(0,i.jsx)(nH.u_.Title,{size:"sm",children:(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",children:(0,A.t)("leaderboard.points_info.title")})}),(0,i.jsx)(nH.u_.HeaderActions,{children:(0,i.jsx)(nH.u_.CloseButton,{onClick:t.hide})})]}),(0,i.jsxs)(nH.u_.Body,{className:"pb-6 pt-4",children:[(0,i.jsxs)("div",{className:"mb-[18px] space-y-1",children:[(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,i.jsx)("span",{className:"text-darkest",children:(0,A.t)("leaderboard.points_info.like_to_point.title")})}),(0,i.jsx)(es.Z.BodyMd,{children:(0,i.jsx)("div",{className:"text-very-dark",children:(0,A.t)("leaderboard.points_info.like_to_point.description")})})]}),(0,i.jsxs)("div",{className:"mb-[18px] space-y-1",children:[(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,i.jsx)("span",{className:"text-darkest",children:(0,A.t)("leaderboard.points_info.rewards.title")})}),(0,i.jsx)(es.Z.BodyMd,{children:(0,i.jsx)("div",{className:"text-very-dark",children:(0,A.t)("leaderboard.points_info.rewards.description")})})]}),(0,i.jsxs)("div",{className:"mb-[27px] space-y-1",children:[(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:(0,i.jsx)("span",{className:"text-darkest",children:(0,A.t)("leaderboard.points_info.levels.title")})}),(0,i.jsx)(es.Z.BodyMd,{children:(0,i.jsx)("span",{className:"text-very-dark",children:(0,A.t)("leaderboard.points_info.levels.description")})})]}),(0,i.jsx)("div",{className:"grid grid-flow-col-dense grid-rows-3 gap-5",children:null==r||null==(e=r.levels)?void 0:e.map(function(e){var t=e.level,r=e.name,n=e.points_required;return(0,i.jsx)(s6,{level:t,levelName:r,pointsRequired:n},t)})})]})]})]})};s4.displayName="PointsInfoModalComponent";var s5=g.gk.create(function(){return(0,i.jsx)(s4,{})});s5.displayName="PointsInfoModal";var s8=function(){return(0,g.dd)(s5)},s9=r(54503),s7=r(31841),le=function(){var e=(0,I.wh)().currentCommunityMember,t=(null==e?void 0:e.id)?[e.id]:[],r=(0,s9.Y)({member_ids:t,enabled:!!(null==e?void 0:e.id)}),n=r.data,o=r.isLoading,a=null==n?void 0:n[0],s=s8(),l=(0,sK.Z)(),c=l.width,u=l.height,d=(0,s7._)("last-celebrated-level"),f=d.setValue,p=d.getValue,m=!o&&Number(null==a?void 0:a.current_level)>1&&Number(p())<Number(null==a?void 0:a.current_level);return(0,i.jsxs)("div",{className:"border-primary bg-primary rounded-2xl border p-6",children:[m&&(0,i.jsx)(sJ(),{width:c,height:u,style:{zIndex:999999},recycle:!1,tweenDuration:5e3,numberOfPieces:300,onConfettiComplete:function(){return f(null==a?void 0:a.current_level)}}),(0,i.jsx)("div",{className:"flex flex-col items-center justify-between md:flex-row",children:(0,i.jsxs)("div",{className:"grid w-full grid-flow-row-dense grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3",children:[(0,i.jsxs)("div",{className:"col-span-2 flex flex-col items-center space-x-3 space-y-4 md:flex-row md:space-y-0",children:[(0,i.jsx)(s$.i,{avatarUrl:null==e?void 0:e.avatar_url,name:(null==e?void 0:e.name)||"",progress:null==a?void 0:a.level_progress,level:null==a?void 0:a.current_level}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-dark text-center md:text-left",children:(0,i.jsx)(es.Z.LabelLg,{weight:"semibold",children:null==e?void 0:e.name})}),a&&!!(null==a?void 0:a.total_points)&&(0,i.jsx)(es.Z.LabelSm,{children:(0,i.jsx)("div",{className:"text-light text-center md:text-left",children:(0,A.t)("leaderboard.n_points",{count:a.total_points})})})]})]}),(0,i.jsx)("div",{className:"col-span-3 flex flex-col justify-center sm:col-span-2 md:col-span-1",children:(0,i.jsxs)("div",{className:"mt-4 min-w-[200px] pt-1 text-center md:mt-0 md:pl-4 md:pt-0 md:text-left",children:[o||!a?(0,i.jsx)("div",{className:"bg-tertiary h-6 w-32 animate-pulse rounded-full text-center text-transparent md:text-left"}):(0,i.jsx)(sX.U,{level:null==a?void 0:a.current_level,levelName:null==a?void 0:a.current_level_name}),a&&(0,i.jsx)("div",{children:(0,i.jsx)(ed.z,{type:"button",variant:"text",className:"md:flex",onClick:function(){return s.show()},children:(0,i.jsx)(es.Z.LabelXs,{weight:"regular",children:(0,i.jsxs)("div",{className:"text-light",children:[0===a.points_to_next_level?(0,A.t)("leaderboard.maxed_out"):(0,A.t)("leaderboard.n_points_to_level_up",{count:null==a?void 0:a.points_to_next_level}),(0,i.jsx)(E.JO,{type:"question-mark",className:"text-light ml-1 !w-3"})]})})})})]})})]})}),(0,i.jsx)(s3,{isLoadingGamificationMember:o,currentLevel:null==a?void 0:a.current_level})]})},lt=r(96533),lr={1:{light:"leaderboard-rank-1",dark:"leaderboard-rank-1-dark"},2:{light:"leaderboard-rank-2",dark:"leaderboard-rank-2-dark"},3:{light:"leaderboard-rank-3",dark:"leaderboard-rank-3-dark"}},ln=function(e,t){return e>=1&&e<=3?t?lr[e].dark:lr[e].light:null},li=function(e){var t=e.rank,r=ln(t,!!(0,y.TC)().isDarkAppearance);return r?(0,i.jsx)(E.JO,{className:"!w-8",size:32,type:r}):(0,i.jsx)("div",{className:"text-light text-center",children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:t})})},lo=r(60983),la=function(e){var t=e.data,r=e.shouldShowPlusIcon,n=void 0!==r&&r,o=(0,lt.r)();return 0===t.length?(0,i.jsx)("div",{className:"mt-32 flex flex-col items-center justify-center",children:(0,i.jsx)(es.Z.TitleLg,{color:"text-dark",weight:"font-bold",children:(0,A.t)("leaderboard.not_enough_activity.title")})}):(0,i.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:t.map(function(e,t){var r;return(0,i.jsxs)("div",{className:(0,nZ.A)("flex items-center p-4 md:px-6",{"border-primary border-t":0!==t}),children:[(0,i.jsx)("div",{className:"mr-4 w-8 shrink-0",children:(0,i.jsx)(li,{rank:t+1})}),(0,i.jsxs)("button",{type:"button",onClick:function(){var t;return t=e.public_uid,o.show({memberPublicId:t})},className:"flex min-w-0 flex-1 items-center",children:[(0,i.jsx)(lo.C,{publicUid:e.public_uid,communityMemberId:e.community_member_id,avatarURL:e.avatar_url,name:e.name,headline:e.headline,messagingEnabled:e.messaging_enabled,children:(0,i.jsx)("div",{className:"mr-3 shrink-0",children:(0,i.jsx)(e_.s,{src:e.avatar_url,name:null!=(r=e.name)?r:"",size:"10",isFullRounded:!0})})}),(0,i.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[(0,i.jsx)("div",{className:"inline-block w-full truncate text-left leading-4",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",truncate:!0,children:e.name})}),e.headline&&(0,i.jsx)("div",{className:"text-light inline-block w-full truncate text-left leading-4",children:(0,i.jsx)(es.Z.LabelSm,{color:"text-light",weight:"regular",truncate:!0,children:e.headline})})]})]}),(0,i.jsx)("div",{className:"ml-4 mr-1 shrink-0",children:(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,i.jsxs)("span",{className:"text-circle whitespace-nowrap",children:[n&&"+",e.total_points]})})})]},e.community_member_id)})})},ls=function(){return(0,i.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:Array(10).fill(0).map(function(e,t){return(0,i.jsxs)("div",{className:(0,nZ.A)("flex items-center space-x-6 p-4 px-6",{"border-primary border-t":0!==t}),children:[(0,i.jsx)("div",{className:"bg-tertiary h-8 w-8 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-1 items-start space-x-3",children:[(0,i.jsx)("div",{className:"bg-tertiary h-10 w-10 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,i.jsx)("div",{className:"bg-tertiary h-5 w-32 animate-pulse rounded"}),(0,i.jsx)("div",{className:"bg-tertiary w-18 h-3 animate-pulse rounded"})]})]}),(0,i.jsx)("div",{className:"bg-tertiary h-5 w-10 animate-pulse rounded"})]},e)})})},ll=function(e){var t=e.label,r=e.queryParams,n=(0,B.TH)().search===r;return(0,i.jsx)(er.OL,{to:"/leaderboard/".concat(r),className:(0,nZ.A)("bg-primary border-primary hover:bg-tertiary focus-visible:outline-secondary text-darkest max-w-[200px] shrink-0 truncate rounded-full border px-4 py-2 text-sm transition-colors duration-75 focus-visible:rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"border-secondary":n}),children:(0,i.jsx)(es.Z.LabelXs,{weight:"medium",children:t})})},lc=[{label:(0,A.t)("leaderboard.date_ranges.7_days"),queryParams:"?period=7_days"},{label:(0,A.t)("leaderboard.date_ranges.30_days"),queryParams:"?period=30_days"},{label:(0,A.t)("leaderboard.date_ranges.all_time"),queryParams:"?period=all_time"}],lu=function(){var e=(0,B.TH)(),t=(0,B.k6)();return lc.some(function(t){var r=t.queryParams;return e.search===r})||t.replace("/leaderboard/".concat(lc[0].queryParams)),(0,i.jsx)("div",{className:"flex flex-1 items-center space-x-2",children:lc.map(function(e){var t=e.label,r=e.queryParams;return(0,i.jsx)(ll,{label:t,queryParams:r},r)})})},ld=function(e){var t=e.period,r=void 0===t?"7_days":t;return(0,q.useQuery)(["leaderboard",r],function(){return(0,eZ.UT)(eu.av.gamification.leaderboard({params:{period:r}}))})},lf=function(){var e=new URLSearchParams((0,B.TH)().search).get("period"),t=s8(),r=ld({period:e}),n=r.isLoading,o=r.data;return(0,i.jsxs)("div",{className:"py-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-x-2",children:[(0,i.jsx)(lu,{}),(0,i.jsx)("button",{type:"button",className:"focus-visible:!outline-secondary hidden rounded-md sm:block md:mr-6",onClick:function(){return t.show()},children:(0,i.jsx)(es.Z.LabelXs,{weight:"medium",children:(0,i.jsx)("span",{className:"text-light hover:text-default",children:(0,A.t)("leaderboard.how_do_points_work")})})})]}),n?(0,i.jsx)(ls,{}):(0,i.jsx)(la,{shouldShowPlusIcon:"7_days"===e||"30_days"===e,data:o.top_members})]})},lp=r(78456),lm=r(22976),lb=function(){var e=(0,B.k6)(),t=(0,I.wh)().currentCommunityMember;if(!(0,lp.vb)(t))return null;var r=[{label:(0,A.t)("leaderboard.settings"),onClick:function(){return e.push("/settings/gamification")},value:"settings"}];return(0,i.jsx)(lm.S,{label:(0,A.t)("leaderboard.settings"),options:r,dataTestId:"leaderboard-settings"})},lh=r(12845),ly=function(){var e=(0,lh.d)().leaderboardLink,t=(null==e?void 0:e.label)||(0,A.t)("leaderboard.title");return(0,i.jsx)(so.Z,{leftContent:(0,i.jsx)(ss.y,{children:t}),rightContent:(0,i.jsx)(lb,{})})},lv=function(){var e=!!(0,I.wh)().currentUser;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ly,{}),(0,i.jsxs)("div",{className:(0,nZ.A)("mx-auto max-w-5xl p-4",{"md:p-9":e}),children:[e&&(0,i.jsx)(le,{}),(0,i.jsx)(lf,{})]})]})};let lg=r.p+"static/images/features/leaderboard/feature1-6e2e6b3fb2453100.png",l_=r.p+"static/images/features/leaderboard/feature2-0f2b793d9ac60ad6.png",lx=r.p+"static/images/features/leaderboard/feature3-250ae9dcc5167cff.png";var lj={purple:"bg-[#ECE2FF]",green:"bg-[#EBFAF5]",pink:"bg-[#FFF1F3]"},lw={purple:"text-[#AA91DD]",green:"text-[#B0EBD9]",pink:"text-[#FFC9D3]"},lO={purple:"bg-[#AA91DD]",green:"bg-[#B0EBD9]",pink:"bg-[#FFC9D3]"},lS=["feature_1","feature_2","feature_3","feature_4"],lk=function(e){var t=e.color,r=e.feature,n=e.icon,o=e.iconSize,a=e.featureCount,s="leaderboard.key_features.".concat(r);return(0,i.jsxs)("div",{className:(0,nZ.A)("col-span-6 h-[500px] rounded-[10px] p-12 xl:col-span-5 xl:pb-4",lj[t]),children:[(0,i.jsx)("div",{className:(0,nZ.A)("flex h-12 w-12 items-center justify-center rounded-full",lO[t]),children:(0,i.jsx)(E.JO,{type:n,size:void 0===o?20:o})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(es.Z.TitleLg,{color:"text-[#2B2E33]",children:(0,A.t)("".concat(s,".title"))})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(es.Z.BodyMd,{color:"text-[#2B2E33]",children:(0,A.t)("".concat(s,".description"))})}),(0,i.jsx)("div",{className:"mt-5 flex flex-col space-y-4",children:lS.slice(0,void 0===a?3:a).map(function(e){return(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"h-5 w-5",children:(0,i.jsx)(E.JO,{type:"20-checkmark-circle-fill-dark",size:20,className:lw[t]})}),(0,i.jsx)(es.Z.BodyMd,{color:"text-[#2B2E33]",children:(0,A.t)("".concat(s,".").concat(e))})]},e)})})]})},lP=function(e){var t=e.src;return(0,i.jsx)("div",{className:"col-span-6 flex justify-center overflow-hidden rounded-[10px] xl:col-span-7",children:(0,i.jsx)("img",{alt:"",loading:"lazy",src:t,className:"object-cover"})})},lC=function(){return(0,i.jsxs)("div",{className:"border-primary flex w-full flex-col items-center rounded-lg border p-14",children:[(0,i.jsx)(es.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,A.t)("leaderboard.landing_page_title")}),(0,i.jsx)("div",{className:"mt-2 text-center",children:(0,i.jsx)(es.Z.TitleSm,{color:"text-dark",children:(0,A.t)("leaderboard.description")})}),(0,i.jsx)(er.rU,{to:"/settings/gamification",children:(0,i.jsx)(ed.z,{large:!0,className:"mt-8",variant:"circle",children:(0,A.t)("leaderboard.activate")})})]})},lN=function(){return(0,i.jsxs)("div",{className:"flex w-full flex-col items-center text-center",children:[(0,i.jsx)(es.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,A.t)("leaderboard.landing_page_title")}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(es.Z.TitleSm,{color:"text-dark",children:(0,A.t)("leaderboard.description")})}),(0,i.jsx)(er.rU,{to:"/settings/gamification",children:(0,i.jsx)(ed.z,{large:!0,className:"mt-8",variant:"circle",children:(0,A.t)("leaderboard.activate")})})]})},lA=function(){return(0,i.jsxs)("div",{className:"bg-primary h-full",children:[(0,i.jsx)(so.Z,{leftContent:(0,i.jsx)(ss.y,{children:(0,A.t)("leaderboard.title")}),rightContent:(0,i.jsx)(er.rU,{to:"/settings/gamification",children:(0,i.jsx)(ed.z,{large:!0,variant:"circle",children:(0,A.t)("leaderboard.activate")})})}),(0,i.jsx)("main",{className:"mx-auto max-w-6xl",children:(0,i.jsxs)("div",{className:"flex h-full w-full flex-col space-y-16 p-14",children:[(0,i.jsx)(lN,{}),(0,i.jsxs)("div",{className:"grid grid-flow-row-dense grid-cols-6 gap-6 xl:auto-rows-fr xl:grid-cols-12",children:[(0,i.jsx)(lk,{color:"pink",icon:"leaderboard-progress",feature:"collect_points",featureCount:4,iconSize:24}),(0,i.jsx)(lP,{src:lg}),(0,i.jsx)(lk,{color:"green",icon:"leaderboard-activity",feature:"level_up"}),(0,i.jsx)(lP,{src:l_}),(0,i.jsx)(lk,{color:"purple",icon:"leaderboard-levelup",feature:"earn_rewards"}),(0,i.jsx)(lP,{src:lx})]}),(0,i.jsx)(lC,{})]})})]})},lI=function(){var e=(0,sY.c8)(),t=e.data;return e.isLoading?(0,i.jsx)(rE.w,{}):(0,i.jsx)(sa.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(null==t?void 0:t.enabled)?(0,i.jsx)(lv,{}):(0,i.jsx)(lA,{})})})},lE=r(85518),lT=r(87792),lL=r(55202),lD=r(88241),lM=r(90161),lR=r(9668),lB=r(63029),lF=r(25152),lz=r(40382),lU=r(23583),lZ=r(29379),lG=r(17e3),lq=r(34822),lV=r(62068),lH=r(48250),lW=r(61410),lQ=r(16882),lJ=r(27053),lK=function(){return(0,i.jsx)(nH.u_.Body,{className:"!px-0 !pt-0",children:(0,i.jsx)("div",{className:"px-5 pt-3 md:px-8",children:(0,i.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("div",{className:"bg-tertiary h-10 w-10 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,i.jsx)("div",{className:"bg-tertiary h-4 w-3/5 animate-pulse rounded-md"}),(0,i.jsx)("div",{className:"bg-tertiary h-4 w-2/5 animate-pulse rounded-md"})]})]}),(0,i.jsx)("div",{className:"bg-tertiary h-80 w-full animate-pulse rounded-md"})]})})})},l$=r(92640);function lX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lX(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l0=function(e){var t=e.initialFocus,r=lY((0,o.useState)(!0),2),n=r[0],i=r[1],a=(0,o.useRef)(null),s=lY((0,o.useState)(void 0===t||t),2),l=s[0],c=s[1],u=(0,o.useCallback)(function(){var e=a.current;e&&"focus"in e&&e.focus()},[a]),d=(0,o.useCallback)(function(){if(i(!0),c(!0),a.current)if((0,l$.p)(a.current))a.current.focus();else{var e,t;null==(t=a.current.commands)||null==(e=t.focus)||e.call(t,"end")}},[]);return(0,o.useEffect)(function(){l&&u()},[u,l]),{commentsFormRef:a,focusCommentsForm:u,showCommentsAndFocusOnForm:d,toggleComment:function(){c(!1),i(function(e){return!e})},shouldShowComments:n,shouldAutofocusReplyForm:l}};function l1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l2=function(e){var t,r=e.autofocusReplyForm,n=e.isRenderedOutsideTheSpace,a=e.onPostDestroy,s=e.shouldOpenCommentPage,l=e.isLoading,c=void 0!==l&&l,u=e.onScroll,d=(0,I.Zh)(),f=d.record,p=d.onPostChange,m=f.status,b=f.is_comments_enabled,h=f.event_setting_attributes,y=(0,lJ.m)().isPostBodyEmpty,v=(0,lU.N)().refetch,g=!!(null==f?void 0:f.cover_image_url),_=null==h?void 0:h.live_stream_room_setting_attributes,x=null==_?void 0:_.recording_url,j=null==_?void 0:_.recording_transcript_id,w=null==_?void 0:_.recording_thumbnail,O=null==_?void 0:_.auto_post_recording_enabled,S=(t=(0,o.useState)(!c),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l1(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=S[0],P=S[1],C=m===lF.Q_.PUBLISHED,N=(0,t1.HZ)(f)&&C&&!(0,lB.QP)(f)&&(0,lB.HV)(f);(0,o.useEffect)(function(){var e=null;return c?P(!1):e=setTimeout(function(){return P(!0)},50),function(){e&&clearTimeout(e)}},[c]);var A=l0({initialFocus:void 0===r||r}),E=A.commentsFormRef,T=A.showCommentsAndFocusOnForm,L=A.toggleComment,D=A.shouldShowComments,M=(0,o.useRef)(null);return c?(0,i.jsx)(lK,{}):(0,i.jsxs)(nH.u_.Body,{className:"!p-0",ref:M,onScroll:function(e){var t=e.currentTarget.scrollTop;null==u||u(t)},children:[(0,i.jsx)(lQ.Y,{post:f,shouldScrollIntoView:!0}),(0,i.jsxs)("div",{className:G()("flex flex-col gap-5","transition-opacity duration-300 ease-in-out",{"opacity-0":!k,"opacity-100":k}),children:[(0,i.jsx)(lH.H,{post:f,className:"md:!rounded-none"}),(0,i.jsxs)("div",{className:G()("px-5 md:px-8",{"pt-3":!g}),children:[(0,i.jsx)(lW.m,{post:f,onChange:p,refetchPosts:v,hideShareLink:!0,hideBookmarkButton:!0,hidePinnedToTopIcon:!0,onPostDestroy:a,hideAuthorHeadline:!1,tagsLimit:1,tagsShowMoreLabelVariant:"numbers",metaInfoWrapperClassName:"",isRenderedOutsideTheSpace:void 0!==n&&n}),(0,i.jsxs)("div",{className:G()("space-y-5",{"mt-5":y}),children:[(0,t1.HZ)(f)&&(0,i.jsx)(lR.Y,{onChange:function(e){null==p||p(e)},shouldDisplayRsvpAction:N}),x&&O&&(0,i.jsx)(lZ.T,{src:x,type:"video/mp4",mediaTranscriptId:j,poster:w}),(0,t1.Fr)(f)&&(0,i.jsx)(lz.l,{onPostChange:p,onPostDestroy:a}),(0,i.jsx)(lV.y,{}),(0,i.jsxs)("div",{children:[(0,i.jsx)(lq.S,{className:"!px-0",toggleComment:L,showCommentAndFocusCommentForm:T,shouldOpenCommentPage:void 0!==s&&s}),b&&D&&(0,i.jsx)(lG.o,{commentsFormRef:E,autofocusReplyForm:!1,scrollableTarget:M})]})]})]})]})]})},l3=r(86307),l6=r(56345),l4=r(42194),l5=r(84969),l8=r(59331),l9=function(e){var t,r=e.onChange,n=e.onPostDestroy,o=e.invalidateQueries,a=e.invalidateSpacePosts,s=(0,rJ.kK)(),l=(0,lJ.m)(),c=l.post,u=l.refetchPostDetails,d=(0,l3.Z)({post:c}).toggleSummary,f=(0,B.TH)(),p=(0,nH.UV)().contentPortalElement,m=(0,B.k6)(),b=null==f||null==(t=f.state)?void 0:t.prevLocation,h=c.slug,y=c.space_slug,v=(0,lU.N)().refetch;return s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el.T,{interactive:!1,content:(0,A.t)("post.post_modal.go_back"),children:(0,i.jsx)(nV.h,{name:"20-back",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,onClick:function(){b&&(m.push(b),null==o||o())},ariaLabel:(0,A.t)("post.post_modal.go_back")})}),(0,i.jsx)(nH.u_.HeaderActions,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[c.has_summary&&(0,i.jsx)(l8.k,{onClick:d,buttonSize:32}),(0,i.jsx)(l6.e,{bookmarkType:(0,t1.HZ)(c)?"event":"post",variant:"minimal-post-modal",record:c,onSuccess:function(){null==u||u(),a()}}),(0,i.jsx)(l4.p,{onChange:r,onPostDestroy:n,refetchPosts:v})]})})]}):(0,i.jsx)(nH.u_.HeaderActions,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(el.T,{interactive:!1,content:(0,A.t)("post.post_modal.share_post_button_tooltip"),children:(0,i.jsx)(l5.P,{onChange:function(){r(),a()},appendTo:null!=p?p:document.body,menuButtonEl:"div",button:(0,i.jsx)(nV.h,{name:"20-arrow-box-up",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,ariaLabel:(0,A.t)("post.post_modal.share_post_aria_label")}),shouldRenderCustomMenuButton:!0})}),c.has_summary&&(0,i.jsx)(l8.k,{onClick:d,buttonSize:32}),(0,i.jsx)(l6.e,{bookmarkType:(0,t1.HZ)(c)?"event":"post",variant:"minimal-post-modal",record:c,onSuccess:function(){null==u||u(),a()}}),(0,i.jsx)(l4.p,{onChange:r,onPostDestroy:n,refetchPosts:v}),(0,i.jsx)(el.T,{interactive:!1,content:(0,A.t)("post.post_modal.open_post_in_full_page_button_tooltip"),children:(0,i.jsx)(nV.h,{name:"20-arrow-expand",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,onClick:function(){m.push(eu.xu.show({slug:h,spaceSlug:y}),{isRedirectFromPostModal:!0})},ariaLabel:(0,A.t)("post.post_modal.open_post_in_full_page_aria_label")})}),(0,i.jsx)(el.T,{interactive:!1,content:(0,A.t)("post.post_modal.close_post_modal_tooltip"),children:(0,i.jsx)(nV.h,{name:"20-cross",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,onClick:function(){b&&(m.push(b),null==o||o())},ariaLabel:(0,A.t)("post.post_modal.close_button_aria_label")})})]})})},l7=function(){return(0,i.jsx)(nH.u_.Header,{className:"flex w-full items-center gap-4",children:(0,i.jsx)("div",{className:"bg-tertiary h-8 w-3/5 animate-pulse rounded-md"})})};function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ct=function(e){var t,r=e.onChange,n=e.spaceId,a=e.isLoading,s=void 0!==a&&a,l=e.invalidateQueries,c=e.onPostDestroy,u=e.compactMode,d=void 0!==u&&u,f=(0,q.useQueryClient)(),p=(0,lJ.m)().post.name,m=(0,rJ.kK)(),b=(t=(0,o.useState)(!s),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ce(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1];return((0,o.useEffect)(function(){var e=null;return s?y(!1):e=setTimeout(function(){return y(!0)},50),function(){e&&clearTimeout(e)}},[s]),s)?(0,i.jsx)(l7,{}):(0,i.jsxs)(nH.u_.Header,{className:G()("z-[1] flex w-full items-center gap-4","transition-opacity duration-300 ease-in-out","!px-4 !py-3 md:!px-8 md:!py-5",{"opacity-0":!h,"opacity-100":h,"!justify-end":!p,"md:shadow-md dark:md:border-solid":d}),children:[p&&!m&&(0,i.jsx)("div",{className:G()("overflow-anywhere min-w-0 flex-1",{"flex items-center":d}),children:(0,i.jsx)(es.Z.TitleMd,{truncate:d,children:p})}),(0,i.jsx)(l9,{onChange:r,onPostDestroy:c,invalidateQueries:l,invalidateSpacePosts:function(){f.invalidateQueries(["posts",n])}})]})},cr=r(46977),cn=r(52521);function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ci(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ca=function(e){var t,r=co((0,o.useState)("next"),2),n=r[0],i=r[1],a=co((0,o.useState)(!1),2),s=a[0],l=a[1],c=co((0,o.useState)(null!=(t=null==e?void 0:e.hasNextPage)&&t),2);return{direction:n,setDirection:i,isPostQueryEnabled:s,setIsPostQueryEnabled:l,hasNextPage:c[0],setHasNextPage:c[1]}},cs=r(62025),cl=function(e,t,r,n,i,a){var s,l=(0,cs.t)({memberPublicId:null==a?void 0:a.public_uid,enabled:e&&i,onSuccess:r}),c=l.posts,u=l.isLoading,d=l.fetchNextPage,f=(0,lU.N)(n,!e&&!t&&!i,r),p=f.posts,m=f.isLoading,b=f.fetchNextPage,h=(0,lL.N)("string"==typeof n?n:"",e&&t,r),y=h.posts,v=h.isLoading,g=h.fetchNextPage;(0,o.useEffect)(function(){e&&(t?g():i?d():b())},[e,t,g,b,d,i]);var _=[];return t?(_=y,s=v):i?(_=c,s=u):(_=p,s=m),{posts:_,isLoading:s}},cc=function(e){var t=e.currentPost,r=e.prevLocation,n=e.params,i=e.isNavigatingInsidePostModal,a=e.setIsNavigatingInsidePostModal,s=e.wasInFeed,l=e.isWithinProfileContext,c=e.profileContextMember,u=(0,cn.d)().navigateToPost,d=ca((0,B.TH)().state),f=d.direction,p=d.setDirection,m=d.isPostQueryEnabled,b=d.setIsPostQueryEnabled,h=d.hasNextPage,y=d.setHasNextPage,v=cl(m,void 0!==s&&s,(0,o.useCallback)(function(e){if(i){var o=e.pages[e.pages.length-1];if(o&&o.records.length>0){b(!1),y(o.has_next_page);var s=o.records.findIndex(function(e){return e.id===t.id}),d=-1!==s&&s<o.records.length-1?s+1:0;u({newPost:o.records[d],prevLocation:r,params:n,isWithinProfileContext:l,profileContextMember:c})}null==a||a(!1)}},[i,u,a,y,b,t,n,r,l,c]),n,l,c),g=v.isLoading,_=v.posts,x=(0,o.useCallback)(function(e){if(!g&&_&&t){null==a||a(!0),p(e);var i=_.findIndex(function(e){return e.id===t.id});if(-1!==i){var o="next"===e?i+1:i-1;if(o<0||o>=_.length)return void("next"===e?b(!0):null==a||a(!1));u({newPost:_[o],prevLocation:r,params:n,isWithinProfileContext:l,profileContextMember:c}),null==a||a(!1)}}},[g,_,t,p,u,b,r,n,a,l,c]),j=(0,o.useCallback)(function(e){g||i||x(e)},[x,g,i]),w=(0,o.useCallback)(function(){return!!_&&!!t&&0===_.findIndex(function(e){return e.id===t.id})},[_,t]),O=(0,o.useCallback)(function(){return!!_&&!!t&&_.findIndex(function(e){return e.id===t.id})===_.length-1&&!h},[_,t,h]);return(0,cr.y1)("right",function(){O()||j("next")},{enabled:!g&&!i},[j,g,i]),(0,cr.y1)("left",function(){w()||j("previous")},{enabled:!g&&!i},[j,g,i,w]),{isNavigatingToNextPost:"next"===f,isNavigatingToPreviousPost:"previous"===f,isLoading:g,setIsNavigatingInsidePostModal:a,isNavigatingInsidePostModal:i,shouldDisableLeftNavigation:g||i||w(),shouldDisableRightNavigation:g||i||O(),handleNextPost:function(){return O()?N.noop:j("next")},handlePreviousPost:function(){return w()?N.noop:j("previous")}}},cu=function(e){var t=e.onClick,r=void 0===t?N.noop:t,n=e.isDisabled,o=void 0!==n&&n,a=e.isLoading;return(0,i.jsx)("button",{type:"button",className:G()("fixed top-1/2 -translate-y-1/2","hidden","h-24 w-24","isolate z-10 items-center justify-center","transition-all duration-300 ease-in-out","md:flex","md:left-[calc(50%-400px-96px)]","lg:left-[calc(50%-400px-128px)]"),onClick:o?void 0:r,disabled:o,children:(0,i.jsx)("div",{className:G()("bg-primary hover:bg-tertiary text-default hover:text-dark","relative h-10 w-10","flex items-center justify-center rounded-full",{"cursor-not-allowed opacity-50":o}),children:(0,i.jsx)(E.JO,{size:20,type:void 0!==a&&a?"loader":"20-chevron-left"})})})},cd=function(e){var t=e.onClick,r=void 0===t?N.noop:t,n=e.isDisabled,o=void 0!==n&&n,a=e.isLoading;return(0,i.jsx)("button",{type:"button",className:G()("fixed top-1/2 -translate-y-1/2","h-24 w-24","hidden","isolate z-10 items-center justify-center","transition-all duration-300 ease-in-out","md:flex","md:right-[calc(50%-464px-32px)]","lg:right-[calc(50%-464px-64px)]"),onClick:o?void 0:r,disabled:o,children:(0,i.jsx)("div",{className:G()("bg-primary hover:bg-tertiary text-default hover:text-dark","relative h-10 w-10","flex items-center justify-center rounded-full",{"cursor-not-allowed opacity-50":o}),children:(0,i.jsx)(E.JO,{size:20,type:void 0!==a&&a?"loader":"20-chevron-right"})})})},cf=function(e){var t=cc(e),r=t.handleNextPost,n=t.handlePreviousPost,o=t.shouldDisableLeftNavigation,a=t.shouldDisableRightNavigation,s=t.isNavigatingToNextPost,l=t.isNavigatingToPreviousPost,c=e.isLoading,u=void 0!==c&&c;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(cu,{onClick:n,isDisabled:o,isLoading:u&&l}),(0,i.jsx)(cd,{onClick:r,isDisabled:a,isLoading:u&&s})]})};function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cp(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cb=function(){var e,t,r=cm((0,o.useState)(!1),2),n=r[0],a=r[1],s=cm((0,o.useState)(!1),2),l=s[0],c=s[1],u=(0,B.k6)(),d=(0,B.TH)(),f=(0,lM.v)(),p=f.isLoading,m=f.postResource,b=f.perPagePostIds,h=f.space,y=d.state,v=null!=y?y:{},g=v.prevLocation,_=v.postList,x=v.currentPage,j=v.params,w=v.isWithinProfileContext,O=v.profileContextMember,S=(null==g?void 0:g.pathname)==="/feed",k=p||n,P=(0,q.useQueryClient)(),C=S?[lL.Z]:["posts",null==h?void 0:h.id],A=(0,o.useCallback)(function(){P.invalidateQueries(C)},[P,C]),E=(0,o.useCallback)(function(){(0,N.defer)(A)},[A]),T=(0,o.useCallback)((0,N.throttle)(function(e){c(e>50)},500),[c]),L=(0,o.useCallback)(function(e){a(e),c(!1)},[a,c]);return(0,lT.$)({postId:null==(e=m.data)?void 0:e.id,spaceId:null==(t=m.data)?void 0:t.space_id}),(0,i.jsx)(I.mE,{spaceId:null==h?void 0:h.id,children:(0,i.jsx)(lD._x,{perPagePostIds:b,children:(0,i.jsx)(I.DW,{post:m.data,onPostChange:m.onPostChange,usedIn:"minimal-post-modal",children:(0,i.jsxs)(nH.u_,{isOpen:!0,onClose:function(){g&&(u.push(g),E())},contentPortalId:"post-modal-portal",children:[(0,i.jsx)(cf,{initialPostList:_,initialPage:void 0===x?1:x,currentPost:null==m?void 0:m.data,prevLocation:g,params:j,isNavigatingInsidePostModal:n,setIsNavigatingInsidePostModal:L,wasInFeed:S,isLoading:k,isWithinProfileContext:w,profileContextMember:O}),(0,i.jsx)(nH.u_.Overlay,{}),(0,i.jsxs)(nH.u_.Content,{size:"xl",className:G()("sm:!my-[5vh]",{"sm:!max-h-[85vh]":lE.isMobileSafari,"sm:!max-h-[90vh]":!lE.isMobileSafari}),children:[(0,i.jsx)(ct,{spaceId:null==h?void 0:h.id,onChange:null==m?void 0:m.onPostChange,isLoading:k,invalidateQueries:E,onPostDestroy:function(){g&&u.push(g)},compactMode:l}),(0,i.jsx)(l2,{isLoading:k,isRenderedOutsideTheSpace:S,onPostDestroy:function(){g&&u.push(g)},onScroll:T})]})]})})})})},ch=(0,rI.u)(function(){return Promise.all([r.e("3503"),r.e("8143")]).then(r.bind(r,24442))}),cy=function(){return(0,i.jsx)(sa.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(ch,{})})})},cv=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("6028"),r.e("516"),r.e("8404"),r.e("1686")]).then(r.bind(r,92733))}),cg=function(){return(0,i.jsx)(sa.W,{fullWidth:!0,noPadding:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cv,{})})})},c_=(0,rI.u)(function(){return r.e("1855").then(r.bind(r,24057))}),cx=function(){var e=(0,sW.h)().setDynamicLayoutProps;return(0,o.useEffect)(function(){e({fullWidth:!0,disableRightSidebar:!1})},[e]),(0,i.jsx)(sa.W,{fullWidth:!0,fullHeight:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(c_,{})})})},cj=(0,rI.u)(function(){return Promise.resolve().then(r.bind(r,55673))}),cw=function(){return(0,i.jsx)(sa.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cj,{})})})},cO=r(24184),cS=(0,rI.u)(function(){return Promise.resolve().then(r.bind(r,46401))}),ck=function(){var e=(0,cO.U)(),t=(0,I.nT)(),r=t.isLoading,n=t.helpers.findBy({slug:e}),a=(0,sW.h)().setDynamicLayoutProps;return((0,o.useEffect)(function(){a({disableRightSidebar:!1})},[a]),r)?null:(0,i.jsx)(I.mE,{spaceId:null==n?void 0:n.id,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cS,{})})})},cP=(0,rI.u)(function(){return r.e("8285").then(r.bind(r,83939))}),cC=function(){return(0,i.jsx)(ry.a.Body,{children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cP,{})})})},cN=r(60589),cA=(0,rI.u)(function(){return r.e("3350").then(r.bind(r,61220))}),cI=function(){var e=(0,cO.U)(),t=(0,sW.h)().setDynamicLayoutProps,r=(0,I.nT)().helpers.findBy({slug:e});return((0,o.useEffect)(function(){(0,cN.Ug)(r)&&t({disableScroll:!0})},[r,t]),(0,N.isEmpty)(r))?null:(0,i.jsx)(I.mE,{spaceId:null==r?void 0:r.id,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cA,{space:r})})})},cE=r(64529),cT=(0,rI.u)(function(){return r.e("2817").then(r.bind(r,30192))}),cL=function(){return(0,i.jsx)(sa.W,{fullWidth:!0,children:(0,i.jsx)(cE.F.Body,{hasPaddingTopMobile:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cT,{})})})})},cD=["/c/:spaceSlug","/c/:spaceSlug/invite","/c/:spaceSlug/members","/c/:spaceSlug/customize","/c/:spaceSlug/customize/*","/c/:spaceSlug/sections/*","/c/:spaceSlug/edit-lesson/*"],cM=function(){var e=(0,B.TH)(),t=(0,ro.O)().isSitePageRoute,r=e.state,n=(null!=r?r:{}).prevLocation,o=(0,sZ.t)().post_login_redirect;return(0,i.jsx)(B.AW,{path:"/",children:(0,i.jsxs)(sW.O,{disableRightSidebar:!0,children:[(0,i.jsxs)(B.rs,{location:n||e,children:[t&&(0,i.jsx)(B.AW,{component:sH,path:"/:pageSlug*"}),(0,i.jsx)(B.AW,{component:cx,path:"/feed",exact:!0}),(0,i.jsx)(B.l_,{from:"/home",to:o?"/feed?post_login_redirect=".concat(encodeURIComponent(o)):"/feed"}),(0,i.jsx)(a8.i,{component:cw,path:"/members"}),(0,i.jsx)(a8.i,{component:cg,path:"/events",exact:!0}),(0,i.jsx)(a8.i,{component:cy,path:"/courses",exact:!0}),(0,i.jsx)(a8.i,{component:sq,path:"/notifications",exact:!0}),(0,i.jsx)(a8.i,{component:lI,path:"/leaderboard",exact:!0}),(0,i.jsx)(a8.i,{component:cC,path:"/u/:publicUid"}),(0,i.jsx)(a8.i,{component:cL,path:"/s/:spaceGroupSlug"}),(0,i.jsx)(a8.i,{component:cI,path:cD,exact:!0}),(0,i.jsx)(a8.i,{component:ck,path:"/c/:spaceSlug/:postSlug"})]}),n&&(0,i.jsx)(a8.i,{component:cb,path:"/c/:spaceSlug/:postSlug"})]})})},cR=(0,rI.u)(function(){return Promise.all([r.e("6212"),r.e("1223"),r.e("6532"),r.e("7743"),r.e("140"),r.e("5805"),r.e("744")]).then(r.bind(r,76931))}),cB=function(){var e=(0,B.UO)().sqid;return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(rE.w,{}),children:(0,i.jsx)(cR,{sqid:e})})},cF=(0,eu.Iy)({sqid:":sqid"}),cz=[cF.index,cF.info,cF.access,cF.billing,cF.activityLogs],cU=function(){return(0,i.jsx)(a8.i,{component:cB,path:cz,exact:!0})},cZ=function(){var e=(0,B.UO)().leadPublicId;return(0,o.useEffect)(function(){var t="Accessing deprecated public_uid based admin lead edit page ".concat(e);(0,h.d)(t),console.warn(t),window.location.reload()},[e]),null},cG=(0,eu.NQ)({type:"CommunityLead",publicId:":leadPublicId"}),cq=[cG.index,cG.info,cG.access,cG.billing,cG.activityLogs],cV=function(){return(0,i.jsx)(a8.i,{component:cZ,path:cq,exact:!0})};function cH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var cW=function(){return(0,i.jsx)(a.D,{})},cQ=Object.values(rp.L.members),cJ=function(){var e,t=(0,B.TH)(),r=null==t||null==(e=t.state)?void 0:e.prevLocation,n=null!=r?r:t;return rs(),(0,i.jsx)(C.S,{renderFunc:cW,children:(0,i.jsxs)(B.rs,{location:n,children:[(0,i.jsx)(a8.i,{component:sg,path:"/live/:roomSlug/not_supported"}),(0,i.jsx)(a8.i,{component:sw,path:"/live/:roomSlug/record"}),(0,i.jsx)(a8.i,{component:sy,path:"/live/:roomSlug/mobile"}),(0,i.jsx)(B.AW,{component:sx,path:"/live/:roomSlug/public"}),(0,i.jsx)(a8.i,{component:sS,path:"/live/:roomSlug"}),(0,i.jsx)(B.AW,{component:sT,path:"/public/unsubscribe"}),(0,i.jsx)(B.AW,{component:sR,path:"/two_fa"}),(0,i.jsx)(B.AW,{component:sN,path:"/marketing_emails/unsubscribe"}),(0,i.jsx)(B.AW,{component:sP,path:"/marketing_emails/marketing_email_preference"}),(0,i.jsx)(a8.i,{component:sb,path:"/getting-started",exact:!0}),(0,i.jsx)(a8.i,{component:sI,path:["/messages/bot/:id","/messages/:uuid","/messages"]}),(0,i.jsx)(a8.i,{component:sD,path:"/threads"}),(0,i.jsx)(a8.i,{component:sc,path:"/bookmarks"}),(0,i.jsx)(a8.i,{component:sd,path:"/contacts/import"}),(0,i.jsx)(a8.i,{component:st,path:["/settings"].concat(function(e){if(Array.isArray(e))return cH(e)}(cQ)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(cQ)||function(e,t){if(e){if("string"==typeof e)return cH(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cH(e,t)}}(cQ)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),(0,i.jsx)(B.l_,{from:"/members/manage",to:{pathname:"/audience/manage",search:t.search}}),(0,i.jsx)(a8.i,{component:sn,path:"/account"}),(0,i.jsx)(a8.i,{component:sU,path:"/admin/members"}),(0,i.jsx)(a8.i,{component:cV,path:"/admin/contacts"}),(0,i.jsx)(a8.i,{component:cU,path:"/admin/audience"}),(0,i.jsx)(a8.i,{component:sp,path:"/discover",exact:!0}),(0,i.jsx)(cM,{})]})})},cK=r(38557),c$=function(){var e=(0,L.D)();return(0,i.jsx)(cK.H,{isLoadingAppData:e})},cX=r(64517),cY=r(16819),c0=r(63559),c1=r(89345),c2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(){return(0,eZ.gN)(eu.av.helpWidget.completeOnboarding())},onSuccess:t,onError:r})},c3=function(){try{var e,t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var r=document.createElement("div");t.appendChild(r);var n=t.offsetWidth-r.offsetWidth;return null==(e=t.parentNode)||e.removeChild(t),n+16}catch(e){return console.error("HelpWidget - Failed to compute inset with scrollbar:",e),16}},c6=r(53529);function c4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c5=function(e){var t,r=e.isOpen,n=e.onClick,a=(0,q.useQueryClient)(),s=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return c4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c4(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=(0,I.wh)().currentCommunityMember,d=(0,c6.TC)().isDarkAppearance,f=(0,q.useQuery)(["help-widget","conversations","unread-count"],function(){return(0,eZ.UT)(eu.av.helpWidget.unreadConversations())}).data,p=(null==f?void 0:f.unread_count)||0,m=l&&d?{className:"icon-hw-fab-hover-dark",href:"#icon-hw-fab-hover-dark"}:l&&!d?{className:"icon-hw-fab-hover",href:"#icon-hw-fab-hover"}:!l&&d?{className:"icon-hw-fab-default-dark",href:"#icon-hw-fab-default-dark"}:{className:"icon-hw-fab-default",href:"#icon-hw-fab-default"};return(0,eU.s)({channel:"HelpWidget::GeneralChannel",onMessageReceive:function(e){"reloadConversations"===e.event&&a.invalidateQueries({queryKey:["help-widget","conversations","unread-count"]})},community_member_id:null==u?void 0:u.id,canCreateConnection:!!(null==u?void 0:u.id)},[null==u?void 0:u.id]),(0,i.jsx)(H.T,{children:(0,i.jsxs)("div",{className:"relative",children:[p>0&&(0,i.jsx)("div",{className:"absolute right-0 top-[-4px] inline-flex h-4 w-4 flex-col items-center justify-center gap-2 rounded-lg bg-red-600 p-2 shadow-md outline outline-2 outline-white",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.10), 0 2px 4px -2px rgba(0, 0, 0, 0.10)"},children:(0,i.jsx)("div",{className:"justify-start font-['Inter'] text-xs font-semibold leading-none text-white",children:p})}),(0,i.jsxs)("button",{type:"submit",className:"float-right mb-px hidden h-11 items-center justify-center gap-2 self-end rounded-3xl px-4 py-3 lg:flex",style:d?{background:l?"#FCFAFF":"#2B2E33",color:l?"black !important":"white !important"}:{background:"white",backgroundImage:l?"linear-gradient(180deg, #506CF1 0%, #0F26A6 100%)":"none",border:"1px solid var(--Widget-border, rgba(228, 231, 235, 0.40))",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.10), 0 1px 2px -1px rgba(0, 0, 0, 0.10)",transition:"all 0.2s ease-in-out"},onClick:n,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},"aria-label":(0,A.t)("support_widget.floating_button_aria_label"),"aria-expanded":r,"aria-controls":"support-widget",children:[(0,i.jsx)("svg",{className:"icon ".concat(m.className," duration-400 transition-opacity ease-in-out"),"aria-hidden":"true",viewBox:"0 0 18 16",children:(0,i.jsx)("use",{xlinkHref:m.href})}),(0,i.jsx)("div",{className:"duration-400 transition-colors ease-in-out",children:(0,i.jsx)(es.Z.BodySm,{color:l?d?"text-black":"text-white":d?"text-white":"text-dark",weight:"font-semibold",children:(0,A.t)("help_widget.need_help_fab")})})]})]})})},c8=function(e){var t=e.onClick,r=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=r.current;if(e){var t=e.offsetHeight;e.style.setProperty("--arrow-top","".concat(t,"px"))}},[]),(0,i.jsxs)("div",{className:"relative z-10 mb-[13px]",children:[(0,i.jsxs)("div",{ref:r,className:"w-[320px] rounded-lg bg-[#191B1F] py-2 pl-4 pr-2 text-white dark:bg-[#F7F9FA]",children:[(0,i.jsx)("div",{className:"absolute right-2 top-2",children:(0,i.jsx)("button",{type:"button",className:"-mt-1",onClick:t,children:(0,i.jsx)(E.JO,{type:"hw-tooltip-close"})})}),(0,i.jsxs)(es.Z.BodySm,{color:"text-[#F7F9FA] dark:text-[#191B1F]",weight:"font-medium",children:[(0,A.t)("help_widget.onboarding_msg_line_1"),(0,i.jsx)("br",{}),(0,A.t)("help_widget.onboarding_msg_line_2")]})]}),(0,i.jsx)("div",{className:"absolute bottom-[-7px] right-[124px] h-[15px] w-[15px] rounded-full bg-[#191B1F] dark:bg-[#F7F9FA]"}),(0,i.jsx)("div",{className:"absolute bottom-[-15px] right-[116px] h-[10px] w-[10px] rounded-full bg-[#191B1F] dark:bg-[#F7F9FA]"})]})};function c9(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=e.conversationId;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.filename,i=e.signedId,o=e.url;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.Cu)(eu.av.helpWidget.createAttachment({conversationId:n}),{signed_id:i,filename:r,url:o,completed:!0})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){c9(o,n,i,a,s,"next",e)}function s(e){c9(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})};function ue(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.attachmentId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.pC)(eu.av.helpWidget.deleteAttachment({conversationId:r,attachmentId:n}))]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ue(o,n,i,a,s,"next",e)}function s(e){ue(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})},ur=function(e){var t=e.conversationId,r=e.all,n=void 0!==r&&r;return(0,q.useQuery)({queryKey:["attachments",t,n],queryFn:function(){return(0,eZ.UT)(eu.av.helpWidget.getAttachments({conversationId:t,params:n?{all:"true"}:{}}))},enabled:!!t})};function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ui(e){return function(e){if(Array.isArray(e))return un(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uo(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){if(e){if("string"==typeof e)return un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return un(e,t)}}var ua=function(e){var t,r=e.conversationId,n=(t=(0,o.useState)(function(){return[]}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||uo(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],a=n[1],s=(0,o.useRef)({}),l=ur({conversationId:r}).data,c=(0,o.useMemo)(function(){var e=((null==l?void 0:l.attachments)||[]).map(function(e){return{url:e.url,filename:e.filename,completed:e.completed,attachmentId:e.id,status:c0.L9}}),t=i.filter(function(t){return!e.some(function(e){return e.attachmentId===t.attachmentId})});return ui(e).concat(ui(t))},[i,null==l?void 0:l.attachments]),u=function(e,t){a(function(r){return r.map(function(r){return r.url===e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r,t):r})})},d=ut({onSuccess:function(){},onError:function(e){console.error("Failed to delete attachment:",e)}}).mutateAsync,f=(0,q.useQueryClient)(),p=c7({conversationId:r}).mutateAsync,m=function(e){var t=e.url,r=e.file,n=e.filename;u(t,{status:c0.si}),new e2.TX(r,(0,eu.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(r){s.current[t]&&e.abort(),u(t,{progress:r.loaded/r.total*100})})}}).create(function(e,r){if(e)throw u(t,{status:c0.sM}),Error(String(e));p({signedId:r.signed_id,filename:n,url:t}).then(function(e){var n=(0,eu.Gd)({signed_id:r.signed_id,filename:r.filename}),i=e.id;u(t,{status:c0.L9,attachmentId:i,blobUrl:n,completed:!0})}).catch(function(e){console.error(e)})})};return{uploadAttachments:function(e){var t=e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}});a(ui(i).concat(ui(t)));var r=!0,n=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;m({url:c.url,file:c.file,filename:c.filename})}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}},attachments:c,setAttachments:a,cancelAttachment:function(e){s.current[e]=!0;var t=c.find(function(t){return t.url===e});(null==t?void 0:t.attachmentId)&&d({conversationId:r,attachmentId:t.attachmentId}).then(function(){f.invalidateQueries(["attachments",r])}).catch(function(e){console.error("Failed to delete attachment from backend:",e)}),a(function(t){return t.filter(function(t){return t.url!==e})})}}};function us(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ul=function(e){var t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.event,i=e.messageId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.Cu)(eu.av.helpWidget.clickButton({conversationId:r,messageId:i}),{event:n})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){us(o,n,i,a,s,"next",e)}function s(e){us(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})};function uc(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uu=function(e){var t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.text,i=e.attachment_ids,o=void 0===i?[]:i;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.Cu)(eu.av.helpWidget.createChatMessage({id:r}),{text:n,attachment_ids:o})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uc(o,n,i,a,s,"next",e)}function s(e){uc(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:function(e){t(e.message)},onError:r})},ud=r(95533),uf=function(e){return(0,q.useQuery)(["help-widget","conversations",e],function(){return(0,eZ.UT)(eu.av.helpWidget.showConversation({id:e}))},{enabled:!!e})},up=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,um=function(e){try{return e.replace(up,function(e,t,r){return"".concat(t,'<a class="break-all" href=\'').concat(r,"' target='_blank' rel='noopener noreferrer'>").concat(r,"</a>")})}catch(t){return e}},ub=function(e){var t=e.label,r=e.onClick;return(0,i.jsx)("button",{type:"button",onClick:r,className:(0,nZ.A)("border-secondary flex h-8 items-center justify-center rounded-full bg-[#2B2E33] px-4 font-medium text-white transition-colors","hover:bg-[#363A40] focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2"),children:(0,i.jsx)(es.Z.LabelSm,{weight:"medium",color:"text-inverse",children:t})})},uh=function(){var e=(0,B.k6)();return(0,i.jsxs)("div",{className:"bg-primary flex flex-col items-center justify-center gap-4 py-8",children:[(0,i.jsx)(es.Z.LabelMd,{weight:"bold",color:"inverse",children:(0,A.t)("help_widget.conversation_page.conversation_closed_cta_title")}),(0,i.jsx)(ub,{label:(0,A.t)("help_widget.conversation_page.conversation_closed_cta_button_label"),onClick:function(){e.push("/")}})]})};function uy(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uv=function(e){var t=e.conversationId,r=(0,q.useMutation)({mutationFn:function(e){var t,r=e.id;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.Cu)(eu.av.helpWidget.leaveQueue({id:r}))]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uy(o,n,i,a,s,"next",e)}function s(e){uy(o,n,i,a,s,"throw",e)}a(void 0)})})()}}).mutate,n=(0,c1.tQ)(),o=n.setIsShowingLeaveWarning,a=n.toggleWidget,s=n.leaveWarningTrigger,l=(0,B.k6)();return(0,i.jsx)("div",{className:"flex h-full flex-1 flex-col items-center justify-center px-6 py-4",children:(0,i.jsxs)("div",{className:"max-w-sm text-center",children:[(0,i.jsxs)("div",{className:"mx-auto mb-5 flex flex-col gap-2 px-5",children:[(0,i.jsx)(es.Z.BodyLg,{weight:"semibold",color:"text-primary",size:"text-xl",children:(0,A.t)("help_widget.live_chat.leave_chat.confirmation_title")}),(0,i.jsx)(es.Z.BodyMd,{weight:"normal",color:"text-tertiary",children:(0,A.t)("help_widget.live_chat.leave_chat.confirmation_body")})]}),(0,i.jsxs)("div",{className:"mx-auto flex w-[140px] flex-col items-center gap-2",children:[(0,i.jsx)(ed.z,{variant:"circle",onClick:function(){o(!1)},className:"h-8 w-full px-4",children:(0,A.t)("help_widget.live_chat.leave_chat.keep_open_button")}),(0,i.jsx)(ed.z,{variant:"secondary",onClick:function(){r({id:t}),o(!1),"back_button"===s?l.push("/conversations"):a({shouldTriggerOnWidgetClose:!1})},className:"h-8 w-full px-4",children:(0,A.t)("help_widget.live_chat.leave_chat.leave_queue_button")})]})]})})},ug=function(){var e=(0,B.k6)();return(0,i.jsxs)("div",{className:"bg-primary flex flex-col items-center justify-center gap-4 py-8",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,i.jsx)(es.Z.LabelMd,{weight:"bold",color:"text-primary",children:(0,A.t)("help_widget.conversation_page.conversation_closed_cta_title")}),(0,i.jsx)(es.Z.LabelSm,{weight:"medium",color:"text-tertiary",children:(0,A.t)("help_widget.conversation_page.conversation_closed_cta_subtitle")})]}),(0,i.jsx)(ub,{label:(0,A.t)("help_widget.conversation_page.conversation_closed_cta_button_label"),onClick:function(){e.push("/")}})]})};let u_=r.p+"static/react/components/HelpWidget/assets/icons/support-user-1-edbf946d7bce56aa.png",ux=r.p+"static/react/components/HelpWidget/assets/icons/support-user-2-96fc825749f236fc.png",uj=r.p+"static/react/components/HelpWidget/assets/icons/support-user-3-95dc119fa6459031.png",uw=r.p+"static/react/components/HelpWidget/assets/icons/support-user-4-8370f5ecead37387.png",uO=r.p+"static/react/components/HelpWidget/assets/icons/support-user-5-bf9185ee2a5934c5.png",uS=r.p+"static/react/components/HelpWidget/assets/icons/support-user-6-6a75629bbacc2121.png";var uk=[u_,ux,uj,uw,uO,uS,r.p+"static/react/components/HelpWidget/assets/icons/support-user-7-ddc64acd7be3b0b7.png",r.p+"static/react/components/HelpWidget/assets/icons/support-user-8-d4207836c6dd3223.png"],uP=function(e){var t=e.queuePosition;return 0===t?(0,A.t)("help_widget.queue_banner.next_in_line"):1===t?(0,A.t)("help_widget.queue_banner.one_person_ahead"):(0,A.t)("help_widget.queue_banner.people_ahead",{count:t})},uC=function(e){var t=e.queuePosition;return uk.sort(function(){return Math.random()-.5}).slice(0,null!==t&&t<=1?1:2).map(function(e,t){return{id:t+1,name:"User ".concat(t+1),avatarUrl:e}})},uN=function(e){var t=e.queuePosition,r=uC({queuePosition:t}),n=uP({queuePosition:t});return(0,i.jsxs)("div",{className:"bg-primary border-primary mx-4 flex items-center gap-2 rounded-2xl border px-4 py-2",children:[(0,i.jsx)("div",{className:"flex -space-x-3",children:r.map(function(e){return(0,i.jsx)("div",{className:"rounded-full border-2 border-white",children:(0,i.jsx)(e_.s,{hasBorder:!0,isFullRounded:!0,src:e.avatarUrl,size:"6",name:e.name})},e.id)})}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:n}),(0,i.jsx)(es.Z.LabelXs,{color:"text-tertiary",children:(0,A.t)("help_widget.queue_banner.wait_message")})]}),(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(rY.a,{className:"!p-0"})})]})},uA=function(e){var t=e.message;return(0,i.jsxs)("div",{className:"mx-4 flex items-center",children:[(0,i.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"}),(0,i.jsx)("div",{className:"mx-5 grow-0 uppercase",children:(0,i.jsx)(es.Z.LabelXxs,{color:"text-disabled",weight:"bold",children:t.content})}),(0,i.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"})]})},uI=function(e){var t=e.url,r=e.filename;return(0,i.jsxs)("div",{className:"bg-primary border-primary flex items-center gap-2 break-all rounded-2xl border px-4 py-2",children:[(0,i.jsx)(E.JO,{type:"hw-paperclip",size:20,className:"text-tertiary"}),(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(es.Z.LabelXs,{weight:"medium",color:"text-darkest flex",children:(0,N.truncate)(r,{length:52})})})]})},uE=function(e){var t=e.attachments;return 0===t.length?null:(0,i.jsx)("div",{className:"flex flex-col gap-1",children:t.map(function(e){return(0,i.jsx)(uI,{url:e.url,filename:e.filename},e.id)})})};let uT=r.p+"static/react/components/HelpWidget/assets/icons/CircleAIBot-avatar-f8b8c704f699b7f1.png";var uL=function(){return(0,i.jsx)("div",{className:"flex h-[20px] w-[20px] shrink-0 justify-center overflow-hidden rounded-full",children:(0,i.jsx)("img",{src:uT,alt:(0,A.t)("help_widget.home_page.circle_ai_bot_alt"),className:"h-full w-full object-contain",loading:"eager"})})},uD=function(e){var t=e.label,r=e.sublabel,n=e.event,o=e.selected,a=e.setSelected,s=e.preferred,l=void 0!==s&&s,c=e.onClick,u=e.disabled,d=void 0!==u&&u;return(0,i.jsxs)("button",{disabled:d,type:"button",className:(0,nZ.A)("border-primary rounded-xl border px-4 py-2 text-sm font-medium",{"hover:border-secondary cursor-pointer":null===o&&!d,"border-secondary":o===n,"cursor-not-allowed":null!==o||d,"w-full":r,"border-none bg-[#2B2E33] text-white":l&&null===o}),onClick:function(){null===o&&(a(n),c())},children:[l&&(0,i.jsx)(E.JO,{type:"sw-thunder",size:16,className:"mr-2"}),(0,i.jsx)(ex.T1,{weight:"medium",color:"text-primary",children:t}),r&&(0,i.jsxs)(i.Fragment,{children:["  ",(0,i.jsx)(ex.T1,{weight:"medium",color:o!==n?"text-disabled":"text-primary",children:r})]})]})},uM=function(e){var t=e.src,r=e.name;return(0,i.jsx)("div",{className:"flex h-[20px] w-[20px] shrink-0 justify-center overflow-hidden rounded-full",children:(0,i.jsx)(e_.s,{src:t,size:"5",name:r,isFullRounded:!0})})};function uR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var uB=["a","br","em","i","li","ol","p","strong","ul","b"],uF=function(e){var t,r,n,a=e.type,s=e.authorAvatarUrl,l=e.authorName,c=e.content,u=e.createdAt,d=e.channel,f=e.buttons,p=e.selectedButton,m=e.attachments,b=void 0===m?[]:m,h=e.showDisclaimer,y=(t=(0,o.useState)(p),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return uR(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uR(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],_=(0,I.wh)().currentCommunityMember,x={business:{avatarUrl:null!=s?s:"",name:null!=l?l:""},bot:{avatarUrl:"",name:(0,A.t)("support_widget.chatbot.name")},user:{avatarUrl:null!=(r=null==_?void 0:_.avatar_url)?r:"",name:null!=(n=null==_?void 0:_.name)?n:""},system:{avatarUrl:"",name:"Agent"}},j=(0,eG.w)({dateTime:new Date(u),format:"short_time"}),w="live_chat"===d||"email"===d,O=f.map(function(e){var t,r,n=e.event;return(0,i.jsx)(uD,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={selected:v,setSelected:g},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),n)});return"user"===a?(0,i.jsxs)("div",{className:"message-content mx-4 flex flex-col items-end",children:[(null==c?void 0:c.trim())&&(0,i.jsxs)("div",{className:"bg-circle/10 flex w-fit flex-col gap-1 rounded-2xl rounded-br-[4px] px-4 py-3",children:[(0,i.jsx)(es.Z.BodySm,{weight:"font-medium",color:"text-gray-600 dark:text-gray-200",children:(0,i.jsx)(n3.w,{content:c,sanitizeProps:{ALLOWED_TAGS:uB,ADD_ATTR:["target"]}})}),w&&(0,i.jsx)(es.Z.BodyXs,{color:"text-disabled",children:j})]}),b.length>0&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(uE,{attachments:b})})]}):(0,i.jsx)("div",{className:"ml-4 flex flex-row items-start gap-3",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:["bot"===a?(0,i.jsx)(uL,{}):(0,i.jsx)(uM,{name:x[a].name,src:x[a].avatarUrl}),(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)(T.Di,{weight:"semibold",color:"text-dark",children:x[a].name}),void 0!==h&&h&&(0,i.jsx)(el.T,{maxWidth:250,className:"mt-[-4px]",content:(0,i.jsx)(n3.w,{content:(0,A.t)("support_widget.chatbot.disclaimer")}),children:(0,i.jsx)(E.JO,{type:"16-info",size:16})})]})]}),(0,i.jsxs)("div",{className:"message-content pr-6 pt-2",children:[(null==c?void 0:c.trim())&&(0,i.jsxs)("div",{className:"bg-secondary flex w-fit flex-col gap-1 rounded-2xl px-4 py-3",children:[(0,i.jsx)(es.Z.BodySm,{weight:"font-medium",color:"text-gray-600 dark:text-gray-200",children:(0,i.jsx)(n3.w,{content:c,sanitizeProps:{ALLOWED_TAGS:uB,ADD_ATTR:["target"]}})}),w&&(0,i.jsx)(es.Z.BodyXs,{color:"text-disabled",children:j})]}),b.length>0&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(uE,{attachments:b})}),O.length>0?(0,i.jsx)("div",{className:"mt-4 flex flex-row flex-wrap gap-2",children:O}):null]})]})})};function uz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var uZ=function(e){var t,r,n,a=e.onSubmit,s=e.placeholder,l=e.allowAttachments,c=void 0!==l&&l,u=e.uploadAttachments,d=e.attachments,f=void 0===d?[]:d,p=e.isSubmitDisabled,m=(t=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return uz(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uz(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],h=m[1],y=(0,c6.TC)().isDarkAppearance,v=f.every(function(e){return e.completed}),g=b.trim().length>0,_=!(void 0!==p&&p)&&(g||f.length>0&&v),x=function(){_&&(a(b.trim()),h(""))},j=(0,eL.uI)({onDrop:u,noClick:!0,disabled:!c}),w=j.getRootProps,O=j.getInputProps,S=j.inputRef;return(0,i.jsxs)("div",(r=uU({className:"bg-primary border-primary focus:border-secondary relative w-full rounded-xl border-2 px-4 py-3 shadow-sm hover:border-2 hover:border-[#AD89DC]"},w()),n=n={children:[(0,i.jsx)("input",uU({},O())),(0,i.jsx)(es.Z.BodySm,{as:"div",children:(0,i.jsx)("textarea",{value:b,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())},placeholder:void 0===s?"":s,className:"placeholder:text-default h-[78px] min-h-[60px] w-full resize-none border-none bg-transparent p-0 align-middle focus:outline-none focus:ring-0",rows:2})}),c&&(0,i.jsx)("button",{type:"button",onClick:function(e){var t;e.preventDefault(),null==(t=S.current)||t.click()},className:"absolute bottom-4 left-4 flex h-6 w-6 items-center justify-center",children:(0,i.jsx)(E.JO,{type:"hw-paperclip",size:20})}),(0,i.jsx)("button",{type:"button",onClick:x,disabled:!_,className:"absolute bottom-3 right-4 flex h-[28px] w-[28px] items-center justify-center",children:(0,i.jsx)(E.JO,{type:y?_?"hw-help-submit-enabled-dark-mode":"hw-help-submit-disabled-dark-mode":_?"sw-help-submit-enabled":"sw-help-submit-disabled",size:28,className:"!w-[28px]"})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))},uG=r(21530),uq=function(e){var t=e.rows,r=e.wrapperClassName,n=e.loaderClassName,o=void 0===n?"":n,a=e.width,s=void 0===a?"100%":a,l=e.height,c=void 0===l?"24px":l,u=Array.from({length:void 0===t?1:t},function(){return(0,uG.Z)()});return(0,i.jsx)("div",{className:(0,nZ.A)("animate-pulse space-y-2 px-6 last:pb-4",void 0===r?"":r),children:u.map(function(e){return(0,i.jsx)("div",{className:(0,nZ.A)("bg-secondary rounded-md",o),style:{width:s,height:c}},e)})})},uV=function(){return(0,i.jsx)("div",{className:"mx-4 flex flex-col justify-end",children:(0,i.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,i.jsx)(uL,{}),(0,i.jsx)("div",{className:"bg-secondary rounded-2xl px-4 py-3",children:(0,i.jsxs)("div",{className:"typing flex items-center gap-1",children:[(0,i.jsx)("span",{className:"inline-block h-1 w-1 rounded-full bg-gray-300"}),(0,i.jsx)("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-gray-300"}),(0,i.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-300"})]})})]})})},uH=r(71068),uW=function(e){var t=e.attachment,r=e.onCancel;return(0,i.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-between gap-2 break-all rounded-2xl border px-4 py-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[t.status===c0.si?(0,i.jsx)(uH.D,{percentage:t.progress||0,size:20,strokeWidth:2}):(0,i.jsx)(E.JO,{type:"hw-paperclip",size:20,className:"text-tertiary"}),t.status===c0.L9?(0,i.jsx)("a",{href:t.blobUrl,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(es.Z.LabelXs,{weight:"medium",color:"text-darkest flex",children:(0,N.truncate)(t.filename,{length:32})})}):(0,i.jsx)(es.Z.LabelXs,{weight:"medium",color:"text-darkest flex",children:(0,N.truncate)(t.filename,{length:34})})]}),(0,i.jsx)("div",{className:"flex items-center justify-between gap-2",children:t.status===c0.si?(0,i.jsxs)(es.Z.LabelXs,{weight:"semibold",color:"text-disabled",children:[Math.round(t.progress||0),"%"]}):(0,i.jsx)(E.JO,{type:"16-close",size:16,onClick:function(){r(t.url)},className:"text-dark cursor-pointer"})})]})};function uQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function uK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function u$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||uY(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uX(e){return function(e){if(Array.isArray(e))return uQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uY(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uY(e,t){if(e){if("string"==typeof e)return uQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uQ(e,t)}}var u0=function(e){var t,r=e.conversationId,n=(0,c1.tQ)(),a=n.isExpanded,s=n.isShowingLeaveWarning,l=uf(r),c=l.data,u=l.isLoading,d=u$((0,o.useState)(null),2),f=d[0],p=d[1],m=u$((0,o.useState)(null),2),b=m[0],h=m[1],y=u$((0,o.useState)([]),2),v=y[0],g=y[1],_=u$((0,o.useState)(!1),2),x=_[0],j=_[1],w=u$((0,o.useState)(!1),2),O=w[0],S=w[1],k=u$((0,o.useState)(null),2),P=k[0],C=k[1],N=(0,o.useRef)(null),I=(0,B.k6)(),T={markAsRead:(0,q.useMutation)({mutationFn:function(e){var t=e.conversationId;return(0,eZ.Cu)(ud.a.helpWidget.markAsRead({id:t}))}}).mutate}.markAsRead;(0,o.useEffect)(function(){c&&(p(c.status),h(c.channel||null),g(c.messages),j(c.is_bot_processing||!1),S(c.is_waiting_in_queue||!1),C(c.queue_position||null))},[c]),(0,o.useEffect)(function(){T({conversationId:r})},[]);var L=function(){var e;null==(e=N.current)||e.scrollIntoView()};(0,eU.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"newMessage"===e.event&&e.message?(g(function(t){return uX(t).concat([e.message])}),T({conversationId:r})):"redirectTo"===e.event&&e.url?I.push(e.url):"enterQueue"===e.event?L():"updateQueue"===e.event?C(e.position||0):"updateConversation"===e.event&&e.conversation&&(h(e.conversation.channel||null),p(e.conversation.status||null),j(e.conversation.is_bot_processing||!1),S(e.conversation.is_waiting_in_queue||!1),C(e.conversation.queue_position||null))},conversation_id:r,canCreateConnection:!!r},[r]);var D=(0,q.useQueryClient)(),M=ua({conversationId:r}),R=M.uploadAttachments,F=M.attachments,z=M.cancelAttachment,U=M.setAttachments;(0,o.useEffect)(function(){L()},[v,x,F]);var Z=uu({onSuccess:function(e){"circle_bot"===b&&j(!0),U([]),D.invalidateQueries(["attachments",r]),g(function(t){return uX(t).concat([e])})},onError:function(){}}).mutate,G=ul({onSuccess:function(){},onError:function(){}}).mutate,V=function(e,t){G({conversationId:r,event:t,messageId:e.id})};if(u)return(0,i.jsx)("div",{className:"flex h-full w-full flex-1 flex-col px-4",children:(0,i.jsx)(uq,{rows:4,height:"52px",wrapperClassName:"!px-0"})});if(s)return(0,i.jsx)(uv,{conversationId:r});var H=v[v.length-1],W=(null==H||null==(t=H.buttons)?void 0:t.length)>0;return(0,i.jsxs)("div",{className:(0,nZ.A)("flex flex-1 flex-col",{"w-[736px]":a,"w-[400px]":!a}),children:[(0,i.jsx)("div",{className:"mt-4 flex flex-1 flex-col justify-end gap-5",children:null==v?void 0:v.map(function(e){return(0,i.jsx)(o.Fragment,{children:"system"===e.author_type?(0,i.jsx)(uA,{message:e}):(0,i.jsx)(uF,{authorName:e.author_name,content:um(e.content),channel:e.channel,createdAt:e.created_at.toLocaleString(),type:"agent"===e.author_type?"business":e.author_type,buttons:e.buttons?e.buttons.map(function(t){return uK(uJ({},t),{onClick:function(){return V(e,t.event)},disabled:"closed"===f})}):[],selectedButton:e.selected_button,showDisclaimer:!1,attachments:e.attachments},e.id)},e.id)})}),(x||"live_chat"===b&&O)&&(0,i.jsxs)("div",{className:"mt-4 flex flex-col",children:[x&&(0,i.jsx)(uV,{}),"live_chat"===b&&O&&null!==P&&(0,i.jsx)(uN,{queuePosition:P})]}),"closed"!==f&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"my-4 flex flex-col gap-2 px-4",children:F.map(function(e){return(0,i.jsx)(uW,{attachment:uK(uJ({},e),{status:e.completed?c0.L9:c0.si}),onCancel:z},e.url)})}),(0,i.jsx)("div",{className:"bg-primary sticky bottom-0 z-10 mx-4 pb-4 pt-[2px]",children:(0,i.jsx)(uZ,{onSubmit:function(e){Z({conversationId:r,text:e,attachment_ids:F.map(function(e){return e.attachmentId})})},placeholder:(0,A.t)("help_widget.conversation_page.help_input_placeholder"),allowAttachments:"circle_bot"!==b,uploadAttachments:R,attachments:F,isSubmitDisabled:x||W})}),"circle_bot"===b&&(0,i.jsx)("div",{className:"sticky bottom-0 flex justify-center rounded-lg px-4 pb-4",children:(0,i.jsxs)(es.Z.BodySm,{color:"text-tertiary",children:[(0,A.t)("help_widget.conversation_page.footer_message"),(0,i.jsx)(el.T,{arrow:!1,theme:"help-widget-tooltip",content:(0,A.t)("help_widget.conversation_page.footer_message_tooltip"),children:(0,i.jsx)(E.JO,{type:"info",size:14})})]})})]}),"closed"===f&&("circle_bot"===b||"email"===b)&&(0,i.jsx)("div",{className:"bg-primary sticky bottom-0 z-10 rounded-b-2xl p-4",children:(0,i.jsx)(uh,{})}),"closed"===f&&"live_chat"===b&&(0,i.jsx)("div",{className:"bg-primary sticky bottom-0 z-10 rounded-b-2xl p-4",children:(0,i.jsx)(ug,{})}),(0,i.jsx)("div",{id:"messages-end",ref:N})]})},u1=function(e){var t=e.id;return(0,i.jsx)(u0,{conversationId:t})},u2=r(43544),u3=function(e){var t,r=e.activeItem,n=e.data,o=e.onItemClick,a=e.dataTestId,s=(null==(t=n.find(function(e){return e.value===r}))?void 0:t.text)||"";return(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(u2.Lt,{direction:"bottom-start",className:"w-full",buttonClassName:"w-full",menuItemsClassName:"!w-full min-w-40 !p-2",buttonDataTestId:a,button:(0,i.jsxs)(u2.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex w-full min-w-0 justify-between !gap-1 rounded-md border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,i.jsx)("div",{className:"flex min-w-0 flex-1 gap-x-2 overflow-hidden",children:(0,i.jsx)("div",{className:"min-w-0 truncate",children:(0,i.jsx)(es.Z.LabelSm,{weight:"medium",children:s})})}),(0,i.jsx)(E.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark shrink-0"})]}),children:n.map(function(e){var t=e.value,n=e.text;return(0,i.jsx)(u2.Lt.Item,{onClick:function(){return o(t)},children:(0,i.jsx)(u2.Lt.ItemLink,{type:"button",active:r===t,"aria-label":n,children:(0,i.jsx)("div",{className:"flex min-w-0 items-center gap-x-2",children:(0,i.jsx)("span",{className:"truncate text-sm",children:n})})})},t)})})})};function u6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u4=function(e){var t,r=e.onFiltersChange,n=(0,eb.Gc)().setValue,a=(t=(0,eb.qo)({name:["type","status"]}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u6(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u6(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1];return(0,o.useEffect)(function(){r({type:s,status:l})},[s,l,r]),(0,i.jsx)("div",{className:"w-full px-4 py-2",children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(u3,{activeItem:s||"all",data:c0.Nj,onItemClick:function(e){n("type",e)},dataTestId:"conversation-type-filter"})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(u3,{activeItem:l||"all",data:c0.DZ,onItemClick:function(e){n("status",e)},dataTestId:"conversation-status-filter"})})]})})},u5=r(8683);function u8(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var u9=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.conversationId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.pC)(eu.av.helpWidget.deleteConversation({conversationId:r}))]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){u8(o,n,i,a,s,"next",e)}function s(e){u8(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})},u7=function(e){var t=e.status;if("draft"===t)return(0,i.jsx)("div",{className:"flex h-6 items-center justify-center gap-2 rounded-[32px] px-2 py-[3px]",children:(0,i.jsx)(es.Z.LabelSm,{color:"text-tertiary",weight:"medium",children:(0,N.capitalize)(t)})});var r={closed:"text-tertiary",solved:"text-date-blue",open:"text-white"}[t];return(0,i.jsx)("div",{className:(0,nZ.A)("flex h-6 items-center justify-center gap-2 rounded-[32px] px-2 py-[3px]",{"bg-secondary":"closed"===t||"solved"===t,"bg-[#16A34A]":"open"===t}),children:(0,i.jsx)(es.Z.LabelXs,{color:r,weight:"medium",children:(0,N.capitalize)(t)})})},de=function(e){var t=e.count;return t>0?(0,i.jsx)("div",{className:"inline-flex min-h-4 min-w-4 rounded-full bg-[#2563EB] text-[#F7F9FA]",children:(0,i.jsx)("span",{className:"inline-block min-h-4 min-w-4 px-1.5 py-[1px] text-center text-[10px] font-semibold",children:t})}):null},dt=function(e){var t=e.conversation,r=(0,B.k6)(),n=(0,q.useQueryClient)(),o=String((0,B.UO)().id)===String(t.id),a=(0,c1.tQ)().isExpanded,s=t.conversation_updated_at?(0,u5.TF)(t.conversation_updated_at,{format:u5.lc.short}):"",l=u9({onSuccess:function(){n.invalidateQueries(["help-widget","conversations"])},onError:function(e){console.error("Error deleting conversation:",e)}}).mutate;return(0,i.jsx)("button",{className:(0,nZ.A)("hover:bg-secondary line-clamp-2 w-full rounded-lg p-2 text-left transition-colors duration-200",{"bg-tertiary":o}),onClick:function(){"email"===t.channel&&"draft"===t.status?r.push("/conversations/".concat(t.id,"/new_ticket")):r.push("/conversations/".concat(t.id))},type:"button",children:(0,i.jsxs)("div",{className:"flex flex-col py-[3px]",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(es.Z.LabelSm,{color:"text-darkest",weight:"medium",children:t.title}),(0,i.jsx)(de,{count:t.unread_messages_count})]}),(0,i.jsx)("div",{className:"flex items-center",children:!a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u7,{status:t.status}),"draft"===t.status&&(0,i.jsx)("button",{onClick:function(e){e.stopPropagation(),l({conversationId:t.id})},type:"button",className:"bg-primary border-primary flex h-6 w-6 items-center justify-center rounded-full border transition-colors",children:(0,i.jsx)(E.JO,{type:"16-trash-bin-2",size:16})})]})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,i.jsx)(es.Z.LabelSm,{color:"text-tertiary",weight:"medium",children:t.state_transition.join("  ")}),(0,i.jsx)("div",{className:"bg-tertiary h-1 w-1 rounded-full"}),(0,i.jsx)(es.Z.LabelSm,{color:"text-tertiary",weight:"medium",children:s})]})]})})},dr=function(e){var t=e.type,r=e.status;return(0,q.useQuery)(["help-widget","conversations",t,r],function(){return(0,eZ.UT)(eu.av.helpWidget.listConversations({conversationFilters:{channel_type:t,status:r}}))})};function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dn(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var da=function(){var e=(0,q.useQueryClient)(),t=di((0,o.useState)("all"),2),r=t[0],n=t[1],a=di((0,o.useState)("all"),2),s=a[0],l=a[1],c=(0,I.wh)().currentCommunityMember,u=dr({type:r,status:s}),d=u.isLoading,f=u.data,p=(null==f?void 0:f.conversations)||[];return(0,eU.s)({channel:"HelpWidget::GeneralChannel",onMessageReceive:function(t){"reloadConversations"===t.event&&e.invalidateQueries({queryKey:["help-widget","conversations"],exact:!1})},community_member_id:null==c?void 0:c.id,canCreateConnection:!!(null==c?void 0:c.id)},[null==c?void 0:c.id]),(0,i.jsxs)("div",{className:"scrollbar-hide flex h-full w-full flex-col overflow-auto",children:[(0,i.jsx)(ec.l,{preventAccidentalLeave:!0,id:"conversations-filter-form",mode:"onChange",onSubmit:function(){},defaultValues:{type:"all",status:"all"},children:(0,i.jsx)(u4,{onFiltersChange:function(e){n(e.type),l(e.status)}})}),d&&(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)(uq,{rows:4,height:"52px",wrapperClassName:"!px-0"})}),0===p.length&&!d&&(0,i.jsx)("div",{className:"flex flex-1 flex-col items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1 text-center text-sm",children:[(0,i.jsx)(E.JO,{type:"sw-conversations",size:20}),(0,i.jsx)(es.Z.BodySm,{weight:"font-medium",color:"text-primary",children:(0,A.t)("help_widget.conversation_list_page.no_conversations")})]})}),(0,i.jsx)("div",{className:"flex flex-col px-4",children:p.map(function(e,t){return(0,i.jsxs)("div",{children:[(0,i.jsx)(dt,{conversation:e}),t<p.length-1&&(0,i.jsx)("div",{className:"bg-secondary-dark h-px max-h-[1px]"})]},e.id)})})]})},ds=function(){return(0,q.useQuery)(["events"],function(){return(0,eZ.UT)(eu.av.supportWidget.listEvents())},{staleTime:c0.dV,retry:!1})},dl=function(e){var t=e.event,r=e.showArrowIcon,n=new Date(t.starts_at).toLocaleString("en-US",{month:"long",day:"numeric"}),o=new Date(t.starts_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,i.jsxs)("a",{className:"border-primary bg-primary hover:bg-secondary dark:border-tertiary hover:dark:bg-tertiary mb-2 block cursor-pointer rounded-lg border p-4 shadow-[0_1px_2px_0_rgba(0,0,0,0.05)]",href:t.post_url,target:"_blank",rel:"noopener noreferrer",children:[t.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:t.name,className:"mb-4 rounded",src:t.cover_image_url})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("span",{className:"text-darkest line-clamp-2 text-sm font-semibold",children:t.name}),(0,i.jsxs)("span",{className:"text-tertiary text-[11px] font-medium",children:[n," ",(0,A.t)("support_widget.at")," ",o]})]}),(void 0===r||r)&&(0,i.jsx)("div",{className:"text-darkest flex shrink-0 items-center self-center",children:(0,i.jsx)(E.JO,{type:"sw-right-arrow",size:16})})]})]})},dc=function(e){var t=e.onClick;return(0,i.jsx)("button",{type:"button",onClick:t,className:"text-darkest text-sm font-medium",children:(0,A.t)("help_widget.explore_page.see_more")})},du=function(){var e=ds(),t=e.isLoading,r=e.data,n=(0,B.k6)(),o=((null==r?void 0:r.records)||[]).slice(0,2);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"my-3",children:(0,i.jsx)(es.Z.BodySm,{weight:"medium",color:"text-tertiary",children:(0,A.t)("help_widget.explore_page.events")})}),(0,i.jsx)("div",{children:t?(0,i.jsx)(uq,{rows:2,height:"80px",wrapperClassName:"px-2",loaderClassName:"bg-primary"}):o.map(function(e){return(0,i.jsx)(dl,{event:e,showArrowIcon:!0},e.id)})}),(0,i.jsx)("div",{className:"pt-2",children:(0,i.jsx)(dc,{onClick:function(){return n.push("/events")}})})]})},dd=function(){return(0,q.useQuery)(["news"],function(){return(0,eZ.UT)(eu.av.supportWidget.listNews())},{staleTime:c0.dV,retry:!1})},df=function(e){var t=e.post;return(0,i.jsxs)(er.rU,{className:"border-primary bg-primary hover:bg-secondary dark:border-tertiary hover:dark:bg-tertiary mb-2 block cursor-pointer rounded-lg border p-4 shadow-[0_1px_2px_0_rgba(0,0,0,0.05)]",to:"/news/".concat(t.id),children:[t.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:t.name,className:"mb-4 rounded",src:t.cover_image_url})}),(0,i.jsxs)("div",{className:"text-dark mb-1",children:[(0,i.jsx)("div",{className:"news-title pb-3",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",children:t.name})}),(0,i.jsx)("div",{className:"news-excerpt",children:(0,i.jsx)(es.Z.BodySm,{children:(0,N.truncate)(t.body_plain_text,{length:200})})})]})]})},dp=function(){var e=dd(),t=e.isLoading,r=e.data,n=(0,B.k6)(),o=((null==r?void 0:r.records)||[]).slice(0,2);return(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("div",{className:"py-3",children:(0,i.jsx)(es.Z.BodySm,{weight:"medium",color:"text-tertiary",children:(0,A.t)("help_widget.explore_page.news")})}),(0,i.jsx)("div",{children:t?(0,i.jsx)(uq,{rows:2,height:"80px",wrapperClassName:"px-2",loaderClassName:"bg-primary"}):o.map(function(e){return(0,i.jsx)(df,{post:e},e.id)})}),(0,i.jsx)("div",{className:"pb-3 pt-2",children:(0,i.jsx)(dc,{onClick:function(){return n.push("/news")}})})]})};let dm=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-faces-bb8b7b2e002c25dc.png",db=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-star-one-a56939bb5aa1dd7d.png",dh=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-star-two-2e0160edafaa1d76.png",dy=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-typography-a1c4897e7db119f7.png";var dv=function(){return(0,i.jsx)("button",{type:"button",className:"w-full text-left",onClick:function(){window.open(c0.iX,"_blank")},children:(0,i.jsxs)("div",{className:"bg-primary border-primary relative h-[125px] rounded-lg border shadow-sm transition-shadow hover:shadow-md",children:[(0,i.jsxs)("div",{className:"ml-4 flex flex-col items-start pt-8",children:[(0,i.jsx)("img",{src:dm,alt:(0,A.t)("help_widget.explore_page.circle_academy"),className:"w-[112px] object-contain",loading:"eager"}),(0,i.jsx)("img",{src:dy,alt:(0,A.t)("help_widget.explore_page.circle_academy"),className:"ml-1 mt-2 w-[145px] object-contain dark:invert",loading:"eager"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{src:db,alt:"",className:"absolute right-[132px] top-7 h-6 w-6",loading:"eager","aria-hidden":"true"}),(0,i.jsx)("img",{src:dh,alt:"",className:"absolute bottom-5 right-16 h-8 w-8",loading:"eager","aria-hidden":"true"})]})]})})},dg=function(e){var t=e.text,r=e.onClick;return(0,i.jsxs)("button",{type:"button",onClick:r,className:"border-primary bg-primary hover:bg-secondary hover:dark:bg-tertiary text-darkest mb-2 flex h-11 w-[368px] items-center justify-between gap-2 rounded-lg border px-5 py-3 shadow-[0px_1px_2px_0px_#0000000D]",children:[(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:t}),(0,i.jsx)(E.JO,{type:"sw-right-arrow",size:16})]})},d_=function(){return(0,i.jsxs)("div",{className:"scrollbar-hide bg-secondary flex h-full w-[400px] flex-col overflow-auto",children:[(0,i.jsxs)("div",{className:"m-4 mb-2",children:[(0,i.jsx)(dv,{}),(0,i.jsx)(dp,{})]}),(0,i.jsx)("hr",{className:"border-primary"}),(0,i.jsx)("div",{className:"mx-5 mb-5 mt-2",children:(0,i.jsx)(du,{})}),(0,i.jsx)("hr",{className:"border-primary"}),(0,i.jsxs)("div",{className:"m-4",children:[(0,i.jsx)(dg,{text:(0,A.t)("help_widget.explore_page.circle_community"),onClick:function(){window.open(c0.Jv,"_blank")}}),(0,i.jsx)(dg,{text:(0,A.t)("help_widget.explore_page.circle_partners"),onClick:function(){window.open(c0.QT,"_blank")}})]})]})},dx=function(e){var t=e.post,r=t.id,n=t.name,o=(0,B.k6)();return(0,i.jsxs)("button",{type:"button",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out",onClick:function(){o.push(eu._N.showPost(r))},children:[(0,i.jsx)("span",{className:"text-dark text-left",children:(0,i.jsx)(es.Z.LabelSm,{weight:"medium",children:n})}),(0,i.jsx)("span",{className:"-mr-1 ml-2.5",children:(0,i.jsx)(E.JO,{type:"16-chevron-right",size:16,className:"text-dark"})})]})};function dj(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var dw=function(e){var t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.text;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.Cu)(eu.av.helpWidget.createChat(),{text:r})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){dj(o,n,i,a,s,"next",e)}function s(e){dj(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:function(e){t(e.conversation)},onError:r})},dO=function(e){var t,r,n=e.onClick,o=void 0===n?N.noop:n,a=e.className,s=e.label,l=e.type,c=e.dataTestId,u=e.disabled,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","className","label","type","dataTestId","disabled"]);return(0,i.jsx)("button",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,nZ.A)("w-full rounded-lg bg-[#506CF0] px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",a),onClick:o,type:void 0===l?"button":l,"data-testid":c,disabled:void 0!==u&&u},d),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},dS=function(e){var t=e.helpText,r=e.buttonText,n=(0,B.k6)(),o=dw({onSuccess:function(e){n.push("/conversations/".concat(e.id))},onError:function(e){console.error("Error creating chat",e)}}).mutate;return(0,i.jsx)("div",{className:"flex flex-col justify-center",children:(0,i.jsx)("div",{className:"mx-auto mt-auto w-full rounded-lg border p-5",style:{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.10), 0 4px 6px -4px rgba(0, 0, 0, 0.10)"},children:(0,i.jsxs)("div",{className:"bg-primary",children:[(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"dark:text-[#ABAFB2]",children:t})}),(0,i.jsx)("div",{className:"mt-3 flex justify-center",children:(0,i.jsx)(dO,{label:r,className:"dark:text-primary w-fit rounded-3xl bg-[#2B2E33]",onClick:function(){o({text:(0,A.t)("help_widget.chat_bot.templates.ask_question_initial_message")})}})})]})})})},dk=function(e){var t,r=e.searchText,n=e.spaceId,o=(0,tP.c)(r,500),a=(t=void 0===n?"":n,(0,q.useQuery)(["posts","list",t,o],function(){return V.R.listPosts({spaceId:t,searchText:o})},{retry:!1})),s=a.isLoading,l=a.data,c=(null==l?void 0:l.records)||[];return s?(0,i.jsx)(uq,{rows:5}):tz()(c)?(0,i.jsx)("div",{className:"mt-2 px-5",children:(0,i.jsx)(dS,{helpText:(0,A.t)("help_widget.no_articles_found"),buttonText:(0,A.t)("help_widget.still_need_help")})}):(0,i.jsx)("div",{className:"overflow-auto",children:(0,i.jsx)("div",{className:"mt-1.5 flex flex-col justify-center",children:c.map(function(e){return(0,i.jsx)(dx,{post:e},e.id)})})})},dP=function(e){var t=e.spaceGroup,r=(0,c1.tQ)().setCurrentSpaceProperties,n=(0,B.k6)(),o=(0,y.TC)().currentAppearance,a=function(e){var t,i;r({name:e.name,emoji:e.emoji,custom_emoji_url:null!=(t=e.custom_emoji_url)?t:"",custom_emoji_dark_url:null!=(i=e.custom_emoji_dark_url)?i:""}),n.push(eu._N.posts(e.id))};return(0,N.isEmpty)(t.spaces)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"px-6",children:(0,i.jsx)(es.Z.LabelXxs,{color:"text-light",children:t.name})}),(0,i.jsx)("div",{className:"flex flex-col",children:t.spaces.map(function(e){return(0,i.jsxs)("button",{type:"button",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out last:mb-4",onClick:function(){return a(e)},children:[(0,i.jsx)(es.Z.LabelSm,{weight:"medium",children:(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)(tB.S,{className:"!h-5 !w-auto",emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,appearance:o}),(0,i.jsx)("span",{className:"ml-2 break-all",children:e.name})]})}),(0,i.jsx)(E.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},e.id)})})]})},dC=function(){var e=(0,q.useQuery)(["space-groups"],function(){return V.R.spaceGroups()},{staleTime:c0.dV,retry:!1}),t=e.isLoading,r=e.data,n=(null==r?void 0:r.records)||[];return t?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(uq,{width:"50px"}),(0,i.jsx)(uq,{rows:5})]}):tz()(n)?(0,i.jsx)("div",{className:"px-6",children:(0,i.jsx)(es.Z.BodyMd,{children:(0,A.t)("support_widget.no_spaces_found")})}):(0,i.jsx)("div",{className:"mb-4 overflow-auto",children:(0,i.jsx)("div",{className:"mt-1.5",children:n.map(function(e){return(0,i.jsx)(dP,{spaceGroup:e},e.id)})})})},dN=function(e){var t=e.searchText,r=e.setSearchText,n=e.initialFocus,a=void 0===n||n,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["searchText","setSearchText","initialFocus"]),l=(0,o.useRef)(null),c=(0,B.TH)();return(0,o.useEffect)(function(){if(a){var e;null==(e=l.current)||e.focus()}},[a,c]),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"text-dark pointer-events-none absolute left-0 top-[11px] flex items-center pl-3",children:(0,i.jsx)(E.JO,{type:"16-search",size:20})}),(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:l,type:"text",defaultValue:t,className:"bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-3xl border border-[rgba(228,231,235,1)] pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,A.t)("support_widget.placeholder_text"),onChange:function(e){r(e.target.value)}},s))]})};function dA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dI=function(){var e,t=(e=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return dA(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dA(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],a=(0,B.UO)().spaceId,s=r||a;return(0,i.jsxs)("div",{className:"scrollbar-hide h-full w-[400px] overflow-auto",children:[(0,i.jsx)("div",{className:"px-5 pb-2 pt-5",children:(0,i.jsx)(dN,{searchText:r,setSearchText:n})}),s?(0,i.jsx)(dk,{spaceId:a,searchText:r}):(0,i.jsx)(dC,{})]})},dE=r(19408);let dT=r.p+"static/react/components/HelpWidget/assets/icons/ai-icon-f03b3dfd1433d906.png";var dL=function(e){var t=e.iconName,r=e.text,n=e.onClick;return(0,i.jsxs)("button",{type:"button",onClick:n,className:"focus:ring-secondary-200 hover:bg-secondary border-primary bg-primary text-dark flex h-[44px] items-center gap-2 rounded-xl border px-4 py-3 shadow-sm focus:outline-none focus:ring-2",children:[(0,i.jsx)(E.JO,{type:t,className:"text-grey-900 dark:text-grey-50",size:20}),(0,i.jsx)(es.Z.BodySm,{color:"text-secondary",weight:"font-medium",children:r})]})},dD=function(){var e=(0,I.wh)().currentCommunityMember,t=(0,B.k6)(),r=dw({onSuccess:function(e){t.push("/conversations/".concat(e.id))},onError:function(e){console.error("Error creating chat",e)}}).mutate,n=function(e){"chat"===e?r({text:(0,A.t)("help_widget.chat_bot.templates.ask_question_initial_message")}):"feedback"===e?r({text:(0,A.t)("help_widget.action_buttons.give_feedback_initial_message")}):"report_bug"===e&&r({text:(0,A.t)("help_widget.action_buttons.report_bug_initial_message")})};return(0,i.jsx)("div",{className:"flex h-full min-h-[582px] flex-col items-center justify-end pb-px",children:(0,i.jsxs)("div",{className:"flex w-[400px] flex-col items-center px-4",children:[(0,i.jsxs)("div",{className:"relative flex h-16 justify-center",children:[(0,i.jsx)("div",{className:"absolute left-[calc(50%-56px)] top-1/2 z-0 flex h-10 w-10 -translate-y-1/2 items-center justify-center",children:(0,i.jsx)("img",{src:dT,alt:(0,A.t)("help_widget.home_page.ai_icon_alt"),className:"h-full w-full object-contain",loading:"eager"})}),(0,i.jsx)("div",{className:"z-10 flex h-16 w-16 items-center justify-center",children:(0,i.jsx)("img",{src:uT,alt:(0,A.t)("help_widget.home_page.circle_ai_bot_alt"),className:"h-full w-full object-contain",loading:"eager"})}),(0,i.jsx)("div",{className:"absolute right-[calc(50%-56px)] top-1/2 z-0 flex h-10 w-10 -translate-y-1/2 items-center justify-center",children:e&&(0,i.jsx)(e_.s,{src:e.avatar_url,name:e.name,size:"10"})})]}),(0,i.jsx)("div",{className:"mt-4 flex items-center gap-2 text-center",children:(0,i.jsx)(dE.u,{as:"span",color:"text-gray-900 dark:text-gray-50",weight:"font-semibold",size:"text-2xl",leading:"leading-[32px]",tracking:"tracking-[0]",textAlign:"",children:(0,A.t)("help_widget.home_page.greeting",{first_name:(null==e?void 0:e.first_name)||(0,A.t)("help_widget.home_page.default_greeting_name")})})}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)(es.Z.LabelSm,{color:"text-default dark:text-feature-light",weight:"medium",children:(0,A.t)("help_widget.home_page.help_text")})}),(0,i.jsxs)("div",{className:"mt-6 flex w-full flex-col items-center gap-2",children:[(0,i.jsxs)("div",{className:"flex w-full justify-center gap-2",children:[(0,i.jsx)(dL,{iconName:"sw-question",text:(0,A.t)("help_widget.home_page.ask_question"),onClick:function(){return n("chat")}}),(0,i.jsx)(dL,{iconName:"sw-report-bug",text:(0,A.t)("help_widget.home_page.report_bug"),onClick:function(){return n("report_bug")}})]}),(0,i.jsx)(dL,{iconName:"sw-feedback",text:(0,A.t)("help_widget.home_page.give_feedback"),onClick:function(){return n("feedback")}})]}),(0,i.jsx)("div",{className:"mt-[68px] w-full",children:(0,i.jsx)(uZ,{onSubmit:function(e){r({text:e})},placeholder:(0,A.t)("help_widget.home_page.help_input_placeholder"),allowAttachments:!1})})]})})},dM=function(e){var t=e.question,r=e.answer;return(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsx)(es.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:t}),(0,i.jsx)(es.Z.BodySm,{color:"text-tertiary",children:r})]})},dR=function(){var e,t,r,n=(0,c1.tQ)().isExpanded,o=(0,B.UO)().id,a=uf(o),s=a.data,l=a.isLoading,c=a.isError,u=ur({conversationId:o,all:!0}).data,d=(null==u?void 0:u.attachments)||[];if(c)return(0,i.jsx)("div",{children:(0,A.t)("help_widget.send_message_form.something_went_wrong")});var f=(null==(e=c0.a$.find(function(e){var t;return e.value===(null==s||null==(t=s.data)?void 0:t.priority)}))?void 0:e.text)||c0.a$["0"].text;return l?(0,i.jsx)("div",{className:"flex h-full w-full flex-1 flex-col p-4",children:(0,i.jsx)(uq,{rows:4,height:"52px",wrapperClassName:"!px-0"})}):(0,i.jsx)("div",{className:(0,nZ.A)("relative flex-1 overflow-hidden",{"w-[736px]":n,"w-[400px]":!n}),children:(0,i.jsxs)("div",{className:"scrollbar-hide absolute inset-0 overflow-y-auto p-4",children:[(0,i.jsxs)("div",{className:"my-6 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-green-500",children:(0,i.jsx)(E.JO,{type:"36-check",size:36,className:"text-white"})}),(0,i.jsx)("div",{className:"mt-2 text-center",children:(0,i.jsx)(es.Z.TitleMd,{weight:"bold",children:(0,A.t)("help_widget.send_message_form.message_sent_successfully")})}),(0,i.jsx)("div",{className:"mt-2 text-center",children:(0,i.jsx)(es.Z.BodySm,{color:"text-tertiary",children:(0,A.t)("help_widget.send_message_form.notify_message")})})]}),(0,i.jsx)(dM,{question:(0,A.t)("help_widget.send_message_form.type"),answer:(null==s||null==(t=s.data)?void 0:t.type)||""}),(0,i.jsx)(dM,{question:(0,A.t)("help_widget.send_message_form.priority"),answer:f}),(0,i.jsx)(dM,{question:(0,A.t)("help_widget.send_message_form.text"),answer:(null==s||null==(r=s.data)?void 0:r.text)||""}),d.length>0&&(0,i.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:d.map(function(e){return(0,i.jsx)(uI,{url:e.url,filename:e.filename},e.id)})})]})})},dB=function(e){var t=e.children,r=(0,c1.tQ)(),n=r.isExpanded,o=r.isSidebarOpen;return(0,i.jsx)("div",{className:"scrollbar-hide flex h-full flex-col overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex h-full w-full",children:[n&&(0,i.jsx)("div",{className:(0,nZ.A)("border-r transition-all duration-300 ease-in-out",{"w-[312px]":o,"w-0 opacity-0":!o}),children:(0,i.jsx)("div",{className:"h-full overflow-y-auto",children:(0,i.jsx)(da,{})})}),(0,i.jsx)("div",{className:(0,nZ.A)("flex-1",{"w-[736px]":n,"w-[400px]":!n}),children:(0,i.jsx)("div",{className:"scrollbar-hide flex h-full flex-col items-end overflow-y-auto",children:t})})]})})};function dF(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var dz=function(e){var t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t,r=e.id,n=e.conversation,i=e.attachment_ids;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,eZ.Cu)(eu.av.helpWidget.submitConversation({id:r}),{id:r,conversation:n,submit_page_url:window.location.href,viewport_height:String(window.innerHeight||document.documentElement.clientHeight),viewport_width:String(window.innerWidth||document.documentElement.clientWidth),attachment_ids:i})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){dF(o,n,i,a,s,"next",e)}function s(e){dF(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:function(e){return t(e.ticket)},onError:r})},dU=function(e){var t=e.onSuccess,r=e.onError;return(0,q.useMutation)({mutationFn:function(e){var t=e.id,r=e.conversation;return(0,eZ.gN)(eu.av.helpWidget.updateConversation({id:t,conversation:r}))},onSuccess:t,onError:r})},dZ=tv.Ry({text:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.text")),type:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.type")),priority:tv.Z_().required(A.Z.t("support_widget.send_message_form.error.priority"))});tv.Ry({comment:tv.Z_().required("This field is required")});var dG=function(e){return(0,i.jsx)(ec.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hideDescription:!0,hideBorder:!0,fullWidth:!0,translationRoot:"help_widget.send_message_form"},e))};function dq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function dH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function dW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||dJ(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dQ(e){return function(e){if(Array.isArray(e))return dq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dJ(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dJ(e,t){if(e){if("string"==typeof e)return dq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dq(e,t)}}var dK=function(e){var t=e.isLoading,r=e.uploadAttachments,n=e.attachments,a=e.cancelAttachment,s=e.onFormChange,l=(0,eb.Gc)().formState,c=dW((0,eb.qo)({name:["text","type","priority"]}),3),u=c[0],d=c[1],f=c[2],p=!!l.errors.type,m=!!l.errors.priority,b=u&&d&&f,h=(0,tP.c)(u,2e3),y=dW((0,o.useState)(dQ(c0.Mj)),2),v=y[0],g=y[1],_=dW((0,o.useState)(dQ(c0.a$)),2),x=_[0],j=_[1],w=n.every(function(e){return e.completed}),O=l.isSubmitted&&(!b||!w),S=(0,eL.uI)({onDrop:r,noClick:!0}),k=S.getRootProps,P=S.getInputProps,C=S.inputRef;return(0,o.useEffect)(function(){(h||d||f)&&s({text:u,type:d,priority:f})},[h,d,f]),(0,o.useEffect)(function(){var e=document.getElementById("send-message-form-container");null==e||e.scrollIntoView()},[]),(0,i.jsxs)("div",{className:"flex max-h-full flex-col px-6",children:[(0,i.jsx)(dG,{name:"type",hideError:!0,children:(0,i.jsx)(ec.l.Select,{name:"type",data:v,onSearch:function(e){""===e?g(dQ(c0.Mj)):g(c0.Mj.filter(function(t){return t.value.toLowerCase().includes(e.toLowerCase())}))},inputContainerClassName:p?"form-error":""})}),(0,i.jsx)(dG,{name:"priority",className:"!pt-2",hideError:!0,children:(0,i.jsx)(ec.l.Select,{name:"priority",inputContainerClassName:(0,nZ.A)("priority-select-input-container",m?"form-error":""),data:x,onSearch:function(e){""===e?j(dQ(c0.a$)):j(c0.a$.filter(function(t){return t.text.toLowerCase().includes(e.toLowerCase())}))}})}),(0,i.jsx)(dG,{className:"!pt-2",name:"text",hideError:!0,children:(0,i.jsx)(ec.l.Input,{name:"text",variant:"textarea",rows:12})}),(0,i.jsx)("div",{children:(0,i.jsx)(es.Z.BodyXs,{color:"text-tertiary",weight:"regular",children:(0,A.t)("help_widget.report_bug.what_did_you_find")})}),n.length>0&&(0,i.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:n.map(function(e){return(0,i.jsx)(uW,{attachment:dH(dV({},e),{status:e.completed?c0.L9:c0.si}),onCancel:a},e.url)})}),(0,i.jsxs)("div",dH(dV({className:"my-4 flex justify-between"},k()),{children:[(0,i.jsx)("input",dV({},P())),(0,i.jsx)(el.T,{placement:"right",content:(0,A.t)("tiptap.attach_file"),className:"text-dark visited:text-dark hover:bg-tertiary hover:text-dark focus:bg-tertiary flex w-10 items-center justify-center rounded-lg text-center",children:(0,i.jsx)("button",{type:"button","aria-label":(0,A.t)("tiptap.attach_file"),onClick:function(e){var t;e.preventDefault(),null==(t=C.current)||t.click()},className:"p-2",children:(0,i.jsx)(E.JO,{type:"hw-paperclip",size:20})})}),(0,i.jsxs)("div",{className:"flex flex-row items-center text-right",children:[O&&(0,i.jsx)("div",{className:"max-w-[200px] px-4 text-right",children:(0,i.jsx)(es.Z.BodyXs,{color:"text-v2-danger",weight:"regular",leading:"leading-[18px]",children:(0,A.t)("help_widget.report_bug.validation_error")})}),(0,i.jsxs)(ed.z,{variant:"circle",disabled:t||O||!w,type:"submit",children:[t&&(0,i.jsx)(E.JO,{type:"loader",size:16}),(0,A.t)("support_widget.send_message_form.button_label")]})]})]}))]})},d$=function(){var e=(0,c1.tQ)().isExpanded,t=(0,B.UO)().id,r=(0,tr.pm)(),n=(0,B.k6)(),o=(0,q.useQueryClient)(),a=ua({conversationId:t}),s=a.uploadAttachments,l=a.attachments,c=a.cancelAttachment,u=dz({onSuccess:function(){n.push("/message_confirmation/".concat(t))},onError:function(){r.error((0,A.t)("request_failure_message"))}}),d=u.mutate,f=u.isLoading,p=uf(t),m=p.data,b=p.isLoading,h=dU({onSuccess:function(){o.invalidateQueries(["help-widget","conversations",t])},onError:function(){r.error((0,A.t)("request_failure_message"))}}).mutate,y=function(e,r,n){h({id:t,conversation:{title:(0,A.t)("help_widget.report_bug.title"),data:{type:e,text:r,priority:n},status:"draft"}})};if(b)return(0,i.jsx)("div",{className:"flex h-full w-full flex-1 flex-col p-4",children:(0,i.jsx)(uq,{rows:4,height:"52px",wrapperClassName:"!px-0"})});var v=(null==m?void 0:m.data)||{},g=v.text,_=v.type,x=v.priority;return(0,i.jsx)("div",{id:"send-message-form-container",className:(0,nZ.A)("relative flex-1 overflow-hidden",{"w-[736px]":e,"w-[400px]":!e}),children:(0,i.jsx)("div",{className:"scrollbar-hide absolute inset-0 overflow-y-auto",children:(0,i.jsx)(ec.l,{preventAccidentalLeave:!0,validationSchema:dZ,id:"send-message-form",onSubmit:function(e){d({id:t,conversation:{title:(0,A.t)("help_widget.report_bug.title"),status:"open",data:{type:e.type,text:e.text,priority:e.priority}},attachment_ids:l.map(function(e){return e.attachmentId})})},mode:"onSubmit",defaultValues:{text:g,type:_,priority:x},children:(0,i.jsx)(dK,{isLoading:f,attachments:l,uploadAttachments:s,cancelAttachment:c,onFormChange:function(e){y(e.type,e.text,e.priority)}})})})})},dX=function(e){var t=e.current,r=e.previous,n=new Date(t),o=new Date(r),a=n.getFullYear(),s=n.toLocaleString("en-US",{month:"long"}),l=o.getFullYear(),c=o.toLocaleString("en-US",{month:"long"});return a!==l||s!==c?(0,i.jsx)("div",{className:"bg-secondary p-4",children:(0,i.jsxs)(es.Z.LabelSm,{color:"text-tertiary",weight:"normal",truncate:!0,children:[s," ",a]})}):null},dY=function(){var e=ds(),t=e.isLoading,r=e.data;if(t)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(uq,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,i.jsx)(uq,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,i.jsx)(uq,{rows:4,height:"70px",wrapperClassName:"px-2 mb-4"}),(0,i.jsx)(uq,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,i.jsx)(uq,{rows:1,height:"70px",wrapperClassName:"px-2 mb-4"})]});var n=(null==r?void 0:r.records)||[];return(0,i.jsxs)("div",{className:"scrollbar-hide bg-secondary flex h-full w-[400px] flex-col overflow-y-auto",children:[n.map(function(e,t){var r;return(0,i.jsxs)("div",{children:[(0,i.jsx)(dX,{current:e.starts_at,previous:null==(r=n[t-1])?void 0:r.starts_at}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)(dl,{event:e,showArrowIcon:!1},e.id)})]},e.id)}),(0,i.jsx)("div",{className:"px-4 pb-4",children:(0,i.jsxs)("a",{href:c0.Qd,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-disabled flex h-8 items-center justify-center gap-1 self-stretch rounded-3xl border px-4",children:[(0,i.jsx)(es.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,A.t)("support_widget.news.see_more")}),(0,i.jsx)(E.JO,{type:"sw-popout",useWithFillCurrentColor:!0,size:16})]})})]})},d0=function(e){return(0,nZ.A)({"text-default dark:text-feature-light":e,"text-disabled":!e},"relative flex flex-col hover:text-default focus:text-default text-center")},d1=function(){return(0,i.jsxs)("div",{className:"bg-primary text-darkest flex w-full items-center justify-between rounded-b-2xl px-6 pb-3 pt-2 text-[11px] font-medium leading-[18px] tracking-[0.2px]",children:[(0,i.jsxs)(er.OL,{to:"/",className:d0,isActive:function(e,t){var r=t.pathname;return"/"===r||r.endsWith("/new_ticket")||r.startsWith("/message_confirmation/")},children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(E.JO,{type:"sw-home",size:20})}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.home")})]}),(0,i.jsxs)(er.OL,{to:"/conversations",className:d0,children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(E.JO,{type:"sw-conversations",size:20})}),(0,i.jsx)("span",{children:(0,A.t)("help_widget.bottom_menu.conversations")})]}),(0,i.jsxs)(er.OL,{to:"/help",className:d0,isActive:function(e,t){var r=t.pathname;return"/help"===r||r.startsWith("/spaces/")||"/space_groups"===r||r.startsWith("/posts/")},children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(E.JO,{type:"sw-help",size:20})}),(0,i.jsx)("span",{children:(0,A.t)("support_widget.bottom_menu.help")})]}),(0,i.jsxs)(er.OL,{to:"/explore",className:d0,isActive:function(e,t){var r=t.pathname;return"/explore"===r||"/events"===r||r.startsWith("/news")},children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(E.JO,{type:"sw-explore",size:20})}),(0,i.jsx)("span",{children:(0,A.t)("help_widget.bottom_menu.explore")})]})]})},d2=function(){var e=!!(0,B.$B)(eu._N.spaceGroups()),t=(0,B.$B)("/posts/:id"),r=(0,B.$B)("/news/:id"),n=(0,B.$B)({path:"/conversations/:id",exact:!0}),i=!!(0,B.$B)("/spaces/:spaceId/posts"),o=!!t,a=!!r,s=!!(0,B.$B)("/news"),l=!!(0,B.$B)("/events"),c=!!(0,B.$B)("/conversations/:id/new_ticket"),u=!!(0,B.$B)("/message_confirmation/:id"),d=!!(0,B.$B)({path:"/conversations",exact:!0}),f=!!n,p=i||o||a||s||l||c||u||f;return{isSpaceGroupsRoutes:e,isSpaceRoute:i,postMatch:t,newsMatch:r,isPostRoute:o,isNewsRoute:a,isNewsListRoute:s,isEventsRoute:l,isBackButtonVisible:p,isExpandButtonVisible:o||a||c||u||f,isSpecialHeaderVisible:p||e,isSendUsMessageRoute:c,isMessageConfirmationRoute:u,isConversationListRoute:d,isSingleConversationRoute:f,isConversationsRoute:f||d,singleConversationMatch:n}},d3=function(){localStorage.setItem(c0.SX,"/")},d6=function(e){return(0,q.useQuery)(["posts","details",e],function(){return V.R.showPost(e)},{onError:d3,retry:!1,staleTime:c0.mo})};function d4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d5=function(e){var t,r,n=e.onClick,a=(0,B.k6)(),s=(0,c1.tQ)(),l=s.setIsShowingLeaveWarning,c=s.setLeaveWarningTrigger,u=d2(),d=u.singleConversationMatch,f=u.isSingleConversationRoute,p=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d4(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1],h=(null==d||null==(r=d.params)?void 0:r.id)||"",y=uf(h).data;(0,o.useEffect)(function(){y&&b(y)},[y]),(0,eU.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"updateConversation"===e.event&&e.conversation&&b(e.conversation)},conversation_id:h,canCreateConnection:!!h},[h]);var v=f&&(null==m?void 0:m.is_waiting_in_queue)&&(null==m?void 0:m.channel)==="live_chat"&&(null==m?void 0:m.status)!=="closed";return(0,i.jsx)(el.T,{content:(0,A.t)("help_widget.tooltip.back"),children:(0,i.jsx)("button",{type:"button",onClick:function(){if(v){c("back_button"),l(!0);return}n?n():a.goBack()},className:"hover:bg-secondary text-light flex h-6 w-6 items-center rounded-full p-1",children:(0,i.jsx)(E.JO,{type:"16-arrow-left",useWithFillCurrentColor:!0,size:16})})})};function d8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d9=function(e){var t,r,n=e.onClick,a=(0,c1.tQ)(),s=a.setIsShowingLeaveWarning,l=a.setLeaveWarningTrigger,c=d2(),u=c.singleConversationMatch,d=c.isSingleConversationRoute,f=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d8(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d8(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],m=f[1],b=(null==u||null==(r=u.params)?void 0:r.id)||"",h=uf(b).data;(0,o.useEffect)(function(){h&&m(h)},[h]),(0,eU.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"updateConversation"===e.event&&e.conversation&&m(e.conversation)},conversation_id:b,canCreateConnection:!!b},[b]);var y=d&&(null==p?void 0:p.is_waiting_in_queue)&&(null==p?void 0:p.channel)==="live_chat"&&(null==p?void 0:p.status)!=="closed";return(0,i.jsx)(el.T,{content:(0,A.t)("help_widget.tooltip.close"),children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary text-light flex h-6 w-6 items-center rounded-full p-1",onClick:function(){if(y){l("close_button"),s(!0);return}n()},children:(0,i.jsx)(E.JO,{type:"hw-cross",size:16})})})},d7=function(e){var t=e.href;return(0,i.jsx)(el.T,{content:(0,A.t)("help_widget.tooltip.download_transcript"),children:(0,i.jsx)("a",{href:t,download:!0,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-secondary text-light flex h-6 w-6 items-center rounded-full p-1",children:(0,i.jsx)(E.JO,{type:"16-download",size:16})})})},fe=function(){var e=(0,c1.tQ)(),t=e.isExpanded,r=e.expandWidget,n=e.collapseWidget;return(0,i.jsx)(el.T,{content:t?(0,A.t)("help_widget.tooltip.collapse_widget"):(0,A.t)("help_widget.tooltip.expand_widget"),children:(0,i.jsx)("button",{type:"button",onClick:function(){t?n():r()},className:"hover:bg-secondary text-light flex h-6 w-6 items-center rounded-full p-1",children:(0,i.jsx)(E.JO,{type:"sw-resize",useWithFillCurrentColor:!0,size:16})})})},ft=function(){var e=(0,c1.tQ)(),t=e.isSidebarOpen,r=e.collapseSideBar,n=e.expandSideBar;return(0,i.jsx)(el.T,{content:t?(0,A.t)("help_widget.tooltip.hide_conversations"):(0,A.t)("help_widget.tooltip.show_conversations"),children:(0,i.jsx)("button",{type:"button",onClick:function(){t?r():n()},className:"hover:bg-secondary text-light flex h-6 w-6 items-center rounded-full p-1",children:(0,i.jsx)(E.JO,{type:"sw-expand-sidebar",useWithFillCurrentColor:!0,size:16})})})},fr=function(e){var t=e.postUrl;return"minimal"===e.version?(0,i.jsx)(el.T,{content:(0,A.t)("help_widget.tooltip.open_in_new_window"),children:(0,i.jsx)("button",{type:"button",onClick:function(){return window.open(t,"_blank","noopener,noreferrer")},className:"hover:bg-secondary flex h-6 w-6 items-center rounded-full p-1",children:(0,i.jsx)(E.JO,{type:"sw-popout",useWithFillCurrentColor:!0,size:16})})}):(0,i.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"my-2 flex w-full justify-center gap-2 rounded-3xl border border-[#2B2E33] p-1",children:[(0,i.jsx)(es.Z.LabelSm,{weight:"font-medium",color:"text-primary",size:"text-sm",children:(0,A.t)("support_widget.open_post")}),(0,i.jsx)(E.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})};function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fi=function(e){var t,r,n,a,s=e.pageName,l=e.onClose,c=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return fn(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fn(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=(0,c1.tQ)(),p=f.isExpanded,m=f.isSidebarOpen,b=f.currentSpaceProperties,h=(0,B.TH)(),y=(0,B.k6)(),v=d2(),g=v.isSpaceGroupsRoutes,_=v.isSpaceRoute,x=v.postMatch,j=v.newsMatch,w=v.isPostRoute,O=v.isNewsRoute,S=v.isBackButtonVisible,k=v.isExpandButtonVisible,P=v.isSpecialHeaderVisible,C=v.isNewsListRoute,N=v.isEventsRoute,I=v.isSendUsMessageRoute,T=v.isMessageConfirmationRoute,L=v.isConversationsRoute,D=v.isConversationListRoute,M=v.singleConversationMatch,R=v.isSingleConversationRoute,F="/"!==h.pathname,z=d6((null==x||null==(r=x.params)?void 0:r.id)||(null==j||null==(n=j.params)?void 0:n.id)||"").data,U=(null==M||null==(a=M.params)?void 0:a.id)||"",Z=uf(U).data;(0,o.useEffect)(function(){Z&&d(Z)},[Z]),(0,eU.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"updateConversation"===e.event&&e.conversation&&d(e.conversation)},conversation_id:U,canCreateConnection:!!U},[U]);var G=function(){return g?(0,A.t)("support_widget.search_container.title"):(O||w)&&z?z.name||"":C?(0,A.t)("support_widget.news.news"):_?b.name:N?(0,A.t)("support_widget.events"):I||T?(0,A.t)("help_widget.report_bug.send_us_a_message"):D?(0,A.t)("help_widget.conversation_list_page.title"):R?(null==u?void 0:u.title)||(0,A.t)("help_widget.conversation_page.title"):s},q=(null==z?void 0:z.post_url)||c0.kL;return(["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach(function(e){q.includes(e)&&(q=q.replace(e,"help.circle.so"))}),P)?(0,i.jsxs)("div",{className:(0,nZ.A)("bg-primary sticky top-0 z-10 flex h-16 w-full shrink-0 items-center border-b","justify-between"),children:[p&&(0,i.jsx)("div",{className:(0,nZ.A)("flex h-full items-center gap-2 border-r px-5 transition-all duration-300 ease-in-out",{"w-[312px]":m,"w-0 border-r-0 px-0":!m}),children:(0,i.jsx)("div",{className:(0,nZ.A)("ease-in-strong flex items-center opacity-100 transition-opacity duration-300",{"ease-out-strong -z-10 opacity-0":!m}),children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:(0,A.t)("help_widget.conversation_list_page.title")})})}),(0,i.jsxs)("div",{className:(0,nZ.A)("flex items-center gap-2 px-5",{"w-[736px]":p,"w-[400px]":!p}),children:[S&&(0,i.jsx)(d5,{onClick:function(){T?y.replace("/"):R?y.replace("/conversations"):y.goBack()}}),L&&p&&(0,i.jsx)(ft,{}),(0,i.jsx)("div",{className:"min-w-0 flex-1 truncate",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:G()})}),k&&(0,i.jsx)(fe,{}),R&&U&&(0,i.jsx)(d7,{href:ud.a.helpWidget.downloadTranscript({id:U})}),(w||O)&&(0,i.jsx)(fr,{version:"minimal",postUrl:q}),(0,i.jsx)(d9,{onClick:l})]})]}):(0,i.jsxs)("div",{className:(0,nZ.A)("bg-primary sticky top-0 z-10 flex h-16 w-full shrink-0 items-center justify-between gap-2 px-5",{"border-b":F}),children:[(0,i.jsx)("div",{className:"min-w-0 flex-1 truncate",children:(0,i.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:G()})}),(0,i.jsx)(el.T,{content:(0,A.t)("help_widget.tooltip.close"),children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary text-light flex h-6 w-6 items-center rounded-full p-1",onClick:l,children:(0,i.jsx)(E.JO,{type:"hw-cross",size:16})})})]})},fo=function(e){var t=e.children,r=e.onClose,n=e.pageName,o=(0,c1.tQ)(),a=o.isExpanded,s=o.isShowingLeaveWarning,l=(0,B.TH)().pathname,c=!l.match(/^\/conversations\/\d+$/)&&!l.endsWith("/new_ticket")&&!l.startsWith("/message_confirmation/"),u="/"===l||l.endsWith("/new_ticket")||l.startsWith("/message_confirmation/"),d="/"===l;return(0,i.jsxs)("div",{className:(0,nZ.A)("bg-primary flex flex-col rounded-2xl",{"h-[min(732px,100vh-16px)]":!a,"h-[calc(100vh-16px)]":a}),style:{border:"4px solid rgba(228, 231, 235, 0.4)",boxShadow:"\n        8px 14px 35px 0px rgba(110, 110, 110, 0.07),\n        32px 54px 63px 0px rgba(110, 110, 110, 0.06),\n        71px 122px 85px 0px rgba(110, 110, 110, 0.03),\n        126px 218px 101px 0px rgba(110, 110, 110, 0.01),\n        197px 340px 110px 0px rgba(110, 110, 110, 0)\n      ",transition:"height 300ms ease 0s"},children:[d&&(0,i.jsxs)("div",{className:"relative left-0 top-0 hidden w-96 opacity-10 lg:flex",children:[(0,i.jsx)("div",{className:"absolute left-[27.06px] top-[474.84px] h-60 w-72 rounded-full bg-violet-600 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-[51.36px] top-[420px] h-44 w-56 rounded-full bg-rose-500 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-[156.85px] top-[494.50px] h-48 w-60 rounded-full bg-sky-200 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-0 top-[471.02px] h-32 w-28 rounded-full bg-sky-400 blur-[106px]"})]}),(0,i.jsx)("div",{className:(0,nZ.A)("relative hidden h-full min-w-[400px] origin-bottom-right overflow-hidden rounded-t-2xl lg:flex lg:flex-col",{"border-b border-b-[#E4E7EB]":c&&!u}),style:{transition:"width 300ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:(0,i.jsxs)("div",{className:"relative z-10 flex h-full w-full flex-col",children:[!s&&(0,i.jsx)(fi,{pageName:n,onClose:r}),t]})}),c&&(0,i.jsx)("div",{className:"border-primary hidden h-[66px] origin-bottom-right rounded-b-2xl bg-white shadow-lg lg:flex",children:(0,i.jsx)(d1,{})})]})},fa=function(){var e=dd(),t=e.isLoading,r=e.data;if(t)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(uq,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,i.jsx)(uq,{rows:2,height:"170px",wrapperClassName:"px-2 mb-4"})]});var n=(null==r?void 0:r.records)||[];return(0,i.jsx)("div",{className:"scrollbar-hide bg-secondary flex w-[400px] flex-col overflow-auto py-4",children:(0,i.jsxs)("div",{className:"px-4",children:[n.map(function(e){return(0,i.jsx)(df,{post:e},e.id)}),(0,i.jsxs)("a",{href:c0.NA,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-disabled flex h-8 items-center justify-center gap-1 self-stretch rounded-3xl border px-4",children:[(0,i.jsx)(es.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,A.t)("support_widget.news.see_more")}),(0,i.jsx)(E.JO,{type:"sw-popout",useWithFillCurrentColor:!0,size:16})]})]})})},fs=function(){localStorage.setItem(c0.SX,"/")},fl=function(e){var t=(0,q.useQueryClient)();return(0,q.useQuery)(["news",e],function(){return V.R.showPost(e)},{onError:fs,retry:!1,staleTime:c0.mo,initialData:function(){var r,n;return null==(n=t.getQueryData(["news"]))||null==(r=n.records)?void 0:r.find(function(t){var r;return(null==(r=t.id)?void 0:r.toString())===e})}})},fc=function(){var e,t,r=(0,B.$B)().params.id,n=(0,c1.tQ)().isExpanded,o=fl(r),a=o.isError,s=o.isLoading,l=o.data;if(s)return(0,i.jsxs)("div",{className:(0,nZ.A)("scrollbar-hide flex flex-col overflow-auto",{"w-[736px]":n,"w-[400px]":!n}),children:[(0,i.jsx)(uq,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,i.jsx)(uq,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,i.jsx)(uq,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,i.jsx)(uq,{rows:6})]});if(a)return(0,i.jsx)("div",{className:(0,nZ.A)("scrollbar-hide flex flex-col overflow-auto",{"w-[736px]":n,"w-[400px]":!n}),children:(0,i.jsx)("div",{className:"support-widget-post__body grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,A.t)("support_widget.post_not_found")})})});var c=(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l.tiptap_body),t=t={body:l.tiptap_inner_body_without_cta},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e);return(0,i.jsx)("div",{className:(0,nZ.A)("scrollbar-hide flex flex-col overflow-auto",{"w-[736px]":n,"w-[400px]":!n}),children:(0,i.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[l.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",src:l.cover_image_url})}),(0,i.jsx)("div",{className:"mx-6 my-4",children:(0,i.jsx)(es.Z.TitleMd,{children:(0,i.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:l.post_url||c0.NA,target:"_blank",rel:"noreferrer noopener",children:l.name})})}),(0,i.jsxs)("div",{id:"news_view_post_body",className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,t1.Iz)(l)&&l.body_trix_content&&(0,i.jsx)(t2.P,{content:l.body_trix_content}),(0,t1.s8)(l)&&l.tiptap_body&&(0,i.jsx)(t3.R,{readOnly:!0,value:c.body,sgidToObjectMap:c.sgids_to_object_map,inlineAttachments:c.inline_attachments}),(0,i.jsx)("div",{className:"h-5 shrink-0"})]})]})})},fu=function(e){var t=e.value,r=e.handleFeedback,n=e.isFeedbackGiven,o=void 0===n?null:n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{className:(0,nZ.A)("w-full rounded-3xl border px-6 py-[3px] align-baseline font-medium",{"text-dark border-gray-300 dark:border-gray-500":null===t||!t,"border-circle text-circle":!0===t,"!cursor-not-allowed":o,"hover:border-secondary dark:hover:border-secondary":!o}),onClick:function(){return!0!==t&&r(!0)},type:"button",children:[(0,i.jsx)(es.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,A.t)("help_widget.post.feedback_yes")}),(0,i.jsx)(E.JO,{type:"16-thumbs-up",size:16,className:(0,nZ.A)({"text-circle ml-1":!0===t,"text-dark ml-1 dark:text-gray-500":null===t||!t})})]}),(0,i.jsxs)("button",{className:(0,nZ.A)("w-full rounded-3xl border px-6 py-[3px] align-baseline font-medium",{"text-dark border-gray-300 dark:border-gray-500":null===t||t,"border-circle text-circle":!1===t,"!cursor-not-allowed":o,"hover:border-secondary dark:hover:border-secondary":!o}),onClick:function(){return!1!==t&&r(!1)},type:"button",children:[(0,i.jsx)(es.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,A.t)("help_widget.post.feedback_no")}),(0,i.jsx)(E.JO,{type:"16-thumbs-down",size:16,className:(0,nZ.A)({"text-circle ml-1":!1===t,"text-dark ml-1 dark:text-gray-500":null===t||t})})]})]})};function fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ff(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fd(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fp=function(e){var t=e.post,r=ff((0,o.useState)(null),2),n=r[0],a=r[1],s=ff((0,o.useState)(!1),2),l=s[0],c=s[1],u=(0,q.useMutation)(function(e){var t=e.postId,r=e.value;return V.R.createPostFeedback({postId:t,helpful:r})}).mutate;return(0,o.useEffect)(function(){if(null!==n){var e;null==(e=document.getElementById("feedback-response-container"))||e.scrollIntoView()}},[n]),(0,i.jsxs)("div",{className:"mx-auto w-full pt-4",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(T.Di,{weight:"semibold",children:(0,A.t)("support_widget.was_this_article_helpful")})}),(0,i.jsx)("div",{className:"mb-6 flex justify-center gap-4",children:(0,i.jsx)(fu,{value:n,handleFeedback:function(e){l||(a(e),u({postId:t.id,value:e}),c(!0))},isFeedbackGiven:l})}),(0,i.jsxs)("div",{id:"feedback-response-container",children:[n&&(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(J.Q,{children:(0,A.t)("support_widget.thank_you_for_article_feedback")})}),!1===n&&(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(dS,{helpText:(0,A.t)("help_widget.post.still_need_help"),buttonText:(0,A.t)("help_widget.post.ask_a_question")})})]})]})},fm=function(e){var t=e.spaceGroupName,r=e.spaceName,n=e.spaceId,o=(0,B.k6)();return(0,i.jsxs)("div",{className:"flex items-center",children:[t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pr-1",children:(0,i.jsx)(es.Z.BodySm,{weight:"regular",size:"text-sm",color:"text-tertiary",children:t})}),(0,i.jsx)(es.Z.BodySm,{weight:"regular",size:"text-sm",color:"text-tertiary",children:" / "})]}),(0,i.jsx)("button",{type:"button",onClick:function(){o.push(eu._N.posts(n))},className:"hover:bg-tertiary rounded-md pl-1 transition-colors duration-150 ease-linear",children:(0,i.jsx)(es.Z.BodySm,{weight:"regular",color:"text-tertiary",children:r})})]})},fb=function(e){var t=e.id,r=(0,c1.tQ)().isExpanded,n=(0,o.useRef)(null),a=(0,B.k6)(),s=d6(t),l=s.isError,c=s.isLoading,u=s.data,d=(null==u?void 0:u.post_url)||c0.kL;["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach(function(e){d.includes(e)&&(d=d.replace(e,"help.circle.so"))});var f=(0,o.useCallback)(function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.getAttribute("data-post-id");a.push(eu._N.showPost(t))},[a]),p=(0,o.useCallback)(function(e){var t=e.containerElement;u&&(t.querySelectorAll(".trix-content a").forEach(function(e){var t=e.getAttribute("href");t&&u.urls_hash[t]?e.setAttribute("data-post-id",u.urls_hash[t]):(e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer"))}),t.querySelectorAll(".trix-content a[data-post-id]").forEach(function(e){e.addEventListener("click",f)}),n.current=t)},[u,f]);return((0,o.useEffect)(function(){return function(){n.current&&n.current.querySelectorAll(".trix-content a[data-post-id]").forEach(function(e){e.removeEventListener("click",f)})}},[f]),c)?(0,i.jsxs)("div",{className:(0,nZ.A)("flex flex-col",{"w-[736px]":r,"w-[400px]":!r}),children:[(0,i.jsx)(uq,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,i.jsx)(uq,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,i.jsx)(uq,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,i.jsx)(uq,{rows:6})]}):l?(0,i.jsx)("div",{className:(0,nZ.A)("flex flex-col",{"w-[736px]":r,"w-[400px]":!r}),children:(0,i.jsx)("div",{className:"support-widget-post__body grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,A.t)("support_widget.post_not_found")})})}):(0,i.jsx)("div",{className:(0,nZ.A)("flex h-full flex-col overflow-hidden",{"w-[736px]":r,"w-[400px]":!r}),children:(0,i.jsxs)("div",{className:"support-widget-post__body !mb-0 flex-1 overflow-y-auto",children:[u.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",src:u.cover_image_url})}),(0,i.jsx)("div",{className:"mx-5 my-4",children:(0,i.jsx)(fm,{spaceGroupName:u.space_group_name,spaceName:u.space_name,spaceId:u.space_id})}),(0,i.jsx)("div",{className:"mx-5 my-4",children:(0,i.jsx)(es.Z.TitleLg,{children:(0,i.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:d,target:"_blank",rel:"noreferrer noopener",children:u.name})})}),(0,i.jsxs)("div",{className:"mx-5 my-3 flex flex-col gap-2 pb-4",children:[(0,t1.Iz)(u)&&u.body_trix_content&&(0,i.jsx)(t2.P,{content:u.body_trix_content,transformLinks:p}),(0,t1.s8)(u)&&u.tiptap_body&&(0,i.jsx)(t3.R,{readOnly:!0,value:u.tiptap_body.body,sgidToObjectMap:u.tiptap_body.sgids_to_object_map,inlineAttachments:u.tiptap_body.inline_attachments}),(0,i.jsx)(fr,{version:"full",postUrl:d}),"tutorials"!==u.space_slug&&(0,i.jsx)(fp,{post:u})]})]})})},fh=["/form","/posts/","/news/","/message_confirmation/","/conversations/"],fy=function(e){var t=e.children,r=d2().isConversationsRoute,n=(0,B.TH)(),a=(0,c1.tQ)(),s=a.collapseWidget,l=a.collapseSideBar,c=a.isShowingLeaveWarning;return(0,o.useEffect)(function(){var e;localStorage.setItem(c0.SX,n.pathname),e=n.pathname,(!(fh.some(function(t){return t.endsWith("/")?e.startsWith(t):e===t})||e.endsWith("/new_ticket"))||c)&&s(),r||l()},[n.pathname,s,l,r,c]),(0,i.jsx)(i.Fragment,{children:t})},fv=function(e){var t=e.onClose,r=(0,B.TH)();return(0,i.jsx)(fo,{onClose:t,pageName:function(){switch(r.pathname){case"/":return(0,A.t)("help_widget.home_page.title");case"/conversations":return"Conversations";case"/help":return(0,A.t)("help_widget.help_page.title");case"/explore":return"Explore";default:return""}}(),children:(0,i.jsx)(fy,{children:(0,i.jsxs)(B.rs,{children:[(0,i.jsx)(B.AW,{exact:!0,path:"/",component:dD}),(0,i.jsx)(B.AW,{exact:!0,path:"/explore",component:d_}),(0,i.jsx)(B.AW,{exact:!0,path:"/help",component:dI}),(0,i.jsx)(B.AW,{exact:!0,path:"/spaces/:spaceId/posts",component:dI}),(0,i.jsx)(B.AW,{exact:!0,path:"/space_groups",component:dI}),(0,i.jsx)(B.AW,{exact:!0,path:"/posts/:id",render:function(e){var t=e.match;return(0,i.jsx)(fb,{id:t.params.id},t.params.id)}}),(0,i.jsx)(B.AW,{exact:!0,path:"/news",component:fa}),(0,i.jsx)(B.AW,{exact:!0,path:"/news/:id",component:fc}),(0,i.jsx)(B.AW,{exact:!0,path:"/events",component:dY}),(0,i.jsx)(B.AW,{exact:!0,path:"/conversations",render:function(){return(0,i.jsx)(dB,{children:(0,i.jsx)(da,{})})}}),(0,i.jsx)(B.AW,{exact:!0,path:"/conversations/:id",render:function(e){var t=e.match;return(0,i.jsx)(dB,{children:(0,i.jsx)(u1,{id:t.params.id},t.params.id)})}}),(0,i.jsx)(B.AW,{exact:!0,path:"/conversations/:id/new_ticket",component:d$}),(0,i.jsx)(B.AW,{exact:!0,path:"/message_confirmation/:id",component:dR})]})})})};function fg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fg(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fx=function(){var e,t,r=(0,c1.tQ)(),n=r.isOpen,a=r.shouldDisplayOnboarding,s=r.toggleWidget,l=f_((0,o.useState)(0),2),c=l[0],u=l[1],d=f_((0,o.useState)(!0),2),f=d[0],p=d[1],m=f_((0,o.useState)(!1),2),b=m[0],h=m[1],y=f_((0,o.useState)(!n),2),v=y[0],g=y[1],_=f_((0,o.useState)(a),2),x=_[0],j=_[1],w=c2().mutate,O=function(){x&&w(),j(!1)},S=["/"],k=localStorage.getItem(c0.SX);k&&"string"==typeof k&&"/"!==k&&S.push(k),(0,o.useEffect)(function(){u(c3())},[]),(0,o.useEffect)(function(){n&&g(!1)},[n]);var P=!n&&v&&f&&x;return(0,i.jsxs)("div",{id:"help-widget-body",className:"fixed bottom-2 right-2 z-[60] flex",style:{right:c},children:[(0,i.jsx)(U.u,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({show:n},c0.sm),t=t={afterLeave:function(){return g(!0)},children:(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)(B.VA,{initialEntries:S,initialIndex:S.length-1,children:(0,i.jsx)(fv,{onClose:function(){s({shouldTriggerOnWidgetClose:!0})}})})})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),(0,i.jsxs)("div",{className:"flex flex-col",children:[P&&(0,i.jsx)(c8,{onClick:function(){return O()}}),!n&&v&&(0,i.jsxs)("div",{className:"-mr-4 mb-2 flex justify-end align-baseline",onMouseOver:function(){return h(!0)},onFocus:function(){return h(!0)},onMouseOut:function(){return h(!1)},onBlur:function(){return h(!1)},children:[(0,i.jsx)("div",{className:(0,nZ.A)("transition-transform duration-300 ease-out",{"translate-x-[150%]":!f}),children:(0,i.jsx)(c5,{isOpen:n,onClick:function(){f&&(O(),s({shouldTriggerOnWidgetClose:!0}))}})}),(0,i.jsx)(E.JO,{type:f?"12-chevron-right":"12-chevron-left",size:12,className:(0,nZ.A)("cursor-pointer text-gray-400",{invisible:x||n||f&&!b}),onClick:f?function(){p(!1)}:function(){p(!0)}})]})]})]})},fj=function(){return null};function fw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fO(e){return function(e){if(Array.isArray(e))return fw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fw(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fw(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fS=function(e){var t=e.showWidgetBot,r=void 0!==t&&t,n=(0,B.TH)(),a=(0,I.nT)().records,s=(0,I.wh)().currentCommunityMember,l=!(null==s?void 0:s.is_admin),c=a.filter(function(e){return"chat"===e.post_type}).map(function(e){return e.slug}),u=fO(c0._9).concat(fO(c)).some(function(e){return n.pathname.includes(e)}),d=(0,c1.tQ)().openWidget;return((0,o.useEffect)(function(){r&&(localStorage.setItem(c0.SX,"/"),d())},[]),l||u)?null:(0,i.jsx)(i.Fragment,{children:(0,R.createPortal)((0,i.jsx)(C.S,{renderFunc:fj,children:(0,i.jsx)(fx,{})}),document.body)})},fk=function(e){var t=e.notice,r=e.alert,n=e.shouldDisplayHeader,o=e.shouldDisplayCommunitySwitcher,a=e.hasMinimalLayout,s=e.showWidgetBot,l=e.supportWidgetV2Enabled,c=window.location.pathname!==(0,eu.hD)();return(0,S.ss)(),(0,i.jsxs)("div",{className:"flex w-full",children:[o&&(0,i.jsx)(C.S,{children:(0,i.jsx)(c$,{})}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(M.I,{notice:t,alert:r}),(0,i.jsx)(D,{}),n&&!a&&c&&(0,i.jsx)(cX.G,{}),(0,i.jsx)(cJ,{}),l?(0,i.jsx)(fS,{showWidgetBot:s}):(0,i.jsx)(rn,{showWidgetBot:s}),(0,i.jsx)(cY.V,{})]})]})},fP=r(5117),fC=function(e){return(0,i.jsxs)("div",{className:"flex h-screen w-full flex-col",children:[(0,i.jsx)(fP.h,{}),(0,i.jsx)("div",{className:"flex flex-1 overflow-hidden",children:(0,i.jsx)(fk,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})]})};function fN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}(0,h.b)();var fA=(0,s.P)(function(e){var t=e.notice,r=e.alert,n=e.display_community_switcher,a=void 0!==n&&n,s=e.display_header,c=void 0===s||s,u=e.minimal_layout,f=void 0!==u&&u,p=e.show_widget_bot,m=void 0!==p&&p,h=e.support_widget_v2_enabled,v=void 0!==h&&h,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["notice","alert","display_community_switcher","display_header","minimal_layout","show_widget_bot","support_widget_v2_enabled"]),_=(0,l.L)(),x=_.isElectron,j=_.electronVersion,w=x&&(0,l.Z)(String(j),"0.1.2");(0,o.useEffect)(function(){(0,S.M2)(),d(),b()},[]);var C=fN({notice:t,alert:r,display_community_switcher:a,display_header:c,minimal_layout:f,show_widget_bot:m,support_widget_v2_enabled:v},g);return(0,i.jsxs)(y.e$,{backendProps:C,children:[(0,i.jsx)(k.h,{}),(0,i.jsx)("div",{id:P.BW,className:"bg-secondary","data-testid":"main-app-provider",children:(0,i.jsx)(O,{children:(0,i.jsx)(w?fC:fk,fN({},{notice:t,alert:r,shouldDisplayHeader:c,shouldDisplayCommunitySwitcher:a,hasMinimalLayout:f,showWidgetBot:m,supportWidgetV2Enabled:v}))})})]})},a.D)},87792:function(e,t,r){"use strict";r.d(t,{$:()=>s});var n=r(67294),i=r(50636),o=r(41342),a=r(32590),s=function(e){var t=(0,o.wh)(),r=t.masqueradingEntity,s=t.currentCommunity,l=t.currentCommunityMember,c=t.isLoading,u=(0,a.U)().pageViewId,d=e.postId,f=e.spaceId,p=e.isDisabled,m=null==s?void 0:s.id,b=null==l?void 0:l.id;(0,n.useEffect)(function(){d&&f&&!p&&m&&(r||c||i.n.trackPostView({community_id:m,community_member_id:b,post_id:d,space_id:f,page_view_id:null!=u?u:"unknown"}))},[d,f,m,b,r,c,u,p])}},89860:function(e,t,r){"use strict";r.d(t,{C:()=>u});var n=r(88767),i=r(84326),o=r(93199),a=r(13532),s=r(60878);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c="design-config",u=function(){var e=(0,s.pm)(),t=(0,n.useQueryClient)(),r=(0,n.useQuery)(c,function(){return(0,o.UT)(a.av.brandedAppsBuilderUI.designConfig.get())}),u=r.data,d=r.isLoading,f=(0,n.useMutation)({mutationFn:function(e){return(0,o.aU)(a.av.brandedAppsBuilderUI.designConfig.put(),e)},onSuccess:function(r){t.setQueryData(c,r),e.success((0,i.t)("branded_apps_builder_ui.design.save.success"))},onError:function(t){e.error((0,i.t)("branded_apps_builder_ui.design.save.error")),console.error(t)}}).mutateAsync,p=function(e){var t,r,n,i,o,a,s,l,c,u,d,f,p,m,b,h;return{brand_color_light_mode:null==e||null==(r=e.cssVariables)||null==(t=r.light)?void 0:t.brand,brand_color_dark_mode:null==e||null==(i=e.cssVariables)||null==(n=i.dark)?void 0:n.brand,button_text_color_light:null==e||null==(a=e.cssVariables)||null==(o=a.light)?void 0:o["button-text-color"],button_text_color_dark:null==e||null==(l=e.cssVariables)||null==(s=l.dark)?void 0:s["button-text-color"],community_icon_light:null==e||null==(u=e.cssVariables)||null==(c=u.light)?void 0:c["community-icon-signed-id"],community_logo_light:null==e||null==(f=e.cssVariables)||null==(d=f.light)?void 0:d["community-logo-signed-id"],community_icon_dark:null==e||null==(m=e.cssVariables)||null==(p=m.dark)?void 0:p["community-icon-signed-id"],community_logo_dark:null==e||null==(h=e.cssVariables)||null==(b=h.dark)?void 0:b["community-logo-signed-id"]}};return{designConfigData:u,mutateDesignConfig:f,isLoading:d,saveDesignConfig:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){return[2,f({branded_mobile_app:p(e)})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()}}}},53834:function(e,t,r){"use strict";r.d(t,{H:()=>$});var n=r(85893),i=r(67294),o=r(58533),a=r(63271),s=r(51630),l=r(3697),c=r(41342),u=r(1168),d=r(90926),f=r(42992),p=r(51685),m=r(51169),b=r(76896),h=r(84326),y=r(57363),v=r(17617),g=r(41553),_=function(e){var t=e.shouldShowChatThreadsBanner,r=e.hideBanner,i=(0,v.kK)();return t?(0,n.jsx)("div",{className:"border-primary bg-primary mx-3 mt-6 rounded-lg border px-6 py-5 md:mx-6",children:(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("div",{className:"mr-3 h-10 w-12 rounded-lg bg-gray-100 md:mr-6 md:h-14 md:w-14",children:(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-between",children:(0,n.jsx)(y.JO,{type:i?"16-chat-threads":"20-chat-threads",size:i?16:20,className:"!w-full"})})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-start justify-between",children:[(0,n.jsx)(g.Z.LabelLg,{weight:"semibold",children:(0,h.t)("threads.banner.title")}),(0,n.jsx)("button",{type:"submit",onClick:r,children:(0,n.jsx)(y.JO,{type:"20-close-sm",size:20})})]}),!i&&(0,n.jsx)(g.Z.LabelMd,{children:(0,h.t)("threads.banner.description")})]})]})}):null},x=function(){return(0,n.jsx)("div",{className:"bg-primary flex h-full items-center justify-center lg:h-[calc(100vh-64px)]",children:(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-2 md:w-[413px]",children:[(0,n.jsx)("div",{className:"p-2",children:(0,n.jsx)(y.JO,{type:"32-chat-threads",size:32})}),(0,n.jsx)(g.Z.LabelLg,{weight:"semibold",children:(0,h.t)("chat_threads_empty_page.title")}),(0,n.jsx)(g.Z.BodyMd,{textAlign:"text-center",children:(0,h.t)("chat_threads_empty_page.description")})]})})},j=r(96486),w=r(95966),O=r(70442),S=r(86463),k=r(13532),P=r(39295),C=r(80171),N=r(75148),A=r(63424),I=r(43340),E=r(34560),T=r(52928),L=r(85924),D=r(80219),M=function(e){var t=e.space,r=e.chatRoomName,i=e.parentMessage,o=e.chatRoomUrl,a=(0,L.TC)().currentAppearance,s=i.id,l=t||{},c=l.emoji,d=l.custom_emoji_url,f=l.custom_emoji_dark_url;return(0,n.jsx)(T.rU,{to:(0,k.co)({url:o,hash:"message_".concat(s),search:"message_id=".concat(s)}),children:(0,n.jsx)(g.Z.LabelSm,{as:"div",color:"text-selector-active",weight:"semibold",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(D.S,{className:"!h-5 !w-auto",emoji:c,customEmojiUrl:d,customEmojiDarkUrl:f,appearance:a}),(0,n.jsx)("span",{className:(0,u.A)("hover:text-selector-active hover:underline",{"ml-1":c||d}),children:(0,j.truncate)(r,{length:80})})]})})})},R=function(e,t){var r="";return e.forEach(function(n,i){var o=i===e.length-1,a=i===e.length-2;if(1===t)r="".concat((0,h.t)("just")," ").concat(n.name);else if(a&&t<=3)r=r+n.name+" ".concat((0,h.t)("and")," ");else if(o&&t>3){var s=t-3;r=r+n.name+" ".concat((0,h.t)("and")," ")+s.toString()+(1===s?" ".concat((0,h.t)("other")):"".concat((0,h.t)("others")))}else o?r+=n.name:r=r+n.name+", "}),r},B=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map(function(e){return e.parent_message.chat_thread_id});return e.sort(function(e,t){return r?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})},F=function(e,t){var r=[],n=[];return e.forEach(function(e){var t=document.getElementById(String(e));t&&(t.getBoundingClientRect().top>0?n.push(e):r.push(e))}),n=B(n,t),{unreadThreadIdsAtTop:r=B(r,t,!0),unreadThreadIdsAtBottom:n}},z=function(e){var t=document.getElementById(String(e));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},U=function(e){var t=e.isEmbedded,r=e.isMessaging,n=e.lesson,i=e.slug,o=e.chatRoomUuid;return t&&!r?n?k.H4.showLesson({spaceSlug:i,sectionId:n.courses_section_id,lessonId:n.id}):(0,k.kr)({spaceSlug:i}):(0,k.so)({uuid:o})},Z=function(e){var t=e.isRenderedOnHeader,r=e.children;return t?(0,n.jsx)("div",{className:"border-primary bg-primary rounded-lg border shadow-sm","data-testid":"thread-item",children:r}):r};function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var q=function(e){var t=e.chatRoomData,r=e.newBadgeIds,o=e.handleWhenThreadInViewPort,a=e.thread,s=e.space,l=e.setSelectedReply,c=e.isRenderedOnHeader,f=e.isViewOnlyMasquerading,p=(0,O.k6)(),m=(0,S.wO)().onClose,b=(0,P.q)().isMessaging,y=t.roomName,v=t.uuid,_=t.embedded_space,x=t.lesson,T=(s||{}).slug,L=a.parent_message,D=a.replies,B=a.current_participant,F=L.chat_room_uuid,z=L.thread_participants_preview,q=L.total_thread_participants_count,V=L.replies_count,H=L.chat_thread_id,W=L.embedded,Q=L.id,J=U({isEmbedded:W,isMessaging:b,lesson:x,slug:T,chatRoomUuid:F}),K=x?x.name:R(z,q),$=V-D.length,X=r.has(H),Y=(0,i.useMemo)(function(){return(0,I.nR)([L].concat(function(e){if(Array.isArray(e))return G(e)}(D)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(D)||function(e,t){if(e){if("string"==typeof e)return G(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}}(D)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[])},[L,D]),ee=(0,d.gJ)({uuid:v,ids:Y,enabled:Y.length>0,shouldUpdateCache:!1}),et=ee.isLoading,er=ee.participants;return et?null:(0,n.jsx)(i.Fragment,{children:(0,n.jsxs)(Z,{isRenderedOnHeader:c,children:[(0,n.jsxs)("div",{className:(0,u.A)({"flex w-full flex-row items-start justify-between":c,"mt-7 flex w-full flex-row justify-between first:mt-0":!c}),children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:(0,u.A)({"mt-7 flex w-full flex-row justify-between first:mt-0":!c,"flex flex-row items-center justify-between px-5 pt-5":c}),children:[(0,n.jsx)(M,{space:s,chatRoomName:y,parentMessage:L,chatRoomUrl:J}),X&&(0,n.jsx)("div",{className:"bg-v2-danger flex h-4 items-center rounded px-1",children:(0,n.jsx)(g.Z.LabelXxs,{color:"text-white",children:(0,h.t)("threads.new")})})]}),(0,n.jsx)("div",{className:(0,u.A)({"mb-2":!c,"px-5":c}),children:(0,n.jsx)(g.Z.LabelXs,{color:"text-light",children:(0,j.truncate)(K,{length:60})})})]}),c&&(0,n.jsx)("div",{className:"pr-5 pt-5",children:(0,n.jsx)(C.T,{interactive:!1,content:(0,h.t)("header_v3.reply_to_thread"),children:(0,n.jsx)(N.h,{iconClassName:"text-default",className:"hover:!bg-tertiary focus-visible:!bg-tertiary",name:"20-reply-to-thread",ariaLabel:(0,h.t)("header_v3.reply_to_thread"),onClick:function(){null==m||m(),p.push((0,k.co)({url:J,hash:"message_".concat(Q),search:"message_id=".concat(Q)}))}})})})]}),(0,n.jsxs)("div",{className:(0,u.A)({"border-primary bg-primary rounded-lg border":!c}),children:[(0,n.jsxs)("div",{className:(0,u.A)({"py-1 first:rounded-t-lg":!c,"mt-2":c}),children:[(0,n.jsx)(A.R,{message:L,chatRoom:t,currentParticipant:B,participants:er,isParentMessage:!0,chatThreadsEnabled:!0,isRenderedOnHeader:c,chatRoomUrl:J,isViewOnlyMasquerading:f}),$>0&&(0,n.jsx)("button",{type:"submit",className:"ml-5 hover:underline",onClick:function(){return l({parentMessage:L,threadMessageId:D[0].id})},children:(0,n.jsx)(g.Z.LabelXs,{color:"text-selector-active",weight:"medium",children:$>1?(0,h.t)("threads.show_more_replies",{repliesCount:$}):(0,h.t)("threads.show_one_more_reply")})})]}),D.map(function(e){return(0,n.jsx)("div",{className:"border-primary py-1 first:rounded-t-lg last:rounded-b-lg",children:(0,n.jsx)(A.R,{message:e,chatRoom:t,currentParticipant:B,participants:er,chatThreadsEnabled:!0,isRenderedOnHeader:c,chatRoomUrl:J,isViewOnlyMasquerading:f})},e.id)}),(0,n.jsx)(w.df,{as:"div",onChange:function(e){return o(e,a)},children:(0,n.jsx)("div",{id:H,className:"invisible"})}),(0,n.jsx)(E.F,{chatRoomData:t,parentMessageId:L.id,spaceId:null==_?void 0:_.id,userList:[],participants:er,messageBoxId:"threadsMessageTextBox"+String(L.id)})]})]})},L.id)},V=r(1364),H=function(e){var t=e.unreadChatThreadIds,r=e.isTopButton,i=void 0!==r&&r,o=(0,V.k)().shouldShowTrialBanner,a=t.length;return 0===a?null:(0,n.jsx)("div",{className:(0,u.A)("sticky left-0 z-10 flex w-full items-center justify-center",{"top-20":i&&o,"top-[74px]":i&&!o,"bottom-6":!i}),children:(0,n.jsx)("button",{type:"submit",className:"bg-circle rounded-2xl px-2.5 py-1 text-xs font-semibold leading-5 text-white hover:opacity-90",onClick:function(){return z(t[0])},children:1===a?(0,h.t)(i?"unread_thread_at_top":"unread_thread"):(0,h.t)(i?"unread_threads_at_top":"unread_threads",{unread_count:a})})})};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||K(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}var $=function(e){var t=e.isRenderedOnHeader,r=void 0!==t&&t,h=(0,c.wh)(),y=h.isViewOnlyMasquerading,v=h.currentCommunityMember,g=Q((0,p.R)(l.i,!0),2),j=g[0],w=g[1],O=Q((0,i.useState)({parentMessage:null,threadMessageId:null}),2),S=O[0],k=O[1],P=Q((0,i.useState)(new Set),2),C=P[0],N=P[1],A=(0,d.rZ)().unreadChatThreadIds,I=(0,d.Mk)(),E=I.chatThreads,T=void 0===E?[]:E,L=I.isLoading,D=I.hasNextPage,M=I.fetchNextPage,R=I.isChatThreadsAvailable,B=I.onEventReceive,z=I.updateChatThreads,U=I.onReactionEventReceive,Z=(0,d.nw)({parentMessage:S.parentMessage,threadMessageId:S.threadMessageId,successCallback:function(){k({parentMessage:null,threadMessageId:null})}}).threadMessages,G=void 0===Z?[]:Z,V=(0,c.nT)(),W=V.records,K=V.isLoading;(0,i.useEffect)(function(){N(function(e){return new Set(J(e).concat(J(A)))})},[A]),(0,i.useEffect)(function(){G.length>0&&z(G)},[G]),(0,a.s)({channel:"Chats::CommunityMemberThreadsChannel",onMessageReceive:function(e){"newMessage"===e.event&&$(e.json_message),B(e)},community_member_id:null==v?void 0:v.id,canCreateConnection:!!(null==v?void 0:v.id)},[]),(0,a.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){("createReaction"===e.event||"destroyReaction"===e.event)&&U(e)},community_member_id:null==v?void 0:v.id,canCreateConnection:!!(null==v?void 0:v.id)},[null==v?void 0:v.id]);var $=function(e){var t=e.chat_thread_id;if(t){var r=document.getElementById(String(t));r&&(0,f.z)(r)&&!e.unread_flow&&(0,s.ex)(t)}},X=function(e,t){if(e){var r=t.parent_message;A.includes(r.chat_thread_id)&&(0,s.ex)(r.chat_thread_id)}};if((L||K)&&!R)return(0,n.jsx)(b.gi,{variant:r?"chat-threads-list-header":"chat-threads-list-page"});if(!R)return(0,n.jsx)(x,{});var Y=F(A,T),ee=Y.unreadThreadIdsAtTop,et=Y.unreadThreadIdsAtBottom;return(0,n.jsxs)("div",{className:"w-full",id:"threads-scroll-view",children:[(0,n.jsx)(H,{unreadChatThreadIds:ee,isTopButton:!0}),(0,n.jsx)(_,{shouldShowChatThreadsBanner:!!j&&!r,hideBanner:function(){return w(!1)}}),(0,n.jsx)(o.Z,{style:{overflow:"auto"},scrollThreshold:.8,next:M,hasMore:!!D,dataLength:T.length,className:(0,u.A)({"mb-14 px-3 py-6 md:px-6 lg:mb-0":!r,"mb-4 flex flex-col gap-y-2":r}),scrollableTarget:r?"chat-threads-header":"panel",loader:(0,n.jsx)(m.a,{center:!0}),children:T.map(function(e){var t=e.parent_message,i=e.current_participant,o=e.chat_room,a=o.embedded_space_id,s=o.name,l=o.kind,c=o.lesson,u=t.chat_room_uuid,d=t.id,f=W.find(function(e){return e.id===a}),p=f?f.name:s;return(0,n.jsx)(q,{chatRoomData:{uuid:u,current_participant:i,chat_room_kind:l,embedded_space:f,roomName:p,lesson:c},newBadgeIds:C,handleWhenThreadInViewPort:X,thread:e,space:f,setSelectedReply:k,isRenderedOnHeader:r,isViewOnlyMasquerading:y},d)})}),(0,n.jsx)(H,{unreadChatThreadIds:et})]})}},84777:function(e,t,r){"use strict";r.d(t,{M:()=>l});var n=r(85893),i=r(72727),o=r(1168),a=r(59769);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l=function(e){var t=e.isActive,r=void 0!==t&&t,l=e.href,c=void 0===l?"#":l,u=e.name,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isActive","href","name"]),f=(0,i.L)(),p=f.isElectron,m=f.electronAPI;if(p){var b=function(){null==m||m.changeCommunity({name:u,href:c})};return(0,n.jsx)("button",{type:"button","data-testid":"community-switcher-link",className:(0,o.A)("switcher__icon hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150",{"active border-secondary":r}),onClick:b,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b())},children:(0,n.jsx)(a.G,s({includeName:!1,name:u},d))})}return(0,n.jsx)("a",{"data-testid":"community-switcher-link",className:(0,o.A)("switcher__icon hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150",{"active border-secondary":r}),href:c,"aria-label":u,children:(0,n.jsx)(a.G,s({includeName:!1,name:u},d))})}},38557:function(e,t,r){"use strict";r.d(t,{H:()=>F});var n=r(85893),i=r(67294),o=r(70442),a=r(85924),s=r(45273),l=r(6216),c=r(44081),u=r(46977),d=r(84579),f=r(84057),p=r(98694),m=function(e,t){var r=new URL(e);return r.searchParams.set("automatic_login","true"),r.searchParams.set("token",t),r.toString()},b=r(84777),h=function(e){var t=e.community,r=e.token,s=e.index,l="/discover"===(0,o.TH)().pathname,c=(0,a.TC)().isDarkAppearance,h=t.id,y=t.is_current_community,v=t.root_url,g=t.name,_=t.brand_color,x=t.light_brand_color,j=t.dark_brand_color,w=t.community_member_id,O=t.dark_icon_url,S=t.light_icon_url,k=(0,f.f)(),P=k.newNotificationCount,C=k.fetchNewNotificationsCount,N=k.onNotificationEventReceive,A=(0,p.K)({community:t}).unreadChatCount;return(0,i.useEffect)(function(){C(h)},[]),(0,d.I)(w,N),(0,u.y1)("alt+g+".concat(s+1),function(){window.location.href=m(v,r)},{enabled:s+1<9}),(0,n.jsx)(b.M,{isActive:y&&!l,href:m(v,r),icon_attachment_url:c?O||S:S||"",includeName:!1,brand_color:_,light_brand_color:x,dark_brand_color:j,name:g,notificationCount:y?0:P+A,index:s})},y=function(){var e=(0,c.dI)().item;return(0,n.jsx)(h,{community:e,token:"",index:0})},v=r(10605),g=r(57105),_=r(25362),x=r(84326),j=r(34519),w=r(1168),O=r(59769),S=r(75148),k=r(41553),P=r(90926),C=function(e){var t,r,i=e.community,o=e.href,s=e.isDragDisabled,l=void 0!==s&&s,c=(0,a.TC)().isDarkAppearance,u={notificationsCount:Number((0,f.f)().newNotificationCount+(0,P.K$)({community:i}).unreadChatCount)}.notificationsCount;return(0,n.jsxs)("a",{href:o,className:"hover:bg-tertiary focus:bg-tertiary flex items-center justify-between gap-x-1 rounded-xl p-1 transition-colors duration-75",children:[(0,n.jsx)(S.h,{name:"16-drag-handle",ariaLabel:(0,x.t)("community_switcher_drag_handle"),disabled:l,className:(0,w.A)({"cursor-grab":!l,"cursor-grabbing opacity-50":l})}),(0,n.jsxs)("div",{className:"flex w-full items-center gap-3",children:[(0,n.jsx)("div",{className:(0,w.A)("switcher__icon !m-0 flex items-center justify-center rounded-xl border-2 border-transparent",{"active border-secondary":i.is_current_community}),children:(0,n.jsx)(O.G,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={logo_attachment_url:void 0,icon_attachment_url:c?i.dark_icon_url:i.light_icon_url,shouldShowTooltip:!1,notificationCount:u},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}),(0,n.jsx)(k.Z.LabelMd,{weight:"medium",children:i.name})]})]},i.id)},N=function(){var e=(0,c.dI)().item;return(0,n.jsx)(C,{community:e,href:""})};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(){var e,t=(0,_.dd)(),r=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return A(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],s=(0,l.U)(),u=s.communities,d=s.token,f=s.isLoadingCommunities,p=s.isReorderingCommunities,b=s.onSortCommunities;return(0,i.useEffect)(function(){f||a(u)},[u,f]),(0,n.jsxs)(j.u_,{isOpen:t.visible,onClose:t.hide,children:[(0,n.jsx)(j.u_.Overlay,{}),(0,n.jsxs)(j.u_.Content,{children:[(0,n.jsxs)(j.u_.Header,{children:[(0,n.jsx)(j.u_.Title,{children:(0,x.t)("my_communities")}),(0,n.jsx)(j.u_.HeaderActions,{children:(0,n.jsx)(j.u_.CloseButton,{onClick:t.hide})})]}),(0,n.jsx)(j.u_.Body,{className:"md:my-6 md:!px-6 md:!py-0",children:(0,n.jsxs)(c.cm,{items:u,lockedVerticalAxis:!0,onSort:function(e){a(e),b(e,{onError:function(){a(u)}})},shouldUseKeyboardSensor:!1,children:[(0,n.jsx)(c.cm.List,{className:"max-h-96",children:o.map(function(e,t){return(0,n.jsx)(c.cm.Item,{className:"min-h-[3rem] min-w-min",item:e,index:t,tabIndex:-1,disabled:p,children:(0,n.jsx)(C,{community:e,href:m(e.root_url,d),isDragDisabled:p},e.id)},e.id)})}),(0,n.jsx)(c.cm.DragOverlay,{zIndex:1070,children:(0,n.jsx)(N,{})})]})})]})]})},E=g.gk.create(function(){return(0,n.jsx)(I,{})}),T=function(e){var t=e.community,r=e.sortedCommunities,i=e.isReorderingCommunities,o=e.token,a=e.index;return(0,n.jsx)(c.cm.Item,{className:"min-w-min",item:t,index:a,tabIndex:-1,disabled:i||1===(void 0===r?[]:r).length,children:(0,n.jsx)(h,{community:t,token:o,index:a})},t.id)};function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){try{return new URL(e,window.location.origin).origin!==window.location.origin}catch(e){return!1}},B=function(e){var t=e.isLoadingAppData,r=M((0,i.useState)(!1),2),o=r[0],a=r[1],s=(0,i.useRef)(null),u=M((0,i.useState)([]),2),d=u[0],f=u[1],p=(0,l.U)(),m=p.communities,b=p.token,h=p.isLoadingCommunities,_=p.isReorderingCommunities,x=p.onSortCommunities,j=(0,g.dd)(E),w=void 0!==t&&t||h||o,O=m.length>5,S=(0,i.useCallback)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,j.show()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)})})()},[j]),k=(0,i.useCallback)(function(e){f(e),x(e,{onError:function(){f(m)}})},[x,f,m]),P=(0,i.useMemo)(function(){var e=d.findIndex(function(e){return e.is_current_community});if(e>=5)return d[e]},[d]);(0,i.useEffect)(function(){h||f(m)},[m,h]);var C=(0,i.useCallback)(function(e){if(t=e.target,null!=(r=Element)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!r[Symbol.hasInstance](t):!(t instanceof r))return;var t,r,n=e.target.closest("a");if(n){var i=n.getAttribute("href");i&&(e.ctrlKey||e.metaKey||(a(!0),R(i)||(s.current=window.setTimeout(function(){a(!1)},1e3))))}},[a]);return(0,i.useEffect)(function(){return function(){null!==s.current&&(a(!1),window.clearTimeout(s.current),s.current=null)}},[]),(0,n.jsx)(v.w,{id:"community-switcher",isLoading:w,shouldShowShowMoreButton:O,onClickSeeMyCommunities:S,onClick:C,children:(0,n.jsxs)(c.cm,{items:d,lockedVerticalAxis:!0,onSort:k,shouldUseKeyboardSensor:!1,children:[(0,n.jsxs)(c.cm.List,{children:[d.slice(0,5).map(function(e,t){return(0,n.jsx)(T,{community:e,sortedCommunities:d,isReorderingCommunities:_,token:b,index:t},e.id)}),P&&(0,n.jsx)(T,{community:P,sortedCommunities:d,isReorderingCommunities:_,token:b,index:d.length-1},P.id)]}),(0,n.jsx)(c.cm.DragOverlay,{shouldRestrictToParent:!0,children:(0,n.jsx)(y,{})})]})})},F=function(e){var t=(0,o.TH)().pathname,r=(0,s.H)(),l=r.isSettingsPage,c=r.isLivePage,u=t.startsWith("/two_fa"),d=(0,a.wC)().display_community_switcher;return((0,i.useEffect)(function(){l?document.body.classList.remove("has-community-switcher"):d&&document.body.classList.add("has-community-switcher")},[t,l,d]),l||u||c)?null:(0,n.jsx)(B,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}},10605:function(e,t,r){"use strict";r.d(t,{w:()=>O});var n=r(85893),i=r(84326),o=r(72727),a=r(41342),s=r(1168),l=r(80171),c=r(75148),u=r(93296),d=r(52928),f=r(70442),p=r(57363),m=function(){var e="/discover"===(0,f.TH)().pathname;return(0,n.jsx)(l.T,{content:(0,n.jsx)("div",{className:"space-x-2 p-1",children:(0,i.t)("discover.tooltip")}),placement:"right",arrow:!1,offset:[0,12],interactive:!1,children:(0,n.jsx)(d.rU,{"data-testid":"community-switcher-link",className:(0,s.A)("switcher__icon hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150",{active:e,"border-secondary":e}),to:"/discover",children:(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"brand-icon brand-icon__initial !h-8 !w-8 !rounded-lg !outline-none",style:{color:"#FFF",backgroundColor:"#863CFF"},children:(0,n.jsx)(p.JO,{type:"20-discover",size:20})})})})})},b=r(35904),h=function(){var e=(0,b.RE)().borderColor;return(0,n.jsx)("div",{style:{backgroundColor:e},className:(0,s.A)("bg-overlay-dark h-px w-9 rounded-full")})},y=r(91525),v=r(13532),g=function(){var e=(0,y.N3)(),t=null==e?void 0:e.is_admin,r=(0,y.wh)().currentCommunity,o=window.location.href+"?pendo=0oguJmJrou1SpPPXRwwyzbd4Wlo",a=window.location.toString().includes("settings/plans"),s=(null==r?void 0:r.plan_status)==="Expired Trial",c=t&&a&&s?o:(0,v.b$)();return(0,n.jsx)(l.T,{content:(0,i.t)("create_new_community"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,n.jsx)("a",{className:"hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg transition-colors duration-150",href:c,"aria-label":(0,i.t)("create_new_community"),children:(0,n.jsx)(p.JO,{type:"20-plus-v3",size:20})})})},_=r(48266),x=r(504),j=r(85924),w=function(e){var t=(0,_.W)(),r=(0,b.RE)(),n=!!(0,j.TC)().isDarkAppearance,i=(0,f.$B)({path:"/analytics",exact:!1}),o=(0,x.f)();return{presentationClasses:(0,s.A)("community__switcher",e,"min-h-screen",{"!bg-c-switcher border-primary border-r":!n&&!t,"!bg-c-switcher border-c-sidebar border-r":n&&!t}),bodyClasses:(0,s.A)("min-h-screen p-4",{"!bg-c-sidebar overflow-hidden border-r":t,"!top-24":!i&&o}),bodyStyles:r}},O=function(e){var t,r,d=e.children,f=e.isLoading,p=e.shouldShowShowMoreButton,b=e.onClickSeeMyCommunities,y=e.className,v=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","isLoading","shouldShowShowMoreButton","onClickSeeMyCommunities","className"]),_=w(),x=_.presentationClasses,j=_.bodyClasses,O=_.bodyStyles,S=(0,a.wh)(),k=S.currentCommunity,P=S.currentCommunitySettings,C=null==P||!P.discover_button_settings_toggle_enabled||!(null==k?void 0:k.circle_discover_button_hidden),N=(0,o.L)().isElectron;return void 0===f||f?(0,n.jsx)(u.r,{}):(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"data-testid":"community-switcher-presentation",className:(0,s.A)("w-18",y,x)},v),r=r={children:(0,n.jsxs)("div",{"data-testid":"community-switcher-presentation-body",className:(0,s.A)("flex flex-col items-center gap-4",j),style:O,children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[d,p&&(0,n.jsx)(l.T,{content:(0,i.t)("community_switcher_see_my_communities"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,n.jsx)(c.h,{name:"20-menu-dots-horizontal",className:"hover:!bg-c-header-hover !rounded-lg",iconClassName:"!text-c-sidebar group-hover:!text-dark !w-6 !h-6",variant:"secondary",iconSize:20,buttonSize:32,ariaLabel:(0,i.t)("community_switcher_see_my_communities"),onClick:void 0===b?function(){}:b})})]}),p&&(0,n.jsx)(h,{}),C&&(0,n.jsx)(m,{}),!N&&(0,n.jsx)(g,{})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},56833:function(e,t,r){"use strict";r.d(t,{P:()=>a});var n=r(38557),i=r(85893),o=r(85924),a=function(e){var t=e.isLoadingAppData;return(0,i.jsx)(o.e$,{backendProps:{community_theme_settings:{default_appearance:"light"}},children:(0,i.jsx)(n.H,{isLoadingAppData:void 0!==t&&t})})}},61224:function(e,t,r){"use strict";r.d(t,{O:()=>s});var n=r(85893),i=r(84326),o={zIndex:1e3},a=function(e){var t=e.isThirdParty,r=void 0!==t&&t,a=r?(0,i.t)("cookie_warning.third_party_cookies_disabled"):(0,i.t)("cookie_warning.cookies_disabled"),s=r?(0,i.t)("cookie_warning.how_enable_third_party_cookies"):(0,i.t)("cookie_warning.how_enable_cookies");return(0,n.jsx)("div",{className:"h-full w-full",style:o,children:(0,n.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,n.jsxs)("div",{className:"alert-wrapper",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20","aria-hidden":!0,className:"alert-icon flex-no-shrink fill-current",children:(0,n.jsx)("path",{d:"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2z"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:a}),(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:"https://www.whatismybrowser.com/guides/how-to-enable-cookies/auto",target:"_parent",children:s})})]})]})})})},s=function(){return document.cookie?null:window.location!==window.parent.location?(0,n.jsx)(a,{isThirdParty:!0}):(0,n.jsx)(a,{})}},10408:function(e,t,r){"use strict";r.d(t,{C:()=>c});var n=r(85893),i=r(84326),o=r(27742),a=r(85395),s=function(e){var t=e.data;return(0,n.jsx)("div",{children:(0,n.jsx)("pre",{children:JSON.stringify(t,null,2)})})},l="success",c=function(e){var t=e.debug_session,r=e.debug_session_logs;return(0,n.jsx)("div",{className:"custom-login-debug-sessions",children:(0,n.jsx)("div",{className:"custom-login-debug-sessions-content",children:(0,n.jsxs)(a.s,{children:[(0,n.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,n.jsx)("div",{className:"alert-wrapper",children:(0,n.jsx)("div",{children:(0,i.t)("custom_logins.debug_session_logs.experimental_feature_warning")})})}),(0,n.jsx)("br",{}),t.status===l&&(0,n.jsx)("div",{className:"alert alert-success",role:"alert",children:(0,n.jsx)("div",{className:"alert-wrapper",children:(0,n.jsx)("div",{children:(0,i.t)("custom_logins.debug_session_logs.success_sso")})})}),t.status!==l&&(0,n.jsx)("div",{className:"alert alert-error",role:"alert",children:(0,n.jsx)("div",{className:"alert-wrapper",children:(0,n.jsx)("div",{children:(0,i.t)("custom_logins.debug_session_logs.fail_sso")})})}),(0,n.jsx)("br",{}),(0,n.jsx)("h3",{children:(0,i.t)("custom_logins.debug_session_logs.logs")}),(0,n.jsx)("br",{}),r.map(function(e){var t=(0,i.t)("custom_logins.debug_session_logs.".concat(e.step)),r=e.status===l?void 0:t;return(0,n.jsx)(o.U,{defaultActiveItemTitle:r,children:(0,n.jsx)(o.U.Item,{title:t,showIcon:!0,isDone:e.status===l,children:e.context.map(function(e,t){return(0,n.jsx)(s,{data:e},t)})})},e)})]})})})}},29875:function(e,t,r){"use strict";r.d(t,{u:()=>oP});var n=r(85893),i=r(23560),o=r.n(i),a=r(88767),s=r(70442),l=r(84326),c=r(41342),u=r(96486),d=r(67294),f=r(52928),p=r(45697),m=r.n(p),b=r(52293),h=r(60484),y=r(60589),v=r(30133),g=r(51466),_=function(e){var t=e.space,r=e.onChange,i=(0,b.Gc)(),o=i.watch,a=i.setValue,s=i.formState.dirtyFields,c=o("visible_tabs"),u=o("display_view"),f=o("show_right_sidebar"),p=o("hide_member_sidebar"),m="cards"===u,_=(0,y.H3)(t)&&!m,x=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,d.useEffect)(function(){("show_right_sidebar"in s||"hide_member_sidebar"in s||"visible_tabs"in s||"display_view"in s)&&r(!0)},[s.visible_tabs,s.display_view,s.show_right_sidebar,s.hide_member_sidebar]),(0,d.useEffect)(function(){(null==c?void 0:c.includes("members"))?a("hide_member_sidebar",!0):a("hide_member_sidebar",!1)},[t]),(0,d.useEffect)(function(){_&&(p?a("visible_tabs",["posts","members"]):a("visible_tabs",["posts"]))},[p,_]);var j=(0,y.qy)(t),w=(0,y.Ds)(t),O=j?["posts"]:[],S=x||w,k=(0,n.jsx)(g.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.RadioGroup,{fullWidth:!1,labelOutside:!S,options:x?(0,h.Jr)({excludedOptions:O,postType:t.post_type}):(0,h.Nn)({excludedOptions:O,postType:t.post_type}),optionAlignment:S?"row":"center",className:"!grid !grid-cols-1 sm:!grid sm:!grid-cols-3"})});return j||w?(0,n.jsx)("div",{children:k}):(0,n.jsxs)("div",{children:[k,!m&&(0,n.jsx)(g.l.Item,{name:"show_right_sidebar",label:(0,l.t)("spaces.form.edit.customize.right_sidebar"),className:"!pb-0",inlineReverse:!0,hideBorder:!0,hideDescription:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small"})}),_?(0,n.jsx)(g.l.Item,{name:"hide_member_sidebar",label:(0,l.t)("spaces.form.edit.customize.show_sidebar_members_block"),className:"!pb-0",isDisabled:!f,inlineReverse:!0,hideBorder:!0,hideDescription:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{disabled:!f,variant:"small"})}):null]})};_.propTypes={onChange:m().func,space:m().object};var x=r(94184),j=r.n(x),w=function(e){var t=e.onChange,r=e.space,i=e.isEventSpaceCalendarViewEnabled,o=(0,b.Gc)().formState.dirtyFields,a=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,d.useEffect)(function(){"display_view"in o&&t(!0)},[o.display_view]);var s=i?[]:["calendar"];return(0,n.jsx)(g.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.RadioGroup,{variant:"box",name:"display_view",fullWidth:!1,labelOutside:!a,options:a?(0,h.Jr)({excludedOptions:s,postType:r.post_type}):(0,h.Nn)({excludedOptions:s,postType:r.post_type}),optionAlignment:a?"row":"center",className:j()("!grid",i?"!grid-cols-1 !gap-x-6 sm:!grid-cols-3":"!grid-cols-2 !gap-x-7")})})},O=r(15882),S=r(34519),k=function(e){var t=e.onChange,r=e.space,i=e.spaceGroups,o=(0,S.UV)().contentPortalElement,a=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){("space_group_id"in a||"name"in a||"emoji"in a||"custom_emoji"in a||"event_auto_rsvp_enabled"in a||"chat_room_description"in a||"show_next_event"in a||"hide_from_sidebar"in a)&&t(!0)},[a.space_group_id,a.name,a.emoji,a.custom_emoji,a.chat_room_description,a.event_auto_rsvp_enabled,a.show_next_event,a.hide_from_sidebar]),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-0 md:mt-4 md:gap-4",children:[(0,n.jsx)(g.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:(0,l.t)("spaces.form.edit.name_required"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.Input,{prefix:(0,n.jsx)(g.l.EmojiPickerV3Wrapper,{record:r})})}),(0,n.jsx)(g.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:(0,l.t)("spaces.form.edit.choose_space_group"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(O.V,{variant:"form-input",spaceGroups:i,name:"space_group_id",appendTo:o})}),(0,y.Ug)(r)&&(0,n.jsx)(g.l.Item,{name:"chat_room_description",label:(0,l.t)("spaces.form.edit.customize.add_description"),placeholder:(0,l.t)("spaces.form.edit.customize.description_placeholder"),hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.TextArea,{})}),(0,n.jsxs)("div",{children:[(0,y.V5)(r)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.l.Item,{name:"event_auto_rsvp_enabled",label:(0,l.t)("spaces.form.event_auto_rsvp_enabled"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small"})}),(0,n.jsx)(g.l.Item,{name:"show_next_event",label:(0,l.t)("spaces.form.show_next_event"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small"})})]}),(0,n.jsx)(g.l.Item,{name:"hide_from_sidebar",label:(0,l.t)("spaces.form.edit.customize.hide_from_sidebar"),tooltipText:(0,l.t)("spaces.form.edit.customize.hide_from_sidebar_description"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small"})})]})]})};k.propTypes={space:m().object.isRequired,onChange:m().object.isRequired,spaceGroups:m().array.isRequired};var P=r(88663),C=function(e){var t=e.className,r=e.children,i=e.id;return(0,n.jsx)(P.Ar.Main,{id:i,className:"!bg-primary",children:(0,n.jsx)("div",{className:j()("mx-auto max-w-[45rem] p-0 md:px-0 lg:py-8",t),children:r})})};C.propTypes={className:m().string,children:m().node,id:m().string};var N=r(3697),A=r(61641),I=function(e){var t=e.space,r=e.onChange,i=(0,P.eW)().setIsSaveButtonDisabled,o=(0,b.Gc)(),a=o.formState.dirtyFields,s=o.watch,c=o.setValue,u=s("cover_image"),f=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,d.useEffect)(function(){u?c("cover_image_visible",!0):c("cover_image_visible",!1)},[u,c]);var p=!((0,y.Ug)(t)||(0,y.EG)(t)||(0,y.qy)(t));return(0,d.useEffect)(function(){("cover_image_visible"in a||"thumbnail_image"in a)&&r(!0)},[a.cover_image_visible,a.thumbnail_image]),(0,n.jsxs)("div",{children:[p&&(0,n.jsx)(g.l.Item,{inline:!f,hideBorder:!0,label:(0,l.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:(0,l.t)("spaces.form.edit.customize.cover_image_description_v3"),className:"gap-x-6",children:(0,n.jsx)(A.a,{name:"cover_image",aspectRatio:N.pI.COVER_V3,onProcessing:function(e){return i(!!e)}})}),!(0,y.Ug)(t)&&!(0,y.qy)(t)&&(0,n.jsx)(g.l.Item,{inline:!f,hideBorder:!0,label:(0,l.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,y.EG)(t)?(0,l.t)("spaces.form.edit.customize.course_thumbnail_image_description"):(0,l.t)("spaces.form.edit.customize.thumbnail_image_description"),className:"gap-x-6",children:(0,n.jsx)(A.a,{name:"thumbnail_image",aspectRatio:16/9,onProcessing:function(e){return i(!!e)}})})]})};function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function D(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){var t=e.visible_tabs,r=void 0===t?{}:t;return Object.keys(r).filter(function(e){return r[e]})},R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(T(L(T({},(0,u.omit)(t,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","course_setting","require_topic_selection"])),{notification_type:"chat"===t.post_type?t.all_notifications_enabled?"all":t.mention_notifications_enabled?"mentions":t.notifications_off?"never":void 0:D("all"==t.default_notification_setting?["default_notification_setting"]:[]).concat(D("all"==t.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),D("all"==t.default_mobile_notification_setting?["default_mobile_notification_setting"]:[])),show_right_sidebar:!t.hide_right_sidebar,allow_members_to_create_posts:!t.is_post_disabled,allow_members_to_add_others:!t.prevent_members_from_adding_others,allow_post_title:!t.hide_post_settings,allow_cover_images:!t.disable_member_post_covers,show_sorting:!t.hide_sorting,show_to_logged_out_visitors:!t.is_hidden,visible_tabs:M(t),locked_page_description:null==(e=t.locked_page_description)?void 0:e.trix_html}),(0,y.EG)(t)?{course_setting_attributes:t.course_setting}:{},B(t)),{topics:t.topics_order,require_topic_selection:t.require_topic_selection})},B=function(e){var t={};return e.logged_in_space_welcome_banner&&(t={logged_in_title:e.logged_in_space_welcome_banner.title,logged_in_description:T({},e.logged_in_space_welcome_banner.description||{}),logged_in_cover:e.logged_in_space_welcome_banner.cover,logged_in_banner_enabled:e.logged_in_space_welcome_banner.banner_enabled,allow_close:e.logged_in_space_welcome_banner.allow_close,logged_in_media_is_video:e.logged_in_space_welcome_banner.is_video}),e.logged_out_space_welcome_banner&&(t=L(T({},t),{logged_out_title:e.logged_out_space_welcome_banner.title,logged_out_description:T({},e.logged_out_space_welcome_banner.description||{}),logged_out_cover:e.logged_out_space_welcome_banner.cover,logged_out_banner_enabled:e.logged_out_space_welcome_banner.banner_enabled,logged_out_media_is_video:e.logged_out_space_welcome_banner.is_video})),t},F=function(e){var t,r,i=e.onSubmit,o=e.space,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onSubmit","space","children"]),l=(0,d.useMemo)(function(){return o&&R(o)},[o]);return(0,n.jsx)(g.l,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"edit-space-form",onSubmit:i,defaultValues:l,className:"flex h-full flex-col overflow-auto",formClassName:"flex flex-col h-full overflow-auto"},s),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};F.propTypes={onSubmit:m().func.isRequired,space:m().object,children:m().node,triggerFormSubmitRef:m().object};var z=r(93989),U=r(45308),Z=function(e){var t=e.onChange,r=e.sortable,i=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){"topics"in i&&t(!0)},[i,i.topics]),(0,n.jsx)(U.w,{containerClassName:"bg-primary border-primary rounded-md border",sortable:void 0===r||r,creatable:!0,maxTopicsAllowed:z.tt,name:"topics"})},G=r(15817),q=r(41553),V=r(30211),H=r(60878),W=r(11944),Q=r(40174),J=r(13532),K=r(22270),$=r(24804),X=r(63549),Y=r(59892),ee=r(52988),et=r(79840),er=function(e){var t=(e||{}).body;if(!t)return!0;var r=(t||{}).content;return!r||!r.some(function(e){if("paragraph"===e.type&&e.content)return!0})};function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eo="customize_space.welcome_banner",ea=function(e){var t,r=e.isLoggedIn,i=e.setDirty,o=e.onChange,a=e.spaceId,s=(0,H.pm)(),c="".concat(r?"logged_in":"logged_out","_title"),f="".concat(r?"logged_in":"logged_out","_cover"),p="".concat(r?"logged_in":"logged_out","_description"),m=(0,K.m)().reSetWelcomeBannerPreference,h=(t=(0,$.k)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return en(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1],_=(0,b.Gc)(),x=_.formState.dirtyFields,w=_.setValue,O=_.getValues,S=(0,b.qo)({name:"logged_in_banner_enabled"}),k=(0,b.qo)({name:"logged_out_banner_enabled"}),P=O(r?"logged_in_media_is_video":"logged_out_media_is_video"),C=(0,b.qo)({name:p}),N=(0,b.qo)({name:c}),A=(0,b.qo)({name:f}),I=r?S:k,E=r?"logged_in_banner_enabled":"logged_out_banner_enabled",T=r?"enable_for_logged_in_members":"enable_for_logged_out_members";return(0,d.useEffect)(function(){(c in x||p in x)&&o(!0)},[x[c],x[p]]),(0,d.useEffect)(function(){var e=er(C)&&(0,u.isEmpty)(N)&&(0,u.isEmpty)(A);r?i("loggedIn",!!S&&!!e):i("loggedOut",!!k&&!!e)},[null==C?void 0:C.body,r,S,k,N,A]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(et.sI,{label:(0,l.t)([eo,T]),field:E,value:I,onChange:function(){w(E,!I)},className:"mb-2 w-full text-lg font-bold",variant:"large"}),(0,n.jsxs)("div",{className:j()("mx-auto mt-4 flex h-full flex-col",{"cursor-not-allowed opacity-20":!I}),children:[(0,n.jsx)(Q.y,{title:(0,l.t)([eo,"cover_image"]),name:f,description:(0,l.t)([eo,"cover_image_description"]),disabled:!I,removeAttachmentsPath:J.av.spaces.destroy_welcome_banner_cover({id:a}),removeAttachmentsParams:{banner_type:r?"logged_in_space_welcome_banner":"logged_out_space_welcome_banner"},isVideo:P,isSpaceWelcomeBanner:!0}),(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsx)(g.l.Item,{name:c,hideDescription:!0,translationRoot:eo,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,n.jsx)(g.l.Input,{disabled:!I})})}),(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsx)(g.l.Item,{name:p,hideDescription:!0,translationRoot:eo,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,n.jsxs)("div",{className:"border-primary active:border-darkest focus-within:border-darkest h-full max-h-[400px] overflow-y-auto rounded-lg border px-4 py-3",children:[(0,n.jsx)(Y.$,{placeholder:(0,l.t)("customize_space.welcome_banner.write_a_description"),name:"".concat(p,".body"),toolbars:[{portalId:"welcome-banner-description-toolbar",component:ee.o}],className:"max-h-[350px] min-h-[100px] overflow-y-auto",editorClassName:"h-full",sgidToObjectMap:(null==C?void 0:C.sgids_to_object_map)||{},disabledExtensions:["poll","ai_copilot","mention","cta"]}),(0,n.jsx)("div",{id:"welcome-banner-description-toolbar"})]})})}),r&&(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(g.l.Item,{name:"allow_close",description:(0,n.jsxs)("div",{className:"pr-8",children:[(0,l.t)([eo,"allow_close_description"]),(0,n.jsx)("button",{type:"button",onClick:function(){I&&v()},className:"ml-1 cursor-pointer text-sm underline hover:opacity-80",children:(0,l.t)([eo,"reset_preference_title"])})]}),translationRoot:eo,variant:"default",inlineReverse:!0,hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,className:"!items-start",children:(0,n.jsx)(g.l.ToggleSwitch,{name:"allow_close",variant:"small",wrapperClass:"!mt-1"})})}),(0,n.jsx)(X.c,{isOpen:y,onClose:v,onConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,m(a)];case 1:return e.sent(),v(),s.success((0,l.t)("space_welcome_banner.preferences_update_success")),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ei(o,n,i,a,s,"next",e)}function s(e){ei(o,n,i,a,s,"throw",e)}a(void 0)})})()},confirmText:(0,l.t)("confirm"),title:(0,l.t)([eo,"reset_preference_title"]),children:(0,n.jsx)("div",{className:"mb-6",children:(0,l.t)([eo,"reset_preference_description"])})})]})]})},es={logged_in:(0,l.t)("customize_space.welcome_banner.tabs.members"),logged_out:(0,l.t)("customize_space.welcome_banner.tabs.non_members")},el=function(e){var t=e.setDirty,r=e.onChange,i=e.space,o=(0,b.qo)({name:"visibility"});return"calendar"===(0,b.qo)({name:"display_view"})?(0,n.jsx)(q.Z.BodySm,{children:(0,l.t)("customize_space.welcome_banner.info")}):"open"!==o?(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 md:py-4",children:(0,n.jsx)(ea,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null==i?void 0:i.id})}):(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 md:py-4",children:(0,n.jsx)("section",{className:"w-full flex-1",children:(0,n.jsxs)(W.O.Group,{children:[(0,n.jsxs)(W.O.List,{children:[(0,n.jsx)(W.O,{type:"button",children:es.logged_in}),(0,n.jsx)(W.O,{type:"button",children:es.logged_out})]}),(0,n.jsxs)(W.O.Panels,{className:"-mx-1.5",children:[(0,n.jsx)(W.O.Panel,{className:"px-2 py-6",children:(0,n.jsx)(ea,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null==i?void 0:i.id})}),(0,n.jsx)(W.O.Panel,{className:"px-2 py-6",children:(0,n.jsx)(ea,{isLoggedIn:!1,setDirty:t,onChange:r,spaceId:null==i?void 0:i.id})})]})]})})})},ec=function(e){var t=e.onChange,r=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){"require_topic_selection"in r&&t(!0)},[r.require_topic_selection]),(0,n.jsx)("div",{children:(0,n.jsx)(g.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.topics.require_topic_selection"),tooltipText:(0,l.t)("spaces.form.edit.topics.require_topic_selection_tooltip"),name:"require_topic_selection",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{name:"require_topic_selection",variant:"small"})})})},eu=r(66007),ed=r(6439),ef=r(57363),ep=function(e){var t=e.title,r=e.children;return(0,n.jsxs)(q.Z.BodySm,{color:"text-default",textAlign:"left",children:[(0,n.jsxs)("span",{className:"font-medium",children:[t,": "]}),r]})},em=function(e){var t=e.accessDesc,r=e.visibilityDesc,i=e.lockScreenDesc,o=e.isAccessOpen,a=e.isVisibilityOpen;return(0,n.jsxs)("div",{className:"mt-3 grid gap-2 text-left text-sm",style:{gridTemplateColumns:"min-content auto"},children:[(0,n.jsx)(ef.JO,{type:void 0!==o&&o?"16-lock-unlocked":"16-lock",size:16,className:"text-default mt-px !self-start"}),(0,n.jsx)(ep,{title:(0,l.t)("customize_space.access"),children:t}),(0,n.jsx)(ef.JO,{type:void 0===a||a?"16-eye-visible":"16-eye-hidden",size:16,className:"text-default mt-px !self-start"}),(0,n.jsx)(ep,{title:(0,l.t)("customize_space.visibility"),children:r}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ef.JO,{type:"16-document-text",size:16,className:"text-default mt-px !self-start"}),(0,n.jsx)(ep,{title:(0,l.t)("customize_space.lock_screen_page"),children:(0,n.jsx)(eu.Z,{html:i})})]})]})},eb=r(44191),eh="spaces.form.edit.customize",ey=function(e){var t=e.onChange,r=e.onExit,i=(0,b.Gc)().formState.dirtyFields,o="private"===(0,b.qo)({name:"visibility"}),a=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled,s=(0,ed.s)(),c=(0,eb.F)({shouldFilterRestrictedPages:!0}),u=c.pages,p=c.isLoading;return(0,d.useEffect)(function(){("visibility"in i||"lockscreen_site_page_id"in i)&&(null==t||t(!0))},[i.visibility,i.lockscreen_site_page_id]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.l.Item,{name:"visibility",hideDescription:!0,rules:{required:(0,l.t)("spaces.form.create.choose_visibility"),maxLength:255},hideBorder:!0,hideLabel:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.RadioGroup,{variant:a?"box":"radio",name:"visibility",options:[{label:(0,l.t)("spaces.form.create.visibility_types.open"),value:"open",description:(0,n.jsx)(em,{accessDesc:(0,l.t)("customize_space.access_form.open_access"),visibilityDesc:(0,l.t)("customize_space.access_form.open_visibility"),isAccessOpen:!0})},{label:(0,l.t)("spaces.form.create.visibility_types.private"),value:"private",description:(0,n.jsx)(em,{accessDesc:(0,l.t)("customize_space.access_form.private_access"),visibilityDesc:(0,l.t)("customize_space.access_form.private_visibility"),lockScreenDesc:s?(0,l.t)("customize_space.access_form.private_lock_screen"):void 0})},{label:(0,l.t)("spaces.form.create.visibility_types.secret"),value:"secret",description:(0,n.jsx)(em,{accessDesc:(0,l.t)("customize_space.access_form.secret_access"),visibilityDesc:(0,l.t)("customize_space.access_form.secret_visibility")})}],optionAlignment:"left"})}),o&&s&&(0,n.jsxs)(g.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,l.t)([eh,"lockscreen_site_page.label"]),name:"lockscreen_site_page_id",variant:"extra-bottom-margin",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(q.Z.BodySm,{color:"text-default",children:[(0,n.jsx)(eu.Z,{className:"mr-1 inline",html:(0,l.t)([eh,"lockscreen_site_page.description"])}),(0,n.jsx)(f.rU,{to:J.Lo.content.pages,onClick:r,className:"text-default hover:text-dark",children:(0,n.jsx)("u",{children:(0,l.t)([eh,"lockscreen_site_page.manage_all_pages"])})})]})}),!p&&(0,n.jsx)(g.l.SelectNative,{name:"lockscreen_site_page_id",options:u.map(function(e){return{label:e.name,value:e.id}}),className:"w-full rounded-lg py-3 pl-4 pr-8",isPromptDisabled:!1,prompt:(0,l.t)([eh,"lockscreen_site_page",0===u.length?"empty_prompt":"prompt"])})]}),o&&(0,n.jsx)(g.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,l.t)([eh,"show_lock_icon_to_non_members"]),tooltipText:(0,l.t)([eh,"show_lock_icon_to_non_members_description"]),name:"show_lock_icon_for_non_members",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{name:"show_lock_icon_for_non_members",variant:"small"})})]})},ev=r(32050),eg=function(){return(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)(ev.b,{type:"info",title:(0,l.t)("customize_space.draft_warning.title"),description:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(q.Z.BodySm,{children:(0,l.t)("customize_space.draft_warning.description")}),(0,n.jsx)(em,{accessDesc:(0,l.t)("customize_space.draft_warning.access"),visibilityDesc:(0,l.t)("customize_space.draft_warning.visibility"),isVisibilityOpen:!1})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("customize_space.draft_warning.form_title")}),(0,n.jsxs)(q.Z.BodySm,{children:[(0,l.t)("customize_space.draft_warning.form_description"),":"]})]})]})},e_=function(e){var t=e.space,r=e.onChange,i=e.onExit,o=(0,y.EG)(t)&&(0,y.H)(t);return(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.access"),dataTestId:"customize-space-access",variant:"fullScreen",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[o&&(0,n.jsx)(eg,{}),(0,n.jsx)(ey,{onChange:r,onExit:i})]})})},ex=r(57105),ej=r(795),ew="spaces.form.edit.change_space_group",eO=function(e){var t=e.spaceName,r=e.currentSpaceGroupName,i=e.newSpaceGroupName,o=e.onConfirm,a=(0,ex.dd)();return(0,n.jsx)(X.c,{title:(0,l.t)([ew,"title"]),isOpen:a.visible,onClose:a.hide,onConfirm:function(){o(),a.hide()},children:(0,n.jsx)(ej.w,{content:(0,l.t)([ew,"description"],{space_name:t,current_space_group:r,new_space_group:i})})})},eS=ex.gk.create(function(e){var t=e.spaceName,r=e.currentSpaceGroupName,i=e.newSpaceGroupName,o=e.onConfirm;return(0,n.jsx)(eO,{spaceName:t,currentSpaceGroupName:r,newSpaceGroupName:i,onConfirm:o})}),ek=function(e){var t=e.isOpen,r=e.onClose,i=e.onConfirm,o=e.spaceType,a=(0,b.qo)({name:"visibility"}),s=(0,b.Gc)().resetField;return(0,n.jsxs)(X.c,{isOpen:t,title:(0,l.t)("spaces.form.create.change_draft_confirmation.title"),onClose:r,onCancel:function(){s("visibility"),r()},onConfirm:i,confirmVariant:"primary",confirmText:(0,l.t)("spaces.form.create.change_draft_confirmation.confirm_button",{spaceType:o}),children:[(0,l.t)("spaces.form.create.change_draft_confirmation.".concat(a))," ",(0,l.t)("spaces.form.create.change_draft_confirmation.wont_be_able_to_change")]})};function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eP(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ek.propTypes={isOpen:m().bool,onClose:m().func,onConfirm:m().func,spaceType:m().string};var eN=function(e){var t=eC((0,$.k)(!1),2),r=t[0],n=t[1],i=eC((0,$.k)(!1),2),a=i[0],s=i[1];return(0,d.useEffect)(function(){a&&o()(e)&&e()},[a,e]),{shouldShowDraftAccessConfirmaModal:r,toggleDraftAccessConfirmaModal:n,isDraftAccessConfirmed:a,toggleIsDraftAccessConfirmed:s}};function eA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eI(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eE(e,t,r[t])})}return e}function eL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eD=function(e){var t,r=e.space,i=(0,d.useRef)(),a=(0,H.pm)(),s=(t=(0,d.useState)({loggedIn:!1,loggedOut:!1}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eA(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eA(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=s[0],m=s[1],b=(0,G.mx)(),h=b.dirtyForms,v=b.setDirtyForms,g=(0,P.eW)(),x=g.onSave,j=g.onExit,O=(0,y.Ug)(r),S=(0,y.qy)(r),N=(0,c.wh)().currentCommunitySettings||{},A=N.space_description_enabled,E=N.event_space_calendar_view_enabled,T=(0,y.H3)(r)||(0,y.Ds)(r)||(0,y.V5)(r)||(0,y.EG)(r),L=eN((0,d.useCallback)(function(){var e;null==i||null==(e=i.current)||e.call(i)},[i])),D=L.shouldShowDraftAccessConfirmaModal,M=L.toggleDraftAccessConfirmaModal,R=L.isDraftAccessConfirmed,B=L.toggleIsDraftAccessConfirmed,z=function(e){v(eL(eT({},h),{customize:eL(eT({},h.customize),eE({},e,!0))}))},U=(0,c.e2)().records,W=function(e){var t=U.find(function(t){return t.id===e});return!(0,u.isEmpty)(null==t?void 0:t.access_groups)},Q=function(e){var t=U.find(function(t){return t.id===e});return(null==t?void 0:t.name)||""},J=(0,ex.dd)(eS),K=function(e,t){var n=e.visibility;if(p.loggedIn||p.loggedOut)return void a.error((0,l.t)("landing_page.settings.welcome_banner.errors.blank_welcome_banner"));if((0,y.H)(r)&&"draft"!==n&&!R)return void M();var i=function(){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,x({data:e})];case 1:return r.sent(),o()(t)&&t(e,{keepValues:!0}),v(G.Wm),j(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){eI(o,n,i,a,s,"next",e)}function s(e){eI(o,n,i,a,s,"throw",e)}a(void 0)})})()};e.space_group_id!=r.space_group_id&&W(e.space_group_id)?J.show({spaceName:e.name,currentSpaceGroupName:Q(r.space_group_id),newSpaceGroupName:Q(e.space_group_id),onConfirm:function(){i()}}):i()},$=O||S;return(0,n.jsx)(C,{children:(0,n.jsxs)(F,{onSubmit:function(e,t){return K(e,t.reset)},space:r,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-8 md:gap-12",triggerFormSubmitRef:i,children:[(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.general"),dataTestId:"customize-space-general",variant:"fullScreen",isFirstChild:!0,children:(0,n.jsx)(k,{onChange:function(){return z("general")},space:r,spaceGroups:U})}),(0,n.jsx)(e_,{space:r,onChange:function(){return z("access")},onExit:j}),((0,y.H3)(r)||S||(0,y.Ds)(r))&&(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,n.jsx)("div",{className:"h-full",children:(0,n.jsx)(_,{space:r,onChange:function(){return z("customizeLayout")}})})}),T&&(0,n.jsxs)(V.q,{title:(0,y.EG)(r)?(0,l.t)("customize_space.course_topics.title"):(0,l.t)("customize_space.topics.title"),dataTestId:"customize-space-topics",variant:"fullScreen",isFirstChild:!0,children:[(0,n.jsx)("div",{className:"my-1 md:mb-4",children:(0,n.jsxs)(q.Z.BodyMd,{color:"text-light",children:[(0,y.EG)(r)?(0,l.t)("customize_space.course_topics.description"):(0,l.t)("customize_space.topics.description"),(0,n.jsx)(f.OL,{onClick:j,to:"/settings/topics",className:"text-light hover:text-dark ml-0.5",children:(0,n.jsx)("u",{children:(0,y.EG)(r)?(0,l.t)("customize_space.course_topics.manage_topics"):(0,l.t)("customize_space.topics.manage_topics")})})]})}),(0,n.jsx)(Z,{spaceId:r.id,onChange:function(){return z("topics")},sortable:!(0,y.EG)(r)}),!(0,y.EG)(r)&&(0,n.jsx)(ec,{onChange:function(){return z("topics")}})]}),(0,y.V5)(r)&&(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,n.jsx)("div",{className:"h-full",children:(0,n.jsx)(w,{space:r,isEventSpaceCalendarViewEnabled:!!E,onChange:function(){return z("customizeLayout")}})})}),!$&&(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.space_images"),dataTestId:"customize-space-images",variant:"fullScreen",children:(0,n.jsx)(I,{space:r,onChange:function(){return z("images")}})}),A&&(0,y.V5)(r)&&(0,n.jsx)("div",{id:"space-welcome-banner",children:(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.welcome_banner.title"),dataTestId:"customize-space-welcome-banner",variant:"fullScreen",children:(0,n.jsx)(el,{setDirty:function(e,t){m(eL(eT({},p),eE({},e,t)))},onChange:function(){return z("general")},space:r})})}),(0,n.jsx)(ek,{isOpen:D,onClose:M,onConfirm:function(){M(),B()},spaceType:(0,y.EG)(r)?"Course":"Space"})]})})},eM=r(51630),eR=r(31304),eB=r.n(eR),eF=r(6394),ez=r(57462),eU=[{name:"slug",label:(0,l.t)("spaces.form.edit.options.seo.slug"),description:(0,l.t)("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return eB()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:(0,l.t)("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:(0,l.t)("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:(0,l.t)("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:(0,l.t)("spaces.form.edit.options.seo.opengraph_description")}],eZ=function(e){var t=e.onChange,r=e.setImageToDelete,i=(0,b.Gc)(),o=i.getValues,a=i.formState.dirtyFields;return(0,d.useEffect)(function(){("slug"in a||"meta_tag_attributes"in a)&&t(!0)},[a.slug,a.meta_tag_attributes]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:eU.map(function(e){var t=e.name,r=e.label,i=e.description,o=e.transformValue;return(0,n.jsx)(g.l.Item,{hideBorder:!0,hideDescription:!0,label:r,name:t,transformValue:o,tooltipText:i,variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.Input,{})},t)})}),(0,n.jsx)("div",{className:"grid grid-cols-1",children:(0,n.jsxs)("div",{className:"min-h-[255px] w-full",children:[(0,n.jsx)(g.l.Label,{hideBorder:!0,label:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.label")}),(0,n.jsx)(eF.D,{name:"meta_tag_attributes[opengraph_image]",alt:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.label"),className:"relative",showAddCoverBtn:!0,aspectRatio:N.pI.OPEN_GRAPH,changeImageText:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){t(!0),r(o("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,n.jsx)(ez.Z,{title:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.add"),description:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.description")})})]})})]})};eZ.propTypes={setImageToDelete:m().func.isRequired,onChange:m().func.isRequired};var eG=function(e){var t=e.space;return(0,y.EG)(t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.TitleSm,{weight:"bold",children:(0,l.t)("spaces.form.edit.options.course_notifications.title")}),(0,n.jsx)(g.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.course_notifications.new_comment_notification"),tooltipText:(0,l.t)("spaces.form.edit.options.course_notifications.new_comment_notification_tooltip"),name:"course_setting_attributes.new_comment_notification_enabled",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.new_comment_notification_enabled"})})]}):null},eq=function(e){var t=e.space;return(0,y.EG)(t)?(0,n.jsx)(g.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.course_options.enforce_lessons_order"),tooltipText:(0,l.t)("spaces.form.edit.options.course_options.enforce_lessons_order_tooltip"),name:"course_setting_attributes.enforce_lessons_order",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.enforce_lessons_order"})}):null},eV=r(29378);function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eW(e){return function(e){if(Array.isArray(e))return eH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eH(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eH(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eQ=function(e){var t=e.space,r=(0,c.wh)().currentCommunity,i=[];return(0,y.V5)(t)&&(i=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,y.Ug)(t)&&(i=["chat_room_show_history"]),(0,y.Ds)(t)&&(i=["allow_members_to_add_others","allow_members_to_create_posts","hide_from_featured_areas"]),(0,y.H3)(t)&&(i=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]),(0,y.qy)(t)&&(i=["allow_members_to_add_others"]),(0,eV.v)(r)||(0,y.Ug)(t)||(0,y.EG)(t)||(i=eW(i).concat(["show_to_logged_out_visitors"])),i=eW(i).concat(["hide_members_count"]),(0,n.jsxs)("div",{className:"mt-5 flex-1 md:mt-8",children:[(0,n.jsx)(q.Z.TitleSm,{weight:"bold",children:(0,l.t)("spaces.form.edit.options.permissions.label")}),i.map(function(e){return(0,n.jsx)(g.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.permissions.".concat("allow_members_to_create_posts"==e?(0,y.V5)(t)?"allow_members_to_create_events":"allow_members_to_create_posts":e)),name:e,className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small"})},e)})]})};eQ.propTypes={space:m().object};var eJ=function(e){var t,r,n={LATEST:{label:(0,l.t)("latest"),value:"latest"},OLDEST:{label:(0,l.t)("oldest"),value:"oldest"},POPULAR:{label:(0,l.t)("popular"),value:"popular"},LIKES:{label:(0,l.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,l.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,l.t)("alphabetical"),value:"alphabetical"}},i={name:"default_comment_sort",options:[n.LATEST,n.OLDEST]},o={name:"default_sort",options:Object.values(n)},a={name:"default_member_sort",options:[n.LATEST,n.OLDEST,n.ALPHABETICAL]};return(0,y.V5)(e)?[i]:(0,y.qy)(e)?[a]:(0,y.Ds)(e)?[i,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={options:o.options.filter(function(e){return"alphabetical"!==e.value})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)]:[i,o,a]},eK=function(e){var t=e.space,r=eJ(t),i=!(0,y.qy)(t)&&!(0,y.V5)(t);return(0,n.jsxs)("div",{className:"mt-8 flex-1",children:[(0,n.jsx)(q.Z.TitleSm,{weight:"semibold",children:(0,l.t)("spaces.form.edit.options.sort.label")}),i&&(0,n.jsx)(g.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(g.l.ToggleSwitch,{variant:"small"})}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:r.map(function(e){var t=e.name,r=e.options;return(0,n.jsx)(g.l.Item,{hideBorder:!0,label:(0,l.t)("spaces.form.edit.options.sort.".concat(t,".label")),tooltipText:(0,l.t)("spaces.form.edit.options.sort.".concat(t,".description")),hideDescription:!0,name:t,variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.SelectNative,{options:r})},t)})})]})};eK.propTypes={space:m().object.isRequired};var e$=r(28865),eX=(0,d.forwardRef)(function(e,t){var r=e.isOpen,i=e.onClose,o=e.setNotificationsChanged,a=(0,b.Gc)().setValue;return(0,n.jsxs)(X.c,{isOpen:r,title:(0,l.t)("spaces.form.create.notifications_confirm_modal.title"),onClose:i,onCancel:function(){o(!1),a("update_all_members_notifications",!1),setTimeout(function(){return t.current()})},cancelText:(0,l.t)("spaces.form.create.notifications_confirm_modal.new_members"),onConfirm:function(){o(!1),a("update_all_members_notifications",!0),setTimeout(function(){return t.current()})},confirmVariant:"primary",confirmText:(0,l.t)("spaces.form.create.notifications_confirm_modal.all_members"),shouldSubmitOnCancel:!0,children:[(0,l.t)("spaces.form.create.notifications_confirm_modal.description"),(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)(g.l.Item,{hiddenField:!0,name:"update_all_members_notifications",hideDescription:!0,hideBorder:!0,hideLabel:!0,children:(0,n.jsx)(g.l.Input,{type:"hidden"})})})]})});eX.displayName="NotificationsConfirmModal",eX.propTypes={isOpen:m().bool,onClose:m().func,setNotificationsChanged:m().func};var eY=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas","pinned_posts_label","default_comment_sort","notification_type","chat_room_show_history"],e0=(0,d.forwardRef)(function(e,t){var r=e.space,i=e.onChange,o=e.isOpenNotificationsConfirmModal,a=e.toggleNotificationsConfirmModal,s=e.setNotificationsChanged,c=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){var e=Object.keys(c);eY.filter(function(t){return e.includes(t)}).length>0&&i(!0),e.includes("notification_type")&&s(!0)},[c]),(0,n.jsxs)("div",{children:[(0,n.jsx)(e$.V,{}),(0,n.jsx)(eX,{isOpen:o,onClose:a,setNotificationsChanged:s,ref:t}),(0,n.jsx)(eq,{space:r}),(0,n.jsx)(eG,{space:r}),(0,n.jsx)(eQ,{space:r}),(0,y.H3)(r)&&(0,n.jsxs)("div",{className:"mt-10 flex-1",children:[(0,n.jsx)(q.Z.TitleSm,{weight:"semibold",children:(0,l.t)("spaces.form.edit.options.labels.label")}),(0,n.jsx)("div",{className:"grid grid-cols-1",children:(0,n.jsx)(g.l.Item,{hideBorder:!0,label:(0,l.t)("spaces.form.edit.options.labels.pinned_posts.label"),tooltipText:(0,l.t)("spaces.form.edit.options.labels.pinned_posts.description"),hideDescription:!0,name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,n.jsx)(g.l.Input,{placeholder:(0,l.t)("spaces.form.edit.pinned_posts")})})})]}),!(0,y.Ug)(r)&&!(0,y.EG)(r)&&(0,n.jsx)(eK,{space:r})]})});function e1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e2(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function e3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){e3(e,t,r[t])})}return e}function e4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function e5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e1(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e0.displayName="SpaceOptionsForm",e0.propTypes={space:m().object,onChange:m().func,isOpenNotificationsConfirmModal:m().bool,toggleNotificationsConfirmModal:m().func,setNotificationsChanged:m().func};var e8=function(e){var t=e.space,r=e5((0,d.useState)(null),2),i=r[0],a=r[1],s=(0,G.mx)(),c=s.dirtyForms,u=s.setDirtyForms,f=s.onSlugChange,p=(0,P.eW)(),m=p.onSave,b=p.onExit,h=(0,d.useRef)(),y=(0,H.pm)(),v=e5((0,$.k)(!1),2),g=v[0],_=v[1],x=e5((0,d.useState)(!1),2),j=x[0],w=x[1],O=function(e,r){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(j)return _(),[2,!1];n.label=1;case 1:if(n.trys.push([1,5,6,7]),!i)return[3,3];return[4,eM.UK.deleteOpenGraphImage(i)];case 2:n.sent(),a(!1),n.label=3;case 3:return[4,m({data:e,onSuccess:function(e){e.slug!==t.slug&&f(e)}})];case 4:return n.sent(),[3,7];case 5:return n.sent(),y.error(l.Z.t("spaces.form.edit.error")),[3,7];case 6:return o()(r)&&r(e,{keepValues:!0}),u(G.Wm),b(),[7];case 7:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){e2(o,r,i,a,s,"next",e)}function s(e){e2(o,r,i,a,s,"throw",e)}a(void 0)})})()},S=function(e){u(e4(e6({},c),{options:e4(e6({},c.options),e3({},e,!0))}))};return(0,n.jsx)(C,{children:(0,n.jsxs)(F,{onSubmit:function(e,t){return O(e,t.reset)},space:t,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-4",triggerFormSubmitRef:h,children:[(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.options"),dataTestId:"customize-space-options",variant:"fullScreen",children:(0,n.jsx)(e0,{space:t,onChange:function(){return S("options")},ref:h,isOpenNotificationsConfirmModal:g,toggleNotificationsConfirmModal:_,setNotificationsChanged:w})}),(0,n.jsx)(V.q,{title:(0,l.t)("customize_space.seo"),dataTestId:"customize-space-seo",variant:"fullScreen",children:(0,n.jsx)(eZ,{space:t,onChange:function(){return S("seo")},setImageToDelete:a})})]})})};e8.propTypes={space:m().object};var e9=r(65824),e7=r(51169),te=r(93199);function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var tn=function(e){var t=e.space,r=(0,a.useQuery)(J.av.paywalls.index(),{enabled:!!(null==t?void 0:t.id),refetchOnWindowFocus:!1}),n=r.data,i=void 0===n?[]:n,o=r.isLoading,s=r.refetch,l=i.filter(function(e){return e.space_ids.includes(t.id)||e.space_group_ids.includes(t.space_group_id)}),c=i.filter(function(e){return!e.space_ids.includes(t.id)}),u=function(e){return{space_group_ids:e.space_group_ids,all_spaces:e.all_spaces,trial_days:e.trial_days}},d=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.paywalls.update({paywallId:e.id}),{paywall:tr({space_ids:e.space_ids.filter(function(e){return e!==t.id})},u(e))})},{onSuccess:s}),f=d.mutate,p=d.isLoading,m=(0,a.useMutation)(function(e){var r;return(0,te.aU)(J.av.paywalls.update({paywallId:e.id}),{paywall:tr({space_ids:((function(e){if(Array.isArray(e))return tt(e)})(r=e.space_ids)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return tt(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t.id])},u(e))})},{onSuccess:s}),b=m.mutate,h=m.isLoading;return{paywalls:i,isLoading:o||p||h,removePaywall:f,addPaywall:b,refetchPaywalls:s,currentPaywalls:l,availablePaywalls:c}},ti=function(e){var t=e.space,r=e.spaceGroup,i=!!r.automatically_add_members_to_new_spaces,o=!!r.add_members_to_space_group_on_space_join;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.TitleSm,{weight:"semibold",children:(0,l.t)("customize_space.paywalls.subtitle")}),(0,n.jsx)(q.Z.BodyMd,{color:"text-default",children:(0,n.jsxs)("ul",{className:"mt-3 space-y-0.5 px-2",children:[(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_1")}),(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_2")}),(i||o)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_3")}),o&&(0,n.jsx)("li",{className:"ml-4",children:(0,l.t)("customize_space.paywalls.description.li_3_1")}),i&&(0,n.jsx)("li",{className:"ml-4",children:(0,l.t)("customize_space.paywalls.description.li_3_2")})]}),!(0,y.H)(t)&&(0,y.fL)(t)&&(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_4")}),(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_5")}),(0,n.jsxs)("li",{children:[(0,l.t)("customize_space.paywalls.description.li_6.prefix")," ",(0,n.jsx)("a",{href:"https://help.circle.so/c/paywall-setup/",target:"_blank",rel:"noreferrer",children:(0,l.t)("customize_space.paywalls.description.li_6.link")})]})]})})]})};ti.propTypes={space:m().object.isRequired,spaceGroup:m().object.isRequired};var to=r(60221),ta=r(2754),ts=r(74376),tl=r(17617),tc=r(43544);function tu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function td(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tu(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tf=function(e){var t=e.paywall,r=e.showRemove,i=e.onRemove,o=e.refetchPaywalls,a=td((0,$.k)(!1),2),s=a[0],c=a[1],u=(0,tl.en)(),f=td((0,d.useState)(!1),2),p=f[0],m=f[1],b=(0,ts.I)().show,h=function(){i(t),c()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.c,{isOpen:s,title:(0,l.t)("customize_space.paywalls.remove_modal.title"),onClose:c,onCancel:c,onConfirm:function(){return h()},confirmVariant:"danger",children:(0,l.t)("customize_space.paywalls.remove_modal.description",{name:t.display_name})}),(0,n.jsxs)(tc.Lt,{direction:"bottom-end",className:j()("text-dark flex justify-end",{"invisible group-hover:visible":u&&!p}),button:(0,n.jsx)("span",{className:"hover:bg-tertiary flex h-6 w-6 items-center justify-center rounded transition-colors",children:(0,n.jsx)(ef.JO,{type:"20-menu-dots-horizontal",className:"text-default",size:20})}),onToggle:m,children:[(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),b({paywall:t,refetchPaywalls:o})},children:(0,l.t)("edit")}),void 0!==r&&r&&(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),c()},children:(0,l.t)("customize_space.paywalls.remove")})]})]})},tp=r(38120),tm=function(e){var t=e.paywall;return(0,n.jsx)(tp.C,{variant:"active"===t.status?"success":"default",children:(0,l.t)("settings.paywalls.status.".concat(t.status))})};tm.propTypes={paywall:m().object.isRequired};var tb=r(1168),th="uppercase !px-0 !text-default !text-xxs !text-light",ty="h-14 group px-0 text-default",tv=[{dataIndex:"display_name",key:"display_name",title:(0,l.t)("customize_space.paywalls.table_columns.paywall"),shouldWrap:!0,className:th,tdClassName:(0,tb.A)(ty,"!text-dark !font-medium")},{dataIndex:"unlocked_by",key:"unlocked_by",title:(0,l.t)("customize_space.paywalls.table_columns.unlocked_by"),shouldWrap:!0,className:th,tdClassName:(0,tb.A)(ty,"!font-medium")},{dataIndex:"pricing",key:"pricing",title:(0,l.t)("customize_space.paywalls.table_columns.pricing"),className:th,tdClassName:(0,tb.A)(ty,"!whitespace-normal w-48")},{dataIndex:"status",key:"status",title:(0,l.t)("customize_space.paywalls.table_columns.status"),className:th,tdClassName:ty},{dataIndex:"actions",key:"actions",title:" ",className:(0,tb.A)(ty,"w-2 !text-right"),tdClassName:(0,tb.A)(ty,"w-2 !text-right !py-0")}],tg=function(e,t){return e.space_ids.includes(t.id)},t_=function(e,t){var r=[];return tg(e,t)&&r.push("Space"),e.space_group_ids.includes(t.space_group_id)&&r.push("Space Group"),r.join(", ")},tx=function(e){var t=e.paywalls,r=e.space,i=e.onRemove,o=e.refetchPaywalls;if(0===t.length)return null;var a=t.map(function(e){return{key:e.id,rowClassName:"group",display_name:e.display_name,unlocked_by:t_(e,r),pricing:(0,to.QC)(e),status:(0,n.jsx)(tm,{paywall:e}),actions:(0,n.jsx)(tf,{paywall:e,showRemove:tg(e,r),refetchPaywalls:o,onRemove:i})}});return(0,n.jsx)(ta.w,{variant:"no-border",className:"mt-2 lg:mt-2",columns:tv,dataSource:a})};tx.propTypes={space:m().object,paywalls:m().arrayOf(m().object).isRequired,isLoading:m().bool.isRequired,onRemove:m().func,refetchPaywalls:m().func};var tj=function(e){var t=e.paywalls,r=e.onClick,i=e.isLoading,o=e.appendTo,a=(0,s.k6)(),c=(0,P.eW)().onExit;return(0,n.jsx)("div",{className:"mt-4 lg:mt-7",children:(0,n.jsxs)(tc.Lt,{size:"full",direction:"bottom",className:"w-full",buttonClassName:"flex justify-between px-4 w-full rounded-lg border border-primary h-11 items-center",menuWrapperClassName:"px-0 mt-1",popperOptions:{strategy:"absolute"},button:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.LabelMd,{children:(0,l.t)("customize_space.paywalls.link_paywall")}),(0,n.jsx)(ef.JO,{size:16,type:"caret-down-bold",useWithFillCurrentColor:!0,className:"text-dark -mr-1.5"})]}),appendTo:o,children:[i?(0,n.jsx)(tc.Lt.Item,{children:(0,n.jsx)(e7.a,{center:!0})}):(0,n.jsxs)("div",{className:"max-h-40 overflow-scroll",children:[!t.length&&(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)(tc.Lt.Item,{children:(0,n.jsx)(q.Z.LabelSm,{children:(0,l.t)("customize_space.paywalls.no_paywalls")})})}),t.map(function(e){return(0,n.jsxs)(tc.Lt.ItemLink,{onClick:function(){return r(e)},disabled:i,children:[e.display_name," - ",(0,to.QC)(e)]},e.id)})]}),(0,n.jsxs)(tc.Lt.ItemLink,{className:"hover:bg-secondary hover:text-dark flex w-full items-center gap-2.5 px-4 py-2",onClick:function(){a.push("/settings/paywalls"),c()},children:[(0,n.jsx)("span",{className:"flex",children:(0,n.jsx)(ef.JO,{type:"16-plus-v2",size:16,className:"text-dark w-4"})}),(0,n.jsx)(q.Z.LabelSm,{children:(0,l.t)("customize_space.paywalls.create_paywall")})]})]})})};tj.propTypes={paywalls:m().arrayOf(m().object).isRequired,onClick:m().func.isRequired,isLoading:m().bool,appendTo:m().node};var tw=function(){var e=(0,c.L2)().data,t=(0,c.e2)().helpers.findById(e.space_group_id),r=tn({space:e}),i=r.isLoading,o=r.currentPaywalls,a=r.availablePaywalls,s=r.removePaywall,l=r.addPaywall,u=r.refetchPaywalls,d=(0,S.UV)().contentPortalElement;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ti,{space:e,spaceGroup:t}),(0,n.jsx)(tj,{paywalls:a,onClick:l,isLoading:i,appendTo:d}),i?(0,n.jsx)(e7.a,{center:!0}):(0,n.jsx)(tx,{space:e,paywalls:o,isLoading:i,onRemove:s,refetchPaywalls:u})]})},tO=function(){var e=(0,c.wh)(),t=e.currentCommunity,r=e.currentCommunityMember;return!e.isLoading&&t&&r?(0,n.jsxs)(C,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(q.Z.TitleSm,{weight:"bold",children:(0,l.t)("customize_space.paywalls.title")})}),(0,n.jsx)("div",{className:"mt-5 lg:mt-9",children:t.has_payment_processor_enabled?(0,n.jsx)(tw,{}):(0,n.jsx)(e9.R,{shouldHideHeader:!0,paymentProcessor:t.payment_processor,paywallGroupsEnabled:r.policies.paywall_group_enabled})})]}):null},tS=r(46517),tk=r(217),tP=r(94612),tC=r(78940);function tN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tA(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var tI=r(80171),tE=r(17679),tT=r(14598),tL=r(86003),tD=r(1866),tM=r(78793),tR=r(39905);function tB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tB(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tz=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.admin?"Admin":e.moderator&&r.includes(t)?"Moderator":"Member"},tU=function(e){var t,r,i=e.space,o=(0,H.pm)(),s=(0,a.useQueryClient)(),u=tF((0,d.useState)(!1),2),f=u[0],p=u[1],m=tF((0,d.useState)(!1),2),b=m[0],h=m[1],v=tF((0,d.useState)(""),2),g=v[0],_=v[1],x=tF((0,d.useState)(null),2),j=x[0],w=x[1],O=(0,c.wh)().currentCommunityMember,S=(0,tT.H)(),k=S.showOwnProfileEdit,P=S.showMemberProfileEdit,N=(0,tE.I)({spaceId:i.id}),A=N.count,I=N.isLoading,E=(0,tS.z)(),T=(0,tC.fd)({sort:tC.zw.ROLE,filters:{space_id:i.id},query:g}),L=T.isLoading,D=T.hasNextPage,M=T.fetchNextPage,R=T.members,B=T.queryKey,F=i.space_members_limit_reached,z=void 0!==F&&F,U=i.space_members_limit,Z=(t={onError:function(e){o.error(e.message)},onSuccess:function(){s.invalidateQueries(B),o.success((0,l.t)("spaces.form.edit.members.members_removed"))},onSettled:function(){p(!1),h(!1),w(null)}},(0,a.useMutation)(function(e){var t=e.spaceId,r=e.memberId;return(0,te.pC)(J.av.spaceMembers.leaveSpace({spaceId:t,memberId:r}))},t)).mutate,G=(r={onError:function(e){o.error(e.message)},onSuccess:function(){s.invalidateQueries(B),o.success((0,l.t)("spaces.form.edit.members.changed_role"))}},(0,a.useMutation)(function(e){var t,r=e.spaceId,n=e.memberId,i=e.isModerator;return(t=function(){var e,t,o;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:return[4,(0,te.UT)(J.av.communityMember.settings({memberId:n}))];case 1:var s,l;return t=(e=a.sent()).moderating_space_ids||[],o=i?((function(e){if(Array.isArray(e))return tN(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return tN(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tN(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([r]):t.filter(function(e){return e!==r}),[2,(0,te.aU)(J.av.communityMember.update({memberId:n}),(s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),l=l={moderator_space_ids:o},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(l,e))}),s))]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){tA(o,n,i,a,s,"next",e)}function s(e){tA(o,n,i,a,s,"throw",e)}a(void 0)})})()},r)).mutate,V=b?(0,l.t)("spaces.form.edit.members.removing"):(0,l.t)("spaces.form.edit.members.remove_member");if(L)return(0,n.jsx)("div",{className:"flex w-screen justify-center",children:(0,n.jsx)(e7.a,{})});var W=R.map(function(e){var t=e.id,r=e.avatar_url,n=e.name,o=e.email,a=e.roles,s=e.moderating_space_ids,l=e.public_uid,c=e.current_space_member,u=e.last_seen_at;return{id:t,avatarUrl:r,name:n,email:o,role:tz(a,i.id,s),publicUid:l,lastActive:u,currentSpaceMember:void 0===c?null:c}});return(0,n.jsxs)(C,{id:"scrollable-container",className:"!max-w-6xl px-0 md:!px-6",children:[(0,n.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 md:gap-0",children:[(0,n.jsx)("div",{children:(0,n.jsxs)(q.Z.TitleSm,{weight:"bold",children:[(0,l.t)("customize_space.members")," ",!I&&"(".concat(A,")"),(0,y.H)(i)&&(0,n.jsx)(tI.T,{content:(0,l.t)("courses.admin_summary.waitlist_tooltip"),placement:"right",children:(0,n.jsx)(ef.JO,{type:"16-clock",className:"ml-2",size:16})})]})}),(0,n.jsxs)("div",{className:"flex w-full justify-between gap-4 md:flex-1 md:justify-end",children:[(0,n.jsx)(tD.n,{spaceId:i.id}),(0,n.jsx)(tI.T,{content:(0,l.t)("chat_space.member_limit_title",{member_limit:void 0===U?0:U}),disabled:!z,children:(0,n.jsx)(tR.z,{variant:"secondary",onClick:function(){return E.show({spaceId:i.id})},disabled:z,children:(0,y.H)(i)?(0,l.t)("customize_space.add_waitlist"):(0,l.t)("customize_space.add_members")})})]})]}),(0,n.jsx)("div",{className:"border-primary mt-6 flex flex-row items-center border-y py-3 lg:mt-8",children:(0,n.jsx)(tL.h,{onSearch:_,placeholder:(0,l.t)("spaces.form.edit.members.search_members")})}),(0,n.jsx)("div",{className:"h-full overflow-auto pt-4",children:(0,n.jsx)(tP.r,{searchTerm:g,members:W,dataLength:R.length,next:M,hasMore:D,shouldHideAddMemberButton:!0,onEdit:function(e){var t,r,n=e.id,i=e.publicUid;if((null==O?void 0:O.id)==n)return k();P({member:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={public_uid:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)})},onAdd:function(){return E.show({spaceId:i.id})},onRemove:function(e){w(e),p(!0)},onRoleChange:function(e,t){var r=t===tM.K.MODERATOR;G({spaceId:i.id,memberId:e,isModerator:r})},scrollableTarget:"scrollable-container",shouldShowHeader:!0,cellVariant:"no-x-padding"})}),(0,n.jsx)(tk.G,{isOpen:f,onClose:function(){return p(!1)},onConfirm:function(){j&&f&&(h(!0),Z({spaceId:i.id,memberId:j}))},disabled:b,confirmText:V})]})};tU.propTypes={space:m().object};var tZ=r(12535),tG=function(e){var t=e.onClose;return(0,n.jsx)(C,{id:"scrollable-container",className:"!max-w-6xl px-0 md:!px-6",children:(0,n.jsx)(tZ.k,{category:"administrative",pageSize:4,onClose:t,shouldAutoAdjust:!0})})},tq=r(18580),tV=r(37774),tH=function(e,t){var r=t.id,n=t.value;return t.resetOthers&&e.clear(),e.set(r,n),new Map(e)},tW=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;return(0,d.useReducer)(tH,e)},tQ=r(20624),tJ=r(24512);function tK(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var t$=function(e){var t=e.sections,r=e.variant,i=e.setIsNameEditable,o=(0,c.L2)().data,s=(0,tJ.d)().translatedLabels,d=(0,a.useQueryClient)(),f=(0,a.useMutation)(function(e){return(0,te.Cu)(J.av.courses.createSection({courseId:o.id}),e)},{onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,d.invalidateQueries((0,tq.bD)(o.id))];case 1:return t.sent(),(0,u.defer)(function(){var t=document.querySelector("#section-item-".concat(e.id));t&&t.scrollIntoView({behavior:"smooth"}),i(e.id)}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){tK(o,n,i,a,s,"next",e)}function s(e){tK(o,n,i,a,s,"throw",e)}a(void 0)})})()}}),p="".concat((0,l.t)("courses.edit.sections.untitled_with_label",{label:s.section.singular.toLowerCase()})," - ").concat(t.length+1);return(0,n.jsx)(tR.z,{variant:void 0===r?"primary":r,disabled:f.isLoading,onClick:function(){f.mutate({course_section:{name:p,drip_delay:0,lesson_order:[]}})},children:I18n.t(f.isLoading?"courses.edit.sections.adding":"courses.edit.sections.add_section")})};t$.propTypes={sections:m().arrayOf(m().object),variant:m().oneOf(["primary","secondary"]),setIsNameEditable:m().func.isRequired};var tX=function(e){var t=e.sections,r=e.dispatchSectionsNameEditor;return(0,n.jsxs)("div",{className:"border-primary flex h-72 flex-col items-center justify-center rounded-lg border",children:[(0,n.jsx)("div",{children:(0,n.jsx)(q.Z.TitleSm,{weight:"semibold",children:I18n.t("courses.edit.sections.empty_state.title")})}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(q.Z.BodyMd,{children:I18n.t("courses.edit.sections.empty_state.description")})}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(t$,{sections:t,variant:"secondary",setIsNameEditable:function(e){return r({id:e,value:!0})}})})]})};tX.propTypes={sections:m().array.isRequired};var tY=r(95684),t0=r(45587),t1=r(65119),t2=r(56060);function t3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function t4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function t5(e){return function(e){if(Array.isArray(e))return t3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return t3(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t3(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t8=function(e){var t=e.sections,r=e.setSections,i=e.setActiveDragItem,o=e.children,s=(0,c.L2)().data,l=(0,tY.Dy)((0,tY.VT)(tY.we)),u=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.reorder({courseId:null==s?void 0:s.id}),e)}),d=function(e){var t,r,n,i;return"section"===(null==e||null==(r=e.data)||null==(t=r.current)?void 0:t.dragType)?e.id:null==e||null==(i=e.data)||null==(n=i.current)?void 0:n.sectionSortId};return(0,n.jsx)(tY.LB,{sensors:l,onDragStart:function(e){return i(e.active)},onDragEnd:function(){u.mutate({new_order:t.map(function(e){return{section_id:e.id,lesson_ids:e.lessons.map(function(e){return e.id})}})}),i(null)},onDragOver:function(e){var n,i,o,a,s=e.active,l=e.over,c=null==s?void 0:s.id,u=null==l?void 0:l.id;if(c&&u&&c!==u){var f=null==s||null==(i=s.data)||null==(n=i.current)?void 0:n.dragType,p=null==l||null==(a=l.data)||null==(o=a.current)?void 0:o.dragType;if(f&&p){if("section"==f){if("lesson"==p)return;return r(function(e){var t=e.findIndex(function(e){return e.sortId==c}),r=e.findIndex(function(e){return e.sortId==u});return(0,t0.Rp)(e,t,r)})}var m=d(l),b=d(s),h=b===m,y=b!==m,v=t.find(function(e){return e.sortId==b}).lessons.find(function(e){return e.sortId==c});return r(function(e){return e.map(function(e){if(h&&e.sortId===m){var t=e.lessons.findIndex(function(e){return e.sortId===c}),r=e.lessons.findIndex(function(e){return e.sortId===u});return r<0?e:t4(t6({},e),{lessons:(0,t0.Rp)(e.lessons,t,r)})}if(y&&e.sortId===b)return t4(t6({},e),{lessons:e.lessons.filter(function(e){return e.sortId!==c})});if(y&&e.sortId===m){var n=e.lessons.findIndex(function(e){return e.sortId===u});return t4(t6({},e),{lessons:t5(e.lessons.slice(0,n)).concat([v],t5(e.lessons.slice(n)))})}return e})})}}},children:o})},t9=r(24285),t7=r(34870),re=r(76987),rt=(0,r(64100).Ue)(function(e){return{isDirty:!1,setIsDirty:function(t){return e({isDirty:t})}}}),rr=r(44820),rn=r(65978),ri=r(41769),ro=function(e){var t=e.section,r=e.options;return{changeNotifyStudentsEnabledMutation:(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)},r)}},ra=function(e){var t=e.section,r=e.options;return{emailNotificationMutation:(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)},r)}},rs=r(16823),rl=r(97389),rc=r(76234),ru=r(27753),rd=[{group:(0,l.t)("dynamic_vars_groups.community"),label:"{{community.name}}",value:"{{community.name}}"},{group:(0,l.t)("dynamic_vars_groups.member"),label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:(0,l.t)("dynamic_vars_groups.member"),label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:(0,l.t)("dynamic_vars_groups.course"),label:"{{space.name}}",value:"{{space.name}}"},{group:(0,l.t)("dynamic_vars_groups.course"),label:"{{section.name}}",value:"{{section.name}}"},{group:(0,l.t)("dynamic_vars_groups.course"),label:"{{first_lesson_in_section.link}}",value:"{{first_lesson_in_section.link}}"}];function rf(e){var t=e.editor,r=e.isEditorFocused,i=e.portalId;if(!t)return null;var o=j()(r?"text-default dark:text-dark":"text-lightest dark:text-default");return(0,n.jsx)(rc.Z,{container:function(){return document.getElementById(i)},children:(0,n.jsx)(ru.m,{wrapperClassName:"px-8 w-80 pt-3",optionsClassName:"bottom-8",className:o,variables:rd,editor:t,tooltipPlacement:"top"})})}function rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rm=function(e){var t,r,i,o,a=e.section,s=e.initialFocusRef,c=rt().setIsDirty,u=(0,b.Gc)(),f=u.formState.isDirty,p=u.getValues,m=(t=(0,d.useState)(!(0,ri.NU)(p("email_notification_body"))),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rp(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rp(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=m[0],y=m[1],v=!(null==(r=a.serialized_email_notification_body)?void 0:r.body)&&!a.email_notification_subject;(0,d.useEffect)(function(){c(f)},[c,f]),(0,d.useEffect)(function(){v&&c(!0)},[c,v]);var _="courses.edit.sections.notify_students_modal.form";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.l.Item,{name:"email_notification_subject",className:"!items-center !py-0 px-8",label:(0,l.t)("".concat(_,".email_notification_subject")),labelWrapperClassName:"!w-auto grow-0",labelClassName:"!m-0",hideDescription:!0,inline:!0,children:(0,n.jsx)(g.l.Input,{maxLength:"255",ref:s,placeholder:(0,rs.wB)((0,l.t)([_,"email_notification_subject_placeholder"])),otherClassName:"!px-0 !autofill:bg-yellow-200",focusRequired:!1,autoComplete:"off",hideBorder:!0})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{id:"drip-email-notification-editor-toolbar"}),(0,n.jsx)(Y.$,{editorClassName:"mt-4 h-80 overflow-y-scroll px-8",onChangeCallback:function(e){y(!(0,ri.NU)({body:e}))},placeholder:(0,l.t)("".concat(_,".email_notification_body_placeholder")),name:"email_notification_body[body]",sgidToObjectMap:(null==(i=a.serialized_email_notification_body)?void 0:i.sgids_to_object_map)||{},inlineAttachments:(null==(o=a.serialized_email_notification_body)?void 0:o.inline_attachments)||[],disabledExtensions:["mention","poll","cta"],disabledSlashMenuCategories:["Embed"],aiCopilotTitle:a.name,shouldPreviewFilesAsLinks:!0,shouldShowTextModifiersMenu:!1,toolbars:[{portalId:"drip-email-notification-editor-toolbar",component:rl.j},{portalId:"drip-email-notification-variables-toolbar",component:rf}]}),h&&(0,n.jsx)("p",{className:"absolute bottom-2 right-8 text-red-500",children:(0,l.t)("".concat(_,".required"))})]}),(0,n.jsx)("div",{id:"drip-email-notification-variables-toolbar"})]})},rb=r(88897),rh=r(43557),ry=r(91077),rv=r(55963);function rg(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var r_="edit-course-type-form",rx="courses.edit.sections.notify_students_modal.form",rj=function(e){var t,r,i=e.section,o=e.onSuccess,a=e.onSubmit,s=e.onError,c=e.initialFocusRef,u=e.isEdit,d=(0,H.pm)(),f=d.success,p=d.error,m=(0,tJ.d)().translatedLabels,b=(0,tq.rF)(i.space_id).refetch,h=ra({section:i,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,b()];case 1:return e.sent(),f((0,l.t)("".concat(rx,".save_success")),{duration:"short",shouldUseProgress:!1}),o(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rg(o,n,i,a,s,"next",e)}function s(e){rg(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){p((0,l.t)("".concat(rx,".save_error"))),s()}}}).emailNotificationMutation,y=rn.Ry().shape({email_notification_subject:rn.Z_().required((0,l.t)("".concat(rx,".required"))),email_notification_body:rn.Ry().test({test:function(e){return(0,ri.NU)(e)},message:(0,l.t)("".concat(rx,".required"))})}),v={email_notification_subject:i.email_notification_subject||(0,l.t)("".concat(rx,".email_notification_subject_placeholder")).replace(/[{}]/g,function(e){return"".concat(e).concat(e)}),email_notification_body:{body:(null==(r=i.serialized_email_notification_body)?void 0:r.body)||(t=m.section.singular.toLowerCase(),(0,rb.AW)((0,l.t)("courses.edit.sections.notify_students_modal.form.email_notification_body_default_text",{sectionLabelSingular:t}).replace(/[{}]/g,function(e){return"".concat(e).concat(e)}),[rh.Z,ry.Z,rv.Z]))}};return(0,n.jsx)(g.l,{id:r_,onSubmit:function(e){h.mutate({course_section:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,!u&&{notify_students_enabled:!0})}),a()},preventAccidentalLeave:!0,validationSchema:y,className:"divide-primary divide-y",formClassName:void 0,defaultValues:v,children:(0,n.jsx)(rm,{section:i,initialFocusRef:c})})};function rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rO=function(e){var t,r=e.section,i=e.isOpen,o=e.isOpenForEdit,a=e.onClose,s=e.shouldShowNotificationMessage,c=(t=(0,d.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rw(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rw(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1],p=(0,d.useRef)(null),m=rt(),b=m.isDirty,h=m.setIsDirty,y=function(){(!b||confirm((0,l.t)("prevent_accidental_leave_message")))&&a()};return(0,n.jsxs)(S.u_,{isOpen:i||o,onClose:y,contentPortalId:"course-type-picker-portal",initialFocus:p,children:[(0,n.jsx)(S.u_.Overlay,{}),(0,n.jsxs)(S.u_.Content,{size:"lg",children:[(0,n.jsxs)(S.u_.Header,{children:[(0,n.jsx)(S.u_.Title,{size:"sm",children:(0,l.t)("courses.edit.sections.notify_students_modal.title")}),(0,n.jsx)(S.u_.HeaderActions,{children:(0,n.jsx)(S.u_.CloseButton,{onClick:y})})]}),(0,n.jsxs)(S.u_.Body,{className:"!px-0",children:[s&&!o&&(0,n.jsxs)("div",{className:"border-primary bg-secondary flex items-start border px-8 py-6",children:[(0,n.jsx)("div",{className:"mr-3 pt-0.5",children:(0,n.jsx)(ef.JO,{type:"20-alert",className:"w-4"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-1",children:(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:(0,l.t)("courses.edit.sections.notify_students_modal.notify_your_members_title")})}),(0,n.jsx)(q.Z.BodySm,{children:(0,l.t)("courses.edit.sections.notify_students_modal.notify_your_members_message")})]})]}),(0,n.jsx)(rj,{section:r,isEdit:o,onSuccess:function(){h(!1),a(),setTimeout(function(){return f(!1)},100)},onSubmit:function(){return f(!0)},onError:function(){f(!1),h(!0)},initialFocusRef:p})]}),(0,n.jsxs)(S.u_.Footer,{className:"flex justify-end border-t",children:[!u&&(0,n.jsx)(tR.z,{type:"button",variant:"secondary",className:"mr-2",onClick:y,children:(0,l.t)("cancel")}),(0,n.jsx)(rr._,{type:"submit",variant:"circle",form:r_,submitting:u,children:(0,l.t)("save")})]})]})]})};function rS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rk(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function rP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rS(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rC="courses.edit.sections.notify_students_modal.form",rN=function(e){var t,r=e.section,i=e.space,o=rP((0,d.useState)(!!r.notify_students_enabled),2),a=o[0],s=o[1],c=rP((0,d.useState)(!1),2),u=c[0],f=c[1],p=rP((0,d.useState)(!1),2),m=p[0],b=p[1],h=(0,H.pm)(),y=h.success,v=h.error,g=(0,tq.rF)(r.space_id).refetch,_=ro({section:r,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),y((0,l.t)("".concat(rC,".save_success")),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rk(o,n,i,a,s,"next",e)}function s(e){rk(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){v((0,l.t)("".concat(rC,".save_error"))),s(!0)}}}).changeNotifyStudentsEnabledMutation;(0,d.useEffect)(function(){s(!!r.notify_students_enabled)},[r.notify_students_enabled]);var x=function(e){e?f(!0):(s(!1),_.mutate({course_section:{notify_students_enabled:!1}}))},j=r.drip_notifications_sent_at&&(0,t7.w)({dateTime:new Date(r.drip_notifications_sent_at),format:"date_time_with_short_timezone"});return(0,t1.MS)(i)&&(j?t=(0,l.t)("courses.edit.sections.notify_students_modal.sent_tooltip",{date:j}):r.is_dripped&&(t=(0,l.t)("courses.edit.sections.notify_students_modal.delayed_notification_tooltip"))),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"group flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",name:"section[".concat(r.id,"].notify_students_enabled"),checked:a,className:"hidden"}),(0,n.jsx)(tI.T,{disabled:!t,content:t,children:(0,n.jsx)(re.r,{checked:a,onChange:function(e){return x(e)},disabled:(0,t1.MS)(i)&&!!j})}),!((0,t1.MS)(i)&&j)&&(0,n.jsx)("button",{type:"submit",className:"hover:bg-tertiary invisible ml-3 rounded-md px-2 py-1 group-hover:visible",onClick:function(){return b(!0)},children:(0,l.t)("edit")})]}),(0,n.jsx)(rO,{isOpen:u,isOpenForEdit:m,onClose:function(){f(!1),b(!1)},section:r,shouldShowNotificationMessage:!!t})]})};function rA(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rI="courses.edit.sections",rE=function(e){var t=e.space,r=e.section,i=e.setIsNameEditable,o=(0,tJ.d)().translatedLabels,s=(0,a.useQueryClient)(),c=(0,a.useMutation)(function(e){return(0,te.Cu)(J.av.courses.createLesson({courseId:t.id,sectionId:r.id}),e)},{onSuccess:function(e){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,s.invalidateQueries((0,tq.bD)(t.id))];case 1:return r.sent(),(0,u.defer)(function(){var t=document.querySelector("#lesson-item-".concat(e.id));t&&t.scrollIntoView({behavior:"smooth"}),i(e.id)}),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){rA(o,n,i,a,s,"next",e)}function s(e){rA(o,n,i,a,s,"throw",e)}a(void 0)})})()}}),d=function(e){var t="quiz"===e?(0,l.t)([rI,"untitled_quiz"]):(0,l.t)([rI,"untitled_with_label"],{label:o.lesson.singular.toLowerCase()});c.mutate({course_lesson:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"".concat(t," - ").concat(r.lessons.length+1),status:"draft",featured_media:null,rich_text_body:{}},"quiz"===e&&{quizzes_attributes:[{}]})})};return(0,n.jsxs)(tc.Lt,{size:tc.wk.SMALL,button:(0,n.jsx)(tR.z,{small:!0,type:"button",variant:"secondary",onClick:function(){},children:(0,n.jsx)(q.Z.LabelSm,{children:(0,l.t)([rI,"add_new"])})}),dataTestId:"new-lesson-dropdown-menu",children:[(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){d("lesson")},children:(0,l.t)([rI,"lesson"])}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){d("quiz")},children:(0,l.t)([rI,"quiz"])})]})};function rT(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rL=function(e){var t=e.show,r=e.name,i=e.onClose,o=e.courseId,s=e.sectionId,c=(0,tq.rF)(o).refetch,u=(0,a.useMutation)(function(){return(0,te.pC)(J.av.courses.deleteSection({courseId:o,sectionId:s}))},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),i(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rT(o,n,i,a,s,"next",e)}function s(e){rT(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return(0,n.jsx)(X.c,{isOpen:t,title:(0,l.t)("courses.edit.sections.delete_section"),onClose:i,onCancel:i,onConfirm:u.mutate,confirmVariant:"danger",disabled:u.isLoading,confirmText:u.isLoading?(0,l.t)("deleting"):(0,l.t)("confirm"),children:(0,l.t)("courses.edit.sections.delete_confirmation",{name:r})})};rL.propTypes={show:m().bool.isRequired,name:m().string.isRequired,onClose:m().func.isRequired,courseId:m().string.isRequired,sectionId:m().string.isRequired};var rD=r(58808);function rM(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rR=function(e){var t=e.show,r=e.name,i=e.onClose,o=e.courseId,s=e.sectionId,c=e.lessonId,u=(0,tq.rF)(o).refetch,d=(0,a.useMutation)(function(){return(0,te.pC)(J.av.courses.deleteLesson({courseId:o,sectionId:s,lessonId:c}))},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rM(o,n,i,a,s,"next",e)}function s(e){rM(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return(0,n.jsx)(X.c,{isOpen:t,title:(0,l.t)("courses.edit.sections.delete_lesson"),onClose:i,onCancel:i,onConfirm:d.mutate,confirmVariant:"danger",disabled:d.isLoading,confirmText:d.isLoading?(0,l.t)("deleting"):(0,l.t)("confirm"),children:(0,l.t)("courses.edit.sections.delete_confirmation",{name:r})})};rR.propTypes={show:m().bool.isRequired,name:m().string.isRequired,onClose:m().func.isRequired,courseId:m().string.isRequired,sectionId:m().string.isRequired,lessonId:m().string.isRequired};var rB=r(75148),rF=function(e){var t=e.name,r=e.setName,i=e.isLoading,o=e.onSubmit,a=e.onClose,s=e.useSemiboldFont,c=e.dataTestId,u=(0,d.useRef)(null);return(0,d.useEffect)(function(){u.current&&u.current.focus()},[]),(0,n.jsxs)("form",{onSubmit:o,className:"flex w-full items-center pr-4",children:[(0,n.jsx)("input",{ref:u,className:j()("bg-primary border-input focus:border-secondary placeholder:text-light -my-1.5 -ml-2 mr-2 w-full rounded border px-2 py-1.5 text-sm placeholder:opacity-100 focus:outline-none",{"font-semibold":void 0!==s&&s}),onChange:function(e){return r(e.target.value)},value:t,onBlur:o,"data-testid":c}),i?(0,n.jsx)(ef.JO,{type:"loader"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(rB.h,{type:"submit",name:"16-check",onClick:o,className:"!border-v2-success mr-1.5 border",iconClassName:"!text-v2-success",ariaLabel:(0,l.t)("save_and_close")}),(0,n.jsx)(rB.h,{type:"submit",className:"border-secondary border",name:"16-close",onClick:a,ariaLabel:(0,l.t)("close")})]})]})};function rz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rU(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rZ=function(e){var t,r=e.lesson,i=e.section,o=e.onClose,s=(0,c.L2)().data,l=(t=(0,d.useState)(r.name),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rz(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rz(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],f=l[1],p=(0,a.useQueryClient)(),m=(0,H.pm)(),b=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateLesson({courseId:null==s?void 0:s.id,sectionId:i.id,lessonId:r.id}),e)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,p.invalidateQueries((0,tq.bD)(null==s?void 0:s.id))];case 1:return e.sent(),o(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rU(o,n,i,a,s,"next",e)}function s(e){rU(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){m.error(e.errorDetails)}});return(0,n.jsx)(rF,{name:u,setName:f,isLoading:b.isLoading,onSubmit:function(){return b.mutate({course_lesson:{name:u}})},onClose:o,dataTestId:"lesson-title"})};function rG(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rq=function(e){var t=e.courseId,r=void 0===t?"":t,i=e.sectionId,o=void 0===i?"":i,s=e.lessonId,c=void 0===s?"":s,d=e.defaultName,f=e.type,p=void 0===f?"lesson":f,m=(0,ex.dd)(),b=(0,a.useQueryClient)(),h=(0,H.pm)(),y={onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,b.invalidateQueries((0,tq.bD)(r))];case 1:return e.sent(),m.hide(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rG(o,n,i,a,s,"next",e)}function s(e){rG(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){h.error(e.errorDetails)}},v=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateLesson({courseId:r,sectionId:o,lessonId:c}),e)},y),_=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateSection({courseId:r,sectionId:o}),e)},y);return(0,n.jsxs)(S.u_,{isOpen:m.visible,onClose:m.visible?m.hide:u.noop,children:[(0,n.jsx)(S.u_.Overlay,{}),(0,n.jsxs)(S.u_.Content,{size:"lg",children:[(0,n.jsxs)(S.u_.Header,{children:[(0,n.jsx)(S.u_.Title,{children:"lesson"===p?(0,l.t)("courses.edit.sections.rename_lesson"):(0,l.t)("courses.edit.sections.rename_section")}),(0,n.jsx)(S.u_.HeaderActions,{children:(0,n.jsx)(S.u_.CloseButton,{onClick:m.visible?m.hide:u.noop})})]}),(0,n.jsx)(S.u_.Body,{children:(0,n.jsx)(g.l,{onSubmit:function(e){var t=e.name;"lesson"===p?v.mutate({course_lesson:{name:t}}):"section"===p&&_.mutate({course_section:{name:t}})},defaultValues:{name:void 0===d?"":d},id:"course-section-lesson-rename-form",children:(0,n.jsx)(g.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"name",label:(0,l.t)("title"),rules:{required:(0,l.t)("courses.edit.sections.validations.name_is_required")},children:(0,n.jsx)(g.l.Input,{autoFocus:!0})})})}),(0,n.jsx)(S.u_.Footer,{children:(0,n.jsx)(tR.z,{form:"course-section-lesson-rename-form",type:"submit",full:!0,extraLarge:!0,variant:"circle",children:v.isLoading||_.isLoading?(0,l.t)("saving_changes"):(0,l.t)("save_changes")})})]})]})},rV=ex.gk.create(function(e){return(0,n.jsx)(rq,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),rH=function(){return(0,ex.dd)(rV)};function rW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rQ(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rJ=function(){return[{label:l.Z.t("courses.edit.sections.statuses.draft"),value:"draft"},{label:l.Z.t("courses.edit.sections.statuses.published"),value:"published"}]},rK=function(e){var t,r=e.lesson,i=e.section,o=(0,a.useQueryClient)(),s=(0,c.L2)().data,l=(t=(0,d.useState)(r.status),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rW(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rW(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],f=l[1];(0,d.useEffect)(function(){f(r.status)},[r.status]);var p=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateLesson({lessonId:r.id,sectionId:i.id,courseId:s.id}),e)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,o.invalidateQueries((0,tq.bD)(s.id))];case 1:return e.sent(),[4,o.invalidateQueries((0,tq.hE)(r.id))];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rQ(o,n,i,a,s,"next",e)}function s(e){rQ(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return(0,n.jsx)(tc.Lt,{options:rJ(),onChange:function(e){var t,n;f(e),p.mutate({course_lesson:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={status:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t)})},buttonClassName:"w-28",button:(0,n.jsx)(tc.Lt.ActiveLabelButton,{className:j()("flex justify-between rounded-md px-2 py-1 text-xs",{"bg-secondary":"draft"===u,"bg-green-100":"published"===u}),labelColor:"published"===u?"text-green-900":"text-dark",activeOptionValue:u,options:rJ()}),dataTestId:"lesson-status-dropdown"})};function r$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rX(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function rY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function r0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}rK.propTypes={lesson:m().object.isRequired,section:m().object.isRequired};var r1=(0,d.forwardRef)(function(e,t){var r,i=e.dragHandleProps,o=e.isDragging,a=e.isNameEditable,c=e.isOverlay,u=e.lesson,f=e.section,p=e.setIsNameEditable,m=e.space,b=e.tableRowProps,h=(0,s.k6)(),y=(r=(0,d.useState)(!1),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return r$(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r$(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],_=(0,tl.kK)(),x=rH(),w=(0,tq.rF)(m.id,{enabled:!1}).refetch,O=(0,rD.z)({}).duplicateLesson,S=function(){h.push(J.H4.editLesson({spaceSlug:m.slug,sectionId:f.id,lessonId:u.id}))};return(0,n.jsxs)(t2.SC,r0(rY({id:"lesson-item-".concat(u.id),ref:t},b||{}),{className:j()("bg-primary group cursor-auto",{"opacity-50":o,"overflow-hidden rounded-md shadow-lg":c}),dataTestId:"course-lesson-row",children:[(0,n.jsx)(t2.pj,r0(rY({className:"pl-3 pr-0 md:pl-10"},(0,t1.XG)(m)&&{colSpan:3}),{children:(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("div",r0(rY({className:"hover:bg-secondary flex h-6 w-6 cursor-move items-center justify-center rounded",ref:null==i?void 0:i.setActivatorNodeRef},(null==i?void 0:i.listeners)||{}),{children:(0,n.jsx)(ef.JO,{type:"16-reorder",size:16})})),a&&!c?(0,n.jsx)(rZ,{lesson:u,section:f,onClose:function(){return null==p?void 0:p(!1)}}):(0,n.jsx)("button",{type:"submit",className:"hover:border-dark mr-4 cursor-pointer truncate border-b border-dashed border-transparent",title:u.name,onClick:function(){return null==p?void 0:p(!0)},children:(0,n.jsx)(q.Z.LabelSm,{children:u.name})})]})})),(0,n.jsx)(t2.pj,{colSpan:1,className:"!pr-6 text-right",children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[!c&&(0,n.jsx)(tR.z,{className:"!text-dark hover:bg-tertiary invisible rounded !px-2 !py-1 !font-normal sm:group-hover:visible",variant:"plain",onClick:S,children:(0,l.t)("courses.edit.sections.edit_lesson")}),(0,n.jsx)(rK,{lesson:u,section:f}),!c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(tc.Lt,{size:tc.wk.SMALL,button:(0,n.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,n.jsx)(ef.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"lesson-dropdown-menu",children:[(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){h.push(J.H4.showLesson({spaceSlug:m.slug,sectionId:f.id,lessonId:u.id}))},children:(0,l.t)("courses.edit.lesson.view_lesson")}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:S,children:(0,l.t)("courses.edit.sections.edit_lesson")}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,O({spaceId:m.id,sectionId:f.id,lessonId:u.id})];case 1:return e=t.sent(),[4,w()];case 2:return t.sent(),null==p||p(!0,e.id),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rX(o,n,i,a,s,"next",e)}function s(e){rX(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:(0,l.t)("courses.edit.sections.duplicate_lesson")}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){return _?x.show({courseId:m.id,sectionId:f.id,lessonId:u.id,defaultName:u.name}):setTimeout(function(){return null==p?void 0:p(!0)},100)},children:(0,l.t)("courses.edit.sections.rename_lesson")}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){return g(!0)},children:(0,l.t)("courses.edit.sections.delete_lesson")})]}),(0,n.jsx)(rR,{show:v,onClose:function(){return g(!1)},courseId:m.id,lessonId:u.id,sectionId:f.id,name:u.name})]})]})})]}))});function r2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}r1.displayName="LessonItem";var r3=function(e){var t=e.lesson,r=e.section,i=e.space,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["lesson","section","space"]),a=(0,t0.nB)({id:t.sortId,data:{dragType:"lesson",item:t,sectionSortId:r.sortId}}),s=a.attributes,l=a.listeners,c=a.setActivatorNodeRef,u=a.setNodeRef,d=a.transform,f=a.transition,p=a.isDragging,m={transform:t9.ux.Transform.toString(d),transition:f};return(0,n.jsx)(r1,r2({isDragging:p,ref:u,lesson:t,section:r,space:i,tableRowProps:r2({style:m},s),dragHandleProps:{listeners:l,setActivatorNodeRef:c}},o))},r6=r(31736),r4=r(13241);function r5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r8(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function r9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r5(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r7="courses.edit.sections.drip_schedule.form",ne=function(e){var t=(0,t1.nl)(e),r=(0,t1.Cc)(e);return(0,t1.Hv)(r,t)},nt=function(e){var t=e.onChange,r=e.dripDelay,i=e.disabled,o=r9((0,d.useState)((0,t1.nl)(r)),2),a=o[0],s=o[1],c=r9((0,d.useState)((0,t1.Cc)(r)),2),u=c[0],f=c[1],p=r9((0,d.useState)(!1),2),m=p[0],b=p[1],h=r9((0,d.useState)(ne(r)),2),y=h[0],v=h[1],g=(0,d.useRef)(null),_=(0,l.t)("".concat(r7,".drip_delay_button_text"),{drip_delay:y}),x=(0,l.t)("".concat(r7,".").concat(a),{count:u}),j=(0,l.t)("".concat(r7,".drip_delay_message"),{drip_delay:(0,t1.Hv)(u,a).toLowerCase()});(0,d.useEffect)(function(){v(ne(r)),s((0,t1.nl)(r)),f((0,t1.Cc)(r))},[r]);var w=function(e,t){var r=parseInt(e)||0,n=r9("weeks"===t?[0,100]:[0,999],2);f(r=Math.min(Math.max(r,n[0]),n[1]))};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(tR.z,{disabled:i,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",forwardedRef:g,onClick:function(){b(!m)},children:[(0,n.jsx)("span",{children:_}),(0,n.jsx)(ef.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),(0,n.jsx)(r6.ZP,{visible:m,onClickOutside:function(e,t){r8(g.current,HTMLButtonElement)&&r8(t.target,HTMLElement)&&(t.target===g.current||g.current.contains(t.target))||b(!1)},allowHTML:!0,interactive:!0,duration:0,arrow:!1,delay:0,theme:"drip-delay-dropdown",placement:"bottom-start",content:(0,n.jsxs)("div",{className:"bg-primary border-primary mb-6 w-64 rounded-md border !px-4 !pt-3 shadow-md",children:[(0,n.jsx)(q.Z.BodyMd,{weight:"font-semibold",children:(0,l.t)("".concat(r7,".drip_delay"))}),(0,n.jsxs)("div",{className:"my-3 flex w-full items-center justify-between",children:[(0,n.jsx)("div",{className:"w-20",children:(0,n.jsx)(r4.I,{min:0,max:1e3,value:u,onChange:function(e){w(e.target.value,a)},otherClassName:"!p-2",type:"number"})}),(0,n.jsx)(tc.Lt,{className:"ml-2 grow",buttonClassName:"w-full",size:tc.wk.SMALL,onChange:function(e){s(e),w(u,e)},button:(0,n.jsxs)(tR.z,{large:!0,variant:"secondary",className:"!border-primary !flex w-full items-center justify-between !px-4 !pr-3 !font-normal",children:[(0,n.jsx)("span",{children:x}),(0,n.jsx)(ef.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),options:["days","weeks"].map(function(e){return{label:(0,l.t)("".concat(r7,".").concat(e),{count:u}),value:e}})})]}),(0,n.jsx)(q.Z.BodySm,{children:j}),(0,n.jsx)(tR.z,{variant:"circle",full:!0,className:"my-3",onClick:function(){var e="days"===a?u:7*u;t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({drip_delay:e},0===e&&{notify_students_enabled:!1})),b(!1)},children:(0,l.t)("done")})]}),children:(0,n.jsx)("span",{})})]})},nr=function(e){var t=e.section,r=e.options;return{changeDripScheduleMutation:(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)},r)}},nn=r(19614);function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function no(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ni(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ni(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ns=function(e){return e&&(0,t7.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},nl=function(e){var t,r=e.onChange,i=e.disabled,o=e.section,a=na((0,d.useState)(!1),2),s=a[0],c=a[1],u=na((0,d.useState)(ns(o.dripped_at)),2),f=u[0],p=u[1],m=(0,d.useRef)(null);return o.is_dripped?t=(0,l.t)("courses.edit.sections.drip_schedule.form.section_already_available"):o.dripped_at||(t=(0,l.t)("courses.edit.sections.drip_schedule.form.section_immediately_available")),(0,n.jsxs)("div",{className:"!py-0",children:[(0,n.jsx)(tI.T,{disabled:!t,content:t,children:(0,n.jsxs)(tR.z,{forwardedRef:m,disabled:i||!!o.drip_notifications_sent_at,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",onClick:function(){c(!s)},children:[(0,n.jsx)("span",{children:f||(0,l.t)("courses.edit.sections.drip_schedule.form.select_drip_date")}),(0,n.jsx)(ef.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]})}),(0,n.jsx)(nn.M,{datePickerVisible:s,onClickOutside:function(e,t){no(m.current,HTMLButtonElement)&&no(t.target,HTMLElement)&&(t.target===m.current||m.current.contains(t.target))||c(!1)},onCancel:function(){p(ns(null)),r({dripped_at:null}),c(!1)},cancelButtonText:(0,l.t)("courses.edit.sections.drip_schedule.form.clear_date"),value:o.dripped_at||"",onSave:function(e){p(ns(e)),r({dripped_at:e}),c(!1)},saveButtonVariant:"circle"})]})};function nc(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var nu=function(e){var t,r=e.space,i=e.section,o=(0,H.pm)(),s=o.success,c=o.error,u=(0,a.useQueryClient)(),d=(0,t1.MS)(r)?(0,l.t)("courses.edit.sections.drip_schedule.form.drip_date"):(0,l.t)("courses.edit.sections.drip_schedule.form.drip_delay"),f=nr({section:i,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,u.invalidateQueries((0,tq.bD)(i.space_id))];case 1:return e.sent(),s((0,l.t)("courses.edit.sections.drip_schedule.form.save_success",{drip_type:d}),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nc(o,n,i,a,s,"next",e)}function s(e){nc(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){c((0,l.t)("courses.edit.sections.drip_schedule.form.save_error",{drip_type:d.toLowerCase()}))}}}).changeDripScheduleMutation,p=function(e){f.mutate({course_section:e})};return(0,n.jsxs)(n.Fragment,{children:[(0,t1.MS)(r)&&(0,n.jsx)(nl,{onChange:p,section:i,disabled:f.isLoading}),(0,t1.vv)(r)&&(0,n.jsx)(nt,{onChange:p,dripDelay:null!=(t=i.drip_delay)?t:0,disabled:f.isLoading})]})};function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nf(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var np=function(e){var t,r=e.section,i=e.onClose,o=(0,c.L2)().data,s=(t=(0,d.useState)(r.name),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nd(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nd(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],u=s[1],f=(0,a.useQueryClient)(),p=(0,H.pm)(),m=(0,a.useMutation)(function(e){return(0,te.aU)(J.av.courses.updateSection({courseId:null==o?void 0:o.id,sectionId:r.id}),e)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,f.invalidateQueries((0,tq.bD)(null==o?void 0:o.id))];case 1:return e.sent(),i(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nf(o,n,i,a,s,"next",e)}function s(e){nf(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){p.error(e.errorDetails)}});return(0,n.jsx)(rF,{name:l,setName:u,isLoading:m.isLoading,onSubmit:function(){return m.mutate({course_section:{name:l}})},onClose:i,useSemiboldFont:!0,dataTestId:"section-title"})};function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nh(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ny(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nm(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nv=(0,d.forwardRef)(function(e,t){var r=e.dragHandleProps,i=e.isDragging,o=e.isNameEditable,a=e.isOverlay,s=void 0!==a&&a,c=e.section,u=e.setIsNameEditable,f=e.setSections,p=e.space,m=e.tableBodyProps,b=ny(tW(),2),h=b[0],y=b[1],v=ny((0,d.useState)(!1),2),g=v[0],_=v[1],x=c.lessons.map(function(e){return e.sortId}),w=rH(),O=(0,tl.kK)();return(0,n.jsxs)(t2.RM,nh(nb({className:j()("bg-primary cursor-auto transition-all duration-200 ease-in-out",{"opacity-50":void 0!==i&&i,"overflow-hidden rounded-md shadow-lg":s}),ref:t},void 0===m?{}:m),{children:[(0,n.jsxs)(t2.SC,{id:"section-item-".concat(c.id),className:"bg-secondary group",dataTestId:"course-section-row",children:[(0,n.jsx)(t2.pj,{className:"px-1 md:px-5",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",nh(nb({className:"hover:bg-primary flex h-6 w-6 cursor-move items-center justify-center rounded",ref:null==r?void 0:r.setActivatorNodeRef},(null==r?void 0:r.listeners)||{}),{children:(0,n.jsx)(ef.JO,{type:"16-reorder",size:16})})),void 0!==o&&o&&!s?(0,n.jsx)(np,{section:c,onClose:function(){return null==u?void 0:u(!1)}}):(0,n.jsx)("button",{type:"button",className:"hover:border-dark truncate border-b border-dashed border-transparent",onClick:function(){return null==u?void 0:u(!0)},children:(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:c.name})})]})}),(0,t1.XG)(p)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t2.pj,{className:"pr-5",children:!s&&(0,n.jsx)(nu,{section:c,space:p})}),(0,n.jsx)(t2.pj,{className:"pr-5",children:!s&&((0,t1.MS)(p)&&c.dripped_at||(0,t1.vv)(p)&&c.drip_delay>0)&&(0,n.jsx)(rN,{section:c,space:p})})]}),(0,n.jsx)(t2.pj,{className:"pr-6 text-right",children:!s&&(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[(0,n.jsx)(rE,{space:p,section:c,setIsNameEditable:function(e){return y({id:e,value:!0})}}),(0,n.jsxs)(tc.Lt,{button:(0,n.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,n.jsx)(ef.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"section-dropdown-menu",children:[(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){return O?w.show({type:"section",sectionId:c.id,courseId:p.id,defaultName:c.name}):setTimeout(function(){return null==u?void 0:u(!0)},100)},children:l.Z.t("courses.edit.sections.rename_section")}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){return _(!0)},children:l.Z.t("courses.edit.sections.delete_section")})]})]})}),(0,n.jsx)(rL,{show:g,onClose:function(){return _(!1)},courseId:p.id,sectionId:c.id,name:c.name})]}),(0,n.jsx)(t0.Fo,{items:x,strategy:t0.qw,children:c.lessons.map(function(e){return(0,n.jsx)(r3,{lesson:e,section:c,space:p,setSections:f,isNameEditable:h.get(e.id),setIsNameEditable:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y({id:null!=r?r:e.id,value:t})}},e.id)})})]}))});function ng(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}nv.displayName="SectionItem";var n_=function(e){var t=e.section,r=e.space,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["section","space"]),o=(0,t0.nB)({id:t.sortId,data:{dragType:"section",item:t}}),a=o.attributes,s=o.listeners,l=o.setActivatorNodeRef,c=o.setNodeRef,u=o.transform,d=o.transition,f=o.isDragging,p={transform:t9.ux.Transform.toString(u),transition:d};return(0,n.jsx)(nv,ng({isDragging:f,ref:c,section:t,space:r,tableBodyProps:ng({style:p},a),dragHandleProps:{listeners:s,setActivatorNodeRef:l}},i))},nx=function(e){var t,r,i=e.space,o=e.sections,a=e.dispatchSectionsNameEditor,s=(0,d.useMemo)(function(){return o.reduce(function(e,t){return e+t.lessons.length},0)},[o]);return(0,n.jsxs)(t2.ss,{className:"divide-primary divide-y !border-t-0 p-6","data-testid":"customize-lessons-table-head",children:[(0,n.jsxs)(t2.SC,{children:[(0,n.jsx)(t2.pj,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,t1.XG)(i)&&{colSpan:3}),r=r={className:"px-6",children:(0,n.jsxs)(q.Z.TitleSm,{as:"span",weight:"semibold",children:[(0,l.t)("courses.edit.section_count",{count:(null==o?void 0:o.length)||0})," ",(0,l.t)("separator_dot")," ",(0,l.t)("courses.edit.lesson_count",{count:s})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),(0,n.jsx)(t2.pj,{className:"px-6 text-right",children:(0,n.jsx)(t$,{variant:"circle",sections:o,setIsNameEditable:function(e){return a({id:e,value:!0})}})})]}),(0,n.jsxs)(t2.SC,{children:[(0,n.jsx)(t2.pj,{className:"!py-3 px-6",colSpan:(0,t1.XG)(i)?1:2,children:(0,n.jsx)(q.Z.LabelXs,{textTransform:"uppercase",children:(0,l.t)("courses.edit.sections.lesson_name")})}),(0,t1.XG)(i)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t2.pj,{children:(0,n.jsx)(q.Z.LabelXs,{textTransform:"uppercase",children:(0,l.t)("courses.edit.sections.schedule")})}),(0,n.jsx)(t2.pj,{className:"!px-0 !py-3",colSpan:2,children:(0,n.jsxs)(q.Z.LabelXs,{textTransform:"uppercase",children:[(0,l.t)("courses.edit.sections.notify_students"),(0,n.jsx)(tI.T,{content:(0,l.t)("courses.edit.sections.notify_students_tooltip"),className:"inline-flex",placement:"top-end",children:(0,n.jsx)(ef.JO,{type:"question-mark",className:"ml-2 !w-3"})})]})})]})]})]})};function nj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nw=function(e){var t,r,i,o,a,s,l,c,u,f=e.space,p=e.sections,m=e.setSections,b=e.dispatchSectionsNameEditor,h=e.sectionsNameEditor,y=(t=(0,d.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nj(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nj(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],_=(null==v||null==(i=v.data)||null==(r=i.current)?void 0:r.dragType)==="lesson",x=(null==v||null==(a=v.data)||null==(o=a.current)?void 0:o.dragType)==="section",j=_&&(null==v||null==(l=v.data)||null==(s=l.current)?void 0:s.item),w=x&&(null==v||null==(u=v.data)||null==(c=u.current)?void 0:c.item);return(0,n.jsxs)(t8,{sections:p,setSections:m,setActiveDragItem:g,children:[(0,n.jsxs)(t2.iA,{variant:"no-border",className:"border-primary w-full overflow-hidden rounded-lg border",tableClassName:"table-fixed w-full",dataTestId:"sections-lessons-table",children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{}),(0,t1.XG)(f)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("col",{className:"w-72"}),(0,n.jsx)("col",{className:"w-24"})]}),(0,n.jsx)("col",{className:"w-72"})]}),(0,n.jsx)(nx,{space:f,sections:p,dispatchSectionsNameEditor:b}),(0,n.jsx)(t0.Fo,{id:"sections-list",items:p.map(function(e){return e.sortId}),strategy:t0.qw,children:p.map(function(e){return(0,n.jsx)(n_,{setSections:m,space:f,section:e,isNameEditable:h.get(e.id),setIsNameEditable:function(t){return b({id:e.id,value:t})}},e.id)})})]}),(0,n.jsxs)(tY.y9,{wrapperElement:"table",children:[j&&(0,n.jsx)(r1,{space:f,lesson:j,isOverlay:!0}),w&&(0,n.jsx)(nv,{space:f,section:w,isOverlay:!0})]})]})};function nO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nS=function(e){var t,r=e.sections,i=e.setSections,o=e.sectionsAreLoading,a=e.space,s=(t=tW(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nO(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nO(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];return(0,n.jsx)(C,{className:"!max-w-6xl md:!px-6",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mb-4 flex justify-between","data-testid":"customize-lessons-header",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(q.Z.TitleMd,{children:I18n.t("courses.edit.sections.lessons")}),(0,n.jsx)(tV.T,{space:a})]})}),o?(0,n.jsx)(tQ.m,{}):r.length?(0,n.jsx)(nw,{space:a,sections:r,setSections:i,dispatchSectionsNameEditor:c,sectionsNameEditor:l}):(0,n.jsx)(tX,{sections:r,dispatchSectionsNameEditor:c})]})})};function nk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}nS.propTypes={sections:m().arrayOf(m().object).isRequired,setSections:m().func.isRequired,sectionsAreLoading:m().bool.isRequired,space:m().object.isRequired};var nN=function(e){var t,r=e.space,i=(0,tq.rF)(r.id),o=i.data,a=i.isLoading,s=i.dataUpdatedAt,l=(0,d.useMemo)(function(){return((null==o?void 0:o.records)||[]).map(function(e){var t;return nC(nP({},e),{sortId:"section-".concat(e.id),lessons:null==e||null==(t=e.lessons)?void 0:t.map(function(e){return nC(nP({},e),{sortId:"lesson-".concat(e.id)})})})})},[o,s]),c=(t=(0,d.useState)(l),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nk(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nk(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1];return(0,d.useEffect)(function(){f(l)},[o,l,s]),(0,n.jsx)(nS,{sectionsAreLoading:a,sections:u,setSections:f,space:r})};nN.propTypes={space:m().object.isRequired};var nA=r(46410),nI=r(91564),nE=r(85924),nT=r(82897),nL=r(51268),nD=r(98335),nM=r(86470),nR=r(82331);function nB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nz=r(26242),nU=Object.assign({},{WebPreview:function(e){var t=e.space,r=void 0===t?{}:t,i=(0,nE.sL)(),o=(0,nM.sE)().blocks,a=r.emoji,s=r.name;return(0,n.jsx)(nz.n,{theme:i,headerSpaceEmoji:void 0===a?"":a,headerSpaceTitle:void 0===s?"":s,blocks:o,screenSize:"desktop"})},MobilePreview:function(e){var t=e.space,r=(0,nE.sL)(),i=(0,nR.B)(),o=i.isPreviewWindowOpen,a=i.setPreviewWindowOpen,s=(0,nM.sE)().blocks,l=(void 0===t?{}:t).name,c={headerSpaceTitle:void 0===l?"":l,blocks:s,theme:nF(nB({},r),{default_appearance:"light"}),border:!0};return(0,n.jsxs)(nT.t,{className:"!bg-secondary h-full",children:[(0,n.jsx)(nL.x,nB({},c)),o&&(0,n.jsx)(nD.p,{desconstructor:function(){a(!1)},newTab:!0,children:(0,n.jsx)(nL.x,nF(nB({},c),{border:!1,width:26.875,height:58.25}))})]})}}),nZ=r(73622),nG=r(10623),nq=r(75552);function nV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nW(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var nQ=(0,l.t)("courses.lockscreen.tabs.content"),nJ=(0,l.t)("courses.lockscreen.tabs.design"),nK=[{label:nQ},{label:nJ}],n$=function(e){var t=e.children,r=nW(e,["children"]);return(0,n.jsx)(nq.LU,nH(nV({tabs:nK,initialTab:nQ,wrapperClassName:"px-0 overflow-x-auto"},r),{children:t}))};n$.propTypes={children:m().node.isRequired};var nX=function(e){var t=e.children,r=nW(e,["children"]);return(0,n.jsx)(nq.xf,nH(nV({tab:nQ,className:"overflow-y-visible"},r),{children:t}))};nX.propTypes={children:m().node.isRequired};var nY=function(e){var t=e.children,r=nW(e,["children"]);return(0,n.jsx)(nq.xf,nH(nV({tab:nJ,className:"overflow-y-visible"},r),{children:t}))};nY.propTypes={children:m().node.isRequired};var n0="#000000",n1=function(e){var t=e.blockDataPath,r=(0,b.qo)({name:"".concat(t,".button_label")}),i=(0,b.qo)({name:"".concat(t,".button_link")});return(0,n.jsxs)(n$,{children:[(0,n.jsxs)(nX,{children:[(0,n.jsx)(g.l.Item,{name:"".concat(t,".heading"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.heading"),children:(0,n.jsx)(g.l.Input,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".description"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.description"),children:(0,n.jsx)(g.l.TextArea,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".button_label"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_label"),rules:{required:i&&(0,l.t)("courses.lockscreen.errors.button_label_required")},children:(0,n.jsx)(g.l.Input,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".button_link"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_link"),rules:{required:r&&(0,l.t)("courses.lockscreen.errors.button_link_required"),pattern:{value:nZ.OT,message:(0,l.t)("courses.lockscreen.errors.button_link_invalid")}},children:(0,n.jsx)(g.l.Input,{})})]}),(0,n.jsxs)(nY,{children:[(0,n.jsx)("div",{className:"mb-5"}),(0,n.jsx)(nG.Y,{label:(0,l.t)("courses.lockscreen.fields.background_image"),name:"".concat(t,".background_image"),aspectRatio:4,customAspectRatioHelpText:(0,l.t)("image_upload.recommended_size_lock_screen_background_image"),previewVariant:"cover",hideUnsplash:!1}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".overlay_color"),label:(0,l.t)("courses.lockscreen.fields.overlay_color"),placeholder:n0,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(g.l.ColorPicker,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".heading_color"),label:(0,l.t)("courses.lockscreen.fields.heading"),placeholder:n0,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(g.l.ColorPicker,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".text_color"),label:(0,l.t)("courses.lockscreen.fields.text"),placeholder:n0,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(g.l.ColorPicker,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".button_background_color"),label:(0,l.t)("courses.lockscreen.fields.button_background"),placeholder:n0,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(g.l.ColorPicker,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".button_text_color"),label:(0,l.t)("courses.lockscreen.fields.button_label"),placeholder:n0,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(g.l.ColorPicker,{})})]})]})};n1.propTypes={blockDataPath:m().string.isRequired};var n2=function(e){var t=e.blockDataPath;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.banner")}),(0,n.jsx)(n1,{blockDataPath:t})]})};n2.propTypes={blockDataPath:m().string.isRequired};var n3=function(e){var t=e.blockDataPath;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.call_to_action")}),(0,n.jsx)(n1,{blockDataPath:t})]})};function n6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n4(e){return function(e){if(Array.isArray(e))return n6(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n6(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n6(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n3.propTypes={blockDataPath:m().string.isRequired};var n5=function(e){var t=e.blockDataPath,r=(0,b.Gc)(),i=r.watch,o=r.setValue,a="".concat(t,".sgids_to_object_map"),s=i(a)||{},c="".concat(t,".inline_attachments"),u=i(c)||[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-7 flex flex-col gap-2",children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.description")}),(0,n.jsx)(q.Z.LabelSm,{children:(0,l.t)("courses.lockscreen.placeholder.slash_commands")})]}),(0,n.jsx)("div",{className:"border-primary h-96 resize-y overflow-y-auto rounded-lg border px-4 py-3",children:(0,n.jsx)(Y.$,{name:"".concat(t,".description_tiptap"),sgidToObjectMap:s,inlineAttachments:u,className:"h-full",editorClassName:"h-full",onLocalSgidToObjectMapChange:function(e){o(a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s,e))},onLocalAttachmentsChange:function(e){return o(c,n4(u).concat(n4(e)))},disabledExtensions:["mention","poll","ai_copilot"]})})]})};n5.propTypes={blockDataPath:m().string.isRequired};var n8=r(18943),n9=r(5116);function n7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n7(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var it=function(e){var t=e.blockDataPath,r=(0,c.L2)().data,i=(0,b.Gc)(),o=i.watch,a=i.setValue,s=(0,b.cl)().defaultValues,f=ie((0,d.useState)(!0),2),p=f[0],m=f[1],h="".concat(t,".locked_page_description.trix_html"),y="".concat(t,".locked_page_description.rendered_html_with_layout"),v=ie((0,d.useState)((0,u.get)(s,h)),2),g=v[0],_=v[1],x=o(h),j=(0,nA.z1)({space:r,options:{onSuccess:function(e){var t;a(y,null==e||null==(t=e.locked_page_description)?void 0:t.rendered_html_with_layout)}}}).mutate;return(0,d.useEffect)(function(){if(x!==g){if(x!==g&&p){_(x),m(!1);return}var e=(0,u.debounce)(function(){j({locked_page_description:x})},500);return e(),e.cancel}},[j,g,x,p]),(0,n.jsxs)("div",{className:"pb-2 pt-5",children:[(0,n.jsx)("div",{className:"text-dark mb-2 flex items-center",children:(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:(0,l.t)("courses.lockscreen.fields.description")})}),(0,n.jsx)("div",{className:"trix-v2",children:(0,n.jsx)(n9.O,{className:"locked-page-description",name:h,id:h})}),(0,n.jsx)(n8.v,{className:"mt-2",children:(0,l.t)("courses.lockscreen.legacy_description_update_warning")})]})};it.propTypes={blockDataPath:m().string.isRequired};var ir=function(e){var t=e.blockDataPath;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.legacy_lock_screen")}),(0,n.jsx)("div",{className:"mb-7"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(g.l.Item,{name:"".concat(t,".locked_page_heading"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.heading"),children:(0,n.jsx)(g.l.Input,{})}),(0,n.jsx)(it,{blockDataPath:t}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".locked_button_label"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_label"),children:(0,n.jsx)(g.l.Input,{})}),(0,n.jsx)(g.l.Item,{name:"".concat(t,".locked_button_url"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_link"),children:(0,n.jsx)(g.l.Input,{})})]})]})};ir.propTypes={blockDataPath:m().string.isRequired};var ii=r(51943),io=r(19043),ia=r(65766),is=function(){var e,t,r=(0,c.L2)().data,n=(0,io.O)({communityMemberId:null,status:[ia.Tl.ACTIVE],spaceIds:[null==r?void 0:r.id]}).paywallsListQuery,i=function(e){var t=e.stripe_prices_attributes.length>0,r=e.mobile_prices_attributes.length>0,n=(0,u.compact)([t?(0,l.t)("web"):null,r?(0,l.t)("in_app"):null]);return{value:e.id,label:e.internal_name||e.display_name,description:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.includes",{price_types:n.join(", "),count:n.length})}},o=(0,d.useMemo)(function(){return(null==n?void 0:n.data)?n.data.map(i):[]},[null==n?void 0:n.data]),a=(null!=(t=null==n||null==(e=n.data)?void 0:e.length)?t:0)>0;return{paywallsListQuery:n,getPaywallAsOption:i,allPaywallOptions:o,hasPaywalls:a}};function il(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var ic=function(e){var t=function(e){return{label:e.short_description,value:e.id,paywall_id:e.paywall_id}},r=function(e,t){return il({paywall_id:t.id,currency_code:t.currency.code,trial_days:e.is_web_price?t.trial_days:0},e)},n=function(e,t){var n,i;return n=il({},r(e.price_properties,t)),i=i={processor_id:e.processor_id,price_package_id:e.id,id:e.id},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n},i=(0,d.useMemo)(function(){return(null==e?void 0:e.data)?(0,u.flatten)(e.data.map(function(e){return e.stripe_prices_attributes.map(function(t){return r(t,e)})})):[]},[null==e?void 0:e.data]),o=(0,d.useMemo)(function(){return(null==e?void 0:e.data)?(0,u.flatten)(e.data.map(function(e){return e.mobile_price_packages_attributes.map(function(t){return n(t,e)})})):[]},[null==e?void 0:e.data]),a=(0,d.useMemo)(function(){return o.map(t)},[o]),s=(0,d.useMemo)(function(){return(0,u.compact)(i.map(t))},[i]),l=(0,d.useMemo)(function(){return(null==s?void 0:s.length)>0},[s]);return{allStripePrices:i,allMobilePrices:o,allInAppPaywallPriceOptions:a,allWebPaywallPriceOptions:s,hasWebPaywallPrices:l}},iu=function(e){var t="".concat(e,".paywalls"),r=(0,b.Dq)({name:t,keyName:"_id"}),n=(0,b.Gc)().watch;(0,d.useEffect)(function(){0===r.fields.length&&r.append({id:void 0,paywall_highlighted:!1})},[r.fields.length]);var i=is(),o=i.paywallsListQuery,a=i.allPaywallOptions,s=i.hasPaywalls,l=ic(o),c=l.allStripePrices,u=l.allMobilePrices,f=l.allInAppPaywallPriceOptions,p=l.allWebPaywallPriceOptions,m=l.hasWebPaywallPrices,h=n(t),y=h.map(function(e){return e.id}),v=0===a.filter(function(e){return!y.includes(e.value)}).length,g=h.length>=6,_=h.some(function(e){var t;return!e.id||!(null==e||null==(t=e.web_paywall_price)?void 0:t.id)});return{fieldArrayMethods:r,allStripePrices:c,allMobilePrices:u,paywallsListQuery:o,selectedPaywallIds:y,allPaywallOptions:a,allInAppPaywallPriceOptions:f,allWebPaywallPriceOptions:p,hasWebPaywallPrices:m,hasPaywalls:s,shouldDisableAddPaywall:v||g||_,onClickAddPaywall:function(){r.append({id:void 0,paywall_highlighted:!1})},fieldNameRoot:t}},id=(0,d.createContext)({blockDataPath:""});id.displayName="PaywallsEditFormProvider";var ip=function(e){var t,r,i=e.children,o=e.blockDataPath,a=iu(o),s=(0,nR.B)(),l=s.previewMode,c=s.setPreviewMode,u=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({blockDataPath:o},a),r=r={previewMode:l,setPreviewMode:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);return(0,n.jsx)(id.Provider,{value:u,children:i})},im=function(){return(0,d.useContext)(id)},ib=function(){var e=im(),t=e.previewMode,r=e.setPreviewMode;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.title")}),(0,n.jsxs)("label",{className:"bg-tertiary border-hover relative inline-flex h-9 w-full cursor-pointer items-center rounded-lg border",children:[(0,n.jsxs)("div",{className:"z-[3] grid w-full grid-cols-2",children:[(0,n.jsx)(q.Z.LabelMd,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.web_option")}),(0,n.jsx)(q.Z.LabelMd,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.mobile_option")})]}),(0,n.jsx)("input",{type:"checkbox",checked:(0,ii.g)(t),className:"peer sr-only",onChange:function(e){r(e.target.checked?"mobile":"desktop")}}),(0,n.jsx)("div",{className:"after:bg-primary absolute left-0.5 top-[0.0625rem] w-full after:absolute after:h-8 after:w-[49.375%] after:rounded-lg after:transition-all after:content-[''] peer-checked:after:translate-x-full"})]})]})},ih=r(22513),iy=r(14899),iv=function(){var e=(0,ts.I)().show,t=im().paywallsListQuery,r=(0,c.wh)().currentCommunity,i=(0,ih.l)({paymentProcessor:null==r?void 0:r.payment_processor}).paymentProcessorStatus,o=(0,nR.B)(),a=o.isPreviewWindowOpen,s=o.setPreviewWindowOpen,u=o.previewMode;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.paywalls")}),(0,iy._k)(i)&&(0,n.jsxs)(tc.Lt,{button:(0,n.jsx)(rB.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,l.t)("community_member.actions")}),children:[(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){window.open(J.Lo.paywalls.index,"_blank")},linkType:"button",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.manage_paywalls")}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){return e({paywall:void 0,refetchPaywalls:function(){t.refetch()}})},linkType:"button",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.create_paywall")}),(0,ii.g)(u)&&(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){s(!a)},linkType:"button",children:a?(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.close_preview"):(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.open_preview")})]})]})},ig=function(e){var t=e.onClickButton,r=void 0===t?u.noop:t,i=e.title,o=e.subtitle,a=e.buttonText;return(0,n.jsxs)("div",{className:"flex h-[70%] flex-col justify-center gap-y-2 text-center",children:[i&&(0,n.jsx)(q.Z.LabelMd,{weight:"bold",children:i}),o&&(0,n.jsx)(q.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(ej.w,{content:o})}),a&&(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(tR.z,{variant:"circle",type:"button",onClick:r,children:a})})]})},i_="paywalls.lock_screen.sidebar.paywall_edit_form.branded_app_empty_state",ix=function(){window.open(J.Lo.plans.brandedApps,"_blank")},ij=function(e){var t=e.children,r=(0,nR.B)(),i=r.shouldShowBrandedAppBanner,o=r.isCommunityOnPlus;return i&&!o?(0,n.jsx)(ig,{subtitle:(0,l.t)([i_,"community_not_on_plus_plan","title"]),buttonText:(0,l.t)("learn_more"),onClickButton:ix}):i&&o?(0,n.jsx)(ig,{subtitle:(0,l.t)([i_,"community_on_plus_plan","title"]),buttonText:(0,l.t)("sign_up")}):(0,n.jsx)(n.Fragment,{children:t})},iw=function(){return(0,n.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,n.jsxs)("div",{className:"flex h-full w-64 flex-col gap-y-4 py-8",children:[(0,n.jsx)(q.Z.BodySm,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.paywalls_empty_state.title")}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(tR.z,{type:"button",onClick:function(){window.open(J.Lo.paywalls.index,"_blank")},full:!1,children:(0,l.t)("paywalls.lock_screen.sidebar.paywalls_empty_state.cta")})})]})})},iO=function(){return(0,n.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,n.jsxs)("div",{className:"flex h-full w-64 flex-col gap-y-4 py-8",children:[(0,n.jsx)(q.Z.BodySm,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.web_paywall_prices_empty_state.title")}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(tR.z,{type:"button",onClick:function(){window.open(J.Lo.paywalls.index,"_blank")},full:!1,children:(0,l.t)("paywalls.lock_screen.sidebar.web_paywall_prices_empty_state.cta")})})]})})},iS=function(e){var t=e.children,r=im(),i=r.hasPaywalls,o=r.hasWebPaywallPrices;return i&&!o?(0,n.jsx)(iO,{}):i||o?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(iw,{})},ik=function(e){var t=e.localeString,r=e.icon,i=e.useWithFillCurrentColor;return(0,n.jsxs)("div",{className:"flex flex-row gap-x-2.5 self-center",children:[(0,n.jsx)(ef.JO,{className:"",type:r,size:16,useWithFillCurrentColor:i}),(0,l.t)(t)]})},iP=function(e){var t=e.index,r=(0,b.Gc)(),i=r.setValue,o=r.watch,a=r.unregister,s=im(),c=s.fieldArrayMethods,u=s.fieldNameRoot,d=o("".concat(u,".").concat(t,".paywall_highlighted")),f=c.fields.length>1;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.paywall_title",{index:t+1})}),(0,n.jsxs)(tc.Lt,{button:(0,n.jsx)(rB.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,l.t)("community_member.actions")}),children:[d&&(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){i("".concat(u,".").concat(t,".paywall_highlighted"),!1)},linkType:"button",children:(0,n.jsx)(ik,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.remove_highlight",icon:"16-star-fill"})}),!d&&(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){c.fields.forEach(function(e,r){i("".concat(u,".").concat(r,".paywall_highlighted"),r===t)})},linkType:"button",children:(0,n.jsx)(ik,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.highlight_price",icon:"16-star"})}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){c.swap(t,t-1)},isDisabled:t<=0,linkType:"button",children:(0,n.jsx)(ik,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.move_up",icon:"16-arrow-up"})}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){c.swap(t,t+1)},isDisabled:c.fields.length<=t+1,linkType:"button",children:(0,n.jsx)(ik,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.move_down",icon:"16-arrow-down"})}),(0,n.jsx)(tc.Lt.ItemWithLink,{onClick:function(){a("".concat(u,".").concat(t,".id")),c.remove(t)},linkType:"button",hasDanger:!0,children:(0,n.jsx)(ik,{localeString:"delete",icon:"16-trash-bin"})})]})]})]})},iC=r(31284),iN=function(e){return{id:e.id,scenario:e.scenario,amount:e.amount,upfront_payment_amount:e.upfront_payment_amount,installments_count:e.installments_count,installment_amount:e.installment_amount,interval_count:e.interval_count,interval:e.interval,price_type:e.price_type,trial_days:e.trial_days}},iA=function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},iN(e)),r=r={processor_id:e.processor_id,price_package_id:e.price_package_id},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},iI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stripe";return e?"stripe"===t?iN(e):iA(e):{id:null}};function iE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var iL=function(e){var t=e.index,r=e.initialPaywallId,i=im(),o=i.allPaywallOptions,a=i.allMobilePrices,s=i.paywallsListQuery,c=i.selectedPaywallIds,u=i.fieldNameRoot,f=i.fieldArrayMethods,p="".concat(u,".").concat(t,".id"),m=(0,b.qo)({name:p,defaultValue:null}),h=(0,b.Gc)(),y=h.getFieldState,v=h.formState,g=y(p).error,_=!!v.errors&&!!g,x=function(){var e,r,n=s.data.find(function(e){return e.id===m}),i=n.prices.find(function(e){return e.is_web_price}),o=a.find(function(e){return e.paywall_id===n.id});f.update(t,{id:n.id,display_name:n.display_name,description:n.description,checkout_path:n.checkout_path,paywall_highlighted:!1,currency:{id:n.currency.id,code:n.currency.code,symbol:n.currency.symbol},processor_id:null==n?void 0:n.processor_id,mobile_processor_id:null==n?void 0:n.mobile_processor_id,status:null==n?void 0:n.status,web_paywall_price:(e=iT({},iI(i)),r=r={trial_days:null==n?void 0:n.trial_days},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e),mobile_paywall_price:iI(o,"mobile")})};(0,d.useEffect)(function(){m&&m!==r&&x()},[m,r]);var j=function(e){return!c.includes(e.value)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.filter(j);return t?r.filter(function(e){return("string"==typeof e.label?e.label:e.textLabel).toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase().replace(/\s+/g,""))}):function(e){if(Array.isArray(e))return iE(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return iE(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iE(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()};return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_paywall")}),(0,n.jsx)(b.Qr,{name:p,defaultValue:r,rules:{required:(0,l.t)("paywalls.lock_screen.sidebar.errors.paywall_not_selected")},render:function(e){var t=e.field;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(iC.rx,iT({isError:_,options:o,buttonClassName:"flex flex-col w-full p-4",filterBy:w},t)),_&&(0,n.jsx)(q.Z.LabelXs,{color:"text-feedback-error",children:g.message})]})}})]})},iD=r(43032),iM=function(e){var t,r=e.paywall,i=e.filterByPrice,o=e.index,a=(0,ts.I)().show,s=im(),c=s.paywallsListQuery,u=s.allInAppPaywallPriceOptions,f=s.fieldArrayMethods,p=s.allMobilePrices,m=(0,d.useMemo)(function(){var e;return 0===i(u).length&&!(null==r||null==(e=r.mobile_paywall_price)?void 0:e.id)},[u,i,r]);return(0,n.jsx)(n.Fragment,{children:m?(0,n.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,n.jsx)(q.Z.BodySm,{children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.no_mobile_prices")}),(0,n.jsx)("div",{children:(0,n.jsx)(tR.z,{variant:"circle",type:"button",onClick:function(){var e;return a({paywall:(null!=(e=null==c?void 0:c.data)?e:[]).find(function(e){return e.id===r.id}),refetchPaywalls:function(){c.refetch()},initialTab:iD.eA.PRICING_TAB})},children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_mobile_price")})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_default_price")}),(0,n.jsx)(iC.rx,{options:u,value:null==r||null==(t=r.mobile_paywall_price)?void 0:t.price_package_id,buttonClassName:"flex flex-col w-full p-4",filterBy:i,onChange:function(e){if(e){var t,n,i=p.find(function(t){return t.id===e});f.update(o,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={mobile_paywall_price:iI(i,"mobile")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}}})]})})},iR=function(e){var t,r=e.paywall,i=e.filterByPrice,o=e.index,a=im(),s=a.allStripePrices,c=a.allWebPaywallPriceOptions,u=a.fieldNameRoot,f=(0,b.Gc)(),p=f.setValue,m=f.watch,h=f.formState,y=f.getFieldState,v="".concat(u,".").concat(o,".web_paywall_price.id"),g=m(v),_=y(v).error,x=!!h.errors&&!!_,j=function(){var e=s.find(function(e){return e.id===g});p("".concat(u,".").concat(o,".web_paywall_price"),iI(e))};(0,d.useEffect)(function(){g&&j()},[g]);var w=0===c.length&&!!(null==r||null==(t=r.web_paywall_price)?void 0:t.id);return(0,n.jsx)(n.Fragment,{children:w?(0,n.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,n.jsx)(q.Z.BodySm,{children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.no_web_prices")}),(0,n.jsx)("div",{children:(0,n.jsx)(tR.z,{variant:"circle",type:"button",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_web_price")})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_default_price")}),(0,n.jsx)(b.Qr,{name:v,defaultValue:g,rules:{required:(0,l.t)("paywalls.lock_screen.sidebar.errors.paywall_price_not_selected")},render:function(e){var t=e.field;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(iC.rx,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isError:x,options:c,buttonClassName:"flex flex-col w-full p-4",filterBy:i},t)),x&&(0,n.jsx)(q.Z.LabelXs,{color:"text-feedback-error",children:_.message})]})}})]})})};function iB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var iF=function(e){var t=e.index,r=im(),i=r.fieldNameRoot,o=r.previewMode,a=(0,(0,b.Gc)().watch)("".concat(i,".").concat(t)),s=(0,ii.h)(o)?null==a?void 0:a.web_paywall_price:null==a?void 0:a.mobile_paywall_price,l=function(e){return e.paywall_id===a.id&&e.value!==(null==s?void 0:s.id)},c=function(e){return e.paywall_id===a.id&&e.value!==(null==s?void 0:s.price_package_id)},u=(0,ii.h)(o)?iR:iM;return(null==a?void 0:a.id)?(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsx)(u,{paywall:a,filterByPrice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.filter((0,ii.h)(o)?c:l);return t?r.filter(function(e){return("string"==typeof e.label?e.label:e.textLabel).toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase().replace(/\s+/g,""))}):function(e){if(Array.isArray(e))return iB(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return iB(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iB(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},index:t})}):null},iz=function(){var e=im(),t=e.shouldDisableAddPaywall,r=e.fieldArrayMethods,i=e.onClickAddPaywall;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"divide-primary flex w-full flex-col divide-y",children:r.fields&&r.fields.map(function(e,t){return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 py-6 first:pt-0 last:pb-0",children:[(0,n.jsx)(iP,{index:t}),(0,n.jsxs)("div",{className:j()("flex flex-col gap-y-4"),children:[(0,n.jsx)(iL,{initialPaywallId:e.id,index:t}),(0,n.jsx)(iF,{index:t})]})]},e._id)})}),(0,n.jsx)(tR.z,{variant:"circle",large:!0,type:"button",onClick:i,disabled:t,children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_paywall")})]})},iU=function(){return(0,n.jsx)(ij,{children:(0,n.jsx)(iS,{children:(0,n.jsx)(iz,{})})})},iZ=function(e){var t=e.children,r=(0,c.wh)().currentCommunity,i=(0,ih.l)({paymentProcessor:null==r?void 0:r.payment_processor}).paymentProcessorStatus;return(0,iy._k)(i)?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,n.jsx)(q.Z.LabelMd,{weight:"bold",children:(0,l.t)("paywalls.lock_screen.sidebar.connect_stripe_container.title")}),(0,n.jsx)(q.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(ej.w,{content:(0,l.t)("paywalls.lock_screen.sidebar.connect_stripe_container.text")})}),(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(tR.z,{variant:"circle",type:"button",onClick:function(){window.open(J.Lo.paywalls.index,"_blank")},children:(0,l.t)("paywalls.lock_screen.sidebar.connect_stripe_container.cta")})})]})},iG=function(){return(0,n.jsx)(iZ,{children:(0,n.jsx)(iS,{children:(0,n.jsx)(iz,{})})})},iq=function(){var e=(0,nR.B)().previewMode;return(0,ii.h)(e)?(0,n.jsx)(iG,{}):(0,n.jsx)(iU,{})},iV=function(){var e=im(),t=e.paywallsListQuery,r=e.fieldNameRoot,i=(0,b.Gc)(),o=i.watch,a=i.reset,s=o(r);return((0,d.useEffect)(function(){a(void 0,{keepDirty:!0,keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0,keepTouched:!0})},[s,a]),t.isLoading)?(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(e7.a,{})}):(0,n.jsx)("div",{className:"flex h-full flex-col justify-start gap-y-6",children:(0,n.jsx)(iq,{})})},iH={banner:n2,description:n5,call_to_action:n3,legacy_lock_screen:ir,paywalls:function(e){var t=e.blockDataPath;return(0,n.jsx)(ip,{blockDataPath:t,children:(0,n.jsxs)("div",{className:"flex h-full flex-col gap-y-6",children:[(0,n.jsx)(iv,{}),(0,n.jsx)(ib,{}),(0,n.jsx)(iV,{})]})})}},iW=function(e){var t=e.type,r=e.id,i=(0,(0,nM.sE)().getBlockDataPath)(r);if(!i)return null;var o=iH[t];return o?(0,n.jsx)(o,{blockDataPath:i}):null};iW.propTypes={type:m().string.isRequired,id:m().string.isRequired};var iQ=function(){var e=(0,nM.sE)(),t=e.removeBlockBeingEdited,r=e.blockBeingEdited;if(!r)return null;var i=r.type,o=r.id;return(0,n.jsxs)("div",{className:"h-full p-6",children:[(0,n.jsx)("button",{type:"submit",className:"text-dark -ml-2 mb-4 block h-7 w-7",onClick:t,children:(0,n.jsx)(ef.JO,{type:"20-arrow-left",size:20})}),(0,n.jsx)(iW,{type:i,id:o})]})},iJ=r(75498),iK=r(44081),i$=function(e){var t=e.icon,r=e.label,i=e.noEdit,o=(0,iK.dw)().useDragHandle,a=(0,iK.dI)(),s=a.item,c=a.listeners,u=(0,nM.sE)(),d=u.toggleBlockHidden,f=u.setBlockBeingEdited,p=s.hidden,m=[];return void 0!==i&&i||m.push({tooltip:(0,l.t)("courses.lockscreen.edit_block"),icon:"pencil",onClick:function(){return f(s)}}),m.push({tooltip:p?(0,l.t)("courses.lockscreen.show_block"):(0,l.t)("courses.lockscreen.hide_block"),icon:p?"16-eye-closed":"16-eye-open",onClick:function(){return d(s.id)}}),(0,n.jsx)(iJ.TR,{item:{icon:t,label:r},actions:m,dragEventListeners:c,useDragHandle:o,className:j()({"bg-secondary text-light":p})})};i$.propTypes={block:m().shape({id:m().string,type:m().string,hidden:m().bool,data:m().object}),icon:m().string,label:m().oneOfType([m().string,m().node]),noEdit:m().bool};var iX=r(94024),iY={banner:function(){return(0,n.jsx)(i$,{icon:"16-video-block",label:(0,l.t)("courses.lockscreen.banner")})},description:function(){return(0,n.jsx)(i$,{icon:"16-document-text",label:(0,l.t)("courses.lockscreen.description")})},call_to_action:function(){return(0,n.jsx)(i$,{icon:"16-call-to-action",label:(0,l.t)("courses.lockscreen.call_to_action")})},lessons:function(){return(0,n.jsx)(i$,{icon:"16-text",label:(0,l.t)("courses.lockscreen.lessons"),noEdit:!0})},legacy_lock_screen:function(){return(0,n.jsx)(i$,{icon:"16-document-text",label:(0,l.t)("courses.lockscreen.legacy_lock_screen")})},paywalls:function(){return(0,n.jsx)(i$,{icon:"16-payments",label:(0,n.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,n.jsx)(q.Z.LabelSm,{children:(0,l.t)("courses.lockscreen.paywalls")}),(0,n.jsx)(iX.g,{})]})})}},i0=function(){var e=(0,iK.dI)().item,t=iY[e.type];return(0,n.jsx)(t,{block:e})},i1=function(e){var t,r,i=e.blocks,o=e.onSort,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["blocks","onSort"]),s=(0,S.UV)().contentPortalElement;return(0,n.jsxs)(iK.cm,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:i,onSort:o},a),r=r={children:[(0,n.jsx)(iK.cm.List,{children:i.map(function(e){return(0,n.jsx)(iK.cm.Item,{item:e,children:(0,n.jsx)(i0,{})},e.id)})}),(0,n.jsx)(iK.cm.DragOverlay,{portalTo:s,children:(0,n.jsx)(i0,{})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};i1.propTypes={blocks:m().array,onSort:m().func};var i2=function(){var e=(0,s.k6)(),t=(0,P.eW)().onExit;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border border-[#FDE68A] bg-[#FEF3C7] p-4",children:[(0,n.jsx)(q.Z.LabelMd,{weight:"semibold",children:(0,l.t)("courses.lockscreen.website_builder_notice.title")}),(0,n.jsx)(q.Z.BodySm,{children:(0,l.t)("courses.lockscreen.website_builder_notice.description")}),(0,n.jsx)(tR.z,{type:"button",onClick:function(){t(),e.push(J.Lo.content.pages)},variant:"secondary",className:"mt-1 self-start",children:(0,l.t)("courses.lockscreen.website_builder_notice.button")})]})},i3=function(){var e=(0,nM.sE)(),t=e.blocks,r=e.replaceBlocks,i=(0,ed.s)();return(0,n.jsxs)("div",{className:"flex h-full flex-col p-6",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(n8.v,{className:"mb-7",children:i?(0,l.t)("courses.lockscreen.only_visible_on_private"):(0,l.t)("courses.lockscreen.only_visible_on_private_old")}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(q.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.page_blocks")})}),(0,n.jsx)(i1,{blocks:t,onSort:r})]}),i&&(0,n.jsx)(i2,{})]})},i6=function(){return(0,nM.sE)().isEditingBlock?(0,n.jsx)(iQ,{}):(0,n.jsx)(i3,{})};function i4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function i5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}i6.propTypes={space:m().object.isRequired};var i8=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=r.find(function(e){return"legacy_lock_screen"===e.type});return n?i5(i4({},n.data),{locked_page_description:(null==(t=n.data)||null==(e=t.locked_page_description)?void 0:e.trix_html)||""}):null},i9=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){return(0,u.omit)(e,"id")}).map(function(e){if("lessons"===e.type||"legacy_lock_screen"===e.type)return i5(i4({},e),{data:{}});if("paywalls"===e.type)return e.data.paywalls=(0,u.compact)(e.data.paywalls.map(function(e){var t,r,n=!(null==e?void 0:e.id),i=!(null==e||null==(t=e.web_paywall_price)?void 0:t.id)&&!(null==e||null==(r=e.mobile_paywall_price)?void 0:r.id);return n||i?null:e})),e;return e})},i7=function(e){var t=e.lock_screen_blocks,r=i8(t),n=!!r,i=i9(t);return n?i4({lock_screen_blocks:i},r):{lock_screen_blocks:i}},oe=function(e){var t=e.space,r=void 0===t?{}:t,i=e.onSave,o=(0,P.eW)(),a=o.formId,s=o.addBeforeExit,c=o.removeBeforeExit,f=(0,b.Gc)(),p=f.handleSubmit,m=f.formState,h=f.reset,y=Object.keys(m.dirtyFields).length>0,v=(0,nR.B)().shouldShowBrandedAppBanner,g=(0,nM.sE)().previewMode,_=(0,d.useCallback)(function(){return!y||window.confirm((0,l.t)("courses.lockscreen.modal.unsaved_changes"))},[y]);(0,d.useEffect)(function(){return s(_),c},[c,s,_]);var x="desktop"===g?(0,n.jsx)(P.Ar.Main,{children:(0,n.jsx)(nU.WebPreview,{space:r})}):(0,n.jsx)(P.Ar.MainMobile,{children:(0,n.jsx)(nU.MobilePreview,{space:r})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.Ar.Sidebar,{children:(0,n.jsx)("form",{id:a,className:"react-form h-full w-full",onSubmit:p(function(e){(0,u.isFunction)(i)&&(i(i7(e)),h(null,{keepValues:!0}))}),children:(0,n.jsx)(i6,{})})}),v?(0,n.jsx)(nI.V.LandingPage,{}):x]})};oe.propTypes={space:m().object,courseSettings:m().object,onSave:m().func,debug:m().bool};var ot=function(e){var t=e.space,r=void 0===t?{}:t,i=(0,H.pm)(),o=i.success,a=i.error,s=(0,c.T4)({spaceId:r.id}).refetch,u=(0,nA.z1)({space:r,options:{onSuccess:function(){s(),o((0,l.t)("courses.lockscreen.toast.saved"))},onError:function(){a((0,l.t)("courses.lockscreen.toast.save_error"))}}}).mutate;return(0,n.jsx)(oe,{space:r,onSave:u})};ot.propTypes={space:m().object};var or=function(e){var t=e.space,r=void 0===t?{}:t;return(0,n.jsx)(nM.Tw,{space:r,children:(0,n.jsx)(ot,{space:r})})};or.propTypes={space:m().object};var on=function(e){var t=e.onClose,r=e.space,i=e.scrollToId,o=(0,P.eW)().currentSection;return(i&&(0,u.delay)(function(){var e;return null==(e=document.getElementById(i))?void 0:e.scrollIntoView()},0),o===(0,l.t)("customize_space.paywalls.title"))?(0,n.jsx)(tO,{}):o===(0,l.t)("customize_space.customize")?(0,n.jsx)(eD,{space:r}):o===(0,l.t)("customize_space.members")?(0,n.jsx)(tU,{space:r}):o===(0,l.t)("customize_space.options")?(0,n.jsx)(e8,{space:r}):o===(0,l.t)("customize_space.lessons")?(0,n.jsx)(nN,{space:r}):o===(0,l.t)("customize_space.lock_screen")?(0,n.jsx)(or,{space:r}):o===(0,l.t)("customize_space.workflows")?(0,n.jsx)(tG,{onClose:t}):null},oi=r(26092),oo=function(e){var t=e.space,r=e.scrollToId,i=e.onClose,o=(0,P.eW)().currentSection===(0,l.t)("customize_space.lock_screen"),a=o?"no-header":"only-main";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.Ar,{variant:a,className:(0,tb.A)({"hidden lg:grid":o}),children:(0,n.jsx)(on,{space:t,scrollToId:r,onClose:i})}),o&&(0,n.jsx)(oi.R,{className:"lg:hidden",title:(0,l.t)("courses.lockscreen.mobile_unsupported.title"),description:(0,l.t)("courses.lockscreen.mobile_unsupported.description")})]})},oa=r(37416),os=r(46706),ol=function(){var e=(0,G.mx)(),t=e.dirtyForms,r=e.setDirtyForms,n=t||G.Wm,i=n.customize,o=n.options;return{isDirty:Object.values(i).some(Boolean)||Object.values(o).some(Boolean),resetDirtyFields:function(){r(G.Wm)}}},oc=function(){var e=(0,P.eW)(),t=e.onExit,r=e.isSaving,i=e.formId,o=e.isSaveButtonDisabled,a=ol(),s=a.isDirty,c=a.resetDirtyFields,u=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled;return(0,n.jsxs)("div",{className:"flex w-full flex-col items-start justify-between gap-y-2 md:flex-row md:items-center md:gap-y-0",children:[(0,n.jsx)(q.Z.LabelSm,{weight:"semibold",children:s&&(0,l.t)("unsaved_changes")}),(0,n.jsxs)("div",{className:j()({"grid w-full grid-cols-2 gap-4":u,"flex gap-4":!u}),children:[(0,n.jsx)(tR.z,{variant:"secondary",onClick:function(){s&&c(),t()},full:u,children:(0,l.t)("cancel")}),(0,n.jsx)(os.k,{full:u,type:"submit",formId:i,disabled:r||o,variant:"circle",children:(0,l.t)("save_changes")})]})]})};oc.propTypes={onSave:m().func.isRequired};var ou=r(85633),od=r(24304),of=r(3743),op=function(){var e=(0,P.eW)(),t=e.formId,r=e.isSaving;return(0,n.jsx)(P.h4.Actions,{className:"hidden justify-end lg:flex",children:(0,n.jsx)(P.h4.SaveButton,{type:"submit",formId:t,disabled:r,variant:"circle",children:(0,l.t)("save_changes")})})},om=function(){var e=(0,P.eW)(),t=e.sections,r=e.currentSection,i=e.setCurrentSection,o=e.title,a=(0,tl.kK)(),s=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled,c=oP(),u=(0,of.X)(),d=r===(0,l.t)("customize_space.lock_screen"),f=t.map(function(e){return{value:e,label:e}});return(0,n.jsxs)(P.h4,{className:"flex !max-h-[initial] flex-col !items-start gap-4 !p-0 lg:grid lg:!items-center",style:{gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[a&&s&&(0,n.jsx)(rB.h,{name:"16-arrow-left",onClick:c.hide}),o&&(0,n.jsx)("span",{className:"flex w-full min-w-0",children:(0,n.jsx)(tI.T,{content:o,className:"truncate text-lg font-semibold",interactive:!1,children:o})})]}),a&&(0,n.jsx)(ou.o,{onClick:function(){c.hide(),u.hide()}})]}),(0,n.jsx)(P.h4.Actions,{className:"hidden w-full overflow-auto md:block lg:justify-center lg:overflow-visible",children:(0,n.jsx)(od.S,{value:r,onChange:i,options:f})}),d&&(0,n.jsx)(op,{})]})};om.propTypes={};var ob=function(e){var t=e.children,r=(0,P.eW)().currentSection,i=(0,v.v)().isMobileWebNewSpaceCustomizationUIEnabled,o=r===(0,l.t)("customize_space.lock_screen"),a=r===(0,l.t)("customize_space.members"),s=r===(0,l.t)("customize_space.lessons"),c=(0,tl.kK)(),u=[(0,l.t)("customize_space.customize"),(0,l.t)("customize_space.options")].includes(r),d=u&&i&&c;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oa.x.Header,{className:j()({"!px-5 !py-4":i}),children:(0,n.jsx)(om,{})}),(0,n.jsxs)(oa.x.Body,{className:j()({"px-5 py-8":i}),wrapperClassName:j()({"max-w-full h-full":o||a||s}),children:[t,d&&(0,n.jsx)(oc,{})]}),u&&!i&&(0,n.jsx)(oa.x.Footer,{children:(0,n.jsx)(oc,{})})]})};ob.propTypes={children:m().node};var oh=function(e){var t=e.isOpen,r=e.onSave,i=e.onClose,o=e.onExit,a=e.sections,s=e.initialSection,l=e.title,c=e.formId,u=e.contentPortalId,d=e.children;return(0,n.jsx)(oa.x,{isOpen:t,onClose:i,shouldShowCloseButton:!0,contentPortalId:void 0===u?"customize-space-portal":u,children:(0,n.jsx)(P.MW,{formId:void 0===c?"edit-space-form":c,sections:a,initialSection:s,title:l,onSave:r,onExit:o,children:(0,n.jsx)(ob,{children:d})})})};oh.propTypes={isOpen:m().bool,onSave:m().func,onClose:m().func,onExit:m().func,sections:m().array,initialSection:m().string,title:m().string,formId:m().string,contentPortalId:m().string,children:m().node};var oy=function(e){var t=e.isOpen,r=e.onExit,i=e.onClose,o=e.onSave,a=e.space,s=e.sections,l=e.initialSection,u=e.onSlugChange,d=e.scrollToId;return a?(0,n.jsx)(c.mE,{spaceId:a.id,children:(0,n.jsx)(c.DJ,{onSlugChange:u,children:(0,n.jsx)(oh,{isOpen:t,onClose:i,onExit:r,onSave:o,sections:s,initialSection:l,title:a.name,children:(0,n.jsx)(oo,{space:a,scrollToId:d,onClose:i})})})}):null},ov=r(99145),og=r(66249),o_=r(78456),ox=function(e){var t=e.isCourseSpace,r=e.areWorkflowsEnabled,n=e.isCommunityAdmin,i=[];return void 0!==t&&t&&i.push((0,l.t)("customize_space.lessons")),i.push((0,l.t)("customize_space.customize")),n&&i.push((0,l.t)("customize_space.paywalls.title")),i.push((0,l.t)("customize_space.lock_screen")),i.push((0,l.t)("customize_space.members")),i.push((0,l.t)("customize_space.options")),r&&i.push((0,l.t)("customize_space.workflows")),i};function oj(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function ow(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){oj(o,n,i,a,s,"next",e)}function s(e){oj(o,n,i,a,s,"throw",e)}a(void 0)})}}function oO(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var oS=function(e){var t=e.spaceId,r=e.refetch,i=e.initialSection,u=e.shouldRedirectOnSlugChange,d=void 0===u||u,f=e.scrollToId,p=(0,s.k6)(),m=(0,a.useQueryClient)(),b=(0,c.wh)(),h=b.currentCommunitySettings,v=b.currentCommunityMember,g=(0,c.T4)({spaceId:t}),_=g.space,x=g.refetch,j=(0,c.nT)().actions.refresh,w=(0,y.fO)(),O=(0,ex.dd)(),S=(0,H.pm)().success,k=function(){return ow(function(){return oO(this,function(e){switch(e.label){case 0:return[4,m.invalidateQueries([c.Xe,t])];case 1:return e.sent(),[4,m.invalidateQueries([og.Jl,t])];case 2:return e.sent(),[4,x()];case 3:return e.sent(),[4,j()];case 4:if(e.sent(),!o()(r))return[3,6];return[4,r()];case 5:e.sent(),e.label=6;case 6:return[2]}})})()},P=(0,a.useMutation)(function(e){var t=(0,ov.$o)(e);return(0,te.aU)((0,J.C1)(String(null==_?void 0:_.id)),{space:t})},{onSuccess:function(){return ow(function(){return oO(this,function(e){switch(e.label){case 0:return S((0,l.t)("changes_saved")),[4,k()];case 1:return e.sent(),[2]}})})()}}),C=ox({isCourseSpace:(0,y.EG)(_),isCommunityAdmin:(0,o_.vb)(v),areWorkflowsEnabled:!!(null==h?void 0:h.upgrade_flows_for_workflows_spaces_enabled)});return(0,n.jsx)(oy,{isOpen:O.visible,space:_,sections:C,initialSection:i||C[0],scrollToId:f,onSlugChange:function(e){if(d){var t=w(e);t&&p.push(t)}},onSave:function(e){var t=e.data,r=e.onSuccess;P.mutate(t,{onSuccess:r})},onExit:function(){k(),O.hide()},onClose:function(){return O.hide()}})},ok=ex.gk.create(function(e){return(0,n.jsx)(oS,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),oP=function(){return(0,ex.dd)(ok)}},69447:function(e,t,r){"use strict";r.d(t,{C:()=>w});var n=r(41084),i=r(39766),o=r(64282),a=r(85893),s=r(84326),l=r(98869),c=r(44281),u=r(42953),d=r(57105),f=r(34519),p=r(66403),m=r(28414),b=r(59834),h=r(98363),y=r(41553);function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var _=function(e){var t=e.member,r=t.name,n=t.avatar_url,i=t.rsvp_status,o=t.public_uid,s=(0,b.O)({public_uid:o});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"hover:bg-secondary group flex h-14 items-center rounded-md px-2",children:[(0,a.jsx)("div",{className:"mr-3",children:(0,a.jsx)("a",g(v({},s),{title:r,children:(0,a.jsx)(h.s,{src:n,name:r,size:"8"})}))}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("a",g(v({},s),{title:r,children:(0,a.jsx)(m.Y,{children:(0,a.jsx)(y.Z.LabelSm,{weight:"semibold",children:r})})}))}),(0,a.jsx)("div",{className:"mx-2 flex w-24 shrink-0 justify-end",children:(0,a.jsx)(p.j,{rsvpStatus:i})})]}),(0,a.jsx)("hr",{})]})},x=function(e){var t=e.event,r=(0,d.dd)(),n=(0,c.V)(t,u.a.PARTICIPANT),i=n.records,o=n.fetchPrevPage,p=n.fetchNextPage,m=n.hasPrevPage,b=n.hasNextPage,h=n.totalRecordCount,y=n.totalConfirmedRecordCount,v=n.startRecordNumber,g=n.endRecordNumber,x=n.resetPage;return(0,a.jsxs)(f.u_,{isOpen:r.visible,onClose:function(){x(),r.hide()},children:[(0,a.jsx)(f.u_.Overlay,{}),(0,a.jsxs)(f.u_.Content,{children:[(0,a.jsxs)(f.u_.Header,{children:[(0,a.jsxs)(f.u_.Title,{size:"sm",className:"text-center",children:[y," ",(0,s.t)("events.attendees")]}),(0,a.jsx)(f.u_.HeaderActions,{children:(0,a.jsx)(f.u_.CloseButton,{onClick:r.hide})})]}),(0,a.jsx)(f.u_.Body,{className:"overflow-y-auto md:!px-6",children:(0,a.jsxs)("div",{children:[(null==i?void 0:i.length)>0&&(0,a.jsx)("div",{className:"flex w-full flex-col",children:null==i?void 0:i.map(function(e){return(0,a.jsx)(_,{member:e},e.id)})}),h>0&&(0,a.jsx)(l.t,{startRecordNumber:v,endRecordNumber:g,totalRecordCount:h,fetchPrevPage:o,fetchNextPage:p,hasPrevPage:m,hasNextPage:b})]})})]})]})},j=d.gk.create(function(e){return(0,a.jsx)(x,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),w=function(e){var t=e||{},r=t.event_setting_attributes,a=t.event_attendees,s=t.slug,l=t.space_slug,c=(0,n.ou)(e),u=(0,n.sN)(e),f=(0,o.Z)(),p=(0,d.dd)(j),m=a||{},b=m.records,h=m.count,y=r||{},v=y.hide_attendees;return y.rsvp_disabled||v?null:{attendees:b,totalCount:h,canManageEvent:c,handleAttendeesClick:function(){if(l&&s)if(u){var t;f.show({event:e,defaultSection:i.SA.people,locationType:null==(t=e.event_setting_attributes)?void 0:t.location_type})}else p.show({event:e})},canUpdateEvent:u}}},39773:function(e,t,r){"use strict";r.d(t,{m:()=>a});var n=r(85893),i=r(52723),o=r(1168),a=function(e){var t=e.dateString,r=e.isSquare,a=void 0!==r&&r,s=(0,i.N)(t),l=s.dayOfMonth,c=s.shortMonthString;return(0,n.jsxs)("div",{className:(0,o.A)("bg-secondary flex cursor-default flex-col items-center justify-center rounded-md py-1.5",{"h-12 w-12":a,"w-10":!a}),children:[(0,n.jsx)("div",{className:"text-dark text-center text-base font-bold leading-5",children:l}),(0,n.jsx)("div",{className:"text-dark text-center font-medium uppercase",style:{fontSize:"9px"},children:c})]})}},28384:function(e,t,r){"use strict";r.d(t,{Bq:()=>o,Mk:()=>c,S2:()=>u,mv:()=>a,oL:()=>l});var n=r(37588),i=r(25152),o={VIRTUAL:"virtual",IN_PERSON:"in_person",TBD:"tbd",LIVE_STREAM:"live_stream",LIVE_ROOM:"live_room"},a=function(e){return(null==e?void 0:e.status)===i.Q_.DRAFT},s=function(e){var t,r;return null==e||null==(r=e.event_setting_attributes)||null==(t=r.live_stream_room_setting_attributes)?void 0:t.stream_status},l=function(e){return s(e)===n.LV.ENDED},c=function(e){return s(e)===n.LV.BACKSTAGE},u=function(e){return s(e)===n.LV.LIVE}},4826:function(e,t,r){"use strict";r.d(t,{I:()=>p});var n=r(85893),i=r(67294),o=r(37054),a=r(84326),s=r(41084),l=r(41553),c=r(39905),u=["places"],d={streetViewControl:!1,mapTypeControl:!1,scrollWheel:!1,fullscreenControl:!1,panControl:!1,rotateControl:!1,gestureHandling:"none",clickableIcons:!1,controlSize:25,disableDoubleClickZoom:!0,draggableCursor:"arrow",draggingCursor:"arrow",keyboardShortcuts:!1},f=function(e){if(null==e?void 0:e.geometry){var t,r,n,i;return{lat:null==e||null==(r=e.geometry)||null==(t=r.location)?void 0:t.lat,lng:null==e||null==(i=e.geometry)||null==(n=i.location)?void 0:n.lng}}return null},p=(0,i.memo)(function(e){var t=e.serializedLocation,r=e.variant,p=void 0===r?"default":r,m=(0,o.Ji)({id:"google-map-script",googleMapsApiKey:window.GOOGLE_MAPS_API_KEY||"",libraries:u}).isLoaded,b=(0,i.useMemo)(function(){return(0,s.qO)(t)},[t]),h=(0,i.useMemo)(function(){return f(b)},[b]),y=function(){window.open(b.url,"_blank")};return m?"default"===p?(0,n.jsxs)("div",{className:"mt-6 flex space-x-3",children:[h&&(0,n.jsx)(o.b6,{mapContainerClassName:"h-16 w-[150px] rounded-md border border-primary",zoom:15,options:d,center:h,children:(0,n.jsx)(o.Jx,{cursor:"arrow",position:h})}),(0,n.jsxs)("div",{className:"-mt-1",children:[(0,n.jsxs)("div",{children:[(null==b?void 0:b.name)&&(0,n.jsx)(l.Z.LabelXs,{weight:"semibold",children:null==b?void 0:b.name}),(null==b?void 0:b.formatted_address)&&(0,n.jsx)(l.Z.BodyXs,{children:null==b?void 0:b.formatted_address})]}),(null==b?void 0:b.url)&&(0,n.jsx)(c.z,{variant:"text",onClick:y,className:"!text-link !text-xs",children:(0,a.t)("events.rsvp.view_map")})]})]}):"full"===p?(0,n.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[h&&(0,n.jsx)(o.b6,{mapContainerClassName:"h-[220px] w-full rounded-md border border-primary",zoom:14,options:d,center:h,children:(0,n.jsx)(o.Jx,{cursor:"arrow",position:h})}),(0,n.jsxs)("div",{className:"-mt-1",children:[(null==b?void 0:b.name)&&(null==b?void 0:b.url)&&(0,n.jsx)(c.z,{variant:"text",onClick:y,className:"!text-left",children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:null==b?void 0:b.name})}),(null==b?void 0:b.formatted_address)&&(0,n.jsx)(l.Z.BodySm,{children:null==b?void 0:b.formatted_address})]})]}):(0,n.jsx)("div",{className:"flex flex-col space-y-4",children:(0,n.jsxs)("div",{className:"-mt-1",children:[(null==b?void 0:b.name)&&(null==b?void 0:b.url)&&(0,n.jsx)(c.z,{variant:"text",onClick:y,className:"!text-left",children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:null==b?void 0:b.name})}),(null==b?void 0:b.formatted_address)&&(0,n.jsx)(l.Z.BodyXs,{children:null==b?void 0:b.formatted_address})]})}):null})},9668:function(e,t,r){"use strict";r.d(t,{Y:()=>J});var n=r(85893),i=r(67294),o=r(84326),a=r(63029),s=r(78913),l=r(57363),c=r(41553),u=r(39905),d=function(e){var t=e.setShouldShowAddToCalendarModal;return(0,n.jsxs)(u.z,{variant:"secondary-light",full:!0,onClick:function(){t(!0)},className:"!border-primary flex justify-center gap-x-2 border",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-calendar-add",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",color:"text-primary",children:(0,o.t)("add_to_calendar")})]})},f=r(53926),p=r(34519),m=function(e){var t=e.isOpen,r=e.onClose,i=e.event,a=(0,f.O)({event:i,onChange:function(){}}),s=a.addToCalendar,d=a.downloadCalendar;return(0,n.jsxs)(p.u_,{title:(0,o.t)("events.add_to_calendar.confirm_modal.title"),isOpen:!!t,onClose:r,children:[(0,n.jsx)(p.u_.Overlay,{}),(0,n.jsxs)(p.u_.Content,{children:[(0,n.jsxs)(p.u_.Header,{className:"md:pb-4",children:[(0,n.jsx)(p.u_.Title,{size:"md",className:"text-center",children:(0,o.t)("events.add_to_calendar.confirm_modal.title")}),(0,n.jsx)(p.u_.HeaderActions,{children:(0,n.jsx)(p.u_.CloseButton,{onClick:r})})]}),(0,n.jsxs)(p.u_.Body,{children:[(0,n.jsx)("div",{className:"mb-4 text-center",children:(0,n.jsx)(c.Z.BodyMd,{color:"text-default",children:(0,o.t)("events.add_to_calendar.confirm_modal.description_1")})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(c.Z.BodyMd,{color:"text-default",children:(0,o.t)("events.add_to_calendar.confirm_modal.description_2")})})]}),(0,n.jsxs)(p.u_.Footer,{className:"space-y-2",children:[(0,n.jsxs)(u.z,{variant:"secondary",full:!0,large:!0,onClick:function(){d(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-download",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,o.t)("events.add_to_calendar.confirm_modal.download")]}),(0,n.jsxs)(u.z,{variant:"secondary",full:!0,large:!0,onClick:function(){s(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-refresh",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,o.t)("events.add_to_calendar.confirm_modal.resend")]})]})]})]})},b=r(25152),h=r(84367),y=r(42953),v=r(80926),g=r(60622),_=r(41342),x=r(4393),j=r(1168),w=r(76896),O=r(37967),S=r(94188),k=function(e){var t=e.event,r=e.onChange,i=e.buttonText,o=(0,S.j)({event:t}),a=o.isRecurringRsvpOpen,s=o.openRecurringRsvpModal,l=o.onRecurringModalClose;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{type:"submit",onClick:s,children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",color:"text-link",children:i})}),(0,n.jsx)(O.O,{event:t,show:a,onClose:l,onChange:r,eventRsvpedByDefault:!1})]})},P=r(39635),C=function(e){var t=e.event,r=t.event_setting_attributes,i=t.rsvped_event,s=t.rsvp_status,u=r||{},d=u.rsvp_limit_reached,f=u.show_rsvp_limit_warning,p=s==b._w.INVITED;return i||p||d&&(0,y.yl)(t)||!f&&!d?null:(0,n.jsxs)("div",{className:"mb-6 flex flex-row items-center space-x-4",children:[(0,n.jsx)("div",{className:"bg-tertiary flex h-10 w-10 flex-none items-center justify-center rounded-lg",children:(0,n.jsx)(l.JO,{type:f?"20-event-clock":"20-event-members",size:20,className:"text-dark !h-5 !w-5"})}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-1 align-middle",children:[f&&!(0,a.QP)(t)&&(0,n.jsx)(c.Z.LabelXs,{weight:"medium",children:(0,n.jsx)("div",{className:"text-left",style:{color:"#F5A607"},children:(0,o.t)("events.rsvp.rsvp_limit_warning")})}),d&&(0,n.jsx)(c.Z.LabelXs,{weight:"medium",children:(0,n.jsx)("div",{className:"text-left",children:(0,o.t)("events.rsvp.rsvp_limit_reached")})})]})]})},N=r(8683),A=function(e){var t=e.icon;return(0,n.jsx)("div",{className:"bg-tertiary flex h-10 w-10 flex-none items-center justify-center rounded-lg",children:(0,n.jsx)(l.JO,{type:t,size:20,className:"text-dark !h-5 !w-5"})})},I=function(e){var t=e.eventData,r=e.endsAt,i=e.dataTestid,a=e.rsvpedEvent,s=t.location_type,l=t.virtual_location_url,d=t.hide_location_from_non_attendees;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4 pt-4","data-testid":i,children:[(0,n.jsx)(A,{icon:"20-calendar"}),(0,n.jsx)("div",{className:"flex flex-col truncate",children:(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.details.event_finished",{time_string:(0,N.TF)(r)})})})]}),!(d&&!a)&&"virtual"===s&&l&&(0,n.jsx)(u.z,{variant:"circle",full:!0,onClick:function(){window.open(l,"_blank","noreferrer")},className:"mt-6",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",color:"text-circle-button",children:(0,o.t)("events.locations.event_link")})})]})},E=r(28384),T=function(e){var t=e||{},r=t.event_setting_attributes,n=t.policies,i=r||{},o=i.starts_at,a=i.location_type,s=i.live_stream_slug,l=n||{},c=l.can_manage_post,u=l.can_update_post,d=(0,x.Gs)(o,20),f=[E.Bq.LIVE_STREAM,E.Bq.LIVE_ROOM].includes(a);return{hasLiveCreationIssue:d&&f&&!s&&c,canCreateLive:c||u}},L=r(1201),D=r(13532),M=function(e){var t=e.event,r=e.onChange,i=(0,_.wh)().currentUser,a=(0,f.O)({event:t,onChange:r}).rsvpWhileJoiningEvent,s=!!i,l=t||{},d=l.event_setting_attributes,p=l.rsvped_event,m=d||{},b=m.location_type,h=m.live_stream_slug,v=m.virtual_location_url,g=T(t)||{},x=g.hasLiveCreationIssue,j=g.canCreateLive,w=(0,L.y)(t),O=j&&(x||(0,E.oL)(t)),S=function(){s&&(p||a())},k=function(){var e=D.dE.room({roomSlug:h});(0,y.L6)(t)&&!s&&(e=D.dE.publicRoom({roomSlug:h})),window.open(e,"_blank")};return(0,n.jsx)(u.z,{variant:"primary",full:!0,onClick:function(){if(S(),"virtual"===b&&v)return void window.open(v,"_blank");O?w.mutate():k()},className:"mt-6",disabled:(0,E.mv)(t)||w.isLoading,children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",color:"text-primary",children:(0,o.t)("events.locations.join_".concat(b))})})},R=r(4826),B=r(78456),F=function(e){var t=e.event,r=(0,_.wh)().currentCommunityMember,i=(0,B.vb)(r),a=(null==t?void 0:t.community_member_id)==(null==r?void 0:r.id),s=!i&&!a,l=i?(0,o.t)("events.locations.limit_exceeded.admin_message"):(0,o.t)("events.locations.limit_exceeded.non_admin_owner_message");return(0,n.jsxs)("div",{className:"flex flex-col",children:[i&&(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(u.z,{variant:"primary",onClick:function(){var e=(0,D.f$)();window.open(e,"_blank")},children:(0,o.t)("events.locations.limit_exceeded.upgrade")})}),(i||a)&&(0,n.jsx)(c.Z.BodySm,{children:l}),s&&(0,n.jsx)(c.Z.BodySm,{children:(0,o.t)("events.locations.limit_exceeded.member_message")})]})},z=function(e){var t=e.event,r=e.shouldDisplayJoinButton,i=e.isLiveLimitReached,a=e.handleViewLiveStreamClick,s=e.hasEventFinished,l=e.isLoggedIn,d=t||{},f=d.event_setting_attributes,p=d.rsvped_event,m=f||{},b=m.location_type,h=m.live_stream_slug,y=m.live_stream_room_setting_attributes.limit_url_sharing,v=T(t)||{},g=v.hasLiveCreationIssue,_=v.canCreateLive,x=(0,L.y)(t),j=_&&(g||(0,E.oL)(t)),w=!!h&&(!y||p)&&((0,E.Mk)(t)||(0,E.S2)(t));return i?(0,n.jsx)(F,{event:t}):s||r||!(j||w)||!l?(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.location_types.".concat(b))}):(0,n.jsxs)(n.Fragment,{children:[j&&(0,n.jsx)(u.z,{variant:"text",onClick:function(){return x.mutate()},disabled:(0,E.mv)(t)||x.isLoading||x.isSuccess,children:(0,n.jsx)(c.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,o.t)("events.locations.create_".concat(b))})}),w&&(0,n.jsx)(u.z,{variant:"text",onClick:a,children:(0,n.jsx)(c.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,o.t)("events.locations.join_".concat(b))})})]})},U=function(e){var t=e.hasEventFinished,r=e.event,i=e.shouldDisplayJoinButton,a=e.isLiveLimitReached,s=e.shouldHideLocationFromCurrentMember,l=!!(0,_.wh)().currentCommunityMember,u=(r||{}).event_setting_attributes||{},d=u.location_type,f=u.in_person_location,p=u.virtual_location_url,m=u.live_stream_slug;if(s)return null;var h=!l||i||t,v=[b.Bq.LIVE_STREAM,b.Bq.LIVE_ROOM];return(0,n.jsxs)("div",{className:"pt-4","data-testid":"event-location",children:["virtual"===d&&p&&(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,n.jsx)(A,{icon:"20-camera"}),h?(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.locations.virtual")}):(0,n.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,o.t)("events.locations.join_virtual_event")})})]}),"in_person"===d&&(0,n.jsxs)("div",{className:"flex flex-row items-start space-x-4",children:[(0,n.jsx)(A,{icon:"20-location"}),(0,n.jsx)(R.I,{serializedLocation:f,variant:"text"})]}),"tbd"===d&&(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,n.jsx)(A,{icon:"20-location"}),(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.rsvp.tbd")})]}),v.includes(d)&&(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,n.jsx)(A,{icon:"20-camera"}),(0,n.jsx)(z,{event:r,shouldDisplayJoinButton:i,isLiveLimitReached:a,handleViewLiveStreamClick:function(){var e=D.dE.room({roomSlug:m});(0,y.L6)(r)&&!l&&(e=D.dE.publicRoom({roomSlug:m})),window.open(e,"_blank")},hasEventFinished:t,isLoggedIn:l})]})]})},Z=r(44196),G=r(52723),q=r(85122),V=r(43945),H=function(e){var t=e.eventData,r=t.starts_at,i=t.ends_at,a=t.time_zone_abbreviations,s=t.start_date,l=t.time_zone,u=(0,V.UZ)(s),d=(0,V.UZ)(i),f=(0,G.N)(r,l),p=f.dayOfMonth,m=f.shortMonthString,b=(0,G.N)(i,l),h=b.dayOfMonth,y=b.shortMonthString,v=p===h,g="".concat(u,", ").concat(m," ").concat(p),_="".concat(d,", ").concat(y," ").concat(h);return(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-6",children:[(0,n.jsx)(Z.m,{dateString:r,timeZone:l}),v?(0,n.jsxs)("div",{"data-testid":"event-date",children:[(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:g})}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:"".concat((0,q.Dk)(r,l)," - ").concat((0,q.Dk)(i,l)," ").concat(a)})})]}):(0,n.jsxs)("div",{"data-testid":"event-date",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)(c.Z.LabelSm,{weight:"semibold",as:"div",children:[(0,o.t)("events.timestamp.from")," ",g]}),(0,n.jsxs)(c.Z.LabelSm,{as:"div",children:[(0,q.Dk)(r,l)," ",a]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(c.Z.LabelSm,{weight:"semibold",as:"div",children:[(0,o.t)("events.timestamp.to")," ",_]}),(0,n.jsxs)(c.Z.LabelSm,{as:"div",children:[(0,q.Dk)(i,l)," ",a]})]})]})]})},W=function(e){var t=e.rsvpStatus,r=e.ticketData,i=(e.event.event_setting_attributes||{}).rsvp_limit_reached,a="yes"==t,s=t&&!r.invited;return(0,n.jsxs)("div",{className:"mb-6 flex flex-row items-center space-x-4",children:[(0,n.jsx)("div",{className:"bg-tertiary flex h-10 w-10 flex-none items-center justify-center rounded-lg",children:(0,n.jsx)(l.JO,{type:"20-event-ticket",size:20,className:"text-dark !h-5 !w-5"})}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-1 align-middle",children:[i&&!a&&(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,o.t)("events.rsvp.sold_out")}),(!i||a)&&(0,n.jsx)(c.Z.LabelSm,{children:r.price_with_code}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-dark-primary-button h-1 w-1 rounded-full sm:block"}),(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,o.t)("events.rsvp.purchased")})]})]})]})};function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var J=function(e){var t,r=e.onChange,l=e.shouldDisplayRsvpAction,u=(0,_.Zh)(),f=u.record,p=u.isUsedInMinimalTipTapViewModal,N=(0,_.wh)().currentCommunityMember,E=f||{},T=E.event_type,L=E.event_setting_attributes,D=E.recurring_setting_attributes,R=E.upcoming_occurrences_count,B=E.rsvped_event,F=E.rsvp_status,z=E.paywall_attributes,Z=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Q(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),G=Z[0],q=Z[1],V=D||{},J=V.frequency,K=V.event_start_date,$=(0,S.j)({event:f}),X=$.isRecurringRsvpOpen,Y=$.openRecurringRsvpModal,ee=$.onRecurringModalClose,et=(0,s.C)(),er=(0,v.IO)(),en=er.isMonthlyHourLimitReached,ei=er.isStorageLimitReached,eo=L||{},ea=eo.ends_at,es=eo.hide_location_from_non_attendees,el=eo.live_stream_room_setting_attributes,ec=(0,h.O)({startsAt:K,frequency:J}).label;if(!L)return(0,n.jsx)(w.gi,{variant:"right-sidebar"});var eu=!!ea&&(0,x.aA)(ea),ed=T===b.E_.RECURRING,ef=f.rsvped_event,ep=en||(null==el?void 0:el.recording_enabled)&&ei,em=es&&!B,eb=(!!N||(0,y.L6)(f))&&(0,a.JK)(f)&&(0,a.cf)(f)&&!ep&&!eu&&!em,eh=!eu&&B;return(0,n.jsx)(g.T,{children:(0,n.jsxs)("div",{className:(0,j.A)("border-primary bg-primary w-full rounded-2xl border p-6",{"my-5":p}),children:[(0,n.jsxs)("div",{className:"rsvp-section",children:[(0,n.jsx)("div",{className:"border-primary border-b pb-4 last:border-b-0 last:pb-0",children:(0,n.jsx)(H,{eventData:L})}),(0,n.jsx)(U,{event:f,hasEventFinished:eu,shouldDisplayJoinButton:eb,isLiveLimitReached:ep,shouldHideLocationFromCurrentMember:em}),ed&&R>0&&(0,n.jsxs)("div",{className:"mt-4 flex flex-row items-center space-x-4",children:[(0,n.jsx)(A,{icon:"20-calendar-recurring"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:ec})}),!(0,y.yl)(f)&&(0,n.jsx)(k,{event:f,onChange:r,buttonText:(0,o.t)("events.rsvp.show_all_events")})]})]}),eu&&(0,n.jsx)(I,{eventData:L,rsvpedEvent:B,endsAt:ea,dataTestid:"event-finished"}),!eb&&(l||eh)&&(0,n.jsxs)("div",{className:(0,j.A)({"mt-6":l}),children:[l&&(0,n.jsxs)(n.Fragment,{children:[(0,y.yl)(f)&&(0,n.jsx)(W,{rsvpStatus:F,ticketData:z,event:f}),(0,n.jsx)(C,{event:f}),(0,n.jsx)(P.w,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},{event:f,onChange:r,full:!0,detailsPage:!0,toggleRecurringRsvp:ed?ef?function(){et.show({event:f,onChange:r})}:Y:function(){}}))]}),eh&&(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(d,{setShouldShowAddToCalendarModal:q})})]}),eb&&(0,n.jsx)(M,{event:f,onChange:r})]}),(0,n.jsx)(O.O,{event:f,show:X,onClose:ee,onChange:r}),(0,n.jsx)(m,{event:f,isOpen:G,onClose:function(){return q(!1)}})]})})}},69644:function(e,t,r){"use strict";r.d(t,{m:()=>u});var n=r(85893),i=r(84326),o=r(25152),a=r(4393),s=r(8683),l=r(33350),c=function(e){var t=e.isStarted,r=e.isFinished,n=e.isDraft,o=e.startsAt,a=e.endsAt;if(t&&!r&&!n)return(0,i.t)("events.details.live_now");if(n)return(0,i.t)("events.details.draft");if(r){var l=(0,s.TF)(a);return(0,i.t)("events.details.finished",{time_string:l})}var c=(0,s.TF)(o);return(0,i.t)("events.details.starts",{time_string:c})},u=function(e){var t=e.startsAt,r=e.endsAt,i=e.status,s=(void 0===i?null:i)===o.Q_.DRAFT,u=(0,a.aA)(r),d=c({isStarted:(0,a.aA)(t),isFinished:u,isDraft:s,startsAt:t,endsAt:r});return(0,n.jsx)(l.A,{title:d,variant:s||u?"primary":"secondary",dataTestId:"event-time-chip"})}},44196:function(e,t,r){"use strict";r.d(t,{m:()=>o});var n=r(85893),i=r(52723),o=function(e){var t=e.dateString,r=e.timeZone,o=(0,i.N)(t,r),a=o.dayOfMonth,s=o.shortMonthString;return(0,n.jsxs)("div",{className:"bg-tertiary flex h-[70px] w-[56px] cursor-default flex-col items-center justify-center rounded-md py-1.5",children:[(0,n.jsx)("div",{className:"text-dark mb-0.5 text-center text-xl font-bold leading-6",children:a}),(0,n.jsx)("div",{className:"text-dark text-center font-medium uppercase leading-4",style:{fontSize:"11px"},children:s})]})}},58401:function(e,t,r){"use strict";r.d(t,{w:()=>l});var n=r(85893),i=r(84326),o=r(1168),a=r(57363),s=r(41553),l=function(e){var t=e.name,r=e.isFeaturedEvent;return(0,n.jsxs)("div",{className:(0,o.A)("mb-5 flex h-[44px] w-full items-center justify-start gap-x-3 bg-green-100",void 0!==r&&r?"rounded-t-lg sm:rounded-lg":"rounded-lg"),children:[(0,n.jsx)(a.JO,{type:"20-users-plus",size:20,className:"ms-3"}),(0,n.jsx)(s.Z.LabelXs,{weight:"medium",color:"text-[#18181B]",children:(0,i.t)("events.rsvp.invited_by",{name:t})})]})}},38644:function(e,t,r){"use strict";r.d(t,{i:()=>_});var n=r(85893),i=r(84142),o=r(50312),a=r(1168),s=r(57363),l=r(12655),c=r(41553),u=r(67294),d=(0,u.createContext)(null);d.displayName="NavigationMenuContext";var f=function(){var e=(0,u.useContext)(d);if(!e)throw Error("useNavigationMenuContext must be used within a NavigationMenu");return e},p=function(e){var t=f().close;return function(){t(),null==e||e()}},m=function(e){var t=e.isOpen,r=e.close,i=e.children;return(0,n.jsx)(d.Provider,{value:{isOpen:t,close:r},children:i})},b=r(94184),h=r.n(b);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t;return h()("block h-8.5 max-w-[200px] shrink-0 cursor-pointer items-center truncate rounded-md bg-transparent px-4 py-2 text-xs-plus font-medium text-left transition-colors duration-200 hover:bg-tertiary focus:bg-tertiary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-secondary",(y(t={},"text-darkest hover:text-darkest focus:text-darkest",e),y(t,"text-default hover:text-default focus:text-default",!e),t))}var g=r(52928),_=Object.assign(function(e){var t=e.label,r=e.active,u=e.buttonRef,d=e.children;return(0,n.jsx)(i.J,{className:"relative z-[11]",children:function(e){var f,p,b=e.open,h=e.close;return(0,n.jsxs)(m,{isOpen:b,close:h,children:[(0,n.jsx)(i.J.Button,{ref:u,className:(0,a.A)("border-primary hover:bg-overlay-dark focus-visible:outline-secondary text-darkest max-w-[200px] shrink-0 truncate rounded-full border px-4 py-2 text-sm transition-colors duration-100 focus-visible:rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"bg-overlay-dark":b,"bg-primary":!b,"border-secondary":r}),children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",color:"text-primary",children:(0,n.jsxs)("span",{className:"flex gap-x-2",children:[t||"...",(0,n.jsx)(s.JO,{type:"16-chevron-down",size:14,className:"!w-4"})]})})}),(0,n.jsx)(o.u,(f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l.E6),p=p={children:(0,n.jsx)(i.J.Panel,{className:"border-primary bg-primary absolute left-0 top-1.5 flex w-max flex-col rounded-2xl border p-4 shadow-lg",children:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(p)).forEach(function(e){Object.defineProperty(f,e,Object.getOwnPropertyDescriptor(p,e))}),f))]})}})},{Button:function(e){var t=e.label,r=e.active,i=p(e.onClick);return(0,n.jsx)("button",{type:"button",onClick:i,className:v(void 0!==r&&r),title:t,children:t},t)},Link:function(e){var t=e.linkTo,r=e.label,i=e.active,o=p(e.onClick);return(0,n.jsx)(g.OL,{to:t,onClick:o,className:v(void 0!==i&&i),title:r,children:r},r)}})},63029:function(e,t,r){"use strict";r.d(t,{HV:()=>c,JK:()=>l,QP:()=>s,cf:()=>a});var n=r(25152),i=r(4393),o=function(e,t){var r=new Date,n=new Date(e);return Math.abs(r.getTime()-n.getTime())/6e4<=t},a=function(e){var t=((e||{}).event_setting_attributes||{}).starts_at;return o(t,10)||(0,i.aA)(t)},s=function(e){var t=((e||{}).event_setting_attributes||{}).ends_at;return(0,i.aA)(t)},l=function(e){var t=((e||{}).event_setting_attributes||{}).location_type;return t!==n.Bq.IN_PERSON&&t!==n.Bq.TBD},c=function(e){var t=e||{},r=t.event_setting_attributes,n=t.invited_attendee,i=(r||{}).rsvp_disabled;return!i||i&&n}},20712:function(e,t,r){"use strict";r.d(t,{HA:()=>T,y5:()=>k,J:()=>N,jz:()=>B,at:()=>D});var n=r(85893),i=r(52928),o=r(84326),a=r(88767),s=r(70442),l=r(51630),c=r(66205),u=r(13532),d=r(60878),f=r(25152),p=r(28384),m=function(e){var t=e.event,r=e.onSuccess,n=(0,d.pm)(),i=n.success,m=n.error,b=(0,s.k6)(),h=(0,c.q)();return{updateMutation:(0,a.useMutation)(function(e){var r,n;return l.S1.update({event:t,formData:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={event_type:t.event_type},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r),forReactQuery:!0})},{onSuccess:function(e){i((0,o.t)("events.saved_successfully")),h(),r&&r(),(0,p.mv)(e)&&b.push(u.xu.index({spaceSlug:e.space_slug,params:{status:f.Q_.DRAFT,sort:"asc"}}))},onError:function(){return m((0,o.t)("events.save_error"))}})}},b=r(27053),h=r(34860),y=r(41342),v=r(1168),g=r(85924),_=r(57363),x=r(39905),j=r(6394),w=r(51466),O=r(51169);function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var k=function(e){var t=e.isPinned,r=e.event,a=e.isThumbnailView,s=e.isFullView,l=r.cover_image_url,c=r.cover_image,f=(0,g.TC)().isDarkAppearance,p=(0,d.pm)().error,k=m({event:r}).updateMutation,P=(0,b.m)().canUpdatePost,C=(0,y.wh)().isViewOnlyMasquerading,N=f?(0,h.aP)("dark-mode-cover-thumbnail-2x.png"):(0,h.aP)("light-mode-cover-thumbnail-2x.png"),A=void 0!==a&&a?l||N:l,I=(0,u.LM)({spaceSlug:r.space_slug,slug:r.slug});return A?(0,n.jsxs)(i.rU,{id:"event-cover-image",className:"group relative aspect-[2.8] max-h-[366px] w-full shrink-0 sm:mb-6",to:I,children:[(0,n.jsx)("img",{loading:"lazy",alt:"",src:A,className:(0,v.A)("border-primary relative h-full w-full border object-cover sm:rounded-md",void 0!==s&&s?"md:rounded-2xl":"rounded-t-md")}),t&&(0,n.jsx)("div",{className:"bg-primary border-primary text-default absolute right-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border",children:(0,n.jsx)(_.JO,{type:"16-pin-sm",size:16})}),(0,n.jsx)(w.l,{id:"event-cover-image",onSubmit:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,k.mutateAsync(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),p((0,o.t)("something_went_wrong")),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:{cover_image:c},children:function(e){var t=e.triggerFormSubmit;return(0,n.jsx)(j.D,{name:"cover_image",showAddCoverBtn:!1,customAspectRatioHelpText:(0,o.t)("image_upload.recommended_size_event_cover"),onImageAttachSuccess:t,renderer:function(e){var t=e.processing,r=e.handleChangeCoverClick;return t||k.isLoading?(0,n.jsx)("div",{className:"bg-primary absolute bottom-0 left-0 flex h-full w-full items-center justify-center rounded-md border",children:(0,n.jsx)(O.a,{center:!0})}):P?(0,n.jsx)(x.z,{variant:"secondary",className:"absolute bottom-6 left-6 hidden group-hover:block",onClick:r,disabled:t||C,children:(0,o.t)(l?"update_cover":"add_cover")}):(0,n.jsx)(n.Fragment,{})}})}})]}):null},P=r(33350),C=function(e){var t=(e.eventData||{}).location_type,r=t===f.Bq.LIVE_STREAM,i=t===f.Bq.LIVE_ROOM;switch(!0){case t===f.Bq.VIRTUAL:return(0,n.jsx)(P.A,{title:(0,o.t)("events.locations.virtual"),icon:"16-camera",variant:"primary"});case r||i:return(0,n.jsx)(P.A,{title:(0,o.t)(r?"events.locations.live_stream":"events.locations.live_room"),icon:"16-camera",variant:"primary"});case t===f.Bq.TBD||t===f.Bq.IN_PERSON:return(0,n.jsx)(P.A,{title:f.gP[t],icon:"16-location"});default:return(0,n.jsx)(P.A,{title:f.gP[t],icon:"16-camera"})}},N=function(e){var t=e.type;return"single"===(void 0===t?"single":t)?(0,n.jsx)(_.JO,{size:16,type:"16-calendar",className:"text-default -mt-1 !w-4"}):(0,n.jsx)(_.JO,{size:16,type:"16-calendar-recurring",className:"text-default -mt-0.5 !w-4"})},A=r(42953),I=r(69447),E=r(69644),T=function(e){var t=e.event,r=e.shouldHideLocation,i=t.status,a=t.hide_meta_info,s=t.event_setting_attributes,l=t.community_member,c=t.event_attendees,u=(void 0===c?{count:0}:c).count,d=t.paywall_attributes,f=s||{},p=f.starts_at,m=f.ends_at,b=f.hide_attendees,h=l.name,y=((0,I.C)(t)||{}).handleAttendeesClick,v=!(0,A.yl)(t)&&!b&&u>0;return(0,n.jsxs)("div",{className:"mt-6 flex flex-wrap gap-2 pb-2 md:pb-0",children:[(0,n.jsx)(E.m,{startsAt:p,endsAt:m,status:i}),!(void 0!==r&&r)&&(0,n.jsx)(C,{eventData:s}),!a&&(0,n.jsx)(P.A,{title:h,icon:"16-user"}),v&&(0,n.jsx)(P.A,{title:"".concat(String(u)," ").concat((0,o.t)("events.attendees")),icon:"members-v2",onClick:y,isButton:!0}),(0,A.yl)(t)&&(0,n.jsx)(P.A,{title:"".concat(String(d.price_with_code)),icon:"16-event-ticket"})]})};function L(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var D=function(e){var t=e.event,r=t.cover_image_url,a=t.cover_image,s=(t.cover_image_variants||{}).thumbnail,l=(0,g.TC)().isDarkAppearance,c=(0,d.pm)().error,f=m({event:t}).updateMutation,p=(0,b.m)().canUpdatePost,y=l?(0,h.aP)("dark-mode-cover-thumbnail-2x.png"):(0,h.aP)("light-mode-cover-thumbnail-2x.png"),v=(0,u.LM)({spaceSlug:t.space_slug,slug:t.slug});return(0,n.jsxs)(i.rU,{id:"event-thumbnail-image",className:"group relative mb-2 mr-6 hidden h-full w-full shrink-0 md:mb-0 md:block md:h-[73px] md:w-[200px]",to:v,children:[(0,n.jsx)("img",{loading:"lazy",alt:"",src:s||r||y,className:"border-primary relative h-full max-h-[73px] w-full rounded-lg border object-cover"}),(0,n.jsx)(w.l,{id:"event-thumbnail-image",onSubmit:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,f.mutateAsync(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),c((0,o.t)("something_went_wrong")),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:{cover_image:a},children:function(e){var t=e.triggerFormSubmit;return(0,n.jsx)(j.D,{name:"cover_image",showAddCoverBtn:!1,onImageAttachSuccess:t,customAspectRatioHelpText:(0,o.t)("image_upload.recommended_size_event_cover"),renderer:function(e){var t=e.processing,r=e.handleChangeCoverClick;return t||f.isLoading?(0,n.jsx)("div",{className:"bg-primary absolute bottom-0 left-0 flex h-full w-[200px] items-center justify-center rounded-md border",children:(0,n.jsx)(O.a,{center:!0})}):p?(0,n.jsx)(x.z,{variant:"secondary",className:"absolute bottom-4 left-4 hidden group-hover:block",onClick:r,disabled:t,children:(0,o.t)(s?"update":"add_cover")}):(0,n.jsx)(n.Fragment,{})}})}})]})},M=r(41553),R=r(63029),B=function(e){var t=e.event,r=e.isEventDetailsPage,i=t.event_setting_attributes,a=t.rsvped_event,s=t.rsvp_status,l=i||{},c=l.rsvp_limit_reached,u=l.show_rsvp_limit_warning,d=void 0!==r&&r?"text-center pt-2":"text-left pt-2",p=s==f._w.INVITED;return a||p?null:(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsx)(M.Z.LabelXs,{color:"text-gray-800",weight:"semibold",children:(0,n.jsx)("div",{className:d,children:(0,o.t)("events.rsvp.rsvp_limit_reached")})}),u&&!(0,R.QP)(t)&&(0,n.jsx)(M.Z.LabelXs,{weight:"semibold",children:(0,n.jsx)("div",{className:d,style:{color:"#F5A607"},children:(0,o.t)("events.rsvp.rsvp_limit_warning")})})]})}},71347:function(e,t,r){"use strict";r.d(t,{c:()=>y});var n=r(85893),i=r(84326),o=r(53926),a=r(42953),s=r(25578),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";if(window&&window.open&&(0,s._)(e)){e.match(/^https?:\/\//i)||(e="http://".concat(e));var r=window.open(e,t);r&&r.focus()}},c=r(57363),u=r(34519),d=r(39905),f=r(41553),p=r(52723),m=r(85122),b=function(e){var t=(e.event||{}).event_setting_attributes||{},r=t.starts_at,i=t.ends_at,o=t.time_zone,a=(0,p.N)(r,o),s=a.dayOfMonth,l=a.shortMonthString,u=(0,m.Dk)(r,o),d=(0,m.Dk)(i,o);return(0,n.jsx)("div",{className:"bg-tertiary flex w-fit items-center justify-center rounded-md",children:(0,n.jsxs)("div",{className:"flex px-4 py-2",children:[(0,n.jsx)(c.JO,{type:"16-calendar",className:"text-default mr-2 h-4 !w-4 font-medium",size:16}),(0,n.jsx)(f.Z.LabelSm,{weight:"medium",color:"text-default",children:"".concat(s," ").concat(l,", ").concat(u," - ").concat(d)})]})})},h=function(e){var t=e.recurringEvent||{},r=t.starts_at,i=t.ends_at,o=t.time_zone,a=(0,p.N)(r,o),s=a.dayOfMonth,l=a.shortMonthString,u=(0,m.Dk)(r,o),d=(0,m.Dk)(i,o);return(0,n.jsx)("div",{className:"bg-tertiary flex w-fit items-center justify-center rounded-md",children:(0,n.jsxs)("div",{className:"flex px-4 py-2",children:[(0,n.jsx)(c.JO,{type:"16-calendar",className:"text-default mr-2 h-4 !w-4 font-medium",size:16}),(0,n.jsx)(f.Z.LabelSm,{weight:"medium",color:"text-default",children:"".concat(s," ").concat(l,", ").concat(u," - ").concat(d)})]})})},y=function(e){var t=e.event,r=e.events,s=e.show,p=e.onClose,m=e.shouldShowConfirmationDate,y=void 0===m||m,v=e.isRecurring,g=t||{},_=g.name,x=g.event_setting_attributes||{},j=x.confirmation_message_title,w=x.confirmation_message_description,O=x.confirmation_message_button_title,S=x.confirmation_message_button_link,k=x.enable_custom_thank_you_message,P=x.send_email_confirmation,C=!(0,a.yl)(t)&&void 0!==v&&v,N=(0,o.O)({event:t,onChange:function(){}}),A=N.addToCalendar,I=N.downloadCalendar;return(0,n.jsxs)(u.u_,{isOpen:!!s,onClose:p,children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{children:[(0,n.jsx)(u.u_.Header,{className:"flex w-full !justify-end pb-0 md:!pb-0",children:(0,n.jsx)(u.u_.HeaderActions,{children:(0,n.jsx)(u.u_.CloseButton,{onClick:p})})}),(0,n.jsxs)(u.u_.Body,{className:"mb-6 !overflow-visible pt-0",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("h2",{className:"mb-4 mt-0",children:(0,i.t)("events.notifications.event_setting_attributes.clap")}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(f.Z.TitleSm,{weight:"bold",color:"text-default",children:k?j:(0,i.t)("events.notifications.event_setting_attributes.thank_you_message")})}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(f.Z.TitleMd,{color:"text-darkest",children:_})}),y&&!C&&(0,n.jsx)(b,{event:t}),y&&C&&(void 0===r?[]:r).map(function(e,t){return(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsx)(h,{recurringEvent:e})},e.id||t)}),k&&(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"my-6",children:(0,n.jsx)(f.Z.BodyMd,{color:"text-light",children:w})})})]}),k&&(0,n.jsx)(d.z,{variant:"primary",full:!0,onClick:function(){S&&l(S),p()},large:!0,children:O||(0,i.t)("events.notifications.event_setting_attributes.confirmation_message_button_title_placeholder")}),(0,n.jsx)("div",{className:"flex flex-col gap-3 pt-6 text-center",children:P?(0,n.jsx)(f.Z.BodyMd,{color:"text-light",children:(0,i.t)("events.notifications.event_setting_attributes.calendar_invite_message")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.z,{variant:"secondary",full:!0,large:!0,onClick:function(){I(),p()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(c.JO,{type:"16-download",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,i.t)("events.add_to_calendar.confirm_modal.download")]}),(0,n.jsxs)(d.z,{variant:"secondary",full:!0,large:!0,onClick:function(){A(),p()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(c.JO,{type:"16-refresh",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,i.t)("events.add_to_calendar.confirm_modal.send")]})]})})]})]})]})}},94188:function(e,t,r){"use strict";r.d(t,{j:()=>v});var n=r(67294),i=r(96486),o=r(88767),a=r(33864),s=r(1908),l=r(94728),c=r(41342),u=r(16040);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.currentUser,r=e.canUsersSignUp,n=e.userSignUpUrl;return!t&&(window.location.href=(0,a.U)(r,null!=n?n:"",!0),!0)},v=function(e){var t=e.event,r=e.onClose,a=void 0===r?i.noop:r,d=e.onChange,v=void 0===d?i.noop:d,g=e.eventRsvpedByDefault,_=void 0===g||g,x=h((0,n.useState)(!1),2),j=x[0],w=x[1],O=h((0,n.useState)({}),2),S=O[0],k=O[1],P=h((0,n.useState)(0),2),C=P[0],N=P[1],A=(0,o.useQueryClient)(),I=(0,c.xJ)(),E=(0,l.S)(t)?"host":"participant",T=(0,u.K)({event:t}),L=T.isLoading,D=T.events,M=T.fetchEvents,R=T.onRecurringRsvpSubmit,B=(0,s.i)(),F=B.canUsersSignUp,z=B.userSignUpUrl,U=function(){A.invalidateQueries("posts")};return(0,n.useEffect)(function(){if(D){var e={};D.forEach(function(r){e["".concat(r.id)]=!!_&&r.id===t.id||r.rsvped_event}),k(e)}},[D]),(0,n.useEffect)(function(){S&&N(Object.values(S).filter(function(e){return e}).length)},[S]),{isLoading:L,events:D.filter(function(e){return!e.rsvp_limit_reached}),eventsState:S,isRecurringRsvpOpen:j,eventsSelectedCount:C,fetchEvents:M,onSubmit:function(){var e;return(e=function(){var e,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:var i,o;return i=e=Object.entries(S).filter(function(e){return h(e,2)[1]}).map(function(e){return h(e,1)[0]}),o=t.id,r=i.find(function(e){return Number(e)===o}),[4,R({eventIds:e,role:E})];case 1:return n.sent(),v(b(m({},t),{rsvped_event:!!r})),U(),a(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})})()},onCheckboxChange:function(e){var t=e.name,r=e.value;k(function(e){return b(m({},e),p({},t,r))})},onSelectAllClickHandler:function(){k(function(e){var t={},r=Object.entries(e),n=r.every(function(e){return e[1]}),i=!0,o=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)t[h(s.value,1)[0]]=!n}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t})},openRecurringRsvpModal:function(){y({currentUser:I,canUsersSignUp:F,userSignUpUrl:z})||w(function(e){return!e})},onRecurringModalClose:function(){w(!1)}}}},37967:function(e,t,r){"use strict";r.d(t,{O:()=>_});var n=r(85893),i=r(67294),o=r(96486),a=r(84326),s=r(42953),l=r(41553),c=r(85122),u=r(1168),d=r(84208),f=r(51466),p=r(51169),m=r(84367),b=r(71347),h=r(93301),y=r(71367),v=function(e){var t=e.id,r=e.name,i=e.date,o=e.time,a=e.value,s=e.onChange;return(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"m-0 flex items-center justify-between pr-1",htmlFor:t,children:[(0,n.jsxs)("div",{className:"leading-none",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:i})}),(0,n.jsx)("div",{className:"text-secondary",children:(0,n.jsx)(l.Z.LabelXs,{children:o})})]}),(0,n.jsx)(y.X,{id:t,name:r,isFormItem:!1,checked:a,onChange:function(e){return s({name:r,value:e.target.checked})},option:{value:"",label:""}})]})})},g=r(94188),_=function(e){var t=e.event,r=e.eventRsvpedByDefault,y=e.onChange,_=e.onClose,x=e.show,j=void 0!==x&&x,w="events.rsvp.recurring_modal",O=(0,g.j)({event:t,onClose:_,onChange:y,eventRsvpedByDefault:void 0!==r&&r}),S=O.isLoading,k=O.events,P=O.eventsState,C=O.eventsSelectedCount,N=O.fetchEvents,A=O.onSubmit,I=O.onCheckboxChange,E=O.onSelectAllClickHandler,T=(0,h.q)(t),L=T.shouldShowConfirmation,D=T.setShouldShowConfirmation;(0,i.useEffect)(function(){j&&N()},[j]);var M=t||{},R=M.event_setting_attributes,B=M.recurring_setting_attributes,F=R||{},z=F.starts_at,U=F.time_zone_abbreviations,Z=F.time_zone,G=B||{},q=G.frequency,V=G.event_start_date,H=(0,m.O)({startsAt:V,frequency:q,firstLetterCapital:!1}).label,W="".concat((0,c.Dk)(z,Z)," ").concat(U,"."),Q=k.filter(function(e){var t;return null!=(t=null==P?void 0:P[e.id])&&t});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.W,{size:"md",title:t.name,actionText:(0,a.t)("".concat(w,".confirm_attendance")),actionVariant:"primary",isOpen:!!j,onClose:function(){_()},onAction:function(){A(),D(!0)},disabled:S||0===C,children:[(0,n.jsxs)("div",{className:"mt-2.5 text-center text-gray-500",children:[(0,n.jsxs)(l.Z.BodyMd,{children:[(0,a.t)("".concat(w,".description_line_1"))," ",H," ",(0,a.t)("".concat(w,".at"))," ",W]}),(0,n.jsx)(l.Z.BodyMd,{children:(0,a.t)("".concat(w,".description_line_2"))})]}),S&&(0,n.jsx)(p.a,{}),P&&!S&&(0,n.jsxs)(f.l,{defaultValues:P,onSubmit:o.noop,children:[(0,n.jsxs)("div",{className:"mt-7 flex items-center justify-between text-gray-500",children:[(0,n.jsxs)(l.Z.LabelSm,{weight:"medium",children:[null==k?void 0:k.length," ",(0,a.t)("".concat(w,".events"))]}),(0,n.jsx)("button",{type:"button",className:"text-circle",onClick:E,children:(0,n.jsx)(l.Z.LabelSm,{weight:"medium",children:(0,a.t)("".concat(w,".select_all"))})})]}),(0,n.jsx)("div",{className:"mt-4 overflow-auto md:max-h-80",children:(0,n.jsx)("ul",{className:(0,u.A)("flex list-none flex-col gap-4",{"pr-4":(null==k?void 0:k.length)>6}),children:k.map(function(e){var t=e.id,r=e.starts_at,i=e.start_date,o=e.ends_at,a=e.time_zone,s=e.time_zone_abbreviations;return(0,n.jsx)(v,{id:"".concat(t),name:"".concat(t),date:i,time:"".concat((0,c.Dk)(r,a)," - ").concat((0,c.Dk)(o,a)," ").concat(s),value:P["".concat(t)],onChange:I},t)})})})]})]}),!(0,s.yl)(t)&&(0,n.jsx)(b.c,{event:t,events:Q,shouldShowConfirmationDate:!0,isRecurring:!0,show:L,onClose:function(){D(!1)}})]})}},39635:function(e,t,r){"use strict";r.d(t,{w:()=>P});var n=r(85893),i=r(42953),o=r(60622),a=r(25152),s=r(71347),l=r(84326),c=r(39905),u=r(34519),d=r(41553),f=function(e){var t=e.isOpen,r=e.onClose,i=e.toggleRsvp;return(0,n.jsxs)(u.u_,{title:(0,l.t)("events.rsvp.unrsvp_modal.title"),isOpen:!!t,onClose:r,children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{children:[(0,n.jsxs)(u.u_.Header,{children:[(0,n.jsx)(u.u_.Title,{size:"md",className:"text-center",children:(0,l.t)("events.rsvp.unrsvp_modal.title")}),(0,n.jsx)(u.u_.HeaderActions,{children:(0,n.jsx)(u.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(u.u_.Body,{children:(0,n.jsx)("div",{className:"px-6 pb-4 pt-5 text-center",children:(0,n.jsx)(d.Z.BodyMd,{size:"text-sm",children:(0,l.t)("events.rsvp.unrsvp_modal.description")})})}),(0,n.jsxs)(u.u_.Footer,{className:"space-y-2",children:[(0,n.jsx)(c.z,{variant:"circle",full:!0,large:!0,onClick:function(){i(),r()},className:"h-10",children:(0,l.t)("events.rsvp.unrsvp_modal.confirm_button")}),(0,n.jsx)(c.z,{variant:"secondary",full:!0,large:!0,onClick:r,className:"h-10",children:(0,l.t)("events.rsvp.unrsvp_modal.decline_button")})]})]})]})},p=r(53926),m=r(1168);let b=r.p+"static/react/components/Events/Rsvp/RsvpAction/RsvpIcons/img/attending-9ccdd13464642845.svg";var h=function(){return(0,n.jsx)("img",{loading:"lazy",src:b,alt:(0,l.t)("events.rsvp.attending")})},y=function(e){var t=e.isConfirmed,r=e.full,i=e.toggleRsvp,o=e.declineInvite,s=e.rsvpStatus,u=e.isLoading,d=e.paidEvent,f=e.variant,p=void 0===f?"primary":f,b=e.isRsvpDisabled,y=e.detailsPage,v=s===a._w.INVITED;return(0,n.jsxs)(n.Fragment,{children:[v&&(0,n.jsxs)("div",{className:(0,m.A)("flex gap-x-2 gap-y-3",{"flex-wrap":void 0!==y&&y}),children:[(0,n.jsx)(c.z,{variant:"primary",full:r,onClick:i,disabled:u,className:"min-w-fit whitespace-nowrap !rounded-full !font-semibold",children:(0,l.t)("events.rsvp.invite.accept")}),(0,n.jsx)(c.z,{variant:"secondary",full:r,onClick:o,disabled:u,className:(0,m.A)("!ml-0 !rounded-full !font-semibold",{"!border-primary":"secondary"===p}),children:(0,l.t)("events.rsvp.invite.decline")})]}),!t&&!v&&(0,n.jsx)(c.z,{variant:p,full:r,onClick:i,disabled:u||void 0!==b&&b,className:(0,m.A)("!font-semibold",{"!border-primary":"secondary"===p}),children:d?(0,l.t)("events.rsvp.buy_ticket"):(0,l.t)("events.rsvp.rsvp")}),t&&(0,n.jsx)(h,{})]})},v=r(67294),g=r(12153),_=r(50312),x=r(24509),j=r(12655),w=function(e){var t=e.label,r=e.renderIcon;return(0,n.jsxs)("div",{className:"rsvp-radio__button__label",children:[r,(0,n.jsx)("span",{className:"button-text !text-dark",children:t})]})},O=function(e){var t=e.renderIcon,r=e.label,i=e.value,o=e.disabled,a=e.onClick;return(0,n.jsx)(g.v.Item,{disabled:o,children:function(e){return(0,n.jsxs)("button",{type:"submit",className:(0,m.A)("rsvp-radio__list__option",{"rsvp-radio__list__option--active":e,"rsvp-radio__list__option--disabled":o}),onClick:a,children:[(0,n.jsxs)("div",{className:"rsvp-radio__list__option__label",children:[t,(0,n.jsx)("span",{className:"label-text",children:r})]}),(0,n.jsx)("input",{type:"radio",checked:i,readOnly:!0})]})}},"rsvp-attending")},S=function(e){var t=e.isConfirmed,r=e.full,i=e.toggleRsvp,o=e.isLoading,a=e.setShouldShowUnrsvpConfirmation,s=e.showUnrsvpPopup,c=(0,l.t)("events.rsvp.attending"),u=(0,l.t)("events.rsvp.not_attending"),d=function(e){e!==t&&(!e&&s?a(!0):i())};return(0,n.jsx)("div",{className:(0,m.A)("rsvp-radio",{"rsvp-radio--full":r}),children:(0,n.jsx)(g.v,{children:function(e){var r,i,a=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g.v.Button,{className:(0,m.A)("rsvp-radio__button !border-primary !rounded-full",{"rsvp-radio__button--open":a}),children:[t?(0,n.jsx)(w,{label:c,renderIcon:(0,n.jsx)(h,{})}):(0,n.jsx)(w,{label:u}),(0,n.jsx)("span",{className:"button-icon-container",children:(0,n.jsx)(x.Z,{className:"button-icon","aria-hidden":"true"})})]}),(0,n.jsx)(_.u,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:v.Fragment,show:a},j.SP),i=i={children:(0,n.jsxs)(g.v.Items,{static:!0,className:"rsvp-radio__list",children:[(0,n.jsx)(O,{label:c,value:t,disabled:o,onClick:function(){return d(!0)}},"rsvp-attending"),(0,n.jsx)(O,{label:u,value:!t,disabled:o,onClick:function(){return d(!1)}},"rsvp-not-attending")]})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))]})}})})};function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var P=function(e){var t,r,l=e.event,c=e.onChange,u=e.toggleRecurringRsvp,d=e.full,m=e.variant,b=e.detailsPage,h=(0,p.O)({event:l,onChange:c}),v=h.toggleRsvp,g=h.declineInvite,_=h.isLoading,x=h.shouldShowConfirmation,j=h.dismissConfirmation,w=h.dismissUnrsvpConfirmation,O=h.hasEventEnded,P=h.isConfirmed,C=h.rsvpStatus,N=h.setShouldShowUnrsvpConfirmation,A=h.shouldShowUnrsvpConfirmation,I=l.event_type,E=l.invited_attendee,T=I===a.E_.RECURRING,L=l||{},D=L.event_setting_attributes,M=L.paywall_attributes,R=(D||{}).rsvp_limit_reached,B=T&&!(0,i.yl)(l),F=C===a._w.INVITED,z={isConfirmed:P,rsvpStatus:C,full:d,toggleRsvp:B&&!E?u:v,declineInvite:g,isLoading:_,paidEvent:(0,i.yl)(l),setShouldShowUnrsvpConfirmation:N,showUnrsvpPopup:(0,i.yl)(l)&&!(null==M?void 0:M.invited)};if(O)return null;var U=!C||F,Z=!T&&P;return(0,n.jsxs)(o.T,{children:[U?(0,n.jsx)(y,(t=k({},z),r=r={variant:void 0===m?"primary":m,isRsvpDisabled:R,detailsPage:void 0!==b&&b},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)):(0,n.jsx)(S,k({},z)),P&&(0,i.yl)(l)&&(0,n.jsx)(f,{isOpen:A,onClose:w,toggleRsvp:v}),Z&&(0,n.jsx)(s.c,{event:l,show:x,onClose:j})]})}},53926:function(e,t,r){"use strict";r.d(t,{O:()=>y});var n=r(84326),i=r(33864),o=r(13532),a=r(51714),s=r(1908),l=r(42953),c=r(41342),u=r(60878),d=r(93301);function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})}}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function h(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var y=function(e){var t=e.event,r=e.onChange,f=(0,d.q)(t),y=f.currentUser,v=f.error,g=f.hasEventEnded,_=f.isConfirmed,x=f.isLoading,j=f.isUnconfirmed,w=f.role,O=f.setShouldShowConfirmation,S=f.shouldShowConfirmation,k=f.setIsLoading,P=f.rsvpStatus,C=f.ticketData,N=f.setShouldShowUnrsvpConfirmation,A=f.shouldShowUnrsvpConfirmation,I=(0,u.pm)(),E=(0,c.wh)().currentCommunityMember,T=(0,s.i)(),L=T.canUsersSignUp,D=T.userSignUpUrl,M=function(){(0,l.yl)(t)?window.location.href=t.paywall_attributes.checkout_url:window.location.href=(0,i.U)(L,null!=D?D:"")},R=function(e){fetch(e).then(function(e){return e.blob()}).then(function(e){var r=window.URL.createObjectURL(e),n="event-".concat(t.slug,".ics"),i=document.createElement("a");i.href=r,i.setAttribute("download",n),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(r)}).catch(function(t){v(t.message),console.error("useEventRsvp - could not download - ",e)})};return{toggleRsvp:function(){return p(function(){var e,n;return h(this,function(i){switch(i.label){case 0:if(x)return[2];if(!y||!E)return M(),[2];e=(0,l.yl)(t)&&!P||j?a.S.rsvp:a.S.unRsvp,k(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e({event:t,params:{role:w}})];case 2:return(null==(n=i.sent())?void 0:n.redirect_url)?window.location.href=n.redirect_url:(O(j),r(b(m({},t),{rsvped_event:j,rsvp_status:j?"yes":"no"}))),[3,4];case 3:return v(i.sent().message),console.error("useEventRsvp - could not rsvp - ",null==t?void 0:t.slug),[3,4];case 4:return k(!1),[2]}})})()},addToCalendar:function(){return p(function(){return h(this,function(e){switch(e.label){case 0:k(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a.S.addToCalendar({event:t,params:{role:w}})];case 2:return e.sent(),I.success((0,n.t)("add_to_calendar_success")),[3,4];case 3:return v(e.sent().message),console.error((0,n.t)("add_to_calendar_failure")),[3,4];case 4:return k(!1),[2]}})})()},downloadCalendar:function(){R(o.av.events.downloadCalendar({spaceId:t.space_id,slug:t.slug,params:{}}))},declineInvite:function(){return p(function(){return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a.S.unRsvp({event:t})];case 1:return e.sent(),r(b(m({},t),{rsvped_event:!1,rsvp_status:"no"})),[3,3];case 2:return v(e.sent().message),console.error("useEventRsvp - could not decline - ",null==t?void 0:t.slug),[3,3];case 3:return k(!1),[2]}})})()},isLoading:x,isConfirmed:_,rsvpStatus:P,shouldShowConfirmation:S,dismissConfirmation:function(){return O(!1)},dismissUnrsvpConfirmation:function(){return N(!1)},hasEventEnded:g,rsvpWhileJoiningEvent:function(){return p(function(){var e;return h(this,function(i){switch(i.label){case 0:if(x)return[2];if(!y)return v((0,n.t)("log_in_to_perform_action",{action:(0,n.t)("events.rsvp.rsvp")})),window.location.href=o.$T.signIn({params:{post_login_redirect:window.location.href}}),[2];return[4,a.S.rsvp({event:t})];case 1:return(null==(e=i.sent())?void 0:e.ok)&&(e.redirect_url?window.location.href=e.redirect_url:r(b(m({},t),{rsvped_event:!0}))),[2]}})})()},ticketData:C,setShouldShowUnrsvpConfirmation:N,shouldShowUnrsvpConfirmation:A}}},93301:function(e,t,r){"use strict";r.d(t,{q:()=>u});var n=r(67294),i=r(41342),o=r(4393),a=r(60878),s=r(94728);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e){var t=e||{},r=t.rsvp_status,l=t.attendee_role,u=t.event_setting_attributes,d=t.paywall_attributes,f=(u||{}).ends_at,p=(0,o.aA)(f),m=c((0,n.useState)(!1),2),b=m[0],h=m[1],y=c((0,n.useState)(!1),2),v=y[0],g=y[1],_="CALENDAR_EVENT_".concat(e.id),x=c((0,n.useState)("true"===window.sessionStorage.getItem(_)),2),j=x[0],w=x[1],O=(0,i.xJ)(),S=(0,a.pm)().error,k=(0,s.S)(e);return{currentUser:O,error:S,hasEventEnded:p,isConfirmed:"yes"===r,isLoading:b,isUnconfirmed:!r||"yes"!==r,role:l||(k?"host":"participant"),setShouldShowConfirmation:function(e){try{window.sessionStorage.setItem(_,e)}catch(e){console.error("Error accessing session storage",e)}w(e)},shouldShowConfirmation:j,setIsLoading:h,rsvpStatus:r,ticketData:d,setShouldShowUnrsvpConfirmation:g,shouldShowUnrsvpConfirmation:v}}},1201:function(e,t,r){"use strict";r.d(t,{y:()=>c});var n=r(88767),i=r(84326),o=r(51630),a=r(42953),s=r(13532),l=r(60878),c=function(e){var t=(0,l.pm)();return(0,n.useMutation)(function(){return o.S1.createLiveRoomForEvent({event:e})},{onSuccess:function(t){var r=((t||{}).event_setting_attributes||{}).live_stream_slug;if(r){var n=s.dE.room({roomSlug:r});(0,a.L6)(e)&&(n=s.dE.publicRoom({roomSlug:r})),window.open(n,"_blank")}},onError:function(){t.error((0,i.t)("events.can_not_create_live_room_for_event"))}})}},1908:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(41342),i=r(29378),o=function(){var e=(0,n.wh)().currentCommunity,t=(0,i.pn)(e),r=null!=e?e:{},o=r.private_sign_up_url,a=r.is_private;return{canUsersSignUp:!!(r.show_signup_link||a&&o),userSignUpUrl:o||t}}},94728:function(e,t,r){"use strict";r.d(t,{S:()=>i});var n=r(41342),i=function(e){var t=(0,n.wh)().currentCommunityMember;return!!e&&!!t&&(null==e?void 0:e.community_member_id)===(null==t?void 0:t.id)}},84367:function(e,t,r){"use strict";r.d(t,{O:()=>o});var n=r(84326),i=r(19338),o=function(e){var t=e.startsAt,r=e.frequency,o=e.firstLetterCapital,a=e.frequencyFirstLetterCapital,s=e.includeRepeatsOn;if(!t||!r)return{label:""};var l=(0,i.E)({startsAt:t,firstLetterCapital:void 0!==a&&a}).find(function(e){return e.value===r});if(!l)return{label:""};var c=(0,n.t)("events.recurring.".concat(void 0===o||o?"frequencies_capital_letter":"frequencies",".repeats"));return{label:void 0===s||s?"".concat(c," ").concat(l.label):l.label}}},3907:function(e,t,r){"use strict";r.d(t,{_:()=>u});var n=r(85893),i=r(12814),o=r(88767),a=r(37091),s=r(3697),l=r(52478),c=new o.QueryClient(l.V),u=function(){var e=(0,a.D)();return(0,i.Z)(s.hn.OPEN_SEARCH_MODAL,function(t){t.preventDefault(),e.show()}),(0,n.jsx)(o.QueryClientProvider,{client:c})}},40174:function(e,t,r){"use strict";r.d(t,{y:()=>P});var n=r(85893),i=r(67294),o=r(96486),a=r(52293),s=r(13532),l=r(71068),c=r(93199),u=r(25815),d=r(52893),f=r(7391),p=r(84326),m=r(1168),b=r(41553);function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var y=function(e){var t,r,i=e.isLoading,o=e.handleUpload,a=e.name,s=e.description,l=e.disabled,c=(0,f.uI)({onDropAccepted:o,onDropRejected:function(e){console.error(e)},noClick:!0,disabled:i,accept:{"image/*":[".jpeg",".gif",".png",".jpg"],"video/*":[".mp4",".mov",".m4v"]},maxFiles:1,multiple:!1}),u=c.getRootProps,d=c.getInputProps,y=c.isDragActive;return(0,n.jsx)("div",(t=h({className:(0,m.A)("border-primary flex h-64 w-full items-center justify-center rounded-lg border border-dashed",{"text-secondary bg-secondary":!y,"text-messaging-info-blue border-blue-300 bg-blue-50":y})},u()),r=r={onPaste:function(e){var t,r;(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&(e.preventDefault(),o(Array.from(e.clipboardData.files)))},children:(0,n.jsxs)("div",{className:"flex max-w-xs flex-col items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)(b.Z.LabelLg,{weight:"medium",children:(0,p.t)("home_page.edit_form.welcome_banner.drop_image")})}),(0,n.jsx)("input",h({},d())),(0,n.jsx)("div",{className:"mt-3 px-4 text-center leading-none",children:(0,n.jsx)(b.Z.LabelSm,{weight:"regular",color:"text-light",children:s})}),(0,n.jsxs)("label",{htmlFor:a,className:"mt-6",children:[(0,n.jsx)("span",{className:(0,m.A)("h-[34px] rounded-md font-bold leading-5 text-darkest border border-secondary bg-primary hover:bg-tertiary !font-medium py-[6px] px-[18px] text-sm cursor-pointer",{"cursor-not-allowed":l}),children:(0,p.t)("home_page.edit_form.welcome_banner.upload")}),(0,n.jsx)("input",{accept:"image/*, video/*",type:"file",id:a,name:a,className:"hidden",disabled:l,onChange:function(e){!l&&e.target.files&&o(Array.from(e.target.files))}})]})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},v=function(e){var t=e.title,r=e.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"cover-image",className:"mb-2",children:t}),(0,n.jsx)("div",{className:"relative mb-2 flex flex-row items-start justify-between whitespace-pre-wrap",children:r})]})},g=r(56310),_=r.n(g),x=r(57363),j=r(80171),w=function(e){var t=e.url,r=e.type,i=e.onRemove,o=e.disabled,a=e.isSpaceWelcomeBanner,s=(void 0===r?"image":r).includes("image");return(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsx)("img",{loading:"lazy",src:t,alt:(0,p.t)("cover_image"),className:(0,m.A)("w-full rounded-md",{"h-auto":!a,"h-[256px] object-cover":a})}):(0,n.jsx)("div",{className:"h-auto rounded-md",children:(0,n.jsx)(_(),{url:t,width:"100%",height:"100%",controls:!0})}),!o&&(0,n.jsx)(j.T,{content:(0,p.t)("home_page.remove_banner"),children:(0,n.jsx)("button",{type:"button",className:"border-primary bg-tertiary group absolute right-0 top-0 -m-2 flex h-[22px] w-[22px] cursor-pointer items-center justify-center rounded-full border",onClick:i,"aria-label":(0,p.t)("home_page.remove_banner"),children:(0,n.jsx)(x.JO,{type:"20-close-sm","aria-hidden":!0,size:20})})})]})};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(e){var t=e.name,r=void 0===t?"cover_image":t,f=e.title,p=e.description,m=e.disabled,b=void 0!==m&&m,h=e.removeAttachmentsPath,g=void 0===h?"":h,_=e.removeAttachmentsParams,x=void 0===_?{}:_,j=e.isVideo,O=e.isSpaceWelcomeBanner,P=(0,a.Gc)(),C=P.getValues,N=P.setValue,A=k((0,i.useState)(0),2),I=A[0],E=A[1],T=k((0,i.useState)(!1),2),L=T[0],D=T[1],M=C(r),R={url:"",type:""};(0,o.isObject)(M)?R=M:(0,o.isObject)(M)||(0,o.isNull)(M)||(0,o.isUndefined)(M)||(R={url:(0,s.C9)({filename:r,signed_id:M}),type:void 0!==j&&j?"video":"image"});var B=k((0,i.useState)(R),2),F=B[0],z=B[1],U=F.url,Z=F.type,G=function(e){D(!0),E(e)},q=function(e,t,n){z({url:e,type:null==n?void 0:n.split("/")[0]}),N(r,t),D(!1)};return L?(0,n.jsx)(v,{title:f,children:(0,n.jsx)("div",{className:"text-default bg-secondary border-primary flex h-64 w-full items-center justify-center rounded-md border border-dashed",children:(0,n.jsx)(l.D,{percentage:I,size:32,strokeWidth:3})})}):(0,n.jsx)(v,{title:f,children:U?(0,n.jsx)(w,{url:U,type:Z,onRemove:function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return D(!0),e=g||(0,s._E)(),t=(0,o.isEmpty)(x)?{field_name:d.lb[r]}:x,[4,(0,c.pC)(e,t)];case 1:return n.sent().success&&(N(r,{url:null,type:"image"}),z({url:"",type:""})),D(!1),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)})})()},disabled:b,isSpaceWelcomeBanner:void 0!==O&&O}):(0,n.jsx)(y,{isLoading:L,handleUpload:function(e){try{new u.Q(e[0],q,"","",G).start()}catch(e){console.error(e)}},name:r,description:p,disabled:b})})}},52893:function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}r.d(t,{A1:()=>a,PM:()=>o,lb:()=>s});var o=function(e){var t=e.community,r=e.community_setting,o=r.meta_tags;return i(n({logged_in_description:t.logged_in_user_home_page_banner_description,logged_in_media:t.logged_in_user_home_page_banner_media,logged_in_title:r.logged_in_user_home_page_banner.title,allow_close:r.logged_in_user_home_page_banner.allow_close,logged_in_banner_enabled:r.logged_in_user_home_page_banner.enabled,logged_out_description:t.logged_out_user_home_page_banner_description,logged_out_media:t.logged_out_user_home_page_banner_media,logged_out_title:r.logged_out_user_home_page_banner.title,logged_out_banner_enabled:r.logged_out_user_home_page_banner.enabled,trending_posts_window_in_days:r.trending_posts_window_in_days,default_post_sort_logged_in_user:r.default_post_sort_logged_in_user,default_post_sort_logged_out_user:r.default_post_sort_logged_out_user,include_non_member_space_posts:r.include_non_member_space_posts},o),{opengraph_image:o.opengraph_image})},a=function(e,t){var r=t.community,o=t.community_setting,a=o.meta_tags;return i(n({},t),{community:i(n({},r),{logged_in_user_home_page_banner_description:e.logged_in_description,logged_out_user_home_page_banner_description:e.logged_out_description,logged_in_user_home_page_banner_media:e.logged_in_media,logged_out_user_home_page_banner_media:e.logged_out_media}),community_setting:i(n({},o),{trending_posts_window_in_days:e.trending_posts_window_in_days,default_post_sort_logged_in_user:e.default_post_sort_logged_in_user,default_post_sort_logged_out_user:e.default_post_sort_logged_out_user,include_non_member_space_posts:e.include_non_member_space_posts,logged_in_user_home_page_banner:i(n({},o.logged_in_user_home_page_banner),{title:e.logged_in_title,enabled:e.logged_in_banner_enabled,allow_close:e.allow_close}),logged_out_user_home_page_banner:i(n({},o.logged_out_user_home_page_banner),{title:e.logged_out_title,enabled:e.logged_out_banner_enabled}),meta_tags:i(n({},a),{meta_title:e.meta_title,meta_description:e.meta_description,opengraph_title:e.opengraph_title,opengraph_description:e.opengraph_description,opengraph_image:e.opengraph_image})})})},s={logged_in_media:"logged_in_user_home_page_banner_media",logged_out_media:"logged_out_user_home_page_banner_media"}},55202:function(e,t,r){"use strict";r.d(t,{N:()=>m,Z:()=>p});var n=r(67294),i=r(96486),o=r(88767),a=r(93199),s=r(13532),l=r(14218),c=r(61193),u=r(96354),d=r(41342);function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var p="home-page-posts",m=function(e){var t,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],m=arguments.length>2?arguments[2]:void 0,b=(0,d.nT)(),h=(null==b||null==(t=b.helpers)?void 0:t.isDataLoading)||i.noop,y=(0,d.wh)(),v=!!(null==y?void 0:y.isLoading),g=(0,u.t)().sort,_=void 0===g?e:g,x=(0,l.d)(),j=x.removeRecord,w=x.findAndReplaceRecord,O=(0,o.useQueryClient)(),S=(0,n.useMemo)(function(){return!!(h()||v)},[h,v]),k=(0,n.useMemo)(function(){return[p,{sort:_}]},[_]),P=(0,o.useInfiniteQuery)(k,function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,a.UT)(s.av.homePagePosts.index({params:{page:t,sort:_}}))},{keepPreviousData:!0,staleTime:500,enabled:r,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(e){(0,i.isFunction)(m)&&m(e)}}),C=P.fetchNextPage,N=P.data,A=P.hasNextPage,I=P.isLoading,E=P.refetch,T=(0,n.useCallback)(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.refetch,i=void 0===n||n;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(t=e,!i)return[3,2];return[4,O.fetchQuery(s.av.posts.show({spaceId:e.space_id,postSlug:e.slug}))];case 1:t=r.sent(),r.label=2;case 2:return[2,w(t,k)]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})})()},[O,w,k]),L=(0,n.useCallback)(function(e){j(e,k)},[j,k]),D=(0,c.D)(),M=(0,n.useMemo)(function(){return N?(0,i.uniqBy)((0,i.flatten)(N.pages.map(function(e){return e.records})),"id"):[]},[N]);return{fetchNextPage:C,hasNextPage:!!A,isLoading:I,isLoadingAppData:D,onPostChange:T,onPostDestroy:L,perPagePostIds:(0,n.useMemo)(function(){return N?N.pages.map(function(e){return e.records.map(function(e){return e.id})}):[]},[N]),posts:M,refetchPosts:E,shouldShowLoader:S}}},54427:function(e,t,r){"use strict";r.d(t,{w:()=>d});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(80171),l=r(38120),c=r(41553),u=function(e){var t=e.tooltipText,r=e.text;return!e.hide&&(0,n.jsx)(s.T,{content:t,className:"cursor-pointer pr-3",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-default",children:r})})};u.propTypes={tooltipText:o().string,text:o().string,hide:o().bool};var d=function(e){var t=e.invitationLinkName,r=e.invitationLinkActive,i=e.membersCount,o=e.spaces,s=e.spaceGroups,d=e.shouldShowPaywall,f=e.paywallString,p=e.paywallCouponString;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(c.Z.LabelLg,{children:t}),(0,n.jsx)(l.C,{variant:r?"success":"default",children:(0,n.jsx)("div",{className:"px-2 py-1",children:r?(0,a.t)("invitation_links.summary.badge.active"):(0,a.t)("invitation_links.summary.badge.revoked")})})]}),(0,n.jsx)("div",{className:"pt-1",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-dark",children:(0,a.t)("invitation_links.members_joined",{count:i})})}),(0,n.jsxs)("div",{className:"flex pt-2",children:[(0,n.jsx)(u,{tooltipText:o.join(", "),text:(0,a.t)("invitation_links.summary.spaces",{count:o.length}),hide:o.length<=0}),(0,n.jsx)(u,{tooltipText:s.join(", "),text:(0,a.t)("invitation_links.summary.space_groups",{count:s.length}),hide:s.length<=0}),(0,n.jsx)(u,{tooltipText:f,text:(0,a.t)("invitation_links.summary.paywall"),hide:!d}),(0,n.jsx)(u,{tooltipText:p,text:(0,a.t)("invitation_links.summary.paywall_coupon"),hide:!d||!p})]})]})};d.propTypes={invitationLinkName:o().string,invitationLinkActive:o().bool,membersCount:o().number,spaces:o().array,spaceGroups:o().array,shouldShowPaywall:o().bool,paywallString:o().string,paywallCouponString:o().string}},31398:function(e,t,r){"use strict";r.d(t,{Q:()=>D});var n=r(85893),i=r(67294),o=r(84326),a=r(87009),s=r(39905),l=r(13532),c=r(85401),u=r(30889),d=r(20624),f=r(97410),p=r(94183),m=r(21453),b=r(83665),h=r(89138),y=r(54515),v=r(38072),g=r(25815);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j="landing_page.settings.welcome_banner",w=function(e){var t=e.keyField,r=e.title,a=e.media,s=e.description,l=e.allowClose,d=e.enabled,f=e.onTitleChange,p=e.onBannerDescriptionChange,_=e.displayAllowClose,w=e.onAllowCloseChange,O=e.onRemoveMedia,S=e.onEnabledChange,k=e.setMediaSettings,P=(0,c.o)().reSetWelcomeBannerPreference,C=x((0,i.useState)(!1),2),N=C[0],A=C[1],I=x((0,i.useState)({}),2),E=I[0],T=I[1],L=x((0,i.useState)(0),2),D=L[0],M=L[1],R=x((0,i.useState)(!1),2),B=R[0],F=R[1];(0,v.a)(N);var z=function(e){F(!0),M(e)},U=function(e,t,r,n){T({url:e,type:r}),F(!1),k(n.split("community")[1].replace(/^\[(.+)\]$/,"$1"),t)},Z=function(e,t){try{new g.Q(e.target.files[0],U,"media-uploader",t||"",z).start()}catch(e){console.error(e)}};return(0,n.jsxs)("div",{className:"form-section__content",children:[(0,n.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-show-banner"),children:[(0,n.jsx)(u.Q,{field:t,label:(0,o.t)("".concat(j,".header")),description:(0,o.t)("".concat(j,".header_description"))}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)("div",{className:"form-meta-button",children:(0,n.jsx)(m.Z,{field:"field-".concat(t,"-enabled"),value:d,onToggleChange:S})})})]}),d&&(0,n.jsxs)("div",{className:"form-section__background",children:[(0,n.jsxs)("div",{className:"form-group full-width media-uploader",id:"field-".concat(t),children:[(0,n.jsx)(u.Q,{field:t,label:(0,o.t)("".concat(j,".media")),description:(0,o.t)("".concat(j,".media_description"))}),(0,n.jsx)(y.o,{id:t,name:t,media:a,previewMedia:E,onMediaUpload:function(e){return Z(e,"community[".concat(t,"_media]"))},isLoading:B,progress:D,onRemoveMedia:function(){T({}),O()}})]}),(0,n.jsxs)("div",{className:"form-group full-width",children:[(0,n.jsx)(u.Q,{field:"".concat(t,"-title"),label:(0,o.t)("".concat(j,".title"))}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:r||"",onChange:f})})]}),(0,n.jsxs)("div",{className:"form-group full-width",children:[(0,n.jsx)(u.Q,{field:"".concat(t,"-description"),label:(0,o.t)("".concat(j,".description"))}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)(b.Z,{id:"rich-text-description-".concat(t),placeholder:(0,o.t)("".concat(j,".write_a_description")),name:"rich-text-description-".concat(t),value:s||"",onChange:p,is_private_space:!1,preventAccidentalLeave:!1},"rich-text-description-".concat(t))})]}),_&&(0,n.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-allow-close"),children:[(0,n.jsxs)("div",{className:"form-meta",children:[(0,n.jsx)("label",{htmlFor:"".concat(t,"-allow-close"),children:(0,o.t)("".concat(j,".allow_close_title"))}),(0,n.jsxs)("div",{className:"field-description",children:[(0,o.t)("".concat(j,".allow_close_title_description")),"\xa0",(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{type:"button",onClick:function(){A(!0)},className:"homepage-reset-banner-link w-full text-left",children:(0,o.t)("".concat(j,".reset_preference_title"))}),!!N&&(0,n.jsx)(h.c,{show:N,closeOnEscape:!0,closeOnOutsideClick:!0,onClose:function(){A(!1)},onConfirmation:function(e){e.preventDefault(),P(),A(!1)},headerText:(0,o.t)("".concat(j,".reset_preference_title")),bodyText:(0,o.t)("".concat(j,".reset_preference_description")),className:"reset-banner-modal"})]})]})]}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)("div",{className:"form-meta-button",children:(0,n.jsx)(m.Z,{field:"allow_close",value:l,onToggleChange:w})})})]})]})]})},O=function(e){var t=e.fieldName,r=e.displayAllowClose,i=e.community,o=e.community_setting,a=e.setMediaSettings,s=e.onBannerDescriptionChange,l=e.onCommunitySettingChange,c=e.onRemoveMedia,u=o[t],d=u.enabled,f=u.title,p=u.allow_close;return(0,n.jsx)(w,{keyField:t,title:f,enabled:!!d&&d,description:i["".concat(t,"_description")],media:i["".concat(t,"_media")],setMediaSettings:a,onBannerDescriptionChange:function(e){return s(e,"".concat(t,"_description"))},allowClose:!!p&&p,onTitleChange:function(e){return l(t,"title",e.target.value)},onAllowCloseChange:function(e){return l(t,"allow_close",e)},onEnabledChange:function(e){return l(t,"enabled",e)},displayAllowClose:void 0===r||r,onRemoveMedia:function(e){return c(e,"".concat(t,"_media"))}})},S=(0,o.t)("landing_page.settings"),k=function(e){var t=e.fieldName,r=e.options,i=e.community,o=e.onOptionSelect,a="".concat(t,"_id");return(0,n.jsxs)("div",{className:"form-group",id:"field-".concat(a),children:[(0,n.jsx)(u.Q,{field:a,label:S[t],description:S["".concat(t,"_description")]}),(0,n.jsx)(p.K,{options:r,selected:i[a],customKey:a,onOptionSelect:function(e){return o(e,a,"community")}})]})};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){N(e,t,r[t])})}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||L(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}var D=function(){var e=E((0,i.useState)(!1),2),t=e[0],r=e[1],b=E((0,i.useState)({logged_in:!0,logged_out:!0,meta_details:!0}),2),h=b[0],y=b[1],v=E((0,i.useState)(new Set),2),g=v[0],_=v[1],x=(0,c.o)(),j=x.dataLoaded,w=x.settings,S=x.metaData,P=x.loggedInUserSpaceOptions,L=x.loggedOutUserSpaceOptions,D=x.setSettings,M=x.fetchLandingPageSettings,R=x.setLoggedInUserSpaceOptions,B=x.setLoggedOutUserSpaceOptions,F=w.community,z=w.community_setting,U=F.home_page_enabled,Z=F.default_existing_member_space_id,G=F.default_new_member_space_id,q=F.default_logged_out_space_id,V=z.trending_posts_window_in_days,H=z.include_non_member_space_posts,W=z.meta_tags,Q=S.postSortOptions,J=S.trendingPostWindowLimit,K=S.homePageOption,$=(0,o.t)("landing_page.settings");(0,i.useEffect)(function(){M()},[]);var X=function(){var e=new Set;return V>J&&e.add((0,o.t)("landing_page.settings.trending_posts_window_limit_exceed",{limit:J})),["logged_in_user_home_page_banner","logged_out_user_home_page_banner"].forEach(function(t){var r=z[t],n=r.enabled,i=r.title;if(n){var o=F["".concat(t,"_media")],a=o.url&&o.url.length>0||o.length>0;0!==i.length||0!==F["".concat(t,"_description")].length||a||e.add($.welcome_banner.errors.blank_welcome_banner)}}),!(e.size>0)||(_(e),!1)},Y=function(e,t){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return r(!0),[4,fetch((0,l._E)(),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({field_name:t})})];case 1:return e.sent().ok&&(D({community:I(A({},F),N({},t,{})),community_setting:z}),r(!1)),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){C(o,r,i,a,s,"next",e)}function s(e){C(o,r,i,a,s,"throw",e)}a(void 0)})})()},ee=function(e,t){D({community:I(A({},F),N({},e,t)),community_setting:z})},et=function(e,t,r){D({community:F,community_setting:I(A({},z),N({},e,t?I(A({},z[e]),N({},t,r)):r))})},er=function(e,t){D({community:I(A({},F),N({},t,e.target.innerHTML)),community_setting:z})},en=function(e,t,r){D("community"===r?{community:A({},F,N({},t,e.value)),community_setting:z}:{community:F,community_setting:A({},z,N({},t,e.value))})},ei=["logged_in","logged_out"].map(function(e){var t="default_post_sort_".concat(e,"_user");return(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)(u.Q,{field:t,label:$[t],description:$["".concat(t,"_description")]}),(0,n.jsx)(p.K,{options:Q,selected:z[t],customKey:t,onOptionSelect:function(e){return en(e,t,"community_setting")},searchable:!1})]},t)}),eo=["logged_in","logged_out"].map(function(e){var t=h[e];return(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("div",{className:"form-section__header has-toggle",children:(0,n.jsx)("button",{type:"button",className:"block-toggle ".concat(t?"open":"hidden"),onClick:function(r){r.preventDefault(),y(I(A({},h),N({},e,!t)))},children:$["".concat(e,"_defaults_title")]})}),t&&("logged_in"===e?(0,n.jsxs)("div",{className:"form-section__content",children:[(0,n.jsx)(k,{fieldName:"default_existing_member_space",options:P,community:F,onOptionSelect:en}),(0,n.jsx)(k,{fieldName:"default_new_member_space",options:P,community:F,onOptionSelect:en}),U&&(0,n.jsx)(O,{fieldName:"logged_in_user_home_page_banner",community:F,community_setting:z,setMediaSettings:ee,onBannerDescriptionChange:er,onCommunitySettingChange:et,onRemoveMedia:Y})]}):(0,n.jsxs)("div",{className:"form-section__content",children:[(0,n.jsx)(k,{fieldName:"default_logged_out_space",options:L,community:F,onOptionSelect:en}),U&&(0,n.jsx)(O,{fieldName:"logged_out_user_home_page_banner",community:F,community_setting:z,setMediaSettings:ee,onBannerDescriptionChange:er,onCommunitySettingChange:et,onRemoveMedia:Y})]}))]},"".concat(e,"-section"))});return j?(0,n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),X()){r(!0);var t=(0,a.w)({landing_page_settings:w});fetch((0,l.H5)(),{method:"POST",body:t,credentials:"same-origin",mode:"no-cors",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(){r(!1),window.location.reload()}).catch(function(e){console.error(e)})}else window.scrollTo(0,0)},children:[g.size>0&&(0,n.jsx)("div",{className:"form-errors",children:g}),(0,n.jsx)("div",{className:"form-section",children:(0,n.jsxs)("div",{className:"form-section__content border-top",children:[(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("div",{className:"form-group__toggle",children:(0,n.jsxs)("div",{className:"form-group full-width",id:"field-home_page_enabled",children:[(0,n.jsx)(u.Q,{field:"home_page_enabled",label:$.home_page_enabled,description:$.home_page_enabled_description}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)("div",{className:"form-meta-button",children:(0,n.jsx)(m.Z,{field:"home_page_enabled",value:U,onToggleChange:function(e){var t=K.value;if(!0===e){var r={community:A({},F,{home_page_enabled:e,default_existing_member_space_id:t,default_new_member_space_id:t,default_logged_out_space_id:t}),community_setting:z};R([K].concat(T(P))),B([K].concat(T(L))),D(r)}else{var n={home_page_enabled:e},i=P.filter(function(e){return e.value!==t}),o=L.filter(function(e){return e.value!==t});Z===K.value&&(n.default_existing_member_space_id=i[0].value),G===K.value&&(n.default_new_member_space_id=i[0].value),q===K.value&&(n.default_logged_out_space_id=i[0].value),D({community:A({},F,n),community_setting:z}),R(i),B(o)}}})})})]})}),U&&(0,n.jsxs)("div",{className:"form-group__hidden",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)(u.Q,{field:"trending_posts_window_in_days_title",label:$.trending_posts_window_in_days_title,description:$.trending_posts_window_in_days_description}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:V,onChange:function(e){return et("trending_posts_window_in_days",null,e.target.value)}})})]}),ei,(0,n.jsxs)("div",{className:"form-group full-width",children:[(0,n.jsx)(u.Q,{field:"include_non_member_space_posts",label:$.include_non_member_space_posts_title,description:$.include_non_member_space_posts_description}),(0,n.jsx)("div",{className:"form-input",children:(0,n.jsx)("div",{className:"form-meta-button",children:(0,n.jsx)(m.Z,{field:"include_non_member_space_posts",value:H,onToggleChange:function(e){return et("include_non_member_space_posts",null,e)}})})})]})]})]}),eo,U&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("div",{className:"form-section__header has-toggle",children:(0,n.jsx)("button",{type:"button",className:"block-toggle ".concat(h.meta_details?"open":"hidden"),onClick:function(e){e.preventDefault(),y(I(A({},h),{meta_details:!h.meta_details}))},children:$.meta_tag.meta_tag_section_title})}),h.meta_details&&(0,n.jsx)(f.p,{metaTagDetails:W,localizedData:$,onCommunitySettingChange:et})]},"meta-data-section")]})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(s.z,{variant:"circle",type:"submit",disabled:t,children:t?(0,o.t)("submitting"):(0,o.t)("save_changes")})})]}):(0,n.jsx)(d.m,{})}},94620:function(e,t,r){"use strict";r.d(t,{x:()=>P});var n=r(85893),i=r(70442),o=r(52928),a=r(84326),s=r(3907),l=r(41342),c=r(1168),u=r(85924),d=r(75148),f=r(60230),p=function(e){var t=e.currentCommunity,r=(0,u.TC)().isDarkAppearance,i=t||{},o=i.name,s=i.logo_url,l=i.dark_logo_url,d=s;return(r&&l&&(d=l),d)?(0,n.jsx)("a",{href:"/",className:"community__brand",children:(0,n.jsx)("div",{className:"community__logo",children:(0,n.jsx)("img",{loading:"lazy",alt:(0,a.t)("community_logo_alt",{community_name:o}),src:d})})}):(0,n.jsxs)("a",{href:"/",className:"community__brand",children:[(0,n.jsx)("div",{className:(0,c.A)("brand-icon brand-icon__initial !rounded-xl")}),(0,n.jsx)("div",{className:"name",children:o})]})},m=r(96533),b=r(78456),h=r(13532),y=r(96354),v=r(98363),g=r(43544),_=function(){var e=(0,l.wh)(),t=e.currentUser,r=e.currentCommunityMember,o=(0,i.TH)(),s=(0,l.ic)(),u=(0,m.r)().show,f=(0,b.vb)(r),p=(0,y.t)().post_login_redirect,_=(null==r?void 0:r.policies)||{},x=_.can_access_billing,j=_.can_access_authentication_page,w=[{action:function(){r&&u({memberPublicId:r.public_uid})},label:(0,a.t)("my_profile")},{to:h.du.profile(o),label:(0,a.t)("edit_profile")},{to:h.du.notifications(o),label:(0,a.t)("notification")}];return(j&&w.push({to:h.du.authentication(o),label:(0,a.t)("authentication")}),x&&w.push({to:h.du.billing(o),label:(0,a.t)("billing")}),f&&w.push({action:function(){window.location.href="/analytics"},label:(0,a.t)("analytics_title")},{to:"/audience/manage",label:(0,a.t)("audience")},{to:"/settings",label:(0,a.t)("settings_title")}),t&&r)?(0,n.jsx)(g.Lt,{className:"user-menu z-[9999]",button:(0,n.jsx)(v.s,{name:null==r?void 0:r.name,src:null==r?void 0:r.avatar_url,size:"8"}),appendTo:document.getElementById("mainHeader")||document.body,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:(0,c.A)("bg-secondary -mt-2 mb-1.5 w-full py-1"),children:(0,n.jsx)(g.Lt.ItemWithLink,{to:"/u/".concat(null==r?void 0:r.public_uid,"?show_back_link=true"),children:null==r?void 0:r.name})}),w.map(function(e){return(0,n.jsx)(g.Lt.ItemWithLink,{to:e.to,onClick:e.action,children:e.label},e.label)}),(0,n.jsx)(g.Lt.Separator,{}),(0,n.jsx)(g.Lt.ItemLink,{onClick:function(){return window.location.href="/users/sign_out"},children:(0,a.t)("sign_out")})]})}):(0,n.jsx)("div",{className:"user-join__mobile",children:(0,n.jsx)("div",{className:"user-join__menu",children:(0,n.jsxs)(g.Lt,{button:(0,n.jsx)(d.h,{name:"20-user",iconSize:20,buttonSize:28,ariaLabel:(0,a.t)("log_in"),iconClassName:"!w-5 !h-5 !text-c-header"}),className:"z-[9999]",appendTo:document.getElementById("mainHeader")||document.body,children:[(0,n.jsx)(g.Lt.ItemLink,{onClick:function(){return window.location.href=h.zo.signIn(Array(p).join(","))},children:(0,a.t)("log_in")}),s(function(e){var t=e.communitySignupUrl;return(0,n.jsx)(g.Lt.ItemLink,{onClick:function(){return window.location.href=t},children:(0,a.t)("sign_up")})})]})})})},x=function(){var e=(0,u.wC)().minimal_layout,t=(0,l.wh)(),r=t.currentCommunity,m=t.currentCommunitySettings,b=(0,f.gn)(),h=!!(0,i.$B)("/c/:spaceSlug/:postSlug"),y=!!(null==m?void 0:m.post_details_mobile_header_enabled);return h&&y?null:(0,n.jsx)("div",{className:"sticky top-0 z-30",children:(0,n.jsx)("header",{id:"mainHeader",className:"header header-v2 !bg-c-header",style:b,children:(0,n.jsxs)("div",{className:"header__inside",children:[!e&&(0,n.jsx)("div",{className:"header__menu",children:(0,n.jsx)(d.h,{name:"hamburger","data-action":"click->mobile-sidebar#toggle",ariaLabel:(0,a.t)("toggle_menu"),className:"toggle-button",buttonSize:28,iconSize:20,iconClassName:"!w-5 !h-5 !text-c-header"})}),(0,n.jsx)("div",{className:(0,c.A)("header__left",{"!justify-start":e}),children:(0,n.jsx)(p,{currentCommunity:r})}),(0,n.jsxs)("div",{className:"header__actions",children:[(0,n.jsx)(s._,{}),(0,n.jsx)("div",{className:"header__action",children:(0,n.jsx)("a",{href:"/analytics",children:(0,n.jsx)("svg",{className:"icon icon-analytics",viewBox:"0 0 24 24",children:(0,n.jsx)("use",{xlinkHref:"#icon-analytics"})})})}),(0,n.jsx)("div",{className:"header__action",children:(0,n.jsx)(o.rU,{to:"/audience/manage",children:(0,n.jsx)("svg",{className:"icon icon-members",viewBox:"0 0 24 24",children:(0,n.jsx)("use",{xlinkHref:"#icon-members"})})})}),(0,n.jsx)("div",{className:"header__action",children:(0,n.jsx)(o.rU,{to:"/settings",children:(0,n.jsx)("svg",{className:"icon icon-settings",viewBox:"0 0 24 24",children:(0,n.jsx)("use",{xlinkHref:"#icon-settings"})})})}),(0,n.jsx)("div",{className:"header__user relative z-30",children:(0,n.jsx)(_,{})})]})]})})})},j=r(61193),w=r(24184),O=r(60589),S=r(76896),k=r(61121),P=function(){var e=(0,w.U)(),t=(0,l.nT)().helpers.findBy({slug:e}),r=(0,k.p)(),i=(0,j.D)();return r?i?(0,n.jsx)("header",{className:"header",children:(0,n.jsx)(S.gi,{variant:"app-bar",showMemberAvatarsRow:!!t&&((0,O.V5)(t)||(0,O.H3)(t))})}):(0,n.jsx)(x,{}):null}},55975:function(e,t,r){"use strict";r.d(t,{X:()=>o});var n=r(85893),i=r(3241),o=function(){var e=(0,i._)().data,t=(void 0===e?{}:e).browser_notifications_html;return(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}},20982:function(e,t,r){"use strict";r.d(t,{C:()=>n});var n={standard:"standard",fullscreen:"fullscreen",minimal:"minimal",empty:"empty"}},61826:function(e,t,r){"use strict";r.d(t,{h:()=>A,O:()=>N});var n=r(85893),i=r(67294),o=r(41342),a=r(85924),s=r(1168),l=r(33382),c=r(88277),u=function(e){var t=e.children,r=e.bodyClassNames;return(0,l.H)((0,s.A)(void 0===r?"":r,"trix-v2")),(0,c.w)(),(0,n.jsx)("div",{className:"standard-layout-v2",children:t})},d=r(84326),f=r(59769),p=r(57363),m=r(78152),b=function(e){var t=e.title,r=e.children;return(0,n.jsx)(m.S,{title:t,children:(0,n.jsx)("div",{className:"react-layout-fullscreen",children:r})})};b.Content=function(e){var t=e.children;return(0,n.jsx)("div",{className:"react-layout-fullscreen-content",children:(0,n.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:t})})},b.Header=function(e){var t=e.title,r=e.beforeTitle,i=e.afterTitle;return(0,n.jsx)("div",{className:"react-layout-fullscreen-header",children:(0,n.jsxs)("div",{className:"react-layout-fullscreen-wrapper",children:[r&&(0,n.jsx)("div",{className:"react-layout-fullscreen-header-before",children:r}),(0,n.jsxs)("div",{className:"react-layout-fullscreen-header-heading",children:[(0,n.jsx)("h1",{className:"heading-h1",children:t}),i]})]})})},b.Tabs=function(e){var t=e.children;return(0,n.jsx)("div",{className:"react-layout-fullscreen-tabs",children:(0,n.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:(0,n.jsx)("nav",{"aria-label":(0,d.t)("full_screen_layout.tabs"),children:t})})})},b.Topbar=function(e){var t=e.onClose,r=e.actions,i=e.buttonPosition,l=e.showCommunityIcon,c=(0,o.wh)().currentCommunity,u=(0,a.TC)().isDarkAppearance,m=u?null==c?void 0:c.prefs.brand_color.dark:null==c?void 0:c.prefs.brand_color.light,b=u?null==c?void 0:c.prefs.brand_text_color.dark:null==c?void 0:c.prefs.brand_text_color.light;return(0,n.jsxs)("div",{className:(0,s.A)("react-layout-fullscreen-topbar",{"react-layout-fullscreen-topbar--reverse":"start"===(void 0===i?"end":i)}),children:[(void 0===l||l)&&c&&(0,n.jsx)("div",{className:"react-layout-fullscreen-topbar__community-icon",children:(0,n.jsx)(f.G,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({brand_color:m,brand_text_color:b},c))}),(0,n.jsx)("div",{className:"react-layout-fullscreen-topbar__actions",children:r}),(0,n.jsxs)("button",{type:"submit",className:"btn-close",onClick:t,children:[(0,n.jsx)(p.JO,{type:"close"}),(0,n.jsx)("span",{className:"sr-only",children:(0,d.t)("full_screen_layout.close_panel")})]})]})};var h=r(94620),y=r(83334),v=r(17617),g=r(64517),_=function(e){var t=e.children,r=e.bodyClassNames,i=(0,o.wh)().currentCommunityMember;(0,l.H)((0,s.A)(void 0===r?"":r,"trix-v2 minimal-layout"));var a=(0,v.ef)();return(0,n.jsx)("div",{id:"panel",className:"minimal-layout__wrapper",children:(0,n.jsxs)("div",{className:"community__content !bg-secondary",children:[(0,n.jsx)(g.G,{isRenderedOutsideSpace:!0}),(0,n.jsx)(h.x,{}),(0,n.jsx)("div",{className:"standard-layout-v2 no-right-sidebar",children:t}),!!(i&&a)&&(0,n.jsx)(y.H,{})]})})},x=r(27732),j=r(20982),w=r(45273),O=function(){var e=(0,w.H)(),t=e.isSpaceRoute,r=e.isSpaceGroupRoute,n=e.isFeedRoute,i=(0,v.a7)();return!t&&!r&&!n&&i};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=(0,i.createContext)(null);C.displayName="DynamicLayoutContext";var N=function(e){var t,r,s,l=k({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e)),c=(0,o.wh)().isLoading,d=(0,a.wC)().minimal_layout,f=P((0,i.useState)({}),2),p=f[0],m=f[1],h=P((0,i.useState)(d?j.C.minimal:j.C.standard),2),y=h[0],v=h[1],g=O();switch(y){case j.C.fullscreen:s=b;break;case j.C.standard:s=x.a;break;case j.C.minimal:s=_;break;case j.C.empty:s=u;break;default:s=x.a}return c?null:(0,n.jsx)(C.Provider,{value:{layoutType:y,setLayoutType:v,setStandardLayout:function(){return v(j.C.standard)},setMinimalLayout:function(){return v(j.C.minimal)},setEmptyLayout:function(){return v(j.C.empty)},setDynamicLayoutProps:m,resetDynamicLayoutProps:function(){return m({})}},children:(0,n.jsx)(s,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l,p),r=r={disableSidebar:g},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},A=function(){var e=(0,i.useContext)(C);if(!e)throw Error("useDynamicLayoutContext must be used within a DynamicLayout");return e}},92423:function(e,t,r){"use strict";r.d(t,{u:()=>N});var n=r(85893),i=r(96486),o=r(84326),a=r(3697),s=r(1168),l=r(57363),c=r(50308),u=r.n(c),d=r(52928);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var m=function(e){var t=e.children,r=e.className,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return"to"in i?(0,n.jsx)(d.rU,p(f({className:(0,s.A)("text-dark flex w-full justify-center p-5",r),onClick:i.onClick||u()},i),{children:t})):"to"in i?null:(0,n.jsx)("button",p(f({type:"submit",className:(0,s.A)("text-dark flex w-full justify-center p-5",r),onClick:i.onClick||u()},i),{children:t}))},b=function(e){var t=e.children;return(0,n.jsx)("span",{className:"text-xxs bg-brand absolute right-[-12px] top-[-6px] block rounded-full border-2 border-white px-[6px] py-[4px] text-center font-bold leading-none text-white",children:t})},h=r(70442),y=r(41342),v=r(60589),g=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote;return(0,n.jsx)("a",{href:t,"data-remote":r,className:"text-dark flex w-full justify-center p-5",children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},_=r(17534),x=r(33850),j=function(){var e=(0,_.m)().spaceId,t=(0,x.L)();return(0,n.jsx)("button",{type:"button",onClick:function(){return t.show({spaceId:e})},className:"text-dark flex w-full justify-center p-5",children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("events.create.title"),type:"bar-plus",size:24,useWithStrokeCurrentColor:!0})})},w=r(29662),O=function(e){var t=e.spaceId,r=(0,w.e)();return(0,n.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:function(){r.show({spaceId:t,onClose:function(){r.remove()}})},children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},S=r(46407),k=function(){return(0,n.jsx)(S.h,{render:function(e){var t=e.onClick;return(0,n.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:t,children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})}})},P=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote,i=e.shouldNewPostOpenModal,o=((0,h.$B)("/c/:spaceSlug")||{}).params,a=(void 0===o?{spaceSlug:""}:o).spaceSlug,s=(0,y.nT)().helpers.findBy({slug:a});return(0,v.V5)(s)?(0,n.jsx)(j,{}):(0,v.Ds)(s)?(0,n.jsx)(O,{spaceId:null==s?void 0:s.id}):void 0!==i&&i?(0,n.jsx)(k,{}):(0,n.jsx)(g,{newPostUrl:t,newPostUseDataRemote:void 0!==r&&r})};function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var N=function(e){var t,r,c=e.className,u=e.newPostUrl,d=e.newPostUseDataRemote,f=e.onHomeClick,p=e.onNotificationsClick,h=e.onSearchClick,y=e.shouldNewPostOpenModal,v=e.shouldShowMessagingRoutes,g=e.style,_=e.unreadChatCount,x=void 0===_?0:_,j=e.unreadNotificationCount,w=void 0===j?0:j,O=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","newPostUrl","newPostUseDataRemote","onHomeClick","onNotificationsClick","onSearchClick","shouldNewPostOpenModal","shouldShowMessagingRoutes","style","unreadChatCount","unreadNotificationCount"]);return(0,n.jsx)("div",(t=C({id:a.B7,className:(0,s.A)("bg-primary fixed bottom-0 z-10 w-full",void 0===c?"":c),style:C({boxShadow:"0px 0px 10px 0px rgb(0 0 0 / 11%)"},void 0===g?{}:g)},O),r=r={children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{type:"submit",onClick:function(e){return(0,i.isFunction)(f)&&f(e)},className:"text-dark flex w-full cursor-pointer justify-center p-5",children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.home"),type:"home",size:24,useWithStrokeCurrentColor:!0})}),(0,n.jsx)(m,{onClick:function(e){return(0,i.isFunction)(h)&&h(e)},children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.search"),type:"search",size:24,useWithFillCurrentColor:!0})}),(0,n.jsx)(P,{newPostUseDataRemote:void 0!==d&&d,newPostUrl:void 0===u?"":u,shouldNewPostOpenModal:void 0!==y&&y}),(0,n.jsx)(m,{onClick:function(e){return(0,i.isFunction)(p)&&p(e)},children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.notifications"),type:"bell",size:24,useWithFillCurrentColor:!0}),w>0&&(0,n.jsx)(b,{children:w})]})}),void 0!==v&&v&&(0,n.jsx)(m,{to:"/messages",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.messages"),type:"dm",size:24,useWithFillCurrentColor:!0}),x>0&&(0,n.jsx)(b,{children:x})]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},83334:function(e,t,r){"use strict";r.d(t,{H:()=>v});var n=r(85893),i=r(40404),o=r(92423),a=r(67294),s=r(70442),l=r(60589),c=r(13532),u=r(44994),d=r(79414),f=r(41342),p=r(98694),m=r(32701);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(){var e,t,r,n=null==(e=(0,s.$B)("/home"))?void 0:e.isExact,i=null==(t=(0,s.$B)("/feed"))?void 0:t.isExact,o=(0,s.$B)("/c/:spaceSlug"),b=(null==o||null==(r=o.params)?void 0:r.spaceSlug)||"",y=(0,f.nT)().helpers.findBy({slug:b}),v=(0,l.V5)(y),g=h((0,a.useState)(""),2),_=g[0],x=g[1],j=h((0,a.useState)(!1),2),w=j[0],O=j[1],S=(0,d.I)().spotlightSearch,k=(0,m.gq)().shouldShowMessagingRoutes,P=(0,u.R)(),C=P.newNotificationCount,N=P.toggleNotificationDrawer,A=P.resetNewNotificationsCount,I=(0,p.K)().unreadChatCount;return(0,a.useEffect)(function(){var e;n||i||!b?(e="/c/new_post_in_space",O(!0)):(e=v?(0,c.ed)({spaceSlug:(null==y?void 0:y.slug)||""}):c.xu.new({spaceSlug:(null==y?void 0:y.slug)||""}),O(!1)),x(e)},[n,null==y?void 0:y.slug,v,i,b]),{newPostUrl:_,shouldNewPostUseDataRemote:w,shouldNewPostOpenModal:!v,unreadChatCount:I,unreadNotificationCount:C,onNotificationsClick:function(){N(),A()},onSearchClick:function(){S.show()},shouldShowMessagingRoutes:k}},v=function(){var e=y(),t=e.newPostUrl,r=e.shouldNewPostUseDataRemote,a=e.shouldNewPostOpenModal,s=e.unreadChatCount,l=e.unreadNotificationCount,c=e.onNotificationsClick,u=e.onSearchClick,d=e.shouldShowMessagingRoutes,f=(0,i.C)().goToCommunityRootPath;return(0,n.jsx)(o.u,{onSearchClick:u,onNotificationsClick:c,onHomeClick:function(){return f()},unreadNotificationCount:l,unreadChatCount:s,newPostUseDataRemote:r,newPostUrl:t,shouldNewPostOpenModal:a,shouldShowMessagingRoutes:d})}},1913:function(e,t,r){"use strict";r.d(t,{A:()=>f});var n=r(85893),i=r(67294),o=r(70442),a=r(18014),s=r(82453),l=r(3241),c=r(83485),u=r(12306);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t,r=e.renderLeftSidebar,f=(0,o.k6)(),p=(0,l._)().data,m=(void 0===p?{}:p).mobile_drawer_html,b=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,a.l)().config,g=r;!r&&(null==v?void 0:v.renderLeftSidebar)&&(g=v.renderLeftSidebar);var _=(0,i.useCallback)(function(e){null!==e&&y(!0)},[y]),x=(0,i.useCallback)(function(){var e;(document.body.scrollLeft||document.documentElement.scrollLeft)>148&&(null==(e=window.mobileDrawer)||e.close())},[]),j=(0,i.useCallback)(function(e){var t,r,n,i=null==e||null==(t=e.target)?void 0:t.innerWidth;i&&i>1024&&(null==(n=window)||null==(r=n.mobileDrawer)||r.close())},[]);return((0,c.w)(j),(0,i.useEffect)(function(){return h&&document.body.addEventListener("scroll",x),function(){document.body.removeEventListener("scroll",x)}},[x,h]),(0,i.useEffect)(function(){return f.listen(function(){var e;null==(e=window.mobileDrawer)||e.close()})},[f]),m)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:_,dangerouslySetInnerHTML:{__html:m}}),h&&(0,n.jsx)(u.h,{selectorQuery:"#react-mobile-community-sidebar",children:g?g():(0,n.jsx)(s.K,{})})]}):null}},78152:function(e,t,r){"use strict";r.d(t,{S:()=>l});var n=r(85893),i=r(96486),o=r(64593),a=r(33382),s=r(41342),l=function(e){var t=e.title,r=e.bodyClassNames,l=e.children,c=(0,s.wh)().currentCommunity,u=(0,i.compact)([t,null==c?void 0:c.name]).join(" | ");return(0,a.H)(void 0===r?"":r),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.q,{children:(0,n.jsx)("title",{children:u})}),l]})}},36220:function(e,t,r){"use strict";r.d(t,{u:()=>o});var n=r(85893),i=r(1168),o=function(e){var t=e.hasPaddingTopMobile,r=e.isMinimalLayout,o=e.children,a=e.className,s=e.wrapperClassName;return(0,n.jsx)("div",{className:(0,i.A)("main h-full",{"bg-secondary":!r},a),children:(0,n.jsx)("div",{className:(0,i.A)("main__wrapper h-full sm:mx-6 md:pt-6 lg:mx-9",{"pt-0":!(void 0===t||t),"px-4 sm:px-0":r},s),children:o})})}},3985:function(e,t,r){"use strict";r.d(t,{O:()=>a});var n=r(85893),i=r(84326),o=r(1168),a=function(e){var t=e.className,r=e.children,a=e.hidden;return void 0!==a&&a?null:(0,n.jsx)("aside",{"aria-label":(0,i.t)("right_sidebar"),className:(0,o.A)("sidebar sidebar--right",t),"data-testid":"sidebar-right",children:(0,n.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:r})})}},64529:function(e,t,r){"use strict";r.d(t,{F:()=>O});var n=r(85893),i=r(70442),o=r(94620),a=r(55975),s=r(83334),l=r(36220),c=r(52928),u=r(84326),d=r(1168),f=r(67294),p=r(31136),m=function(e){var t=e.children,r=(0,p.S)();return(0,n.jsx)("div",{className:"sidebar sidebar--left",children:(0,n.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:(0,f.cloneElement)(t,{onClickRemoveOnboarding:r.show})})})},b=r(3985),h=r(82453),y=r(60589),v=r(33382),g=r(17617),_=r(41342),x=r(3241),j=r(1913),w=function(e){var t=e.postSlug,r=e.space;return!!e.disableRightSidebar||!(t&&"members"!==t&&(0,y.V5)(r))&&(null==r?void 0:r.hide_right_sidebar)},O=function(e){var t,r,l,c,u,f=e.disableSidebar,p=void 0!==f&&f,b=e.disableRightSidebar,y=e.children,O=e.bodyClassNames,S=e.renderLeftSidebar,k=void 0===S?null:S,P=e.hideAppBar,C=(0,_.wh)().currentCommunityMember,N={},A=(0,x._)().data,I=(void 0===A?{}:A).mobile_drawer_html;!p&&I&&(N["data-controller"]="mobile-sidebar"),(0,v.H)((0,d.A)("is-standard-layout react-standard-layout",void 0===O?"":O));var E=(0,g.a7)(),T=(0,i.$B)("/c/:spaceSlug/:postSlug"),L=(0,i.$B)("/c/:spaceSlug"),D=(null==L?void 0:L.params.spaceSlug)||"",M=(null==T?void 0:T.params.postSlug)||"",R=null==(l=(0,i.$B)("/home"))?void 0:l.isExact,B=null==(c=(0,i.$B)("/feed"))?void 0:c.isExact,F=null==(u=(0,i.$B)("/c/:spaceSlug"))?void 0:u.isExact,z=w({disableRightSidebar:void 0!==b&&b,postSlug:M,space:(0,_.nT)().helpers.findBy({slug:D})});return(0,n.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"community__wrapper bg-secondary"},N),r=r={children:[(0,n.jsx)("div",{id:"mobile-dropdown-container"}),!p&&(0,n.jsx)(j.A,{renderLeftSidebar:k}),(0,n.jsxs)("div",{id:"panel",className:(0,d.A)("community__content trix-v2",{"community__content--no-sidebar":p}),"data-target":"mobile-sidebar.panel",children:[!p&&!(void 0!==P&&P)&&(0,n.jsx)(o.x,{}),(0,n.jsxs)("div",{className:(0,d.A)("standard-layout",{"has-sidebar":!p,"no-right-sidebar":z}),children:[!p&&(0,n.jsx)(m,{children:k?k():(0,n.jsx)(h.K,{})}),y,(0,n.jsx)(a.X,{}),!!(C&&!E&&(R||B||F))&&(0,n.jsx)(s.H,{})]})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};O.Header=function(e){var t=e.sticky,r=e.children;return(0,n.jsx)("div",{className:(0,d.A)("main__header",{"main__header--sticky":t}),children:r})},O.Breadcrumb=function(e){var t=e.hidden,r=e.backLink,i=void 0===r?"":r,o=e.backLinkText,a=void 0===o?(0,u.t)("back"):o;return void 0!==t&&t||!i?null:(0,n.jsx)("div",{className:"header__name",children:!!i&&(0,n.jsx)("div",{className:"header__breadcrumb",children:(0,n.jsx)(c.rU,{to:i,children:a})})})},O.Content=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:(0,d.A)("main__content mx-auto h-full max-w-5xl",r),children:t})},O.Body=l.u,O.Left=m,O.Right=b.O},86342:function(e,t,r){"use strict";r.d(t,{a:()=>f});var n=r(85893),i=r(70442),o=r(84326),a=r(48150),s=r(72171),l=r(57363),c=r(41342),u=r(1168),d=r(39905),f=function(e){var t=e.hidden,r=e.backLink,f=void 0===r?"":r,p=e.backLinkText,m=void 0===p?(0,o.t)("back"):p,b=e.customRightContent,h=(0,c.wh)().isViewOnlyMasquerading,y=(0,i.k6)();return void 0!==t&&t||!f?null:(0,n.jsx)(a.Z,{leftContent:(0,n.jsx)(s.y,{children:(0,n.jsxs)(d.z,{type:"button",variant:"text",extraLarge:!0,onClick:function(){y.push(f)},className:(0,u.A)("flex items-center gap-2",{"!pointer-events-auto":h}),children:[(0,n.jsx)(l.JO,{type:"20-arrow-left",size:20}),m]})}),rightContent:b||null})}},63643:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(85893),i=r(1168),o=function(e){var t,r,o=e.disableSidebar,a=e.children,s=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["disableSidebar","children","className"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"panel","data-testid":"community-content",className:(0,i.A)("community__content trix-v2 bg-secondary h-[calc(100vh-48px)] w-full flex-1 overflow-y-auto print:overflow-visible",{"community__content--no-sidebar":void 0!==o&&o},s),"data-target":"mobile-sidebar.panel"},l),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},26016:function(e,t,r){"use strict";r.d(t,{z:()=>o});var n=r(85893),i=r(1168),o=function(e){var t,r,o=e.children,a=e.className,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,i.A)("bg-secondary",void 0===a?"":a),"data-testid":"community-wrapper"},s),r=r={children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},69765:function(e,t,r){"use strict";r.d(t,{V:()=>s});var n=r(85893),i=r(84326),o=r(1168),a=r(78324),s=function(e){var t,r,s=e.children,l=e.fullWidth,c=e.fullHeight,u=void 0===c||c,d=e.noPadding,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","fullWidth","fullHeight","noPadding"]);return(0,n.jsxs)("main",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"aria-label":(0,i.t)("main_content")},f),r=r={className:(0,o.A)("standard-layout-v2__content bg-secondary",{"standard-layout-v2__content--full":l,"standard-layout-v2__content--no-padding":d,"h-full":u}),children:[(0,n.jsx)("div",{className:(0,o.A)("bg-secondary",{"h-full":u}),children:s}),(0,n.jsx)(a.n,{id:"rail-bar-content"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},54603:function(e,t,r){"use strict";r.d(t,{v:()=>u});var n=r(85893),i=r(1364),o=r(72727),a=r(1168),s=r(504),l=r(17617),c=r(54237),u=function(e){var t,r,u=e.children,d=e.isBgSecondary,f=e.isBgPrimary,p=e.className,m=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","isBgSecondary","isBgPrimary","className"]),b=(0,i.k)().shouldShowTrialBanner,h=(0,l.j)(),y=(0,s.f)(),v=(0,o.L)().isElectron,g=(0,c.T)().isReactFlowWorkflowsRoute,_=g?"":(0,a.A)({"lg:!min-h-[calc(100vh-64px)]":!v&&!b&&h&&!y,"lg:!min-h-[calc(100vh-105px)]":v&&!b&&h&&!y,"lg:!min-h-[calc(100vh-64px-48px)]":(b||h)&&y,"lg:!min-h-[calc(100vh-112px)]":h&&y||h&&b,"lg:!min-h-[calc(100vh-160px)]":b&&h&&y,"lg:!min-h-[calc(100vh-64px-48px-48px)]":h&&y&&b});return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,a.A)("standard-layout-v2__content-wrapper",{"!bg-secondary":void 0!==d&&d,"bg-primary":void 0!==f&&f},_,p)},m),r=r={children:u},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},44383:function(e,t,r){"use strict";r.d(t,{y:()=>a});var n=r(85893),i=r(1168),o=r(54624),a=function(e){var t,r,a=e.url,s=e.alt,l=e.thumbnail,c=void 0!==l&&l,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["url","alt","thumbnail"]);return(0,n.jsx)(o.l,{children:(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),r=r={className:(0,i.A)("bg-primary block h-auto lg:relative",{"aspect-16/5 h-full max-h-[20.625rem] md:mx-auto md:max-w-5xl md:overflow-hidden md:rounded-2xl":!c}),"data-testid":"cover-image-container",children:(0,n.jsx)("img",{loading:"lazy",src:a,alt:void 0===s?"":s,className:(0,i.A)("h-full w-full",{"object-contain":c,"object-cover":!c}),"data-testid":"cover-image"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})}},54624:function(e,t,r){"use strict";r.d(t,{l:()=>o});var n=r(85893),i=r(1168),o=function(e){var t=e.children;return(0,n.jsx)("div",{className:(0,i.A)("md:px-6 md:pb-3 md:pt-5 lg:px-9"),children:t})}},78324:function(e,t,r){"use strict";r.d(t,{n:()=>i});var n=r(85893),i=function(e){var t=e.id;return(0,n.jsx)("div",{id:void 0===t?"rail-bar-header":t})}},58379:function(e,t,r){"use strict";r.d(t,{Y:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"md:hidden",children:t})}},45946:function(e,t,r){"use strict";r.d(t,{H:()=>a});var n=r(85893),i=r(84326),o=r(1168),a=function(e){var t,r,a=e.children,s=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)("aside",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"aria-label":(0,i.t)("left_sidebar"),className:(0,o.A)("standard-layout-v2__sidebar",s),"data-testid":"standard-layout-v2-sidebar"},l),r=r={children:(0,n.jsx)("nav",{children:a})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},48150:function(e,t,r){"use strict";r.d(t,{Z:()=>a});var n=r(85893);r(67294);var i=r(18083),o=r(12306),a=function(e){var t,r,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,n.jsxs)(o.h,{selectorQuery:"#standard-layout-header",children:[(0,n.jsx)(i.b,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s),r=r={id:"standard-layout-header-child"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),a]})}},18083:function(e,t,r){"use strict";r.d(t,{b:()=>a});var n=r(85893),i=r(41342),o=r(1168),a=function(e){var t,r,a=e.leftContent,s=e.rightContent,l=e.filters,c=e.headline,u=e.hasBorder,d=e.className,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["leftContent","rightContent","filters","headline","hasBorder","className"]),p=(0,i.wh)().isViewOnlyMasquerading;return(0,n.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f),r=r={className:(0,o.A)("bg-primary w-full lg:sticky lg:top-0 lg:z-10",d),children:[(0,n.jsxs)("div",{className:(0,o.A)("h-18 flex items-center gap-4 px-6",{"border-primary border-b":void 0===u||u,"!cursor-not-allowed":p}),"data-testid":"space-header",children:[(0,n.jsx)("div",{className:(0,o.A)("flex-1 truncate",{"!pointer-events-none":p}),"data-testid":"space-settings",children:a}),(0,n.jsx)("div",{className:(0,o.A)("relative flex",{"!pointer-events-none":p}),children:s})]}),!!l&&l,!!c&&c]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},52804:function(e,t,r){"use strict";r.d(t,{n:()=>s});var n=r(85893),i=r(84326),o=r(1168),a=r(61121),s=function(e){var t,r,s=e.children,l=e.className,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]),u=(0,a.p)();return(0,n.jsx)("header",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"standard-layout-header","aria-label":(0,i.t)("page_header"),className:(0,o.A)("z-20 sm:relative sm:top-0 lg:sticky",u?"top-16":"top-0",l)},c),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},55785:function(e,t,r){"use strict";r.d(t,{m:()=>c});var n=r(85893),i=r(70442),o=r(41342),a=r(29378),s=r(1168),l=r(81097),c=function(e){var t,r,c=e.disableSidebar,u=void 0!==c&&c,d=e.disableSidebarNestedBarLinks,f=e.disableLayoutRightSidebar,p=e.hasSettingsSidebar,m=void 0!==p&&p,b=e.children,h=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["disableSidebar","disableSidebarNestedBarLinks","disableLayoutRightSidebar","hasSettingsSidebar","children"]),y=(0,i.TH)().pathname,v=(0,o.wh)().currentCommunity,g=y.includes(l.L.community_inbox.index),_=(0,a.Z1)(v)||(0,a.Aq)(v);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,s.A)("standard-layout-v2 bg-secondary",{"standard-layout-v2--has-sidebar":!u,"standard-layout-v2--has-sidebar-v3":!u,"standard-layout-v2--has-settings-sidebar":m&&!g,"standard-layout-v2--has-community-inbox-sidebar":g&&m,"standard-layout-v2--no-right-sidebar":void 0!==f&&f,"standard-layout-v2--hidden-nested-links":void 0!==d&&d&&!_}),"data-testid":"standard-layout-v2-wrapper"},h),r=r={children:b},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},27732:function(e,t,r){"use strict";r.d(t,{a:()=>ep});var n=r(85893),i=r(70442),o=r(55975),a=r(83334),s=r(1168),l=r(86342),c=r(69765),u=r(44383),d=r(84326),f=r(82453),p=r(82859),m=r(60589),b=r(23583),h=r(33382),y=r(96354),v=r(24184),g=r(72727),_=r(67294),x=r(37137),j=r(41342),w="circle-app-banner",O=/Android|webOS|Nokia|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,S=/Android/i,k=r(31841);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I={isMobile:!1,isMobileOsAndroid:!1},E=function(){var e=(0,k._)(w).getValue,t=A((0,_.useState)(I),2),r=t[0],n=t[1],o=A((0,_.useState)(!1),2),a=o[0],s=o[1],l=A((0,_.useState)(!1),2),c=l[0],u=l[1],d="/getting-started"===(0,i.TH)().pathname,f=r.isMobile&&r.isMobileOsAndroid,p=(0,_.useCallback)(function(){document.querySelector('meta[name="google-play-app"]')?s(!0):s(!1)},[]),m=(0,_.useCallback)(function(e){var t=S.test(e);n(function(e){return N(C({},e),{isMobileOsAndroid:t})})},[]),b=(0,_.useCallback)(function(e){var t=O.test(e);n(function(e){return N(C({},e),{isMobile:t})})},[]),h=(0,_.useCallback)(function(){var t=e();if(t){var r=new Date(t.dismissedAt);Math.ceil(Math.abs(new Date().getTime()-r.getTime())/864e5)>15&&u(!0)}else u(!0)},[e]);return(0,_.useEffect)(function(){var e=navigator.userAgent;p(),b(e),m(e),h()},[h,p,b,m]),{shouldRenderAppBanner:a&&c&&f&&!d}},T=r(37416),L=r(39905),D=r(41553);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var R=(0,d.t)("circle"),B=function(){var e,t=(e=(0,_.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return M(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1],o=(0,j.wh)().currentCommunity,a=E().shouldRenderAppBanner,s=(0,k._)(w).setValue;if((0,_.useEffect)(function(){i(!0)},[]),!o||!a)return null;var l=o.name,c=o.has_branded_app,u=o.android_store_id,f=o.icon_url,p=c&&f,m=function(){i(!1),s({dismissedAt:new Date})},b=p?(0,d.t)("app_banner.logo_alt",{community_name:l}):(0,d.t)("app_banner.logo_alt",{community_name:R}),h=c?(0,d.t)("app_banner.title",{community_name:l}):(0,d.t)("app_banner.title",{community_name:R}),y=c?(0,d.t)("app_banner.description",{community_name:l}):(0,d.t)("app_banner.description",{community_name:R});return(0,n.jsx)(T.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!1,isOpen:r,contentPortalId:"app-banner-portal",size:"auto",position:"bottom",onClose:m,className:"!h-auto",children:(0,n.jsx)(T.x.Body,{className:"px-8 py-10",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"border-primary mb-6 flex h-20 w-20 items-center rounded-xl border",children:(0,n.jsx)("img",{loading:"lazy",src:p?f:x,alt:b,className:"mx-auto h-14 w-14 rounded-xl object-cover"})}),(0,n.jsxs)("div",{className:"mb-8 flex flex-col space-y-2 text-center",children:[(0,n.jsx)(D.Z.TitleSm,{weight:"semibold",color:"text-dark",children:h}),(0,n.jsx)(D.Z.LabelSm,{color:"text-default",children:y})]}),(0,n.jsx)(L.z,{full:!0,extraLarge:!0,className:"mb-4",onClick:function(){c&&u?window.open("https://play.google.com/store/apps/details?id="+u,"_blank"):window.open("https://circle.so/android","_blank")},children:(0,d.t)("app_banner.download_app_cta")}),(0,n.jsx)(L.z,{variant:"plain",onClick:m,children:(0,d.t)("app_banner.continue_in_browser_cta")})]})})})},F=r(54237),z=r(3241),U=r(29378),Z=r(80932),G=r(504),q=r(94620),V=r(1913),H=r(63643),W=r(26016),Q=r(54603),J=r(78324),K=r(45946),$=r(55785),X=r(1364),Y=r(57363),ee=r(50848),et=function(){var e=(0,X.k)(),t=e.trialEndDateMonthAndDayFormatted,r=e.expiringInTimer,i=e.trackTrialBannerClick,o=(0,ee.o)();return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"text-darkest flex items-center gap-2",children:[(0,n.jsx)(Y.JO,{type:"16-clock",size:16}),(0,n.jsx)(D.Z.BodySm,{weight:"font-semibold",size:"text-base",children:(0,d.t)("trial_banner.upgrade_to_prevent",{formatted_date:t})}),r&&(0,n.jsx)(D.Z.BodySm,{weight:"font-normal",size:"text-base",children:(0,d.t)("trial_banner.expiring_in",{expiring_in_timer:r})}),(0,n.jsx)(L.z,{className:"ml-1 text-base font-semibold",variant:"circle",onClick:function(){i(),o.show()},children:(0,d.t)("trial_banner.cta")})]})})},er=function(){return(0,X.k)().isCommunityOnTrial?(0,n.jsx)(et,{}):null},en=r(13532),ei=r(27106),eo=function(){var e=(0,j.wh)().displayCommunitySwitcher,t=(0,X.k)(),r=t.shouldShowTrialBanner,i=t.isSubscriptionCancelled;return r?(0,n.jsxs)(ei.E,{className:(0,s.A)("!bg-warning-light",{"left-[60px]":e}),children:[(0,n.jsx)(er,{}),i&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("a",{href:(0,en.xn)(),children:[(0,d.t)("trial_banner.renew_subscription")," "]}),(0,d.t)("trial_banner.to_access_community")]})]}):null},ea=function(e){var t,r,n,i=e.postSlug,o=e.space,a=e.disableRightSidebar,s=e.currentCommunityMember,l=e.pinnedPosts;if(e.isHomePage)return!1;if(a||!((null==o||null==(t=o.visible_tabs)?void 0:t.members)||(null==o||null==(r=o.visible_tabs)?void 0:r.past)||(null==o||null==(n=o.visible_tabs)?void 0:n.upcoming)||(null==l?void 0:l.length)>0))return!0;var c=o.is_private&&!o.is_space_member&&!(null==s?void 0:s.is_admin);return!(i&&"members"!==i&&(0,m.V5)(o))&&(!!c||o.hide_right_sidebar)},es=r(17617),el=r(45273),ec=function(){var e=(0,es.ef)(),t=(0,j.wh)().currentCommunityMember,r=(0,el.H)(),n=r.isHomePage,i=r.isSpaceShowPage,o=r.isMemberDirectoryPage,a=r.isMessagesPage;return!!e&&!!t&&(n||i||o||a)},eu=r(85924),ed=function(){var e=(0,eu.wC)().display_header;return{topBarStyles:void 0===e||e?"lg:h-[calc(100vh-64px)]":"",topBarStylesWithMasquerade:"lg:h-[calc(100vh-48px-64px)]"}},ef=function(e,t){var r=(0,F.T)().isReactFlowWorkflowsRoute,n=ed(),i=n.topBarStyles,o=n.topBarStylesWithMasquerade;return r?"":!e&&!t||e&&t?i:!e&&t?o:""},ep=Object.assign(function(e){var t,r,l,c,u,d,_=e.bodyClassNames,x=e.children,w=e.disableRightSidebar,O=e.disableScroll,S=void 0!==O&&O,k=e.disableSidebar,P=void 0!==k&&k,C=e.hideAppBar,N=e.shouldHideSidebarNestedNavBar,A=void 0!==N&&N,I=e.id,E=e.renderLeftSidebar,T=(0,j.wh)(),L=T.currentCommunityMember,D=T.currentCommunity,M=(0,b.P)().posts,R={id:I},X=(0,z._)(),Y=null==X||null==(l=X.data)?void 0:l.mobile_drawer_html,ee=(0,G.f)(),et=(0,g.L)().isElectron,er=(0,F.T)(),en=er.isSettingsRoute,ei=er.isReactFlowWorkflowsRoute,es=ec(),el=(0,p.vF)();!P&&Y&&(R["data-controller"]="mobile-sidebar"),(0,h.H)((0,s.A)("is-standard-layout-v2 react-standard-layout bg-secondary is-standard-layout-v2--v3-enabled",void 0===_?"":_,{"is-standard-layout-v2--v3-enabled--hidden-nested-links":A,"safari-dvh-unsupported":el}));var eu=(0,y.t)(),ed=(0,i.$B)("/c/:spaceSlug/:postSlug"),ep=null==ed||null==(c=ed.params)?void 0:c.postSlug,em=null==(u=(0,i.$B)("/home"))?void 0:u.isExact,eb=null==(d=(0,i.$B)("/feed"))?void 0:d.isExact,eh=(0,v.U)(),ey=(0,j.nT)().helpers.findBy({slug:eh})||{},ev=(0,U.Z1)(D)&&!(0,Z.UU)(eu),eg=(0,U.Aq)(D),e_=ea({disableRightSidebar:void 0!==w&&w,postSlug:ep,space:ey,pinnedPosts:M,isHomePage:em||eb,currentCommunityMember:L}),ex=(0,m.Ug)(ey)||(0,m.Hn)(ey)||eg,ej=ef(eg&&ev,ee);return(0,n.jsxs)(W.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},R),r=r={children:[(0,n.jsx)("div",{"data-testid":"mobile-drawer-wrapper",children:!P&&(0,n.jsx)(V.A,{})}),(0,n.jsxs)("div",{className:(0,s.A)("bg-secondary flex w-full flex-col",ej,{"h-screen":!S,"h-full":S,"!h-[calc(100vh-105px)]":et&&en}),"data-testid":"standard-layout-v2",children:[(0,n.jsx)(eo,{}),(0,n.jsx)(B,{}),(0,n.jsxs)(H.y,{disableSidebar:P,children:[!(void 0!==C&&C)&&(0,n.jsx)(q.x,{}),(0,n.jsxs)($.m,{disableSidebar:P,disableLayoutRightSidebar:e_,hasSettingsSidebar:!ei&&en&&!ev&&!eg,disableSidebarNestedBarLinks:A,children:[!P&&!ei&&(0,n.jsx)(K.H,{children:E?E():(0,n.jsx)(f.K,{})}),(0,n.jsx)(Q.v,{isBgSecondary:!ex,isBgPrimary:ex,children:x}),(0,n.jsx)("div",{className:"standard-layout-v2__railbar",children:(0,n.jsx)(J.n,{})}),(0,n.jsx)(o.X,{}),(0,n.jsx)("div",{id:"mobile-dropdown-container"}),es&&(0,n.jsx)(a.H,{})]})]})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{Header:function(e){var t=e.sticky,r=e.children;return(0,n.jsx)("div",{className:(0,s.A)("main__header",{"main__header--sticky":t}),children:r})},Breadcrumb:l.a,Content:c.V,Body:function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:"main",children:(0,n.jsx)("div",{className:(0,s.A)("main__wrapper",t),children:r})})},Right:function(e){var t=e.children,r=e.hidden;return void 0!==r&&r?null:(0,n.jsx)("aside",{"aria-label":(0,d.t)("right_sidebar"),className:"sidebar sidebar--right","data-testid":"sidebar-right",children:(0,n.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:t})})},CoverImage:u.y})},30244:function(e,t,r){"use strict";r.d(t,{W:()=>u});var n=r(85893),i=r(52804),o=r(41342),a=r(27732),s=r(3697);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e){var t,r,i=l({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e));return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={id:s.vH,"data-testid":"cover-image-container"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},u=function(e){var t=e.children,r=e.fullHeight,s=e.fullWidth,l=e.noPadding;return(0,o.wh)().isLoading?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.n,{}),(0,n.jsx)(c,{}),(0,n.jsx)(a.a.Content,{fullWidth:void 0!==s&&s,fullHeight:void 0===r||r,noPadding:void 0!==l&&l,children:t})]})}},61121:function(e,t,r){"use strict";r.d(t,{p:()=>a});var n=r(90225),i=r(15731),o=r(17617),a=function(){var e=(0,o.j)(),t=(0,i.I)(),r=(0,n.w)(),a=r.display_header,s=r.pages_app_page;return!e&&!t&&!(s&&!a)}},53347:function(e,t,r){"use strict";r.d(t,{u:()=>a});var n=r(85893),i=r(1168),o=r(98363),a=function(e){var t=e.name,r=e.src,a=e.size,s=void 0===a?"sm":a,l=e.variant,c=void 0===l?"rounded-square":l,u="10";return"xl"===s&&(u="24"),"lg"===s&&(u="16"),"md"===s&&(u="7"),(0,n.jsx)("div",{className:(0,i.A)("participant-avatar relative",{"participant-avatar--lg":"lg"===s,"participant-avatar--md":"md"===s,"participant-avatar--sm":"sm"===s,"participant-avatar--xl":"xl"===s,"participant-avatar--circle":"circle"===c,"participant-avatar--full":"full"===c,"participant-avatar--rounded-square":"rounded-square"===c}),children:(0,n.jsx)(o.s,{name:t,src:r,size:u})})}},9585:function(e,t,r){"use strict";r.d(t,{Z:()=>c});var n=r(85518);function i(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,l,"next",e)}function l(e){i(a,n,o,s,l,"throw",e)}s(void 0)})}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var c=function(){var e,t;function r(){if(!(this instanceof r))throw TypeError("Cannot call a class as a function")}return e=[{key:"getDevices",value:function(e){return o(function(){var t,i;return l(this,function(o){switch(o.label){case 0:if(!((null==(t=r.userMediaPromiseMap)?void 0:t.size)>0))return[3,7];o.label=1;case 1:if(o.trys.push([1,6,,7]),!e)return[3,3];return[4,r.userMediaPromiseMap.get(e)];case 2:return o.sent(),[3,5];case 3:return[4,Promise.all(r.userMediaPromiseMap.values())];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return o.sent(),console.warn("error waiting for media permissions"),[3,7];case 7:return[4,navigator.mediaDevices.enumerateDevices()];case 8:if(i=o.sent(),n.isSafari&&this.hasDeviceInUse(e))return[3,10];return[4,this.acquireDevicePermissions(i,e)];case 9:i=o.sent(),o.label=10;case 10:return e&&(i=i.filter(function(t){return t.kind===e})),[2,i]}})}).call(this)}},{key:"acquireDevicePermissions",value:function(e,t){return o(function(){var r,n,i;return l(this,function(o){switch(o.label){case 0:if(r=e,!(0===e.filter(function(e){return e.kind===t}).length||e.some(function(e){var r=""===e.label,n=!t||e.kind===t;return r&&n})))return[3,3];return n={video:"audioinput"!==t&&"audiooutput"!==t,audio:"videoinput"!==t&&{deviceId:{ideal:"default"}}},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:r=o.sent(),i.getTracks().forEach(function(e){e.stop()}),o.label=3;case 3:return[2,r]}})})()}},{key:"hasDeviceInUse",value:function(e){return e?r.userMediaPromiseMap.has(e):r.userMediaPromiseMap.size>0}}],t=[{key:"getInstance",value:function(){return this.instance||(this.instance=new r),this.instance}}],e&&a(r.prototype,e),t&&a(r,t),r}();s(c,"instance",void 0),s(c,"userMediaPromiseMap",new Map)},59951:function(e,t,r){"use strict";r.d(t,{B:()=>i});var n=r(37588),i=function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={roleName:e.roleName||n.VM.HLS_SPECTATOR,isSpeaking:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},9687:function(e,t,r){"use strict";r.d(t,{Lg:()=>K,hB:()=>x,yE:()=>J,Tq:()=>m,Zp:()=>p,nc:()=>D,Ak:()=>H,pB:()=>k,$f:()=>U,GK:()=>ec,HV:()=>q,wc:()=>C,kk:()=>N,RS:()=>O,RN:()=>L,Vb:()=>G,YR:()=>$,qr:()=>W,DI:()=>Y,tv:()=>et,y2:()=>Q,CV:()=>ea,Ux:()=>er});var n=r(16133),i=r(33405),o=Object.freeze({WEBSOCKET_DISCONNECTED:1003,ICE_CONNECTION_FAILED:4005,AUDIO_BLOCKED:3008}),a=function(){var e,t=(0,n.C1)();return(null==t?void 0:t.type)===i.a5.ERROR?null==(e=t.data)?void 0:e.code:null},s=r(67294),l=r(84326),c=r(60878),u=r(7447),d=function(e){return"".concat("live_streams.room.hms_errors.").concat(e)},f=function(){var e=(0,c.pm)().error,t=(0,u.I3)(u.Hj).addProviderError,r=a(),o=(0,n._U)(i.Yt),f=function(r){var n={1e3:(0,l.t)(d("1000_websocket_blocked")),1003:(0,l.t)(d("1003_websocket_disconnected")),2003:(0,l.t)(d("2003_endpoint_not_reachable")),3001:(0,l.t)(d("3001_cannot_access_device")),3002:(0,l.t)(d("3002_capture_device_not_available")),3003:(0,l.t)(d("3003_capture_device_is_in_use")),4005:(0,l.t)(d("4005_ice_connection_failed"))}[r];t("".concat(r,": ").concat(n)),n&&e(n)};(0,s.useEffect)(function(){r&&f(r)},[r]),(0,s.useEffect)(function(){o.error&&e((0,l.t)("live_streams.room.hls_error"))},[o.error])},p=function(){var e,t,r=(0,n._U)(i.Yt),o=(0,n._U)(i.Go);return{hlsUrl:null==(e=r.variants[0])?void 0:e.url,isHlsRunning:!!(null==r?void 0:r.running),isRecording:!!(null==o||null==(t=o.hls)?void 0:t.running)}},m=function(){var e,t=(0,n._U)(i.UP);return{localPeerDownlinkQuality:null==(e=(0,n._U)((0,i.hE)(null==t?void 0:t.id)))?void 0:e.downlinkQuality}},b=Object.freeze({UPDATE_ROOM:"update-room"}),h=Object.freeze({STOP_SCREENSHARE:"stop-screenshare"}),y="system",v=r(92479),g=function(){var e=(0,n._U)(i.I3),t=(0,n._U)((0,i.cH)(e)),r=(0,n.cw)();return{metadata:t,setMetadata:function(e){r.changeMetadata(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t,e))}}},_=r(3714),x=function(e){var t=e.onRoomUpdate,r=e.onEndStream,o=(0,n.C1)(),a=g().setMetadata,l=(0,_._)(),c=l.toggleMicrophone,u=l.isMicrophoneEnabled,d=(0,v.p)(),f=d.toggleCamera,p=d.isCameraEnabled,m=(0,s.useCallback)(function(e){var t=e.track;!1===e.enabled&&((null==t?void 0:t.type)==="audio"&&u&&c(),(null==t?void 0:t.type)==="video"&&p&&f())},[u,p,c,f]);(0,s.useEffect)(function(){if(o){var e=o.type,n=o.data,s=n||{},l=s.type,c=s.message,u=s.reason;switch(e){case i.a5.NEW_MESSAGE:if(l===y&&c===b.UPDATE_ROOM)null==t||t();else if("metadata"===l){var d=c?JSON.parse(c):null;d&&(void 0===d?"undefined":d&&"undefined"!=typeof Symbol&&d.constructor===Symbol?"symbol":typeof d)=="object"&&a(d)}return;case i.a5.ROOM_ENDED:null==r||r(u);return;case i.a5.CHANGE_MULTI_TRACK_STATE_REQUEST:case i.a5.CHANGE_TRACK_STATE_REQUEST:m(n);break;default:return}}},[o,m])},j=r(59951),w=r(37588),O=function(){var e=(0,n._U)(i.BK),t=(0,s.useMemo)(function(){return e.map(j.B)},[e]),r=(0,s.useMemo)(function(){return t.filter(function(e){return e.roleName===w.VM.HOST})},[t]),o=(0,n._U)(i.g),a=(0,s.useMemo)(function(){return o.map(j.B)},[o]),l=(0,s.useMemo)(function(){return t.filter(function(e){return e.roleName===w.VM.HLS_SPECTATOR})},[t]),c=(0,s.useMemo)(function(){return t.filter(function(e){return e.roleName===w.VM.MODERATOR})},[t]);return{peers:t,peersWithHandRaised:a,hosts:r,spectators:l,moderators:c}},S=function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null==t?void 0:t.find(function(e){return e.id===n.id}))||(null==t?void 0:t[0])||null}else r.current=(null==t?void 0:t[0])||null},k=function(){var e=O(),t=e.peers,r=e.hosts,o=e.spectators,a=(0,n._U)(i.vX),l=(0,s.useMemo)(function(){return a?(0,j.B)(a):null},[a]),c=(0,s.useRef)(null);S(l,r,c);var u=(0,n._U)(i.Dl),d=(0,s.useCallback)(function(e){return!!u&&Object.values(u).some(function(t){return t.peerID===e})},[u]);return{peers:t,hosts:r,spectators:o,dominantSpeaker:l,selectedSpeaker:c.current,isSpeaking:d}},P=r(87116),C=function(e){var t=null==e?void 0:e.videoTrack,r=(0,P.R)({trackId:t}).videoRef,o=(0,n._U)((0,i.GP)(t));return{videoRef:r,hasVideo:!!(null==o?void 0:o.enabled)}},N=function(){return{recorderToken:null}},A=r(65001);function I(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function E(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){I(o,n,i,a,s,"next",e)}function s(e){I(o,n,i,a,s,"throw",e)}a(void 0)})}}function T(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var L=function(e){var t=e.token,r=e.onJoinError,o=e.participantData,a=e.isStreamEnded,u=(0,A.g)(o),d=(0,c.pm)().error,p=(0,n.cw)(),m=(0,n._U)(i.UP),b=(0,n._U)(i.ln),h=(0,n._U)(i.K0),y=!!t&&!b,v=(null==m?void 0:m.roleName)===w.VM.HOST,g=(null==m?void 0:m.roleName)===w.VM.HLS_SPECTATOR,_=(0,n._U)(i.ud),x=null==m?void 0:m.roleName;return f(),(0,s.useEffect)(function(){E(function(){return T(this,function(e){switch(e.label){case 0:if(!(t&&!b&&!a))return[3,2];return[4,E(function(){var e,n;return T(this,function(i){var o,a,s,c;switch(i.label){case 0:if(i.trys.push([0,4,,5]),!h)return[3,2];return[4,p.leave()];case 1:i.sent(),i.label=2;case 2:return[4,p.join((o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),a=a={authToken:t||""},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o))];case 3:return i.sent(),[3,5];case 4:return s=e=i.sent(),(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?!!c[Symbol.hasInstance](s):s instanceof c)&&(console.error(n="Could not join room: ".concat(e.message)),d((0,l.t)("live_streams.room.join_error")),r&&r(n)),[3,5];case 5:return[2]}})})()];case 1:e.sent(),e.label=2;case 2:return[2]}})})()},[t,b,a]),{isConnected:b,isJoining:y,isHost:v,isHlsSpectator:g,isSomeoneScreenSharing:_,role:x}},D=function(){var e=(0,n._U)(i.pk),t=(0,s.useMemo)(function(){return e?(0,j.B)(e):void 0},[e]),r=(0,n._U)((0,i.K6)(null==t?void 0:t.id));return{peer:t,videoRef:(0,P.R)({trackId:null==r?void 0:r.id}).videoRef,hasVideo:!!(null==r?void 0:r.enabled),shouldWarnInfinityMirror:(null==r?void 0:r.displaySurface)==="monitor"}},M=r(88400),R=r(72727),B=r(52770);function F(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function z(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,c.pm)().error,r=(0,n.cw)(),o=(0,n._U)(i.VP),a=(0,n._U)(i.ud),s=(0,R.L)().isElectron,u=(0,M.j)({type:"moderator",onEvent:function(e){e===h.STOP_SCREENSHARE&&o&&r.setScreenShareEnabled(!1)}}).sendEvent;return{isScreenSharingEnabled:o,isSomeoneScreenSharing:a,toggleScreenSharing:function(){var n;return(n=function(){var n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!o&&a&&!e)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),!o&&a&&u(h.STOP_SCREENSHARE),[4,r.setScreenShareEnabled(!o,{systemAudio:"include"})];case 2:return i.sent(),[3,4];case 3:if(n=i.sent(),s)return t((0,l.t)("live_streams.room.electron_screen_sharing_browser_error")),[2];if(z(n,Error)&&"SystemDeniedPermission"===n.name)return t((0,l.t)("live_streams.room.screen_sharing_os_error")),[2];return t((0,l.t)("live_streams.room.screen_sharing_browser_error")),console.error(n),z(n,Error)&&(0,B.d)(n),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){F(o,r,i,a,s,"next",e)}function s(e){F(o,r,i,a,s,"throw",e)}a(void 0)})})()}}};function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var G=function(){var e,t=(e=(0,s.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return Z(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1],a=(0,n.C1)();(0,s.useEffect)(function(){if(a)switch(a.type){case i.a5.RECONNECTING:o(!0);break;case i.a5.RECONNECTED:o(!1)}},[a]);var l=m().localPeerDownlinkQuality;return!!l&&l>=0&&l<=1||r},q=function(){var e=(0,n.cw)();return function(){return e.sendBroadcastMessage(b.UPDATE_ROOM,y)}},V=r(41506),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.pageSize,o=O().peersWithHandRaised,a=(0,n._U)(i.Dl),l=(0,s.useMemo)(function(){return Object.values(a).map(function(e){return e.peerID})},[a]),c=(0,s.useMemo)(function(){return o.map(function(e){return e.id})},[o]);return{orderedPeers:(0,V.$)({peers:e,speakingIds:l,handRaisedIds:c,pageSize:void 0===r?8:r})}},W=function(){var e=(0,n.cw)();return function(){return e.leave()}},Q=function(){var e=(0,n.cw)(),t=(0,n._U)(i.lj),r=null==t?void 0:t.requestedBy;return{hasRoleChangeRequest:!!t,requestedByPeer:r?(0,j.B)(r):null,requestRoleChange:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.changeRoleOfPeer(t,r,n)},acceptRoleChange:function(){return t&&e.acceptChangeRole(t)},rejectRoleChange:function(){return t&&e.rejectChangeRole(t)}}},J=function(e){var t;return{peerDownlinkQuality:null==(t=(0,n._U)((0,i.hE)(null==e?void 0:e.id)))?void 0:t.downlinkQuality}},K=function(e){var t=(0,n._U)((0,i.xn)(null==e?void 0:e.id)),r=(0,n._U)((0,i.YC)(null==e?void 0:e.id)),o=(0,n.cw)();return{isMicrophoneEnabled:t,isCameraEnabled:r,muteMicrophone:(0,s.useCallback)(function(){return(null==e?void 0:e.audioTrack)&&o.setRemoteTrackEnabled(e.audioTrack,!1)},[o,null==e?void 0:e.audioTrack]),disableCamera:(0,s.useCallback)(function(){return(null==e?void 0:e.videoTrack)&&o.setRemoteTrackEnabled(e.videoTrack,!1)},[o,null==e?void 0:e.videoTrack])}},$=function(e){return{externalPeerId:e}};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(){var e,t=(e=(0,s.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return X(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1],a=(0,n.C1)(i.a5.ROLE_UPDATED),l=null==a?void 0:a.data;return(0,s.useEffect)(function(){a&&l&&l.isLocal&&l.roleName===w.VM.MODERATOR&&o(!0)},[a]),{roleChangedToModerator:r,hideModeratorNotification:function(){return o(!1)}}};function ee(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var et=function(){var e=a(),t=(0,n.cw)();return{isAudioBlocked:e===o.AUDIO_BLOCKED,unblockAudio:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,t.unblockAudio()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ee(o,n,i,a,s,"next",e)}function s(e){ee(o,n,i,a,s,"throw",e)}a(void 0)})})()}}},er=function(){var e=(0,n.cw)(),t=(0,n._U)(i.UP);return{muteAllPeersMicrophone:function(){e.setRemoteTracksEnabled({enabled:!1,roles:["host"],type:"audio"})},areAllPeersMuted:Object.values((0,n._U)(i.zK)).filter(function(e){return e.peerId!==(null==t?void 0:t.id)&&"audio"===e.type}).every(function(e){return!e.enabled})}};function en(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function ei(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){en(o,n,i,a,s,"next",e)}function s(e){en(o,n,i,a,s,"throw",e)}a(void 0)})}}function eo(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ea=function(e){var t=(0,n._U)(i.I3),r=e||t,o=(0,n.cw)(),a=(0,n._U)((0,i.Ag)(r)),l=(0,s.useCallback)(function(){return ei(function(){return eo(this,function(t){switch(t.label){case 0:if(e)return[3,2];return[4,o.raiseLocalPeerHand()];case 1:return t.sent(),[3,4];case 2:return[4,o.raiseRemotePeerHand(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[o,e]),c=(0,s.useCallback)(function(){return ei(function(){return eo(this,function(t){switch(t.label){case 0:if(e)return[3,2];return[4,o.lowerLocalPeerHand()];case 1:return t.sent(),[3,4];case 2:return[4,o.lowerRemotePeerHand(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[o,e]),u=(0,s.useCallback)(function(){return ei(function(){return eo(this,function(e){switch(e.label){case 0:if(!a)return[3,2];return[4,c()];case 1:return e.sent(),[3,4];case 2:return[4,l()];case 3:e.sent(),e.label=4;case 4:return[2]}})})()},[a,c,l]);return{isHandRaised:a,raiseHand:l,lowerHand:c,toggleHand:u}},es=r(53939),el=r(9697),ec=function(){var e=(0,es.Z)({role:w.VM.HLS_SPECTATOR,limit:el.i}),t=e.peers,r=e.loadPeers,n=e.loadMorePeers,i=e.hasNext,o=e.total;return{peers:(0,s.useMemo)(function(){return t.map(j.B)},[t]),loadPeers:r,loadMorePeers:n,hasNext:i,total:o}}},92479:function(e,t,r){"use strict";r.d(t,{p:()=>u});var n=r(67294),i=r(16133),o=r(33405),a=r(7447);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){var e=c((0,n.useState)(!1),2),t=e[0],r=e[1],s=c((0,n.useState)(null),2),u=s[0],d=s[1],f=(0,i.cw)(),p=(0,i._U)(o.um),m=(0,a.Ft)().setCameraEnabled,b=(0,i._U)(o.UP),h=!!(null==b?void 0:b.videoTrack),y=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,4,5]),!h)return[3,2];return r(!0),[4,f.setLocalVideoEnabled(!p)];case 1:n.sent(),m(!p),d(null),n.label=2;case 2:return[3,5];case 3:var i,o;return d((i=e=n.sent(),t=(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](i):i instanceof o)?e.message:"")),console.error("Could not toggle camera: ",t),[3,5];case 4:return r(!1),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},[p,h,f,m,d]);return{isCameraEnabled:p,isCameraPending:!h||t,cameraError:u,toggleCamera:y}}},65001:function(e,t,r){"use strict";r.d(t,{g:()=>a});var n=r(67294),i=r(7447),o=r(41818),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,i.I3)(i.vi),a=(0,o.N)(),s=!!(null==a?void 0:a.mute_on_join)&&!(null==a?void 0:a.can_manage);return(0,n.useMemo)(function(){var n,i;return{userName:null!=(n=null==e?void 0:e.name)?n:"",authToken:t,metaData:JSON.stringify(e||{}),rememberDeviceSelection:!1,captureNetworkQualityInPreview:!0,settings:{isAudioMuted:s||!r.microphoneEnabled,isVideoMuted:!r.cameraEnabled,audioInputDeviceId:r.audioInputId,audioOutputDeviceId:null!=(i=r.audioOutputId)?i:void 0,videoDeviceId:r.videoInputId,speakerAutoSelectionBlacklist:"all"}}},[e,t,s,r])}},3714:function(e,t,r){"use strict";r.d(t,{_:()=>u});var n=r(67294),i=r(16133),o=r(33405),a=r(7447);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){var e=c((0,n.useState)(!1),2),t=e[0],r=e[1],s=(0,i.cw)(),u=(0,i._U)(o.uX),d=(0,a.Ft)().setMicrophoneEnabled,f=(0,i._U)(o.UP),p=!!(null==f?void 0:f.audioTrack),m=c((0,n.useState)(null),2),b=m[0],h=m[1],y=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,4,5]),!p)return[3,2];return r(!0),[4,s.setLocalAudioEnabled(!u)];case 1:n.sent(),d(!u),n.label=2;case 2:return h(null),[3,5];case 3:var i,o;return h((i=e=n.sent(),t=(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](i):i instanceof o)?e.message:"")),console.error("Could not toggle microphone: ",t),[3,5];case 4:return r(!1),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},[u,p,s,d]);return{isMicrophoneEnabled:u,isMicrophonePending:!p||t,toggleMicrophone:y,microphoneError:b}}},71458:function(e,t,r){"use strict";r.d(t,{Ji:()=>eh,Qc:()=>$,Nc:()=>eC,p$:()=>er,u9:()=>H,C:()=>eu,nH:()=>L,S2:()=>l.S,h5:()=>ec,NW:()=>m.N,_K:()=>W,u7:()=>Q,tv:()=>T.t,Qs:()=>C,rs:()=>S,eR:()=>K.e,F7:()=>q,e4:()=>ek,fX:()=>ef,H9:()=>E,aL:()=>e_,Xc:()=>z,aV:()=>y.a,B0:()=>h,wA:()=>A,F5:()=>ee,ar:()=>X,c9:()=>p,sv:()=>et,bF:()=>ex,_F:()=>ei,C3:()=>J.C});var n,i,o,a,s,l=r(12890);r(60138);var c=r(67294),u=r(84326),d=r(24094),f=r(60878),p=function(){var e=(0,d.NA)(),t=e.data.room,r=e.status,n=r.isRoomError,i=r.apiError,o=(0,f.pm)().error;(0,c.useEffect)(function(){(null==i?void 0:i.status)===401&&(o((0,u.t)("live_streams.room.authorization_error")),window.location.href="/"),(null==i?void 0:i.status)!==401&&n&&!t&&(window.location.href="/")},[t,n,i,o])},m=r(41818),b=r(37588),h=function(){var e=(0,d.cy)().room;return{roomType:(null==e?void 0:e.room_type)||b.H0.STREAM,isLiveRoom:(0,b.$e)(e),isLiveStream:(0,b.ee)(e)}},y=r(61357),v=r(48298),g=r(7447),_=r(9687),x=r(37102),j=r(63235);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(e){var t=(0,j.M)({hms:_.GK,livekit:x.KI})(),r=t.peers,n=t.loadPeers,i=t.loadMorePeers,o=t.hasNext,a=t.total,s=(0,g.I3)(g.zD),l=s.setLoadFn,u=s.load,f=s.loadFn,p=s.setHasNext,m=s.setLoadMoreFn,b=s.setTotal,h=s.setData,y=s.data,w=s.shouldPoll,S=o(),k=(0,c.useMemo)(function(){return O(e||[]).concat(O(y||[]))},[e,y]),P=(0,d.y4)().refetchParticipants,C=null==k?void 0:k.reduce(function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName)},""),N=(0,v.c)(C,1e3);(0,c.useEffect)(function(){(null==N?void 0:N.length)&&P()},[N,P]),(0,c.useEffect)(function(){l(n),m(i)},[]),(0,c.useEffect)(function(){b(a)},[b,a]);var A=null==r?void 0:r.reduce(function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName,"-")},"");(0,c.useEffect)(function(){p(S)},[p,S]),(0,c.useEffect)(function(){h(r)},[A]);var I=!!f;(0,c.useEffect)(function(){if(I&&(u(),w)){var e=setInterval(function(){u()},3e3);return function(){clearInterval(e)}}},[u,I,w])},k=r(55842);function P(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var C=function(){var e=(0,c.useRef)(!1),t=(0,d.y4)().goLiveAsync,r=(0,k.JC)();return function(){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(e.current)return[2];n.label=1;case 1:return n.trys.push([1,4,5,6]),e.current=!0,[4,t()];case 2:return n.sent(),[4,r()];case 3:return n.sent(),[3,6];case 4:return console.error("Error going live",n.sent()),[3,6];case 5:return e.current=!1,[7];case 6:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){P(o,r,i,a,s,"next",e)}function s(e){P(o,r,i,a,s,"throw",e)}a(void 0)})})()}};function N(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var A=function(){var e=(0,d.y4)().endStreamDelayedAsync,t=(0,l.S)(),r=(0,k.JC)();return function(){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),[4,r()];case 2:return n.sent(),[4,t()];case 3:return n.sent(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){N(o,r,i,a,s,"next",e)}function s(e){N(o,r,i,a,s,"throw",e)}a(void 0)})})()}};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,i=(t=(0,c.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=function(){a(!1),clearTimeout(r),r=setTimeout(function(){return a(!0)},n)},l=function(){document.removeEventListener("mousemove",s),clearTimeout(r)};return(0,c.useEffect)(function(){return e?(document.addEventListener("mousemove",s),a(!0)):(l(),a(!1)),function(){l()}},[e]),{isUiHidden:o}},T=r(21161),L=function(e,t){var r=(0,l.S)(),n=(0,c.useCallback)(function(){r()},[r]);(0,c.useEffect)(function(){if(!(!e||!t||(0,b.a_)(t)))return window.addEventListener("beforeunload",n),window.addEventListener("unload",n),function(){window.removeEventListener("beforeunload",n),window.removeEventListener("unload",n)}},[e,null==t?void 0:t.id,n]),(0,c.useEffect)(function(){if(!(!t||(0,b.a_)(t)))return function(){t&&!(0,b.a_)(t)&&n()}},[null==t?void 0:t.id])},D=r(85518),M=r(70442),R=r(41342),B=r(13532),F=r(51922),z=function(){var e=(0,F.R)().isLoading,t=(0,R.wh)(),r=t.currentCommunityMember,n=t.currentUser,i=t.isLoading,o=(0,M.k6)(),a=(0,m.N)(),s=e||i;(0,c.useEffect)(function(){!s&&(a&&(0,b.L6)(a)&&!r?o.push(B.dE.publicRoom({roomSlug:a.slug})):n?a&&D.isMobile&&window.location.pathname!==B.dE.mobileRoom({roomSlug:a.slug})&&o.push(B.dE.mobileRoom({roomSlug:a.slug})):window.location.href=B.$T.signIn({params:{post_login_redirect:window.location.href}}))},[r,n,o,s,a])},U=r(88767),Z=r(51630);function G(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var q=function(e,t,r){var n=(0,f.pm)(),i=n.success,o=n.error,a=(0,k.Kr)().requestRoleChange,s=$().refetchCohosts;return(0,U.useMutation)(function(){return Z.Qk.addCohosts({roomId:t,formData:{cohosts_community_member_ids:[r]}})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,a(e,b.VM.HOST)];case 1:return t.sent(),s(),i((0,u.t)("live_streams.room.participant_invited_to_cohost_message")),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){G(o,n,i,a,s,"next",e)}function s(e){G(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return o((0,u.t)("live_streams.room.participant_invited_to_cohost_error"))}}).mutate};function V(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var H=function(e,t,r){var n=(0,f.pm)(),i=n.success,o=n.error,a=(0,k.Kr)().requestRoleChange,s=(0,d.y4)().refetchParticipants,l=$().refetchCohosts;return(0,U.useMutation)(function(){return Z.Qk.changeRole({roomId:t,participantId:r,role:b.VM.HLS_SPECTATOR})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,a(e,b.VM.HLS_SPECTATOR,!0)];case 1:return t.sent(),s(),l(),i((0,u.t)("live_streams.room.participant_removed_as_cohost_message"),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){V(o,n,i,a,s,"next",e)}function s(e){V(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return o((0,u.t)("live_streams.room.participant_removed_as_cohost_error"))}}).mutate},W=function(e){var t=(0,m.N)(),r=(0,k.Kr)().requestRoleChange,n=(0,f.pm)(),i=n.success,o=n.error,a=(0,J.C)().hosts,s=(0,d.cy)().participants,l=(0,d.y4)().refetchParticipants,c=function(){e&&e(),i((0,u.t)("live_streams.room.cohost_removed_successfully"),{duration:"short",shouldUseProgress:!1})},p=function(){return o((0,u.t)("live_streams.room.could_not_remove_cohost_error"))},h=(0,U.useMutation)(function(e){return Z.Qk.removeCohost({id:e,roomId:null==t?void 0:t.id})},{onSuccess:c,onError:p}),y=function(e){if(!a)return null;var t=a.find(function(t){return Number(t.customerUserId)===e});return null==t?void 0:t.id},v=(0,U.useMutation)(function(e){return Z.Qk.changeRole({roomId:null==t?void 0:t.id,participantId:e,role:b.VM.HLS_SPECTATOR})},{onSuccess:function(e){var t=y(null==e?void 0:e.id);t&&r(t,b.VM.HLS_SPECTATOR,!0),l(),c()},onError:p}),g=function(e){if(!a)return!1;var t=a.find(function(t){var r;return(null==s||null==(r=s[Number(t.customerUserId)||0])?void 0:r.community_member_id)===e});return null==t?void 0:t.customerUserId};return function(e){var t=g(e);t?v.mutate(t):h.mutate(e)}},Q=function(){var e=C(),t=(0,d.NA)(),r=t.data,n=r.room,i=r.currentParticipant,o=t.status,a=o.isStreamEnded,s=o.isJoining,l=(0,b.SS)(n),u=(0,b.Zo)(n),f=(0,b.HN)(n),p=(0,b.$e)(n);(0,c.useEffect)(function(){i&&l&&!s&&!a&&u&&f&&p&&e()},[i,l,s,a,u,f,p])},J=r(28320),K=r(87904),$=function(){var e=(0,m.N)(),t=!!(0,d.cy)().currentParticipant&&(0,b.HN)(e),r=(0,U.useQuery)(B.av.liveStreams.getCohosts({roomId:null==e?void 0:e.id}),{enabled:t}),n=r.data,i=r.isLoading,o=r.refetch;return{cohosts:(null==n?void 0:n.records)||[],isLoadingCohosts:i,refetchCohosts:function(){t&&o()}}},X=function(e){var t=e.enabled,r=new URLSearchParams((0,M.TH)().search).get("recording_key"),n=(0,d.NA)(),i=n.data,o=i.room,a=i.recorder,s=n.actions.createRecorder;(0,c.useEffect)(function(){t&&o&&r&&s&&!a&&s(r)},[t,o,r,a,s])};function Y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ee=function(){var e=(0,d.NA)(),t=e.actions,r=t.setViewTypeOverride,n=t.updateRoomAsync,i=e.data,o=i.room,a=i.viewTypeOverride,s=h().isLiveStream,l=a||(null==o?void 0:o.view_type),c=(0,k.JC)(),u=function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(l===e)return[2];if(!(s||(0,b.HN)(o)))return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({view_type:e})];case 2:return t.sent(),c(),[3,4];case 3:return console.error(t.sent().message),[3,4];case 4:return[3,6];case 5:r(e),t.label=6;case 6:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){Y(o,n,i,a,s,"next",e)}function s(e){Y(o,n,i,a,s,"throw",e)}a(void 0)})})()};return{isSpeakerTopView:l===b.Bk.SPEAKER,isSpeakerSideView:l===b.Bk.SPEAKER_VARIANT,isSpeakerView:l===b.Bk.SPEAKER||l===b.Bk.SPEAKER_VARIANT,isGridView:l===b.Bk.GRID,setSpeakerTopView:function(){return u(b.Bk.SPEAKER)},setSpeakerSideView:function(){return u(b.Bk.SPEAKER_VARIANT)},setGridView:function(){return u(b.Bk.GRID)}}},et=function(){var e=(0,k.oZ)();return{isHandRaised:e.isHandRaised,raiseHand:e.raiseHand,lowerHand:e.lowerHand,toggleHand:e.toggleHand}},er=function(e){var t=(0,k.oZ)(e);return{isHandRaised:t.isHandRaised,raiseHand:t.raiseHand,lowerHand:t.lowerHand,toggleHand:t.toggleHand}};function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ei=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=(t=(0,c.useState)(r),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return en(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=(o-1)*n,l=null==e?void 0:e.slice(s,s+n),u=Math.ceil((null==e?void 0:e.length)/n),d=1===o,f=o===u;return(0,c.useEffect)(function(){o>u&&a(Math.max(u,1))},[o,u]),{currentPagePeers:l,page:o,totalPages:u,next:function(){return a(Math.min(o+1,u))},prev:function(){return a(Math.max(o-1,1))},goToPage:function(e){return a(Math.max(1,Math.min(e,u)))},isFirstPage:d,isLastPage:f}},eo=r(80926);function ea(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function es(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ea(o,n,i,a,s,"next",e)}function s(e){ea(o,n,i,a,s,"throw",e)}a(void 0)})}}function el(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ec=function(e){var t=(0,R.wh)().currentCommunityMember,r=!!(null==t?void 0:t.is_admin),n=(0,m.N)(),i=h().roomType,o=(0,eo.tm)({enabled:r}),a=o.streamingHoursAvailable,s=o.recordingHoursAvailable,l=o.isLoading,c=o.streamingTotalPlanHours,d=o.recordingTotalPlanHours,p=r&&!a,y=r&&!s&&(0,b.Gi)(n),v=p||y,g=!(0,b.HN)(n)&&v,_=(0,b.HN)(n)&&v,x=(0,f.pm)().success,j=function(){e(),x((0,u.t)("settings.billing.add_ons.changes_succeeded"))},w=(0,eo.Yq)(function(){return j()},{enabled:r}),O=w.purchaseAsync,S=w.unitSize,k=w.currentQuantity,P=(0,eo.$v)(function(){return j()},{enabled:r}),C=P.purchaseAsync,N=P.unitSize,A=P.currentQuantity;return{addonPurchaseNotAllowed:g,isLoadingUsage:l,onClickHandler:function(){return p?es(function(){return el(this,function(e){switch(e.label){case 0:if(!N)return[2];return[4,C(N)];case 1:return e.sent(),[2]}})})():y?es(function(){return el(this,function(e){switch(e.label){case 0:if(!S)return[2];return[4,O(S)];case 1:return e.sent(),[2]}})})():e()},liveButtonLabel:function(){return _?(0,u.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,u.t)("live_streams.pre_join.conference.room_button_label")},backstageButtonLabel:function(){return _?(0,u.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,u.t)("live_streams.pre_join.".concat(i,".enter_backstage_button_label"))},boxMessage:function(){return g?(0,u.t)("live_streams.pre_join.".concat((0,b.vX)(n),".non_host_upgrade_message")):p?(0,u.t)("live_streams.pre_join.streaming_limit_exceeded",{hours:c+Number(A||0)}):y?(0,u.t)("live_streams.pre_join.recording_limit_exceeded",{hours:d+Number(k||0)}):(0,b.kx)(n)?(0,u.t)("live_streams.pre_join.".concat((0,b.vX)(n),".host_capacity_reached_message")):""}}},eu=function(e,t,r){var n=(0,k.XN)(e).externalPeerId,i=(0,f.pm)(),o=i.success,a=i.error,s=(0,d.y4)().refetchParticipants;return(0,U.useMutation)(function(){return Z.Qk.removeParticipant({roomId:t,participantId:r,peerId:n})},{onSuccess:function(){s(),o((0,u.t)("live_streams.room.participant_removed_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return a((0,u.t)("live_streams.room.participant_removed_error"))}}).mutate};function ed(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ef=function(e,t,r,n){var i=(0,f.pm)(),o=i.success,a=i.error,s=(0,k.Kr)().requestRoleChange;return(0,U.useMutation)(function(){return Z.Qk.addModerator({roomId:t,formData:{moderator_community_member_id:r,participant_id:n}})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,s(e,b.VM.MODERATOR,!0)];case 1:return t.sent(),o((0,u.t)("live_streams.room.participant_invited_to_moderator_message")),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ed(o,n,i,a,s,"next",e)}function s(e){ed(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return a((0,u.t)("live_streams.room.participant_invited_to_moderator_error"))}}).mutate};function ep(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function em(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eb=Object.freeze((em(n={},b.H0.STREAM,b.VM.HLS_SPECTATOR),em(n,b.H0.CONFERENCE,b.VM.HOST),n)),eh=function(e,t,r){var n=(0,f.pm)(),i=n.success,o=n.error,a=(0,k.Kr)().requestRoleChange,s=eb[h().roomType]||b.VM.HLS_SPECTATOR;return(0,U.useMutation)(function(){return Z.Qk.changeRole({roomId:t,participantId:r,role:s})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,a(e,s,!0)];case 1:return t.sent(),i((0,u.t)("live_streams.room.participant_removed_as_moderator_message"),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ep(o,n,i,a,s,"next",e)}function s(e){ep(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return o((0,u.t)("live_streams.room.participant_removed_as_moderator_error"))}}).mutate},ey=r(12814),ev=r(97873),eg=r(11964),e_=function(){var e=(0,ev.B)().toggleCamera,t=(0,eg.K)().toggleMicrophone;(0,ey.Z)("shift+v",function(){e()}),(0,ey.Z)("shift+m",function(){t()})},ex=function(){var e=(0,d.cy)().currentParticipant,t=(0,g.if)(),r=t.displayChat,n=t.isSidebarOpen,i=t.isChatSelected;(0,c.useEffect)(function(){(0,b.Vq)(e)&&r()},[e,r]),(0,c.useLayoutEffect)(function(){if(n&&i){var e=document.getElementById("message-scroll-view");e&&(e.scrollTop=e.scrollHeight)}},[i,n])},ej=document,ew=document.documentElement,eO=(null==(i=ew.requestFullscreen)?void 0:i.bind(ew))||(null==(o=ew.webkitRequestFullscreen)?void 0:o.bind(ew)),eS=(null==(a=ej.exitFullscreen)?void 0:a.bind(ej))||(null==(s=ej.webkitExitFullscreen)?void 0:s.bind(ej));ew.requestFullscreen=eO,ej.exitFullscreen=eS;var ek=function(){var e=(0,g.if)().setIsFullscreen;(0,c.useEffect)(function(){var t=function(){return e(!!(ej.fullscreenElement||ej.webkitFullscreenElement))};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),function(){document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t)}},[e])},eP=r(93199),eC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refetchInterval,r=(0,R.wh)(),n=r.currentCommunity,i=r.isLoading,o=(0,M.UO)().roomSlug,a=(0,m.N)(),s=(0,U.useQuery)(["public-live-stream","guests",o,null==n?void 0:n.id],function(){return(0,eP.UT)(B.qi.rooms.guests.index({slug:o,params:{community_id:null==n?void 0:n.id}}))},{enabled:!!a&&(0,b.L6)(a)&&!i&&!!o,refetchInterval:(void 0===t?null:t)||!1}),l=s.data,c=s.isLoading;return{guests:l,count:(null==l?void 0:l.length)||0,isLoading:c}}},72496:function(e,t,r){"use strict";r.d(t,{aI:()=>o,bB:()=>s,mC:()=>a,tw:()=>l});var n=r(87949),i=r(37588),o=Object.freeze({PUBLISH_METADATA:"PUBLISH_METADATA",UPDATE_ROOM:"UPDATE_ROOM",MUTE_MICROPHONE:"MUTE_MICROPHONE",DISABLE_CAMERA:"DISABLE_CAMERA",LOWER_HAND:"LOWER_HAND",STOP_SCREENSHARE:"STOP_SCREENSHARE",REQUEST_ROLE_CHANGE:"REQUEST_ROLE_CHANGE"}),a=function(e,t,r,n){if(r&&t){var i=new TextEncoder().encode(JSON.stringify({type:e,data:n}));return t.publishData(i,{reliable:!0,destinationIdentities:[r]})}return Promise.resolve()},s=function(e){try{return JSON.parse(e.metadata||"{}")}catch(e){return console.error("Could not parse participant metadata: ",e.message),{}}},l=function(e){var t,r,o=s(e),a=o.role||i.VM.HLS_SPECTATOR,l=o.user_id,c=(null==(r=e.attributes)?void 0:r.isHandRaised)==="true";return{id:e.identity,name:e.name||e.identity,customerUserId:l,roleName:a,isHandRaised:c,isLocal:null!=(t=n.Ix)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t,auxiliaryTracks:[],isCameraEnabled:e.isCameraEnabled,isMicrophoneEnabled:e.isMicrophoneEnabled,isScreenShareEnabled:e.isScreenShareEnabled,isSpeaking:e.isSpeaking,metadata:e.metadata}}},37102:function(e,t,r){"use strict";r.d(t,{Bw:()=>O,Dq:()=>B,MU:()=>F,R3:()=>H,zU:()=>em,l8:()=>en,i4:()=>ea,AR:()=>ec,my:()=>Q,ww:()=>_,fL:()=>k,$x:()=>V,du:()=>eu,_x:()=>q,KI:()=>ev,jU:()=>J,yx:()=>ei,Mi:()=>et,Em:()=>d,Hg:()=>er,AE:()=>S,yK:()=>j,VH:()=>b});var n=r(67294),i=r(64061),o=r.n(i),a=r(11145),s=r(7093),l=r(87949);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(){var e=u((0,n.useState)(!1),2),t=e[0],r=e[1],i=u((0,n.useState)(null),2),c=i[0],d=i[1],f=(0,a.f)(),p=(0,s.v)(),m=function(e){try{var t=JSON.parse(e);d(t.hlsUrl)}catch(e){o().notify(Error("LivekitParseRoomMetadataError"),function(t){t.severity="error",t.context=window.location.href,t.addMetadata("error",{error:e})}),console.error("Failed to parse metadata:",e)}};return(0,n.useEffect)(function(){if(f)return r(f.isRecording),p.metadata&&m(p.metadata),f.on(l.TQ.RecordingStatusChanged,function(e){return r(e)}),f.on(l.TQ.RoomMetadataChanged,m),function(){f.off(l.TQ.RecordingStatusChanged,r),f.off(l.TQ.RoomMetadataChanged,m)}},[f,p]),{hlsUrl:c,isHlsRunning:!!c||t,isRecording:t}},f=r(2184),p=Object.freeze({excellent:5,good:3,poor:1,lost:0,unknown:5}),m=r(99801),b=function(){var e=(0,m.X)();return{localPeerDownlinkQuality:p[(0,s.i)({participant:e}).quality]}},h=r(72496),y=r(68347),v=r(5189),g=new TextDecoder,_=function(e){var t=e.onRoomUpdate,r=e.onEndStream,i=(0,a.f)(),o=(0,m.X)(),s=(0,v.Y)(),c=s.toggleMicrophone,u=s.isMicrophoneEnabled,d=(0,y.C)(),f=d.toggleCamera,p=d.isCameraEnabled,b=(0,n.useCallback)(function(e){try{var r,n=g.decode(e);switch((JSON.parse(n)||{}).type){case h.aI.UPDATE_ROOM:t&&t();break;case h.aI.MUTE_MICROPHONE:u&&c();break;case h.aI.DISABLE_CAMERA:p&&f();break;case h.aI.LOWER_HAND:o.setAttributes({isHandRaised:"false"});break;case h.aI.STOP_SCREENSHARE:o.setScreenShareEnabled(!1)}}catch(e){(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)&&console.error("Could not decode received data - ",e.message)}},[u,p]);(0,n.useEffect)(function(){var e=function(e){(e===l.W4.ROOM_DELETED||e===l.W4.PARTICIPANT_REMOVED)&&r&&r()};return i&&(i.on(l.TQ.DataReceived,b),i.on(l.TQ.Disconnected,e)),function(){i&&(i.off(l.TQ.DataReceived,b),i.off(l.TQ.Disconnected,e))}},[r,t,b,i])},x=r(37588),j=function(){var e=(0,s.K)().map(h.tw),t=(0,n.useMemo)(function(){return e.filter(function(e){return e.isHandRaised})},[e]),r=(0,n.useMemo)(function(){return e.filter(function(e){return e.roleName===x.VM.HOST})},[e]),i=(0,n.useMemo)(function(){return e.filter(function(e){return e.roleName===x.VM.HLS_SPECTATOR})},[e]),o=(0,n.useMemo)(function(){return e.filter(function(e){return e.roleName===x.VM.MODERATOR})},[e]);return{peers:e,peersWithHandRaised:t,hosts:r,spectators:i,moderators:o}},w=function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null==t?void 0:t.find(function(e){return e.id===n.id}))||(null==t?void 0:t[0])||null}else r.current=(null==t?void 0:t[0])||null},O=function(){var e=j(),t=e.peers,r=e.hosts,i=e.spectators,o=(0,n.useMemo)(function(){return(null==r?void 0:r.find(function(e){return e.isSpeaking}))||null},[r]),a=(0,n.useRef)(null);w(o,r,a);var s=(0,n.useCallback)(function(e){return!!(null==r?void 0:r.some(function(t){return t.id===e&&t.isSpeaking}))},[r]);return{peers:t,hosts:r,spectators:i,dominantSpeaker:o,selectedSpeaker:a.current,isSpeaking:s}},S=function(e){var t,r=null==(t=(0,s.T)([l.fQ.Source.Camera],null==e?void 0:e.id)[0])?void 0:t.publication,i=null==r?void 0:r.track,o=(0,n.useRef)(null),a=o.current,c=(null==r?void 0:r.isSubscribed)&&!(null==r?void 0:r.isMuted);return(0,n.useEffect)(function(){return a&&i&&(c?i.attach(a):i.detach(a)),function(){a&&i&&i.detach(a)}},[a,i,c]),{videoRef:o,hasVideo:c}},k=function(){var e=(0,a.f)(),t=new URLSearchParams(window.location.search).get("token");return(0,n.useEffect)(function(){e&&(console.log("START_RECORDING"),e.on(l.TQ.Disconnected,function(){return console.log("END_RECORDING")}))},[e]),{recorderToken:t}},P=r(84326),C=r(59178),N=r(41818),A=r(60878),I=r(7447);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){return"".concat("live_streams.room.livekit_errors.").concat(e)},D="reconnecting-toast",M=function(e){var t,r=e.hasDevicesAccess,i=e.onDisconnect,o=(t=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return E(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[0],c=o[1],u=(0,A.pm)(),d=u.error,f=u.success,p=u.remove,b=(0,a.f)(),h=(0,m.X)(),y=(0,I.I3)(I.Hj).addProviderError,v=(0,n.useCallback)(function(e,t){y(e),d(e,t)},[y,d]),g=(0,n.useCallback)(function(){r&&(h.lastCameraError?v(h.lastCameraError.message):h.lastMicrophoneError&&v(h.lastMicrophoneError.message))},[v,h,r]),_=(0,n.useCallback)(function(e){var t,r=(T(t={},l.W4.DUPLICATE_IDENTITY,(0,P.t)(L("duplicate_identity"))),T(t,l.W4.JOIN_FAILURE,(0,P.t)(L("join_failure"))),T(t,l.W4.SIGNAL_CLOSE,(0,P.t)(L("signal_close"))),T(t,l.W4.UNKNOWN_REASON,(0,P.t)(L("unknown_reason"))),t);e&&r[e]&&v(r[e]||"")},[v]),x=(0,n.useCallback)(function(e){e!==l.em.SignalReconnecting||s?e===l.em.Connected&&s?(c(!1),p(D),f((0,P.t)(L("reconnected")))):e===l.em.Disconnected&&s&&(c(!1),p(D),v((0,P.t)(L("disconnected"))),i&&i("Connection lost")):(c(!0),v((0,P.t)(L("reconnecting")),{id:D,shouldAutohide:!1}))},[v,p,f,s,i]),j=(0,n.useCallback)(function(e,t,r){e.kind===l.fQ.Kind.Audio&&console.warn("Livekit: Audio track unsubscribed:",r.identity)},[]);(0,n.useEffect)(function(){if(b)return b.on(l.TQ.ConnectionStateChanged,x),b.on(l.TQ.Disconnected,_),b.on(l.TQ.MediaDevicesError,g),b.on(l.TQ.TrackUnsubscribed,j),function(){b.off(l.TQ.ConnectionStateChanged,x),b.off(l.TQ.Disconnected,_),b.off(l.TQ.MediaDevicesError,g),b.off(l.TQ.TrackUnsubscribed,j)}},[b,x,_,g,j])};function R(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var B=function(e){var t,r=e.token,i=e.onJoinError,o=e.isStreamEnded,c=e.participantData,u=(0,N.N)(),d=null!=(t=null==u?void 0:u.provider_url)?t:"",p=(0,a.f)(),m=(0,s.K)(),b=(0,f.E)().metadata,h=(0,C.p)().error,y=(null==b?void 0:b.role)===x.VM.HOST,v=(null==b?void 0:b.role)===x.VM.HLS_SPECTATOR;M({hasDevicesAccess:!(null==c?void 0:c.isRecorder)&&y,onDisconnect:i}),(0,n.useEffect)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(!(r&&!o&&p.state===l.em.Disconnected))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p.connect(d,r,{autoSubscribe:!v})];case 2:return n.sent(),[3,4];case 3:var a,s;return a=e=n.sent(),(null!=(s=Error)&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?!!s[Symbol.hasInstance](a):a instanceof s)&&(console.error(t="Could not connect to room: ".concat(e.message)),h((0,P.t)("live_streams.room.join_error")),i&&i(t)),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){R(o,n,i,a,s,"next",e)}function s(e){R(o,n,i,a,s,"throw",e)}a(void 0)})})(),function(){p.state===l.em.Connected&&p.disconnect()}},[r,p,o]);var g=(0,n.useMemo)(function(){return m.some(function(e){return e.isScreenShareEnabled})},[m]);return{isConnected:p.state===l.em.Connected,isJoining:p.state===l.em.Connecting,isHost:y,isHlsSpectator:v,role:null==b?void 0:b.role,isSomeoneScreenSharing:g}},F=function(){var e,t=(0,s.t)([l.fQ.Source.ScreenShare],{onlySubscribed:!0}),r=null==(e=t[0])?void 0:e.publication,i=null==r?void 0:r.track,o=(0,n.useMemo)(function(){return t.length>0?(0,h.tw)(t[0].participant):void 0},[t]),a=(0,n.useRef)(null),c=a.current,u=!(null==r?void 0:r.isMuted);return(0,n.useEffect)(function(){return c&&i&&i.attach(c),function(){c&&i&&i.detach(c)}},[c,i]),{peer:o,videoRef:a,hasVideo:u,shouldWarnInfinityMirror:!1}},z=r(52770),U=r(72727);function Z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function G(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,A.pm)().error,r=(0,m.X)(),i=(0,s.K)(),o=(0,U.L)().isElectron,a=(0,n.useMemo)(function(){return i.find(function(e){return e.isScreenShareEnabled})},[i]),l=!!a,c=!!(null==r?void 0:r.isScreenShareEnabled);return{isScreenSharingEnabled:c,isSomeoneScreenSharing:l,toggleScreenSharing:function(){var n;return(n=function(){var n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!c&&l&&!e)return[2];i.label=1;case 1:return i.trys.push([1,5,,6]),[4,r.setScreenShareEnabled(!c,{audio:!0,systemAudio:"include"})];case 2:if(!(i.sent()&&a&&!a.isLocal))return[3,4];return[4,(0,h.mC)(h.aI.STOP_SCREENSHARE,r,a.identity)];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:if(n=i.sent(),o)return t((0,P.t)("live_streams.room.electron_screen_sharing_browser_error")),[2];if(G(n,Error)&&"SystemDeniedPermission"===n.name)return t((0,P.t)("live_streams.room.screen_sharing_os_error")),[2];return t((0,P.t)("live_streams.room.screen_sharing_browser_error")),console.error(n),G(n,Error)&&(0,z.d)(n),[3,6];case 6:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){Z(o,r,i,a,s,"next",e)}function s(e){Z(o,r,i,a,s,"throw",e)}a(void 0)})})()}}},V=function(){var e=(0,m.X)();return function(){if(!e)return Promise.reject("localParticipant is not present");var t=new TextEncoder,r=JSON.stringify({type:h.aI.UPDATE_ROOM});return e.publishData(t.encode(r),{reliable:!0})}},H=function(){return(0,a.f)().state===l.em.Reconnecting},W=r(41506),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.pageSize,i=j().peersWithHandRaised,o=(0,s.O)(),a=(0,n.useMemo)(function(){return o.map(function(e){return e.identity})},[o]),l=(0,n.useMemo)(function(){return i.map(function(e){return e.id})},[i]);return{orderedPeers:(0,W.$)({peers:e,speakingIds:a,handRaisedIds:l,pageSize:void 0===r?8:r})}},J=function(){var e=(0,a.f)();return function(){return e.disconnect()}};function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var X=["host"],Y=new TextDecoder,ee=function(e){var t=JSON.parse(Y.decode(e))||{},r=t.type,n=t.data;return n&&r===h.aI.REQUEST_ROLE_CHANGE?n:null},et=function(){var e,t=(0,a.f)(),r=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return K(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],c=(0,s.C)().localParticipant,u=(0,n.useCallback)(function(e){try{var t=ee(e);t&&X.includes(t.role)&&t.participantId===(null==c?void 0:c.identity)&&o(t)}catch(e){console.error("Error decoding role change request",e)}},[null==c?void 0:c.identity]);(0,n.useEffect)(function(){return t&&t.on(l.TQ.DataReceived,u),function(){t&&t.off(l.TQ.DataReceived,u)}},[t,u]);var d=(null==i?void 0:i.requestedBy)||null;return{hasRoleChangeRequest:!!i,requestedByPeer:d,requestRoleChange:function(e,t,r){var n;return(n=function(){var n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){return r||!X.includes(t)?[2,Promise.resolve()]:(n={participantId:e,role:t,requestedBy:(0,h.tw)(c)},[2,(0,h.mC)(h.aI.REQUEST_ROLE_CHANGE,c,e,n)])})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){$(o,r,i,a,s,"next",e)}function s(e){$(o,r,i,a,s,"throw",e)}a(void 0)})})()},acceptRoleChange:function(){return o(null),Promise.resolve()},rejectRoleChange:function(){o(null)}}},er=function(e){var t=(0,m.X)(),r=(0,s.K)();return{peerDownlinkQuality:p[(0,s.i)({participant:r.find(function(t){return t.identity===e.id})||t}).quality]}},en=function(e){var t=(0,m.X)(),r=(0,s.T)([l.fQ.Source.Camera,l.fQ.Source.Microphone],null==e?void 0:e.id),i=(0,n.useMemo)(function(){return r.filter(function(e){return e.source===l.fQ.Source.Camera})},[r]),o=(0,n.useMemo)(function(){return r.filter(function(e){return e.source===l.fQ.Source.Microphone})},[r]).some(function(e){return!e.publication.isMuted}),a=i.some(function(e){return!e.publication.isMuted});return{isMicrophoneEnabled:o,muteMicrophone:(0,n.useCallback)(function(){return(0,h.mC)(h.aI.MUTE_MICROPHONE,t,e.id)},[t,e]),isCameraEnabled:a,disableCamera:(0,n.useCallback)(function(){return(0,h.mC)(h.aI.DISABLE_CAMERA,t,e.id)},[t,e])}},ei=function(e){return{externalPeerId:e}};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ea=function(){var e,t=(0,m.X)(),r=(e=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return(0,n.useEffect)(function(){var e=function(e,r){var n,i,a=r||t,s=(0,h.tw)((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),i=i={metadata:e||a.metadata},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)),l=(0,h.tw)(a);l.isLocal&&l.roleName===x.VM.MODERATOR&&s.roleName!==x.VM.MODERATOR&&o(!0)};return t.on(l.dd.ParticipantMetadataChanged,e),function(){t.off(l.dd.ParticipantMetadataChanged,e)}},[t]),{roleChangedToModerator:i,hideModeratorNotification:function(){return o(!1)}}};function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function el(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ec=function(){var e,t=(0,a.f)(),r=(e=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return es(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],s=(0,n.useCallback)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,t.startAudio()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){el(o,n,i,a,s,"next",e)}function s(e){el(o,n,i,a,s,"throw",e)}a(void 0)})})()},[t]),c=(0,n.useCallback)(function(e){o(!e)},[]);return(0,n.useEffect)(function(){return t.on(l.TQ.AudioPlaybackStatusChanged,c),function(){t.off(l.TQ.AudioPlaybackStatusChanged,c)}},[t,c]),{isAudioBlocked:i,unblockAudio:s}},eu=function(){var e=(0,m.X)(),t=(0,s.M)(),r=(0,s.t)([l.fQ.Source.Microphone],{updateOnlyOn:[l.TQ.TrackMuted,l.TQ.TrackUnmuted]});return{muteAllPeersMicrophone:(0,n.useCallback)(function(){return t.forEach(function(t){(0,h.mC)(h.aI.MUTE_MICROPHONE,e,t.identity)})},[e,t]),areAllPeersMuted:(0,n.useMemo)(function(){return r.filter(function(t){return t.participant.identity!==e.identity}).every(function(e){return e.publication.isMuted})},[r,e])}};function ed(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function ef(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ed(o,n,i,a,s,"next",e)}function s(e){ed(o,n,i,a,s,"throw",e)}a(void 0)})}}function ep(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var em=function(e){var t,r=(0,m.X)(),i=(0,s.L)({kind:l.nC.STANDARD,identity:e}),o=e&&e!==r.identity?i:r,a=(null==o||null==(t=o.attributes)?void 0:t.isHandRaised)==="true",c=(0,n.useCallback)(function(e){return ef(function(){return ep(this,function(t){switch(t.label){case 0:var n;if(null!=(n=l.Ix)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!n[Symbol.hasInstance](o):!(o instanceof n))return[3,2];return[4,o.setAttributes({isHandRaised:e.toString()})];case 1:return t.sent(),[3,4];case 2:if(!o)return[3,4];return[4,(0,h.mC)(h.aI.LOWER_HAND,r,o.identity)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[r,o]),u=(0,n.useCallback)(function(){return ef(function(){return ep(this,function(e){switch(e.label){case 0:return[4,c(!0)];case 1:return e.sent(),[2]}})})()},[c]),d=(0,n.useCallback)(function(){return ef(function(){return ep(this,function(e){switch(e.label){case 0:return[4,c(!1)];case 1:return e.sent(),[2]}})})()},[c]),f=(0,n.useCallback)(function(){return ef(function(){return ep(this,function(e){switch(e.label){case 0:return[4,c(!a)];case 1:return e.sent(),[2]}})})()},[c,a]);return{isHandRaised:a,raiseHand:u,lowerHand:d,toggleHand:f}},eb=r(9697);function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ey=function(){return Promise.resolve()},ev=function(){var e,t=(e=(0,n.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eh(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eh(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1],o=(0,s.K)(),a=(0,n.useMemo)(function(){return o.map(h.tw).filter(function(e){return!!e.customerUserId&&e.roleName===x.VM.HLS_SPECTATOR})},[o]);return{peers:(0,n.useMemo)(function(){return a.slice(0,r*eb.i)},[a,r]),loadPeers:ey,loadMorePeers:(0,n.useCallback)(function(){return i(function(e){return e+1}),Promise.resolve()},[]),hasNext:(0,n.useCallback)(function(){return r*eb.i<a.length},[r,a.length]),total:a.length}}},68347:function(e,t,r){"use strict";r.d(t,{C:()=>f});var n=r(67294),i=r(11145),o=r(7093),a=r(87949),s=r(37588),l=r(7447),c=r(2184);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var f=function(){var e,t=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],f=t[1],p=(0,i.f)(),m=(0,c.E)().metadata,b=p.state===a.em.Connected&&m.role===s.VM.HOST,h=(0,l.I3)(l.YK),y=(0,l.Ft)().setCameraEnabled,v=(0,o.h)({source:a.fQ.Source.Camera,initialState:b?h:void 0}),g=v.toggle,_=v.enabled,x=v.pending,j=b?_:h,w=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!b)return[3,2];return[4,g()];case 1:r.sent(),r.label=2;case 2:return y(!j),f(null),[3,4];case 3:var n,i;return f((n=e=r.sent(),t=(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)?e.message:"")),console.error("Could not toggle camera:",t),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})})()},[b,j,g,y,f]);return{isCameraEnabled:j,isCameraPending:x,cameraError:r,toggleCamera:w}}},2184:function(e,t,r){"use strict";r.d(t,{E:()=>o});var n=r(72496),i=r(99801),o=function(){var e=(0,i.X)();return{metadata:(0,n.bB)(e)}}},99801:function(e,t,r){"use strict";r.d(t,{X:()=>i});var n=r(11145),i=function(){return(0,n.f)().localParticipant}},5189:function(e,t,r){"use strict";r.d(t,{Y:()=>m});var n=r(67294),i=r(11145),o=r(7093),a=r(87949),s=r(37588),l=r(7447),c=r(41818),u=r(2184),d=r(14432);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var m=function(){var e,t=(0,i.f)(),r=(0,c.N)(),m=(0,u.E)().metadata,b=t.state===a.em.Connected&&m.role===s.VM.HOST,h=(0,l.I3)(l.wV),y=(null==r||!r.mute_on_join||!!(null==r?void 0:r.can_manage))&&h,v=(0,l.Ft)().setMicrophoneEnabled,g=(0,d.x)().captureOptions,_=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=_[0],j=_[1],w=(0,o.h)({source:a.fQ.Source.Microphone,captureOptions:g,initialState:b?y:void 0}),O=w.toggle,S=w.enabled,k=w.pending,P=b?S:h,C=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!b)return[3,2];return[4,O()];case 1:r.sent(),r.label=2;case 2:return v(!P),j(null),[3,4];case 3:var n,i;return j((n=e=r.sent(),t=(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)?e.message:"")),console.error("Could not toggle microphone:",t),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})})()},[b,P,O,v]);return{isMicrophoneEnabled:P,isMicrophonePending:k,toggleMicrophone:C,microphoneError:x}}},14432:function(e,t,r){"use strict";r.d(t,{x:()=>o});var n=r(67294),i=r(7447),o=function(){var e=(0,i.I3)(i.sO),t=(0,i.I3)(i.tS),r="advanced"===e,o="basic"===e||r;return{captureOptions:(0,n.useMemo)(function(){return{noiseSuppression:o,echoCancellation:o,autoGainControl:o,deviceId:t}},[o,t]),isAdvancedNoiseSuppression:r}}},9697:function(e,t,r){"use strict";r.d(t,{i:()=>n});var n=50},55842:function(e,t,r){"use strict";r.d(t,{so:()=>b,l9:()=>v,oZ:()=>P,$I:()=>S,bf:()=>s,Xq:()=>y,I0:()=>c,XN:()=>w,Hy:()=>O,Kr:()=>_,iF:()=>d,rH:()=>l,fx:()=>x,LP:()=>f,JC:()=>h,tO:()=>p,uZ:()=>a,RW:()=>u,UG:()=>j,Hg:()=>m,QZ:()=>g,Wg:()=>k});var n=r(9687),i=r(37102),o=r(63235),a=function(){return(0,o.M)({hms:n.Zp,livekit:i.Em})()},s=function(){return(0,o.M)({hms:n.Tq,livekit:i.VH})()},l=function(e){return(0,o.M)({hms:n.hB,livekit:i.ww})(e)},c=function(){return(0,o.M)({hms:n.pB,livekit:i.Bw})()},u=function(){return(0,o.M)({hms:n.RS,livekit:i.yK})()},d=function(e){return(0,o.M)({hms:n.wc,livekit:i.AE})(e)},f=function(){return(0,o.M)({hms:n.kk,livekit:i.fL})()},p=function(e){return(0,o.M)({hms:n.RN,livekit:i.Dq})(e)},m=function(){return(0,o.M)({hms:n.nc,livekit:i.MU})()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.M)({hms:n.$f,livekit:i._x})(e)},h=function(){return(0,o.M)({hms:n.HV,livekit:i.$x})()},y=function(){return(0,o.M)({hms:n.Vb,livekit:i.R3})()},v=function(e,t){var r=t.pageSize;return(0,o.M)({hms:n.Ak,livekit:i.my})(e,{pageSize:r})},g=function(){return(0,o.M)({hms:n.qr,livekit:i.jU})()},_=function(){return(0,o.M)({hms:n.y2,livekit:i.Mi})()},x=function(e){return(0,o.M)({hms:n.yE,livekit:i.Hg})(e)},j=function(e){return(0,o.M)({hms:n.Lg,livekit:i.l8})(e)},w=function(e){return(0,o.M)({hms:n.YR,livekit:i.yx})(e)},O=function(){return(0,o.M)({hms:n.DI,livekit:i.i4})()},S=function(){return(0,o.M)({hms:n.tv,livekit:i.AR})()},k=function(){return(0,o.M)({hms:n.Ux,livekit:i.du})()},P=function(e){return(0,o.M)({hms:n.CV,livekit:i.zU})(e)}},97873:function(e,t,r){"use strict";r.d(t,{B:()=>a});var n=r(92479),i=r(68347),o=r(63235),a=function(){return(0,o.M)({hms:n.p,livekit:i.C})()}},63235:function(e,t,r){"use strict";r.d(t,{M:()=>o});var n=r(37588),i=r(41818),o=function(e){var t=e.hms,r=e.livekit,o=(0,i.N)();return(0,n.mP)(o)?r:t}},11964:function(e,t,r){"use strict";r.d(t,{K:()=>a});var n=r(3714),i=r(5189),o=r(63235),a=function(){return(0,o.M)({hms:n._,livekit:i.Y})()}},28320:function(e,t,r){"use strict";r.d(t,{C:()=>l});var n=r(67294),i=r(24094),o=r(55842);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){var e,t=(0,o.RW)(),r=t.hosts,a=t.spectators,l=t.moderators,c=(0,i.cy)(),u=c.room,d=c.participants,f=(0,n.useCallback)(function(e){var t,r;return(null==d||null==(t=d[Number(e.customerUserId||-1)])?void 0:t.community_member_id)===(null==u||null==(r=u.creator)?void 0:r.id)},[d,null==u||null==(e=u.creator)?void 0:e.id]),p=(0,n.useCallback)(function(e,t){return f(e)?-1:+!!f(t)},[f]),m=(0,n.useCallback)(function(e){return e&&s(e).sort(function(e,t){var r,n,i,o,a=(null==e?void 0:e.customerUserId)&&parseInt(e.customerUserId),s=(null==t?void 0:t.customerUserId)&&parseInt(t.customerUserId),l=a&&null!=(i=null==d||null==(r=d[a])?void 0:r.name)?i:"",c=s&&null!=(o=null==d||null==(n=d[s])?void 0:n.name)?o:"";return l.localeCompare(c)})||[]},[d]),b=(0,n.useMemo)(function(){return m(r).sort(p)},[r,m,p]),h=(0,n.useMemo)(function(){return m(l)},[l,m]),y=(0,n.useMemo)(function(){return m(a)},[a,m]),v=(0,n.useMemo)(function(){return b.find(f)},[b,f]),g=(0,n.useMemo)(function(){return v?b.filter(function(e){return e.customerUserId!==v.customerUserId}):b},[b,v]),_=s(b).concat(s(h),s(y));return{peers:_,hosts:b,cohosts:g,moderators:v?[v].concat(s(h)):h,spectators:y,count:_.length}}},87904:function(e,t,r){"use strict";r.d(t,{e:()=>d});var n=r(71458),i=r(88767),o=r(84326),a=r(51630),s=r(55842),l=r(24094),c=r(37588),u=r(60878),d=function(e){var t=(0,u.pm)(),r=t.success,d=t.error,f=(0,n.NW)(),p=(0,s.Kr)().requestRoleChange,m=(0,s.RW)().spectators,b=(0,l.cy)().participants,h=(0,n.Qc)(),y=h.cohosts,v=h.isLoadingCohosts,g=h.refetchCohosts,_=function(e){if(!(null==m?void 0:m.length))return null;var t=m.find(function(t){var r;return(null==b||null==(r=b[Number(t.customerUserId)||0])?void 0:r.community_member_id)===e});return null==t?void 0:t.id},x=function(e){null==e||e.forEach(function(e){var t=_(e.id);t&&p(t,c.VM.HOST)})},j=(0,i.useMutation)(function(e){return a.Qk.addCohosts({roomId:null==f?void 0:f.id,formData:e})},{onSuccess:function(t){x(t),g(),r((0,o.t)("live_streams.room.cohosts_added_successfully")),e&&e()},onError:function(){return d((0,o.t)("live_streams.room.could_not_add_cohosts_error"))}}),w=(0,n._K)(g),O=(null==f?void 0:f.host_capacity)&&f.host_capacity>y.length+1;return{cohosts:y,isLoadingCohosts:v,addCohosts:j.mutateAsync,isAddingCohosts:j.isLoading,removeCohost:w,canInviteMoreHosts:O}}},21161:function(e,t,r){"use strict";r.d(t,{t:()=>s});var n=r(85893),i=r(67294),o=r(4637);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t,r=e.title,s=e.onConfirm,l=e.bodyElement,c=e.description,u=e.buttonLabel,d=e.maxIndex,f=e.sentiment,p=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1],h=function(){b(!1)},y=function(){b(!1),s()};return{confirmModal:(0,n.jsx)(o.I,{show:m,onClose:h,onCancel:h,onConfirm:y,title:r,subtitle:"",description:void 0===c?"":c,bodyElement:void 0===l?null:l,maxZIndexEnabled:void 0!==d&&d,buttonLabel:void 0===u?"":u,sentiment:void 0===f?"danger":f}),isConfirmModalOpen:m,onConfirmButtonClick:function(){b(!0)},onConfirmModalClose:h,onConfirmModal:y}}},6119:function(e,t,r){"use strict";r.d(t,{M:()=>i});var n=r(41818),i=function(){var e=(0,n.N)();if(!e)throw Error("Room not found");return e}},12890:function(e,t,r){"use strict";r.d(t,{S:()=>a});var n=r(24094),i=r(55842);function o(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var a=function(){var e=(0,n.y4)().leaveAsync,t=(0,i.QZ)();return function(){var r;return(r=function(){var r,n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return[4,e()];case 1:return i.sent(),[4,t()];case 2:return i.sent(),null==(n=window.webview)||null==(r=n.onLeaveLiveStream)||r.call(n),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function s(e){o(a,n,i,s,l,"next",e)}function l(e){o(a,n,i,s,l,"throw",e)}s(void 0)})})()}}},60138:function(e,t,r){"use strict";r.d(t,{w:()=>u});var n=r(67294),i=function(){return!!navigator.mediaDevices},o=function(){var e;return!!(null==(e=navigator.permissions)?void 0:e.query)},a=r(9585);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e){var t=c((0,n.useState)([]),2),r=t[0],s=t[1],u=c((0,n.useState)(!0),2),d=u[0],f=u[1],p=(0,n.useRef)(!1),m=(0,n.useRef)(null),b=(0,n.useCallback)(function(){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!i())return[3,2];return[4,a.Z.getInstance().getDevices(e)];case 1:return s(t=r.sent()),[2,t];case 2:return[2,[]]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},[e]),h=(0,n.useCallback)(function(){p.current=!0,m.current=null;var e=function(e){return!!(null==e?void 0:e.length)&&e.some(function(e){var t;return!!(null==(t=e.label)?void 0:t.trim())})};e(r)||b().then(function(t){e(t)?p.current=!1:m.current=setTimeout(function(){h()},2e3)}).catch(function(e){console.error(e)})},[b,r]),y=(0,n.useCallback)(function(){b()},[b]);(0,n.useEffect)(function(){return i()&&(y(),navigator.mediaDevices.addEventListener("devicechange",y)),function(){return navigator.mediaDevices.removeEventListener("devicechange",y)}},[y]);var v=(0,n.useCallback)(function(e,t){return navigator.permissions.query({name:e}).then(function(e){return e.onchange=function(){"granted"===e.state&&b()},e}).catch(function(e){var r;return(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)&&console.error(t,e.message),f(!1),null})},[b]);return(0,n.useEffect)(function(){if(o()){var e=null,t=null;return v("camera","Could not listen for camera permission status").then(function(t){e=t}),v("microphone","Could not listen for microphone permission status").then(function(e){t=e}),function(){e&&(e.onchange=null),t&&(t.onchange=null)}}},[v]),(0,n.useEffect)(function(){d||p.current||h()},[d,h]),(0,n.useEffect)(function(){return function(){m.current&&clearTimeout(m.current)}},[]),{devices:r}}},41506:function(e,t,r){"use strict";r.d(t,{$:()=>o});var n=r(67294),i=r(96486),o=function(e){var t=e.peers,r=e.speakingIds,o=e.handRaisedIds,a=e.pageSize,s=(0,n.useRef)([]);return(0,n.useMemo)(function(){var e=(0,i.keyBy)(t,"id"),n=s.current.filter(function(t){return e[t]});o.slice(0,a/2).concat(r).forEach(function(e){n.includes(e)||n.unshift(e),n.length>a&&n.pop()}),s.current=n;var l=new Map(n.map(function(e,t){return[e,t+1]}));return(0,i.sortBy)(t,function(e){return l.get(e.id)||1/0})},[r,o,a,t])}},61357:function(e,t,r){"use strict";r.d(t,{a:()=>s});var n=r(71458),i=r(24094),o=r(37588),a=r(6119),s=function(e){var t,r=e||{id:""},s=r.id,l=r.customerUserId,c=r.roleName,u=r.name,d=(0,n.p$)(s),f=d.isHandRaised,p=d.lowerHand,m=(0,a.M)(),b=(0,i.cy)().participants,h=(0,o.pp)(e)||b[Number(l)],y=(0,n.F7)(s,m.id,null==h?void 0:h.community_member_id),v=(0,n.u9)(s,m.id,l),g=(0,n.fX)(s,m.id,null==h?void 0:h.community_member_id,l),_=(0,n.Ji)(s,m.id,l),x=!!(null==e?void 0:e.isLocal),j=!!(null==h?void 0:h.community_member_id)&&(null==h?void 0:h.community_member_id)===(null==m||null==(t=m.creator)?void 0:t.id),w=!j&&((null==h?void 0:h.role)===o.VM.HOST||c===o.VM.HOST),O=!j&&((null==h?void 0:h.role)===o.VM.MODERATOR||c===o.VM.MODERATOR),S=(0,n.C)(s,null==m?void 0:m.id,l);return{participant:h,name:(null==h?void 0:h.name)||u||"",avatarUrl:null==h?void 0:h.avatar_url,isCurrentParticipant:x,isHandRaised:f,isHost:j,isCohost:w,isModerator:O,inviteToCohost:y,removeAsCohost:v,lowerHand:p,removeParticipant:S,removeAsModerator:_,inviteToModerator:g}}},41818:function(e,t,r){"use strict";r.d(t,{N:()=>i});var n=r(24094),i=function(){return(0,n.cy)().room}},33372:function(e,t,r){"use strict";r.d(t,{s:()=>a});var n=r(85893),i=r(84326),o=r(57363),a=function(){return(0,n.jsxs)("div",{className:"mb-8 p-4 text-center shadow-none sm:mt-4 sm:p-8",children:[(0,n.jsx)("h1",{className:"mb-8 text-2xl",children:(0,i.t)("community.feature.no_live_streams.title")}),(0,n.jsx)("p",{className:"mb-8",children:(0,i.t)("community.feature.no_live_streams.description")}),(0,n.jsxs)("ul",{className:"mx-4 mb-8 list-none text-justify",children:[(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.up_to_3_admins")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.up_to_10_moderators")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.up_to_20_spaces")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.unlimited_members")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.custom_domain")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.advanced_analytics")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.custom_css")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.sso_wp_memberful")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.500MB_file_limit")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.100GB_total_storage")})]})]}),(0,n.jsx)("a",{className:"btn btn-primary",href:"/settings/plans",children:(0,i.t)("plan_details.upgrade_plan")})]})}},95835:function(e,t,r){"use strict";r.d(t,{M:()=>b});var n=r(85893),i=r(80129),o=r.n(i),a=r(70442),s=r(65978),l=r(84326),c=r(21523),u=r(86003),d=r(75148);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var m=s.Ry({filter:s.Ry({name:s.Z_().optional()})}),b=function(e){var t,r=e.setShouldRenderMobileFiltersTransition,i=(0,a.k6)(),s=(0,c.t)(m);return(0,n.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-between border-b px-4 py-2 md:hidden",children:[(0,n.jsx)(u.h,{defaultValue:null==s||null==(t=s.filter)?void 0:t.name,onSearch:function(e){return i.push({search:o().stringify(p(f({},s),{filter:p(f({},null==s?void 0:s.filter),{name:null==e?void 0:e.trim()})}),{encode:!1})})},placeholder:(0,l.t)("members_directory.header.search.placeholder")}),(0,n.jsx)(d.h,{ariaLabel:(0,l.t)("members_directory.header.search.filters"),name:"20-filters",iconSize:20,iconClassName:"!text-dark",buttonSize:28,onClick:function(){return r(function(e){return!e})}})]})}},55673:function(e,t,r){"use strict";r.r(t),r.d(t,{MemberDirectory:()=>em,default:()=>eb});var n=r(85893),i=r(70442),o=r(19323),a=r(84326),s=r(1168),l=r(78152),c=r(64529),u=r(48150),d=r(72171),f=r(41342),p=r(78456),m=r(13532),b=r(89481),h=r(39905),y=r(67294),v=r(22976),g=r(43544),_=r(28892),x=r(60878),j=r(55717),w=r(76937),O=r(51466),S=function(e){var t=e.defaultValue,r=[{value:"alphabetical",label:(0,a.t)("alphabetical")},{value:"oldest",label:(0,a.t)("oldest")},{value:"latest",label:(0,a.t)("latest")}];return(0,n.jsx)(O.l.Item,{name:"member_directory_settings.sort",label:(0,a.t)("".concat("members_directory.header.settings.form",".sort")),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(O.l.SelectNative,{name:"member_directory_settings.sort",options:r,defaultValue:void 0===t?"oldest":t})})},k="members_directory.header.settings",P=[{value:w.nk.CARDS,label:(0,a.t)(["members_directory.header","views.cards"])},{value:w.nk.LIST,label:(0,a.t)(["members_directory.header","views.list"])}];function C(e){var t=e.currentCommunitySettings,r=e.onClose,i=(0,x.pm)(),o=(0,j.K)({onSuccess:function(){i.success((0,a.t)("".concat(k,".save.success"))),r()},onError:function(){i.error((0,a.t)("".concat(k,".save.error")))}});return(0,n.jsxs)(O.l,{onSubmit:function(e){o.mutate({data:{community_settings:t},updates:e})},defaultValues:{member_directory_settings:t.member_directory_settings},className:"h-full",formClassName:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"grow px-6",children:[(0,n.jsx)(S,{defaultValue:t.member_directory_settings.sort}),(0,n.jsx)(O.l.Item,{name:"member_directory_settings.view",label:(0,a.t)([k,"form.view"]),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(O.l.SelectNative,{name:"member_directory_settings.view",options:P,defaultValue:w.nk.CARDS})})]}),(0,n.jsx)(_.d.Footer,{children:(0,n.jsx)(h.z,{disabled:o.isLoading,type:"submit",variant:"primary",full:!0,children:(0,a.t)("".concat(k,".save.button"))})})]})}var N=function(e){var t=e.open,r=e.onClose,i=(0,f.wh)(),o=i.isLoading,s=i.currentCommunitySettings;return!s||o?null:(0,n.jsx)(_.d,{open:t,onClose:r,title:(0,a.t)("".concat("members_directory.header.settings",".title")),noWrapperPadding:!0,children:(0,n.jsx)(C,{currentCommunitySettings:s,onClose:r})})};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(){var e,t=(e=(0,y.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return A(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.S,{label:(0,a.t)("space_settings"),dataTestId:"space-settings-v3",children:[(0,n.jsx)(g.Lt.ItemLink,{to:m.Gp.index(),children:(0,a.t)("members_directory.header.manage_audience")}),(0,n.jsx)(g.Lt.ItemLink,{forceClose:!0,onClick:function(){i(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,n.jsx)(N,{open:r,onClose:function(){i(!1)}})]})},E=r(51169),T=r(16717),L=function(){var e=(0,j.K)(),t=(0,j.w)().data,r=null==t?void 0:t.community_settings;if(e.isLoading||!r)return(0,n.jsx)(E.a,{});var i=r.public_member_directory,o="members_directory.header.actions.".concat(i?"public":"private");return(0,n.jsxs)(T.J,{buttonTitle:(0,a.t)("".concat(o,".title")),children:[(0,n.jsx)("p",{children:(0,a.t)("".concat(o,".description"))}),(0,n.jsx)(h.z,{variant:"primary",onClick:function(){e.mutate({data:t,updates:{public_member_directory:!i}})},children:(0,a.t)("".concat(o,".revert_button"))})]})},D="w-80",M=function(e){var t=e.activeView,r=e.setActiveView,o=(0,i.k6)(),s=(0,f.wh)().currentCommunityMember,l=(0,n.jsx)(b.P,{value:t,onChange:r});return(0,p.vb)(s)?(0,n.jsxs)("div",{className:"flex items-center gap-4 ".concat(D),children:[l,(0,n.jsx)(L,{}),(0,n.jsx)(h.z,{large:!0,type:"button",className:"hidden md:block",onClick:function(){return o.push(m.Lo.members.manage)},children:(0,a.t)("manage")}),(0,n.jsx)(I,{})]}):(0,n.jsx)("div",{className:"flex items-center justify-end gap-4 ".concat(D),children:l})},R="/members/connections",B="/members",F=function(e){var t=e.className,r=(0,i.TH)().pathname,o=(0,i.k6)(),l=[{value:R,label:(0,a.t)("members_directory.tab_navigation.connections")},{value:B,label:(0,a.t)("members_directory.tab_navigation.all_members")}],c=r===R?R:B,u=function(e){o.push(e)};return(0,n.jsx)("div",{className:(0,s.A)("flex items-center gap-6",t),children:(0,n.jsx)("nav",{className:"flex gap-1",children:l.map(function(e){return(0,n.jsx)("button",{type:"button",onClick:function(){return u(e.value)},className:(0,s.A)("rounded-full px-4 py-2 text-sm font-medium transition-colors",c===e.value?"bg-secondary":"text-default hover:bg-secondary/10 hover:text-dark"),children:e.label},e.value)})})})},z="connections",U=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{leftContent:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-6",children:[(0,n.jsx)(d.y,{children:(0,a.t)("".concat(z,".title"))}),(0,n.jsx)(F,{className:"m-auto"})]}),rightContent:(0,n.jsx)("div",{className:D})}),(0,n.jsxs)(c.F.Body,{hasPaddingTopMobile:!1,children:[(0,n.jsx)(l.S,{title:(0,a.t)("".concat(z,".title"))}),(0,n.jsxs)(c.F.Content,{className:(0,s.A)("md:!min-w-0"),children:[(0,n.jsx)("div",{children:(0,a.t)("".concat(z,".my_connections"))}),(0,n.jsx)("div",{children:(0,a.t)("".concat(z,".requests"))}),(0,n.jsx)("div",{children:(0,a.t)("".concat(z,".recommendations"))})]})]})]})},Z=r(11376),G=r(31113),q=r(29462),V=r(57767),H=r(12845),W=r(71571),Q=r(8380),J=r(63676),K=r(57363);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e){var t,r=e.currentCommunityMember,i=e.memberCount,o=e.hasDropdown,s=e.headerTitle,l=void 0===s?(0,a.t)("members_directory.header.title"):s,c=(t=(0,y.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return $(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1],b="(".concat((0,J.HA)(i),")"),h=i<=1?l:"".concat(l," ").concat(b);return(0,p.vb)(r)&&(void 0===o||o)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g.Lt,{direction:"bottom-start",button:(0,n.jsxs)(g.Lt.MenuButton,{children:[(0,n.jsx)(d.y,{children:h}),(0,n.jsx)(K.JO,{size:16,type:"caret-down-bold",className:"text-dark"})]}),children:[(0,n.jsx)(g.Lt.ItemLink,{to:m.Gp.index(),children:(0,a.t)("members_directory.header.manage_audience")}),(0,n.jsx)(g.Lt.ItemLink,{forceClose:!0,onClick:function(){f(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,n.jsx)(N,{open:u,onClose:function(){f(!1)}})]}):(0,n.jsx)(d.y,{children:h})},Y=r(95835),ee=r(9358),et=r(13847),er=r(4117),en=r(59133),ei=r(17022);function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ea(e){return function(e){if(Array.isArray(e))return eo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eo(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var es=r(53785).Z,el=function(){var e=(0,et.rV)(),t=(0,ei.N)(),r=(0,ee.v)(),i=(0,y.useMemo)(function(){var r=["name","spaces","tags","events"];return e&&r.push("activity_score"),t&&(r.unshift("near_me"),r.push("geo_location")),r},[e,t]);return(0,n.jsx)("div",{className:"shadow-xs hidden md:flex",children:(0,n.jsx)(er.YP,{platformFilters:ea(es).concat(ea(r)),defaultFilterNames:i,persistentFilterNames:t?["near_me"]:[],children:(0,n.jsx)(en.k,{})})})},ec=function(e){var t=e.memberCount,r=e.headerTitle,i=e.activeView,a=e.setShouldRenderMobileFiltersTransition,s=e.setActiveView,l=(0,f.wh)().currentCommunityMember,c=(0,o.y)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{leftContent:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-6",children:[(0,n.jsx)(X,{currentCommunityMember:l,memberCount:t,hasDropdown:!1,headerTitle:r}),c&&(0,n.jsx)(F,{className:"m-auto"})]}),rightContent:(0,n.jsx)(M,{activeView:i,setActiveView:s})}),(0,n.jsx)(Y.M,{setShouldRenderMobileFiltersTransition:a}),(0,n.jsx)(el,{})]})};function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ed(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ef=function(e){var t=e.memberDirectorySettings,r=(0,H.d)().memberDirectoryLink,i=ed((0,y.useState)(0),2),o=i[0],u=i[1],d=(0,Z.p)(),f=ed((0,y.useState)(!1),2),p=f[0],m=f[1],b=ed((0,G.Q)({defaultCommunityView:t.view,views:w.nk}),2),h=b[0],v=b[1],g=(null==r?void 0:r.label)||(0,a.t)("members_directory.title");return(0,n.jsxs)(W.r.Provider,{value:{usage:d?"contacts":"members"},children:[(0,n.jsx)(ec,{memberCount:o,activeView:h,setActiveView:v,setShouldRenderMobileFiltersTransition:m,headerTitle:g}),(0,n.jsxs)(c.F.Body,{hasPaddingTopMobile:!1,children:[(0,n.jsx)(l.S,{title:g,bodyClassNames:"view-members-directory"}),(0,n.jsxs)(c.F.Content,{className:(0,s.A)("md:!min-w-0"),children:[(0,n.jsx)(V.x,{shouldRenderMobileFiltersTransition:p,shouldBeHiddenOnMd:!0,shouldShowAdminFilters:!0}),(0,n.jsx)(q.S,{setMemberCount:u,scopeResults:t.scope,defaultSort:t.defaultSort,shouldShowHiddenMemberTooltip:!0,viewType:Q.c.MEMBER_DIRECTORY,activeView:h})]})]})]})},ep=r(34332),em=function(){var e=(0,ep.b)(),t=(0,o.y)(),r=(0,i.$B)().path;return e.isLoading?null:(0,n.jsxs)(i.rs,{children:[(0,n.jsx)(i.AW,{path:"".concat(r),exact:!0,children:(0,n.jsx)(ef,{memberDirectorySettings:e})}),t&&(0,n.jsx)(i.AW,{path:"".concat(r,"/connections"),exact:!0,children:(0,n.jsx)(U,{})}),(0,n.jsx)(i.AW,{render:function(){return(0,n.jsx)(i.l_,{to:r})}})]})};let eb=em},53785:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(1083),i=[n.CU,n.yE,n.pq,n.sE,n.xz,n.Q1,n.r7,n.Yl,n.en,n.Oq,n.EC,n.zu,n.LI,n.sm,n.Jm,n.JN,n.kQ,n.Q_,n.s3]},34332:function(e,t,r){"use strict";r.d(t,{b:()=>s});var n=r(41342),i=r(78456),o=r(85924),a=r(76937),s=function(){var e,t,r=(0,o.ww)().isAdminUsageContext,s=(0,n.wh)(),l=s.currentCommunitySettings,c=s.currentCommunityMember,u=s.isLoading,d={sort:a.aP["0"]},f=(null==l?void 0:l.member_directory_settings)||d,p={exclude_empty_name:!r},m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({visible_in_member_directory:!0},p),b=(0,i.vb)(c)?p:m;return{defaultSort:f.sort,scope:b,view:(t=a.nk.CARDS,(null==l||null==(e=l.member_directory_settings)?void 0:e.view)&&(t=l.member_directory_settings.view),t),isLoading:u}}},14866:function(e,t,r){"use strict";r.d(t,{z:()=>f});var n=r(85893),i=r(84326),o=r(25606),a=r(57105),s=r(34519),l=r(44820),c=function(e){var t=e.isSubmitting;return(0,n.jsx)(s.u_.Footer,{className:"!px-0",children:(0,n.jsx)(l._,{type:"submit",form:"bookmark-form",variant:"primary",full:!0,large:!0,submitting:void 0!==t&&t,children:(0,i.t)("save")})})},u=function(e){var t=e.isFolder,r=void 0===t||t,l=e.space,u=e.folderId,d=e.bookmark,f=e.isEdit,p=void 0!==f&&f,m=(0,a.dd)(),b=p?"edit":"create";return(0,n.jsxs)(s.u_,{isOpen:m.visible,onClose:m.hide,children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{className:"!overflow-visible",children:[(0,n.jsxs)(s.u_.Header,{children:[(0,n.jsx)(s.u_.Title,{className:"text-center",size:"md",children:(0,i.t)("".concat(b,"_").concat(r?"folder":"link"),{scope:"spaces.bookmarks"})}),(0,n.jsx)(s.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(s.u_.CloseButton,{onClick:m.hide})})]}),(0,n.jsx)(s.u_.Body,{className:"!overflow-visible px-2",children:(0,n.jsx)(o.X,{space:l,bookmark:d,folderId:u,isFolder:r,isEdit:p,renderFooter:c})})]})]})},d=a.gk.create(function(e){var t=e.folderId,r=e.space,i=e.isFolder,o=e.bookmark,a=e.isEdit;return(0,n.jsx)(u,{folderId:t,space:r,isFolder:i,bookmark:o,isEdit:a})}),f=function(){return(0,a.dd)(d)}},55929:function(e,t,r){"use strict";r.d(t,{L:()=>N});var n=r(85893),i=r(50308),o=r.n(i),a=r(88767),s=r(84326),l=r(57105),c=r(41342),u=r(51630),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMutation)(function(e){var t=e.spaceGroupId,r=e.communityMembersId,n=e.shouldAddAllMembers;return u.iD.addMembers({spaceGroupId:t,body:{community_member_ids:r,add_all_members:n}})},e)},f=r(51466),p=r(34519),m=r(60878),b=r(52293),h=r(70442),y=r(52928),v=r(11787),g=r(1168),_=r(13532),x=r(81281),j=r(39905),w=r(41553),O=function(e){var t=e.onClose,r=e.formId,i=e.isLoading,o=void 0!==i&&i,a=(0,b.Gc)(),l=a.watch,c=a.setValue,u=a.formState.isDirty,d=l("community_member_ids",[])||[],m=l("add_all_members",!1),O=d.length>0,S=(0,p.UV)().contentPortalElement,k=(0,h.TH)().pathname;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.u_.Header,{children:[(0,n.jsx)(p.u_.Title,{size:"sm",className:"text-center",children:(0,s.t)("space_groups.form.edit.members.add_member")}),(0,n.jsx)(p.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(p.u_.CloseButton,{onClick:t})})]}),(0,n.jsxs)(p.u_.Body,{children:[(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)(w.Z.LabelMd,{children:[(0,s.t)("space_groups.add_members_to_space_group_description_without_link")," ",(0,n.jsx)(y.rU,{to:"".concat(_.Lo.members.invite,"?from=").concat(k),children:(0,s.t)("space_groups.add_members_to_space_group_link")}),"."]})}),(0,n.jsx)(f.l.CommunityMemberSelect,{name:"community_member_ids",direction:"down",variant:"tags",hideSelectedItems:!0,hideIcon:!0,disabled:m,appendTo:S,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,n.jsx)(v.Y,{memberIds:d,onRemove:function(e){c("community_member_ids",d.filter(function(t){return t!==e}))}}),(0,n.jsxs)("div",{className:(0,g.A)({hidden:O,visible:!O}),children:[(0,n.jsx)(x.X,{}),(0,n.jsx)("div",{className:"flex items-baseline",children:(0,n.jsx)(f.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,s.t)("space_groups.form.add_everyone_from_community"),id:"add_all_members",name:"add_all_members",className:"my-5 mr-2 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"ml-4 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(f.l.ToggleSwitch,{name:"add_all_members",variant:"small"})})})]})]}),(0,n.jsx)(p.u_.Footer,{className:"flex items-baseline justify-end",children:(0,n.jsx)(j.z,{variant:"primary",type:"submit",form:r,disabled:!u||o,children:o?(0,s.t)("space_groups.invite.adding_to_space_group"):(0,s.t)("space_groups.invite.add_to_space_group")})})]})},S="add-space-group-members-form",k={add_all_members:!1,community_member_ids:null},P=function(e){var t=e.spaceGroupId,r=(0,m.pm)(),i=(0,a.useQueryClient)(),u=(0,l.dd)(),b=(0,c.p7)(t).refetch,h=d({onError:function(e){r.error(e.message)},onSuccess:function(e){var t=e.message;i.invalidateQueries(["space-group-members"]),null==b||b(),r.success(t,{duration:"short",shouldUseProgress:!1}),u.hide()}}),y=h.mutate,v=h.isLoading;return(0,n.jsxs)(p.u_,{isOpen:u.visible,onClose:u.visible?u.hide:o(),contentPortalId:"add-space-group-member-portal-content",title:(0,s.t)("space_groups.form.edit.members.add_member"),children:[(0,n.jsx)(p.u_.Overlay,{}),(0,n.jsx)(p.u_.Content,{size:"md",children:(0,n.jsx)(f.l,{id:S,mode:"onChange",onSubmit:function(e){var r,n;return y((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({spaceGroupId:t},e.community_member_ids&&{communityMembersId:e.community_member_ids}),n=n={shouldAddAllMembers:e.add_all_members},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))},defaultValues:k,className:"flex flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col",children:(0,n.jsx)(O,{onClose:u.hide,isLoading:v,formId:S})})})]})},C=l.gk.create(function(e){var t=e.spaceGroupId;return(0,n.jsx)(P,{spaceGroupId:t})}),N=function(){return(0,l.dd)(C)}},11787:function(e,t,r){"use strict";r.d(t,{Y:()=>m});var n=r(85893),i=r(58533),o=r(78940),a=r(72019),s=r(51169),l=r(56060),c=r(84326),u=r(98363),d=r(39905),f=r(41553),p=function(e){var t=e.id,r=e.avatarUrl,i=e.name,o=e.onRemove;return(0,n.jsxs)(l.SC,{className:"group h-12",children:[(0,n.jsx)(l.pj,{variant:"no-padding",className:"rounded-l-lg",children:(0,n.jsx)("div",{className:"ml-4 mr-3",children:(0,n.jsx)(u.s,{name:a.C.test(""+i)?i.charAt(0):i,src:r,size:"8"})})}),(0,n.jsx)(l.pj,{variant:"no-padding",className:"w-full",children:(0,n.jsx)("div",{className:"truncate p-2 pl-0",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:i})})}),(0,n.jsx)(l.pj,{variant:"no-padding",className:"w-24 rounded-r-lg",children:(0,n.jsx)("div",{className:"text-dark invisible group-hover:visible",children:(0,n.jsx)(d.z,{type:"button",variant:"plain",onClick:function(){return o(t)},children:(0,c.t)("remove")})})})]},t)},m=function(e){var t=e.memberIds,r=void 0===t?[]:t,c=e.onRemove,u=r.length>0,d=(0,o.fd)({filters:{id:r},options:{enabled:u,keepPreviousData:u}}),f=d.hasNextPage,m=d.fetchNextPage,b=d.members;return u?(0,n.jsx)("div",{className:"-mx-4 mt-4 h-full max-h-80 overflow-y-auto",children:(0,n.jsx)(i.Z,{loader:(0,n.jsx)(s.a,{}),dataLength:r.length,style:{overflow:"initial"},scrollThreshold:.5,next:m,hasMore:!!f,children:(0,n.jsx)(l.iA,{variant:"no-border",className:"w-full max-w-full",tableClassName:"w-full",children:(0,n.jsxs)(l.RM,{children:[r.map(function(e){return a.C.test(""+e)?(0,n.jsx)(p,{id:e,name:e,onRemove:c,avatarUrl:""},e):null}),b.map(function(e){var t=e.id,r=e.avatar_url,i=e.name;return(0,n.jsx)(p,{id:t,avatarUrl:r,name:i,onRemove:c},t)})]})})})}):null}},46517:function(e,t,r){"use strict";r.d(t,{z:()=>R});var n=r(85893),i=r(96486),o=r(88767),a=r(84326),s=r(57105),l=r(51630),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMutation)(function(e){var t=e.spaceId,r=e.communityMembersId,n=e.notifyMembers,i=e.memberType,o=e.shouldAddAllMembers;return l.rb.addMemberToSpace({spaceId:t,body:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({community_member_ids_or_emails:r,notify_members:n,select_all_members:o},i&&{member_type:i})})},e)},u=r(51466),d=r(34519),f=r(60878),p=r(67294),m=r(52293),b=r(70442),h=r(24330),y=r(56338),v=r(80171),g=r(41342),_=r(60589),x=r(1168),j=r(13532),w=r(81281),O=r(39905),S=r(41553),k=r(11787),P=[{label:(0,a.t)("spaces.form.add_everyone_from_options.space_group"),value:"space_group"},{label:(0,a.t)("spaces.form.add_everyone_from_options.community"),value:"community"}],C="community_member_ids",N="should_add_all_members",A=function(e){var t=e.onClose,r=e.isLoading,i=e.formId,o=(0,m.Gc)(),s=o.watch,l=o.setValue,c=(0,d.UV)().contentPortalElement,f=(0,g.wh)(),A=f.currentCommunity,I=f.currentCommunitySettings,E=(0,b.TH)().pathname,T=(null==A?void 0:A.chat_space_members_limit)||0,L=(null==A?void 0:A.member_count)||0,D=(0,g.L2)().data,M=((0,(0,g.e2)().helpers.findBy)({id:null==D?void 0:D.space_group_id})||{}).space_group_members_count,R=s(C,[])||[],B=s(N,!1),F=s("member_type"),z=R.length>0,U=z||B,Z="space_group"===F,G=(0,_.Ug)(D)&&(Z?(void 0===M?0:M)>T:L>T);return(0,p.useEffect)(function(){G&&l(N,!1)},[G]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.u_.Header,{children:[(0,n.jsx)(d.u_.Title,{size:"sm",children:(0,a.t)("spaces.form.edit.members.add_member")}),(0,n.jsx)(d.u_.HeaderActions,{children:(0,n.jsx)(d.u_.CloseButton,{onClick:t})})]}),(0,n.jsxs)(d.u_.Body,{className:"!px-5 !py-4 md:!px-8 md:!py-2",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(S.Z.LabelSm,{children:[(0,a.t)("add_members_to_space_description_without_link")," ",(0,n.jsx)("a",{href:"".concat(j.Lo.members.invite,"?invite_type=csv&from=").concat(E),children:(0,a.t)("add_members_to_space_description_link")})]})}),(0,n.jsx)(u.l.CommunityMemberSelect,{name:C,variant:"tags",direction:"down",addable:!0,hideSelectedItems:!0,hideIcon:!0,disabled:B,placeholder:(0,a.t)("spaces.form.edit.members.add_member"),appendTo:c,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,n.jsx)(k.Y,{memberIds:R,onRemove:function(e){l(C,R.filter(function(t){return t!==e}))}}),(0,y.Wk)(I)&&(0,n.jsxs)("div",{className:(0,x.A)({hidden:z,visible:!z}),children:[(0,n.jsx)(w.X,{}),(0,n.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(S.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.access_groups.admin.legacy_access.title")})}),(0,n.jsx)("div",{children:(0,n.jsx)(v.T,{role:"tooltip",content:(0,a.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,n.jsx)(h.g,{square:!0,label:(0,a.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,n.jsxs)("div",{className:"flex flex-col items-start md:flex-row md:items-center md:gap-6",children:[(0,n.jsx)(v.T,{content:Z?(0,a.t)("members_in_space_group_limit_reached"):(0,a.t)("members_in_community_limit_reached"),disabled:!G,className:"flex w-full",children:(0,n.jsx)(u.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,a.t)("spaces.form.add_everyone_from"),id:N,name:N,className:"my-5 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"mx-2 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,isDisabled:G,children:(0,n.jsx)(u.l.ToggleSwitch,{name:N,variant:"small",disabled:G})})}),(0,n.jsx)(u.l.Item,{name:"member_type",className:"w-full text-sm font-normal",hideDescription:!0,hideLabel:!0,hideBorder:!0,hiddenField:!0,children:(0,n.jsx)(u.l.SelectNative,{name:"member_type",options:P})})]})]})]}),(0,n.jsxs)(d.u_.Footer,{className:"flex items-baseline justify-between",children:[(0,n.jsx)("div",{className:"-mt-4",children:(0,n.jsx)(u.l.Checkbox,{id:"notify_members",label:(0,a.t)("spaces.form.edit.members.notify_members"),name:"notify_members",labelClassName:"font-normal text-sm"})}),(0,n.jsx)(O.z,{large:!0,variant:"primary",type:"submit",form:i,disabled:r||!U,children:r?(0,a.t)("spaces.form.edit.members.adding"):(0,a.t)("spaces.form.edit.members.add")})]})]})};function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function E(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var T="add-space-members-form",L={notify_members:!1,community_member_ids:null,member_type:"space_group",should_add_all_members:!1},D=function(e){var t=e.onAdd,r=e.spaceId,l=(0,f.pm)(),p=(0,o.useQueryClient)(),m=(0,s.dd)(),b=c({onError:function(e){l.error(e.message)},onSuccess:function(){p.invalidateQueries("community-members"),l.success((0,a.t)("spaces.form.edit.members.members_added")),(0,i.isFunction)(t)?t():m.hide()}}),h=b.mutate,y=b.isLoading;return(0,n.jsxs)(d.u_,{isOpen:m.visible,onClose:m.visible?m.hide:i.noop,contentPortalId:"add-space-member-content-portal",title:(0,a.t)("spaces.form.edit.members.add_member"),children:[(0,n.jsx)(d.u_.Overlay,{}),(0,n.jsx)(d.u_.Content,{size:"xl",className:"max-w-md",children:(0,n.jsx)(u.l,{id:T,mode:"onChange",onSubmit:function(e){return h(E(I(E(I({spaceId:r},e.community_member_ids&&{communityMembersId:e.community_member_ids}),{notifyMembers:!!e.notify_members}),e.should_add_all_members&&{memberType:e.member_type}),{shouldAddAllMembers:e.should_add_all_members}))},defaultValues:L,className:"flex h-full flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col h-full",children:(0,n.jsx)(A,{onClose:m.visible?m.hide:i.noop,isLoading:y,formId:T})})})]})},M=s.gk.create(function(e){var t=e.spaceId,r=e.onAdd;return(0,n.jsx)(D,{spaceId:t,onAdd:r})}),R=function(){return(0,s.dd)(M)}},2703:function(e,t,r){"use strict";r.d(t,{G:()=>N});var n=r(85893),i=r(67294),o=r(84326),a=r(78456),s=r(57105),l=r(28120),c=r(165),u=r(41342),d=r(39905),f=r(34519),p=r(70973),m=r(56450),b=r(51466),h="course-type-form",y=function(e){var t=e.onSubmit,r=e.courseSetting,i=void 0===r?{course_type:m.t}:r;return(0,n.jsx)(b.l,{id:h,onSubmit:t,defaultValues:{course_setting:i},validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,n.jsx)(p.q,{hideLabel:!0})})},v=r(75148),g=function(e){var t=e.hideForm;return(0,n.jsx)(f.u_.HeaderActions,{children:(0,n.jsx)(v.h,{ariaLabel:(0,o.t)("back"),name:"20-chevron-left",onClick:t,iconSize:20,buttonSize:28,iconClassName:"!text-dark",className:"mr-2",variant:"primary"})})},_=r(3281),x="space_type_form",j=function(e){var t=e.onSubmit,r=(0,u.wh)().currentCommunity;return(0,n.jsx)(b.l,{id:x,onSubmit:t,defaultValues:{post_type:"basic"},children:(0,n.jsx)(_.m,{hideLabel:!0,isCoursesEnabled:null==r?void 0:r.courses_feature_flag_enabled})})};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(e){var t=e.spaceGroupId,r=e.selectedPostType,a=(0,s.dd)(),u=O((0,i.useState)(null!=r?r:"basic"),2),p=u[0],m=u[1],b=O((0,i.useState)(!!r&&"course"!==r),2),v=b[0],_=b[1],w=O((0,i.useState)(!1),2),S=w[0],k=w[1],P=O((0,i.useState)("course"===r),2),C=P[0],N=P[1],A=O((0,i.useState)(),2),I=A[0],E=A[1],T=C?(0,o.t)("spaces.form.create.course_types.choose_course_type"):v?(0,o.t)("spaces.form.create.space_titles.".concat(p)):(0,o.t)("spaces.form.create.space_types.choose_type"),L=function(){a.hide(),N(!1),E(void 0),_(!1),a.remove()};return(0,n.jsxs)(f.u_,{isOpen:a.visible,onClose:L,contentPortalId:"space-type-picker-modal",title:T,children:[(0,n.jsx)(f.u_.Overlay,{}),(0,n.jsxs)(f.u_.Content,{size:"md",children:[(0,n.jsxs)(f.u_.Header,{className:"!px-6 md:!px-8",children:[v&&(0,n.jsx)(g,{hideForm:function(){_(!1),"course"===p&&N(!0)}}),C&&(0,n.jsx)(g,{hideForm:function(){N(!1),_(!1)}}),(0,n.jsx)(f.u_.Title,{className:"w-auto",size:"sm",children:T}),(0,n.jsx)(f.u_.HeaderActions,{children:(0,n.jsx)(f.u_.CloseButton,{onClick:L})})]}),(0,n.jsxs)(f.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:[!v&&!C&&(0,n.jsx)(j,{onSubmit:function(e){var t=e.post_type;m(t),"course"===t?N(!0):_(!0)}}),C&&(0,n.jsx)(y,{onSubmit:function(e){E(e.course_setting),N(!1),_(!0)},courseSetting:I}),v&&(0,n.jsx)(l._,{onClose:L,post_type:p,courseSetting:I,hideSpaceTypePicker:!0,currentSpaceGroupId:t,setExternalLoadingState:k,renderHeader:function(){return(0,n.jsx)(n.Fragment,{})},renderFooter:function(){return(0,n.jsx)(n.Fragment,{})}})]}),(0,n.jsx)(f.u_.Footer,{children:(0,n.jsx)(d.z,{form:v?c.e:C?h:x,type:"submit","data-testid":"create-space-button",variant:"circle",full:!0,large:!0,disabled:S,children:v?S?(0,o.t)("creating"):(0,o.t)("create_space"):(0,o.t)("spaces.form.create.space_types.next")})})]})]})};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t,r=e.spaceGroupId,a=e.postType,u=(0,s.dd)(),p=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return k(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1];return(0,n.jsxs)(f.u_,{isOpen:u.visible,onClose:u.hide,contentPortalId:"create-space-content-portal",title:(0,o.t)("create_space"),children:[(0,n.jsx)(f.u_.Overlay,{}),(0,n.jsxs)(f.u_.Content,{size:"md",children:[(0,n.jsxs)(f.u_.Header,{className:"!px-6 md:!px-8",children:[(0,n.jsx)(f.u_.Title,{size:"sm",children:(0,o.t)("create_space")}),(0,n.jsx)(f.u_.HeaderActions,{children:(0,n.jsx)(f.u_.CloseButton,{onClick:u.hide})})]}),(0,n.jsx)(f.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:(0,n.jsx)(l._,{onClose:u.hide,setExternalLoadingState:b,currentSpaceGroupId:r,post_type:a,renderHeader:function(){return(0,n.jsx)(n.Fragment,{})},renderFooter:function(){return(0,n.jsx)(n.Fragment,{})}})}),(0,n.jsx)(f.u_.Footer,{children:(0,n.jsx)(d.z,{disabled:m,type:"submit",form:c.e,full:!0,large:!0,children:(0,o.t)(m?"creating":"create_space")})})]})]})},C=s.gk.create(function(e){var t=e.spaceGroupId,r=e.postType,i=(0,u.wh)().currentCommunityMember;return(0,a.vb)(i)?(0,n.jsx)(S,{spaceGroupId:t,selectedPostType:r}):(0,n.jsx)(P,{spaceGroupId:t,postType:r})}),N=function(){return(0,s.dd)(C)}},217:function(e,t,r){"use strict";r.d(t,{G:()=>a});var n=r(85893),i=r(84326),o=r(63549),a=function(e){var t=e.isOpen,r=e.onClose,a=e.onConfirm,s=e.confirmText,l=e.disabled;return(0,n.jsx)(o.c,{isOpen:void 0!==t&&t,onClose:r,onConfirm:a,confirmText:s,confirmVariant:"danger",title:(0,i.t)("remove"),disabled:void 0!==l&&l,cancelText:(0,i.t)("cancel"),children:(0,n.jsx)("p",{children:(0,i.t)("remove_member_confirm")})})}},33850:function(e,t,r){"use strict";r.d(t,{L:()=>c});var n=r(85893),i=r(72950),o=r(57105),a=r(83730),s=function(e){var t=e.spaceId,r=(0,o.dd)(),s=r.visible,l=r.hide;return(0,n.jsx)(a.K,{children:(0,n.jsx)(i.G,{isOpen:s,onClose:l,spaceId:t,shouldClearEventStateOnHide:!0})})},l=o.gk.create(function(e){var t=e.spaceId;return(0,n.jsx)(s,{spaceId:t})}),c=function(){return(0,o.dd)(l)}},98329:function(e,t,r){"use strict";r.d(t,{t:()=>ew});var n=r(85893),i=r(57105),o=r(67294),a=r(84326),s=r(41342),l=r(37588),c=r(88663),u=r(37416),d=r(51466),f=r(60878),p=r(33372),m=r(83730),b=r(52293),h=r(1168),y=r(41553),v=r(51922),g=r(80926),_=r(57363),x=r(43544),j=function(e){var t=e.name,r=e.roomType,i=void 0===r?l.H0.STREAM:r,o=(0,g.oQ)().config,s=null==o?void 0:o.live_room_participants_capacity,c=(0,b.Gc)().control,u=[{value:l._d.OPEN,label:(0,a.t)("live_streams.form.access_type_community"),description:(0,n.jsx)(y.Z.LabelSm,{children:(0,a.t)("live_streams.form.".concat(i,".access_type_community_label"),{maxCapacity:s})})},{value:l._d.SECRET,label:(0,a.t)("live_streams.form.access_type_secret"),description:(0,n.jsx)(y.Z.LabelSm,{children:(0,a.t)("live_streams.form.".concat(i,".access_type_secret_label"))})}];return i===l.H0.STREAM&&u.push({value:l._d.PUBLIC_STREAM,label:(0,a.t)("live_streams.form.access_type_public"),description:(0,n.jsx)(y.Z.LabelSm,{children:(0,a.t)("live_streams.form.".concat(i,".access_type_public_label"))})}),(0,n.jsx)(b.Qr,{control:c,name:t,render:function(e){var t,r=e.field,i=r.onChange,o=(t=r.value,u.find(function(e){return e.value===t}));return(0,n.jsx)(x.Lt,{direction:"bottom-start",linkType:"button",button:(0,n.jsx)(x.Lt.MenuButton,{className:"form-control relative inline-block w-full text-left",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("div",{className:"content-start",children:(0,n.jsx)(y.Z.LabelMd,{children:null==o?void 0:o.label})}),(0,n.jsx)("div",{className:"flex content-end",children:(0,n.jsx)(_.JO,{type:"cheveron-down"})})]})}),buttonClassName:"w-full",className:"relative w-full",size:x.wk.EXTRA_LARGE,onChange:i,options:u,labelWeight:"semibold"})}})},w=function(e){var t,r,i=e.children,o=e.name,a=e.rules,s=e.tooltipText,l=e.hidePlaceholder,c=e.placeholder,u=e.inlineReverse,f=e.translationRoot,p=void 0===f?"live_streams.form":f,m=e.appendTranslationRoot,b=e.hideLabel,h=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","name","rules","tooltipText","hidePlaceholder","placeholder","inlineReverse","translationRoot","appendTranslationRoot","hideLabel"]);return(0,n.jsx)(d.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:o,hideDescription:!0,translationRoot:m?"".concat(p,".").concat(m):p,rules:void 0===a?{}:a,hideBorder:!0,fullWidth:!0,hidePlaceholder:void 0!==l&&l,placeholder:c,tooltipText:s,inlineReverse:void 0!==u&&u,hideLabel:void 0!==b&&b},h),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},O=r(91150),S=r(92394),k=function(e){var t=e.roomType,r=(0,b.qo)({name:"recording_enabled"}),i=(0,m.Y)(),s=i.limitsReachedIsOpen,c=i.setRecordingEnabled,u=(0,v.R)().isLimitUrlSharingEnabled,f=(0,b.Gc)(),p=f.watch,h=f.setValue,g=p("access_type"),_=g===l._d.PUBLIC_STREAM||g===l._d.OPEN,x="limit_url_sharing";return(0,o.useEffect)(function(){_&&h(x,!1,{shouldDirty:!0})},[g,h]),(0,o.useEffect)(function(){c(r)},[r]),(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)(S.l,{roomType:t}),(0,n.jsx)(y.Z.TitleMd,{weight:"bold",children:(0,a.t)("live_streams.form.details")}),(0,n.jsxs)("div",{className:"mb-8 mt-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start sm:flex-row",children:[(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pr-3",children:(0,n.jsx)(w,{name:"name",rules:{required:(0,a.t)("live_streams.form.".concat(t,".name_required_error")),maxLength:{value:255,message:(0,a.t)("live_streams.form.".concat(t,".name_length_error"))}},children:(0,n.jsx)(d.l.Input,{autoFocus:!0})})}),(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pl-3",children:(0,n.jsx)(w,{name:"slug",tooltipText:"".concat(window.location.protocol,"//").concat(window.location.hostname,"/live/custom-url-slug"),rules:{maxLength:{value:255,message:(0,a.t)("live_streams.form.slug_length_error")}},children:(0,n.jsx)(d.l.Input,{})})})]}),(0,n.jsx)("div",{className:"mt-3 w-full",children:(0,n.jsx)(w,{name:"description",resizeDisabled:!0,rules:{maxLength:{value:255,message:(0,a.t)("live_streams.form.".concat(t,".description_length_error"))}},children:(0,n.jsx)(d.l.Input,{variant:"textarea",maxLength:255,rows:"6"})})}),(0,n.jsxs)("div",{className:"mt-3 flex flex-col",children:[(0,n.jsx)(w,{name:"recording_enabled",appendTranslationRoot:t,tooltipText:(0,a.t)("live_streams.form.".concat(t,".recording_enabled_tooltip")),inlineReverse:!0,children:(0,n.jsx)(d.l.ToggleSwitch,{name:"recording_enabled",variant:"small"})}),(0,n.jsx)(w,{name:"mute_on_join",appendTranslationRoot:t,inlineReverse:!0,children:(0,n.jsx)(d.l.ToggleSwitch,{name:"mute_on_join",variant:"small"})}),(0,n.jsx)(w,{name:"hide_participants_list",appendTranslationRoot:t,inlineReverse:!0,tooltipText:(0,a.t)("live_streams.form.".concat(t,".hide_participants_list_tooltip")),children:(0,n.jsx)(d.l.ToggleSwitch,{name:"hide_participants_list",variant:"small"})}),u&&!_&&(0,n.jsx)(w,{name:x,appendTranslationRoot:t,tooltipText:(0,a.t)("live_streams.form.".concat(t,".limit_url_sharing_tooltip")),inlineReverse:!0,children:(0,n.jsx)(d.l.ToggleSwitch,{name:x,variant:"small"})})]})]}),(0,n.jsx)(y.Z.TitleMd,{weight:"bold",children:(0,a.t)("live_streams.form.access")}),(0,n.jsx)("div",{className:"my-4",children:(0,n.jsxs)("div",{className:"flex flex-col items-start sm:flex-row",children:[(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pr-3",children:(0,n.jsx)(w,{name:"view_type",labelClassName:"mb-3 text-lg",children:(0,n.jsx)(O.b,{roomType:t})})}),(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pl-3",children:(0,n.jsx)(w,{name:"access_type",labelClassName:"mb-3 text-lg",children:(0,n.jsx)(j,{name:"access_type",roomType:t})})})]})})]})},P=r(40432),C=function(e){var t=(0,b.qo)({name:"room_type",defaultValue:l.H0.STREAM});return(0,o.useEffect)(function(){null==e||e(t)},[t,e]),t},N="attendees",A="cohosts",I="live-form-modal-body",E=r(10194),T=r(58533),L=r(20624),D=r(28414),M=r(98363),R=r(88767),B=r(93199),F=r(95533),z=function(e,t,r,n){var i,o=(0,R.useInfiniteQuery)(["entities-preview",e,t,r,n],function(i){var o,a=i.pageParam;return o=void 0===a?1:a,(0,B.UT)(F.a.entityPreviews.index({params:{page:o,spaces_ids:e,space_groups_ids:t,member_tags_ids:r,members_ids:n}}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),a=o.isLoading,s=o.isFetching,l=o.data,c=o.refetch,u=o.fetchNextPage,d=o.fetchPreviousPage,f=null==l||null==(i=l.pages)?void 0:i.reduce(function(e,t){return e.concat(t.records)},[]),p=(null==l?void 0:l.pages[(null==l?void 0:l.pages.length)-1])||{page:0,count:0,page_count:0,has_next_page:!1,records:[],per_page:50},m=p.page,b=p.count,h=p.page_count,y=b?Math.ceil(b/50):0,v=!!p.has_next_page,g=(m-1)*50+1;return{page:m,records:f,totalRecordCount:b,pageRecordCount:h,pageCount:y,hasNextPage:v,startRecordNumber:g,endRecordNumber:g+h-1,isLoading:a,isFetching:s,refetch:c,fetchNextPage:u,fetchPrevPage:d}},U=function(e){var t=z(e.spaceIds,e.spaceGroupIds,e.memberTagIds,e.memberIds),r=t.records,i=t.fetchNextPage,o=t.hasNextPage;return(0,n.jsx)(T.Z,{next:i,hasMore:o,scrollableTarget:I,loader:(0,n.jsx)(L.m,{}),dataLength:(null==r?void 0:r.length)||0,children:(0,n.jsx)("div",{className:"flex w-full flex-col",children:null==r?void 0:r.map(function(e){var t=e.id,r=e.avatar_url,i=e.name,o=e.email;return(0,n.jsxs)("div",{className:"hover:bg-secondary group flex h-12 items-center rounded-md border-none px-2",children:[(0,n.jsx)("div",{className:"mr-3",children:(0,n.jsx)(M.s,{src:r,name:i,size:"8"})}),(0,n.jsx)("div",{className:"w-1/3",children:(0,n.jsx)(D.Y,{children:(0,n.jsx)(y.Z.LabelSm,{weight:"semibold",children:i})})}),(0,n.jsx)("div",{className:"flex grow justify-end",children:(0,n.jsx)(D.Y,{children:(0,n.jsx)(y.Z.LabelSm,{children:o})})})]},t)})})})},Z={members_ids:[],member_tags_ids:[],space_groups_ids:[],spaces_ids:[]},G=function(){var e=(0,b.qo)({name:"invited_entities_ids"})||Z,t=e.spaces_ids,r=e.space_groups_ids,i=e.member_tags_ids,o=e.members_ids,s=Object.values(e).some(function(e){return!!(null==e?void 0:e.length)})?(0,a.t)("manage"):(0,a.t)("invite");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{name:"invited_entities_ids",className:"z-20 mb-6",hideLabel:!0,children:(0,n.jsx)(E.l,{name:"invited_entities_ids",rules:{required:!1},onModalSave:function(){},onModalClose:function(){},variant:"modal",countLabel:(0,a.t)("live_streams.form.members_invited_label"),tooltipText:(0,a.t)("live_streams.form.members_invited_tooltip"),selectionLabel:(0,a.t)("live_streams.form.members_invited_selection_label"),searchPlaceholder:(0,a.t)("live_streams.form.members_invited_placeholder"),buttonLabel:s,includeAllResultTypes:!0})}),(0,n.jsx)(U,{spaceIds:t,spaceGroupIds:r,memberTagIds:i,memberIds:o})]})},q=r(1924);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var H=function(){var e,t=(0,s.wh)().currentCommunityMember,r=(e=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return V(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],c=r[1],u=t?[t.id]:[],d=(0,b.qo)({name:"cohosts"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{name:"cohosts",className:"z-20 mb-6",hideLabel:!0,children:(0,n.jsx)(E.l,{name:"cohosts",rules:{required:!1},variant:"modal",countLabel:(0,a.t)("live_streams.form.cohosts_added_label"),selectionLabel:(0,a.t)("live_streams.form.cohosts_selection_label"),searchPlaceholder:(0,a.t)("live_streams.form.cohosts_placeholder"),disableSearch:i,excludedMemberIds:u,renderAfterSelection:(0,n.jsx)(q.b,{setIsLimitReached:c,initialCohostQuantity:l.ln,shouldDisplayDisabledSearchMessage:i})})}),(0,n.jsx)(U,{memberIds:Array.isArray(d)?d:[d],memberTagIds:[],spaceGroupIds:[],spaceIds:[]})]})};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(){var e,t=C()===l.H0.STREAM,r=[{label:(0,a.t)("live_streams.form.sections.people_attendees"),key:N}];t&&r.push({label:(0,a.t)("live_streams.form.sections.people_cohosts"),key:A});var i=r.length>1,s=(e=(0,o.useState)(r[0]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return W(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1];return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(P.m,{variant:"underline",className:"sticky",wrapperClassName:"overflow-x-auto overflow-y-hidden",controlled:!0,activeTab:c.label,onClick:function(e){u(r.find(function(t){return t.label===e})||r[0])},options:r}),c.key===N&&(0,n.jsx)(G,{}),c.key===A&&(0,n.jsx)(H,{})]})},J=function(e){var t,r,i=e.appendTranslationRoot,o=void 0===i?"":i,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["appendTranslationRoot","children"]);return(0,n.jsx)(d.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hideBorder:!0,fullWidth:!0,hideDescription:!0,translationRoot:o?"live_streams.form.".concat(o):"live_streams.form"},s),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},K=r(78456),$=function(e){var t=e.iconType,r=e.text;return(0,n.jsx)("li",{className:"list-none",children:(0,n.jsxs)("div",{className:"flex items-start gap-2.5 text-left",children:[(0,n.jsx)("span",{className:"mt-0.5 flex w-4",children:(0,n.jsx)(_.JO,{size:16,type:t})}),(0,n.jsx)(y.Z.LabelSm,{children:r})]})})},X=function(e){var t=e.title,r=e.onClick,i=e.isSelected,o=e.disabled,a=e.children;return(0,n.jsxs)("button",{type:"button",className:(0,h.A)("order-none box-border flex h-full w-full cursor-pointer flex-col items-stretch gap-2 rounded-lg border border-solid p-6 pt-5",{"bg-tertiary border-tertiary":i,"pointer-events-none cursor-not-allowed opacity-70":o}),onClick:function(){o||r()},children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(y.Z.LabelLg,{weight:"semibold",children:t}),(0,n.jsx)("div",{className:"text-dark",children:(0,n.jsx)(_.JO,{type:i?"circle-checked":"circle-unchecked",size:16})})]}),a&&(0,n.jsx)("div",{className:"mt-1",children:a})]})},Y=function(e){var t=e.onChange,r=e.value,i=e.liveStreamConfig,o=e.shouldDisableEventOption,c=(0,s.wh)().currentCommunityMember,u=(0,K.vb)(c),d=null==i?void 0:i.live_stream_max_host_capacity,f=(null==i?void 0:i.live_stream_max_spectator_capacity)+((0,g.wK)({enabled:u}).currentQuantity||0),p=null==i?void 0:i.live_room_participants_capacity;return(0,n.jsxs)("div",{className:"order-1 grid grid-cols-1 gap-2 p-0 sm:w-[1024px] sm:grid-cols-3 sm:gap-6",children:[(0,n.jsx)("div",{className:"order-3 h-full sm:order-1","data-testid":"schedule-a-live-event",children:(0,n.jsx)(X,{title:(0,a.t)("live_streams.room_type_picker.live_event.v3.title"),onClick:function(){return t(l.H0.EVENT)},isSelected:r===l.H0.EVENT,disabled:o,children:(0,n.jsxs)("ul",{className:"order-1 flex flex-none list-outside flex-col items-start gap-3 self-stretch p-0",children:[(0,n.jsx)($,{iconType:"16-join-date",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_1",{spectators:f})}),(0,n.jsx)($,{iconType:"16-calendar-add",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_2",{cohosts:d})}),(0,n.jsx)($,{iconType:"16-live",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_3")}),(0,n.jsx)($,{iconType:"20-members",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_4")})]})})}),(0,n.jsx)("div",{className:"order-2 h-full","data-testid":"start-a-live-room",children:(0,n.jsx)(X,{title:(0,a.t)("live_streams.room_type_picker.live_room.title"),onClick:function(){return t(l.H0.CONFERENCE)},isSelected:r===l.H0.CONFERENCE,children:(0,n.jsxs)("ul",{className:"order-1 flex flex-none list-outside flex-col items-start gap-3 self-stretch p-0",children:[(0,n.jsx)($,{iconType:"20-checkmark-circle",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_1")}),(0,n.jsx)($,{iconType:"20-members",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_2",{participants:p})}),(0,n.jsx)($,{iconType:"16-video",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_3")}),(0,n.jsx)($,{iconType:"16-chat",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_4")})]})})}),(0,n.jsx)("div",{className:"order-1 h-full sm:order-3","data-testid":"start-a-live-stream",children:(0,n.jsx)(X,{title:(0,a.t)("live_streams.room_type_picker.live_stream.title"),onClick:function(){return t(l.H0.STREAM)},isSelected:r===l.H0.STREAM,children:(0,n.jsxs)("ul",{className:"order-1 flex flex-none list-outside flex-col items-start gap-3 self-stretch p-0",children:[(0,n.jsx)($,{iconType:"20-checkmark-circle",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_1")}),(0,n.jsx)($,{iconType:"20-members",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_2",{spectators:f})}),(0,n.jsx)($,{iconType:"16-video",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_3")}),(0,n.jsx)($,{iconType:"16-chat",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_4")})]})})})]})},ee=function(e){var t=e.name,r=e.rules,i=e.liveStreamConfig,o=e.shouldDisableEventOption,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","rules","liveStreamConfig","shouldDisableEventOption"]),s=(0,b.Gc)().control;return(0,n.jsx)(b.Qr,{control:s,name:t,rules:r,render:function(e){var t,r,s=e.field,l=s.onChange,c=s.value;return(0,n.jsx)(Y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={onChange:l,value:c,liveStreamConfig:i,shouldDisableEventOption:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}})},et=function(){var e=(0,g.oQ)().config,t={canCreateEvent:((0,s.nT)().helpers.spacesWithPostCreationAllowed()||[]).some(function(e){return"event"===e.post_type})}.canCreateEvent;return(0,n.jsx)("div",{className:"mx-auto w-auto",children:(0,n.jsx)(J,{name:"room_type",rules:{required:(0,a.t)("live_streams.form.room_type_required_error")},hideLabel:!0,children:(0,n.jsx)(ee,{name:"room_type",liveStreamConfig:e,shouldDisableEventOption:!t})})})},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.H0.STREAM,t={roomType:(0,a.t)("live_streams.form.sections.room_type"),details:(0,a.t)("live_streams.form.sections.".concat(e,".room_details")),people:(0,a.t)("live_streams.form.sections.people")};return{sections:t,sectionTitles:Object.values(t)}},en=function(e){var t=e.setRoomType,r=e.triggerValidationRef,i=(0,c.eW)().currentSection,a=C(t),s=er(a).sections,l=(0,b.Gc)().trigger,u=i===s.roomType;return(0,o.useEffect)(function(){r&&l&&(r.current=l)},[r,l]),(0,n.jsxs)("div",{className:(0,h.A)("mx-auto px-4 py-2 sm:px-0 sm:py-14",{"max-w-screen-md":!u,"max-w-max":u}),children:[(0,n.jsx)(y.Z.TitleXl,{weight:"bold hidden sm:block",children:i}),(0,n.jsxs)("div",{className:"sm:mt-8",children:[i===s.roomType&&(0,n.jsx)(et,{}),i===s.details&&(0,n.jsx)(k,{roomType:a}),i===s.people&&(0,n.jsx)(Q,{})]})]})},ei=r(42953),eo=r(64282),ea=r(39905),es=function(e){var t=er(e).sectionTitles,r=(0,c.eW)(),n=r.currentSection,i=r.setCurrentSection,o=r.formId,a=r.isSaving,s=r.onExit,l=r.onSave,u=t.indexOf(n),d=u+1,f=(null==t?void 0:t.length)||0;return{formId:o,isSaving:a,currentStep:d,totalSteps:f,isFirstStep:1===d,isLastStep:d===f,next:function(){u!==f-1&&i(t[u+1])},prev:function(){0!==u&&i(t[u-1])},onSave:l,onExit:s}},el=function(e){var t=e.roomType,r=e.validateAndContinue,i=es(t),o=i.formId,s=i.isSaving,c=i.currentStep,u=i.totalSteps,d=i.isFirstStep,f=i.isLastStep,p=i.next,b=i.prev,h=i.onExit,v=(0,eo.Z)(),g=(0,m.Y)(),_=g.streamingHoursAvailable,x=g.recordingHoursReached,j=g.limitsReachedOnOpen,w=function(e){e.preventDefault(),j()};return(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)(y.Z.TitleSm,{weight:"semibold",color:"text-light text-sm",children:(0,a.t)("live_streams.form.step",{currentStep:c,totalSteps:u})}),(0,n.jsxs)("div",{className:"flex items-center gap-3 sm:gap-5",children:[2===c&&!_&&x?(0,n.jsxs)("div",{className:"flex justify-start",children:[(0,n.jsx)("button",{type:"button",className:"mr-1 cursor-pointer underline",onClick:w,children:(0,a.t)("live_streams.form.two_upgrades")}),(0,n.jsx)("p",{children:(0,a.t)("live_streams.form.included")})]}):2===c&&(!_||x)?(0,n.jsxs)("div",{className:"flex justify-start",children:[(0,n.jsx)("button",{type:"button",className:"mr-1 cursor-pointer underline",onClick:w,children:(0,a.t)("live_streams.form.one_upgrade")}),(0,n.jsx)("p",{children:(0,a.t)("live_streams.form.included")})]}):null,d&&(0,n.jsx)(ea.z,{onClick:h,variant:"secondary",children:(0,a.t)("live_streams.form.cancel")}),!d&&(0,n.jsx)(ea.z,{onClick:b,type:"button",variant:"secondary",children:(0,a.t)("live_streams.form.prev")}),!f&&(0,n.jsx)(ea.z,{onClick:function(e){e.preventDefault(),t===l.H0.EVENT?(h(),v.show({locationType:ei.Bq.LIVE_STREAM})):r(p)},type:"button",variant:"circle",className:"border-darkest border",children:(0,a.t)("live_streams.form.next")}),f&&(0,n.jsx)(ea.z,{form:o,disabled:s,type:"submit",variant:"circle",className:"border-darkest border",children:(0,a.t)("live_streams.form.submit_button_label")})]})]})},ec=function(){return(0,n.jsx)(c.h4.Actions,{children:(0,n.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,a.t)("live_streams.form.title_v3")})})},eu=r(70442),ed=r(51630),ef=r(13532),ep=function(e,t){var r=(0,f.pm)(),n=r.success,i=r.error,o=(0,eu.k6)();return(0,R.useMutation)(function(e){return ed.Qk.create({formData:e,forReactQuery:!0})},{onSuccess:function(r){t&&t(),n((0,a.t)("live_streams.form.".concat(e,".created_successfully"))),o.push(ef.dE.room({roomSlug:r.slug}))},onError:function(){return i((0,a.t)("live_streams.form.create_error"))}})},em=function(){var e=(0,s.wh)().currentCommunity;return{room_type:l.H0.STREAM,view_type:l.Bk.GRID,access_type:l._d.OPEN,recording_enabled:!!(null==e?void 0:e.live_stream_recording_enabled),mute_on_join:!1,hide_participants_list:!1,limit_url_sharing:!1}},eb=r(96486);function eh(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ey=function(){var e=(0,o.useRef)(null);return{validateAndContinue:function(t){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!(0,eb.isFunction)(e.current))return[3,2];return[4,e.current()];case 1:if(!r.sent())return[2];r.label=2;case 2:return t(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){eh(o,n,i,a,s,"next",e)}function s(e){eh(o,n,i,a,s,"throw",e)}a(void 0)})})()},triggerValidationRef:e}};function ev(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eg(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var e_=function(e){var t,r=e.isOpen,i=e.onClose,b=((0,s.wh)().currentCommunity||{supports_live_streams:!1}).supports_live_streams,h=(t=(0,o.useState)(l.H0.STREAM),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ev(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ev(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1],g=er(y),_=g.sections,x=g.sectionTitles,j=em(),w=ep(y,i),O=w.mutateAsync,S=w.isLoading,k=ey(),P=k.validateAndContinue,C=k.triggerValidationRef,N=(0,f.pm)().success,A=(0,m.Y)(),E=A.shouldUpgradeAddons,T=A.purchaseRecordingsAddonWhenLimitReached,L=A.purchaseStreamingAddonWhenLimitReached,D=function(e){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,T()];case 1:return r.sent(),[4,L()];case 2:return r.sent(),E&&N((0,a.t)("settings.billing.add_ons.changes_succeeded")),[4,O(e)];case 3:return r.sent(),[3,5];case 4:var n,i;return n=t=r.sent(),(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)&&console.error(t.message),[3,5];case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){eg(o,n,i,a,s,"next",e)}function s(e){eg(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsx)(u.x,{isOpen:r,onClose:i,shouldShowCloseButton:!0,contentPortalId:"live",children:(0,n.jsxs)(c.MW,{formId:"live-QWZ7d7ysBkm5cwhL235J9Q",sections:x,initialSection:_.roomType,title:(0,a.t)("live_streams.form.title_v3"),onExit:i,onSave:D,isSaving:S,children:[(0,n.jsx)(u.x.Header,{children:(0,n.jsx)(ec,{})}),(0,n.jsxs)(u.x.Body,{id:I,wrapperClassName:"max-w-full",children:[b&&(0,n.jsx)(d.l,{id:"live-QWZ7d7ysBkm5cwhL235J9Q",onSubmit:D,defaultValues:j,children:(0,n.jsx)(en,{setRoomType:v,triggerValidationRef:C})}),!b&&(0,n.jsx)("div",{className:"mx-auto max-w-screen-md sm:py-14",children:(0,n.jsx)(p.s,{})})]}),b&&(0,n.jsx)(u.x.Footer,{children:(0,n.jsx)(el,{roomType:y,validateAndContinue:P})})]})})},ex=function(){var e=(0,i.dd)(),t=e.visible,r=e.hide;return(0,n.jsx)(m.K,{children:(0,n.jsx)(e_,{isOpen:t,onClose:r})})},ej=i.gk.create(function(){return(0,n.jsx)(ex,{})}),ew=function(){return(0,i.dd)(ej)}},71408:function(e,t,r){"use strict";r.d(t,{Y:()=>j});var n=r(85893),i=r(96486),o=r(57105),a=r(88767),s=r(84326),l=r(51630),c=r(41342),u=r(95727),d=r(60878),f=r(4403),p=r(38086),m=r(41553);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.space,r={default:["space_members","space_settings"],basic:["posts","engagement"],event:["events","engagement"],course:["course_info","course_progress","videos_and_files","comments"],image:["posts","engagement"],chat:["messages"]},i=h(r[t.post_type]||[]).concat(h(r.default));return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(m.Z.BodyMd,{children:(0,s.t)("spaces.delete.description")}),(0,n.jsxs)("div",{className:"border-primary space-y-2 rounded-lg border p-4",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:t.name})}),i&&(0,n.jsx)("ul",{className:"list-inside list-none",children:i.map(function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(m.Z.LabelSm,{children:(0,s.t)(["spaces.delete.details",e])})},e)})})]}),(0,n.jsx)(p.K,{contentSpecType:f.ry.Space,contentSpecId:t.id})]})};function v(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var g=function(e){var t=e.show,r=e.space,o=void 0===r?{}:r,f=e.onClose,p=e.onSuccess,m=(0,d.pm)(),b=(0,c.nT)().actions.refresh,h=(0,a.useMutation)(function(){return l.rb.destroy({id:o.id})},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,b()];case 1:return e.sent(),(0,i.isFunction)(p)&&p(),f(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){m.error((0,s.t)("delete_space_failed"))}}),g=h.mutate,_=h.isLoading;return(0,n.jsx)(u.V,{title:(0,s.t)("spaces.delete.title"),isOpen:t,confirmUserPrompt:(0,s.t)("spaces.delete.confirm_prompt"),onClose:f,onCancel:f,onConfirm:g,confirmVariant:"danger",isDisabled:_,confirmText:_?(0,s.t)("deleting"):(0,s.t)("confirm"),children:(0,n.jsx)(y,{space:o})})},_=function(e){var t=e.space,r=e.onSuccess,a=e.onClose,s=void 0===a?i.noop:a,l=(0,o.dd)();return(0,n.jsx)(g,{show:l.visible,space:t,onClose:function(){s&&s(),l.hide()},onSuccess:r})},x=o.gk.create(function(e){var t=e.space,r=e.onSuccess,i=e.onClose;return(0,n.jsx)(_,{space:t,onSuccess:r,onClose:i})}),j=function(){return(0,o.dd)(x)}},23628:function(e,t,r){"use strict";r.d(t,{a:()=>Y});var n=r(85893),i=r(67294),o=r(84326),a=r(57105),s=r(51466),l=r(51169),c=r(18826),u=r(25885),d=r(45697),f=r.n(d),p=r(34519),m=r(41553),b=function(){var e=(0,p.UV)().contentPortalElement;return(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)(m.Z.TitleSm,{weight:"semibold",children:(0,o.t)("space_groups.form.moderators")}),(0,n.jsx)(s.l.Item,{translationRoot:"space_groups.form.edit",name:"moderator_community_member_ids",tooltipText:(0,o.t)("space_groups.form.edit.moderator_community_member_ids_tooltip"),hideDescription:!0,hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(s.l.CommunityMemberSelect,{name:"moderator_community_member_ids",variant:"tags",excludeAdmins:!0,appendTo:e})})]})};b.propTypes={moderators:f().array};var h=function(e){var t=e.formId,r=e.onSubmit,i=e.defaultValues,o=e.loading;return void 0!==o&&o?(0,n.jsx)(l.a,{}):(0,n.jsx)(s.l,{id:t,onSubmit:r,defaultValues:i,className:"mx-1 h-full",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(u.K,{}),(0,n.jsx)(b,{}),(0,n.jsx)(c.a,{})]})})},y=r(88767),v=r(70442),g=r(51630),_=r(41342),x=r(13532),j=r(60878),w=function(e){var t,r,n=e.spaceGroup,i=e.onSuccess,a=(0,j.pm)(),s=a.success,l=a.error,c=(0,v.k6)(),u=(0,_.p7)(n.id).refetch;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,y.useMutation)(function(e){var t=e.moderator_community_member_ids,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["moderator_community_member_ids"]);return g.iD.update(n.id,{space_group:r,moderator_community_member_ids:t})},{onSuccess:function(e){s((0,o.t)("space_groups.form.edit.saved_successfully")),u(),i(),c.push(x.Ts.show({spaceGroupSlug:e.slug}))},onError:function(){return l((0,o.t)("space_groups.form.create.save_error"))}})),r=r={spaceGroup:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},O=r(39804),S=r(1168),k=r(17617),P=r(24804),C=r(24330),N=r(39905),A=r(11944),I=r(55929),E=r(217),T=r(94612),L=r(14598),D=r(78940),M=r(93199);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var F=r(86003),z=r(1866),U=r(78793);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(e){var t,r,a=e.spaceGroup,s=(0,j.pm)(),c=(0,y.useQueryClient)(),u=G((0,i.useState)(!1),2),d=u[0],f=u[1],p=G((0,i.useState)(!1),2),m=p[0],b=p[1],h=G((0,i.useState)(""),2),v=h[0],g=h[1],_=G((0,i.useState)(null),2),w=_[0],O=_[1],S=(0,I.L)(),k=(0,L.H)().showMemberProfileEdit,P=(0,D.fd)({filters:{space_groups:a.slug},sort:D.zw.ROLE,query:v}),C=P.isLoading,N=P.hasNextPage,A=P.totalMembers,Z=P.fetchNextPage,q=P.members,V=P.queryKey,H=(t={onError:function(e){s.error(e.message)},onSuccess:function(){c.invalidateQueries(V),s.success((0,o.t)("space_groups.form.edit.members.members_removed"))},onSettled:function(){f(!1),b(!1),O(null)}},(0,y.useMutation)(function(e){var t=e.spaceGroupId,r=e.memberId;return(0,M.pC)(x.av.spaceGroups.deleteMember({spaceGroupId:t,memberId:r}))},t)).mutate,W=(r={onError:function(e){s.error(e.message)},onSuccess:function(){c.invalidateQueries(V),s.success((0,o.t)("space_groups.form.edit.members.changed_role"))}},(0,y.useMutation)(function(e){var t,r=e.spaceGroupId,n=e.memberId,i=e.isModerator;return(t=function(){var e,t,o;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:return[4,(0,M.UT)(x.av.communityMember.settings({memberId:n}))];case 1:var s,l;return t=(e=a.sent()).moderating_space_group_ids||[],o=i?((function(e){if(Array.isArray(e))return R(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([r]):t.filter(function(e){return e!==r}),[2,(0,M.aU)(x.av.communityMember.update({memberId:n}),(s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),l=l={moderator_space_group_ids:o},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(l,e))}),s))]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){B(o,n,i,a,s,"next",e)}function s(e){B(o,n,i,a,s,"throw",e)}a(void 0)})})()},r)).mutate,Q=m?(0,o.t)("space_groups.form.edit.members.removing"):(0,o.t)("space_groups.form.edit.members.remove_member");if(C)return(0,n.jsx)(l.a,{});var J=q.map(function(e){var t,r=e.id,n=e.avatar_url,i=e.name,o=e.email,s=e.roles,l=e.moderating_space_group_ids;return{id:r,avatarUrl:n,name:i,email:o,public_uid:e.public_uid,role:(t=a.id,s.admin?"Admin":s.moderator&&l.includes(t)?"Moderator":"Member")}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between border-b border-gray-200 px-8 py-3 text-gray-600",children:[(0,n.jsx)(F.h,{onSearch:g,placeholder:(0,o.t)("space_groups.search_members")}),(0,n.jsx)(z.n,{spaceGroupId:a.id})]}),(0,n.jsx)("div",{className:"h-full overflow-auto px-4 py-2",children:(0,n.jsx)(T.r,{searchTerm:v,members:J,dataLength:A,next:Z,hasMore:N,onEdit:function(e){k({member:e})},onRemove:function(e){O(e),f(!0)},onAdd:function(){S.show({spaceGroupId:a.id})},onRoleChange:function(e,t){var r=t===U.K.MODERATOR;W({spaceGroupId:a.id,memberId:e,isModerator:r})},variant:"space-group-members",scrollableTarget:"scrollable-content"})}),(0,n.jsx)(E.G,{isOpen:d,onClose:function(){return f(!1)},onConfirm:function(){w&&d&&(b(!0),H({spaceGroupId:a.id,memberId:w}))},disabled:m,confirmText:Q})]})};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J="edit-space-group-form",K=["Details","Members"],$=function(e){var t=e.spaceGroup,r=e.tab,s=void 0===r?K[0]:r,l=Q((0,i.useState)(s),2),c=l[0],u=l[1],d=Q((0,P.k)(!1),2),f=d[0],m=d[1],b=null==t?void 0:t.id,y=(0,_.p7)(b),v=y.data,g=y.isLoading,x=(0,k.kK)(),j=(0,_.e2)(),I=W({},t,void 0===v?{}:v),E=(0,a.dd)(),T=null==I?void 0:I.active_members_count,L=w({spaceGroup:I,onSuccess:E.hide}),D=L.mutateAsync,M=L.isLoading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.u_,{isOpen:E.visible,onClose:E.hide,contentPortalId:"edit-space-group-content-portal",title:(0,o.t)("space_groups.form.edit.title"),children:[(0,n.jsx)(p.u_.Overlay,{}),(0,n.jsxs)(p.u_.Content,{size:"xl",children:[(0,n.jsxs)(p.u_.Header,{children:[(0,n.jsx)(p.u_.Title,{size:"md",children:(0,o.t)("space_groups.form.edit.title")}),(0,n.jsx)(p.u_.HeaderActions,{children:(0,n.jsx)(p.u_.CloseButton,{onClick:E.hide})})]}),(0,n.jsx)(p.u_.Body,{id:"scrollable-content",className:(0,S.A)({"px-0 py-0":"Members"===c}),children:(0,n.jsxs)(A.O.Group,{selectedIndex:K.indexOf(c),onChange:function(e){return u(K[e])},children:[(0,n.jsxs)(A.O.List,{children:[(0,n.jsx)(A.O,{children:(0,o.t)("space_groups.details")}),(0,n.jsx)(A.O,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.t)("space_groups.members")," ",(0,n.jsx)(C.g,{square:!0,inverted:!0,label:String(T)})]})})]}),(0,n.jsxs)(A.O.Panels,{className:"mt-4",children:[(0,n.jsx)(A.O.Panel,{children:(0,n.jsx)(h,{formId:J,onSubmit:function(e){var t;return(t=function(){var t,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,D(e)];case 1:return n.sent(),null==j||null==(r=j.actions)||null==(t=r.refresh)||t.call(r),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){H(o,n,i,a,s,"next",e)}function s(e){H(o,n,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:I,loading:g})}),(0,n.jsx)(A.O.Panel,{children:(0,n.jsx)(q,{spaceGroup:I})})]})]})}),"Details"===c&&(0,n.jsxs)(p.u_.Footer,{className:"flex w-full justify-between gap-4 md:gap-0",children:[(0,n.jsx)(N.z,{type:"button",variant:"danger-outline",className:"hidden md:inline-block",onClick:m,children:(0,o.t)("space_groups.delete_space_group")}),(0,n.jsx)(N.z,{type:"button",full:!0,variant:"secondary",className:"inline-block text-center md:hidden",onClick:function(){E.hide()},children:(0,o.t)("cancel")}),(0,n.jsx)(N.z,{full:x,type:"submit",variant:"circle",form:J,disabled:M,children:M?(0,o.t)("space_groups.form.edit.submitting"):(0,o.t)("save_changes")})]})]})]}),(0,n.jsx)(O.x,{spaceGroupId:I.id,show:f,onClose:m,onSuccess:E.hide})]})},X=a.gk.create(function(e){return(0,n.jsx)($,W({},e))}),Y=function(){return(0,a.dd)(X)}},31136:function(e,t,r){"use strict";r.d(t,{S:()=>b});var n=r(85893),i=r(23560),o=r.n(i),a=r(70442),s=r(84326),l=r(33263),c=r(57105),u=r(41342),d=r(63549),f=r(41553),p=function(e){var t=e.onClose,r=(0,c.dd)(),i=(0,a.k6)(),p=(0,u.wh)().currentCommunity,m=(0,l.m)({onEnableFlagSuccess:function(){var e=null==p?void 0:p.home_page_enabled;if(o()(t)&&t(),r.hide(),e)return i.push("/home");window.location.href="/"}}).enableFlag;return(0,n.jsx)(d.c,{isOpen:r.visible,onClose:r.hide,title:(0,s.t)("remove_onboarding_confirmation_modal.title"),cancelText:(0,s.t)("remove_onboarding_confirmation_modal.cancel"),confirmText:(0,s.t)("remove_onboarding_confirmation_modal.confirm"),onConfirm:function(){m("getting_started_checklist_hidden")},children:(0,n.jsx)(f.Z.BodyMd,{children:(0,s.t)("remove_onboarding_confirmation_modal.description")})})},m=c.gk.create(function(e){var t=e.onClose;return(0,n.jsx)(p,{onClose:t})}),b=function(){return(0,c.dd)(m)}},4210:function(e,t,r){"use strict";r.d(t,{x:()=>b});var n=r(67294),i=r(86664),o=r(84326),a=r(88767),s=r(93199),l=r(13532),c=r(60878);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var b=function(e){var t=e.CardElement,r=e.currency,u=e.onSuccess,d=e.paymentMethodsRegistrableByCurrency,b=(0,i.useStripe)(),h=(0,i.useElements)(),y=(0,c.pm)(),v=y.success,g=y.error,_={createSetupIntentMutation:(0,a.useMutation)(function(e){return(0,s.Cu)(l.av.communityMemberPaymentMethod.setupIntent.create(),e)}),createPaymentMethodMutation:(0,a.useMutation)(function(e){return(0,s.Cu)(l.av.communityMemberPaymentMethod.create(),e)})},x=_.createPaymentMethodMutation,j=_.createSetupIntentMutation,w=p((0,n.useState)(!1),2),O=w[0],S=w[1],k=p((0,n.useState)(!1),2),P=k[0],C=k[1],N={currency_id:null==r?void 0:r.id},A=function(e){var r=e.currencyId;return f(function(){var e;return m(this,function(n){switch(n.label){case 0:return[4,j.mutateAsync({currency_id:r})];case 1:var i;return[4,(i=n.sent().client_secret,f(function(){var e,r,n;return m(this,function(o){switch(o.label){case 0:return[4,b.confirmCardSetup(i,{payment_method:{card:h.getElement(t)}})];case 1:if(r=(e=o.sent()).setupIntent,n=e.error)throw Error(n.message);return[2,r.payment_method]}})})())];case 2:return e=n.sent(),[4,x.mutateAsync({currency_id:r,payment_method_processor_id:e})];case 3:return n.sent(),[2]}})})()};return{defaultValues:N,isConfirmingCard:P,disableButton:!O||P,handleOnClick:function(e){return f(function(){return m(this,function(t){switch(t.label){case 0:C(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,A({currencyId:e.currency_id})];case 2:return t.sent(),u&&u(),v((0,o.t)("member_profile_modal.billing.subscriptions.alerts.success.payment_created")),[3,5];case 3:return g(t.sent().message),[3,5];case 4:return C(!1),[7];case 5:return[2]}})})()},handleOnChangeCard:function(e){e.complete?S(!0):O&&S(!1)},currenciesOptions:r?[{value:r.id,label:r.code.toUpperCase()}]:d.map(function(e){return{value:e.id,label:e.code.toUpperCase()}}),createPaymentMethod:A}}},65048:function(e,t,r){"use strict";r.d(t,{c:()=>ey});var n=r(85893),i=r(86664),o=r(67560),a=r(34519),s=r(57105),l=r(65672),c=r(1168),u=r(76289),d=r(67294),f=(0,d.createContext)({});f.displayName="ChangePlanContext";var p=function(e){var t=e.subscription,r=e.isManagingMember,i=e.children;return(0,n.jsx)(f.Provider,{value:{subscription:t,isManagingMember:!!r},children:i})},m=r(84326),b=(0,d.createContext)({});b.displayName="ChangePlanFormContext";var h=function(e){var t=e.children;return(0,n.jsx)(b.Provider,{value:e,children:t})},y=function(){return(0,d.useContext)(b)},v=r(57363),g=r(46681),_=r(41690),x=function(e){var t=e.title,r=e.subtitle;return(0,n.jsxs)(a.u_.Body,{className:"flex flex-col items-center py-14",children:[(0,n.jsx)("div",{className:"m-8 flex h-16 w-16 justify-center",children:(0,n.jsx)(v.JO,{className:"!h-full !w-full",type:"loader",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})}),(0,n.jsxs)("div",{className:"space-y-4 text-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)(_.P,{children:t})}),(0,n.jsx)("div",{children:(0,n.jsx)(g.Di,{children:r})})]})]})},j=r(39905),w=r(51466),O=r(41553),S=function(e){var t=e.title,r=e.children,i=y(),o=i.dismiss,s=i.canGoBack,l=i.goBack,c=i.formDefaults,u=i.submitLabel,d=i.submitDisabled,f=i.submit;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.u_.Header,{children:[(0,n.jsx)(a.u_.Title,{size:"md",className:"text-center",children:t}),(0,n.jsx)(a.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(a.u_.CloseButton,{onClick:o})}),s&&(0,n.jsx)(a.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsxs)(j.z,{type:"button",variant:"plain",small:!0,onClick:l,children:[(0,n.jsx)("span",{className:"sr-only",children:(0,m.t)("back")}),(0,n.jsx)(v.JO,{type:"20-chevron-left",size:20})]})})]}),(0,n.jsx)(a.u_.Body,{children:(0,n.jsx)(w.l,{id:"change_plan_form",defaultValues:c,onSubmit:f,className:"flex flex-col",children:r})}),(0,n.jsxs)(a.u_.Footer,{children:[(0,n.jsx)(j.z,{full:!0,large:!0,variant:"circle",form:"change_plan_form",type:"submit",disabled:d,children:u}),(0,n.jsxs)("div",{className:"mt-2 flex flex-row items-center justify-center",children:[(0,n.jsx)(v.JO,{type:"lock-solid",className:"mt-2 !h-6 !w-6"}),(0,n.jsx)(O.Z.BodyXs,{weight:"normal",children:(0,m.t)("member_profile_modal.billing.subscriptions.payment_secure_and_encrypted")})]})]})]})},k=r(28890),P=r(51169),C=r(8807),N=function(e){var t=e.className,r=y(),i=r.CardElement,o=r.handleOnChangeCard;return(0,n.jsxs)("div",{className:(0,c.A)(void 0===t?"mt-6":t),children:[(0,n.jsx)(C.T1,{weight:"semibold",children:(0,m.t)("member_profile_modal.billing.subscriptions.add_payment_method.card_details")}),(0,n.jsx)("div",{className:"mt-1 rounded border border-solid border-gray-300 p-3",children:(0,n.jsx)(i,{options:{hidePostalCode:!0},onChange:o})})]})},A=function(e){var t=e.couponCode,r=e.onRemoveCoupon;return(0,n.jsxs)("div",{className:"bg-tertiary flex w-fit flex-row items-center gap-x-2 rounded-lg px-4 py-2",children:[(0,n.jsx)(O.Z.LabelSm,{weight:"semibold",children:t}),(0,n.jsx)(v.JO,{type:"20-close",size:20,className:"cursor-pointer",onClick:r})]})},I=r(13241),E=r(94250);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){var t,r=e.className,i=e.direction,o=void 0===i?"row":i,a=e.detailsClassName,s=e.label,l=e.labelSize,u=e.labelWeight,d=e.details,f=e.detailsSize,p=e.detailsWeight,m=e.detailsColored,b=void 0!==m&&m,h=e.description,y=e.descriptionSize,v=e.descriptionColor,_=e.enableCursor,x=e.labelColor,j="md"===(void 0===l?"md":l)?g.Di:C.T1,w="md"===(void 0===f?"md":f)?g.Di:C.T1,O="sm"===(void 0===y?"sm":y)?C.T1:E.wN;return(0,n.jsxs)("div",{className:(0,c.A)((T(t={},"flex flex-row justify-between space-x-4","row"===o),T(t,"flex flex-col space-y-2","col"===o),T(t,"cursor-pointer",void 0!==_&&_),t),r),children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("div",{children:(0,n.jsxs)(j,{weight:u,color:void 0===x?"text-base":x,children:[s," "]})}),h&&(0,n.jsx)("div",{className:"leading-3 text-gray-500",children:(0,n.jsx)(O,{color:v,children:h})})]}),d&&(0,n.jsx)("div",{className:(0,c.A)("whitespace-nowrap",a,T({},"text-v2-success",b)),children:(0,n.jsx)(w,{weight:p,color:b?"text-v2-success":void 0,children:d})})]})},D=r(52293);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var R=function(){var e,t=y(),r=t.priceChangePreview,n=t.previewMutation,i=t.validateNewCouponHandler,o=(e=(0,d.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return M(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],l=(0,D.cI)(),c=l.register,u=l.watch,f=l.reset,p=u().new_coupon_code;return{enableCoupon:a,toggleAddCoupon:function(e){e.preventDefault(),s(!a)},handleOnClickCouponValidation:function(e){e.preventDefault(),i({new_paywall_price_id:r.paywall_price_id,new_coupon_code:p})},handleOnClickRemoveCoupon:function(e){e.preventDefault(),f({new_coupon_code:""}),s(!1),n.mutate({new_paywall_price_id:r.paywall_price_id})},reactHook:{register:c}}},B=function(){var e,t,r=y().priceChangePreview,i=R(),o=i.enableCoupon,a=i.toggleAddCoupon,s=i.handleOnClickCouponValidation,l=i.handleOnClickRemoveCoupon,c=i.reactHook,u=r.paywall_coupon_code,d=c.register;return o?u?(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(A,{couponCode:u,onRemoveCoupon:l})}):(0,n.jsxs)("div",{className:"mb-3 flex flex-col items-start gap-y-1",children:[(0,n.jsx)(L,{label:(0,m.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.field_label"),labelSize:"sm",labelWeight:"semibold"}),(0,n.jsxs)("div",{className:"flex w-full flex-row gap-x-1",children:[(0,n.jsx)(I.I,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({variant:"text"},d("new_coupon_code")),t=t={suffix:(0,n.jsx)(v.JO,{type:"20-close",size:20,className:"cursor-pointer",onClick:a})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),(0,n.jsx)(j.z,{type:"button",onClick:s,variant:"tertiary",children:(0,n.jsx)(O.Z.LabelSm,{weight:"medium",children:(0,m.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.activate")})})]})]}):(0,n.jsx)(j.z,{type:"button",onClick:a,variant:"link",className:"mb-3 !px-0 no-underline hover:no-underline",small:!0,children:(0,n.jsx)(O.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,m.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.add_link")})})},F=function(e){var t=e.planName,r=e.planPricing;return(0,n.jsxs)("div",{className:"flex flex-row justify-between space-x-2 md:space-x-3",children:[(0,n.jsx)(O.Z.LabelMd,{children:t}),r&&(0,n.jsx)(O.Z.LabelMd,{children:r})]})},z=function(e){var t=e.label,r=e.children;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2 pb-6 pt-4",children:[(0,n.jsx)(O.Z.LabelSm,{weight:"medium",children:t}),r]})},U={trial_period_days:0},Z=r(69300),G=function(){var e,t,r,n,i,o=y(),a=o.subscription,s=o.priceChangePreview,l=(0,Z.a)(a.paywall_id,U),c=l.data,u=l.isLoading,d=null==c||null==(e=c.active_subscription_prices)?void 0:e.find(function(e){return e.id===a.paywall_price_id}),f=(0,D.qo)({name:"paywall_id"})||a.paywall_id,p=(0,Z.a)(f,U),m=p.data,b=p.isLoading,h=(null==m||null==(r=m.active_subscription_prices)||null==(t=r.filter(function(e){return e.id!==a.paywall_price_id}))?void 0:t.map(function(e){return{key:"".concat(e.id),value:e.id,label:e.short_description,description:"",details:"",enableCursor:!0}}))||[],v=null!=(i=s.paywall_price_id)?i:a.paywall_price_id,g=null==m||null==(n=m.active_subscription_prices)?void 0:n.find(function(e){return e.id===v});return{isLoadingCurrentPaywall:u,currentPaywall:c,currentPaywallPrice:d,isLoadingSelectedPaywall:b,selectedPaywall:m,selectedPaywallPricingOptions:h,selectedPaywallPrice:g}},q=function(){var e=G(),t=e.selectedPaywall,r=e.selectedPaywallPrice;if(!t)return null;var i=(0,m.t)("member_profile_modal.billing.subscriptions.price_chooser_step.selected_plan"),o=t.display_name,a=null==r?void 0:r.short_description;return(0,n.jsx)(z,{label:i,children:(0,n.jsx)(F,{planName:o,planPricing:a})})},V=function(){var e=y(),t=e.priceChangePreview,r=e.isInTrial,i=e.shouldAddPaymentMethod,o=e.previewMutation,a=G(),s=a.isLoadingSelectedPaywall,l=a.selectedPaywall;return s?(0,n.jsx)(P.a,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q,{}),(null==l?void 0:l.coupons_enabled)&&(0,n.jsx)(B,{}),o.isLoading?(0,n.jsx)(P.a,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-y-6",children:[(0,n.jsx)(k.$.ProratedCreditPreview,{preview:t,className:"pt-6"}),(0,n.jsx)(k.$.FirstPaymentPreview,{className:"border-t pt-6",preview:t}),(0,n.jsx)(k.$.FuturePaymentsPreview,{preview:t,className:"pt-6"}),(0,n.jsx)(k.$.TotalDueTodayPreview,{preview:t})]}),r&&i&&(0,n.jsx)(N,{className:""})]})]})},H=r(13411),W=function(e){var t=e.className,r=e.name,i=e.warningMessage,o=e.options,a=(0,D.Gc)().control;return(0,n.jsx)(w.l.Item,{className:t,name:r,fullWidth:!0,hideBorder:!0,hideDescription:!0,hideLabel:!0,isFirstChild:!0,rules:{required:i},children:(0,n.jsx)(D.Qr,{name:r,control:a,render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,n.jsx)(H.E,{className:"space-y-3",value:r,onChange:i,children:o.map(function(e){return(0,n.jsx)(H.E.Option,{value:e.value,children:function(t){var r=t.checked;return(0,n.jsx)(L,{className:(0,c.A)("border-primary bg-primary hover:bg-secondary hover:border-secondary rounded border border-solid p-5",{"bg-secondary border-secondary":r}),label:e.label,labelSize:"md",labelWeight:"semibold",details:e.details,detailsSize:"sm",detailsWeight:"medium",description:e.description,descriptionSize:"sm",enableCursor:null==e?void 0:e.enableCursor})}},e.key)})})}})})},Q=function(){var e=G(),t=e.currentPaywall,r=e.currentPaywallPrice;if(!t||!r)return null;var i=(0,m.t)("member_profile_modal.billing.subscriptions.subscription_summary.current_plan"),o=t.display_name,a=r.short_description;return(0,n.jsx)(z,{label:i,children:(0,n.jsx)(F,{planName:o,planPricing:a})})},J=function(){var e,t=y(),r=t.subscription,i=t.isInTrial;if(G().isLoadingCurrentPaywall)return(0,n.jsx)(P.a,{});var o=null==(e=r.upgradable_paywalls)?void 0:e.map(function(e){return{key:"".concat(e.id),value:e.id,label:e.display_name,details:e.min_subscription_amount,description:e.subtitle,enableCursor:!0}});return i||(o=null==o?void 0:o.filter(function(e){return e.id!==r.paywall_id})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q,{}),(0,n.jsx)(W,{name:"paywall_id",warningMessage:(0,m.t)("member_profile_modal.billing.subscriptions.alerts.errors.no_plan_chosen"),options:o})]})},K=function(){var e=G(),t=e.isLoadingSelectedPaywall,r=e.selectedPaywallPricingOptions;return t?(0,n.jsx)(P.a,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q,{}),(0,n.jsx)(W,{name:"new_paywall_price_id",warningMessage:(0,m.t)("member_profile_modal.billing.subscriptions.alerts.errors.no_cycle_chosen"),options:r})]})},$="paywall",X="prices",Y="summary",ee=r(88767),et=r(93199),er=r(13532),en=r(60878),ei=r(4210);function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ea(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function el(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eu=function(e){var t=e.subscription,r=e.changePlan,n=e.onSuccess,i=e.CardElement,o=(0,en.pm)().error,a=ec((0,d.useState)(!1),2),s=a[0],c=a[1],u=ec((0,d.useState)(!1),2),f=u[0],p=u[1],b=(0,l.pN)(t),h=(0,l.pN)(t)&&!t.default_payment_method,y=ec((0,d.useState)(b&&!r),2),v=y[0],g=y[1],_=ec((0,d.useState)(r?$:X),2),x=_[0],j=_[1],w=ec((0,d.useState)({}),2),O=w[0],S=w[1],k=(0,d.useMemo)(function(){return x===$},[x]),P=(0,d.useMemo)(function(){return x===X},[x]),C=(0,d.useMemo)(function(){return x===Y},[x]),N=(0,d.useMemo)(function(){return r&&(P||C)||!r&&C},[r,P,C]),A=(0,d.useCallback)(function(){C?j(X):P&&r&&j($)},[r,P,C]),I=function(e){S(el(es({},O),{new_coupon_code_error:e}))},E=(0,ee.useMutation)(function(e){var r,n;return r=t.id,n=e,(0,et.Cu)(er.av.communityMemberSubscriptionPriceChanges.preview({subscriptionId:r}),n)},{onSuccess:function(e){S(el(es({},e),{new_coupon_code_error:null})),j(Y)},onError:function(e){"INVALID_COUPON"==e.errorDetails.code?I(e.message):(console.error(e),o(e.message))}}),T=(0,ee.useMutation)(function(e){var r,n;return r=t.id,n=el(es({},e),{new_paywall_price_id:null==O?void 0:O.paywall_price_id,new_coupon_code:null==O?void 0:O.paywall_coupon_code}),(0,et.Cu)(er.av.communityMemberSubscriptionPriceChanges.create({subscriptionId:r}),n)},{onSuccess:function(e){n(e)},onError:function(e){console.error(e),o(e.message)}}),L=(0,ei.x)({CardElement:i,currency:t.currency}).createPaymentMethod;return{isPlanChooserActive:k,isPriceChooserStepActive:P,isConfirmationStepActive:C,canGoBack:N,goBack:A,getTitle:function(){return P?(0,m.t)("member_profile_modal.billing.subscriptions.headings.billing_cycle"):b?(0,m.t)("member_profile_modal.billing.subscriptions.headings.upgrade_plan"):k?(0,m.t)("member_profile_modal.billing.subscriptions.headings.change_plan"):(0,m.t)("member_profile_modal.billing.subscriptions.headings.change_subscription")},getButtonLabel:function(){return C?(0,m.t)("member_profile_modal.billing.subscriptions.actions.confirm_change"):(0,m.t)("member_profile_modal.billing.subscriptions.actions.next")},getFormDefaults:function(){return{paywall_id:r?"":t.paywall_id,paywall_price_id:t.paywall_price_id,new_paywall_price_id:""}},priceChangePreview:O,setActiveStep:j,setShouldKeepTrial:g,handleOnChangeCard:function(e){e.complete?p(!0):f&&p(!1)},handleOnAddPaymentAndChangePrice:function(e){var r;return(r=function(){var r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),c(!0),[4,L({currencyId:t.currency.id})];case 1:return i.sent(),c(!1),[4,T.mutateAsync(e)];case 2:return n(i.sent()),[3,5];case 3:return console.error(r=i.sent()),o(r.message),[3,5];case 4:return c(!1),[7];case 5:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){ea(o,n,i,a,s,"next",e)}function s(e){ea(o,n,i,a,s,"throw",e)}a(void 0)})})()},isCardInfoComplete:f,shouldKeepTrial:v,shouldAddPaymentMethod:h,validateNewCouponHandler:function(e){if(!e.new_coupon_code)return void I((0,m.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.errors.required"));E.mutate(e)},previewMutation:E,changePriceMutation:T,isCreatingPaymentMethod:s,isInTrial:b}},ed=function(e){var t=e.subscription,r=e.changePlan,o=void 0!==r&&r,a=e.onSuccess,s=e.onDismiss,l=eu({subscription:t,changePlan:o,onSuccess:a,CardElement:i.CardElement}),c=l.isPlanChooserActive,u=l.isPriceChooserStepActive,d=l.isConfirmationStepActive,f=l.validateNewCouponHandler,p=l.previewMutation,b=l.changePriceMutation,y=l.canGoBack,v=l.goBack,g=l.getTitle,_=l.getButtonLabel,j=l.getFormDefaults,w=l.setActiveStep,O=l.setShouldKeepTrial,k=l.priceChangePreview,P=l.shouldKeepTrial,C=l.shouldAddPaymentMethod,N=l.isInTrial,A=l.isCardInfoComplete,I=l.isCreatingPaymentMethod,E=l.handleOnAddPaymentAndChangePrice,T=l.handleOnChangeCard;return b.isLoading?(0,n.jsx)(x,{title:(0,m.t)("member_profile_modal.billing.subscriptions.change_plan_form.hang_tight"),subtitle:(0,m.t)("member_profile_modal.billing.subscriptions.change_plan_form.wait_a_few_seconds")}):(0,n.jsx)(h,{dismiss:s,canGoBack:y,goBack:v,formDefaults:j(),submit:function(e){if(c)w(X),O(N&&t.paywall_id==e.paywall_id);else if(u)return p.mutate({new_paywall_price_id:e.new_paywall_price_id});else if(d)return N&&C?E({new_paywall_price_id:e.new_paywall_price_id,new_coupon_code:k.new_coupon_code}):b.mutate({new_paywall_price_id:e.new_paywall_price_id,new_coupon_code:k.new_coupon_code})},submitLabel:_(),submitDisabled:u&&p.isLoading||d&&p.isLoading||d&&C&&!A||d&&C&&I,priceChangePreview:k,subscription:t,shouldKeepTrial:P,CardElement:i.CardElement,isInTrial:N,shouldAddPaymentMethod:C,handleOnChangeCard:T,previewMutation:p,validateNewCouponHandler:f,changePlan:o,children:(0,n.jsxs)(S,{title:g(),children:[c&&(0,n.jsx)(J,{}),u&&(0,n.jsx)(K,{}),d&&(0,n.jsx)(V,{})]})})},ef=function(e){var t,r,i=e.updatedSubscription,o=e.onDone,s=(0,d.useContext)(f),l=s.subscription,c=s.isManagingMember,u=(0,Z.a)(l.paywall_id,U),p=(0,Z.a)(i.paywall_id,U);if(u.isLoading||p.isLoading)return(0,n.jsx)(P.a,{center:!0});if(u.isError||p.isError)return null;var b=u.data,h=null==b||null==(t=b.all_subscription_prices)?void 0:t.find(function(e){return e.id===l.paywall_price_id}),y="".concat(null==b?void 0:b.display_name," (").concat(null==h?void 0:h.short_description,")"),x=p.data,w=null==x||null==(r=x.all_subscription_prices)?void 0:r.find(function(e){return e.id===i.paywall_price_id}),O=null==x?void 0:x.display_name,S="".concat(O," (").concat(null==w?void 0:w.short_description,")"),k=c?{subtitle:(0,m.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.subtitle",{community_member_name:l.community_member.name}),description:(0,m.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.description",{community_member_name:l.community_member.name,old_plan:y,new_plan:S}),actionButton:(0,m.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.action_button")}:{subtitle:(0,m.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.subtitle"),description:(0,m.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.description",{old_plan:y,new_plan:S}),actionButton:(0,m.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.action_button")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.u_.Body,{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"bg-v2-success m-8 flex h-16 w-16 justify-center rounded-full",children:(0,n.jsx)(v.JO,{type:"check-solid",viewBox:"0 0 30 22"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(g.Di,{weight:"semibold",children:k.subtitle}),(0,n.jsxs)("div",{className:"mb-4 mt-2 flex flex-col",children:[(0,n.jsx)(_.P,{children:O}),(0,n.jsx)(C.T1,{children:null==w?void 0:w.short_description})]}),(0,n.jsx)(g.Di,{children:k.description})]})]}),(0,n.jsx)(a.u_.Footer,{children:(0,n.jsx)(j.z,{variant:"circle",full:!0,large:!0,onClick:function(){o()},children:k.actionButton})})]})};function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var em=function(e){var t,r=e.refetchSubscriptions,n=(0,s.dd)(),i=(t=(0,d.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ep(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ep(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return{onClose:function(){n.hide(),n.remove()},updatedSubscription:o,handleSuccess:(0,d.useCallback)(function(e){a(e),r()},[a,r]),modal:n}},eb=function(e){var t=e.subscription,r=e.refetchSubscriptions,i=e.changePlan,o=e.isManagingMember,s=em({refetchSubscriptions:r}),u=s.onClose,d=s.updatedSubscription,f=s.handleSuccess,m=s.modal;return(0,n.jsxs)(a.u_,{isOpen:m.visible,onClose:u,children:[(0,n.jsx)(a.u_.Overlay,{}),(0,n.jsx)(a.u_.Content,{size:"md",className:(0,c.A)({"sm:max-h-[90vh]":(0,l.pN)(t)}),children:(0,n.jsxs)(p,{subscription:t,isManagingMember:void 0!==o&&o,children:[!d&&(0,n.jsx)(ed,{changePlan:void 0!==i&&i,onDismiss:u,onSuccess:f,subscription:t}),d&&(0,n.jsx)(ef,{onDone:u,updatedSubscription:d})]})})]})},eh=s.gk.create(function(e){var t=(0,u.C)().stripePromise;return(0,n.jsx)(i.Elements,{stripe:t,children:(0,n.jsx)(eb,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})}),ey=function(){return(0,o.j)(eh,function(e){var t,r=e.subscription;return{id:r.community_member_id,policies:{requires_billing_info:null==r||null==(t=r.policies)?void 0:t.requires_billing_info}}})}},69300:function(e,t,r){"use strict";r.d(t,{a:()=>s});var n=r(96486),i=r(88767),o=r(47373),a=r(13532),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="",s=Number(e),l={};return t&&((0,n.isFinite)(t.trial_period_days)&&(l["presenter_options[trial_period_days]"]=t.trial_period_days),r=(0,a.UK)(l)),(0,i.useQuery)({queryKey:["paywall-show",s,r],queryFn:function(){return o.i.getPaywall(s,l)}})}},22663:function(e,t,r){"use strict";r.d(t,{$:()=>a});var n=r(85893),i=r(84326),o=r(41553),a=function(){return(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:(0,n.jsx)(o.Z.LabelSm,{children:(0,i.t)("chat_space.error_message")})})}},31884:function(e,t,r){"use strict";r.d(t,{O:()=>a});var n=r(85893),i=r(79893),o=r(13532),a=function(e){var t=e.chat;return(0,n.jsx)(i.z,{chat:t,path:(0,o.Gr)({id:t.id.toString()}),isUnread:t.has_unread_messages_for_member,isBotType:!0,shouldHightlightChat:!0},t.id)}},34938:function(e,t,r){"use strict";r.d(t,{I:()=>o});var n=r(85893),i=r(57363),o=function(e){var t=e.profile,r=e.className,o=void 0===r?"!h-[3rem] !w-[3rem]":r;return(0,n.jsx)(n.Fragment,{children:t.avatar_url?(0,n.jsx)("img",{src:t.avatar_url,alt:t.name,className:"rounded-full ".concat(o),loading:"lazy"}):(0,n.jsx)(i.JO,{type:"120-ai-bot",size:120,className:o})})}},8050:function(e,t,r){"use strict";r.d(t,{x:()=>_});var n=r(85893),i=r(58533),o=r(79893),a=r(34675),s=r(13532),l=r(61853),c=r(51169),u=r(70442),d=r(84326),f=r(82847),p=r(39905),m=r(65121),b=r(41553),h=r(34938),y=function(){var e=(0,f.F)({name:""}),t=e.botProfiles,r=e.isBotsLoading,i=(0,l.Dk)().setCurrentBotProfile,o=(0,u.k6)(),a=function(e){i(e),o.replace((0,s.W9)())};if(r)return(0,n.jsx)(c.a,{variant:"fullscreen"});if(!t.length)return(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-start pt-12",children:(0,n.jsx)(b.Z.LabelSm,{children:(0,d.t)("messaging.no_messages")})});if(1===t.length){var y=t[0];return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)(h.I,{profile:y}),(0,n.jsx)(b.Z.TitleSm,{as:"h2",weight:"semibold",children:y.name}),(0,n.jsx)("div",{className:"text-center text-sm font-normal leading-5 tracking-tighter",children:(0,n.jsx)(m.T,{editable:!1,rich_text_body:y.bio})})]}),(0,n.jsx)(p.z,{variant:"circle",type:"button",onClick:function(){return a(y)},className:"text-xs-plus font-semibold",children:(0,d.t)("community_inbox.new_conversation")})]})}return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,n.jsx)("div",{className:"flex flex-col gap-3 px-5 py-3.5",children:(0,n.jsx)(b.Z.BodySm,{color:"text-gray-500",children:(0,d.t)("community_inbox.start_conversation")})}),(0,n.jsx)("div",{className:"flex flex-col gap-1.5 px-5 pb-4",children:t.map(function(e){return(0,n.jsx)("button",{type:"button",onClick:function(){return a(e)},children:(0,n.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border px-5 py-4",children:[(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(h.I,{profile:e,className:"!h-11 !w-11 rounded-full border-4"})}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col text-left",children:[(0,n.jsx)(b.Z.LabelSm,{weight:"semibold",children:e.name}),(0,n.jsx)("div",{className:"text-tertiary text-xs font-normal leading-5 tracking-tight",children:(0,n.jsx)(m.T,{editable:!1,rich_text_body:e.bio})})]})]})},e.id)})})]})},v=r(57363),g=function(){var e=(0,f.F)({name:""}),t=e.botProfiles,r=e.isBotsLoading,i=(0,l.Dk)().setCurrentBotProfile,o=(0,u.k6)(),a=function(e){i(e),o.push((0,s.W9)())};if(r)return(0,n.jsx)(c.a,{variant:"fullscreen"});if(!t.length)return(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-start pt-12",children:(0,n.jsx)(b.Z.LabelSm,{children:(0,d.t)("messaging.no_messages")})});if(1===t.length){var y=t[0];return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)(h.I,{profile:y}),(0,n.jsx)(b.Z.TitleSm,{as:"h2",weight:"semibold",children:y.name}),(0,n.jsx)("div",{className:"text-center text-sm font-normal leading-5 tracking-tighter",children:(0,n.jsx)(m.T,{editable:!1,rich_text_body:y.bio})})]}),(0,n.jsx)(p.z,{variant:"circle",type:"button",onClick:function(){return a(y)},className:"text-xs-plus font-semibold",children:(0,d.t)("community_inbox.new_conversation")})]})}return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,n.jsx)("div",{className:"flex flex-col gap-3 px-5 py-3.5",children:(0,n.jsx)(b.Z.BodySm,{color:"text-gray-500",children:(0,d.t)("community_inbox.start_conversation")})}),(0,n.jsx)("div",{className:"flex flex-col gap-1.5 px-5 pb-4",children:t.map(function(e){return(0,n.jsx)("button",{type:"button",onClick:function(){return a(e)},children:(0,n.jsxs)("div",{className:"flex gap-3 rounded-lg border px-5 py-4",children:[(0,n.jsx)(h.I,{profile:e,className:"border-primary !h-11 !w-11 rounded-full border-4"}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col text-left",children:[(0,n.jsx)(b.Z.LabelSm,{weight:"semibold",children:e.name}),(0,n.jsx)("div",{className:"text-tertiary text-xs font-normal leading-5 tracking-tight",children:(0,n.jsx)(m.T,{editable:!1,rich_text_body:e.bio})})]}),(0,n.jsx)(v.JO,{type:"20-chevron-right",className:"text-default ml-auto",width:20,height:20})]})},e.id)})})]})},_=function(e){var t=e.isRightActionBlock,r=(0,a.c)({filter:"mine"}),u=r.isChatsLoading,d=r.hasNextPage,f=r.fetchNextPage,p=(0,l.Dk)(),m=p.currentChatId,b=p.memberChats;return u?(0,n.jsx)(c.a,{center:!0}):0===b.length?t?(0,n.jsx)(g,{}):(0,n.jsx)(y,{}):(0,n.jsx)(i.Z,{scrollThreshold:.8,next:f,hasMore:!!d,dataLength:b.length,scrollableTarget:"scrollable-dms-div",className:"mt-2 h-full overflow-auto",loader:(0,n.jsx)(c.a,{center:!0}),children:b.map(function(e){var t=e.id==m;return(0,n.jsx)(o.z,{chat:e,path:(0,s.Gr)({id:e.id.toString()}),isUnread:!t&&e.has_unread_messages_for_member,isBotType:!0},e.id)})})}},37103:function(e,t,r){"use strict";r.d(t,{q:()=>c});var n=r(85893),i=r(16089),o=r(67142),a=r(1168),s=function(e){var t=e.user1,r=e.user2,i=e.className,s=[{name:(null==t?void 0:t.name)||"",src:(null==t?void 0:t.avatar_url)||""},{name:(null==r?void 0:r.name)||"",src:(null==r?void 0:r.avatar_url)||""}];return(0,n.jsx)("div",{className:(0,a.A)("border-tertiary max-h-10",void 0===i?"":i),children:(0,n.jsx)(o.Lt,{users:s,isFullRounded:!0})})};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.isDirect,r=e.otherParticipants;if(t){var o=(function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(r,1)||function(e,t){if(e){if("string"==typeof e)return l(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(r,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]||{},a=o.avatar_url,c=o.name,u=o.status;return(0,n.jsx)(i.g,{src:a,name:c,status:u,size:"9"})}return(0,n.jsx)(s,{user1:r[0],user2:r[1]})}},8383:function(e,t,r){"use strict";r.d(t,{e:()=>l});var n=r(67294),i=r(10749),o=r(41342),a=r(61853),s=r(63271),l=function(e){var t=e.currentChatId,r=e.isPreview,l=void 0!==r&&r,c=(0,o.wh)().currentCommunityMember,u=null==c?void 0:c.id,d=(0,a.Dk)(),f=d.setCurrentChatId,p=d.appendMessage,m=d.updateMessage,b=d.destroyMessage,h=d.appendChat,y=d.updateChat,v=d.destroyChat,g=d.setPreviewChat,_=d.previewChat,x=(0,i.vO)().adjustScroller;return(0,n.useEffect)(function(){t&&f(t)},[t,f]),(0,s.s)({channel:"CommunityInbox::MemberChannel",community_member_id:u,canCreateConnection:!!u,onMessageReceive:function(e){switch(e.event){case"createMessage":p(e.json_message,"member");break;case"updateMessage":m(e.json_message),x();break;case"destroyMessage":b(e.json_message.id);break;case"createChat":h(e.json_message,"member");break;case"updateChat":var t=e.json_message.id;l&&t===(null==_?void 0:_.id)?g(e.json_message):y(e.json_message,"member");break;case"destroyChat":v(e.json_message.id,"member")}}},[u])}},42045:function(e,t,r){"use strict";r.d(t,{m:()=>S});var n=r(85893),i=r(84326),o=r(57105),a=r(45697),s=r.n(a),l=r(51466),c=r(18826),u=r(25885),d={},f=function(e){var t=e.onSubmit,r=e.formId;return(0,n.jsx)(l.l,{id:r,onSubmit:t,defaultValues:d,className:"h-full",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(u.K,{}),(0,n.jsx)(c.a,{})]})})};f.propTypes={onSubmit:s().func,formId:s().string};var p=r(88767),m=r(70442),b=r(51630),h=r(41342),y=r(13532),v=r(60878),g=function(e){var t=e.position,r=e.onSuccess,n=(0,m.k6)(),o=(0,v.pm)(),a=o.success,s=o.error,l=(0,h.e2)().actions;return(0,p.useMutation)(function(e){var r,n;return b.iD.create({space_group:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={position:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)})},{onSuccess:function(e){a((0,i.t)("space_groups.form.create.saved_successfully")),l.refresh(),r(),n.push(y.Ts.show({spaceGroupSlug:e.slug}))},onError:function(e){return s(e.errorDetails||(0,i.t)("space_groups.form.create.save_error"))}})},_=r(39905),x=r(34519),j="new-space-group-form",w=function(e){var t=e.position,r=(0,o.dd)(),a=g({position:t,onSuccess:r.hide}),s=a.mutate,l=a.isLoading;return(0,n.jsxs)(x.u_,{title:(0,i.t)("space_groups.form.create.title"),isOpen:r.visible,onClose:r.hide,children:[(0,n.jsx)(x.u_.Overlay,{}),(0,n.jsxs)(x.u_.Content,{size:"md",children:[(0,n.jsxs)(x.u_.Header,{className:"!px-6 md:!px-8",children:[(0,n.jsx)(x.u_.Title,{size:"md",children:(0,i.t)("space_groups.form.create.title")}),(0,n.jsx)(x.u_.HeaderActions,{children:(0,n.jsx)(x.u_.CloseButton,{onClick:r.hide})})]}),(0,n.jsx)(x.u_.Body,{className:"!px-6 md:!px-8",children:(0,n.jsx)(f,{formId:j,onSubmit:s})}),(0,n.jsx)(x.u_.Footer,{className:"flex justify-end",children:(0,n.jsx)(_.z,{type:"submit",variant:"circle",form:j,disabled:l,full:!0,large:!0,children:l?(0,i.t)("space_groups.form.create.submitting"):(0,i.t)("space_groups.form.create.submit")})})]})]})},O=o.gk.create(function(e){return(0,n.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),S=function(){return(0,o.dd)(O)}},78913:function(e,t,r){"use strict";r.d(t,{C:()=>v});var n=r(85893),i=r(84326),o=r(57105),a=r(79522),s=r(63549),l=r(25152),c=r(67294),u=r(88767),d=r(16040);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var m=function(e){var t,r=e.event,n=e.onChange,i=(t=(0,c.useState)(l.HA.ALL),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=(0,u.useQueryClient)(),m=(0,d.K)({event:r}).onRecurringUnRsvpSubmit;return{setEditMode:a,onUnRsvpConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,m(o)];case 1:var t,i;return e.sent(),n((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),i=i={rsvped_event:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t)),[4,s.invalidateQueries("posts")];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})})()}}};function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var h=function(e){var t=e.event,r=e.onChange,c="events.un_rsvp.recurring_modal",u=(0,o.dd)(),d=m({event:t,onChange:r}),f=d.setEditMode,p=d.onUnRsvpConfirm;return(0,n.jsx)(s.c,{title:(0,i.t)("".concat(c,".not_going")),isOpen:u.visible,confirmText:(0,i.t)("".concat(c,".save")),cancelText:(0,i.t)("".concat(c,".cancel")),onClose:u.hide,onCancel:u.hide,onConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return e.sent(),[4,u.hide()];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})})()},size:"sm",children:(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(a.S,{defaultChecked:l.HA.CURRENT,name:"recurring_event_settings.frequency_edit",options:[{label:(0,i.t)("events.edit.recurring_event_modal.this_event"),value:l.HA.CURRENT},{label:(0,i.t)("events.edit.recurring_event_modal.this_and_following"),value:l.HA.REMAINING},{label:(0,i.t)("events.edit.recurring_event_modal.all_events"),value:l.HA.ALL}],size:"sm",onChange:function(e){return f(e)}})})})},y=o.gk.create(function(e){return(0,n.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),v=function(){return(0,o.dd)(y)}},37091:function(e,t,r){"use strict";r.d(t,{D:()=>ti});var n=r(85893),i=r(84326),o=r(67294),a=r(50308),s=r.n(a),l=r(70442),c=r(69293),u=r(57105);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=(0,o.createContext)({filters:{},setFilters:function(){},resetFilters:function(){}}),p=function(e){var t,r=e.children,i=(t=(0,o.useState)({}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1];return(0,n.jsx)(f.Provider,{value:{filters:a,setFilters:s,resetFilters:function(){return s({})}},children:r})},m=function(){return(0,o.useContext)(f)};f.displayName="FilterContext";var b=r(41342);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={Latest:"latest",Oldest:"oldest",Popular:"popular",Likes:"likes",Alphabetical:"alphabetical",NewActivity:"new_activity",Relevance:"relevance"},g=(0,o.createContext)({sort:{posts:v.Relevance,comments:v.Relevance,events:v.Relevance,lessons:v.Relevance,members:v.Relevance},setSort:function(){}});g.displayName="SortContext";var _=function(e){var t,r=e.children,i=(0,b.wh)().currentCommunity,a=null==i?void 0:i.default_search_sorting,s=a&&Object.values(v).includes(a)?a:v.Relevance,l=(t=(0,o.useState)({posts:s,comments:s,events:s,lessons:s,members:s}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1];return(0,n.jsx)(g.Provider,{value:{sort:c,setSort:function(e,t){u(function(r){var n,i;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}({},r),i=null!=(i=y({},e,t))?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n})}},children:r})},x=function(){return(0,o.useContext)(g)},j=r(96486),w=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary m-auto text-center",children:t})},O=r(57363),S=r(41553),k=function(){return(0,n.jsx)(w,{children:(0,n.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-4 p-8 pb-14","data-testid":"empty-search",children:[(0,n.jsx)(O.JO,{type:"24-search-v2",className:"text-default !h-6 !w-6",size:24}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(S.Z.TitleSm,{weight:"semibold",children:(0,i.t)("search_v2.search_community")}),(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,i.t)("search_v2.search_community_description")})]})]})})},P=function(e){var t=e.type;return(0,n.jsx)(w,{children:(0,n.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-2 p-8 pb-14 pt-20","data-testid":"no-results-found",children:[(0,n.jsx)(S.Z.TitleSm,{weight:"semibold",children:(0,i.t)("search_v2.empty_search_by_type.".concat(t))}),(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,i.t)("search_v2.empty_search_description")})]})})},C=r(1168),N=r(39905),A=function(e){var t=e.isFixed,r=e.onChange,a=e.searchValue,s=e.onKeydown,l=e.isLoading,c=e.onClickCancel,u=void 0===c?j.noop:c,d=e.shouldShowClearButton,f=d&&a.length>0,p=!d||0===a.length,m=eJ(),b=m.visible,h=m.hide,y=(0,o.useRef)(null);return(0,o.useEffect)(function(){y.current&&y.current.focus()},[]),(0,n.jsxs)("div",{className:(0,C.A)("bg-primary isolate z-10 flex w-full items-center justify-between gap-4 rounded-t-md",{"border-primary sticky top-0 border-b px-4 py-4 md:static md:top-auto md:px-0 md:pl-6 md:pr-1":t}),children:[(0,n.jsxs)("div",{className:"bg-secondary sm:bg-primary mr-0 flex w-full flex-1 items-center gap-3 overflow-hidden rounded-md p-3 sm:rounded-none md:p-0",children:[l?(0,n.jsx)(O.JO,{type:"loader",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}):(0,n.jsx)(O.JO,{type:"search-v2",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}),(0,n.jsx)("input",{ref:y,className:"text-darkest sm:bg-primary placeholder:text-light w-full rounded bg-transparent text-base outline-none placeholder:opacity-100 sm:rounded-none",placeholder:(0,i.t)("search_or_ask_a_question"),"data-name":"v2-search","data-testid":"v2-search","aria-autocomplete":"list",value:a,onChange:function(e){return r(e.target.value)},onKeyDown:s})]}),p&&(0,n.jsx)(N.z,{variant:"text",className:"inline-flex md:hidden",onClick:function(){(0,j.isFunction)(u)&&u(),b&&h()},children:(0,i.t)("cancel")}),f&&(0,n.jsx)(N.z,{variant:"text",onClick:u,children:(0,i.t)("search_v2.clear_search")})]})},I=r(76896),E=r(67805),T=function(){return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4 pt-6 md:pt-10",children:(0,n.jsx)(I.RN,{children:(0,n.jsx)(I.X2,{lg:!0})})}),(0,n.jsx)(E.x,{})]})},L=function(e){var t=e.type,r=e.numberOfRecords;return(0,n.jsx)("div",{className:"mt-6 flex flex-col gap-8",children:Array.from({length:void 0===r?1:r}).map(function(e,r){switch(t){case"posts":case"events":case"messages":return(0,n.jsxs)("div",{children:[(0,n.jsxs)(I.mw,{lg:!0,children:[(0,n.jsx)(I.qE,{sm:!0}),(0,n.jsx)(I.RN,{children:(0,n.jsx)(I.X2,{sm:!0})})]}),(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsxs)(I.RN,{md:!0,children:[(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,almostFull:!0})]})})]},r);case"lessons":return(0,n.jsxs)("div",{children:[(0,n.jsxs)(I.mw,{sm:!0,children:[(0,n.jsx)(I.qE,{sm:!0}),(0,n.jsx)(I.RN,{children:(0,n.jsx)(I.X2,{sm:!0})})]}),(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsxs)(I.RN,{md:!0,children:[(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,almostFull:!0})]})})]},r);case"comments":return(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsxs)(I.mw,{sm:!0,children:[(0,n.jsx)(I.qE,{sm:!0}),(0,n.jsxs)(I.RN,{children:[(0,n.jsx)(I.X2,{sm:!0,full:!0}),(0,n.jsx)(I.X2,{sm:!0})]})]}),(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsxs)(I.RN,{md:!0,children:[(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,almostFull:!0})]})})]},r);case"members":return(0,n.jsxs)(I.mw,{lg:!0,children:[(0,n.jsx)(I.qE,{}),(0,n.jsxs)(I.RN,{children:[(0,n.jsx)(I.X2,{sm:!0}),(0,n.jsx)(I.X2,{sm:!0})]})]},r)}return null})})};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}var R=function(){var e,t=(e=(0,o.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||M(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return(0,o.useEffect)(function(){try{var e=localStorage.getItem("recentSearches");e&&n(JSON.parse(e))}catch(e){console.error("Error parsing recent searches from local storage",e)}},[]),{recentSearches:r,addRecentSearch:function(e){e.query&&n(function(t){var r=t.filter(function(t){return t.query!==e.query}),n=[e].concat(function(e){if(Array.isArray(e))return D(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||M(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(0,10);try{localStorage.setItem("recentSearches",JSON.stringify(n))}catch(e){console.error("Error saving recent searches to local storage",e)}return n})},removeRecentSearch:function(e){n(function(t){var r=t.filter(function(t){return t.query!==e});try{localStorage.setItem("recentSearches",JSON.stringify(r))}catch(e){console.error("Error saving recent searches to local storage",e)}return r})}}},B=function(e){var t=e.type;return({post:"/c/".concat(e.space_slug,"/").concat(e.slug),community_member:"/u/".concat(e.public_uid),comment:"/c/".concat(e.space_slug,"/").concat(e.post_slug,"#comment_wrapper_").concat(e.id),space:"/c/".concat(e.slug)})[t]},F=r(88767),z=r(93199),U=r(13532),Z=r(48298),G=function(e){var t=e.enabled,r=(0,F.useQuery)(["bot-profiles"],function(){return(0,z.UT)(U.av.communityBot.agents.indexForSearch())},{enabled:t,refetchOnWindowFocus:!1}).data;return{agents:null==r?void 0:r.records}};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||W(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}}var Q=function(e){var t=e.onPressEnter,r=e.scrollToElement,n=e.type,a=e.shouldDisplayAgents,s=void 0!==a&&a,l=x().sort,c=m().filters,u=V((0,o.useState)([]),2),d=u[0],f=u[1],p=V((0,o.useState)(""),2),b=p[0],h=p[1],y=(0,Z.c)(b,300),v=V((0,o.useState)(!1),2),g=v[0],_=v[1],w=V((0,o.useState)(0),2),O=w[0],S=w[1],k=Object.entries(c).reduce(function(e,t){var r=V(t,2),n=r[0],i=r[1];return i&&i.length&&(e[n]=i),e},{}),P=["search-results",y,n,l[n],k],C=(0,F.useInfiniteQuery)(P,function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,z.UT)(U.av.searchV2.advanced.index({params:{query:y,per_page:20,page:t,type:n,order:l[n],filters:k}}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},enabled:!!y,refetchOnWindowFocus:!1}),N=C.data,A=C.isLoading,I=C.error,E=C.fetchNextPage,T=C.hasNextPage,L=(0,F.useQuery)(["search-count",y],function(){return(0,z.UT)(U.av.searchV2.count.index({params:{query:y}}))},{refetchOnWindowFocus:!1,retry:1,enabled:!!y.length&&"general"!==n}),D=L.data,M=L.isLoading,R=G({enabled:!!y.length&&s}).agents;(0,o.useEffect)(function(){if(y&&((null==N?void 0:N.pages)||(null==R?void 0:R.length))){var e=s&&(null==R?void 0:R.length)&&y?R.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"agent",highlighted_name:(0,i.t)("community_inbox.ask_agent",{agent_name:e.name})},e)}):[],t=(null==N?void 0:N.pages)&&y?(0,j.uniqBy)((0,j.flatten)(N.pages.map(function(e){return e.records})),"id"):[],r=H(e).concat(H(t));_(!!(0===r.length&&y)),S(0),f(r)}},[N,R,y,s]);var B=(0,o.useCallback)(function(){h(""),S(0),q()},[]),q=function(){f([])};return{isLoading:A,hasNoResults:g,error:I,setSearchValue:h,searchValue:b,results:d,selectedResultIndex:O,resetSearch:B,onKeydown:function(e){switch(e.key){case"Escape":d.length>0&&(B(),e.stopPropagation(),e.preventDefault());break;case"ArrowDown":S(function(e){if(e<d.length){var t=e+1;return r(t),t}return e}),e.preventDefault();break;case"ArrowUp":S(function(e){if(e>0){var t=e-1;return r(t),t}return e}),e.preventDefault();break;case"Enter":null==t||t(e,O)}},isLoadingCount:M,onMouseOver:function(e){S(Number(e.currentTarget.getAttribute("aria-posinset")))},onFocus:function(e){S(Number(e.currentTarget.getAttribute("aria-posinset")))},onMouseOut:function(e){e.currentTarget.getAttribute("aria-posinset")===O&&S(-1)},hasNextPage:T,fetchNextPage:E,countData:D}},J=r(82859);function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var $=function(e){var t=e.containerEl,r=e.itemSelector,n=e.scrollIntoViewOptions,i=void 0===n?{}:n,o=e.intersectionObserverOptions;if(t){var a=K({root:t,rootMargin:"0px",threshold:1},void 0===o?{}:o),s=t.querySelector(r);if(s){var l=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting)return void l.unobserve(s);s.scrollIntoView(K({behavior:"smooth",block:"nearest"},i)),l.unobserve(s)})},a);l.observe(s)}}},X=function(e){var t=e.onClose,r=e.type,n=e.onSearchInCommunity,i=void 0===n?j.noop:n,a=e.askAgent,s=void 0===a?j.noop:a,c=e.shouldDisplayAgents,u=void 0!==c&&c,d=(0,l.k6)(),f=(0,o.useRef)(null),p=(0,o.useRef)(null),m=Q({onPressEnter:function(e){if(0===x)i();else{var t=y[x-1],r=B(t);if((0,J.n2)(e))return window.open(r);d.push(r),I(t),"agent"===t.type&&u&&s(t,b)}},scrollToElement:function(e){-1!==e&&$({containerEl:p.current,itemSelector:'[aria-posinset="'.concat(String(e),'"]')})},type:void 0===r?"general":r,shouldDisplayAgents:u}),b=m.searchValue,h=m.setSearchValue,y=m.results,v=m.isLoading,g=m.hasNoResults,_=m.onKeydown,x=m.selectedResultIndex,w=m.resetSearch,O=m.onMouseOver,S=m.onFocus,k=m.fetchNextPage,P=m.hasNextPage,C=m.onMouseOut,N=m.countData,A=m.isLoadingCount,I=function(e){(0,J.n2)(e)||(w(),t())};return(0,o.useEffect)(function(){!b&&f.current&&w()},[b,f,w]),{searchValue:b,results:y,isLoading:v||A,isLoadingSearch:v,isLoadingCount:A,hasNoResults:g,selectedResultIndex:x,searchInputRef:f,resultsContainerRef:p,setSearchValue:h,onKeydown:_,fetchNextPage:k,hasNextPage:P,resetSearch:w,onNavigateToResult:I,onMouseOver:O,onFocus:S,onMouseOut:C,countData:N}},Y=r(61089);function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=function(e){var t=e.isInitialOpen,r=e.name,o=void 0===r?"name":r,a=m(),s=a.filters,l=a.setFilters;return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.".concat(o)),title:(0,i.t)("search_v2.filters.".concat(o)),selectedText:null==s?void 0:s[o],isInitialOpen:t,onApply:function(e){var t,r;l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ee(e,t,r[t])})}return e}({},s),r=null!=(r=ee({},o,e))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},shouldShowRemoveButton:!0,children:(0,n.jsx)(Y.xo,{name:o,placeholder:(0,i.t)("search_v2.filters.name")})})},er=r(84690),en=r(60589),ei=r(51169),eo=function(e){var t,r=e.spaceType,o=void 0===r?"posts":r,a=m(),s=a.filters,l=a.setFilters,c=(0,b.nT)().helpers,u=(0,er.S)({spaces:c.spaceWithViewContentAccess().filter(function(e){switch(o){case"posts":return(0,en.H3)(e);case"courses":return(0,en.EG)(e);case"events":return(0,en.V5)(e);default:return(0,j.stubTrue)()}}),valueKey:"id"});return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.space"),title:(0,i.t)("search_v2.filters.space"),selectedText:(null==s?void 0:s.space_ids)?(0,i.t)("search_v2.filters.n_spaces",{count:(null==s||null==(t=s.space_ids)?void 0:t.length)||0}):"",onApply:function(e){var t,r;l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s),r=r={space_ids:((null==e?void 0:e.value)||[]).length?null==e?void 0:e.value:null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},shouldShowRemoveButton:!!(null==s?void 0:s.space_ids),children:c.isDataLoading()?(0,n.jsx)(ei.a,{}):(0,n.jsx)(Y.Bi,{options:u,className:"w-full",param:{id:"spaces",key:"spaces",value:(null==s?void 0:s.space_ids)||[]},legend:(0,i.t)("search_v2.filters.space"),hasSearch:!0,searchProps:{placeholder:(0,i.t)("search_v2.filters.search_spaces")}})})},ea=r(43511),es=r(66249),el="search_v2.filters",ec=r(88203),eu=r(92339);function ed(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ef(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ep={all:"all",today:"today",yesterday:"yesterday",week:"week",month:"month",year:"year"},em="search_v2.filters.date_ranges",eb=r(51466);function eh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ey=function(e){var t,r=e.chip,o=e.title,a=e.name,s=e.options,l=e.close,c=m(),u=c.filters,d=c.setFilters,f=function(e){var t,r;d((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eh(e,t,r[t])})}return e}({},u),r=null!=(r=eh({},a,e))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};return(0,n.jsx)(Y.wn,{chip:r,title:o,selectedText:null==(t=s.find(function(e){return e.value===u[a]}))?void 0:t.label,onApply:f,shouldShowRemoveButton:!0,children:(0,n.jsxs)(eb.l,{defaultValues:eh({},a,u[a]),className:"p-4",onSubmit:function(e){f(e[a]),null==l||l()},children:[(0,n.jsx)(eb.l.RadioGroup,{variant:"radio",name:a,options:s}),(0,n.jsx)(N.z,{className:"mt-4",variant:"primary",type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})},ev=(0,i.t)("search_v2.filters.space"),eg={posts:[{name:ev,component:eo,spaceType:"posts"},{name:"author_name",component:et},{name:"topics",component:function(){var e,t=m(),r=t.filters,o=t.setFilters,a=(0,b.wh)().currentCommunityMember,s=(0,F.useQuery)({queryKey:[es.Jl,"communityMember",null==a?void 0:a.id],enabled:!!a,queryFn:function(){return(0,z.UT)(U.av.topics.communityMemberTopics({}))}}).data;return s&&s.records&&a?(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.topic"),title:(0,i.t)("search_v2.filters.topic"),selectedText:(null==r?void 0:r.topic_ids)?(0,i.t)("search_v2.filters.n_topics",{count:(null==r||null==(e=r.topic_ids)?void 0:e.length)||0}):"",onApply:function(e){var t,n;o((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={topic_ids:null==e?void 0:e.value},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},shouldShowRemoveButton:!!(null==r?void 0:r.topic_ids),children:(0,n.jsx)(Y.Bi,{options:s.records.map(function(e){return{label:e.name,value:e.id}}),className:"w-full",param:{id:"topics",key:"topics",value:(null==r?void 0:r.topic_ids)||[]},legend:(0,i.t)("search_v2.filters.topic"),hasSearch:!0,searchProps:{placeholder:(0,i.t)("search_v2.filters.search_topics")}})}):null}}],comments:[{name:ev,component:eo,spaceType:"posts"},{name:"author_name",component:et}],lessons:[{name:ev,component:eo,spaceType:"courses"}],events:[{name:ev,component:eo,spaceType:"events"},{name:"event_status",component:function(){return(0,n.jsx)(ey,{name:"status",chip:(0,i.t)("search_v2.filters.event_status.title"),title:(0,i.t)("search_v2.filters.event_status.title"),options:[{value:"past",label:(0,i.t)("search_v2.filters.event_status.past")},{value:"upcoming",label:(0,i.t)("search_v2.filters.event_status.upcoming")}]})}}],members:[{name:"tags",component:function(){var e,t=m(),r=t.filters,o=t.setFilters,a=(0,ea.Y)(),s=a.isLoading,l=a.memberTags;return s||!l.length?null:(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.tag"),title:(0,i.t)("search_v2.filters.tag"),selectedText:(null==r?void 0:r.member_tag_ids)?(0,i.t)("search_v2.filters.n_tags",{count:(null==r||null==(e=r.member_tag_ids)?void 0:e.length)||0}):"",onApply:function(e){var t,n;o((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={member_tag_ids:((null==e?void 0:e.value)||[]).length?null==e?void 0:e.value:null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},shouldShowRemoveButton:!!(null==r?void 0:r.member_tag_ids),children:(0,n.jsx)(Y.Bi,{options:l,className:"w-full",param:{id:"member_tags",key:"member_tags",value:(null==r?void 0:r.member_tag_ids)||[]},legend:(0,i.t)("search_v2.filters.tag"),hasSearch:!0,searchProps:{placeholder:(0,i.t)("search_v2.filters.search_tags")}})})}}],messages:[{name:"author_id",component:function(e){var t=e.isInitialOpen,r=e.name,o=m(),a=o.filters,s=o.setFilters,l=a[r],c=(0,eu.$)({memberId:l}).communityMemberQuery.data;return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.".concat(r)),title:(0,i.t)("search_v2.filters.".concat(r)),selectedText:l,renderSelectedText:function(){if(c)return c.name},isInitialOpen:t,shouldShowRemoveButton:!0,onApply:function(e){var t,n;s((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ed(e,t,r[t])})}return e}({},a),n=null!=(n=ed({},r,null==e?void 0:e.toString()))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},children:(0,n.jsx)(ec.V,{name:r,defaultValue:c})})}},{name:"chats",component:function(){var e,t=m(),r=t.filters,o=t.setFilters,a=(0,b.nT)().helpers,s=(0,er.S)({spaces:a.spaceWithViewContentAccess().filter(function(e){return(0,en.Ug)(e)&&(null==e?void 0:e.is_chat_participant)}),valueKey:"chat_room_id"});return(0,n.jsx)(Y.wn,{chip:(0,i.t)([el,"chat"]),title:(0,i.t)([el,"chat"]),selectedText:(null==r?void 0:r.chat_room_ids)?(0,i.t)([el,"n_chats"],{count:(null==r||null==(e=r.chat_room_ids)?void 0:e.length)||0}):"",onApply:function(e){var t,n;o((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={chat_room_ids:((null==e?void 0:e.value)||[]).length?null==e?void 0:e.value:null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},shouldShowRemoveButton:!!(null==r?void 0:r.chat_room_ids),children:a.isDataLoading()?(0,n.jsx)(ei.a,{}):(0,n.jsx)(Y.Bi,{options:s,className:"w-full",param:{id:"chat_room_ids",key:"chat_room_ids",value:(null==r?void 0:r.chat_room_ids)||[]},legend:(0,i.t)([el,"chats"]),hasSearch:!0,searchProps:{placeholder:(0,i.t)([el,"search_chats"])}})})}},{name:"date_range",component:function(e){var t=e.isInitialOpen,r=e.name,o=void 0===r?"name":r,a=m(),s=a.filters,l=a.setFilters,c=function(e){var t,r;l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ef(e,t,r[t])})}return e}({},s),r=null!=(r=ef({},o,e))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.".concat(o)),title:(0,i.t)("search_v2.filters.".concat(o)),selectedText:(null==s?void 0:s[o])?(0,i.t)([em,null==s?void 0:s[o]]):null,isInitialOpen:t,onApply:c,children:(0,n.jsx)("div",{className:"p-2",children:Object.values(ep).map(function(e){return(0,n.jsx)("button",{type:"button","aria-label":(0,i.t)([em,e]),onClick:function(){return c(e)},className:"hover:bg-tertiary text-xs-plus group block w-full rounded-lg px-2 py-[10px] text-left font-medium transition-colors duration-75",children:(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("span",{children:(0,i.t)([em,e])})})},e)})})})}}]},e_=function(e){return(eg[e.type]||[]).map(function(e){var t=e.name,r=e.component,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","component"]);return(0,n.jsx)("div",{className:"py-1",children:(0,n.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:t},i))},t)})},ex=r(43544),ej={posts:[v.Relevance,v.Latest,v.Oldest,v.Popular,v.Likes,v.Alphabetical,v.NewActivity],comments:[v.Relevance,v.Latest,v.Oldest,v.Likes,v.Alphabetical],events:[v.Relevance,v.Latest,v.Oldest,v.Popular,v.Likes,v.Alphabetical],lessons:[v.Relevance,v.Latest,v.Oldest,v.Alphabetical],members:[v.Relevance,v.Latest,v.Oldest,v.Alphabetical]},ew=function(e){var t=e.type,r=x(),o=r.sort,a=r.setSort,s=ej[t];return s?(0,n.jsx)("div",{className:"flex flex-1 items-center justify-end",children:(0,n.jsx)(ex.Lt,{options:s.map(function(e){return{value:e,label:(0,i.t)("sorting_options.".concat(e))}}),activeOptionValue:o[t],onChange:function(e){return Object.values(v).includes(e)&&a(t,e)}})}):null},eO=r(37416),eS=r(11944),ek=r(58533),eP=function(){return(0,n.jsx)("div",{className:"border-primary h-px border-b"})},eC=r(52928),eN=r(795),eA=r(46837),eI=r(24330),eE=r(98363),eT=function(e){var t=e.name,r=e.avatarUrl,o=e.postName,a=e.createdAt,s=e.userImageSize,l=e.flaggedForApprovalAt;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(eE.s,{src:r,name:t,size:void 0===s?"6":s})}),(0,n.jsxs)("div",{className:"w-[90%]",children:[(0,n.jsxs)("div",{className:"text-selector-active truncate",children:[(0,n.jsx)(S.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:t})," ",(0,n.jsx)(S.Z.LabelSm,{leading:"leading-3",color:"text-selector-active",children:(0,i.t)("search_v2.commented_on")})," ",(0,n.jsx)(S.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:o})]}),(0,n.jsxs)("div",{className:"leading-3",children:[(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:(0,eA.p6)(a)}),l&&(0,n.jsx)(eI.g,{className:"!bg-author-in-review post__headline-tag align ml-2 border-0 align-middle uppercase text-white",label:(0,i.t)("in_review")})]})]})]})},eL=r(34860),eD=r(85924),eM=function(e){var t=e.originalText,r=e.highlightedText,i=(0,o.useMemo)(function(){var e,n;if(!t)return"";return e=(r?Array.from(r.matchAll(/<mark>(.*?)<\/mark>/g),function(e){return e[1]}):[]).map(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}),n=RegExp("(".concat(e.join("|"),")"),"gi"),t.replace(n,"<mark>$1</mark>")},[t,r]);return(0,n.jsx)(eN.w,{content:i})},eR=r(80219),eB=r(35556),eF=r(43340),ez=Object.assign({},{Comment:function(e){var t=e.item,r=B(t),i=t.highlighted_body||t.body;return(0,n.jsx)(eC.OL,{to:r,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"comment-result",children:(0,n.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,n.jsx)(eT,{name:t.user_name,postName:t.post_name,createdAt:t.created_at,avatarUrl:t.user_avatar_url,userImageSize:"8",flaggedForApprovalAt:t.flagged_for_approval_at}),(0,n.jsx)("div",{className:"[&_mark]:!bg-search-yellow line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eN.w,{content:i})})})]})})},Event:function(e){var t=e.item,r=(0,U.LM)({spaceSlug:t.space_slug,slug:t.slug}),i=(0,eD.TC)().isDarkAppearance?(0,eL.aP)("dark-mode-cover-thumbnail-2x.png"):(0,eL.aP)("light-mode-cover-thumbnail-2x.png");return(0,n.jsxs)(eC.OL,{className:"flex max-w-full flex-col items-start gap-4 pr-0 md:flex-row md:items-center md:gap-6 md:pr-6","data-testid":"event-result",to:r,children:[(0,n.jsx)("div",{className:"w-full rounded md:h-24 md:w-44",children:(0,n.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:t.cover_image_url||i,alt:""})}),(0,n.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-1 flex-col gap-4",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)(eM,{originalText:t.name,highlightedText:t.highlighted_name})}),(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(O.JO,{type:"16-calendar",size:16,className:"text-default !h-4 !w-4"}),(0,n.jsx)(S.Z.LabelXs,{children:(0,eA.p6)(t.starts_at,"EEEE, MMM d, h:mm a (z)")})]})})]})]})},Member:function(e){var t,r=e.item,i=(0,U.zd)({public_uid:r.public_uid});return(0,n.jsxs)(eC.OL,{to:i,className:"flex gap-4 pr-6","data-testid":"second-user-result",children:[(0,n.jsx)(eE.s,{src:null!=(t=r.avatar_url)?t:"",name:r.name,size:"16"}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:r.name})," ",r.headline&&(0,n.jsx)(S.Z.LabelXs,{color:"text-default",children:r.headline})]}),r.bio&&(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.LabelSm,{color:"text-selector-active",children:r.bio})})]})]})},Post:function(e){var t,r=e.item,o=(0,U.LM)({spaceSlug:r.space_slug,slug:r.slug}),a=r.highlighted_body||r.body;return(0,n.jsxs)(eC.OL,{to:o,className:(0,C.A)("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.cover_image_url}),"data-testid":"post-result",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[!r.hide_meta_info&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eE.s,{src:null!=(t=r.user_avatar_url)?t:"",name:r.user_name,size:"6"}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name),"  ").concat((0,eA.p6)(r.created_at))}),r.flagged_for_approval_at&&(0,n.jsx)(eI.g,{className:"!bg-author-in-review post__headline-tag align mt-0 border-0 align-middle uppercase text-white",label:(0,i.t)("in_review")})]}),(0,n.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)(eM,{originalText:r.name,highlightedText:r.highlighted_name})}),(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eN.w,{content:a})})})]})]}),r.cover_image_url&&(0,n.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,n.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:r.cover_image_url,alt:""})})]})},Lesson:function(e){var t=e.item,r=t.space_emoji||{},i=r.emoji,o=r.custom_emoji_url,a=r.custom_emoji_dark_url,s=(0,eD.TC)().currentAppearance,l=U.H4.showLesson({spaceSlug:t.space_slug,sectionId:String(t.section_id),lessonId:t.id}),c=t.highlighted_body||t.body;return(0,n.jsx)(eC.OL,{to:l,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"course-lesson-result",children:(0,n.jsxs)("div",{className:"flex max-w-full flex-col gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eR.S,{wrapperClassName:"flex items-center !w-5 !h-5",emoji:i,customEmojiUrl:o,customEmojiDarkUrl:a,appearance:s}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:t.space_name})]}),(0,n.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)(eM,{originalText:t.name,highlightedText:t.highlighted_name})}),t.body&&(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eN.w,{content:c})})})]})]})})},ImagePost:function(e){var t,r=e.item,i=(0,U.LM)({spaceSlug:r.space_slug,slug:r.slug}),o=r.highlighted_body||r.body;return(0,n.jsxs)(eC.OL,{to:i,className:(0,C.A)("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.main_gallery_image_url}),"data-testid":"post-result",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[!r.hide_meta_info&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eE.s,{src:null!=(t=r.user_avatar_url)?t:"",name:r.user_name,size:"6"}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name),"  ").concat((0,eA.p6)(r.created_at))})]}),(0,n.jsx)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eN.w,{content:o})})})})]}),r.main_gallery_image_url&&(0,n.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,n.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:r.main_gallery_image_url,alt:""})})]})},Messages:function(e){var t,r,i=e.item,o=i.sender,a=i.sent_at,s=i.embedded,l=i.chat_space_slug,c=s?i.chat_space_name:i.chat_room_name;return(0,n.jsx)(eC.OL,{to:(0,eF.ut)({uuid:i.chat_room_uuid,slug:l},i),className:"flex gap-4 pr-0 md:gap-1 md:pr-6","data-testid":"message-result",children:(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eE.s,{src:null!=(t=i.user_avatar_url)?t:"",name:null!=(r=null==o?void 0:o.name)?r:"",size:"6"}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(null==o?void 0:o.name),"  ").concat((0,eA.p6)(a),"  ").concat(c)})]}),(0,n.jsx)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(eB.z,{message:i,shouldShowPreviewBlocks:!1})})})]})})}}),eU=function(e){var t=e.item,r=(t||{}).type,i={post:ez.Post,community_member:ez.Member,comment:"comment"===t.type&&t.post_slug&&ez.Comment,lesson:ez.Lesson,event:ez.Event,image:ez.ImagePost,messages:ez.Messages}[r];return i?(0,n.jsx)(i,{item:t}):null},eZ=r(20624),eG=function(e){var t=e.searchResults,r=e.fetchNextPage,i=e.hasNextPage;return(0,n.jsx)(ek.Z,{className:"flex flex-col gap-5 py-6",next:r,hasMore:!!i,loader:(0,n.jsx)(eZ.m,{}),dataLength:t.length,style:{overflow:"initial"},scrollableTarget:"scrollable-container",children:t.map(function(e){return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(eU,{item:e}),(0,n.jsx)(eP,{})]},e.id)})})};function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eH=function(e){var t=e.isOpen,r=e.onClose,a=void 0===r?j.noop:r,s=e.defaultSearchValue,c=[{id:"posts",label:(0,i.t)("search_v2.tabs.posts")},{id:"comments",label:(0,i.t)("search_v2.tabs.comments")},{id:"messages",label:(0,i.t)("search_v2.tabs.messages")},{id:"lessons",label:(0,i.t)("search_v2.tabs.lessons")},{id:"events",label:(0,i.t)("search_v2.tabs.events")},{id:"members",label:(0,i.t)("search_v2.tabs.members")}],u=(0,b.wh)(),d=u.isViewOnlyMasquerading,f=u.currentCommunityMember,p=(0,l.TH)(),h=eV((0,o.useState)(""),2),y=h[0],v=h[1],g=R().addRecentSearch,_=eV((0,o.useState)(c[0].id),2),x=_[0],w=_[1],O=m(),N=O.filters,I=O.resetFilters,E=X({onClose:a,type:x}),D=E.isLoading,M=E.isLoadingCount,B=E.results,F=E.setSearchValue,z=E.onKeydown,U=E.searchValue,Z=E.fetchNextPage,G=E.hasNextPage,q=E.countData,V=f?c:c.filter(function(e){return"messages"!==e.id}),H=function(e){var t;return(null==q||null==(t=q.find(function(t){return t.type===e}))?void 0:t.count)||0},W=function(){g({type:x,query:y}),F(y)};return(0,o.useEffect)(function(){return F(s),v(s),function(){w("general")}},[s,F]),(0,o.useEffect)(function(){I()},[x]),(0,o.useEffect)(function(){a()},[p,a]),(0,n.jsxs)(eO.x,{isOpen:t,onClose:a,shouldShowCloseButton:!0,contentPortalId:"search-v2-portal",children:[(0,n.jsx)(eO.x.Header,{children:(0,n.jsx)(A,{isLoading:D,isFixed:!1,searchValue:y,onChange:v,onKeydown:function(e){if("Enter"===e.key)return void W();z(e)},onClickCancel:function(){F(""),v("")},shouldShowClearButton:!0})}),(0,n.jsxs)("div",{className:"mx-auto w-full max-w-screen-md px-3 lg:px-0",children:[M&&(0,n.jsx)(T,{}),(0,n.jsxs)("div",{className:(0,C.A)({hidden:M||!U}),children:[(0,n.jsx)("div",{className:"mb-4 line-clamp-2 pt-6 md:pt-10",children:(0,n.jsx)(S.Z.TitleMd,{children:(0,i.t)("search_v2.search_result_for",{query:U})})}),(0,n.jsx)(eS.O.Group,{onChange:d?j.noop:function(e){w(V[e].id)},className:"border-b",children:(0,n.jsx)(eS.O.List,{children:V.map(function(e){return(0,n.jsxs)(eS.O,{disabled:d,children:[e.label,(0,n.jsx)(eS.O.Counter,{children:H(e.id)})]},e.id)})})})]})]}),!D&&!!U&&(0,n.jsxs)("div",{className:"mx-auto mt-2 flex w-full max-w-screen-md list-none flex-wrap items-center space-x-2 px-3 lg:px-0",children:[0==B.length&&(0,j.isEmpty)(N)?null:(0,n.jsx)(e_,{type:x}),B.length>0&&(0,n.jsx)(ew,{type:x})]}),(0,n.jsx)(eO.x.Body,{wrapperClassName:"h-full overflow-auto max-w-screen-md px-3 lg:px-0",children:D?(0,n.jsx)(L,{type:x,numberOfRecords:10}):U?(0,n.jsx)("div",{id:"scrollable-container",className:"h-full overflow-auto",children:B.length>0?(0,n.jsx)(eG,{searchResults:B,fetchNextPage:Z,hasNextPage:G}):(0,n.jsx)(P,{type:x})}):(0,n.jsx)(k,{})})]})},eW=function(e){var t=e.searchValue,r=(0,u.dd)();return(0,n.jsx)(p,{children:(0,n.jsx)(_,{children:(0,n.jsx)(eH,{isOpen:r.visible,onClose:r.remove,defaultSearchValue:t})})})},eQ=u.gk.create(function(e){var t=e.searchValue;return(0,n.jsx)(eW,{searchValue:t})}),eJ=function(){return(0,u.dd)(eQ)};r(66007);var eK=function(e){var t=e.label;return(0,n.jsx)("span",{className:"border-primary bg-primary flex rounded border px-1.5 py-[1px]",children:(0,n.jsx)(S.Z.LabelXs,{color:"text-default",children:t})})},e$=r(17617),eX=function(e){var t=e.isSelected,r=e.onClick,o=e.onMouseOver,a=e.onFocus,s=e.index,l=e.searchValue,c=(0,e$.kK)();return(0,n.jsxs)("li",{"aria-current":t,"aria-posinset":s,className:(0,C.A)("focus:bg-tertiary flex w-full cursor-pointer list-none items-center rounded px-4 py-2.5",{"bg-tertiary":t}),onMouseOver:o,onFocus:a,children:[(0,n.jsxs)("button",{type:"button",onClick:r,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline",children:[(0,n.jsx)(O.JO,{type:"search-v2",className:"text-default !h-5 min-h-[20px] !w-5 min-w-[20px]",size:20,useWithFillCurrentColor:!0}),(0,n.jsx)(S.Z.LabelSm,{as:"div",children:(0,n.jsxs)("span",{className:"[word-break:break-word]",children:[l," -"," ",c?(0,i.t)("search_v2.search_community_quick_mobile"):(0,i.t)("search_v2.search_community_quick")]})})]}),t&&(0,n.jsx)(eK,{label:(0,i.t)("search_v2.enter_character")})]})},eY=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary",children:t})};function e0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function e1(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var e2=function(e){var t=e.onClick,r=e.onKeyDown,i=e.children,o=e.link,a={onClick:t,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline"};return o?(0,n.jsx)(eC.rU,e1(e0({to:o},a),{children:i})):(0,n.jsx)("button",e1(e0({type:"button"},a),{children:i}))},e3=function(e){var t=e.profile;return(0,n.jsxs)(n.Fragment,{children:[!t.avatar_url&&(0,n.jsx)(O.JO,{type:"36-ai-bot",size:36,className:"!h-6 !w-6"}),t.avatar_url&&(0,n.jsx)("img",{src:t.avatar_url,alt:t.name,className:"h-6 w-6 rounded-full",loading:"lazy"})]})},e6=function(e){var t,r=e.isSelected,o=e.onClick,a=e.onMouseOver,s=e.onFocus,l=e.index,c=e.result,u=e.link,d="community_member"===c.type,f="agent"===c.type,p="space"===c.type,m=d&&c.profile_confirmed_at,b=d&&c.email,h=p?{emoji:c.emoji,customEmojiUrl:c.custom_emoji_url,customEmojiDarkUrl:c.custom_emoji_dark_url}:{},y=(0,eD.TC)().currentAppearance,v=p||d,g=(0,e$.en)(),_=p?"space":m?"community_member":"invited_member";return(0,n.jsx)("li",{"aria-current":r,"aria-posinset":l,title:f&&c.plain_text_bio?(0,i.t)("search_v2.search_community_quick_agents_bio",{bio:c.plain_text_bio}):"",className:(0,C.A)("focus:bg-tertiary group flex w-full cursor-pointer list-none items-center rounded px-4",{"bg-tertiary":r},b?"py-1.5":"py-2.5"),onMouseOver:a,onFocus:s,children:(0,n.jsxs)(e2,{onClick:o,onKeyDown:o,link:u,children:[d&&(0,n.jsx)(eE.s,{src:null!=(t=c.avatar_url)?t:"",name:c.name,size:"6"}),f&&(0,n.jsx)(e3,{profile:c}),p&&(0,n.jsx)("div",{className:"min-h-[1.5rem] min-w-[1.5rem]",children:(0,n.jsx)(eR.S,{className:"flex !h-6 !w-6 items-center justify-center align-top",emoji:h.emoji,customEmojiUrl:h.customEmojiUrl,customEmojiDarkUrl:h.customEmojiDarkUrl,appearance:y})}),(0,n.jsxs)("div",{className:(0,C.A)("flex flex-col",{"pt-1.5":b}),children:[(0,n.jsx)(S.Z.LabelSm,{as:"div",truncate:!0,children:(0,n.jsx)(eN.w,{content:c.highlighted_name||""})}),b&&(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsx)(S.Z.LabelSm,{as:"span",truncate:!0,children:(0,n.jsx)("span",{className:"text-light leading-none",children:c.email})})})]}),(0,n.jsx)("span",{className:(0,C.A)("ml-auto hidden group-focus:block",{"!block":r||!g}),children:v&&(0,n.jsx)(S.Z.LabelXs,{color:"text-default",children:(0,i.t)(["search_v2.types",_])})})]})})},e4=r(81772),e5=r(93276),e8=r(44815),e9=function(e){var t=e.searchTerm,r=e.index,i=e.activeIndex,o=e.handleClick,a=e.removeRecentSearch,s=e.canHover,l=e.setActiveIndex,c=e.dataTestId,u=r+1===i;return(0,n.jsxs)("li",{"aria-current":u,"aria-posinset":r+1,className:(0,C.A)("group flex w-full cursor-pointer list-none items-center rounded",{"bg-tertiary":u}),"data-testid":c,children:[(0,n.jsx)("button",{type:"button",onClick:function(){return o(t.query)},onMouseOver:function(){return l(r+1)},onFocus:function(){return l(r+1)},className:"w-full focus-visible:!outline",children:(0,n.jsxs)("div",{className:"flex items-center gap-3 truncate px-4 py-2",children:[(0,n.jsx)(O.JO,{type:"16-clock",size:16,className:"text-default !h-5 min-h-[16px] !w-5 min-w-[16px]",useWithFillCurrentColor:!0}),(0,n.jsx)("div",{className:"flex-1 truncate text-left",children:(0,n.jsx)(S.Z.LabelSm,{children:t.query})})]})}),(0,n.jsx)("button",{type:"button",onClick:function(){return a(t.query)},className:(0,C.A)("text-default ml-auto mr-2 hidden rounded-md focus-visible:!outline",{"!block":!s||u}),children:(0,n.jsx)(O.JO,{useWithFillCurrentColor:!0,type:"close"})})]})},e7=function(e){var t=e.recentSearches,r=e.removeRecentSearch,o=eJ().show,a=(0,e$.en)(),s=function(e){o({searchValue:e}).catch(function(e){return console.error(e)})},l=t.slice(0,5),c=(0,e8.t)({optionsCount:l.length+1,onEnter:function(e){s(0===e?"":t[e-1].query)}}),u=c.activeIndex,d=c.setActiveIndex;return(0,n.jsx)("div",{className:"p-2",children:(0,n.jsxs)("ul",{className:"list-none","data-testid":"recent-search-list",children:[(0,n.jsx)("li",{className:"ml-4",children:(0,n.jsx)(S.Z.LabelXxs,{weight:"semibold",color:"text-default",children:(0,i.t)("search_v2.recent_searches.title")})}),l.map(function(e,t){return(0,n.jsx)(e9,{searchTerm:e,index:t,activeIndex:u,handleClick:s,removeRecentSearch:r,canHover:a,setActiveIndex:d,dataTestId:"recent-search-item"},"".concat(e.type,"-").concat(e.query))})]})})},te=function(e){var t=e.onClose,r=void 0===t?s():t,i=R(),a=i.recentSearches,u=i.addRecentSearch,d=i.removeRecentSearch,f=eJ().show,p=(0,o.useRef)(null),m=(0,l.k6)(),b=function(){u({type:"general",query:g}),f({searchValue:g}).catch(function(e){return console.error(e)}),r()},h=(0,e4.O)().createChat,y=function(e,t){h({id:e.id,body:(0,e5.S)(t)}).then(function(e){m.push((0,U.Gr)({id:e.id.toString()}))}).catch(function(e){console.error(e)})},v=X({onClose:r,type:"general",onSearchInCommunity:b,shouldDisplayAgents:!0,askAgent:y}),g=v.searchValue,_=v.results,x=v.isLoading,j=v.hasNoResults,w=v.setSearchValue,O=v.resultsContainerRef,S=v.onKeydown,P=v.onMouseOver,C=v.onFocus,N=v.isLoadingSearch,I=v.selectedResultIndex,E=v.resetSearch;(0,c.Z)(p,r);var T=function(e){e||b(),((null==e?void 0:e.type)==="community_member"||(null==e?void 0:e.type)==="space")&&r(),(null==e?void 0:e.type)==="agent"&&(r(),y(e,g))};return(0,n.jsxs)("div",{ref:p,children:[(0,n.jsx)(A,{onChange:function(e){return w(e)},isFixed:!0,searchValue:g,onKeydown:function(e){(g||!a.length)&&S(e)},isLoading:N,onClickCancel:function(){r(),E()}}),(0,n.jsx)(eY,{children:g||a.length?!g&&a.length?(0,n.jsx)(e7,{removeRecentSearch:d,recentSearches:a}):(0,n.jsx)("div",{className:"overflow-y-auto md:max-h-96",ref:O,children:(0,n.jsxs)("ul",{className:"list-none p-2",children:[(0,n.jsx)(eX,{index:0,searchValue:g,isSelected:0===I,onClick:function(){return T(null)},onMouseOver:P,onFocus:C}),!j&&!x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"-mx-2 my-2",children:(0,n.jsx)(eP,{})}),_.map(function(e,t){var r=t+1,i="".concat(e.type,"-").concat(e.id);return"space"===e.type||"community_member"===e.type||"agent"===e.type?(0,n.jsx)(e6,{index:r,result:e,onMouseOver:P,onFocus:C,isSelected:I===r,onClick:function(){return T(e)},link:"community_member"===e.type?(0,U.zd)({public_uid:e.public_uid}):"space"===e.type?"/c/".concat(e.slug):null},i):null})]})]})}):(0,n.jsx)(k,{})})]})},tt=r(34519),tr=function(){var e=(0,u.dd)();return(0,n.jsxs)(tt.u_,{title:(0,i.t)("search_v2.search_community_quick"),isOpen:e.visible,onClose:e.remove,children:[(0,n.jsx)(tt.u_.Overlay,{}),(0,n.jsx)(tt.u_.Content,{position:"top",className:(0,C.A)("border-primary w-full rounded-[0px] sm:rounded-lg sm:border md:w-[620px]"),size:"xl",children:(0,n.jsx)(p,{children:(0,n.jsx)(_,{children:(0,n.jsx)(te,{onClose:e.hide})})})})]})},tn=u.gk.create(function(){return(0,n.jsx)(tr,{})}),ti=function(){return(0,u.dd)(tn)}},86226:function(e,t,r){"use strict";r.d(t,{O:()=>n});var n=function(e){var t=e.action;return"notifications__row--".concat((null==t?void 0:t.includes("flagged"))?"flagged":t)}},58361:function(e,t,r){"use strict";r.d(t,{u:()=>d});var n=r(85893),i=r(15270),o=r(54329),a=r(84057),s=r(41342),l=r(1168),c=r(83485),u=r(38500),d=function(e){var t=e.handleClose,r=(0,s.wh)().isViewOnlyMasquerading,d=(0,a.f)().resizeNotificationWindow;return(0,c.w)(d),(0,n.jsx)(u.JB,{onClose:t,children:(0,n.jsxs)("div",{className:(0,l.A)("h-full w-fit",{"pointer-events-none":r}),id:"notifications-drawer","data-testid":"notifications-drawer",children:[(0,n.jsx)(o.h,{onClose:t}),(0,n.jsx)(i.u,{})]})})}},44497:function(e,t,r){"use strict";r.d(t,{$:()=>d});var n=r(67294),i=r(96486),o=r(88767),a=r(84326),s=r(93199),l=r(13532);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.shouldUseDebounce,d=void 0===r||r,f=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],m=f[1],b=(0,o.useMutation)(function(e){var t;return t=e,(0,s.Cu)(l.av.emailValidations.create(),{email:t})}),h=b.mutateAsync,y=b.isLoading,v="production"===window.RAILS_ENV,g=(0,n.useCallback)(function(e){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!v)return[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,h(e)];case 2:if(!(t=r.sent()).accept_as_signup)return t.did_you_mean&&m(t.did_you_mean),[2,(0,a.t)("".concat("authentication_app.signup",".form.errors.please_enter_valid_email_address"))];return m(null),[2,!0];case 3:return console.error(r.sent()),m(null),[2,!0];case 4:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)})})()},[h,v]),_=(0,n.useMemo)(function(){return(0,i.debounce)(function(e,t){g(e).then(t)},500)},[g]);return{validateEmail:(0,n.useCallback)(function(e){return e?d?new Promise(function(t){_(e,t)}):g(e):(m(null),Promise.resolve(!0))},[_,g,d]),isValidatingEmail:y,suggestedEmail:p}}},78824:function(e,t,r){"use strict";r.d(t,{X:()=>m});var n=r(85893),i=r(84326),o=r(57105),a=r(34755),s=r(39905),l=r(51466),c=r(26950),u=r(42515),d=function(e){var t=e.modal,r=e.refetchPaywallGroups,n=e.paywallGroup,i=(0,u.W)({}),o=i.createMutation,a=i.updateMutation,s=!!n;return{getFormDefaults:function(){var e;return{name:(null==n?void 0:n.name)||"",id:null==n?void 0:n.id,currency_id:null==n||null==(e=n.currency)?void 0:e.id}},isEditionMode:s,mutation:s?a:o,closeModal:t.hide,refetchPaywallGroups:r}},f=function(e){var t=e.paywallGroup,r=e.refetchPaywallGroups,u=(0,o.dd)(),f=d({modal:u,refetchPaywallGroups:r||function(){},paywallGroup:t}),p=f.getFormDefaults,m=f.mutation,b=f.isEditionMode;return(0,n.jsx)(c.u,{show:u.visible,title:b?(0,i.t)("settings.paywall_groups.headings.edit"):(0,i.t)("settings.paywall_groups.headings.create"),onClose:u.hide,children:(0,n.jsx)(l.l,{onSubmit:function(e){m.mutate(e)},defaultValues:p(),className:"paywall-group-form",children:function(e){var r,o,c=e.formState.isSubmitting;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.l.Item,{name:"name",translationRoot:"settings.paywall_groups.fields",hideBorder:!0,hideDescription:!0,fullWidth:!1,rules:{required:!0,maxLength:255},hidePlaceholder:!0,children:(0,n.jsx)(l.l.Input,{})}),(!t||(null==t||null==(r=t.policies)?void 0:r.requires_currency))&&(0,n.jsx)(a.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_groups.fields",formItemRules:{required:(0,i.t)("settings.paywall_groups.fields.currency_id_is_required")},formItemTooltipText:(0,i.t)("settings.paywall_groups.fields.currency_id_tooltip"),disabled:t&&!(null==(o=t.policies)?void 0:o.can_change_currency)}),(0,n.jsx)(s.z,{type:"submit",variant:"circle",disabled:c||m.isLoading,className:"paywall-group-form__submit-button",children:b?(0,i.t)("settings.paywall_groups.actions.update"):(0,i.t)("settings.paywall_groups.actions.create")})]})}})})},p=o.gk.create(function(e){var t=e.paywallGroup,r=e.refetchPaywallGroups;return(0,n.jsx)(f,{paywallGroup:t,refetchPaywallGroups:r})}),m=function(){return(0,o.dd)(p)}},83268:function(e,t,r){"use strict";r.d(t,{a:()=>h});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(67861),l=r(39905),c=r(2754),u=r(51169),d=r(78824),f=r(42515),p=r(57363),m=function(){return(0,n.jsxs)("div",{className:"paywall-groups-list__info table-wrapper",children:[(0,n.jsx)("div",{children:(0,n.jsx)(p.JO,{type:"question-mark",className:"icon--sm paywall-groups-list__info__icon"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:a.Z.t("settings.paywall_groups.headings.what_is")}),(0,n.jsxs)("p",{className:"paywall-groups-list__info__explanation text-dark",children:[a.Z.t("settings.paywall_groups.alerts.info.what_is"),"\xa0",(0,n.jsx)("a",{href:"https://community.circle.so/c/paywalls/",target:"_blank",rel:"noreferrer",children:a.Z.t("settings.paywall_groups.actions.learn_more")})]})]})]})};m.propTypes={};var b=[{title:(0,a.t)("settings.paywall_groups.table.name"),dataIndex:"name",key:"name"},{title:(0,a.t)("settings.paywall_groups.table.paywalls"),dataIndex:"paywalls",key:"paywalls"},{title:" ",dataIndex:"actions",key:"actions"}],h=function(e){var t=e.shouldHideHeader,r=(0,d.X)(),i=(0,(0,f.W)({}).useListPaywallGroups)(),o=i.data,p=i.isLoading,h=i.refetch,y=function(e){var t=e.paywallGroup;return r.show({refetchPaywallGroups:h,paywallGroup:void 0===t?null:t})},v=null==o?void 0:o.map(function(e){return{key:e.id,name:(0,n.jsx)("div",{className:"whitespace-normal",children:e.name}),paywalls:(0,n.jsx)("div",{className:"whitespace-normal",children:e.paywalls_summary_text}),actions:(0,n.jsx)("button",{type:"button",onClick:function(){return y({paywallGroup:e})},className:"paywall-groups-list__link",children:(0,a.t)("settings.paywall_groups.actions.edit")})}});return(0,n.jsxs)("div",{className:"paywall-groups-list",children:[!(void 0!==t&&t)&&(0,n.jsx)("div",{className:"table-wrapper",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h3",{children:(0,a.t)("settings.paywall_groups.title")}),(0,n.jsx)(l.z,{variant:"circle",onClick:y,children:(0,a.t)("settings.paywall_groups.actions.create_group")})]})}),(0,n.jsx)(m,{}),(0,n.jsx)("div",{children:p?(0,n.jsx)(u.a,{}):(null==o?void 0:o.length)>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.s,{className:"!px-0",children:(0,n.jsx)(s.s.Title,{children:(0,a.t)("settings.paywall_groups.count",{count:o.length})})}),(0,n.jsx)(c.w,{columns:b,dataSource:v||[],hasStickyHeader:!0,headerClassName:"top-[63px]"})]})})]})};h.propTypes={shouldHideHeader:o().bool}},42515:function(e,t,r){"use strict";r.d(t,{W:()=>l});var n=r(88767),i=r(84326),o=r(93199),a=r(13532),s=r(60878),l=function(e){var t=e.closeModal,r=void 0===t?null:t,l=e.refetchPaywallGroups,c=void 0===l?null:l,u=(0,s.pm)(),d=u.success,f=u.error;return{useListPaywallGroups:function(e){return(0,n.useQuery)("paywall-groups",function(){return(0,o.UT)(a.av.paywallGroup.index({params:e}))})},updateMutation:(0,n.useMutation)(function(e){return(0,o.aU)(a.av.paywallGroup.update({paywallGroupId:e.id}),{paywall_group:e})},{onSuccess:function(){d(i.Z.t("settings.paywall_groups.alerts.success.updated")),null==r||r(),null==c||c()},onError:function(e){console.error(e.errorDetails),f(String(e.errorDetails||e.message),{duration:"long"})}}),createMutation:(0,n.useMutation)(function(e){return(0,o.Cu)(a.av.paywallGroup.create(),{paywall_group:e})},{onSuccess:function(){d(i.Z.t("settings.paywall_groups.alerts.success.created")),null==r||r(),null==c||c()},onError:function(e){console.error(e.errorDetails),f(String(e.errorDetails||e.message),{duration:"long"})}}),useGetPaywallGroup:function(e){return(0,n.useQuery)("paywall-group-show",function(){return(0,o.UT)(a.av.paywallGroup.show({paywallGroupId:e}))})}}}},8974:function(e,t,r){"use strict";r.d(t,{S:()=>u});var n=r(85893),i=r(88767),o=r(57105),a=r(52478),s=r(60878),l=r(83268),c=new i.QueryClient(a.V),u=function(){return(0,n.jsx)(s.VW,{children:(0,n.jsx)(i.QueryClientProvider,{client:c,children:(0,n.jsx)(o.yB,{children:(0,n.jsx)(l.a,{})})})})}},15702:function(e,t,r){"use strict";r.d(t,{y:()=>Z});var n=r(85893),i=r(45697),o=r.n(i),a=r(71738),s=r(41197),l=r(51169),c=r(67294),u=r(19043),d=r(65766),f=r(31406);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=(0,c.createContext)({});b.displayName="BulkImportTrialPaywallSubscriptionFormContext";var h=function(e){var t,r,i,o=e.paywallId,a=e.paywallPriceId,s=e.paywallTrialDays,l=e.paywallCouponCode,p=e.skipDateValidations,h=e.hideNotifyMemberForm,y=e.children,v=m((0,c.useState)(null!=(t=null==o?void 0:o.toString())?t:""),2),g=v[0],_=v[1],x=m((0,c.useState)(null!=(r=null==a?void 0:a.toString())?r:""),2),j=x[0],w=x[1],O=m((0,c.useState)(null!=(i=null==s?void 0:s.toString())?i:""),2),S=O[0],k=O[1],P=m((0,c.useState)(null!=l?l:""),2),C=P[0],N=P[1],A=(0,u.O)({communityMemberId:null,status:p?f.n:[d.Tl.ACTIVE]}).paywallsListQuery.isLoading;return(0,n.jsx)(b.Provider,{value:{paywallId:g,setPaywallId:_,paywallPriceId:j,setPaywallPriceId:w,paywallTrialDays:S,setPaywallTrialDays:k,paywallCouponCode:C,setPaywallCouponCode:N,isPaywallLoading:A,skipDateValidations:!!p,hideNotifyMemberForm:h},children:y})},y=function(){return(0,c.useContext)(b)},v=r(84326),g=r(61447),_=r(5919),x=r(41553),j=function(e){var t=e.label,r=e.children;return(0,n.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsx)(x.Z.LabelSm,{weight:"semibold",children:void 0===t?"":t})}),r]})};j.propTypes={label:o().string,children:o().node};var w=r(96486),O=function(e){var t=e.name,r=e.options,i=e.onChange,o=void 0===i?w.noop:i,a=e.disabled,s=e.value;return(0,n.jsx)("select",{className:"disabled:bg-secondary form-control w-full",name:t,onChange:o,disabled:void 0!==a&&a,value:void 0===s?"":s,children:r.map(function(e){var t=e.label,r=e.value;return(0,n.jsx)("option",{value:r,children:t},r)})})};O.propTypes={name:o().string,options:o().arrayOf(o().shape({label:o().string.isRequired,value:o().oneOfType([o().string,o().number])})),onChange:o().func,disabled:o().bool,value:o().string};var S=function(){var e=y(),t=e.paywallId,r=e.paywallCouponCode,i=e.setPaywallCouponCode,o=e.skipDateValidations,a=(0,_.n)({paywallId:t,selectCouponString:(0,v.t)("bulk_import_page.paywall.choose_coupon"),couponStatuses:o?_.m:[g.DP.ACTIVE],skipDateValidations:o}).couponCodeOptions,s=(0,c.useRef)(t);return(0,c.useEffect)(function(){s.current!==t&&(i(""),s.current=t)},[t,i]),(0,n.jsx)(j,{label:(0,v.t)("create_paywall_subscription_modal.form.coupon"),children:(0,n.jsx)(O,{name:"paywall[paywall_coupon_code]",options:a,disabled:1===a.length,onChange:function(e){var t;i(null!=(t=e.target.value)?t:r)},value:r})})},k=r(79840);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t,r=e.disabled,i=y().hideNotifyMemberForm,o=(t=(0,c.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return i?null:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 pt-8",children:[(0,n.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,v.t)("bulk_import_page.paywall.notify_member")}),(0,n.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,n.jsx)(k.Zh,{field:"paywall[paywall_send_notification_subscription_created_by_admin]",disabled:void 0!==r&&r,value:a,onChange:function(){s(!a)}}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("span",{children:(0,v.t)("bulk_import_page.paywall.notify_member_description")})})]})]})};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}C.propTypes={disabled:o().bool};var A={label:(0,v.t)("bulk_import_page.paywall.choose_paywall"),value:""},I=function(){var e=y(),t=e.paywallId,r=e.setPaywallId,i=e.skipDateValidations,o=(0,f.h)({communityMemberId:null,paywallStatuses:i?f.n:[d.Tl.ACTIVE]}).paywallOptions;return(0,n.jsx)(j,{label:(0,v.t)("create_paywall_subscription_modal.form.paywall_id"),children:(0,n.jsx)(O,{name:"paywall[paywall_id]",options:[A].concat(function(e){if(Array.isArray(e))return N(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return N(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),onChange:function(e){var n;r(null!=(n=e.target.value)?n:t)},value:t})})},E=r(63504);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L={label:(0,v.t)("bulk_import_page.paywall.choose_term"),value:""},D=function(){var e=y(),t=e.paywallId,r=e.paywallPriceId,i=e.setPaywallPriceId,o=(0,s.U)().paywallsIndex,a=(0,E.n)({paywall:o[t]}).paywallPriceOptions;return(0,n.jsx)(j,{label:(0,v.t)("create_paywall_subscription_modal.form.paywall_price_id"),children:(0,n.jsx)(O,{name:"paywall[paywall_price_id]",options:[L].concat(function(e){if(Array.isArray(e))return T(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),disabled:0===a.length,onChange:function(e){var t;i(null!=(t=e.target.value)?t:r)},value:r})})},M=r(94184),R=r.n(M),B=r(28347),F=r(13241),z=function(){var e=y(),t=e.paywallId,r=e.paywallTrialDays,i=e.setPaywallTrialDays,o=""===t,a=(0,c.useRef)(t);return(0,c.useEffect)(function(){a.current!==t&&(i(""),a.current=t)},[t,i]),(0,n.jsx)(j,{label:(0,v.t)("create_paywall_subscription_modal.form.trial_days_toggle"),children:(0,n.jsx)(F.I,{name:"paywall[paywall_trial_days]",suffix:(0,v.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:o,otherClassName:R()("",{"!opacity-100 !bg-secondary":o}),value:r,onChange:function(e){var t=""===e.target.value?NaN:Number(e.target.value);isNaN(t)?i(""):t<B.dy?i(1):t>B.ut?i(B.ut):i(t)}})})},U=function(){return y().isPaywallLoading?(0,n.jsx)(l.a,{}):(0,n.jsxs)("div",{className:"flex flex-col pb-6",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,n.jsx)(I,{}),(0,n.jsx)(D,{})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,n.jsx)(S,{}),(0,n.jsx)(z,{})]}),(0,n.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,n.jsx)(C,{})})]})},Z=function(e){var t=e.paywall_id,r=e.paywall_price_id,i=e.paywall_trial_days,o=e.paywall_coupon_code,l=e.paywall_skip_date_validations,c=e.hide_notify_member_form;return(0,n.jsx)(a.aH,{children:(0,n.jsx)(s.X,{children:(0,n.jsx)(h,{paywallId:t,paywallPriceId:r,paywallTrialDays:i,paywallCouponCode:o,skipDateValidations:void 0===l||l,hideNotifyMemberForm:void 0!==c&&c,children:(0,n.jsx)(U,{})})})})};U.propTypes={paywallId:o().string,paywallPriceId:o().string,paywallTrialDays:o().string,paywallCouponCode:o().string},Z.propTypes={paywall_id:o().string,paywall_price_id:o().string,paywall_trial_days:o().string,paywall_coupon_code:o().string,paywall_skip_date_validations:o().bool,hide_notify_member_form:o().bool}},76741:function(e,t,r){"use strict";r.d(t,{C2:()=>i,GE:()=>f,QG:()=>n,jk:()=>a,jy:()=>o,kU:()=>l,uJ:()=>d,xj:()=>s,yU:()=>c,zX:()=>u});var n="settings.paywalls_admin_dashboard.filters.start_date",i={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},o="date_range",a="last_seven_days",s="last_four_weeks",l="last_three_months",c="last_twelve_months",u="month_to_date",d="quarter_to_date",f="year_to_date"},26548:function(e,t,r){"use strict";r.d(t,{t:()=>d});var n=r(67294),i=r(96486);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,r=(e=(0,n.useState)(t),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],a=r[1];return[i,{add:function(e){a(function(t){if(t.has(e))return t;var r=new Set(t);return r.add(e),r})},remove:function(e){a(function(t){var r=new Set(t);return r.delete(e),r})},reset:function(){a(function(){return t})},clear:function(){a(function(){return new Set})}}]},s=r(61089);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}var d=function(e){var t,r=e.filters,o=e.defaultFilterItems,l=(0,s.Xt)(),d=l.queryParams,f=l.removeQueryParams,p=(0,i.flatten)(r.map(function(e){return e.filterKeys})),m=(t=a(function(){var e=new Set(o);return r.forEach(function(t){Object.keys(d).includes(t.name)&&e.add(t.name),void 0!=t.value&&e.add(t.name)}),e}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||u(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],h=m[1],y=h.add,v=h.remove,g=h.clear;return{isClearFiltersShown:(0,n.useMemo)(function(){var e=0,t=!0,r=!1,n=void 0;try{for(var i,a=o[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(Object.prototype.hasOwnProperty.call(d,s))return!0;b.has(s)&&(e+=1)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return b.size>e},[b,d,o]),getSplitAndAvailableFilters:(0,n.useCallback)(function(e){var t=c(b);return t.length?{availableFilters:e.filter(function(e){return!t.includes(e.name)}),displayedFilters:e.filter(function(e){return t.includes(e.name)})}:{availableFilters:e,displayedFilters:[]}},[b]),onClearFilters:function(){f(c(p)),g(),o.forEach(y)},onAddFilter:function(e){y(e)},onRemoveFilter:function(e,t){e||v(t)}}}},94548:function(e,t,r){"use strict";r.d(t,{n:()=>s});var n=r(85893),i=r(84326),o=r(41553),a="settings.paywalls_admin_dashboard.filters.empty_page",s=function(){var e=(0,i.t)([a,"title"]),t=(0,i.t)([a,"subtitle"]);return(0,n.jsx)("div",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,n.jsxs)("div",{className:"bg-primary border-primary border p-6 text-center lg:rounded-lg lg:p-36",children:[(0,n.jsx)(o.Z.TitleSm,{weight:"bold",children:e}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(o.Z.BodyMd,{color:"text-default",children:t})})]})})}},76203:function(e,t,r){"use strict";r.d(t,{x:()=>b});var n=r(85893),i=r(84326),o=r(94184),a=r.n(o),s=r(61089),l=r(61627),c=r(37928),u=r(26548);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(e){var t=e.defaultFilters,r=void 0===t?[]:t,i=e.customFilters,o=void 0===i?[]:i,d=e.defaultFilterItems,p=e.className,m=e.showClearButton,b=e.label,h=(0,u.t)({filters:f(r).concat(f(o)),defaultFilterItems:void 0===d?[]:d}),y=h.isClearFiltersShown,v=h.onClearFilters,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(h,["isClearFiltersShown","onClearFilters"]);return(0,n.jsxs)(c.I,{className:a()("w-full",p),children:[(0,n.jsx)(l.S,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({defaultFilters:r,customFilters:o,label:b},g)),(void 0===m||m)&&(0,n.jsx)(s.Cd,{isVisible:y,onClick:v})]})},m=r(82226),b=function(e){var t=e.filterNames,r=e.customFilterNames,o=(0,m.mN)(t,r).defaultFilters;return(0,n.jsx)(p,{label:(0,i.t)([m.po,"add_filter"]),defaultFilterItems:t,defaultFilters:o})}},82226:function(e,t,r){"use strict";r.d(t,{Oq:()=>eG,lO:()=>eq,mN:()=>eH,po:()=>eZ,oq:()=>eV});var n,i=r(96486),o=r(85893),a=r(84326),s=r(61089),l=r(27175),c=r(12581),u=r(39905),d=r(51466);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t,r=e.lteValue,n=e.gteValue,i=e.localeRoot,s=e.queryParamsKey,p=(0,c.j)().onApply,m=function(e){return e.replace(/\D/g,"")},b=Intl.NumberFormat("en-US",{minimumFractionDigits:2}),h=(0,l.r)(),y=function(e){if("0.0"===e||""===e||null==e)return"";var t=Number(m(e));return isNaN(t)?b.format(0):b.format(t/100)};return(0,o.jsx)(d.l,{defaultValues:(f(t={},s.lte,y(r)),f(t,s.gte,y(n)),t),onSubmit:function(e){var t,r=parseInt(m(e[s.lte])),n=parseInt(m(e[s.gte]));p((f(t={},s.lte,r),f(t,s.gte,n),t))},children:(0,o.jsxs)("div",{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",children:[(0,o.jsx)(d.l.Input,{name:s.gte,placeholder:(0,a.t)([i,"min_amount_placeholder"]),autoFocus:!0,transformValue:y}),(0,o.jsx)(d.l.Input,{name:s.lte,placeholder:(0,a.t)([i,"max_amount_placeholder"]),transformValue:y}),(0,o.jsx)(u.z,{variant:h,type:"submit",full:!0,children:(0,a.t)("filters.apply")})]})})},m={amount:"amount",lte:"amount_lte",gte:"amount_gte"};function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){var t,r=e.isInitialOpen,n=e.changeUrl,l=void 0===n||n,c=e.queryParamsKey,u=void 0===c?m:c,d=e.localeRoot,f=void 0===d?"settings.paywalls_admin_dashboard.filters.amount":d,h=(0,s.Xt)(),y=h.queryParams,v=h.updateUrl,g=y[u.lte],_=y[u.gte],x=Number(g)||0,j=Number(_)||0,w=isNaN(x)||isNaN(j)?"":(0,i.compact)([j/100,x/100]).join("-");return(0,o.jsx)(s.wn,(b(t={chip:(0,a.t)([f,"chip"]),title:(0,a.t)([f,"title"]),selectedText:w,isInitialOpen:r},"onApply",function(e){var t=null!=e?e:{},r=t[u.lte],n=t[u.gte];l&&(v("page",1),v(u.lte,isNaN(r)?null:r),v(u.gte,isNaN(n)?null:n))}),b(t,"shouldShowRemoveButton",!0),b(t,"children",(0,o.jsx)(p,{lteValue:g,gteValue:_,localeRoot:f,queryParamsKey:u})),t))},y={amount_paid:"amount",lte:"amount_lte",gte:"amount_gte"},v="settings.paywalls_admin_dashboard.filters.amount",g={name:"amount",filterKeys:Object.values(y),component:function(e){return(0,o.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryParamsKey:y,localeRoot:v},e))},label:(0,a.t)([v,"chip"])},_={total_amount_paid:"total_amount_paid",lte:"total_amount_paid_lte",gte:"total_amount_paid_gte"},x="settings.paywalls_admin_dashboard.filters.total_amount_paid",j={name:"total_amount_paid",filterKeys:Object.values(_),component:function(e){return(0,o.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryParamsKey:_,localeRoot:x},e))},label:(0,a.t)([x,"chip"])},w=r(94260),O="settings.paywalls_admin_dashboard.filters.status",S="status",k={name:"charge_status",filterKeys:[S],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=(0,s.Xt)(),c=l.queryParams,u=l.updateUrl,d=w.mB.map(function(e){return{label:(0,a.t)([O,"options",e]),value:e}});return(0,o.jsx)(s.wn,{chip:(0,a.t)([O,"chip"]),title:(0,a.t)([O,"title"]),selectedText:i||c[S],renderSelectedText:function(e){return(0,o.jsx)(s.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){u("page",1),n&&u(S,e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(s.l6,{options:d,legend:(0,a.t)([O,"legend"]),name:"subscription-statuses-filter",activeText:null!=i?i:c[S]})})},label:(0,a.t)([O,"chip"])},P=r(67294),C="settings.paywalls_admin_dashboard.filters.community_member_billing_info_business_name",N=function(e){var t=e.isInitialOpen,r=e.onApply,n=e.changeUrl,l=void 0===n||n,c=e.value,u=(0,s.Xt)(),d=u.queryParams,f=u.updateUrl,p=null!=c?c:d.community_member_billing_info_business_name,m=(0,P.useCallback)(function(e){f("page",1),l&&f("community_member_billing_info_business_name",e),(0,i.isFunction)(r)&&r(e)},[l,f,r]);return(0,o.jsx)(s.wn,{chip:(0,a.t)([C,"chip"]),title:(0,a.t)([C,"title"]),selectedText:p,isInitialOpen:t,onApply:m,shouldShowRemoveButton:!0,children:(0,o.jsx)(s.xo,{name:"community_member_billing_info_business_name",placeholder:(0,a.t)([C,"placeholder"]),defaultValue:p})})},A={name:"community_member_billing_info_business_name",filterKeys:["community_member_billing_info_business_name"],component:function(e){var t,r;return(0,o.jsx)(N,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={onApply:i.noop},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([C,"chip"])},I=function(e){var t=e.isInitialOpen,r=e.onApply,n=e.changeUrl,l=void 0===n||n,c=e.value,u=e.localeRoot,d=void 0===u?"settings.paywalls_admin_dashboard.filters.community_member_email":u,f=(0,s.Xt)(),p=f.queryParams,m=f.updateUrl;return(0,o.jsx)(s.wn,{chip:(0,a.t)([d,"title"]),title:(0,a.t)([d,"title"]),selectedText:c||p.email,isInitialOpen:t,onApply:function(e){l&&m("email",e),(0,i.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(s.xo,{name:"email-filter",placeholder:(0,a.t)([d,"placeholder"])})})},E={name:"community_member_email",filterKeys:["email"],component:function(e){var t,r;return(0,o.jsx)(I,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={onApply:i.noop},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)(["settings.paywalls_admin_dashboard.filters.community_member_email","title"])},T=function(e){var t=e.isInitialOpen,r=e.onApply,n=e.changeUrl,l=void 0===n||n,c=e.value,u=e.localeRoot,d=void 0===u?"settings.paywalls_admin_dashboard.filters.community_member_name":u,f=(0,s.Xt)(),p=f.queryParams,m=f.updateUrl;return(0,o.jsx)(s.wn,{chip:(0,a.t)([d,"title"]),title:(0,a.t)([d,"title"]),selectedText:c||p.name,isInitialOpen:t,onApply:function(e){l&&m("name",e),(0,i.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(s.xo,{name:"name-filter",placeholder:(0,a.t)([d,"placeholder"])})})},L={name:"community_member_name",filterKeys:["name"],component:function(e){var t,r;return(0,o.jsx)(T,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={onApply:i.noop},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)(["settings.paywalls_admin_dashboard.filters.community_member_name","title"])},D=r(65631),M="settings.paywalls_admin_dashboard.filters.currency",R="currency",B={name:"currency",filterKeys:["currency"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=(0,s.Xt)(),c=l.queryParams,u=l.updateUrl,d=(0,D.K)({includeTraded:!0}),f=d.data;if(d.isLoading||!f)return null;var p=f.map(function(e){return{label:e.code.toUpperCase(),value:e.code}});return(0,o.jsx)(s.wn,{chip:(0,a.t)([M,"chip"]),title:(0,a.t)([M,"title"]),selectedText:i||c[R],renderSelectedText:function(e){return(0,o.jsx)(s.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:p},e))},isInitialOpen:t,onApply:function(e){u("page",1),n&&u(R,e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(s.l6,{options:p,legend:(0,a.t)([M,"legend"]),name:"paywalls-filter",activeText:null!=i?i:c[R]})})},label:(0,a.t)([M,"chip"])},F=r(34870),z=r(15953),U=r(52293),Z=r(21835),G=r(76741),q=(0,P.forwardRef)(function(e,t){var r,n;return(0,o.jsx)("input",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={className:"placeholder:text-light min-w-[18rem] border-none bg-transparent p-0 text-center text-xs font-medium leading-4 placeholder:opacity-100 focus:outline-none focus:ring-0",ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))});function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}q.displayName="DatePickerInput";var H=(0,P.createContext)(null);H.displayName="DateRangePickerContext";var W=function(e){var t,r=e.queryParamsKey,n=e.children,i=(t=(0,P.useState)(null!=r?r:{}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return V(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1];return(0,o.jsx)(H.Provider,{value:{queryParamsKey:a,setQueryParamsKey:s},children:n})},Q=function(){var e=(0,P.useContext)(H);if(!e)throw Error("useDateRangePickerContext must be used within a DateRangePickerContext");return e};function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var K=r(43544);function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=($(n={},G.jk,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),endDate:e}}),$(n,G.xj,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-28),endDate:e}}),$(n,G.kU,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-3,e.getDate()),endDate:e}}),$(n,G.yU,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-12,e.getDate()),endDate:e}}),$(n,G.zX,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),1),endDate:e}}),$(n,G.uJ,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=Math.floor(e.getMonth()/3);return{startDate:new Date(e.getFullYear(),3*t,1),endDate:e}}),$(n,G.GE,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear()-1,e.getMonth(),e.getDate()),endDate:e}}),n),Y=Object.assign(function(e){var t=e.children,r=e.className,n=e.defaultQueryParams,i=e.defaultValues,a=(0,c.j)().onApply;return(0,o.jsx)(W,{queryParamsKey:n,children:(0,o.jsx)(d.l,{onSubmit:a,defaultValues:i,children:(0,o.jsx)("div",{className:void 0===r?"":r,children:t})})})},{RangePicker:function(){var e=Q().queryParamsKey,t=(0,U.Gc)(),r=t.watch,n=t.setValue,a=r(e.default),s=(0,P.useRef)(null);if(a!==G.jy)return null;var l=new Date,c=new Date(l.getFullYear(),l.getMonth(),l.getDate()-1);return(0,o.jsx)(z.default,{ref:s,options:{mode:"range",dateFormat:"M j, Y",defaultDate:[c,l],maxDate:l,onReady:function(){(0,i.defer)(function(){var e,t=null==(e=s.current)?void 0:e.flatpickr;(0,Z.Z)(t,"flatPickrInstance is null"),t.calendarContainer.classList.add("settings-app")})},static:!0},className:"w-full",render:function(e,t){return(0,o.jsx)("button",{type:"button",className:"border-primary focus-within:bg-tertiary text-selector-active focus-visible:!outline-secondary flex flex-col items-center justify-center gap-x-2 rounded-md border px-3 py-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:function(){var e,t,r;null==(r=s.current)||null==(t=r.flatpickr)||null==(e=t.open)||e.call(t)},children:(0,o.jsx)(q,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t},e))})},onChange:function(t){var r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return J(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=r[0],o=r[1];i&&o&&(i.setHours(0,0,0,0),o.setHours(23,59,59,999),n(e.gte,i.getTime()),n(e.lte,o.getTime()))}})},DropdownOptions:function(){var e=Q().queryParamsKey,t=(0,U.Gc)(),r=t.watch,n=t.setValue,i=r(e.default);(0,P.useEffect)(function(){if(X[i]){var t=X[i](),r=t.startDate,o=t.endDate;r.setHours(0,0,0,0),o.setHours(23,59,59,999),n(e.gte,r.getTime()),n(e.lte,o.getTime())}},[i,e.gte,e.lte,n]);var s=[G.jk,G.xj,G.kU,G.yU,G.zX,G.uJ,G.GE,G.jy].map(function(e){return{value:e,label:(0,a.t)([G.QG,"options",e])}});return(0,o.jsx)(K.Lt,{onChange:function(t){n(e.default,t)},options:s,size:"full",className:"w-full rounded-lg border px-4 py-2",buttonWrapperClassName:"flex flex-col",linkType:"button",popperOptions:{modifiers:[{name:"offset",options:{offset:[34,15]}}]},button:(0,o.jsx)(K.Lt.ActiveLabelButton,{className:"flex w-full justify-between",options:s,activeOptionValue:i||G.jk})})}});function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var er=function(e){var t,r,n=e.isInitialOpen,c=e.changeUrl,d=void 0===c||c,f=e.value,p=e.queryParamsKey,m=void 0===p?G.C2:p,b=e.localeRoot,h=void 0===b?G.QG:b,y=(0,s.Xt)(),v=y.queryParams,g=y.updateUrl,_=(t=(0,P.useState)(G.jk),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ee(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=_[0],j=_[1],w=(0,l.r)(),O=Number(v[m.lte]),S=Number(v[m.gte]),k=new Date(O),C=new Date(S),N=(0,i.compact)([isNaN(C.getTime())?null:(0,F.w)({dateTime:C,format:F.f.short_date}),isNaN(k.getTime())?null:(0,F.w)({dateTime:k,format:F.f.short_date})]).join("-");return(0,o.jsx)(s.wn,{chip:(0,a.t)([h,"chip"]),title:(0,a.t)([h,"title"]),selectedText:f||N,isInitialOpen:n,renderSelectedText:function(){return N},onApply:function(e){var t=null!=e?e:{},r=t[m.default],n=t[m.lte],i=t[m.gte];d&&(g("page",1),g(m.default,r),g(m.lte,n),g(m.gte,i)),j(r)},shouldShowRemoveButton:!0,children:(0,o.jsxs)(Y,{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",defaultQueryParams:m,defaultValues:(et(r={},m.default,x||G.jk),et(r,m.lte,null==k?void 0:k.getTime()),et(r,m.gte,null==C?void 0:C.getTime()),r),children:[(0,o.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,o.jsx)(Y.DropdownOptions,{}),(0,o.jsx)(Y.RangePicker,{})]}),(0,o.jsx)(u.z,{variant:w,type:"submit",full:!0,children:(0,a.t)("filters.apply")})]})})},en="settings.paywalls_admin_dashboard.filters.date",ei={default:"created_at",lte:"created_at_lte",gte:"created_at_gte"},eo={name:"created_at",filterKeys:Object.values(ei),component:function(e){var t,r;return(0,o.jsx)(er,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={queryParamsKey:ei,localeRoot:en},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([en,"chip"])},ea="settings.paywalls_admin_dashboard.filters.start_date",es={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},el={name:"start_date",filterKeys:Object.values(es),component:function(e){var t,r;return(0,o.jsx)(er,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={queryParamsKey:es,localeRoot:ea},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([ea,"chip"])},ec=r(87214),eu=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=e.queryParamsKey,c=e.localeRoot,u=(0,s.Xt)(),d=u.queryParams,f=u.updateUrl,p=null!=i?i:d[l];return(0,o.jsx)(s.wn,{chip:(0,a.t)([c,"chip"]),title:(0,a.t)([c,"title"]),selectedText:i||d[l],renderSelectedText:function(){return p},isInitialOpen:t,onApply:function(e){f("page",1),n&&f(l,e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(ec.x,{name:l,placeholder:(0,a.t)([c,"input_placeholder"]),autoFocus:!0,autoComplete:"off"})})},ed="settings.paywalls_admin_dashboard.filters.invoice_id",ef={name:"invoice_processor_id",filterKeys:["invoice_processor_id"],component:function(e){var t,r;return(0,o.jsx)(eu,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={localeRoot:ed,queryParamsKey:"invoice_processor_id"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([ed,"chip"])},ep="settings.paywalls_admin_dashboard.filters.subscription_id",em={name:"subscription_processor_id",filterKeys:["subscription_processor_id"],component:function(e){var t,r;return(0,o.jsx)(eu,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={localeRoot:ep,queryParamsKey:"subscription_processor_id"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([ep,"chip"])},eb="settings.paywalls_admin_dashboard.filters.transaction_id",eh={name:"transaction_id",filterKeys:["transaction_id"],component:function(e){var t,r;return(0,o.jsx)(eu,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={localeRoot:eb,queryParamsKey:"transaction_id"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([eb,"chip"])},ey=r(88767),ev=r(93199),eg=r(13532),e_=r(57965),ex="members_directory.header.search.filters.member_name_or_email",ej="community_member_id",ew={name:"community_member_id",filterKeys:["community_member_id"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=(0,s.Xt)(),c=l.queryParams,u=l.updateUrl,d=null!=i?i:c[ej],f=(0,ey.useQuery)(["community-members-subscription-community-member-id",d],function(){return(0,ev.UT)(eg.av.search.communityMembers.index({params:{page:1,per_page:10,filters:{id:d}}}))},{enabled:!!d}).data,p=null==f?void 0:f.records[0];return(0,o.jsx)(s.wn,{chip:(0,a.t)([ex,"filter_chip"]),title:(0,a.t)([ex,"title"]),selectedText:d,renderSelectedText:function(){var e;return null!=(e=null==p?void 0:p.name)?e:d},isInitialOpen:t,onApply:function(e){n&&u(ej,e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(e_.R,{record:p,recordType:"CommunityMember",searchInputPlaceholder:(0,a.t)([ex,"placeholder"]),onApply:function(e){u("page","1"),n&&u(ej,e)}})})},label:(0,a.t)(["settings.paywalls_admin_dashboard.filters.members","chip"])},eO=r(98684),eS=r(81779),ek=r(51169),eP=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=e.localeRoot,c=e.queryParamsKey,u=e.filterName,d=e.filterParams,f=(0,s.Xt)(),p=f.queryParams,m=f.updateUrl,b=(0,eS.k)(u,void 0===d?{}:d),h=b.paywalls,y=b.isPaywallsLoading;return(0,o.jsx)(s.wn,{chip:(0,a.t)([l,"chip"]),title:(0,a.t)([l,"title"]),selectedText:i||p[c],renderSelectedText:function(e){return(0,o.jsx)(s.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:h},e))},isInitialOpen:t,onApply:function(e){m("page",1),n&&m(c,e)},shouldShowRemoveButton:!0,children:y?(0,o.jsx)(ek.a,{}):(0,o.jsx)(s.l6,{options:h,legend:(0,a.t)([l,"legend"]),name:u,activeText:null!=i?i:p[c],hasSearch:!0,searchProps:{placeholder:(0,a.t)([l,"input_placeholder"])}})})},eC="settings.paywalls_admin_dashboard.filters.events",eN={name:"events",filterKeys:["events"],component:function(e){var t,r;return(0,o.jsx)(eP,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={localeRoot:eC,queryParamsKey:"events",filterName:"event-paywalls-filter",filterParams:{type:[eO.Ex.event]}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([eC,"chip"])},eA="settings.paywalls_admin_dashboard.filters.paywalls",eI={name:"paywalls",filterKeys:["paywalls"],component:function(e){var t,r;return(0,o.jsx)(eP,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={localeRoot:eA,queryParamsKey:"paywalls",filterName:"paywalls-filter",filterParams:{type:[eO.Ex.space]}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},label:(0,a.t)([eA,"chip"])},eE=r(29378),eT="settings.paywalls_admin_dashboard.filters.platform",eL="platform",eD={name:"platform",filterKeys:[eL],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=(0,s.Xt)(),c=l.queryParams,u=l.updateUrl,d=Object.values(eE.VT).map(function(e){return{label:(0,a.t)([eT,"options",e]),value:e}});return(0,o.jsx)(s.wn,{chip:(0,a.t)([eT,"chip"]),title:(0,a.t)([eT,"title"]),selectedText:i||c[eL],renderSelectedText:function(e){return(0,o.jsx)(s.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){u("page",1),n&&u(eL,e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(s.l6,{options:d,legend:(0,a.t)([eT,"legend"]),name:"platform-filter",activeText:null!=i?i:c[eL]})})},label:(0,a.t)([eT,"chip"])},eM=r(65672),eR="settings.paywalls_admin_dashboard.filters.status",eB="status",eF={name:"subscription_status",filterKeys:[eB],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,i=e.value,l=(0,s.Xt)(),c=l.queryParams,u=l.updateUrl,d=eM.mB.map(function(e){return{label:(0,a.t)([eR,"options",e]),value:e}});return(0,o.jsx)(s.wn,{chip:(0,a.t)([eR,"chip"]),title:(0,a.t)([eR,"title"]),selectedText:i||c[eB],renderSelectedText:function(e){return(0,o.jsx)(s.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){u("page",1),n&&u(eB,e)},shouldShowRemoveButton:!0,children:(0,o.jsx)(s.l6,{options:d,legend:(0,a.t)([eR,"legend"]),name:"subscription-statuses-filter",activeText:null!=i?i:c[eB]})})},label:(0,a.t)([eR,"chip"])};function ez(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eU(e){return function(e){if(Array.isArray(e))return ez(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ez(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ez(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eZ="settings.paywalls_admin_dashboard.filters",eG={community_member_id:ew,currency:B,created_at:eo,community_member_email:E,community_member_name:L,paywalls:eI,platform:eD,community_member_billing_info_business_name:A,amount:g,charge_status:k,invoice_processor_id:ef,transaction_id:eh,events:eN,subscription_status:eF,subscription_id:em,total_amount_paid:j,start_date:el},eq={subscriptions:{billing_info_business_name:"community_member_billing_info_business_name",community_member_billing_info_business_name:"community_member_billing_info_business_name",community_member_id:"community_member_id",currency:"currency",email:"email",paywalls:"paywall_ids",platform:"platform",name:"query",start_date_gte:"created_at_gte",start_date_lte:"created_at_lte",status:"status",subscription_processor_id:"processor_id",total_amount_paid_gte:"total_amount_paid_gte",total_amount_paid_lte:"total_amount_paid_lte"},charges:{amount_gte:"amount_gte",amount_lte:"amount_lte",billing_info_business_name:"community_member_billing_info_business_name",community_member_billing_info_business_name:"community_member_billing_info_business_name",community_member_id:"community_member_id",created_at_gte:"created_at_gte",created_at_lte:"created_at_lte",currency:"currency",email:"email",invoice_processor_id:"invoice_processor_id",paywalls:"paywall_ids",platform:"platform",events:"paywall_ids",name:"query",status:"display_status",subscription_processor_id:"subscription_processor_id",transaction_id:"processor_id"}},eV=function(e,t){var r={};return Object.keys(t).forEach(function(n){e[n]&&(r[t[n]]=e[n])}),r},eH=function(e,t){var r=(0,i.compact)((null!=e?e:[]).map(function(e){return eG[e]})),n=(0,i.compact)((null!=t?t:[]).map(function(e){return eG[e]}));return{defaultFilters:eU(r).concat(eU(n))}}},74519:function(e,t,r){"use strict";r.d(t,{L:()=>l,Q:()=>s});var n=r(67294),i=r(96354),o=r(82226),a=function(e){var t=(0,i.t)();return(0,n.useMemo)(function(){return Object.keys(o.lO[e]).some(function(e){return!!t[e]})},[t,e])},s=function(){return a("charges")},l=function(){return a("subscriptions")}},94414:function(e,t,r){"use strict";r.d(t,{N:()=>i});var n=r(41342),i=function(){var e,t=(0,n.wh)().currentCommunity;return!!(null==t||null==(e=t.policies)?void 0:e.is_paywall_payment_settings_available)}},63436:function(e,t,r){"use strict";r.d(t,{y:()=>el});var n,i,o=r(85893),a=r(45697),s=r.n(a),l=r(88767),c=r(52478),u=r(60878),d=r(84326),f=r(18083),p=r(72171),m=r(41342),b=r(14899),h=r(90978),y=r(36053),v=r(51466),g=r(51169),_=r(76203),x=r(74519),j=r(35127),w=r(63953),O=r(94548),S=r(67294),k=r(41304),P=r(48710),C=function(e){var t=e.chargesData;(0,S.useEffect)(function(){var e;(null==t||null==(e=t.charges)?void 0:e.length)===0&&(null==t?void 0:t.totalCharges)>0&&t.setPage(1)});var r=(0,P.p)().defaultColumnsToRender,n=(0,k.a)(),i=function(e){var t=e.cell,r=t.column.id,i=t.row.original;"customer"!==r&&n.show({charge:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){t.setPage(e)},columnsToRender:r.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={onClick:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})}},N=function(e){var t=e.chargesData,r=e.activeFilterTab,n=e.refetchAllCharges,i=C({chargesData:t}),a=i.onClickPagination,s=i.columnsToRender;return t.hasFilters&&0===t.totalCharges&&!t.isLoadingCharges?(0,o.jsx)(O.n,{}):(0,o.jsx)(w.O,{shouldOpenAdminMemberEdit:!0,refetchAllCharges:n,children:(0,o.jsx)(j.u,{wrapperClassName:"px-6 lg:px-9",columnsToRender:s,chargesData:t,onClickPagination:a},r)})},A=r(27511),I=r(39905),E=function(e){var t=e.totalChargesCount,r=(0,A.Q)().show;return(0,o.jsx)(I.z,{variant:"circle",onClick:function(){r({relation:"charges"})},type:"button",disabled:t<=0,children:(0,d.t)("export_paywall_csv.modal.export_cta")})},T=r(34062),L=r(20784),D=function(e){var t=e.totalChargesCount;return t<=0?null:(0,o.jsx)(T.w.Headline,{className:"flex flex-row",children:(0,o.jsx)(T.w.Headline.Title,{children:(0,d.t)("settings.paywalls_admin_dashboard.charges.count",{count:(0,L.V)(t)})})})},M=r(11944),R=r(52293),B=r(22444),F=r(94260);function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U={ALL:"all",PAID:"paid",REFUNDED:"refunded",FAILED:"failed"},Z=(z(n={},U.ALL,(0,d.t)("settings.paywalls_admin_dashboard.charges.tabs.all")),z(n,U.PAID,(0,d.t)("settings.paywalls_admin_dashboard.charges.tabs.paid")),z(n,U.REFUNDED,(0,d.t)("settings.paywalls_admin_dashboard.charges.tabs.refunded")),z(n,U.FAILED,(0,d.t)("settings.paywalls_admin_dashboard.charges.tabs.failed")),n),G=(z(i={},U.ALL,null),z(i,U.PAID,[F.Q_.PAID,F.Q_.PARTIAL_REFUNDED].join(",")),z(i,U.REFUNDED,F.Q_.REFUNDED),z(i,U.FAILED,F.Q_.FAILED),i);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var V=function(e,t,r){var n=(0,B.B)({filters:{display_status:G[U.ALL]},perPage:1}),i=(0,B.B)({filters:{display_status:G[U.PAID]},perPage:1}),o=(0,B.B)({filters:{display_status:G[U.REFUNDED]},perPage:1}),a=(0,B.B)({filters:{display_status:G[U.FAILED]},perPage:1}),s=[[U.ALL,n],[U.PAID,i],[U.REFUNDED,o],[U.FAILED,a]].map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return q(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];return{value:r,label:Z[r],badge:{value:n.totalCharges}}}),l=(0,R.Gc)().reset;return{tabOptions:s,changeTabAndResetForm:function(n){l({searchKey:""}),t(""),e(n),r()}}},H=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=V(t,e.setSearchKey,e.resetAllChargesToFirstPage),i=n.tabOptions,a=n.changeTabAndResetForm,s=i.findIndex(function(e){return e.value===r});return(0,o.jsx)(M.O.Group,{selectedIndex:s,children:(0,o.jsx)(M.O.ListWrapper,{children:(0,o.jsx)(M.O.List,{children:i.map(function(e){return(0,o.jsxs)(M.O,{onClick:function(){return a(e.value)},children:[e.label,(0,o.jsx)(M.O.Counter,{children:e.badge.value})]},String(e.value))})})})})},W=r(70442),Q=r(13532),J=r(96354),K=r(82226),$=r(92074);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Y(e,t,r[t])})}return e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var er={created_at:"desc"},en=function(){var e,t=(0,W.k6)(),r=(0,J.t)(),n=r.tab,i=void 0===n?U.ALL:n,o=r.search_key,a=r.page,s=r.status,c=et((0,S.useState)((0,$.EW)(void 0===a?1:a)),2),u=c[0],d=c[1],f=et((0,S.useState)(Object.values(U).includes(i)?i:U.ALL),2),p=f[0],m=f[1],b=et((0,S.useState)(void 0===o?"":o),2),h=b[0],y=b[1],v=function(e,t,r){return e===t?r:""},g=function(e,r){var n=(0,Q.m_)(e,r);t.push("?".concat(n))},_=function(e){g("page",String(e)),d(e)};(0,S.useEffect)(function(){if(g("tab",p),!s){var e=G[p];e&&g("status",e)}},[]);var x=(0,B.B)({searchKeyParams:v(p,U.ALL,h),orderParam:er,filters:(0,K.oq)(ee({},r),K.lO.charges),page:u,setPage:_,enabled:p===U.ALL}),j=(0,B.B)({searchKeyParams:v(p,U.PAID,h),orderParam:er,filters:(0,K.oq)(ee({},r),K.lO.charges),page:u,setPage:_,enabled:p===U.PAID}),w=(0,B.B)({searchKeyParams:v(p,U.REFUNDED,h),orderParam:er,filters:(0,K.oq)(ee({display_status:G[U.REFUNDED]},r),K.lO.charges),page:u,setPage:_,enabled:p===U.REFUNDED}),O=(0,B.B)({searchKeyParams:v(p,U.FAILED,h),orderParam:er,filters:(0,K.oq)(ee({display_status:G[U.FAILED]},r),K.lO.charges),page:u,setPage:_,enabled:p===U.FAILED}),k=(0,l.useQueryClient)();return{chargesDataByTab:(Y(e={},U.ALL,x),Y(e,U.PAID,j),Y(e,U.REFUNDED,w),Y(e,U.FAILED,O),e),activeFilterTab:p,setActiveFilterTab:function(e){m(e),g("tab",e);var t=G[e];t&&g("status",t),y("")},defaultValues:{searchKey:h},setSearchKey:y,refetchAllCharges:function(){k.clear(),x.refetchCharges(),j.refetchCharges(),w.refetchCharges(),O.refetchCharges()},resetAllChargesToFirstPage:function(){_(1),x.setOrder(er),j.setOrder(er),w.setOrder(er),O.setOrder(er)},isLoadingCharges:x.isLoadingCharges}};function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eo=["currency","transaction_id","invoice_processor_id","community_member_billing_info_business_name"],ea=function(){var e,t,r=en(),n=r.chargesDataByTab,i=r.activeFilterTab,a=r.setActiveFilterTab,s=r.setSearchKey,l=r.defaultValues,c=r.refetchAllCharges,u=r.resetAllChargesToFirstPage,j=r.isLoadingCharges,w=null==(t=n[U.ALL])?void 0:t.totalCharges,O=(0,m.wh)().currentCommunity,S=(0,x.Q)(),k=(0,h.o)().isPaymentProcessorEnabled,P=["community_member_name","community_member_email","community_member_id","charge_status","paywalls"].concat(function(e){if(Array.isArray(e))return ei(e)}(e=(0,b.yK)(null==O?void 0:O.payment_processors)?["platform"]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ei(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["events","amount","created_at","subscription_id"]),C=i?String(i):U.ALL;return j?(0,o.jsx)("div",{className:"flex h-full",children:(0,o.jsx)(g.a,{center:!0})}):j||S||0!==w&&k?(0,o.jsxs)(v.l,{onSubmit:function(e){return s(e.searchKey)},defaultValues:l,children:[(0,o.jsx)(f.b,{leftContent:(0,o.jsx)(p.y,{children:(0,d.t)("settings.paywalls_admin_dashboard.charges.title")}),rightContent:(0,o.jsx)(E,{totalChargesCount:w}),filters:(0,o.jsx)(H,{setActiveFilterTab:a,activeFilterTab:C,setSearchKey:s,resetAllChargesToFirstPage:u}),hasBorder:!1}),(0,o.jsx)(_.x,{filterNames:P,customFilterNames:eo}),(0,o.jsx)(D,{totalChargesCount:w}),(0,o.jsx)(N,{activeFilterTab:C,chargesData:n[C],refetchAllCharges:c})]}):(0,o.jsx)(y._,{isPaymentProcessorEnabled:k,i18nBase:"settings.paywalls_admin_dashboard.charges",redirectToPaywalls:!0})},es=new l.QueryClient(c.V),el=function(){return(0,o.jsx)(u.VW,{children:(0,o.jsx)(l.QueryClientProvider,{client:es,children:(0,o.jsx)(ea,{})})})};el.propTypes={queryParams:s().object}},45285:function(e,t,r){"use strict";r.d(t,{y:()=>ei});var n,i,o=r(85893),a=r(60878),s=r(84326),l=r(18083),c=r(72171),u=r(41342),d=r(14899),f=r(90978),p=r(36053),m=r(51466),b=r(51169),h=r(76203),y=r(74519),v=r(27511),g=r(39905),_=function(e){var t=e.totalSubscriptionsCount,r=(0,v.Q)().show;return(0,o.jsx)(g.z,{variant:"circle",onClick:function(){r({relation:"subscriptions"})},type:"button",disabled:t<=0,children:(0,s.t)("export_paywall_csv.modal.export_cta")})},x=r(34062),j=r(20784),w=function(e){var t=e.totalSubscriptionsCount;return t<=0?null:(0,o.jsx)(x.w.Headline,{className:"flex flex-row",children:(0,o.jsx)(x.w.Headline.Title,{children:(0,s.t)("settings.paywalls_admin_dashboard.subscriptions.count",{count:(0,j.V)(t)})})})},O=r(31181),S=r(58381),k=r(94548),P=r(67294),C=r(87366),N=r(90924),A=function(e){var t=e.subscriptionData;(0,P.useEffect)(function(){var e;(null==t||null==(e=t.subscriptions)?void 0:e.length)===0&&(null==t?void 0:t.totalSubscriptions)>0&&(null==t||t.setPage(1),null==t||t.refetchSubscriptions())});var r=(0,N.p)().defaultColumnsToRender,n=(0,C.X)(),i=function(e){var t=e.cell,r=t.column.id,i=t.row.original;"customer"!==r&&n.show({subscription:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){null==t||t.setPage(e),null==t||t.refetchSubscriptions()},columnsToRender:r.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={onClick:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})}},I=function(e){var t=e.activeFilterTab,r=e.subscriptionsDataByTab,n=e.refetchAllSubscriptions,i=r[t],a=A({subscriptionData:i}),s=a.onClickPagination,l=a.columnsToRender;return i.hasFilters&&0===i.totalSubscriptions&&!i.isLoadingSubscriptions?(0,o.jsx)(k.n,{}):(0,o.jsx)(S.n,{shouldOpenAdminMemberEdit:!0,refetchAllSubscriptions:n,children:(0,o.jsx)(O.s,{wrapperClassName:"px-6 lg:px-9",columnsToRender:l,subscriptionData:i,onClickPagination:s},t)})},E=r(11944),T=r(52293),L=r(65672),D=r(79131);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R={ALL:"all",ACTIVE:"active",CANCELED:"canceled"},B=(M(n={},R.ALL,(0,s.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.all")),M(n,R.ACTIVE,(0,s.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.active")),M(n,R.CANCELED,(0,s.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.canceled")),n);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e,t,r){var n=(0,D.p)({perPage:1}),i=(0,D.p)({filters:{status:L.vC.join(",")},perPage:1}),o=(0,D.p)({filters:{status:L.Q_.CANCELED},perPage:1}),a=[[R.ALL,n],[R.ACTIVE,i],[R.CANCELED,o]].map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];return{value:r,label:B[r],badge:{value:n.totalSubscriptions}}}),s=(0,T.Gc)().reset;return{tabOptions:a,changeTabAndResetSearchForm:function(n){s({searchKey:""}),t(""),r(),e(n)}}},U=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=z(t,e.setSearchKey,e.resetAllSubscriptionToFirstPage),i=n.tabOptions,a=n.changeTabAndResetSearchForm,s=i.findIndex(function(e){return e.value===r});return(0,o.jsx)(E.O.Group,{selectedIndex:s,children:(0,o.jsx)(E.O.ListWrapper,{children:(0,o.jsx)(E.O.List,{children:i.map(function(e){return(0,o.jsxs)(E.O,{onClick:function(){return a(e.value)},children:[e.label,(0,o.jsx)(E.O.Counter,{children:e.badge.value})]},String(e.value))})})})})},Z=r(88767),G=r(70442),q=r(13532),V=r(96354),H=r(82226),W=r(92074);function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){J(e,t,r[t])})}return e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X={created_at:"desc"},Y=(J(i={},R.ALL,null),J(i,R.ACTIVE,L.vC.join(",")),J(i,R.CANCELED,L.Q_.CANCELED),i),ee=function(){var e,t=(0,G.k6)(),r=(0,V.t)(),n=r.tab,i=void 0===n?R.ALL:n,o=r.search_key,a=r.page,s=r.status,l=$((0,P.useState)(Object.values(R).includes(i)?i:R.ALL),2),c=l[0],u=l[1],d=$((0,P.useState)(void 0===o?"":o),2),f=d[0],p=d[1],m=$((0,P.useState)((0,W.EW)(void 0===a?1:a)),2),b=m[0],h=m[1],y=function(e,r){var n=(0,q.m_)(e,String(r));t.push("?".concat(n))},v=function(e){y("page",String(e)),h(e)},g=function(e,t,r){return e===t?r:""};(0,P.useEffect)(function(){y("tab",c),s||y("status",Y[c]||"")},[]);var _=(0,D.p)({page:b,perPage:10,orderParam:X,searchKeyParams:g(c,R.ALL,f),filters:(0,H.oq)(r,H.lO.subscriptions),enabled:c===R.ALL,setPage:v}),x=(0,D.p)({page:b,perPage:10,orderParam:X,searchKeyParams:g(c,R.ACTIVE,f),filters:(0,H.oq)(K({},r),H.lO.subscriptions),enabled:c===R.ACTIVE,setPage:v}),j=(0,D.p)({page:b,perPage:10,orderParam:X,searchKeyParams:g(c,R.CANCELED,f),filters:(0,H.oq)(K({},r),H.lO.subscriptions),enabled:c===R.CANCELED,setPage:v}),w=(0,Z.useQueryClient)();return{subscriptionsDataByTab:(J(e={},R.ALL,_),J(e,R.ACTIVE,x),J(e,R.CANCELED,j),e),resetAllSubscriptionToFirstPage:function(){v(1),_.setOrder(X),x.setOrder(X),j.setOrder(X)},refetchAllSubscriptions:function(){w.invalidateQueries({queryKey:[D.D]})},activeFilterTab:c,setActiveFilterTab:function(e){u(e),y("status",Y[e]||""),y("tab",e)},defaultValues:{searchKey:f},setSearchKey:p,onSubmit:function(e){var t=e.searchKey;p(void 0===t?"":t)},isLoadingSubscriptions:_.isLoadingSubscriptions}};function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var er=["total_amount_paid","currency","community_member_billing_info_business_name"],en=function(){var e,t,r=ee(),n=r.subscriptionsDataByTab,i=r.resetAllSubscriptionToFirstPage,a=r.activeFilterTab,v=r.setActiveFilterTab,g=r.defaultValues,x=r.refetchAllSubscriptions,j=r.setSearchKey,O=r.onSubmit,S=r.isLoadingSubscriptions,k=(0,u.wh)().currentCommunity,P=(0,y.L)(),C=a?String(a):R.ALL,N=null==(t=n[C])?void 0:t.totalSubscriptions,A=(0,f.o)().isPaymentProcessorEnabled,E=["community_member_name","community_member_email","community_member_id","subscription_status","paywalls"].concat(function(e){if(Array.isArray(e))return et(e)}(e=(0,d.yK)(null==k?void 0:k.payment_processors)?["platform"]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return et(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["start_date","subscription_id"]);return S?(0,o.jsx)("div",{className:"flex h-full",children:(0,o.jsx)(b.a,{center:!0})}):S||P||0!==N&&A?(0,o.jsxs)(m.l,{onSubmit:O,defaultValues:g,children:[(0,o.jsx)(l.b,{leftContent:(0,o.jsx)(c.y,{children:(0,s.t)("settings.paywalls_admin_dashboard.subscriptions.title")}),rightContent:(0,o.jsx)(_,{totalSubscriptionsCount:N}),filters:(0,o.jsx)(U,{setActiveFilterTab:v,activeFilterTab:C,setSearchKey:j,resetAllSubscriptionToFirstPage:i}),hasBorder:!1}),(0,o.jsx)(h.x,{filterNames:E,customFilterNames:er}),(0,o.jsx)(w,{totalSubscriptionsCount:N}),(0,o.jsx)(I,{activeFilterTab:C,subscriptionsDataByTab:n,refetchAllSubscriptions:x})]}):(0,o.jsx)(p._,{isPaymentProcessorEnabled:A,i18nBase:"settings.paywalls_admin_dashboard.subscriptions",redirectToPaywalls:!0})},ei=function(){return(0,o.jsx)(a.VW,{children:(0,o.jsx)(en,{})})}},94473:function(e,t,r){"use strict";r.d(t,{F_:()=>a,po:()=>n,rl:()=>i,y_:()=>o});var n="settings.paywalls.modal.tabs.checkout",i={DEFAULT:"default",TESTIMONIALS:"testimonials",BADGES:"badges",BENEFITS:"benefits",COUNTDOWN:"countdown"},o={STARS:"stars",QUOTATION_MARK:"quotation_mark"},a={STARS:"#FDB022",QUOTATION_MARK:"#000000"}},28347:function(e,t,r){"use strict";r.d(t,{L3:()=>i,dy:()=>n,ut:()=>o,vf:()=>a});var n=1,i=0,o=730,a=6},74376:function(e,t,r){"use strict";r.d(t,{I:()=>oW});var n,i,o,a,s=r(85893),l=r(57105),c=r(41342),u=r(37416),d=r(51466),f=r(51169),p=r(43032),m=r(67294),b=r(69288),h=r(52293),y=r(84326),v=r(56338),g=r(51019),_=r(63271),x=r(79552),j=r(1168),w=function(e){var t=e.children,r=e.className,n=e.variants,i="traditional"===(void 0===n?"traditional":n),o=i?u.x.Body:m.Fragment;return(0,s.jsx)(o,{className:"!h-[calc(100svh-12.75rem)] md:!h-[calc(100svh-11.75rem)] lg:!h-[calc(100svh-4.90rem)]",wrapperClassName:"md:w-[45rem]",children:(0,s.jsx)("div",{className:(0,j.A)("flex flex-col gap-y-8",{"px-5 py-6 md:w-[45rem] md:px-0 md:py-12":i},r),children:t})})},O=r(82895),S=r(96486),k=r(88767),P=r(42856),C=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return{showQuery:(0,k.useQuery)({queryKey:["paywall-checkout-preview",e],queryFn:function(){return P.k.show(e)},enabled:t})}},N=r(65631),A=(0,m.createContext)({onClose:S.noop});A.displayName="PaywallFormProvider";var I=function(){return(0,m.useContext)(A)},E=function(e){var t=e.children,r=e.onClose,n=(0,N.K)(),i=(0,(0,h.Gc)().getValues)(),o=(0,m.useMemo)(function(){var e;return null==n||null==(e=n.data)?void 0:e.find(function(e){return e.id===Number(i.currency_id)})},[null==i?void 0:i.currency_id,null==n?void 0:n.data]),a=C({preview_paywall:!0,currency_code:null==o?void 0:o.code},!!(null==o?void 0:o.code)).showQuery;return(0,s.jsx)(A.Provider,{value:{supportedCurrenciesQuery:n,selectedCurrency:o,checkoutDataQuery:a,onClose:r},children:t})},T=r(41553),L=r(22294),D=r(10060),M=r(63549),R="settings.paywalls.modal_add_space_group_confirmation",B=l.gk.create(function(e){var t=e.action,r=e.spaceGroups,n=(0,l.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(M.c,{isOpen:n.visible,title:(0,y.t)([R,"title"]),onClose:i,cancelText:(0,y.t)([R,"cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,y.t)([R,"confirm"]),children:(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([R,"description"],{count:r.length,space_groups:r.map(function(e){return e.name}).join(", ")})})})}),F="settings.paywalls.modal_remove_space_confirmation",z=l.gk.create(function(e){var t=e.action,r=e.spaces,n=(0,l.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(M.c,{isOpen:n.visible,title:(0,y.t)([F,"title"]),onClose:i,cancelText:(0,y.t)(["cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,y.t)(["confirm"]),children:(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([F,"description"],{count:r.length,space_groups:r.map(function(e){return e.name}).join(", ")})})})}),U=function(e){return{id:e.id,name:e.name,properties:{automatically_add_members_to_new_spaces:e.automatically_add_members_to_new_spaces},spaces:[]}},Z=function(){var e=(0,D.zo)({serializeSpaceGroup:U,serializeSpace:D.lV}),t=e.options,r=e.spaceGroupIndex,n=e.spaceRecords,i=(0,h.Gc)().watch,o=i("space_group_ids"),a=i("id"),s=(0,l.dd)(B).show,c=(0,l.dd)(z).show,u=function(e){var t;return null==(t=r[e])?void 0:t.properties.automatically_add_members_to_new_spaces},d=function(e){var t,r,n,i=null==(t=e.lock_screen_blocks)?void 0:t.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});return!!(null==i||null==(n=i.data)||null==(r=n.paywalls)?void 0:r.find(function(e){return e.id===a}))};return{options:t,addSpaceGroupCallback:function(e,t){u(t.id)?s({action:e,spaceGroups:[t]}):e()},addAllSpaceGroupCallback:function(e){var r=t.filter(function(e){return!o.includes(e.id)&&e.properties.automatically_add_members_to_new_spaces});r.length>0?s({action:e,spaceGroups:r}):e()},removeSpaceCallback:function(e,t){var r=n.filter(function(e){return e.id===t.id&&d(e)});r.length>0?c({action:e,spaces:r}):e()}}},G=function(){var e=Z(),t=e.options,r=e.addSpaceGroupCallback,n=e.addAllSpaceGroupCallback,i=e.removeSpaceCallback;return(0,s.jsxs)(L.i,{options:t,className:"flex-auto",children:[(0,s.jsx)(L.i.Header,{children:(0,s.jsx)(L.i.SearchBar,{})}),(0,s.jsxs)(L.i.Body,{className:"overflow-y-auto",children:[(0,s.jsxs)(L.i.ListHeader,{className:"min-h-[3rem]",children:[(0,s.jsx)(L.i.ListHeaderColumnNoAccess,{onAddAll:n}),(0,s.jsx)(L.i.ListHeaderColumnAccessGranted,{})]}),(0,s.jsxs)(L.i.ListContainer,{children:[(0,s.jsx)(L.i.ListMobile,{onAddParent:r}),(0,s.jsx)(L.i.ListNoAccess,{onAddParent:r}),(0,s.jsx)(L.i.ListAccessGranted,{onRemoveChild:i})]})]})]})},q=function(){var e=(0,h.Gc)().control,t=(0,h.qo)({control:e,name:"all_spaces"});return(0,s.jsxs)("div",{className:(0,j.A)("paywalls-admin-drawer-access-tab__container flex min-h-[40vh] flex-col gap-y-4 pb-4"),children:[(0,s.jsx)(d.l.Item,{className:(0,j.A)("!mt-0 flex flex-row-reverse items-center gap-x-4 !py-0"),name:"all_spaces",translationRoot:"settings.paywalls.modal.tabs.access",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.access.all_spaces_tooltip"),inline:!0,hideBorder:!0,hideDescription:!0,children:(0,s.jsx)(d.l.ToggleSwitch,{name:"all_spaces",variant:"small"})}),!t&&(0,s.jsx)(G,{}),t&&(0,s.jsxs)("div",{className:"flex h-full w-full flex-auto flex-col items-center justify-center gap-y-3 text-center",children:[(0,s.jsx)(T.Z.TitleSm,{color:"text-selector-active",weight:"semibold",children:(0,y.t)("settings.paywalls.modal.tabs.access.all_access_title")}),(0,s.jsx)(T.Z.LabelSm,{color:"text-selector-active",children:(0,y.t)("settings.paywalls.modal.tabs.access.all_access_subtitle")})]})]})},V=r(79522),H=r(555),W=r(42515),Q=r(34519),J=r(76492),K=r(39905),$=r(9213),X=r(795),Y="settings.access_groups.paywall_migration.modal.form",ee=function(){return(0,s.jsxs)("div",{className:"mx-1",children:[(0,s.jsx)(d.l.Item,{name:"name",translationRoot:Y,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,tooltipText:(0,y.t)([Y,"tooltips.name"]),children:(0,s.jsx)(d.l.Input,{})}),(0,s.jsx)(d.l.Item,{name:"description",translationRoot:Y,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,tooltipText:(0,y.t)([Y,"tooltips.description"]),children:(0,s.jsx)(d.l.Input,{})})]})},et=r(31284),er=r(84695),en=r(22976),ei=r(43544),eo="settings.access_groups.paywall_migration.modal.form.actions",ea=function(e){var t=e.accessGroupIndex,r=e.removeAccessGroup,n=[{label:(0,y.t)([eo,"remove"]),onClick:function(){r(t)}}];return(0,s.jsx)(en.S,{label:(0,y.t)([eo,"label"]),children:null==n?void 0:n.map(function(e){return(0,s.jsx)(ei.Lt.ItemWithLink,{linkType:"button",onClick:e.onClick,children:(0,s.jsx)(ei.Lt.IconContainer,{children:(0,s.jsx)(T.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:e.label})})},e.label)})})},es=Object.freeze({select_access_groups:"select_access_groups",new_access_group:"new_access_group"}),el=Object.freeze({migration_flow:"migration_flow",name:"name",access_groups:"access_groups",paywall_id:"paywall_id",description:"description"}),ec="settings.access_groups.paywall_migration.modal.form",eu=function(e){var t=e.accessGroups,r=(0,h.Dq)({name:el.access_groups}),n=r.remove,i=r.append,o=(0,(0,h.Gc)().watch)(el.access_groups),a=function(){return t.filter(function(e){return!o.some(function(t){return t.id===e.id})})},l=(0,m.useMemo)(function(){return a().map(function(e){return{value:"".concat(e.id),label:e.name}})},[a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(et.rx,{placeholder:(0,y.t)([ec,"chooser","placeholder"]),emptyMessage:(0,y.t)([ec,"chooser","no_results"]),options:l,onChange:function(e){if(e){var r=t.find(function(t){return"".concat(t.id)===e});r&&i(r)}},value:""}),(0,s.jsx)("div",{className:"h-[260px] overflow-y-auto",children:o.map(function(e,t,r){return(0,s.jsx)(er.U,{className:(0,j.A)({"rounded-none border-t-0":t>0&&t<r.length-1,"rounded-b-none":0===t&&r.length>1,"rounded-t-none border-t-0":t===r.length-1&&r.length>1}),title:e.name,actions:(0,s.jsx)(ea,{accessGroupIndex:t,removeAccessGroup:n}),membersCount:e.total_members,spacesCount:e.total_spaces},e.id)})})]})},ed="settings.access_groups.paywall_migration.modal.form",ef=function(e){var t=e.accessGroups,r=(0,h.Gc)(),n=r.setValue,i=(0,r.watch)(el.migration_flow),o=i===es.new_access_group,a=(0,S.isEmpty)(t)?(0,y.t)([ed,"new_access_group_description"]):(0,y.t)([ed,"select_access_group_description"]);return(0,s.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,s.jsx)(T.Z.BodyMd,{children:(0,s.jsx)(X.w,{content:a})}),!(0,S.isEmpty)(t)&&(0,s.jsx)(V.S,{shouldShowInlineOptions:!0,name:"migration_access_group_flow",onChange:function(e){i!==e&&n(el.migration_flow,e)},defaultChecked:i,size:"sm",options:[{label:(0,y.t)([ed,"tabs.new_access_groups"]),value:es.new_access_group},{label:(0,s.jsx)("div",{className:"flex items-center justify-center gap-1",children:(0,y.t)([ed,"tabs.select_access_groups"])}),value:es.select_access_groups}],checkedOptionClassName:"pl-9"}),o&&(0,s.jsx)(ee,{}),!o&&t&&(0,s.jsx)(eu,{accessGroups:t})]})},ep=r(57363),em=r(60878),eb=r(13532),eh=function(e){var t=(0,k.useQuery)(eb.av.admin.paywalls.accessGroupsMigration.preview(e));return{previewData:t.data,isLoading:t.isLoading,isError:t.isError,error:t.error}},ey=function(){var e,t=(0,(0,h.Gc)().getValues)();return{formValues:{paywall_id:t.paywall_id,name:t.name,migration_flow:t.migration_flow,description:t.description,access_group_ids:null==t||null==(e=t.access_groups)?void 0:e.map(function(e){return e.id}),paywall_group_id:t.paywall_group_id,paywall_group_name:t.paywall_group_name}}},ev=r(63676),eg=r(88741),e_=function(e){var t=e.spaces,r=e.iconType,n=e.titleTranslation,i=e.className;return t.length<=0?null:(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)(T.Z.LabelSm,{weight:"bold",children:(0,y.t)(["settings.access_groups.paywall_migration.modal.preview.space_changes",n],{count:t.length})}),(0,s.jsx)("ul",{className:"list-none pb-1 pt-2",children:t.map(function(e){return(0,s.jsxs)("li",{className:"flex justify-between pb-1",children:[(0,s.jsxs)("div",{className:"flex align-middle",children:[(0,s.jsx)("div",{children:(0,s.jsx)(ep.JO,{type:"14-blue-bullet"})}),(0,s.jsx)(T.Z.BodySm,{children:e})]}),(0,s.jsx)(ep.JO,{type:r})]},e)})})]})},ex="settings.access_groups.paywall_migration.modal.preview.space_changes",ej=function(e){var t=e.lostSpaces,r=e.newSpaces,n=(0,l.dd)();return(0,s.jsxs)(Q.u_,{isOpen:n.visible,onClose:n.hide,children:[(0,s.jsx)(Q.u_.Overlay,{}),(0,s.jsxs)(Q.u_.Content,{children:[(0,s.jsxs)(Q.u_.Header,{children:[(0,s.jsxs)(Q.u_.Title,{size:"sm",children:[(0,s.jsx)(T.Z.TitleSm,{weight:"bold",children:(0,y.t)([ex,"title"])}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(T.Z.BodySm,{children:(0,y.t)([ex,"description"])})})]}),(0,s.jsx)(Q.u_.HeaderActions,{children:(0,s.jsx)(Q.u_.CloseButton,{onClick:n.hide})})]}),(0,s.jsxs)(Q.u_.Body,{className:"mb-9 overflow-y-auto pt-2",children:[r.length>0&&(0,s.jsx)(e_,{className:"mb-3",spaces:r,iconType:"15-green-checkmark",titleTranslation:"new_spaces"}),(0,s.jsx)(e_,{spaces:t,iconType:"12-red-close",titleTranslation:"lost_spaces"})]})]})]})},ew=l.gk.create(function(e){var t=e.lostSpaces,r=e.newSpaces;return(0,s.jsx)(ej,{lostSpaces:t,newSpaces:r})}),eO="settings.access_groups.paywall_migration.modal.preview",eS=function(e){var t,r,n=e.previewData,i=(0,l.dd)(ew),o=(null==(t=n.changes)?void 0:t.new_spaces.length)+(null==(r=n.changes)?void 0:r.lost_spaces.length);return(0,s.jsxs)("div",{className:"border-primary rounded-xl border",children:[(0,s.jsxs)("div",{className:"border-primary bg-xy-flow flex justify-between rounded-t-xl border-b p-4",children:[(0,s.jsx)(T.Z.LabelSm,{weight:"bold",children:(0,y.t)([eO,"access_groups"])}),o>0&&(0,s.jsx)(K.z,{type:"button",variant:"link",small:!0,className:"font-normal underline",onClick:function(){return i.show({lostSpaces:n.changes.lost_spaces||[],newSpaces:n.changes.new_spaces||[]})},children:(0,y.t)([eO,"space_changes.link"],{count:o})})]}),(0,s.jsx)("div",{className:"h-[340px] overflow-auto px-6 py-5",children:n.access_groups.map(function(e){var t;return(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(eg.g,{title:e.name,subtitle:(0,y.t)([eO,"total_spaces"],{count:(0,ev.HA)(null!=(t=e.total_spaces)?t:0)}),defaultExpanded:!1,headerBackgroundColor:"bg-primary",textTransform:"none",children:(0,s.jsx)(eg.g.BulletedList,{composedItems:e.content.map(function(e){return{label:e.space_group_name,items:e.spaces.map(function(e){return e.name})}})})},e.name)},"container-".concat(e.name))})})]})},ek=r(58533),eP=r(20624),eC=r(28414),eN=r(98363),eA=r(59705),eI="paywall-migration-members-scrollable-target",eE=function(){var e=(0,(0,h.Gc)().watch)(el.paywall_id),t=(0,eA._)({perPage:eA.L,order:{created_at:"desc"},query:"",initialPage:1,options:{keepPreviousData:!0},filters:[{id:e,key:"paywalls",value:e}],scope:{status:"all"},isAdminScope:!0}),r=t.totalQueryAudience,n=t.isLoading,i=t.audience,o=t.fetchNextPage,a=t.hasNextPage;return(0,s.jsxs)("div",{className:"border-primary rounded-xl border",children:[(0,s.jsx)("div",{className:"border-primary bg-xy-flow rounded-t-xl border-b p-4",children:(0,s.jsx)(T.Z.LabelSm,{weight:"bold",children:(0,y.t)(["settings.access_groups.paywall_migration.modal.preview","total_members"],{total:r})})}),(0,s.jsxs)("div",{id:eI,className:"h-[340px] overflow-auto",children:[n&&(0,s.jsx)(eP.m,{}),(0,s.jsx)(ek.Z,{style:{height:"100%",overflow:"hidden"},next:o,hasMore:a||!1,scrollableTarget:eI,loader:(0,s.jsx)(eP.m,{}),dataLength:(null==i?void 0:i.length)||0,scrollThreshold:.5,children:(0,s.jsx)("div",{className:"flex w-full flex-col px-5 pt-2",children:null==i?void 0:i.map(function(e){var t=e.id,r=e.avatar_url,n=e.name;return(0,s.jsxs)("div",{className:"group flex h-12 items-center rounded-md border-none",children:[(0,s.jsx)("div",{className:"mr-2",children:(0,s.jsx)(eN.s,{src:r,name:n,size:"8"})}),(0,s.jsx)("div",{className:"w-40",children:(0,s.jsx)(eC.Y,{children:(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",children:n})})})]},t)})})})]})]})},eT=function(){var e=eh(ey().formValues),t=e.previewData,r=e.isLoading,n=e.error,i=e.isError,o=(0,em.pm)();return((0,m.useEffect)(function(){i&&n&&o.error(n.message)},[n,i]),r)?(0,s.jsx)(f.a,{}):t?(0,s.jsxs)("div",{children:[(0,s.jsx)(T.Z.BodyMd,{children:(0,s.jsx)(X.w,{content:(0,y.t)(["settings.access_groups.paywall_migration.modal.preview","description"])})}),(0,s.jsxs)("div",{className:"mt-5 flex gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(eE,{})}),(0,s.jsx)(ep.JO,{type:"24-arrow-right"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(eS,{previewData:t})})]})]}):null},eL=r(39788),eD="settings.access_groups.paywall_migration.modal.form",eM=function(e){var t=e.currencyId,r=(0,(0,W.W)({}).useListPaywallGroups)({for_access_groups:!0}),n=r.data;if(r.isLoading)return(0,s.jsx)(f.a,{});var i=((void 0===n?[]:n)||[]).filter(function(e){var r;return(null==(r=e.currency)?void 0:r.id)===t}).map(function(e){return{value:"".concat(e.id),label:e.name}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(T.Z.LabelMd,{weight:"bold",children:(0,y.t)([eD,"subscription_groups.title"])})}),(0,s.jsx)("div",{className:"mt-4",children:i.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([eD,"subscription_groups.select_description"])}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(eL.N,{name:"paywall_group_id",label:(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",children:(0,y.t)([eD,"subscription_groups.select_label"])}),labelClassName:"!mb-2 !text-sm",rules:{required:(0,y.t)([eD,"validations.subscription_group_required"])},options:i,onChange:function(){}})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([eD,"subscription_groups.new_description"])}),(0,s.jsx)("div",{className:"mx-1 mt-0.5",children:(0,s.jsx)(d.l.Item,{name:"paywall_group_name",translationRoot:eD,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{required:(0,y.t)([eD,"validations.subscription_group_required"]),maxLength:{value:65,message:(0,y.t)([eD,"validations.subscription_group_name_max_length"])}},children:(0,s.jsx)(d.l.Input,{})})})]})})]})},eR=r(70442),eB=r(71738),eF=r(93199),ez=function(e){var t=e.closeAllModals,r=(0,em.pm)(),n=(0,eR.k6)(),i=(0,k.useMutation)({mutationFn:function(e){return(0,eF.Cu)(eb.av.admin.paywalls.accessGroupsMigration.create(e))},onSuccess:function(){r.success((0,y.t)("settings.access_groups.paywall_migration.modal.form.messages.success"))},onError:function(e){r.error(e.message)},onSettled:function(){eB.Eh.invalidateQueries(p.Rx),n.push(eb.Lo.paywalls.index),t()}});return{migrateMutation:i.mutate,isMigrating:i.isLoading}},eU=r(95727),eZ="settings.access_groups.paywall_migration.modal.form.confirm_migration",eG=function(e){var t=e.formValues,r=e.closeModals,n=(0,l.dd)(),i=ez({closeAllModals:function(){n.hide(),r()}}),o=i.migrateMutation,a=i.isMigrating;return(0,s.jsx)(eU.V,{title:(0,y.t)([eZ,"title"]),isOpen:n.visible,onClose:n.hide,onCancel:n.hide,isDisabled:a,confirmText:(0,y.t)([eZ,"action"]),onConfirm:function(){o(t)},children:(0,s.jsx)(X.w,{content:(0,y.t)([eZ,"description"])})})},eq=l.gk.create(function(e){return(0,s.jsx)(eG,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))});function eV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eH="settings.access_groups.paywall_migration.modal.form",eW=function(e,t){var r=e.paywall_group_name||"",n=e.paywall_group_id;return(0,S.isEmpty)(n)&&((0,S.isEmpty)(r)||""===r.trim())?(t.error((0,y.t)([eH,"validations.subscription_group_required"])),!1):!(0,S.isEmpty)(n)||!!(0,S.isEmpty)(r)||!(r.length>65)||(t.error((0,y.t)([eH,"validations.subscription_group_name_max_length"])),!1)},eQ=function(e,t,r){var n=e.name||"",i=(0,S.isEmpty)(n)||""===n.trim(),o=!(0,S.isEmpty)(n)&&n.length>65;return t&&i?(r.error((0,y.t)([eH,"validations.name_required"])),!1):t&&o?(r.error((0,y.t)([eH,"validations.name_max_length"])),!1):!(!t&&(0,S.isEmpty)(e.access_group_ids))||(r.error((0,y.t)([eH,"validations.access_group_required"])),!1)},eJ=function(e){var t,r=e.closeModals,n=e.shouldShowPaywallGroupSelector,i=(0,l.dd)(eq),o=ey().formValues,a=(0,em.pm)(),s=(t=(0,m.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eV(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eV(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],d=o.migration_flow===es.new_access_group,f={subscription:0,select:+!!n,review:n?2:1,totalSteps:n?3:2},p=c===f.subscription&&n,b=c===f.select,h=c===f.review,y=function(){return p?eW(o,a):!b||eQ(o,d,a)},v=function(){i.show({formValues:o,closeModals:r})};return{isCreatingAccessGroup:d,handleFormNavigation:function(){if(!h){var e=p?f.select:b?f.review:null;null!==e&&y()&&u(e);return}y()&&v()},isFormValid:y,handleStepChange:function(e){y()&&u(e)},selectedStepIndex:c,isReviewChangesStep:h,isPaywallGroupSelectionStep:p,isAccessGroupConfigurationStep:b,totalSteps:f.totalSteps,shouldShowBackButton:h||!p&&n}},eK="settings.access_groups.paywall_migration.modal",e$=function(e){var t=e.closeModals,r=e.shouldShowPaywallGroupSelector,n=e.currencyId,i=(0,J.S)(),o=i.data,a=i.isLoading,l=eJ({closeModals:t,shouldShowPaywallGroupSelector:r}),c=l.handleStepChange,u=l.selectedStepIndex,d=l.isReviewChangesStep,p=l.handleFormNavigation,m=l.isPaywallGroupSelectionStep,b=l.isAccessGroupConfigurationStep,h=l.totalSteps,v=l.shouldShowBackButton;return a?(0,s.jsx)(f.a,{}):(0,s.jsxs)("div",{className:"px-8",children:[(0,s.jsx)("div",{className:"h-[526px]",children:(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-6",children:m&&r?(0,s.jsx)(eM,{currencyId:n}):b?(0,s.jsx)(ef,{accessGroups:o}):(0,s.jsx)(eT,{})})}),(0,s.jsxs)("div",{className:"my-2 flex",children:[(0,s.jsx)("div",{className:"flex-1 justify-start",children:v&&(0,s.jsx)(K.z,{type:"button",variant:"secondary",className:"!py-2",onClick:function(){return c(u-1)},children:(0,y.t)([eK,"form.buttons.back"])})}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)($.D,{totalDots:h,activeDot:u})}),(0,s.jsx)("div",{className:"flex flex-1 justify-end",children:(0,s.jsx)(K.z,{type:"button",variant:"circle",className:"!py-2",onClick:p,children:d?(0,y.t)([eK,"form.buttons.confirm"]):(0,y.t)([eK,"form.buttons.next"])})})]})]})};function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eY=function(e){var t,r=e.paywallId,n=e.closePaywallFormModal,i=e.paywallGroupId,o=e.currencyId,a=(0,l.dd)(),c=(0,(0,W.W)({}).useListPaywallGroups)(),u=c.data,p=c.isLoading,b=(void 0===u?[]:u).find(function(e){return e.id===i}),h=(t=(0,m.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eX(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eX(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=h[0],g=h[1];return((0,m.useEffect)(function(){if(b){var e,t;g((null!=(t=null==(e=b.upgradable_paywalls)?void 0:e.length)?t:0)>1)}},[b]),p)?(0,s.jsx)(f.a,{}):(0,s.jsxs)(Q.u_,{isOpen:a.visible,onClose:a.hide,children:[(0,s.jsx)(Q.u_.Overlay,{}),(0,s.jsxs)(Q.u_.Content,{size:"xl",children:[(0,s.jsxs)(Q.u_.Header,{children:[(0,s.jsx)(Q.u_.Title,{size:"sm",children:(0,s.jsx)(T.Z.TitleSm,{weight:"bold",children:(0,y.t)(["settings.access_groups.paywall_migration.modal","title"])})}),(0,s.jsx)(Q.u_.HeaderActions,{children:(0,s.jsx)(Q.u_.CloseButton,{onClick:a.hide})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(d.l,{onSubmit:function(){},defaultValues:{paywall_id:r,access_groups:[],migration_flow:es.new_access_group,paywall_group_id:"",paywall_group_name:""},children:(0,s.jsx)(e$,{closeModals:function(){a.hide(),n()},currencyId:o,shouldShowPaywallGroupSelector:v})})})]})]})},e0=l.gk.create(function(e){var t=e.paywallId,r=e.closePaywallFormModal,n=e.paywallGroupId,i=e.currencyId;return(0,s.jsx)(eY,{paywallId:t,closePaywallFormModal:r,paywallGroupId:n,currencyId:i})}),e1="settings.access_groups.paywall_migration.empty_state",e2=function(e){var t=e.closePaywallFormModal,r=(0,h.Gc)().watch,n=r("id"),i=r("paywall_group_id"),o=r("currency_id"),a=(0,l.dd)(e0);return(0,s.jsx)("div",{className:(0,j.A)("rounded border border-gray-200"),children:(0,s.jsx)(H.u,{header:(0,y.t)([e1,"header"]),description:(0,y.t)([e1,"description"]),primaryLabel:(0,y.t)([e1,"primary_cta"]),secondaryLabel:(0,y.t)([e1,"secondary_cta"]),onPrimaryClick:function(){a.show({paywallId:n,closePaywallFormModal:t,paywallGroupId:i,currencyId:Number(o)})},onSecondaryClick:function(){window.open("https://help.circle.so/p/basics/community-access/access-group-overview","_blank")}})})};function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e6="settings.access_groups.paywall_migration",e4=Object.freeze({access_groups:"access_groups",space_access:"space_access"}),e5=function(e){var t,r=e.spaceAccessNode,n=e.closePaywallFormModal,i=(t=(0,m.useState)(e4.space_access),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return e3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e3(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)(V.S,{shouldShowInlineOptions:!0,name:"access_groups_enabled",onChange:function(e){a(e)},defaultChecked:o,size:"sm",options:[{label:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,y.t)([e6,"tabs.access_groups"]),(0,s.jsx)("div",{className:"border-v2-danger bg-v2-danger flex w-fit items-center space-x-2 rounded-2xl px-1 text-white",children:(0,s.jsx)(T.Z.LabelXxs,{weight:"semibold",color:"text-inherit",truncate:!0,"data-testid":"chip-title",children:(0,y.t)([e6,"tabs.new"])})})]}),value:e4.access_groups},{label:(0,y.t)([e6,"tabs.space_access"]),value:e4.space_access}],checkedOptionClassName:"pl-9"}),o===e4.space_access&&r,o===e4.access_groups&&(0,s.jsx)(e2,{closePaywallFormModal:n})]})};function e8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e9=function(e){var t,r=e.hasSubscribers,n=(0,h.Gc)().control,i=I().onClose,o=(0,h.qo)({control:n,name:"id"}),a=(0,h.qo)({control:n,name:"access_groups_enabled"}),l=a&&o,u=(0,c.wh)().currentCommunitySettings,d=(null==u?void 0:u.access_groups_enabled)&&!o||l,f=(t=(0,m.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return e8(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],b=f[1],j=(0,c.wh)().currentCommunityMember;return(0,_.s)({channel:g.uX,onMessageReceive:function(e){var t=e.event,r=JSON.parse(e.record),n=r.params;(0,g.gV)(null==r?void 0:r.type)&&(null==n?void 0:n.paywall_id)&&((0,g.O6)(t)?b(!0):b(!1))},canCreateConnection:!!(null==j?void 0:j.id),community_member_id:null==j?void 0:j.id}),(0,s.jsx)(w,{className:"min-h-[40vh]",children:o&&!a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.G,{title:(0,y.t)("settings.paywalls.modal.tabs.access.title"),subtitle:(0,y.t)("settings.access_groups.paywall_migration.subtitle")}),(0,s.jsx)(e5,{spaceAccessNode:(0,s.jsx)(q,{}),closePaywallFormModal:i})]}):d?(0,s.jsx)("div",{children:(0,s.jsx)(x.m,{recordType:v.un.paywall,areFormItemsEmbedded:!0,spaceAccessNode:l?null:(0,s.jsx)("div",{className:"-mt-2",children:(0,s.jsx)(q,{})}),isAccessGroupsTabEnabled:d,canRemoveAllAccessGroups:!1,isSyncing:p,syncingTooltip:(0,y.t)("settings.access_groups.paywall_migration.syncing_tooltip"),addConfirmationDetails:r?{bodyI18nRoot:"settings.access_groups.admin.entry_points.association.paywall.add_confirmation"}:void 0})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.G,{title:(0,y.t)("settings.paywalls.modal.tabs.access.title")}),(0,s.jsx)(q,{})]})})},e7=r(34996),te=function(e){var t=e.children;return(0,s.jsx)(e7.fD.Main,{children:(0,s.jsx)("div",{className:"relative [grid-area:canvas]",children:(0,s.jsxs)(e7.fD.Canvas,{className:"relative gap-3 px-6 pb-16 pt-6 [grid-area:none]",children:[(0,s.jsx)(e7.fD.CanvasZoomableSize,{children:(0,s.jsx)(e7.fD.CanvasCard,{className:"h-full rounded-2xl border-0",children:t})}),(0,s.jsx)(e7.fD.FullscreenPreview,{}),(0,s.jsx)(e7.fD.CanvasControls,{className:"bg-primary absolute bottom-[6.5rem] left-1/2 -translate-x-1/2 !gap-0 rounded-xl shadow-lg",children:(0,s.jsx)(e7.fD.CanvasSizeToggle,{})})]})})})},tt=r(88656),tr=r(69831),tn=r(49276),ti=r(22273),to=r(65766),ta=r(60221),ts=function(e){return Number(e)||0},tl=[function(e,t){return(0,ta.ZN)(e)?ta.Rt.value:ts(t.trial_days)>0||ts(e.upfront_payment_amount)>0?null:ta.Rt.value},function(e,t){return ts(t.trial_days)>0&&0===ts(e.upfront_payment_amount)?ta.Rt.trialThenValue:null},function(e,t){return ts(t.trial_days)>0&&ts(e.upfront_payment_amount)>0&&!e.trial_requires_upfront_payment?ta.Rt.trialThenUpfrontThenValue:null},function(e,t){return 0===ts(t.trial_days)&&ts(e.upfront_payment_amount)>0?ta.Rt.upfrontThenValue:null},function(e,t){return ts(t.trial_days)>0&&ts(e.upfront_payment_amount)>0&&e.trial_requires_upfront_payment?ta.Rt.upfrontThenTrialThenValue:null}],tc=function(e,t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={id:(null==e?void 0:e.id)||Math.floor(1e5*Math.random()),scenario:tl.reduce(function(r,n){return r||n(e,t)},null)||"value",interval_type:(0,ta.mn)(e),payable_payment_methods:["card"],trial_days:Number(t.trial_days)},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r},tu=function(){var e,t,r=I(),n=r.selectedCurrency,i=r.checkoutDataQuery,o=(0,(0,h.Gc)().watch)(),a=(0,c.wh)(),l=a.currentCommunity,u=a.currentCommunityMember,d=a.currentUser,f=(0,ti.pI)({paywallId:null==o?void 0:o.id,enabled:!0}).paywallCouponsListQuery,p=new URLSearchParams(null==(e=null==o?void 0:o.checkout_path)?void 0:e.split("?")[1]).get("coupon_code"),b=p?null==f||null==(t=f.data)?void 0:t.find(function(e){return e.code===p}):void 0,y=(0,m.useMemo)(function(){var e,t,r;return n?(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={status:to.Tl.ACTIVE,currency:n,prices:(null==o||null==(e=o.stripe_prices_attributes)?void 0:e.map(function(e){return tc(e,o)}))||[],paywall_customization:null==o?void 0:o.paywall_customization_attributes},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t):null},[o,n]);if(!l||!u||!d||!i||(null==i?void 0:i.isLoading)||!(null==i?void 0:i.data)||!y||!y.prices||!y.currency||!n)return(0,s.jsx)("div",{className:"bg-primary border-primary flex h-full w-full flex-col items-center justify-center rounded-2xl border",children:(0,s.jsx)("div",{children:(0,s.jsx)(tr.u,{})})});var v=(null==i?void 0:i.data)||{},g=v.community,_=v.community_payment_processor,x=v.community_member_payment_processor,j=v.policies,w=v.settings,O=v.auth_provider;return(0,s.jsx)(tn.b,{"data-testid":"checkout-builder-frame",className:"border-primary rounded-2xl border",children:(0,s.jsx)("div",{className:"pointer-events-none h-full w-full",ref:function(e){return e&&e.setAttribute("inert","")},"data-testid":"checkout-preview",children:(0,s.jsx)(tt.h,{paywall:y,currentCommunity:g,currentCommunityProcessorPaymentMethodConfigurationId:_.payment_method_configuration_id,isLinkCapabilityActive:_.is_link_capability_active,isMemberWithSavedPaymentMethods:x.is_member_with_saved_payment_methods,currentCommunityMemberPaymentProcessorSessionClientSecret:void 0,hasAlreadyPurchased:j.has_already_purchased,loginUrl:w.login_url,communityRootUrl:w.community_url,checkoutConfirmationUrl:w.checkout_confirmation_url,processorId:_.processor_id,processorKey:_.public_api_key,areCouponsEnabled:j.are_coupons_enabled,isTaxCollectionEnabled:!1,isMemberAddressComplete:!1,isMemberAddressRequired:!1,memberBillingInfo:void 0,isBrazilianAccountAndProcessorStripeBr:_.is_brazilian_account_and_processor_stripe_brazil,shouldShowTaxIdForm:j.should_show_tax_id_form,isTaxIdMandatory:_.is_tax_id_mandatory,authProviderProperties:O,isPaywallsAsyncCardPaymentsEnabled:!1,shouldUseWrapper:!1,resetPasswordUrl:w.reset_password_url,checkoutPreviewContext:{community_id:l.id,coupon_applied:b}})})})},td=function(){return(0,s.jsx)(te,{children:(0,s.jsx)(tu,{})})},tf=r(94473);function tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tm(e,t){if(e){if("string"==typeof e)return tp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tp(e,t)}}var tb=(0,m.createContext)({currentSidebar:tf.rl.DEFAULT,history:[tf.rl.DEFAULT],goBack:S.noop,goToSidebar:S.noop});tb.displayName="CheckoutTabProvider";var th=function(){return(0,m.useContext)(tb)},ty=function(e){var t,r=e.initialSidebar,n=void 0===r?tf.rl.DEFAULT:r,i=e.children,o=(0,h.Gc)().control,a=(0,h.Dq)({control:o,name:"paywall_customization_attributes.benefit_properties.benefits",shouldUnregister:!1}),l=(0,h.Dq)({control:o,name:"paywall_customization_attributes.testimonial_properties.testimonials",shouldUnregister:!1}),c=(0,h.Dq)({control:o,name:"paywall_customization_attributes.badge_properties.badges",shouldUnregister:!1}),u=(t=(0,m.useState)([n]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||tm(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],p=d[d.length-1],b=(0,m.useCallback)(function(){d.length>1&&f(d.slice(0,-1))},[d,f]),y=(0,m.useCallback)(function(e){f(((function(e){if(Array.isArray(e))return tp(e)})(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||tm(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))},[f,d]);return(0,s.jsx)(tb.Provider,{value:{history:d,setHistory:f,currentSidebar:p,goBack:b,goToSidebar:y,testimonialPropertiesForm:l,badgePropertiesForm:c,benefitPropertiesForm:a},children:i})},tv=function(e){var t=e.children,r=e.className;return(0,s.jsx)(e7.fD.FixedLeftSidebar,{className:r,children:t})},tg=function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,s.jsx)("div",{className:(0,j.A)("flex flex-col gap-y-6 px-6 py-5",r),"data-testid":n,children:t})},t_=function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,s.jsx)("div",{className:(0,j.A)("border-primary flex flex-row gap-x-2 border-b px-6 py-5",r),"data-testid":n,children:t})},tx=function(e){var t=e.children,r=e.className;return(0,s.jsx)(t_,{className:r,dataTestId:"paywall-checkout-sidebar-header",children:t})},tj=function(e){var t=e.titleLocale,r=e.toggleName,n=e.dataTestId;return(0,s.jsxs)(tx,{className:"flex flex-row items-center justify-between px-6 py-4",children:[(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",children:t}),(0,s.jsx)(d.l.ToggleSwitch,{name:r,variant:"large",dataTestId:n})]})},tw=function(e){var t=e.titleLocale,r=e.descriptionLocale,n=e.descriptionDataTestId,i=e.toggleDataTestId,o=e.containerDataTestId,a=e.children,l=e.toggleName,c=(0,(0,h.Gc)().watch)(l);return(0,m.useEffect)(function(){var e=document.querySelector("[data-testid='".concat(o,"']"));c?e&&e.removeAttribute("inert"):e&&e.setAttribute("inert","")},[c,o]),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(tj,{titleLocale:t,toggleName:l,dataTestId:i}),r&&(0,s.jsx)(t_,{dataTestId:n,children:(0,s.jsx)(T.Z.BodySm,{children:r})}),(0,s.jsx)(tg,{className:"h-[calc(100%-3.823rem-3.972rem-4.784rem)] overflow-y-auto p-0 pb-8 pt-5",dataTestId:o,children:a})]})},tO=function(e){var t=e.isEnabled,r=e.children;return(0,s.jsx)("div",{className:(0,j.A)("divide-primary space-y-5 divide-y",{"pointer-events-none opacity-50":!t}),children:r})},tS=r(46705),tk=r(23125),tP=function(e){var t=e.children,r=e.className,n=e.dataTestId,i=e.withoutBorder;return(0,s.jsx)("div",{className:(0,j.A)("border-dark flex flex-col gap-y-3 rounded-lg border p-3",r,{"border-0":i}),"data-testid":n||void 0,children:t})},tC=function(e){var t=e.name,r=e.formClassName,n=e.translationRoot,i=(0,(0,h.Gc)().getValues)(t);return(0,s.jsx)(d.l.Item,{className:r,name:t,translationRoot:n,label:(0,y.t)([n,"action_type.title"]),hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:(0,s.jsx)(d.l.TextSelect,{name:t,initialValue:i,options:[{value:tk.KW.DO_NOTHING,label:(0,y.t)([n,"action_type.do_nothing"])},{value:tk.KW.REDIRECT_TO,label:(0,y.t)([n,"action_type.redirect_to"])}]})})},tN=r(80171),tA=function(e){var t=e.name,r=e.translationRoot;return(0,s.jsx)(d.l.RadioGroup,{name:t,variant:"radio",verticalSpacing:"tightest",options:[{label:(0,s.jsxs)("span",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(T.Z.BodySm,{children:(0,y.t)([r,"countdown_type.remaining_time"])}),(0,s.jsx)(tN.T,{content:(0,y.t)([r,"countdown_type.remaining_time_tooltip"]),children:(0,s.jsx)(ep.JO,{type:"question-mark",className:"icon icon--xs"})})]}),value:"remaining_time"},{label:(0,s.jsxs)("span",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(T.Z.BodySm,{children:(0,y.t)([r,"countdown_type.finish_at"])}),(0,s.jsx)(tN.T,{content:(0,y.t)([r,"countdown_type.finish_at_tooltip"]),children:(0,s.jsx)(ep.JO,{type:"question-mark",className:"icon icon--xs"})})]}),value:"finish_at"}]})},tI=r(19614),tE=r(4393),tT=r(34870);function tL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tD=function(e){var t,r=e.name,n=e.formClassName,i=e.translationRoot,o=(0,h.Gc)(),a=o.watch,l=o.setValue,c=(t=(0,m.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tL(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tL(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1],p=a(r),b=(0,m.useMemo)(function(){return p?(0,tT.w)({dateTime:new Date(p),format:tT.f.long_date_short_time}):""},[p]);return(0,s.jsxs)(d.l.Item,{className:n,name:r,translationRoot:i,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:[(0,s.jsx)("div",{className:(0,j.A)("text-default form-control flex w-full rounded-lg"),"data-testid":"scheduled_at",children:(0,s.jsxs)("button",{className:"flex w-full items-center justify-between",type:"button",onClick:function(){return f(!0)},children:[(0,s.jsx)("span",{children:b}),(0,s.jsx)(ep.JO,{type:"16-calendar",size:16,className:"!h-4 !w-4"})]})}),(0,s.jsx)(tI.M,{datePickerVisible:u,onCancel:function(e){e&&e.preventDefault(),f(!1)},value:null!=p?p:tE.DT.toISOString(),onSave:function(e){f(!1),l(r,e,{shouldDirty:!0})},saveButtonVariant:"circle"})]})},tM=r(47395),tR=function(e){var t=e.name,r=e.maxLength,n=e.children,i=e.label,o=e.errorMessage,a=e.className,l=(0,h.Gc)(),c=l.watch,u=l.setError,d=l.clearErrors,f=c(t),p=(null==f?void 0:f.length)||0,b=p>r;return(0,m.useEffect)(function(){b?u(t,{type:"maxLength",message:o}):d(t)},[b,t,d,u,o]),(0,s.jsxs)("div",{className:(0,j.A)("flex flex-col gap-y-1",a),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(tM.C,{label:i}),(0,s.jsx)(T.Z.LabelXs,{color:b?"text-v2-danger":"text-default",children:"".concat(p," / ").concat(r)})]}),n]})},tB=function(e){var t=e.name,r=e.translationRoot,n=e.formClassName;return(0,s.jsx)(tR,{name:t,label:(0,y.t)([r,"displayed_text"]),maxLength:30,errorMessage:(0,y.t)([r,"errors.displayed_text_max_length"]),children:(0,s.jsx)(d.l.Item,{className:n,name:t,translationRoot:r,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:30,message:(0,y.t)([r,"errors.displayed_text_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(d.l.Input,{"data-testid":"countdown-displayed_text-input"})})})},tF=r(25578),tz=function(e){var t=e.name,r=e.translationRoot,n=e.formClassName;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.l.Item,{className:n,name:t,translationRoot:r,placeholder:(0,y.t)([r,"redirect_to_placeholder"]),hideLabel:!0,hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",rules:{validate:function(e){return""===e||(0,tF.K)(e)||(0,y.t)([r,"errors.action.redirect_to_invalid_url"])},maxLength:255},children:(0,s.jsx)(d.l.Input,{"data-testid":"countdown-redirect_text-input"})}),(0,s.jsx)(T.Z.BodyXs,{color:"text-light",children:(0,y.t)([r,"redirect_to_description"])})]})},tU=function(e){var t=e.name,r=e.formClassName,n=e.translationRoot;return(0,s.jsx)(d.l.Item,{className:r,name:t,translationRoot:n,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{max:{value:60,message:(0,y.t)([n,"errors.remaining_time_threshold"])},min:{value:1,message:(0,y.t)([n,"errors.remaining_time_threshold"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(d.l.Input,{"data-testid":"countdown-remaining_time-input",type:"number",min:1,max:60,suffix:(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([n,"remaining_time_suffix"])})})})};function tZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tG="!mt-0 !py-0",tq=[tf.po,"builder.countdown.fields"].join("."),tV=function(e){var t,r=e.formRootName,n=(0,h.Gc)().watch,i=(0,m.useMemo)(function(){return{text:[r,"displayed_text"].join("."),countdown_type:[r,"countdown_type"].join("."),finish_at:[r,"finish_at"].join("."),remaining_time:[r,"remaining_time"].join("."),displayed_text:[r,"displayed_text"].join("."),action:{action_type:[r,"action.action_type"].join("."),redirect_to:[r,"action.redirect_to"].join(".")}}},[r]),o=(t=n([i.countdown_type,i.action.action_type]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tZ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tZ(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1];return(0,s.jsxs)(tP,{dataTestId:"paywall-customization-countdown-fields",className:"gap-y-5 px-6 py-0",withoutBorder:!0,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsx)(tA,{name:i.countdown_type,translationRoot:tq}),(0,tS.$Z)(a)&&(0,s.jsx)(tU,{name:i.remaining_time,formClassName:tG,translationRoot:tq}),(0,tS.jS)(a)&&(0,s.jsx)(tD,{name:i.finish_at,formClassName:tG,translationRoot:tq})]}),(0,s.jsx)(tB,{name:i.displayed_text,translationRoot:tq,formClassName:tG}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsx)(tC,{name:i.action.action_type,translationRoot:tq,formClassName:tG}),l===tk.KW.REDIRECT_TO&&(0,s.jsx)(tz,{name:i.action.redirect_to,translationRoot:tq,formClassName:tG})]})]})},tH="paywall_customization_attributes.countdown_properties",tW=function(){var e=(0,h.Gc)().watch,t=[tH,"enabled"].join("."),r=!!e(t);return(0,s.jsx)(tw,{titleLocale:(0,y.t)([tf.po,"builder.countdown.show_countdown"]),descriptionLocale:(0,y.t)([tf.po,"builder.countdown.fields.description"]),toggleName:t,toggleDataTestId:"paywall-customization-countdown-toggle",containerDataTestId:"paywall-customization-countdown-container",children:(0,s.jsx)(tO,{"data-testid":"countdown-properties-form-group",isEnabled:r,children:(0,s.jsx)(tV,{formRootName:tH})})})},tQ=r(26359),tJ=r(3697),tK=r(6394),t$=function(e){var t=e.value,r=e.processing,n=e.imageUrl,i=e.handleChangeCoverClick,o=e.handleDelete,a="border-dark bg-selector-active flex h-[134px] w-full flex-col justify-center rounded-lg border border-dashed";return t||r?r?(0,s.jsx)("div",{className:a,children:(0,s.jsx)(f.a,{})}):(0,s.jsxs)("div",{className:"border-primary flex flex-col gap-y-3 rounded-lg border","data-testid":"cover-image-preview",children:[(0,s.jsx)("div",{className:"px-3 pt-3",children:(0,s.jsx)("img",{src:n,alt:"",className:(0,j.A)(a,"border-solid"),loading:"eager"})}),(0,s.jsxs)("div",{className:"border-primary flex flex-row items-center justify-between border-t p-3",children:[(0,s.jsx)(K.z,{type:"button",variant:"link",onClick:i,"data-testid":"cover-image-replace",className:"!p-0",children:(0,s.jsx)(T.Z.LabelXs,{weight:"semibold",children:(0,y.t)("replace")})}),(0,s.jsx)(K.z,{type:"button",variant:"circle-plain",onClick:o,className:"hover:text-dark !hover:bg-primary !p-0","data-testid":"cover-image-delete",children:(0,s.jsx)(ep.JO,{type:"20-trash-bin",viewBox:"0 0 20 20"})})]})]}):(0,s.jsxs)(K.z,{className:a,type:"button",variant:"circle-plain",onClick:i,"data-testid":"cover-image-add",children:[(0,s.jsx)(ep.JO,{type:"24-builder-ui-sidebar-add-element-filled",className:"!w-[3rem]"}),(0,s.jsx)("span",{children:(0,y.t)("add_image")})]})},tX=function(){var e=(0,h.Gc)().setValue;return(0,s.jsx)(tK.D,{showAddCoverBtn:!0,changeImageText:(0,y.t)("replace"),name:"paywall_customization_attributes.cover_image",hideUnsplash:!1,hideEmbedUrl:!1,aspectRatio:tJ.pI.PAYWALL_COVER_IMAGE,renderer:t$,onImageAttachSuccess:function(){e("paywall_customization_attributes.should_remove_cover_image",!1),e("paywall_customization_attributes.cover_image_url",null)},onDelete:function(){e("paywall_customization_attributes.should_remove_cover_image",!0),e("paywall_customization_attributes.cover_image_url",null)},title:"",customAspectRatioHelpText:(0,y.t)([tf.po,"builder.default.cover_image.recommended_size"])})},tY=function(e){var t=e.title,r=e.onClick;return(0,s.jsxs)(K.z,{className:"text-dark hover:bg-secondary -mx-3 flex flex-row justify-between !px-3 !py-1",onClick:r,variant:"circle-plain",isFullRounded:!1,children:[(0,s.jsx)(T.Z.BodySm,{children:t}),(0,s.jsx)(ep.JO,{type:"24-arrow-right"})]})},t0=function(e){var t=e.title,r=e.tooltipText,n=e.children,i=e.className;return(0,s.jsxs)("div",{className:(0,j.A)("flex flex-col gap-y-3",i),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",children:t}),r&&(0,s.jsx)(tN.T,{content:r,children:(0,s.jsx)(ep.JO,{type:"question-mark",className:"!w-[11px]",viewBox:"0 0 25 25"})})]}),(0,s.jsx)("div",{className:"flex flex-col gap-y-1",children:n})]})},t1=function(){var e=th().goToSidebar,t=(0,tQ.W)();return(0,s.jsxs)(tg,{children:[(0,s.jsx)(t0,{title:(0,y.t)([tf.po,"builder.default.cover_image.title"]),tooltipText:(0,y.t)([tf.po,"builder.default.cover_image.tooltip"]),children:(0,s.jsx)(tX,{})}),(0,s.jsxs)(t0,{title:(0,y.t)([tf.po,"builder.default.product_details_title"]),children:[(0,s.jsx)(tY,{title:(0,y.t)([tf.po,"builder.badges.title"]),onClick:function(){return e(tf.rl.BADGES)}}),(0,s.jsx)(tY,{title:(0,y.t)([tf.po,"builder.benefits.title"]),onClick:function(){return e(tf.rl.BENEFITS)}}),(0,s.jsx)(tY,{title:(0,y.t)([tf.po,"builder.testimonials.title"]),onClick:function(){return e(tf.rl.TESTIMONIALS)}})]}),t&&(0,s.jsx)(t0,{title:(0,y.t)([tf.po,"builder.default.price_features_title"]),children:(0,s.jsx)(tY,{title:(0,y.t)([tf.po,"builder.countdown.title_sidebar"]),onClick:function(){return e(tf.rl.COUNTDOWN)}})})]})},t2=r(59855);function t3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function t4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var t5={name:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.testimonials.fields.name_placeholder"),avatar_image_url:"",avatar_image:"",quote:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.testimonials.fields.quote_placeholder"),headline:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.testimonials.fields.headline_placeholder"),visible:!0,display_style:{type:tf.y_.STARS,color:tf.F_.STARS}},t8={background_color:"#F6F6F6",icon:{emoji_type:"emoji",emoji:"\uD83D\uDE00"},label:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.badges.fields.label_placeholder"),text_color:"#000000",visible:!0},t9={title:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.benefits.fields.title_placeholder"),description:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.benefits.fields.description_placeholder"),icon:{emoji_type:"emoji",emoji:""}},t7=function(e,t){return null==e||0===e.length?[t6({},t)]:e},re=function(e){var t,r,n,i,o,a,s,l=null==e?void 0:e.benefit_properties,c=null==e?void 0:e.testimonial_properties,u=null==e?void 0:e.badge_properties,d=null==e?void 0:e.countdown_properties;return t4(t6({},e||{}),{countdown_properties:{enabled:null!=(n=null==d?void 0:d.enabled)&&n,countdown_type:(null==d?void 0:d.countdown_type)||tk.sI.REMAINING_TIME,remaining_time:(null==d?void 0:d.remaining_time)||tS.V5,remaining_time_interval:"minutes",finish_at:(null==d?void 0:d.finish_at)?new Date(null==d?void 0:d.finish_at).toString():new Date().toString(),displayed_text:(null==d?void 0:d.displayed_text)||(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.countdown.fields.displayed_text_default"),action:{action_type:(null==d||null==(t=d.action)?void 0:t.action_type)||tk.KW.DO_NOTHING,redirect_to:(null==d||null==(r=d.action)?void 0:r.redirect_to)||""}},benefit_properties:{enabled:null!=(i=null==l?void 0:l.enabled)&&i,title:null!=(o=null==l?void 0:l.title)?o:(0,y.t)("settings.paywalls.modal.tabs.checkout.builder.benefits.title_placeholder"),benefits:t7(null==l?void 0:l.benefits,t9)},testimonial_properties:{enabled:null!=(a=null==c?void 0:c.enabled)&&a,testimonials:t7(null==c?void 0:c.testimonials,t5)},badge_properties:{enabled:null!=(s=null==u?void 0:u.enabled)&&s,badges:t7(null==u?void 0:u.badges,t8)}})},rt=function(){var e=(0,c.nT)().records,t=function(t,r){var n=function(e){if(Array.isArray(e))return t3(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return t3(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t3(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return e.forEach(function(e){r.includes(e.space_group_id)&&n.push(e.id)}),Array.from(new Set(n))},r=(0,c.wh)().currentCommunitySettings,n=null==r?void 0:r.access_groups_enabled;return{getDefaultValues:function(e){var r,i,o,a={trial_days:0,trial_requires_card:!1,can_be_repurchased:!1,stripe_prices_attributes:[],mobile_price_packages_attributes:[],all_spaces:!1,space_group_ids:[],space_ids:[],redirect_url_enabled:!1,thank_you_page_enabled:!0,post_purchase_email_enabled:!0,self_trial_cancelable:!1,mobile_paywall_resource_attributes:{id:null,processor_id:null},post_purchase_email_message:(0,y.t)("settings.paywalls.form.post_purchase_email_default_message_text"),post_purchase_email_meta:{subject:(0,y.t)("settings.paywalls.form.post_purchase_email_default_subject_text")},currency_id:"",conversion_tracking_js_code:"",access_groups_enabled:n,access_groups:[],paywall_customization_attributes:t6({},re())};return e?t4(t6({},a,e),{redirect_url_enabled:!!(null==e?void 0:e.redirect_url),enable_trial:(null==e?void 0:e.trial_days)>0,enable_subscription_group:!!(null==e?void 0:e.paywall_group_id),space_ids:t(e.space_ids,e.space_group_ids),space_group_ids:null!=(i=e.space_group_ids)?i:[],currency_id:null!=(o=null==e||null==(r=e.currency)?void 0:r.id)?o:"",access_groups_enabled:null==e?void 0:e.access_groups_enabled,access_groups:(0,t2.tu)(null==e?void 0:e.access_group_sources),paywall_customization_attributes:t6({},re(null==e?void 0:e.paywall_customization))}):a}}},rr=(0,m.createContext)({onClose:S.noop});rr.displayName="PopoverPortalContext";var rn=function(){return(0,m.useContext)(rr)};function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ro=function(e){var t,r=e.subtitle,n=e.value,i=e.colors,o=e.onChange,a=e.pickerColorsTestId,l=(t=(0,m.useState)(n),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ri(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ri(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],d=rn().onClose;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex w-full flex-col gap-y-3 px-4","data-testid":"color-picker-form",children:[(0,s.jsx)(T.Z.LabelXs,{color:"text-default",children:r}),(0,s.jsx)("div",{className:"grid grid-cols-6 gap-2","data-testid":a,children:i.map(function(e){return(0,s.jsx)("button",{type:"button",className:(0,j.A)("h-8 w-8 rounded-md border",{"border-darkest border-2":c===e}),style:{backgroundColor:e},onClick:function(){return u(e)}},e)})})]}),(0,s.jsxs)("div",{className:"flex w-full flex-row justify-between px-4 pt-3","data-testid":"color-picker-form-footer",children:[(0,s.jsx)(T.Z.LabelSm,{color:"text-lightest",children:c}),(0,s.jsx)(K.z,{type:"button",onClick:function(){o(c),d()},variant:"circle",children:(0,y.t)("save")})]})]})},ra=r(75148),rs=function(){var e=rn().onClose;return(0,s.jsxs)("div",{className:"border-primary flex w-full items-center justify-between border-b p-3",children:[(0,s.jsx)(T.Z.BodyMd,{color:"text-dark",weight:"font-semibold",children:(0,y.t)("color_picker_v2.color_picker")}),(0,s.jsx)(ra.h,{name:"16-close",buttonSize:24,iconSize:16,ariaLabel:(0,y.t)("close"),onClick:e})]})},rl=r(84142),rc=r(73935),ru=r(35834),rd=r(86463);function rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rf(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rm=function(e){var t=e.children,r=e.color,n=e.dataTestId,i=e.popoverButtonClassName,o=rp((0,m.useState)(null),2),a=o[0],l=o[1],c=rp((0,m.useState)(null),2),u=c[0],d=c[1],f=(0,ru.D)(a,u,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),p=f.styles,b=f.attributes,h=r||"#000000";return(0,s.jsx)(rl.J,{as:"div",className:"relative flex",children:function(e){var r,o,a=e.open,c=e.close,u=document.getElementById(rd.BW);return(0,s.jsxs)(rr.Provider,{value:{open:a,onClose:c},children:[(0,s.jsx)(rl.J.Button,{ref:l,className:(0,j.A)("border-primary h-7 w-7 rounded-lg border",i),style:{backgroundColor:h},"data-testid":n}),(0,rc.createPortal)((0,s.jsx)(rl.J.Panel,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:d,style:p.popper},b.popper),o=o={className:"bg-primary border-primary z-[9999] flex w-[16.5rem] flex-col items-center justify-center gap-y-[1.063rem] rounded-lg border pb-4 shadow-2xl",children:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r)),null!=u?u:document.body)]})}})},rb=function(e){var t=e.dataTestId,r=e.pickerColorsTestId,n=e.value,i=e.subtitle,o=e.onChange,a=e.colors;return(0,s.jsxs)(rm,{color:n,dataTestId:t,children:[(0,s.jsx)(rs,{}),(0,s.jsx)(ro,{value:n,subtitle:i,onChange:o,colors:a,pickerColorsTestId:r})]})},rh=[tf.po,"builder.badges.fields"].join("."),ry=["#000000","#1F2937","#374151","#475569","#1E3A8A","#1E40AF","#1E293B","#064E3B","#581C87","#7C2D12","#3C2415","#451A03"],rv=["#F6F6F6","#F5F2ED","#F3F4F6","#FEF7F7","#F9EDE4","#FDF1F1","#FEF3E2","#EBF4FF","#ECFDF5","#F3F0FF","#E6FFFA","#F1F0EE"],rg=function(e){var t=e.keyFormId,r=e.name,n=(0,m.useMemo)(function(){return{label:[r,"label"].join("."),text_color:[r,"text_color"].join("."),background_color:[r,"background_color"].join("."),icon:[r,"icon"].join(".")}},[r]),i=(0,h.Gc)().control;return(0,s.jsxs)(tP,{dataTestId:"paywall-customization-badge-fields",children:[(0,s.jsx)(tR,{name:n.label,label:(0,y.t)([rh,"label"]),maxLength:30,errorMessage:(0,y.t)([rh,"errors.label_max_length"]),children:(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:n.label,translationRoot:rh,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:30,message:(0,y.t)([rh,"errors.label_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(d.l.Input,{prefix:(0,s.jsx)(d.l.EmojiPickerV3Wrapper,{name:n.icon,className:"!w-[3rem]"}),"data-testid":"badge-label-input"},t)})}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(tM.C,{label:(0,y.t)([rh,"text_color"])}),(0,s.jsx)(h.Qr,{name:n.text_color,control:i,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,s.jsx)(rb,{colors:ry,subtitle:(0,y.t)([rh,"text_color"]),onChange:r,value:n,dataTestId:"badge-text-color-picker",pickerColorsTestId:"badge-text-picker-colors"})}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(tM.C,{label:(0,y.t)([rh,"background_color"])}),(0,s.jsx)(h.Qr,{name:n.background_color,control:i,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,s.jsx)(rb,{colors:rv,subtitle:(0,y.t)([rh,"background_color"]),onChange:r,value:n,dataTestId:"badge-background-color-picker",pickerColorsTestId:"badge-background-picker-colors"})}})]})]})},r_=function(e){var t=e.onClick,r=e.disabled,n=e.label,i=e.dataTestId;return(0,s.jsx)("div",{className:"pl-6",children:(0,s.jsxs)(K.z,{disabled:r,type:"button",onClick:t,variant:"circle","data-testid":i,children:[(0,s.jsx)(ep.JO,{type:"20-plus-v2"}),n]})})},rx=function(e){var t=e.dataTestId,r=e.index,n=e.fields,i=e.hasReachedLimit,o=e.hasReachedMinimum,a=e.onRemoveClick,l=e.onDuplicateClick,c=e.children,u=e.title;return(0,s.jsxs)("div",{className:(0,j.A)("flex flex-col gap-y-2 px-6",{"pt-5":r>0&&r<n.length}),"data-testid":t,children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between","data-testid":"form-item-group-actions",children:[(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",children:u||(0,y.t)("item")}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(K.z,{type:"button",variant:"circle-plain",disabled:o,className:"hover:text-dark !hover:bg-primary !p-1",onClick:a,"data-testid":"form-item-group-remove-button",children:(0,s.jsx)(ep.JO,{type:"16-trash-bin",viewBox:"0 0 16 16",className:"!h-4 !w-4"})}),(0,s.jsx)(K.z,{disabled:i,variant:"circle-plain",className:"hover:text-dark !hover:bg-primary !p-1",type:"button",onClick:l,"data-testid":"form-item-group-duplicate-button",children:(0,s.jsx)(ep.JO,{type:"16-copy",viewBox:"0 0 16 16",className:"!h-4 !w-4"})})]})]}),c]})},rj=function(){var e=(0,h.Gc)(),t=e.watch,r=e.getValues,n=th().badgePropertiesForm||{fields:[],append:function(){},remove:function(){}},i=n.fields,o=n.append,a=n.remove,l=!!t("paywall_customization_attributes.badge_properties.enabled"),c=i.length>=5,u=i.length<=1;return(0,s.jsxs)(tw,{titleLocale:(0,y.t)([tf.po,"builder.badges.show_badges"]),toggleName:"paywall_customization_attributes.badge_properties.enabled",toggleDataTestId:"paywall-customization-badge-toggle",containerDataTestId:"paywall-customization-badge-container",children:[(0,s.jsx)(tO,{"data-testid":"badge-properties-form-group",isEnabled:l,children:i.map(function(e,t){var n="paywall_customization_attributes.badge_properties.badges.".concat(t);return(0,s.jsx)(rx,{index:t,fields:i,hasReachedLimit:c,hasReachedMinimum:u,onDuplicateClick:function(){return o(r(n))},onRemoveClick:function(){return a(t)},title:(0,y.t)("badge"),dataTestId:"badge-form-item-group",children:(0,s.jsx)(rg,{keyFormId:e.id,name:n,disabled:!l})},e.id)})}),(0,s.jsx)(r_,{label:(0,y.t)([tf.po,"builder.badges.add_badge"]),onClick:function(){return o(t8)},disabled:c||!l,dataTestId:"add-badge-button"})]})},rw="!mt-0 !py-0",rO=[tf.po,"builder.benefits.fields"].join("."),rS=function(e){var t=e.keyFormId,r=e.name,n=(0,m.useMemo)(function(){return{title:[r,"title"].join("."),description:[r,"description"].join("."),icon:[r,"icon"].join(".")}},[r]);return(0,s.jsxs)(tP,{dataTestId:"paywall-customization-benefit-fields",children:[(0,s.jsx)(tR,{name:n.title,label:(0,y.t)([rO,"title"]),maxLength:50,errorMessage:(0,y.t)([rO,"errors.title_max_length"]),children:(0,s.jsx)(d.l.Item,{className:rw,name:n.title,translationRoot:rO,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:50,message:(0,y.t)([rO,"errors.title_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(d.l.Input,{prefix:(0,s.jsx)(d.l.EmojiPickerV3Wrapper,{name:n.icon,className:"!w-[3rem]"}),"data-testid":"benefit-title-input"},t)})}),(0,s.jsx)(tR,{name:n.description,label:(0,y.t)([rO,"description"]),maxLength:280,errorMessage:(0,y.t)([rO,"errors.description_max_length"]),children:(0,s.jsx)(d.l.Item,{className:rw,name:n.description,translationRoot:rO,placeholder:(0,y.t)([rO,"description_placeholder"]),hideBorder:!0,hideLabel:!0,fullWidth:!1,hideDescription:!0,rules:{maxLength:{value:280,message:(0,y.t)([rO,"errors.description_max_length"])}},children:(0,s.jsx)(d.l.TextArea,{name:n.description,"data-testid":"benefit-description-input"},t)})})]})},rk="builder.benefits.fields",rP=function(e){var t=e.className;return(0,s.jsx)(tR,{name:"paywall_customization_attributes.benefit_properties.title",label:(0,y.t)("title"),maxLength:50,errorMessage:(0,y.t)([tf.po,rk,"errors","title_max_length"]),className:t,children:(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"paywall_customization_attributes.benefit_properties.title",hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:50,message:(0,y.t)([tf.po,rk,"errors","title_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(d.l.Input,{})})})},rC=function(){var e=(0,h.Gc)(),t=e.watch,r=e.getValues,n=th().benefitPropertiesForm||{fields:[],append:function(){},remove:function(){}},i=n.fields,o=n.append,a=n.remove,l=!!t("paywall_customization_attributes.benefit_properties.enabled"),c=i.length>=10,u=i.length<=1;return(0,s.jsxs)(tw,{titleLocale:(0,y.t)([tf.po,"builder.benefits.show_benefits"]),toggleName:"paywall_customization_attributes.benefit_properties.enabled",containerDataTestId:"paywall-customization-benefit-container",toggleDataTestId:"paywall-customization-benefit-toggle",children:[(0,s.jsx)(rP,{className:"border-primary border-b px-6 pb-5"}),(0,s.jsx)(tO,{isEnabled:l,children:i.map(function(e,t){var n="paywall_customization_attributes.benefit_properties.benefits.".concat(t);return(0,s.jsx)(rx,{index:t,fields:i,hasReachedLimit:c,hasReachedMinimum:u,onDuplicateClick:function(){return o(r(n))},onRemoveClick:function(){return a(t)},title:(0,y.t)("item"),dataTestId:"benefit-form-item-group",children:(0,s.jsx)(rS,{keyFormId:e.id,name:n})},e.id)})}),(0,s.jsx)(r_,{label:(0,y.t)([tf.po,"builder.benefits.add_item"]),onClick:function(){return o(t9)},disabled:c||!l,dataTestId:"add-benefit-button"})]})},rN=r(67142),rA=function(e){var t=e.value,r=e.processing,n=e.imageUrl,i=e.handleChangeCoverClick,o=e.handleDelete,a=e.testimonialName,l="w-5 h-5";return t||r?r?(0,s.jsx)("div",{className:(0,j.A)(l,"bg-secondary rounded-full")}):(0,s.jsx)(K.z,{type:"button",variant:"circle-plain",onClick:o,className:(0,j.A)("hover:text-dark !hover:bg-primary !p-0",l),"data-testid":"cover-image-delete",children:(0,s.jsx)(rN.sJ,{name:a,isFullRounded:!0,size:"6",src:n})}):(0,s.jsx)(K.z,{className:(0,j.A)(l,"!p-0"),type:"button",variant:"circle-plain",onClick:i,"data-testid":"cover-image-add",children:(0,s.jsx)(rN.sJ,{name:a,isFullRounded:!0,size:"6"})})},rI=function(e){var t=e.signedIdField,r=e.urlField,n=e.testimonialName,i=(0,h.Gc)().setValue;return(0,s.jsx)(tK.D,{showAddCoverBtn:!0,changeImageText:(0,y.t)("replace"),name:t,hideUnsplash:!0,hideEmbedUrl:!0,aspectRatio:tJ.pI.PAYWALL_AVATAR_IMAGE,renderer:function(e){var t,r;return(0,s.jsx)(rA,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={testimonialName:n||(0,y.t)("random")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},onDelete:function(){i(t,null),i(r,null)},title:(0,y.t)([tf.po,"builder.testimonials.fields.avatar_image_title"]),customAspectRatioHelpText:(0,y.t)([tf.po,"builder.testimonials.fields.avatar_image_recomendation_size"])})},rE=[tf.po,"builder.testimonials.fields"].join("."),rT="!mt-0 !py-0",rL=function(e){var t=e.name,r=e.disabled,n=e.keyFormId,i=(0,m.useMemo)(function(){return{quote:[t,"quote"].join("."),name:[t,"name"].join("."),avatar_image:[t,"avatar_image"].join("."),avatar_image_url:[t,"avatar_image_url"].join("."),headline:[t,"headline"].join("."),display_style_type:[t,"display_style.type"].join("."),display_style_color:[t,"display_style.color"].join(".")}},[t]),o=(0,h.Gc)(),a=o.watch,l=o.getValues,c=o.setValue,u=a(i.display_style_type),f=(0,m.useRef)(l(i.display_style_type));(0,m.useEffect)(function(){f.current!==u&&c(i.display_style_color,u===tf.y_.STARS?tf.F_.STARS:tf.F_.QUOTATION_MARK),f.current=u},[u]);var p=a(i.name)||"",b=a(i.quote)||"",v=a(i.headline)||"",g=function(){return""!==p||""!==b||""!==v||(0,y.t)([rE,"errors.fulfill_one_field_at_least"])};return(0,s.jsxs)(tP,{dataTestId:"paywall-customization-testimonial-fields",children:[(0,s.jsx)(tR,{name:i.quote,label:(0,y.t)([rE,"quote"]),maxLength:500,errorMessage:(0,y.t)([rE,"errors.quote_max_length"]),children:(0,s.jsx)(d.l.Item,{className:rT,name:i.quote,translationRoot:rE,hidePlaceholder:!0,hideBorder:!0,hideLabel:!0,fullWidth:!1,hideDescription:!0,rules:{validate:g,maxLength:{value:500,message:(0,y.t)([rE,"errors.quote_max_length"])}},children:(0,s.jsx)(d.l.TextArea,{name:i.quote,"data-testid":"testimonial-quote-input"},n)})}),(0,s.jsx)(d.l.Item,{className:rT,name:i.name,labelClassName:"!font-medium",label:(0,y.t)([rE,"image_and_name"]),translationRoot:rE,hidePlaceholder:!0,hideBorder:!0,fullWidth:!1,hideDescription:!0,rules:{validate:g},children:(0,s.jsx)(d.l.Input,{prefix:(0,s.jsx)(rI,{signedIdField:i.avatar_image,urlField:i.avatar_image_url,testimonialName:p}),prefixWrapperClassName:"px-3","data-testid":"testimonial-name-input"},n)}),(0,s.jsx)(d.l.Item,{className:rT,name:i.headline,labelClassName:"!font-medium",label:(0,y.t)([rE,"headline"]),translationRoot:rE,hidePlaceholder:!0,hideBorder:!0,fullWidth:!1,hideDescription:!0,rules:{validate:g},children:(0,s.jsx)(d.l.Input,{"data-testid":"testimonial-headline-input"},n)}),(0,s.jsx)(d.l.Item,{className:rT,labelClassName:"!font-medium",label:(0,y.t)([rE,"display_style"]),translationRoot:rE,hideBorder:!0,fullWidth:!1,hideDescription:!0,hidePlaceholder:!0,children:(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-3",children:[(0,s.jsx)(d.l.SelectNative,{name:i.display_style_type,options:[{label:(0,y.t)([rE,"display_style_options.stars"]),value:tf.y_.STARS},{label:(0,y.t)([rE,"display_style_options.quotation_mark"]),value:tf.y_.QUOTATION_MARK}],disabled:r,"data-testid":"testimonial-display-style-select"},n),(0,s.jsx)("div",{children:(0,s.jsx)(d.l.ColorPickerV2,{name:i.display_style_color},n)})]})})]})},rD=function(){var e=(0,h.Gc)(),t=e.watch,r=e.getValues,n=th().testimonialPropertiesForm||{fields:[],append:function(){},remove:function(){}},i=n.fields,o=n.append,a=n.remove,l=!!t("paywall_customization_attributes.testimonial_properties.enabled"),c=i.length>=10,u=i.length<=1;return(0,s.jsxs)(tw,{titleLocale:(0,y.t)([tf.po,"builder.testimonials.show_testimonials"]),toggleName:"paywall_customization_attributes.testimonial_properties.enabled",toggleDataTestId:"paywall-customization-testimonial-toggle",containerDataTestId:"paywall-customization-testimonial-container",children:[(0,s.jsx)(tO,{isEnabled:l,children:i.map(function(e,t){var n="paywall_customization_attributes.testimonial_properties.testimonials.".concat(t);return(0,s.jsx)(rx,{index:t,fields:i,hasReachedLimit:c,hasReachedMinimum:u,onDuplicateClick:function(){return o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r(n)))},onRemoveClick:function(){return a(t)},dataTestId:"testimonial-form-item-group",children:(0,s.jsx)(rL,{keyFormId:e.id,name:n,disabled:!l})},e.id)})}),(0,s.jsx)(r_,{label:(0,y.t)([tf.po,"builder.testimonials.add_item"]),onClick:function(){return o(t5)},disabled:c||!l,dataTestId:"add-testimonial-button"})]})};function rM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rB=function(){var e,t,r=th(),n=r.goBack,i=r.history,o=r.currentSidebar,a=(e=(rR(t={},tf.rl.DEFAULT,[t1,(0,y.t)([tf.po,"builder.default.title"])]),rR(t,tf.rl.TESTIMONIALS,[rD,(0,y.t)([tf.po,"builder.testimonials.title"])]),rR(t,tf.rl.BADGES,[rj,(0,y.t)([tf.po,"builder.badges.title"])]),rR(t,tf.rl.BENEFITS,[rC,(0,y.t)([tf.po,"builder.benefits.title"])]),rR(t,tf.rl.COUNTDOWN,[tW,(0,y.t)([tf.po,"builder.countdown.title"])]),t)[o]||[m.Fragment,""],function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rM(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rM(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1];return(0,s.jsxs)(tv,{className:"flex w-[328px] flex-col",children:[(0,s.jsxs)(tx,{className:"gap-x-3.5",children:[i.length>1&&(0,s.jsx)(K.z,{onClick:n,variant:"circle-text",className:"text-dark",children:(0,s.jsx)(ep.JO,{type:"24-arrow-left"})}),(0,s.jsx)(T.Z.LabelMd,{weight:"semibold",children:c})]}),(0,s.jsx)(l,{})]})},rF=r(15918),rz=r(99256),rU=r(28311),rZ=function(e){var t=e.children;return(0,s.jsx)(e7.fD.Provider,{theme:rF.D.defaultTheme,block:rU.d,blockMapping:rz.V,canvasSize:"desktop",children:(0,s.jsx)(e7.fD.Shell,{children:t})})},rG=function(){return(0,s.jsx)(ty,{children:(0,s.jsx)(w,{variants:"full-width",className:"h-full w-full",children:(0,s.jsxs)(rZ,{children:[(0,s.jsx)(tv,{className:"flex w-[328px] flex-col gap-y-5",children:(0,s.jsx)(rB,{})}),(0,s.jsx)(td,{})]})})})},rq=r(31304),rV=r.n(rq),rH=function(e){return rV()(null!=e?e:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}).split("?coupon_code=")[0]},rW=function(e,t){return!t.checkout_path&&rV()(null!=e?e:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!1}).split("?coupon_code=")[1]||""};function rQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||rK(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rK(e,t){if(e){if("string"==typeof e)return rQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rQ(e,t)}}var r$=function(){var e=(0,h.Gc)(),t=e.formState,r=e.control,n=e.setValue,i=e.getValues,o=e.watch,a=(0,h.qo)({control:r,name:"checkout_path"}),l=o("id"),c=(0,ti.pI)({paywallId:l||"",enabled:!0}).paywallCouponsListQuery.data,u=rJ((0,m.useState)([]),2),f=u[0],p=u[1],b=rW(a,t.dirtyFields),v=rJ((0,m.useState)(""!==b),2),g=v[0],_=v[1];return(0,m.useEffect)(function(){c&&(p(c.map(function(e){return{label:e.code,value:e.code}})),b&&!t.dirtyFields.coupon_selector&&n("coupon_selector",b))},[c,b,t.dirtyFields.coupon_selector,n]),(0,s.jsxs)("div",{className:"flex flex-col gap-y-2.5",children:[(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",labelClassName:"!font-normal",name:"auto_apply_coupon",translationRoot:"settings.paywalls.modal.tabs.details",fullWidth:!0,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.details.auto_apply_coupon_tooltip"),hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(d.l.ToggleSwitch,{"data-testid":"auto_apply_coupon",name:"auto_apply_coupon_toggle",variant:"small",onToggleChange:function(e){_(e),e||(n("coupon_selector",""),n("checkout_path",rH(a)))},checked:g})}),g&&(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,name:"coupon_selector",translationRoot:"settings.paywalls.modal.tabs.details",children:(0,s.jsx)(d.l.SelectNative,{name:"coupon_selector",options:[{label:(0,y.t)("settings.paywalls.modal.tabs.details.auto_apply_coupon_placeholder"),value:""}].concat(function(e){if(Array.isArray(e))return rQ(e)}(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||rK(f)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),value:i("coupon_selector")})})]})},rX=r(34755),rY=r(46051),r0=function(){var e=(0,h.Gc)(),t=e.control,r=e.getValues,n=e.setValue,i=e.setFocus,o=e.formState,a=(0,h.qo)({control:t,name:"display_name"}),s=(0,h.qo)({control:t,name:"coupon_selector"}),l=(0,h.qo)({control:t,name:"checkout_path"});return(0,m.useEffect)(function(){n("checkout_path",rV()(null!=l?l:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}))},[l]),(0,m.useEffect)(function(){(""===l||o.dirtyFields.display_name&&!o.dirtyFields.checkout_path)&&n("checkout_path",a)},[a]),(0,m.useEffect)(function(){var e=rH(l),t=r("coupon_selector"),i=rW(l,o.dirtyFields),a=t?"?coupon_code=".concat(encodeURIComponent(t)):i?"?coupon_code=".concat(encodeURIComponent(i)):"",s=i&&!t;n("checkout_path","".concat(e).concat(a),{shouldDirty:s})},[o.dirtyFields.checkout_path,r,n,s,l]),(0,m.useEffect)(function(){l&&!l.includes("coupon_code=")&&n("coupon_selector","")},[l,n]),{copyWithPrefix:function(){(0,rY.p0)(r("checkout_path"),"#paywalls-list"),i("checkout_path",{shouldSelect:!0})}}},r1=function(e){var t=e.requiresCurrency,r=e.canChangeCurrency,n=r0().copyWithPrefix;return(0,s.jsxs)(w,{children:[(0,s.jsx)(O.G,{title:(0,y.t)("settings.paywalls.modal.tabs.details.title")}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"display_name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.details.display_name_tooltip"),hideDescription:!0,fullWidth:!1,rules:{required:(0,y.t)("settings.paywalls.modal.tabs.details.alerts.display_name_is_required"),maxLength:255},hidePlaceholder:!0,children:(0,s.jsx)(d.l.Input,{})}),(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.details.name_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:255},children:(0,s.jsx)(d.l.Input,{})})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"subtitle",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.details.subtitle_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:70},children:(0,s.jsx)(d.l.Input,{maxLength:"70"})}),t&&(0,s.jsx)(rX.H,{formItemClassName:"!mt-0 !py-0",formItemName:"currency_id",formItemTranslationRoot:"settings.paywalls.modal.tabs.details",formItemRules:{required:(0,y.t)("settings.paywalls.modal.tabs.details.alerts.currency_is_required")},formItemTooltipText:(0,y.t)("settings.paywalls.modal.tabs.details.currency_id_tooltip"),disabled:!r})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",labelWrapperClassName:"inline-flex justify-between",name:"checkout_path",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:(0,y.t)("settings.paywalls.modal.tabs.details.alerts.checkout_path_is_required"),maxLength:255},description:(0,s.jsx)("button",{type:"button",onClick:n,className:"text-lightest hover:text-default",children:(0,y.t)("copy_link")}),variant:"checkout-path",children:(0,s.jsx)(d.l.Input,{prefix:(0,s.jsx)("p",{className:"p-3",children:(0,rY.Sr)()}),prefixWrapperClassName:"sm:whitespace-normal md:whitespace-nowrap"})}),(0,s.jsx)(r$,{})]}),(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"description",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hideDescription:!0,children:(0,s.jsx)(d.l.TextArea,{name:"description"})})]})},r2=function(e){var t=e.className,r=e.children;return(0,s.jsx)("div",{className:(0,j.A)("flex flex-col gap-y-6",t),children:r})},r3={invalid:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.alerts.redirect_url_is_invalid")},r6=function(e){var t=e.isDisabled;return t?null:(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"redirect_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideLabel:!0,hideDescription:!0,placeholder:window.location.origin,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.redirect_url_tooltip"),rules:{validate:function(e){return""===e||(0,tF.K)(e)||r3.invalid},maxLength:255},children:(0,s.jsx)(d.l.Input,{disabled:t})})},r4=function(){return(0,s.jsx)(d.l.Item,{name:"redirect_url_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",className:"!mt-0 !py-0",inline:!0,hideBorder:!0,hideDescription:!0,labelClassName:"text-xl tightest font-semibold",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.redirect_url_tooltip"),children:(0,s.jsx)(d.l.ToggleSwitch,{variant:"large",name:"redirect_url_enabled"})})},r5=function(){return(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"thank_you_page_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.thank_you_page_enabled_tooltip"),hideDescription:!0,hideBorder:!0,labelClassName:"text-xl tightest font-semibold",children:(0,s.jsx)(d.l.ToggleSwitch,{name:"thank_you_page_enabled",variant:"large"})})},r8=r(5116);function r9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var r7=function(){return"trix-editor-".concat(Math.floor(1e6*Math.random()))},ne=function(e){var t,r=e.isDisabled,n=(t=(0,m.useState)(r7()),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return r9(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r9(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,h.Gc)().formState.isSubmitSuccessful;return(0,m.useEffect)(function(){o(r7())},[a]),(0,s.jsxs)("div",{className:(0,j.A)("trix-v2",{"pointer-events-none cursor-not-allowed":r}),children:[(0,s.jsx)("label",{children:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.body")}),(0,s.jsx)(r8.O,{id:"post_purchase_email_message_input",name:"post_purchase_email_message",is_private_space:!1,preventAccidentalLeave:!1,type:"textarea",featureFlags:{embeds:!1,videoUpload:!1,fileUploadLink:!1}})]},"".concat(i))},nt=function(e){var t=e.isDisabled;return(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_meta.button_label",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,children:(0,s.jsx)(d.l.Input,{disabled:t})})},nr={invalid:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.alerts.custom_button_url_is_invalid")},nn=function(e){var t=e.isDisabled;return(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_meta.button_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,rules:{validate:function(e){return""===e||(0,tF.K)(e)||nr.invalid}},children:(0,s.jsx)(d.l.Input,{disabled:t})})},ni=function(){return(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.post_purchase_email_enabled_tooltip"),hideDescription:!0,hideBorder:!0,labelClassName:"text-xl tightest font-semibold",children:(0,s.jsx)(d.l.ToggleSwitch,{variant:"large",name:"post_purchase_email_enabled"})})},no=function(e){var t=e.isDisabled;return(0,s.jsx)(d.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_meta.subject",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,children:(0,s.jsx)(d.l.Input,{disabled:t})})},na=function(e){var t=e.setActiveTab;return e.hide?null:(0,s.jsxs)("div",{className:"bg-tertiary flex items-start rounded-md p-4",children:[(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)(ep.JO,{type:"20-lightning",size:20})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.title")}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(T.Z.BodySm,{color:"text-light",children:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.description")})}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(K.z,{small:!0,variant:"secondary",onClick:function(){t(p.eA.WORKFLOWS_TAB)},children:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.button")})})]})]})};function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nl=function(e){var t,r=e.shouldDisplayWorkflowsTab,n=e.setActiveTab,i=(0,c.wh)().currentCommunitySettings,o=(0,h.Gc)(),a=o.watch,l=o.setValue,u=(t=a(["post_purchase_email_enabled","redirect_url_enabled"]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ns(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ns(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],p=r&&(null==i?void 0:i.upgrade_flows_for_workflows_paywalls_enabled);return(0,m.useEffect)(function(){f||l("redirect_url","")},[f]),(0,s.jsxs)(w,{children:[(0,s.jsx)(O.G,{title:(0,y.t)("settings.paywalls.modal.tabs.post_purchase.title")}),(0,s.jsxs)(r2,{children:[(0,s.jsx)(na,{setActiveTab:n,hide:!p}),(0,s.jsx)(r5,{}),(0,s.jsxs)(r2,{className:"gap-y-2",children:[(0,s.jsx)(r4,{}),(0,s.jsx)(r6,{isDisabled:!f})]}),(0,s.jsx)(ni,{})]}),(0,s.jsxs)(r2,{className:(0,j.A)({"opacity-50":!d}),children:[(0,s.jsx)(no,{isDisabled:!d}),(0,s.jsx)(ne,{isDisabled:!d}),(0,s.jsx)(nt,{isDisabled:!d}),(0,s.jsx)(nn,{isDisabled:!d})]})]})},nc=r(24869),nu=r(55158),nd=r(11944),nf=r(72806);function np(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return np(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return np(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ny=(0,m.createContext)({currency:{id:1,code:"usd",direction:to.RV.ltr,smallest_unit:to.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},addPrice:S.noop,removePrice:S.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:S.noop,hideAddPriceModal:S.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1},billingFrequencyOptions:function(){return[]},disableAddPriceButton:function(){return!1}});ny.displayName="MobilePricingTabContext";var nv=function(e){var t,r=e.currency,n=e.children,i=(0,c.wh)().currentCommunitySettings,o=null==i||null==(t=i.price_build_options)?void 0:t.mobile,a=(0,h.Gc)(),l=a.setValue,u=a.watch,d=(0,m.useCallback)(function(){return u("mobile_price_packages_attributes")},[u]),f=(0,m.useCallback)(function(){return d().filter(function(e){return!e._destroy})},[d]),p=f().length>0,b=(0,m.useCallback)(function(){return!!f().find(function(e){return(0,ta.ZN)(e.price_properties)})},[f]),y=(0,m.useCallback)(function(){return!!f().find(function(e){return(0,ta.T)(e.price_properties)})},[f]),v=(0,m.useCallback)(function(){var e=f();return(0,ta.fe)(e).length>0},[f]),g=(0,h.Dq)({name:"mobile_price_packages_attributes",rules:{minLength:1}}),_=g.append,x=g.update,j=g.remove,w=(0,m.useCallback)(function(){return o?Object.keys(o).filter(function(e){return e!==nf.E4.installments}).filter(function(e){return e!==nf.E4.onetime||!b()&&e===nf.E4.onetime}).map(function(e){return{value:e,label:o[e].name}}):[]},[o,b]),O=(0,m.useCallback)(function(){return o?Object.entries(o.subscription.frequencies).filter(function(e){var t=nh(e,2),r=(t[0],t[1]);return!f().find(function(e){return e.price_properties.interval===r.interval&&e.price_properties.interval_count===r.interval_count})}).map(function(e){var t=nh(e,2);return{value:t[0],label:t[1].as_adjective}}):[]},[o,u,b()]),S=(0,m.useCallback)(function(){return w()[0]},[w]),k=(0,m.useCallback)(function(e){_(nb(nm({},e),{tmp_id:"tmp_".concat(Date.now())}))},[r,_]),P=(0,m.useCallback)(function(e){var t=d(),r=t.findIndex(function(t){return e.id?t.id===e.id:t.tmp_id===e.tmp_id});if(r>-1){var n=t[r];n.id?x(r,nb(nm({},n),{_destroy:!0})):j(r)}},[d,x,j]),C=(0,m.useCallback)(function(){return!!u("isShowingAddPriceModal")},[u]),N=(0,m.useCallback)(function(){l("isShowingAddPriceModal",!0)},[l]),A=(0,m.useCallback)(function(){l("isShowingAddPriceModal",!1)},[l]),I=(0,m.useCallback)(function(){return 0===O().length&&!w().find(function(e){return e.value===nf.E4.onetime})},[O,w,nf.E4]);return(0,s.jsx)(ny.Provider,{value:{currency:r,priceBuildOptions:o||{},priceTypeOptions:w,defaultPriceTypeOption:S,getPrices:d,getActivePrices:f,hasRecurringPrices:y,addPrice:k,removePrice:P,isShowingAddPriceModal:C,showAddPriceModal:N,hideAddPriceModal:A,hasActivePrices:p,hasSubscriptionPrices:v,billingFrequencyOptions:O,disableAddPriceButton:I},children:n})},ng=function(){return(0,m.useContext)(ny)},n_=function(e){var t=e.name,r=e.labelKey,n=e.required,i=void 0!==n&&n,o=e.options,a=e.tooltipText,l=ng().priceTypeOptions;return(0,s.jsx)("div",{className:"grow leading-5",children:(0,s.jsx)(eL.N,{name:t,rules:{required:i},label:(0,s.jsxs)(s.Fragment,{children:[(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),i&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),options:null!=o?o:l(),tooltipText:a})})},nx=r(18943),nj=function(e){var t=e.children;return(0,s.jsxs)(nx.v,{className:"flex flex-row gap-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)(ep.JO,{type:"information-outline",size:24})}),(0,s.jsx)(T.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},nw=r(2056),nO=r(92074),nS=function(e){var t=e.watch;return(0,nO.LG)(t("amount"))>0&&!(0,S.isEmpty)(t("billing_frequency"))},nk=function(e){var t=e.watch;return(0,nO.LG)(t("amount"))>0&&!(0,S.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=2},nP=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.installments&&!r&&!n},stateValidator:nk,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,nO.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return["installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:o-1,installment_amount:(0,nw.I)(r,a),total_amount:(0,nw.I)(r,i)}]}},{matcher:function(e){return e.priceType===nf.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,nO.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return["onetime",{total_amount:(0,nw.I)(t,(0,nO.LG)(r("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.subscription&&!r&&!n},stateValidator:nS,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.installments&&!r&&n},stateValidator:nk,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,nO.LG)(i("amount")),a=parseInt(i("installments_count")),s=Math.round(o/a);return["trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,nw.I)(r,s),total_amount:(0,nw.I)(r,o),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.subscription&&!r&&n},stateValidator:nS,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0}),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.installments&&r&&n&&!i},stateValidator:nk,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,nO.LG)(i("amount")),a=(0,nO.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["trial_then_upfront_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,nw.I)(r,l),total_amount:(0,nw.I)(r,o),upfront_payment_amount:(0,nw.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.subscription&&r&&n&&!i},stateValidator:nS,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_upfront_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(i("amount"))),upfront_payment_amount:(0,nw.I)(r,(0,nO.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.installments&&r&&!n},stateValidator:nk,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,nO.LG)(n("amount")),o=(0,nO.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a);return["upfront_then_installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,nw.I)(r,s),total_amount:(0,nw.I)(r,i),upfront_payment_amount:(0,nw.I)(r,o)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.subscription&&r&&!n},stateValidator:nS,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["upfront_then_subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(n("amount"))),upfront_payment_amount:(0,nw.I)(r,(0,nO.LG)(n("upfront_payment_amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.installments&&r&&n&&i},stateValidator:nk,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,nO.LG)(i("amount")),a=(0,nO.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["upfront_then_trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,nw.I)(r,l),total_amount:(0,nw.I)(r,o),upfront_payment_amount:(0,nw.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.subscription&&r&&n&&i},stateValidator:nS,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["upfront_then_trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(i("amount"))),upfront_payment_amount:(0,nw.I)(r,(0,nO.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}}];function nC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nN=function(){var e,t,r,n=ng(),i=n.currency,o=n.priceBuildOptions,a=(0,h.Gc)().watch,l=!!a("enable_trial"),c=a("trial_type"),u=null!=(r=null==(t=o.subscription.trial_options[c])?void 0:t.trial_days)?r:0,d=a("price_type"),f=o[d],p=!!a("upfront_payment_enabled"),m=!!a("trial_requires_upfront_payment"),b=nP.find(function(e){return(0,e.matcher)({priceType:d,hasUpfrontPayment:p,hasTrialPeriod:l,isUpfrontPaymentRequiredForTrial:m})});if(!b||!(0,b.stateValidator)({watch:a}))return null;var v=(e=(0,b.messagePropsResolver)({buildOptions:f,currency:i,trialPeriodDays:u,watch:a}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return nC(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nC(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],_=v[1];return(0,s.jsx)(nj,{children:(0,y.t)(["settings.paywalls.modal.tabs.pricing.add_price_modal.notice",g],_)})},nA=r(79650),nI=r(94184),nE=r.n(nI),nT=function(e){var t,r,n=e.name,i=e.labelKey,o=e.children,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","labelKey","children"]),l=(0,h.Gc)().formState.errors[n];return(0,s.jsx)(d.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={name:n,className:nE()({"border-red-500":l},"!m-0 grow !p-0"),label:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(i||n)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},nL=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=ng().currency,o=(0,nO.Bj)(i,{amountInCents:!0}),a=(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,nw.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,nw.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,s.jsx)(nT,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,nO.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,s.jsx)(nA.a,{currency:i})})},nD=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=e.tooltipText;return(0,s.jsx)(nT,{name:t,labelKey:r,placeholder:void 0===n?"":n,tooltipText:i,rules:{required:!0},children:(0,s.jsx)(d.l.Input,{})})},nM="settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text",nR=function(){var e=(0,ng().billingFrequencyOptions)();return(0,s.jsx)(n_,{name:"billing_frequency",options:e,required:!0,tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text.billing_frequency")})},nB="settings.paywalls.modal.tabs.pricing.add_price_modal",nF=function(){var e=(0,h.Gc)(),t=e.watch,r=e.setValue,n=ng().priceBuildOptions,i=t("enable_trial"),o=t("trial_type");(0,m.useEffect)(function(){i||(r("trial_type",null),r("trial_days",0))},[i,o]);var a=Object.keys(n.subscription.trial_options).map(function(e){return{label:(0,y.t)([nB,"trial_options",e]),value:e}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",children:(0,s.jsx)(d.l.ToggleSwitch,{name:"enable_trial",variant:"small",value:"false"})}),i&&(0,s.jsx)(eL.N,{name:"trial_type",rules:{required:!0},label:(0,s.jsxs)(s.Fragment,{children:[(0,y.t)([nB,"field_labels.trial_options"]),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),options:a})]})},nz="settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text";function nU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nZ=(nU(n={},nf.E4.onetime,function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)(nD,{name:"in_app_apple_processor_id",tooltipText:(0,y.t)([nM,"in_app_apple_processor_id"])}),(0,s.jsx)(nD,{name:"in_app_google_processor_id",tooltipText:(0,y.t)([nM,"in_app_apple_processor_id"])})]}),(0,s.jsx)(nL,{name:"amount",labelKey:"price"})]})}),nU(n,nf.E4.subscription,function(){return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)(nD,{name:"subscription_apple_processor_id",tooltipText:(0,y.t)([nz,"subscription_apple_processor_id"])}),(0,s.jsx)(nD,{name:"subscription_google_processor_id",tooltipText:(0,y.t)([nz,"subscription_google_processor_id"])})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(nR,{})}),(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(nL,{name:"amount",labelKey:"recurring_price"})})]}),(0,s.jsx)(nF,{})]})}),n),nG=function(){var e=nZ[(0,(0,h.Gc)().watch)("price_type")];return e?(0,s.jsx)(e,{}):null},nq=function(){var e=ng(),t=e.priceBuildOptions,r=e.addPrice,n=e.hideAddPriceModal,i=e.currency,o=(0,h.Gc)().handleSubmit;return{onConfirm:(0,m.useCallback)(function(){o(function(e){var o,a,s=e.price_type,l=(0,nO.LG)(e.amount);if(e.billing_frequency){var c=t[e.price_type].frequencies[e.billing_frequency];c&&(o=c.interval,a=c.interval_count)}var u=null==e?void 0:e.enable_trial,d=null==e?void 0:e.trial_type,f=(null==e?void 0:e.in_app_google_processor_id)||(null==e?void 0:e.subscription_google_processor_id),p=(null==e?void 0:e.in_app_apple_processor_id)||(null==e?void 0:e.subscription_apple_processor_id),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({currency_id:i.id,price_type:s,amount:l,interval:o,interval_count:a,installments_count:0,upfront_payment_amount:0,trial_requires_upfront_payment:!1,platform_type:e,processor_id:r},u?t.subscription.trial_options[d]:{})};r({status:"pending",price_properties:m(),prices_attributes:[m("google",f),m("apple",p)]}),n()})().catch(function(e){return console.error("Error adding price",e)})},[t,r,n,o]),hideAddPriceModal:n}},nV=function(){var e=nq(),t=e.onConfirm,r=e.hideAddPriceModal;return(0,s.jsx)(M.c,{isOpen:!0,title:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title_mobile"),confirmText:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:t,onClose:r,onCancel:r,size:"lg",dataTestId:"save-paywall-price-mobile",confirmVariant:"circle",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(n_,{name:"price_type",labelKey:"payment_type"}),(0,s.jsx)(nG,{}),(0,s.jsx)(nN,{})]})})},nH=function(){var e=(0,ng().defaultPriceTypeOption)();return(0,s.jsx)(d.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:S.noop,children:(0,s.jsx)(nV,{})})},nW=r(34062),nQ=function(e){var t=e.variant,r=ng(),n=r.showAddPriceModal,i=(0,r.disableAddPriceButton)();return(0,s.jsx)(K.z,{type:"button",variant:t,onClick:n,className:"whitespace-nowrap",disabled:i,large:!0,children:(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",color:"primary"===t?"text-secondary":"text-primary",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},nJ=r(35149),nK="settings.paywalls.modal_remove_price_confirmation",n$=l.gk.create(function(e){var t=e.action,r=e.spaces,n=(0,l.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(M.c,{isOpen:n.visible,title:(0,y.t)([nK,"title"]),onClose:i,cancelText:(0,y.t)(["cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,y.t)(["confirm"]),children:(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([nK,"description"],{count:r.length,space_names:r.map(function(e){return e.name}).join(", ")})})})}),nX=function(e){var t=e.row.original,r=(0,l.dd)(n$).show,n=(0,c.nT)().records,i=(0,Q.UV)().contentPortalElement,o=ng(),a=o.getPrices,u=o.removePrice,d=1===a().length;if(d)return null;var f=function(e){var r,n,i,o=null==(r=e.lock_screen_blocks)?void 0:r.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});return!!(null==o||null==(i=o.data)||null==(n=i.paywalls)?void 0:n.find(function(e){var r,n;return(null==t?void 0:t.id)&&((null==e||null==(r=e.web_paywall_price)?void 0:r.id)===(null==t?void 0:t.id)||(null==e||null==(n=e.mobile_paywall_price)?void 0:n.id)===(null==t?void 0:t.id))}))};return(0,s.jsx)(nW.w.Actions,{contentPortalElement:null!=i?i:document.body,children:!d&&(0,s.jsx)(nJ.g,{hasDanger:!0,onClick:function(){var e=n.filter(function(e){return f(e)});e.length>0?r({action:function(){return u(t)},spaces:e}):u(t)},linkType:"button",children:y.Z.t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")})},nY=function(e){var t,r=e.row.original,n=r.price_properties,i=r.price_properties,o=i.price_type,a=i.interval_count,l=i.interval,c=ng().priceBuildOptions,u=c[o];if((0,ta.QT)(n)){var d=c[o],f=(0,ta.X8)(d,l,a);t=(null==f?void 0:f.as_adjective)||d.name}else t=u.name;return(0,s.jsx)("div",{className:"flex flex-row items-center gap-2",children:t})};function n0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n1=(n0(i={},nf.E4.onetime,function(e){var t=e.row.original.price_properties,r=t.price_type,n=t.amount,i=ng().currency;if(r!==nf.E4.onetime)return null;var o=(0,nO.LG)(n),a=(0,nw.I)(i,o,{amountInCents:!0,includeCurrencyCode:!0});return(0,s.jsx)(s.Fragment,{children:a})}),n0(i,nf.E4.subscription,function(e){var t,r=e.row.original.price_properties,n=r.price_type,i=r.interval_count,o=r.interval,a=r.amount,l=r.upfront_payment_amount,c=r.trial_days,u=r.trial_requires_upfront_payment,d=ng(),f=d.currency,p=d.priceBuildOptions;if(n!==nf.E4.subscription)return null;var m=!!c,b=p.subscription,h=(0,ta.X8)(b,o,i),v=(0,ta.TM)(f,l),g=(0,nO.LG)(a),_=(0,nw.I)(f,g,{amountInCents:!0,includeCurrencyCode:!0}),x=[];m&&!u&&x.push("trial"),v.variant===ta.f.upfrontPayment&&x.push("upfront"),m&&u&&x.push("trial"),x.push("value");var j=x.join("_then_");return(0,s.jsx)(s.Fragment,{children:(0,y.t)(["settings.paywall_prices",n,"short_description",j],{upfront:v.amountFormatted,interval:null==h||null==(t=h.as_adverb)?void 0:t.toLowerCase(),amount:_,trial:c})})}),n0(i,nf.E4.installments,void 0),i),n2=function(e){var t=n1[e.row.original.price_properties.price_type];return t?(0,s.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){n0(e,t,r[t])})}return e}({},e)):null},n3=r(95342),n6="settings.paywalls.modal.tabs.pricing.mobile_price_packages.status",n4=function(e){var t,r=e.row.original.status,n={pending:{locale:[n6,"pending"],variant:"default"},active:{locale:[n6,"active"],variant:"success"},denied:{locale:[n6,"denied"],variant:"danger"},unknown:{locale:[n6,"unknown"],variant:"default"}},i=null!=(t=n[r])?t:n.unknown;return(0,s.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,s.jsx)(n3.O,{variant:i.variant,children:(0,y.t)(i.locale)})})};function n5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var n8=[{accessorKey:"paymentType",header:(0,y.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,s.jsx)(nY,n5({},e))}},{accessorKey:"pricing",header:(0,y.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,s.jsx)(n2,n5({},e))}},{accessorKey:"status",header:(0,s.jsx)(function(){return(0,s.jsxs)(s.Fragment,{children:[(0,y.t)("settings.paywalls.modal.tabs.pricing.table.columns.status"),(0,s.jsx)("span",{className:"ml-2 inline-flex cursor-pointer",children:(0,s.jsx)(tN.T,{content:(0,y.t)("settings.paywalls.modal.tabs.pricing.tooltip_text.status"),children:(0,s.jsx)(ep.JO,{type:"question-mark",className:"icon icon--xs"})})})]})},{}),cell:function(e){return(0,s.jsx)(n4,n5({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,s.jsx)(nX,n5({},e))}}],n9=function(){var e=(0,ng().getActivePrices)();return(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)("div",{className:"w-4/5 flex-none",children:[(0,s.jsx)(T.Z.LabelLg,{weight:"semibold",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)("settings.paywalls.modal.tabs.pricing.mobile_description")})]}),(0,s.jsx)("div",{className:"w-1/5 flex-none text-right",children:(0,s.jsx)(nQ,{variant:"secondary"})})]}),(0,s.jsx)(nW.w,{columns:n8,data:e,children:(0,s.jsxs)(nW.w.Table,{children:[(0,s.jsx)(nW.w.Header,{}),(0,s.jsx)(nW.w.Body,{})]})})]})},n7=function(e){var t=e.className;return(0,s.jsx)(d.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),name:"mobile_paywall_resource_attributes.processor_id",hideDescription:!0,hidePlaceholder:!0,label:(0,y.t)("settings.paywalls.form.offering_label"),hideBorder:!0,tooltipText:(0,y.t)(["settings.paywalls.modal.tabs.pricing.tooltip_text","offering_processor_id"]),rules:{required:!0},children:(0,s.jsx)(d.l.Input,{})})},ie=function(e){var t=e.className,r=ng().hasRecurringPrices,n=(0,h.Gc)().setValue;return(0,m.useEffect)(function(){r()||n("apple_subscription_group_processor_id","")},[r]),(0,s.jsx)(d.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),name:"apple_subscription_group_processor_id",hideDescription:!0,hidePlaceholder:!0,label:(0,y.t)("settings.paywalls.form.subscription_group_id_label"),hideBorder:!0,rules:{required:r()},children:(0,s.jsx)(d.l.Input,{disabled:!r()})})},it=function(e){var t=e.className,r=ng().hasRecurringPrices,n=(0,h.Gc)().setValue;return(0,m.useEffect)(function(){r()||n("apple_subscription_group_name","")},[r]),(0,s.jsx)(d.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),name:"apple_subscription_group_name",hideDescription:!0,hidePlaceholder:!0,label:(0,y.t)("settings.paywalls.form.subscription_group_name_label"),tooltipText:(0,y.t)(["settings.paywalls.modal.tabs.pricing.tooltip_text","subscription_group_name"]),hideBorder:!0,rules:{required:r()},children:(0,s.jsx)(d.l.Input,{disabled:!r()})})},ir=function(){return(0,s.jsxs)(nx.v,{className:"border-primary flex flex-col gap-y-4 border px-6 py-5",children:[(0,s.jsx)(T.Z.LabelLg,{weight:"bold",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,s.jsx)(n7,{}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(it,{})}),(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(ie,{})})]})]})]})},ii="settings.paywalls.modal.tabs.pricing.mobile_tab.empty_state",io=function(){var e=ng(),t=e.getPrices,r=e.isShowingAddPriceModal,n=e.showAddPriceModal,i=t();return(0,s.jsxs)(s.Fragment,{children:[i&&i.length?(0,s.jsxs)("div",{className:"mr-4 flex flex-col gap-y-8 pb-8",children:[(0,s.jsx)(n9,{}),(0,s.jsx)(ir,{})]}):(0,s.jsx)("div",{className:"m-4 flex flex-col items-center justify-center gap-4 rounded-lg border py-20",children:(0,s.jsx)(H.u,{header:(0,y.t)([ii,"title"]),description:(0,y.t)([ii,"description"]),onPrimaryClick:n,primaryLabel:(0,y.t)([ii,"cta_primary"]),onSecondaryClick:function(){window.open(eb.Lo.plans.brandedApps,"_blank")},secondaryLabel:(0,y.t)([ii,"cta_secondary"])})}),r()&&(0,s.jsx)(nH,{})]})},ia=r(81097),is=r(90809),il=r(91564),ic=r(98684);function iu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function id(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ip=function(e,t){return e.findIndex(function(e){return t.id?e.id===t.id:e.tmp_id===t.tmp_id})},im=(0,m.createContext)({currency:{id:1,code:"usd",direction:ic.RV.ltr,smallest_unit:ic.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},getTrialPeriodDays:function(){return 0},getHasTrialPeriod:function(){return!1},hasPricesEligibleForTrial:function(){return!1},addPrice:S.noop,markPriceAsPreferred:S.noop,removePrice:S.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:S.noop,hideAddPriceModal:S.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1}});im.displayName="PricingTabContext";var ib=function(e){var t,r=e.currency,n=e.children,i=(0,c.wh)().currentCommunitySettings,o=null==i||null==(t=i.price_build_options)?void 0:t.stripe,a=(0,h.Gc)(),l=a.setValue,u=a.watch,d=(0,m.useCallback)(function(){var e=u("can_be_repurchased");return o?Object.keys(o).filter(function(t){return!e||t===nf.E4.onetime}).map(function(e){return{value:e,label:o[e].name}}):[]},[o,u]),f=(0,m.useCallback)(function(){return d()[0]},[d]),p=(0,m.useCallback)(function(){return u("stripe_prices_attributes")},[u]),b=(0,m.useCallback)(function(){return p().filter(function(e){return!e._destroy})},[p]),y=b().length>0,v=(0,m.useCallback)(function(){var e=b();return(0,ta.aG)(e).length>0},[b]),g=(0,m.useCallback)(function(){var e=b();return(0,ta.fe)(e).length>0},[b]),_=(0,m.useCallback)(function(){return parseInt(u("trial_days"))},[u]),x=(0,m.useCallback)(function(){return!!u("enable_trial")&&_()>0},[u,_]),j=(0,m.useCallback)(function(){var e=b();return(0,ta.PI)(e,ta.zA.addingPrice).length>0},[b]),w=(0,h.Dq)({name:"stripe_prices_attributes",rules:{minLength:1}}),O=w.append,S=w.update,k=w.remove,P=(0,m.useCallback)(function(e){O(id(iu({},e),{preferred:!1,currency_id:r.id,tmp_id:"tmp_".concat(Date.now())}))},[r,O]),C=(0,m.useCallback)(function(e){var t=p(),r=t.findIndex(function(e){return e.preferred});r>-1&&S(r,id(iu({},t[r]),{preferred:!1,_updated:!0}));var n=ip(t,e);n>-1&&S(n,id(iu({},t[n]),{preferred:!0,_updated:!0}))},[p,S]),N=(0,m.useCallback)(function(e){var t=p(),r=ip(t,e);if(r>-1){var n=t[r];n.id?S(r,id(iu({},n),{preferred:!1,_destroy:!0})):k(r)}},[p,S,k]),A=(0,m.useCallback)(function(){return!!u("isShowingAddPriceModal")},[u]),I=(0,m.useCallback)(function(){l("isShowingAddPriceModal",!0)},[l]),E=(0,m.useCallback)(function(){l("isShowingAddPriceModal",!1)},[l]);return(0,s.jsx)(im.Provider,{value:{currency:r,priceBuildOptions:o||{},priceTypeOptions:d,defaultPriceTypeOption:f,getPrices:p,getActivePrices:b,hasRecurringPrices:v,getTrialPeriodDays:_,getHasTrialPeriod:x,hasPricesEligibleForTrial:j,addPrice:P,markPriceAsPreferred:C,removePrice:N,isShowingAddPriceModal:A,showAddPriceModal:I,hideAddPriceModal:E,hasActivePrices:y,hasSubscriptionPrices:g},children:n})},ih=function(){return(0,m.useContext)(im)},iy=function(e){var t,r,n=e.name,i=e.labelKey,o=e.children,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","labelKey","children"]),l=(0,h.Gc)().formState.errors[n];return(0,s.jsx)(d.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={name:n,className:nE()({"border-red-500":l},"!m-0 grow !p-0"),label:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(i||n)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},iv=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=ih().currency,o=(0,nO.Bj)(i,{amountInCents:!0}),a=(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,nw.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,nw.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,s.jsx)(iy,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,nO.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,s.jsx)(nA.a,{currency:i})})},ig=function(e){var t=e.name,r=e.labelKey,n=e.options,i=e.required,o=void 0!==i&&i;return(0,s.jsx)("div",{className:"grow leading-5",children:(0,s.jsx)(eL.N,{name:t,rules:{required:o},label:(0,s.jsxs)(s.Fragment,{children:[(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),o&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),options:n})})};function i_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ix=function(){var e=Object.entries(ih().priceBuildOptions[(0,(0,h.Gc)().watch)("price_type")].frequencies).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return i_(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i_(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{value:t[0],label:t[1].as_adjective}});return(0,s.jsx)(ig,{name:"billing_frequency",options:e,required:!0})},ij=function(){var e=(0,h.Gc)(),t=e.formState.errors,r=e.watch,n=r("price_type"),i=r("amount"),o=(0,nO.LG)(i),a=ih().currency,l=(0,nO.Bj)(a,{amountInCents:!0}),c=(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,nw.I)(a,a.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,nw.I)(a,a.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})}),u=(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.upfront_payment_amount",{total:(0,nw.I)(a,o,{amountInCents:!0,includeCurrencyCode:!1})});return(0,s.jsx)(d.l.Item,{name:"upfront_payment_amount",className:nE()({"border-red-500":t.upfront_payment_amount},"!m-0 !mt-2 grow !p-0"),errorClassName:"mt-1 text-red-500 text-sm",placeholder:l(0),hideBorder:!0,hideLabel:!0,hideDescription:!0,rules:{required:!0,validate:{bounds:function(e){var t=(0,nO.LG)(e);return isNaN(t)||t<a.min_charge_amount||t>a.max_charge_amount?c:n!==nf.E4.installments||!(t>o)||u}}},transformValue:l,children:(0,s.jsx)(nA.a,{currency:a})})},iw=function(){var e=(0,ih().getHasTrialPeriod)(),t=(0,h.Gc)(),r=t.watch,n=t.setValue,i=r("upfront_payment_enabled");return(0,m.useEffect)(function(){i||n("upfront_payment_amount","")},[i,n]),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(d.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"upfront_payment_enabled",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.upfront_payment_enabled_tooltip"),fullWidth:!0,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,s.jsx)(d.l.ToggleSwitch,{name:"upfront_payment_enabled",variant:"small"})}),i&&(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(ij,{}),e&&(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_upfront_payment",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(d.l.ToggleSwitch,{name:"trial_requires_upfront_payment",variant:"small"})})]})]})};function iO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iS=(iO(o={},nf.E4.onetime,function(){return(0,s.jsx)(iv,{name:"amount",labelKey:"price"})}),iO(o,nf.E4.subscription,function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)(ix,{}),(0,s.jsx)(iv,{name:"amount",labelKey:"recurring_price"})]}),(0,s.jsx)(iw,{})]})}),iO(o,nf.E4.installments,function(){var e=ih().priceBuildOptions.installments,t=(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.installments_count",{min:e.limits.installments_count.min,max:e.limits.installments_count.max});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)(ix,{}),(0,s.jsx)(iy,{name:"installments_count",labelKey:"rebills",placeholder:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.placeholder"),rules:{valueAsNumber:!0,required:!0,validate:{bounds:function(r){var n=parseInt(r);return!isNaN(n)&&n>=e.limits.installments_count.min&&n<=e.limits.installments_count.max||t}}},children:(0,s.jsx)(d.l.Input,{variant:"text",type:"number"})})]}),(0,s.jsx)("div",{className:"flex flex-row gap-4",children:(0,s.jsx)(iv,{name:"amount",labelKey:"total_price"})}),(0,s.jsx)(iw,{})]})}),o),ik=function(){var e=iS[(0,(0,h.Gc)().watch)("price_type")];return e?(0,s.jsx)(e,{}):null},iP=function(e){var t=e.children;return(0,s.jsxs)(nx.v,{className:"flex flex-row gap-3",children:[(0,s.jsx)("div",{className:"text-default",children:(0,s.jsx)(ep.JO,{type:"information-outline",size:24})}),(0,s.jsx)(T.Z.LabelSm,{weight:"regular",as:"div",color:"text-default",children:t})]})},iC="settings.paywalls.modal.tabs.pricing.add_price_modal.notice_v2",iN=function(e){var t=e.watch;return(0,nO.LG)(t("amount"))>0&&!(0,S.isEmpty)(t("billing_frequency"))},iA=function(e){var t=e.watch;return(0,nO.LG)(t("amount"))>0&&!(0,S.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=1},iI=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.installments&&!r&&!n},stateValidator:iA,messagePropsResolver:function(e){var t=e.currency,r=e.watch,n=(0,nO.LG)(r("amount")),i=parseInt(r("installments_count")),o=Math.round(n/i),a=r("billing_frequency"),s=(0,nw.I)(t,o),l=(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:s}),c=(0,y.t)([iC,"phrases","total_amount"],{amount:(0,nw.I)(t,n)});return 1===i?[["onetime"],{member_charged_immediately_phrase:l}]:[["installments",a],{count:i-1,member_charged_immediately_phrase:l,installment_amount:s,total_amount_phrase:c}]}},{matcher:function(e){return e.priceType===nf.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,nO.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return[["onetime"],{member_charged_immediately_phrase:(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:(0,nw.I)(t,(0,nO.LG)(r("amount")))})}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.subscription&&!r&&!n},stateValidator:iN,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,nw.I)(r,(0,nO.LG)(n("amount")));return[["subscription"],{member_charged_immediately_phrase:(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:i}),recurring_amount:i,recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase()}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.installments&&!r&&n},stateValidator:iA,messagePropsResolver:function(e){var t=e.currency,r=e.trialPeriodDays,n=e.watch,i=(0,nO.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return[["trial_then_installments",n("billing_frequency")],{member_free_trial_phrase:(0,y.t)([iC,"phrases","member_free_trial"],{count:r}),count:o,installment_amount:(0,nw.I)(t,a),total_amount_phrase:(0,y.t)([iC,"phrases","total_amount"],{amount:(0,nw.I)(t,i)})}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.subscription&&!r&&n},stateValidator:iN,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return[["trial_then_subscription"],{member_free_trial_phrase:(0,y.t)([iC,"phrases","member_free_trial"],{count:n}),recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0})}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.installments&&r&&n&&!i},stateValidator:iA,messagePropsResolver:function(e){var t=e.currency,r=e.trialPeriodDays,n=e.watch,i=(0,nO.LG)(n("amount")),o=(0,nO.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a),l=n("billing_frequency"),c=(0,y.t)([iC,"phrases","member_free_trial"],{count:r}),u=(0,y.t)([iC,"phrases","then_upfront_amount"],{amount:(0,nw.I)(t,o)}),d=(0,y.t)([iC,"phrases","total_amount"],{amount:(0,nw.I)(t,i)});return[["trial_then_upfront_then_installments",l],{count:a,member_free_trial_phrase:c,then_upfront_amount_phrase:u,installment_amount:(0,nw.I)(t,s),total_amount_phrase:d}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.subscription&&r&&n&&!i},stateValidator:iN,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return[["trial_then_upfront_then_subscription"],{member_free_trial_phrase:(0,y.t)([iC,"phrases","member_free_trial"],{count:n}),then_upfront_amount_phrase:(0,y.t)([iC,"phrases","then_upfront_amount"],{amount:(0,nw.I)(r,(0,nO.LG)(i("upfront_payment_amount")))}),recurring_amount:(0,nw.I)(r,(0,nO.LG)(i("amount"))),recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase()}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.installments&&r&&!n},stateValidator:iA,messagePropsResolver:function(e){var t=e.currency,r=e.watch,n=(0,nO.LG)(r("amount")),i=(0,nO.LG)(r("upfront_payment_amount")),o=parseInt(r("installments_count")),a=Math.round((n-i)/o),s=r("billing_frequency"),l=(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:(0,nw.I)(t,i)}),c=(0,y.t)([iC,"phrases","total_amount"],{amount:(0,nw.I)(t,n)});return[["upfront_then_installments",s],{count:o,member_charged_immediately_phrase:l,installment_amount:(0,nw.I)(t,a),total_amount_phrase:c}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===nf.E4.subscription&&r&&!n},stateValidator:iN,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return[["upfront_then_subscription"],{member_charged_immediately_phrase:(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:(0,nw.I)(r,(0,nO.LG)(n("upfront_payment_amount")))}),recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.installments&&r&&n&&i},stateValidator:iA,messagePropsResolver:function(e){var t=e.currency,r=e.trialPeriodDays,n=e.watch,i=(0,nO.LG)(n("amount")),o=(0,nO.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a),l=n("billing_frequency"),c=(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:(0,nw.I)(t,o)}),u=(0,y.t)([iC,"phrases","then_member_paid_trial"],{count:r}),d=(0,y.t)([iC,"phrases","total_amount"],{amount:(0,nw.I)(t,i)});return[["upfront_then_trial_then_installments",l],{count:a,member_charged_immediately_phrase:c,then_member_paid_trial_phrase:u,installment_amount:(0,nw.I)(t,s),total_amount_phrase:d}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===nf.E4.subscription&&r&&n&&i},stateValidator:iN,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return[["upfront_then_trial_then_subscription"],{member_charged_immediately_phrase:(0,y.t)([iC,"phrases","member_charged_immediately"],{amount:(0,nw.I)(r,(0,nO.LG)(i("upfront_payment_amount")))}),then_member_paid_trial_phrase:(0,y.t)([iC,"phrases","then_member_paid_trial"],{count:n}),recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,nw.I)(r,(0,nO.LG)(i("amount")))}]}}];function iE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var iT=function(){var e,t=ih(),r=t.currency,n=t.priceBuildOptions,i=t.getHasTrialPeriod,o=(0,t.getTrialPeriodDays)(),a=i(),l=(0,h.Gc)().watch,c=l("price_type"),u=n[c],d=!!l("upfront_payment_enabled"),f=!!l("trial_requires_upfront_payment"),p=iI.find(function(e){return(0,e.matcher)({priceType:c,hasUpfrontPayment:d,hasTrialPeriod:a,isUpfrontPaymentRequiredForTrial:f})});if(!p||!(0,p.stateValidator)({watch:l}))return null;var m=(e=(0,p.messagePropsResolver)({buildOptions:u,currency:r,trialPeriodDays:o,watch:l}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return iE(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iE(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],v=m[1],g=[iC,"scenarios",b.join(".")];return(0,s.jsx)(iP,{children:(0,y.t)(g,v)})},iL=function(){var e=ih(),t=e.priceBuildOptions,r=e.priceTypeOptions,n=e.addPrice,i=e.hideAddPriceModal,o=(0,h.Gc)().handleSubmit,a=(0,m.useCallback)(function(){o(function(e){var r,o,a,s,l,c=e.price_type,u=(0,nO.LG)(e.amount);if(e.billing_frequency){var d=t[e.price_type].frequencies[e.billing_frequency];d&&(r=d.interval,o=d.interval_count)}e.installments_count&&(a=parseInt(e.installments_count)),e.upfront_payment_enabled&&(s=(0,nO.LG)(e.upfront_payment_amount),l=e.trial_requires_upfront_payment),n({price_type:c,amount:u,interval:r,interval_count:o,installments_count:a,upfront_payment_amount:s,trial_requires_upfront_payment:null!=l&&l}),i()})().catch(function(e){return console.error("Error adding price",e)})},[t,n,i,o]);return(0,s.jsx)(M.c,{isOpen:!0,title:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title"),confirmText:(0,y.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:a,onClose:i,onCancel:i,size:"lg",dataTestId:"save-paywall-price",confirmVariant:"circle",children:(0,s.jsx)("div",{className:"min-h-[30rem]",children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)(ig,{name:"price_type",labelKey:"payment_type",options:r()}),(0,s.jsx)(ik,{}),(0,s.jsx)(iT,{})]})})})},iD=function(){var e=(0,ih().defaultPriceTypeOption)();return(0,s.jsx)(d.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:S.noop,children:(0,s.jsx)(iL,{})})},iM=r(28347),iR=function(e){var t=e.variant,r=ih(),n=r.showAddPriceModal,i=(0,r.getActivePrices)().length>=iM.vf;return(0,s.jsx)(K.z,{type:"button",variant:t,onClick:n,className:"whitespace-nowrap",disabled:i,large:!0,children:(0,s.jsx)(T.Z.LabelSm,{weight:"semibold",color:"primary"===t?"text-secondary":"text-primary",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},iB="settings.paywalls.modal_remove_price_confirmation",iF=l.gk.create(function(e){var t=e.action,r=e.spaces,n=(0,l.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(M.c,{isOpen:n.visible,title:(0,y.t)([iB,"title"]),onClose:i,cancelText:(0,y.t)(["cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,y.t)(["confirm"]),children:(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)([iB,"description"],{count:r.length,space_names:r.map(function(e){return e.name}).join(", ")})})})}),iz=function(e){var t=e.row.original,r=(0,l.dd)(iF).show,n=(0,c.nT)().records,i=(0,Q.UV)().contentPortalElement,o=ih(),a=o.getPrices,u=o.markPriceAsPreferred,d=o.removePrice,f=1===a().length;if(f&&t.preferred)return null;var p=function(e){var r,n,i,o=null==(r=e.lock_screen_blocks)?void 0:r.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});return!!(null==o||null==(i=o.data)||null==(n=i.paywalls)?void 0:n.find(function(e){var r,n;return(null==t?void 0:t.id)&&((null==e||null==(r=e.web_paywall_price)?void 0:r.id)===(null==t?void 0:t.id)||(null==e||null==(n=e.mobile_paywall_price)?void 0:n.id)===(null==t?void 0:t.id))}))};return(0,s.jsxs)(nW.w.Actions,{contentPortalElement:null!=i?i:document.body,children:[!t.preferred&&(0,s.jsx)(nJ.g,{hasDanger:!1,onClick:function(){return u(t)},linkType:"button",children:y.Z.t("settings.paywalls.modal.tabs.pricing.table.actions.preferred")},"preferred"),!f&&(0,s.jsx)(nJ.g,{hasDanger:!0,onClick:function(){var e=n.filter(function(e){return p(e)});e.length>0?r({action:function(){return d(t)},spaces:e}):d(t)},linkType:"button",children:y.Z.t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")]})},iU=function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.preferred,l=ih().priceBuildOptions,c=l[n];if((0,ta.QT)(r)){var u=l[n],d=(0,ta.X8)(u,o,i);t=(null==d?void 0:d.as_adjective)||u.name}else t=c.name;return(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t,a&&(0,s.jsx)(ep.JO,{type:"16-check-circle",size:16})]})};function iZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iG=(iZ(a={},nf.E4.onetime,function(e){var t=e.row.original,r=t.price_type,n=t.amount,i=ih().currency;if(r!==nf.E4.onetime)return null;var o=(0,nO.LG)(n),a=(0,nw.I)(i,o,{amountInCents:!0,includeCurrencyCode:!0});return(0,s.jsx)(s.Fragment,{children:a})}),iZ(a,nf.E4.subscription,function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.amount,l=r.upfront_payment_amount,c=r.trial_requires_upfront_payment,u=ih(),d=u.currency,f=u.priceBuildOptions,p=u.getHasTrialPeriod,m=u.getTrialPeriodDays;if(n!==nf.E4.subscription)return null;var b=m(),h=p(),v=f.subscription,g=(0,ta.X8)(v,o,i),_=(0,ta.TM)(d,l),x=(0,nO.LG)(a),j=(0,nw.I)(d,x,{amountInCents:!0,includeCurrencyCode:!0}),w=[];h&&!c&&w.push("trial"),_.variant===ta.f.upfrontPayment&&w.push("upfront"),h&&c&&w.push("trial"),w.push("value");var O=w.join("_then_");return(0,s.jsx)(s.Fragment,{children:(0,y.t)(["settings.paywall_prices",n,"short_description",O],{upfront:_.amountFormatted,interval:null==g||null==(t=g.as_adverb)?void 0:t.toLowerCase(),amount:j,trial:b})})}),iZ(a,nf.E4.installments,function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.installments_count,l=r.amount,c=r.upfront_payment_amount,u=r.trial_requires_upfront_payment,d=ih(),f=d.currency,p=d.priceBuildOptions,m=d.getHasTrialPeriod,b=d.getTrialPeriodDays;if(n!==nf.E4.installments)return null;var h=b(),v=m(),g=Object.values(p.installments.frequencies).find(function(e){return e.interval===o&&e.interval_count===i}),_=(0,ta.TM)(f,c),x=(0,nO.LG)(l),j=(0,nw.I)(f,(0,ta.$_)(_,x,a),{amountInCents:!0,includeCurrencyCode:!0}),w=[];v&&!u&&w.push("trial"),_.variant===ta.f.upfrontPayment&&w.push("upfront"),v&&u&&w.push("trial"),w.push("value");var O=w.join("_then_");return(0,s.jsx)(s.Fragment,{children:(0,y.t)(["settings.paywall_prices",n,"short_description",O],{upfront:_.amountFormatted,count:a,interval:null==g||null==(t=g.as_adverb)?void 0:t.toLowerCase(),amount:j,trial:h})})}),a),iq=function(e){var t=iG[e.row.original.price_type];return t?(0,s.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){iZ(e,t,r[t])})}return e}({},e)):null};function iV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var iH=[{accessorKey:"paymentType",header:(0,y.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,s.jsx)(iU,iV({},e))}},{accessorKey:"pricing",header:(0,y.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,s.jsx)(iq,iV({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,s.jsx)(iz,iV({},e))}}],iW=function(){var e=(0,ih().getActivePrices)();return(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-x-8",children:[(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(T.Z.LabelLg,{weight:"semibold",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,s.jsx)(T.Z.BodyMd,{color:"text-default",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.description")})]}),(0,s.jsx)("div",{className:"col-span-2 flex justify-end",children:(0,s.jsx)(iR,{variant:"secondary"})})]}),(0,s.jsx)(nW.w,{columns:iH,data:e,children:(0,s.jsxs)(nW.w.Table,{children:[(0,s.jsx)(nW.w.Header,{}),(0,s.jsx)(nW.w.Body,{})]})})]})},iQ=function(e){var t=e.tooltipText,r=e.isToggleDisabled;return(0,s.jsx)(d.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"can_be_repurchased",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,s.jsx)(d.l.ToggleSwitch,{name:"can_be_repurchased",variant:"small",disabled:r})})},iJ=function(){var e=ih(),t=e.hasRecurringPrices,r=!e.hasActivePrices||t();return(0,s.jsx)(iQ,{tooltipText:r?"can_be_repurchased_tooltip_disabled":"can_be_repurchased_tooltip",isToggleDisabled:r})},iK=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.onChanging;return(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_cancelable",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,s.jsx)(d.l.ToggleSwitch,{onToggleChange:n,name:"self_cancelable",variant:"small",disabled:r})})};function i$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var iX=function(){var e,t=ih().hasSubscriptionPrices,r=!t(),n=(0,h.Gc)(),i=n.watch,o=n.setValue,a=!!i("id"),l=i("self_cancelable"),c=(e=(0,m.useState)(t()&&!l),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return i$(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i$(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1];(0,m.useEffect)(function(){r?o("self_cancelable",!1):a||u||o("self_cancelable",!0)},[r,o,u,a]);var f=r?"self_cancelable_tooltip_disabled":"self_cancelable_tooltip";return(0,s.jsx)(iK,{tooltipText:f,isToggleDisabled:r,onChanging:function(){d(!0)}})},iY=function(e){var t=(0,h.Gc)().control,r=(0,h.qo)({control:t,name:"id"}),n=(0,h.qo)({control:t,name:"access_groups_enabled"}),i=(0,h.Gc)().setValue,o=ih().hasSubscriptionPrices,a=(0,(0,W.W)({}).useListPaywallGroups)({for_access_groups:n}).data,s=o(),l=(a||[]).filter(function(t){return t.currency.id===e.id}),c=l.length>0&&r,u=s&&r,d=l.length>0?l[0].id:"",f=l.map(function(e){return{value:"".concat(e.id),label:e.name}}),p=!(0,h.qo)({name:"id"}),b=(0,h.qo)({name:"enable_subscription_group"},!1),y=(0,m.useRef)(b);return(0,m.useEffect)(function(){p&&s&&!y.current&&r&&i("enable_subscription_group",!0)},[y,s,p,i,r]),(0,m.useEffect)(function(){s||(i("enable_subscription_group",!1),i("paywall_group_id",d))},[d,s,i]),{canShowChooser:c,canEnableChooser:u,enableSubscriptionGroup:b,paywallGroupSelectOptions:f}},i0=function(e){var t=e.isSelectDisabled,r=e.paywallGroupSelectOptions,n=e.className,i=(0,(0,h.Gc)().watch)("paywall_group_id");return(0,s.jsx)(d.l.Item,{className:"!py-0 ".concat(void 0===n?"":n),labelClassName:"!font-normal",name:"paywall_group_id",hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,hideLabel:!0,isDisabled:t,children:(0,s.jsx)(d.l.SelectNative,{prompt:(0,y.t)("settings.paywalls.modal.tabs.pricing.paywall_group_prompt"),value:i,name:"paywall_group_id",options:r,disabled:t,rules:{shouldUnregister:!0}})})},i1=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.enableSubscriptionGroup;return(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_subscription_group",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,s.jsx)(d.l.ToggleSwitch,{name:"enable_subscription_group",variant:"small",value:String(n),disabled:r})})},i2=function(e){var t=e.toggleField,r=e.fieldToggleable,n=e.hideToggleableField;return(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[!!t&&t,!!r&&!n&&(0,s.jsx)("div",{className:"flex flex-col gap-y-2 pl-11",children:r})]})},i3=function(){var e=ih().currency,t=(0,h.Gc)().watch,r=(0,h.Gc)().control,n=(0,h.qo)({control:r,name:"id"}),i=iY(e),o=i.canShowChooser,a=i.canEnableChooser,l=i.paywallGroupSelectOptions,c=i.enableSubscriptionGroup,u=!o||!a,d=u||!c,f="create_a_paywall_first";n&&(f=u?"paywall_group_tooltip_disabled":"paywall_group_tooltip");var p=t("enable_subscription_group");return(0,s.jsx)(i2,{toggleField:(0,s.jsx)(i1,{tooltipText:f,isToggleDisabled:u,enableSubscriptionGroup:c}),fieldToggleable:(0,s.jsx)(i0,{isSelectDisabled:d,paywallGroupSelectOptions:l,className:"w-7/12"}),hideToggleableField:!p})},i6=function(){var e=ih().hasPricesEligibleForTrial,t=(0,h.Gc)(),r=t.setValue,n=t.setFocus,i=!!(0,t.watch)("enable_trial"),o=(0,m.useRef)(!1);return(0,m.useEffect)(function(){e()||r("enable_trial",!1)},[e(),r]),(0,m.useEffect)(function(){i?(o.current&&r("trial_requires_card",!0),n("trial_days")):(r("trial_days",0),r("trial_requires_card",!1),r("self_trial_cancelable",!1)),o.current=!0},[i,n,r]),{hasPricesEligibleForTrial:e,hasTrial:i}},i4=function(e){var t=e.className,r=i6().hasTrial;return(0,s.jsx)(d.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),labelClassName:"!font-normal",name:"trial_days",hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,hideBorder:!0,isDisabled:!r,rules:{pattern:/^[0-9]+$/,min:{value:r?iM.dy:iM.L3,message:(0,y.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:iM.ut,message:(0,y.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}},children:(0,s.jsx)(d.l.Input,{"data-testid":"trial_days",inputMode:"numeric",suffix:(0,y.t)("settings.paywalls.form.free_trial.days_label"),disabled:!r})})},i5=function(){return(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_card",translationRoot:"settings.paywalls.form.free_trial",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(d.l.ToggleSwitch,{"data-testid":"trial_requires_card",name:"trial_requires_card",variant:"small"})})},i8=function(){var e=ih().hasRecurringPrices,t=(0,h.Gc)().setValue;return(0,m.useEffect)(function(){e()||t("self_trial_cancelable",!1)},[e()]),(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_trial_cancelable",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,isDisabled:!e(),children:(0,s.jsx)(d.l.ToggleSwitch,{name:"self_trial_cancelable",variant:"small",disabled:!e()})})},i9=function(){var e=i6(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,s.jsx)(d.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",isDisabled:!t(),children:(0,s.jsx)(d.l.ToggleSwitch,{name:"enable_trial",variant:"small",disabled:!t(),value:String(r)})})},i7=function(){var e=i6(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,s.jsx)(i2,{toggleField:(0,s.jsx)(i9,{}),fieldToggleable:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i4,{className:"w-7/12"}),(0,s.jsx)(i5,{}),(0,s.jsx)(i8,{})]}),hideToggleableField:!t()||!r})},oe=function(){return(0,s.jsxs)(nx.v,{className:"border-primary flex flex-col gap-y-4 border px-6",children:[(0,s.jsx)(T.Z.LabelLg,{weight:"bold",children:(0,y.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,s.jsx)(iJ,{}),(0,s.jsx)(i3,{}),(0,s.jsx)(i7,{}),(0,s.jsx)(iX,{})]})]})},ot=function(){var e=ih(),t=e.getPrices,r=e.isShowingAddPriceModal,n=e.showAddPriceModal,i=(0,is.C)().trackEvent,o=t();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-8",children:[o&&o.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iW,{}),(0,s.jsx)(oe,{})]}):(0,s.jsx)("div",{className:(0,j.A)("mt-4 flex flex-col items-center justify-center gap-4 rounded-lg border py-20"),children:(0,s.jsx)(H.u,{header:(0,y.t)("settings.paywalls.modal.tabs.pricing.empty_state.title"),description:(0,y.t)("settings.paywalls.modal.tabs.pricing.empty_state.description"),onPrimaryClick:n,primaryLabel:(0,y.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})}),(0,s.jsx)(il.V.Banner,{title:(0,y.t)("settings.paywalls.modal.tabs.pricing.branded_apps_title"),onClick:function(){i("plus_banner.cta.clicked",{origin:"paywalls.stripe_pricing_tab"}),window.open(ia.L.plans.brandedApps,"_blank")}})]}),r()&&(0,s.jsx)(iD,{})]})},or=function(){var e=(0,h.Gc)().watch,t=(0,nc.E)().isCommunityOnPlus,r=(0,nu.g)(),n=(0,N.K)(),i=n.data;if(n.isLoading)return(0,s.jsx)(f.a,{});var o=e("currency_id"),a=null==i?void 0:i.find(function(e){return e.id===parseInt(o)});return a?(0,s.jsxs)(w,{children:[(0,s.jsx)(O.G,{title:(0,y.t)("settings.paywalls.modal.tabs.pricing.title")}),(0,s.jsxs)(nd.O.Group,{className:"!overflow-hidden",children:[t&&r&&(0,s.jsxs)(nd.O.List,{className:"border-primary border-b",children:[(0,s.jsx)(nd.O,{isButtonType:!0,children:(0,y.t)("web")}),(0,s.jsx)(nd.O,{isButtonType:!0,children:(0,y.t)("mobile")})]}),(0,s.jsxs)(nd.O.Panels,{className:(0,j.A)("pb-10",{"pt-8":t}),children:[(0,s.jsx)(nd.O.Panel,{children:(0,s.jsx)(ib,{currency:a,children:(0,s.jsx)(ot,{})})}),t&&r&&(0,s.jsx)(nd.O.Panel,{children:(0,s.jsx)(nv,{currency:a,children:(0,s.jsx)(io,{})})})]})]})]}):null},on=r(90412),oi=r(3803),oo="settings.paywalls.tracking_js_code",oa=[{group:(0,y.t)([oo,"group.member"]),label:(0,y.t)([oo,"variables.member_email"]),value:(0,y.t)([oo,"variables.member_email"])},{group:(0,y.t)([oo,"group.charge"]),label:(0,y.t)([oo,"variables.amount_paid"]),value:(0,y.t)([oo,"variables.amount_paid"])},{group:(0,y.t)([oo,"group.coupon"]),label:(0,y.t)([oo,"variables.coupon_code"]),value:(0,y.t)([oo,"variables.coupon_code"])},{group:(0,y.t)([oo,"group.paywall"]),label:(0,y.t)([oo,"variables.paywall_internal_name"]),value:(0,y.t)([oo,"variables.paywall_internal_name"])},{group:(0,y.t)([oo,"group.paywall"]),label:(0,y.t)([oo,"variables.paywall_display_name"]),value:(0,y.t)([oo,"variables.paywall_display_name"])},{group:(0,y.t)([oo,"group.paywall"]),label:(0,y.t)([oo,"variables.paywall_trial_days"]),value:(0,y.t)([oo,"variables.paywall_trial_days"])},{group:(0,y.t)([oo,"group.paywall_price"]),label:(0,y.t)([oo,"variables.paywall_price_amount"]),value:(0,y.t)([oo,"variables.paywall_price_amount"])},{group:(0,y.t)([oo,"group.paywall_price"]),label:(0,y.t)([oo,"variables.paywall_price_interval"]),value:(0,y.t)([oo,"variables.paywall_price_interval"])},{group:(0,y.t)([oo,"group.paywall_price"]),label:(0,y.t)([oo,"variables.paywall_price_type"]),value:(0,y.t)([oo,"variables.paywall_price_type"])}],os=function(){var e=(0,c.wh)().currentCommunity;return(0,s.jsxs)(w,{children:[(0,s.jsx)(O.G,{title:(0,y.t)("settings.paywalls.modal.tabs.tracking.title")}),(null==e?void 0:e.paywall_tracking_code_feature_flag_enabled)?(0,s.jsx)(d.l.Item,{name:"conversion_tracking_js_code",translationRoot:"settings.paywalls.modal.tabs.tracking",tooltipText:(0,y.t)("settings.paywalls.modal.tabs.tracking.conversion_tracking_js_code_tooltip"),hideBorder:!0,fullWidth:!1,hideDescription:!0,className:"!mt-0 !flex min-h-[55vh] flex-auto flex-col !py-0",children:(0,s.jsx)(on.K,{name:"conversion_tracking_js_code",className:"max-h-[30vh] flex-auto",showMenuBar:!0,menuBarOptions:oa})}):(0,s.jsx)(oi.S,{PlanFeatureName:(0,y.t)("pricing_plans.feature.conversion_tracking_code")})]})},ol=r(17617),oc=r(12535),ou=function(){var e=(0,ol.Be)(),t=I().onClose;return(0,s.jsx)(w,{className:"-mx-6 -mt-4",children:(0,s.jsx)(oc.k,{category:"paywalls",pageSize:e?4:3,onClose:t,shouldAutoAdjust:!0})})},od=r(11255);function of(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var op=function(e){var t,r=e.active,n=e.disabled,i=e.label,o=e.onClick,a=function(){return!n&&o&&o()};return(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:(0,j.A)(od.O.className,(of(t={},od.O.activeClassName,r),of(t,"hover:text-default focus:text-default cursor-auto opacity-50",!r&&n),t)),onClick:a,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a())},type:"button",children:i})})},om=r(70434),ob=function(e){var t,r,n=e.onClick,i=e.className,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","className"]);return(0,s.jsxs)(K.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"button",variant:"plain",small:!0,onClick:n,className:void 0===i?"":i},o),r=r={children:[(0,s.jsx)("span",{className:"sr-only",children:(0,y.t)("close")}),(0,s.jsx)(ep.JO,{className:(0,j.A)("!text-dark"),type:"20-close",size:20})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function oh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var oy=function(){var e,t=I().onClose,r=(e=(0,(0,h.Gc)().watch)(["display_name","id"]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return oh(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oh(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],i=r[1],o=(0,y.t)("settings.paywalls.modal.no_title_available"),a=i?(0,y.t)("settings.paywalls.modal.title_editing",{paywall_name:n||o}):(0,y.t)("settings.paywalls.modal.title_creation",{paywall_name:n||o});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)("div",{className:"border-primary hidden border-r pr-4 lg:block",children:(0,s.jsx)(ra.h,{name:"20-arrow-left",iconSize:20,buttonSize:28,className:"text-default",iconClassName:"!w-5 !h-5",ariaLabel:(0,y.t)("back"),onClick:t})}),(0,s.jsx)("span",{className:(0,j.A)("grid min-w-0 lg:ml-4"),children:(0,s.jsx)(om.Y,{content:a,className:"truncate text-lg font-semibold",children:a})})]}),(0,s.jsx)(ob,{onClick:t,className:"lg:hidden"})]})},ov=function(e){var t=e.tabs,r=e.activeTab,n=e.onClickTab,i=e.rightContainer;return(0,s.jsxs)(u.x.HeaderNav.NavContainer,{className:"!grid-cols-[1fr_3fr_1fr] md:px-4 md:py-[1.125rem]",children:[(0,s.jsx)(u.x.HeaderNav.LeftContainer,{children:(0,s.jsx)(oy,{})}),(0,s.jsx)(u.x.HeaderNav.NavGroup,{children:t.map(function(e){var t,i;return(0,m.createElement)(op,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={active:e.label===r,key:e.label,onClick:function(){return n(e.label)}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t))})}),i&&(0,s.jsx)(u.x.HeaderNav.RightContainer,{className:"hidden lg:flex",children:i})]})},og=r(62750),o_=r(12142),ox=function(e){var t,r,n=e.activeTab,i=e.currentPaywallStatus,o=I().onClose,a=(0,h.Gc)(),s=a.register,l=a.setValue,c=a.watch,u=a.getValues,d=a.formState,f=(0,k.useQueryClient)(),v=u(),g=(0,o_.F)(v,function(){f.refetchQueries([og.lP]),o()}),_=g.publish,x=g.archive,j=g.remove,w=g.masquerade,O=(0,m.useMemo)(function(){return n===p.eA.TRACKING_TAB},[n]),P=function(e){s("publish"),l("publish",e)},C=function(){return P(!0)},N=(0,m.useMemo)(function(){return{active:{buttonLabel:(0,y.t)("settings.paywalls.modal.footer.save"),variant:"circle",onClick:S.noop},draft:{onClick:S.noop,variant:"circle",buttonLabel:(0,y.t)("settings.paywalls.modal.footer.save")},inactive:{onClick:S.noop,variant:"circle",buttonLabel:(0,y.t)("settings.paywalls.modal.footer.save")},paywallCreation:{variant:"circle",buttonLabel:O?(0,y.t)("settings.paywalls.modal.footer.publish"):(0,y.t)("settings.paywalls.modal.footer.next"),onClick:function(){return O&&C()}}}},[O,C]),A={active:{onClick:function(){P(!1),s("status"),l("status",to.Tl.INACTIVE)},variant:"danger",buttonLabel:(0,y.t)("settings.paywalls.modal.footer.unpublish")},draft:{onClick:C,variant:"secondary",buttonLabel:(0,y.t)("settings.paywalls.modal.footer.publish")},inactive:{onClick:C,variant:"secondary",buttonLabel:(0,y.t)("settings.paywalls.modal.footer.publish")},paywallCreation:{onClick:S.noop,variant:"secondary",buttonLabel:(0,y.t)("settings.paywalls.modal.footer.save_draft")}},E=null!=(t=i&&A[i])?t:A.paywallCreation,T=null!=(r=i&&N[i])?r:N.paywallCreation,L=!(0,b.dR)(i)&&O,D=c("destroyable"),M=i===to.Tl.ACTIVE,R=(0,m.useMemo)(function(){var e=[];return(0,b.dR)(i)&&(e.push({label:(0,y.t)(["actions"]),value:(0,y.t)(["actions"]),hide:!0}),M&&e.push({label:(0,y.t)(["archive"]),value:(0,y.t)(["archive"]),onClick:x,pathTo:"#"}),M||e.push({label:(0,y.t)(["publish"]),value:(0,y.t)(["publish"]),onClick:_,pathTo:"#"}),D&&e.push({label:(0,y.t)(["delete"]),value:(0,y.t)(["delete"]),onClick:j,color:"text-v2-danger",pathTo:"#"}),e.push({label:(0,y.t)(["view_as"]),value:(0,y.t)(["view_as"]),onClick:w,pathTo:"#"})),e},[x,_,j,w,D,M,i]);return{isEditingMode:(0,b.dR)(i),currentPrimaryButtonState:T,currentSecondaryButtonState:E,isCreatingAndLastStep:L,options:R,formState:d}},oj=function(e){var t=e.isSubmitting,r=e.mutation,n=e.activeTab,i=e.shouldBlockSubmitButton,o=ox({activeTab:n,currentPaywallStatus:e.currentPaywallStatus}),a=o.isEditingMode,l=o.currentPrimaryButtonState,c=o.currentSecondaryButtonState,u=o.options,d=o.isCreatingAndLastStep,f=o.formState;return(0,s.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[d&&(0,s.jsx)(K.z,{type:"submit",variant:c.variant,disabled:t||r.isLoading||i,onClick:c.onClick,children:c.buttonLabel}),a&&(0,s.jsx)(ei.Lt,{options:u}),(0,s.jsx)(K.z,{type:"submit",variant:l.variant,disabled:!(null==f?void 0:f.isDirty)||t||r.isLoading||i,onClick:l.onClick,children:l.buttonLabel})]})};function ow(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oO=function(e){var t,r=e.activeTab,n=e.setActiveTab,i=e.usePaywallFormContentHook,o=e.mutation,a=e.isSubmitting,l=e.requiresCurrency,c=e.canChangeCurrency,d=e.currentPaywallStatus,f=e.workflowsEnabled,h=e.hasSubscribers,y=i({activeTab:r,setActiveTab:n}),v=y.handleTabClick,g=y.tabOptions,_=y.shouldBlockSubmitButton,x=(0,m.useMemo)(function(){return f&&(0,b.j2)(d)?g:g.filter(function(e){return e.label!==p.eA.WORKFLOWS_TAB})},[f,d,g]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.x.Header,{className:"z-10",children:(0,s.jsx)(ov,{tabs:x,onClickTab:v,activeTab:r,rightContainer:(0,s.jsx)(oj,{isSubmitting:a,mutation:o,activeTab:r,shouldBlockSubmitButton:_,currentPaywallStatus:d})})}),(ow(t={},p.eA.DETAILS_TAB,(0,s.jsx)(r1,{requiresCurrency:l,canChangeCurrency:c})),ow(t,p.eA.CHECKOUT_TAB,(0,s.jsx)(rG,{})),ow(t,p.eA.PRICING_TAB,(0,s.jsx)(or,{})),ow(t,p.eA.ACCESS_TAB,(0,s.jsx)(e9,{hasSubscribers:h})),ow(t,p.eA.POST_PURCHASE_TAB,(0,s.jsx)(nl,{shouldDisplayWorkflowsTab:(0,b.j2)(d),setActiveTab:n})),ow(t,p.eA.TRACKING_TAB,(0,s.jsx)(os,{})),ow(t,p.eA.WORKFLOWS_TAB,(0,s.jsx)(ou,{})),t)[r],(0,s.jsx)("div",{className:"border-primary sticky border-t p-5 md:py-4 lg:hidden lg:px-6",children:(0,s.jsx)(oj,{isSubmitting:a,mutation:o,activeTab:r,shouldBlockSubmitButton:_,currentPaywallStatus:d})})]})};function oS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ok=function(e,t,r){return t.includes(e)||r.some(function(e){return!e()})},oP=function(e){var t,r=e.activeTab,n=e.setActiveTab,i=(t=(0,m.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return oS(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oS(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=(0,h.Gc)(),l=s.control,c=s.formState,u=(0,h.qo)({control:l,name:"display_name"}),d=(0,h.qo)({control:l,name:"checkout_path"}),f=(0,h.qo)({control:l,name:"stripe_prices_attributes"}),b=(0,h.qo)({control:l,name:"all_spaces"}),y=(0,h.qo)({control:l,name:"space_group_ids"})||[],v=(0,h.qo)({control:l,name:"access_groups"})||{},g=(0,h.qo)({control:l,name:"space_ids"})||[],_=function(e,t){e===r&&!t!==o&&a(!t)},x=function(){var e=!!u&&!!d;return _(p.eA.DETAILS_TAB,e),e},j=function(){var e=Array.isArray(f)&&f.some(function(e){return!!e.id&&!e._destroy||!!e.tmp_id});return _(p.eA.PRICING_TAB,e),e},w=function(){var e=!!b||Array.isArray(y)&&y.length>0||Array.isArray(g)&&g.length>0||!(0,S.isEmpty)(v);return _(p.eA.ACCESS_TAB,e),e};return{handleTabClick:function(e){n(e)},tabOptions:[{label:p.eA.DETAILS_TAB,disabled:ok(r,[],[x])},{label:p.eA.PRICING_TAB,disabled:ok(r,[p.eA.DETAILS_TAB],[x,j])},{label:p.eA.ACCESS_TAB,disabled:ok(r,[p.eA.DETAILS_TAB,p.eA.PRICING_TAB],[x,j,w])},{label:p.eA.CHECKOUT_TAB,disabled:ok(r,[p.eA.DETAILS_TAB,p.eA.PRICING_TAB,p.eA.ACCESS_TAB],[x,j,w])},{label:p.eA.POST_PURCHASE_TAB,disabled:ok(r,[p.eA.DETAILS_TAB,p.eA.PRICING_TAB,p.eA.CHECKOUT_TAB,p.eA.ACCESS_TAB],[x,j,w,function(){return!(null==c?void 0:c.errors.redirect_url)&&!(null==c?void 0:c.errors.post_purchase_email_meta)}])},{label:p.eA.TRACKING_TAB,disabled:!0}],shouldBlockSubmitButton:o}},oC=function(e){var t=e.setActiveTab;return{handleTabClick:function(e){t(e)},tabOptions:[{label:p.eA.DETAILS_TAB},{label:p.eA.PRICING_TAB},{label:p.eA.ACCESS_TAB},{label:p.eA.CHECKOUT_TAB},{label:p.eA.POST_PURCHASE_TAB},{label:p.eA.TRACKING_TAB},{label:p.eA.WORKFLOWS_TAB}],shouldBlockSubmitButton:!1}},oN=function(e){var t,r=e.activeTab,n=e.setActiveTab,i=e.mutation,o=e.isSubmitting,a=e.currentPaywallStatus,l=e.requiresCurrency,u=e.canChangeCurrency,d=e.hasSubscribers,f=(0,c.wh)().currentCommunitySettings;return(0,s.jsx)(oO,{activeTab:r,setActiveTab:n,usePaywallFormContentHook:a?oC:oP,mutation:i,isSubmitting:o,currentPaywallStatus:a,requiresCurrency:l,canChangeCurrency:u,workflowsEnabled:null!=(t=null==f?void 0:f.upgrade_flows_for_workflows_paywalls_enabled)&&t,hasSubscribers:d})},oA=r(47373),oI=function(e){var t=(0,em.pm)(),r=t.success,n=t.error,i=(0,l.dd)(),o=(0,k.useMutation)(function(e){return oA.i.updateMemberAccess(e)}),a=o.isLoading;return{isOpen:i.visible,isSubmitting:a,onClose:function(){o.isLoading||i.hide()},handleSubmit:function(){o.mutate(e,{onSuccess:function(){r((0,y.t)("settings.paywalls.alerts.success.update_access_member")),i.hide().then(function(){return i.remove()})},onError:function(){n("settings.paywalls.alerts.error.action_failed"),i.hide().then(function(){return i.remove()})}})}}},oE=function(e){var t=oI(e.paywallId),r=t.isOpen,n=t.isSubmitting,i=t.onClose,o=t.handleSubmit;return(0,s.jsxs)(M.c,{isOpen:r,title:(0,y.t)("settings.paywalls.modal_update_access_member.title"),onClose:i,cancelText:(0,y.t)("settings.paywalls.modal_update_access_member.only_new_members"),onConfirm:o,confirmVariant:"primary",confirmText:(0,y.t)("settings.paywalls.modal_update_access_member.all_members"),disabled:n,children:[(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)("settings.paywalls.modal_update_access_member.description")}),(0,s.jsx)("br",{}),(0,s.jsx)(T.Z.BodyMd,{children:(0,y.t)("settings.paywalls.modal_update_access_member.description_warning")})]})},oT=l.gk.create(function(e){return(0,s.jsx)(oE,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),oL=r(42481),oD=function(e){var t,r,n;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:null!=(n=null==e?void 0:e.enabled)&&n,displayed_text:(null==e?void 0:e.displayed_text)||"",action:(0,tS.d0)(null==e||null==(t=e.action)?void 0:t.action_type)?{action_type:tk.KW.REDIRECT_TO,redirect_to:null==e||null==(r=e.action)?void 0:r.redirect_to}:{action_type:tk.KW.DO_NOTHING}},(0,tS.$Z)(null==e?void 0:e.countdown_type)?{countdown_type:tk.sI.REMAINING_TIME,remaining_time:Number(null==e?void 0:e.remaining_time),remaining_time_interval:"minutes"}:{countdown_type:tk.sI.FINISH_AT,finish_at:e.finish_at?new Date(e.finish_at).toISOString():new Date().toISOString()})};function oM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function oR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var oB=function(e){return e.tmp_id?e:e._destroy?{id:e.id,_destroy:1}:e._updated?{id:e.id,preferred:e.preferred}:null},oF=function(e){var t=e.name,r=e.headline,n=e.quote;return[void 0,null,""].includes(t)&&t===r&&r===n?null:e},oz=function(e){var t,r,n={paywall_group_id:(null==e?void 0:e.enable_subscription_group)?e.paywall_group_id:null},i=e.paywall_customization_attributes||{};return{publish:e.publish,paywall:oR(oM({},e,n),{stripe_prices_attributes:e.stripe_prices_attributes.map(oB).filter(function(e){return e}),paywall_customization_attributes:oR(oM({},i),{countdown_properties:oD(i.countdown_properties),testimonial_properties:{enabled:(null==i||null==(t=i.testimonial_properties)?void 0:t.enabled)||!1,testimonials:(0,S.compact)(((null==i||null==(r=i.testimonial_properties)?void 0:r.testimonials)||[]).map(oF))}})})}};function oU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oU(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oG=function(e,t,r,n){if(t===p.eA.DETAILS_TAB)e(p.eA.PRICING_TAB);else if(t===p.eA.PRICING_TAB)e(p.eA.ACCESS_TAB);else if(t===p.eA.ACCESS_TAB)e(p.eA.CHECKOUT_TAB);else if(t===p.eA.CHECKOUT_TAB)e(p.eA.POST_PURCHASE_TAB);else if(t===p.eA.POST_PURCHASE_TAB)e(p.eA.TRACKING_TAB);else if(t===p.eA.TRACKING_TAB)return r.mutate(oz(n))},oq=function(e){var t=e.paywall,r=e.refetchPaywalls,n=e.onClose,i=e.isModalVisible,o=e.initialTab,a=void 0===o?p.eA.DETAILS_TAB:o,s=oZ((0,m.useState)(a),2),c=s[0],u=s[1],d=oZ((0,m.useState)(null==t?void 0:t.status),2),f=d[0],b=d[1],h=(0,l.dd)(oT).show,y=rt().getDefaultValues;(0,m.useEffect)(function(){i||u(a),b(null==t?void 0:t.status)},[i,a,null==t?void 0:t.status]);var v=(0,oL.B)({updateCallback:function(e){var t;r(),b(e.status),(null==(t=e.policies)?void 0:t.can_update_all_members_access)&&(null==e?void 0:e.access_to_content_changed)&&h({paywallId:e.id})},createCallback:function(e){n(),r(),b(e.status)},paywall:t}),g=v.createMutation,_=v.updateMutation;return{getDefaultValues:y,activeTab:c,setActiveTab:u,handleSubmit:function(e,t){var r=t.reset;if(e.id)return void _.mutateAsync(oz(e)).then(function(e){r(y(e))}).catch(function(e){console.error(e)});oG(u,c,g,e)},mutation:t?_:g,currentPaywallStatus:f}},oV=function(e){var t,r,n,i,o=e.paywall,a=e.refetchPaywalls,m=e.initialTab,b=(0,l.dd)(),h=(0,c.wh)(),y=h.currentCommunitySettings,v=h.isLoading,g=function(){b.hide(),b.remove()},_=oq({initialTab:m,paywall:o,refetchPaywalls:a,onClose:g,isModalVisible:b.visible}),x=_.getDefaultValues,j=_.setActiveTab,w=_.activeTab,O=_.handleSubmit,S=_.mutation,k=_.currentPaywallStatus;if(v)return(0,s.jsx)(f.a,{});var P=null!=(n=null==o||null==(t=o.policies)?void 0:t.requires_currency)?n:!!(null==y?void 0:y.currencies_enabled),C=null==(i=null==o||null==(r=o.policies)?void 0:r.can_change_currency)||i,N=w===p.eA.WORKFLOWS_TAB,A=!!((null==o?void 0:o.id)&&((null==o?void 0:o.total_active_onetime_subscribers)!="0"||(null==o?void 0:o.total_active_recurring_subscribers)!="0"));return(0,s.jsx)(u.x,{isOpen:b.visible,contentPortalId:"paywall-admin-modal",onClose:g,size:"screen",children:(0,s.jsx)(d.l,{onSubmit:N?function(){}:O,"data-testid":"paywall-admin-modal",defaultValues:x(o),className:"h-max-screen-dynamic lg:h-full",formClassName:"h-max-screen-dynamic h-full overflow-hidden",children:function(e){var t=e.formState.isSubmitting;return(0,s.jsx)(E,{onClose:g,children:(0,s.jsx)(oN,{activeTab:w,setActiveTab:j,isSubmitting:t,mutation:S,currentPaywallStatus:k,requiresCurrency:P,canChangeCurrency:C,hasSubscribers:A})})}})})},oH=l.gk.create(function(e){return(0,s.jsx)(oV,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),oW=function(){return(0,l.dd)(oH)}},82444:function(e,t,r){"use strict";r.d(t,{d:()=>o});var n=r(85893),i=r(84326),o=function(e){var t=e.children;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[t,(0,n.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.generic.call_support")}})]})}},16770:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(85893),i=r(84326),o=r(95342),a=r(80304),s=function(e){if(!e.paymentProcessor.is_restricted_soon)return null;var t="warning",r=(0,n.jsx)(o.O,{variant:t,children:(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.status")}),s=(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.title"),l=(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.description")}}),(0,n.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.call_support")}})]});return(0,n.jsx)(a.t,{sentiment:t,badge:r,title:s,description:l})}},20771:function(e,t,r){"use strict";r.d(t,{q:()=>B});var n=r(85893),i=r(84326),o=r(39905),a=r(51466),s=r(57105),l=r(34519),c=r(60878),u="stripe-onboarding-flow-v2",d=["US","BR","GB","AU","CA","DE","FR"],f=["IN","MX","MY","TH"],p=["AL","AG","AR","AM","AT","BS","BH","BE","BO","BA","BG","KH","CL","CO","CR","CI","HR","CY","CZ","DK","DO","EC","EG","SV","EE","ET","FI","GM","GH","GR","GT","GY","HK","HU","IS","ID","IE","IL","IT","JM","JP","JO","KE","KW","LV","LI","LT","LU","MO","MG","MT","MU","MD","MN","MA","NA","NL","NZ","NG","MK","NO","OM","PA","PY","PE","PH","PL","PT","QA","RO","RW","SA","SN","RS","SI","SG","SK","ZA","KR","ES","LK","LC","SE","CH","TW","TZ","TT","TN","TR","AE","UY","UZ","VN"],m=r(88767),b=r(14640),h=function(e){var t=e.onSuccess,r=e.onError,n=(0,i.t)("settings.paywalls.alerts.error.action_failed"),o=(0,c.pm)().error,a=(0,m.useMutation)(function(e){return b.p.create(e)}),s=a.mutate,l=a.isLoading,u=a.isSuccess,d=function(e){window.location.href=e.url},f=function(e){o((null==e?void 0:e.message)||n)};return{onSubmit:function(e){s(e,{onSuccess:t||d,onError:r||f})},isLoading:l,isSuccess:u}},y=r(67294),v=r(94184),g=r.n(v),_=r(52293),x=r(30133),j=r(72667),w=r(795),O=r(64904),S=r(41553),k="stripe_onboarding_modal",P=function(e){var t,r,o=e.countries,s=e.isDisabled,c=e.defaultValue,u=(0,l.UV)().contentPortalElement;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 py-4",children:[(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(w.w,{content:(0,i.t)([k,"subtitles"])[0]})}),(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(w.w,{content:(0,i.t)([k,"subtitles"])[1]})}),(0,n.jsx)(a.l.TextSelect,{name:"country",options:o,label:null,initialValue:c,disabled:s,appendTo:u,rules:{validate:{countryIsSupported:function(e){return!f.includes(e.toUpperCase())}}},popperOptions:{modifiers:[(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},O.Z),r=r={phase:"afterWrite"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)]}})]})},C=r(57363),N=r(18943),A=function(e){var t=e.children;return(0,n.jsxs)(N.v,{className:"flex flex-row gap-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(C.JO,{type:"information-outline",size:24})}),(0,n.jsx)(S.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},I=function(e){var t=e.isDisabled,r=e.onClose;return(0,n.jsx)(l.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-stretch justify-end space-x-4",children:[(0,n.jsx)(o.z,{type:"button",variant:"secondary",onClick:r,disabled:t,children:(0,i.t)("cancel")}),(0,n.jsx)(o.z,{form:u,type:"submit",variant:"circle",disabled:t,children:(0,i.t)("continue")})]})})};function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e){var t=e.isLoading,r=e.onClose,o=e.defaultCountry,a=(0,_.Gc)(),s=a.watch,c=a.formState.isSubmitSuccessful,u=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled,m=(0,y.useMemo)(function(){var e=d.map(function(e){return{label:(0,i.t)([j.p,e]),value:e.toLowerCase()}}),t=T(p).concat(T(f)).map(function(e){return{label:(0,i.t)([j.p,e]),value:e.toLowerCase()}}).sort(function(e,t){return e.label>=t.label?1:-1});return T(e).concat(T(t))},[]),b=s("country"),h=f.includes(b.toUpperCase()),v=t||c,O=t||c||h;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.u_.Body,{className:g()({"!px-5":u}),children:[(0,n.jsx)(P,{countries:m,isDisabled:v,defaultValue:o}),h&&(0,n.jsx)(A,{children:(0,n.jsx)(w.w,{content:(0,i.t)(["stripe_onboarding_modal","country_not_supported"],{country:(0,i.t)([j.p,b.toUpperCase()])})})})]}),(0,n.jsx)(I,{isDisabled:O,onClose:r})]})},D=function(){var e=(0,s.dd)(),t=(0,c.pm)().error,r=h({onError:function(e){t(null==e?void 0:e.message),b()}}),o=r.onSubmit,d=r.isLoading,f=r.isSuccess,p=function(){var e,t,r=null==(e=window)?void 0:e.CLOUDFLARE_COUNTRY_CODE,n=(null==(t=window)?void 0:t.locale)==="pt"?"BR":null;return(r||n||"US").toLowerCase()},m=d||f,b=function(){m||e.remove()},y={country:p()};return(0,n.jsx)(a.l,{id:u,onSubmit:o,defaultValues:y,children:(0,n.jsxs)(l.u_,{isOpen:e.visible,onClose:b,contentPortalId:"stripe-onboarding-business-modal",children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:[(0,n.jsxs)(l.u_.Header,{children:[(0,n.jsx)(l.u_.Title,{size:"md",children:(0,i.t)(["stripe_onboarding_modal","title"])}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:b})})]}),(0,n.jsx)(L,{isLoading:d,onClose:b,defaultCountry:p()})]})]})})},M=function(){var e=(0,s.dd)(s.gk.create(D)),t=(0,i.t)("settings.paywalls.processor_status_v2.onboarding.subtitles"),r=h({}).onSubmit;return(0,n.jsxs)(a.l,{onSubmit:r,defaultValues:{forceForm:!0},formClassName:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[0]}}),(0,n.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[1]}}),(0,n.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[2]}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,n.jsx)(o.z,{type:"button",variant:"circle","data-testid":"stripe-connect",onClick:function(){e.show()},children:(0,n.jsx)("span",{children:(0,i.t)("settings.paywalls.buttons.connect")})}),(0,n.jsx)(o.z,{type:"button",variant:"secondary",onClick:function(){window.open("https://help.circle.so/c/paywall-setup/","_blank")},children:(0,i.t)("learn_more")})]})]})},R=r(80304),B=function(){var e=(0,i.t)("settings.paywalls.processor_status_v2.onboarding.title");return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col gap-y-4 self-center md:w-3/4",children:[(0,n.jsx)(R.t,{sentiment:"default",title:e,description:(0,n.jsx)(M,{})}),(0,n.jsx)("p",{className:"text-default text-xs",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.onboarding.stripe_regulations_description")}})]})};B.propTypes={}},8002:function(e,t,r){"use strict";r.d(t,{a:()=>f});var n=r(85893),i=r(88767),o=r(84326),a=r(14640),s=r(39905),l=r(95342),c=r(60878),u=r(82444),d=r(80304),f=function(){var e=(0,o.t)("settings.paywalls.alerts.error.action_failed"),t=(0,c.pm)().error,r=(0,i.useMutation)(function(){return a.p.refresh()}),f=r.mutate,p=r.isLoading,m="danger",b=(0,n.jsx)(l.O,{variant:m,children:(0,o.t)("settings.paywalls.processor_status_v2.restricted.status")}),h=(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(u.d,{children:(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,o.t)("settings.paywalls.processor_status_v2.restricted.description")}})}),(0,n.jsx)("div",{children:(0,n.jsx)(s.z,{variant:"circle",onClick:function(){f(void 0,{onSuccess:function(e){window.location.href=e.url},onError:function(r){t((null==r?void 0:r.message)||e)}})},disabled:p,children:(0,o.t)("settings.paywalls.buttons.refresh")})})]});return(0,n.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,n.jsx)(d.t,{sentiment:m,title:(0,o.t)("settings.paywalls.processor_status_v2.restricted.title"),badge:b,description:h})})}},50171:function(e,t,r){"use strict";r.d(t,{c:()=>l});var n=r(85893),i=r(84326),o=r(41342),a=r(95342),s=r(80304),l=function(){var e=(0,o.wh)().currentCommunitySettings,t=(0,n.jsx)(a.O,{variant:"warning",children:(0,i.t)("settings.paywalls.processor_status_v2.restricted.status")}),r=(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.description")}});return(null==e?void 0:e.paywalls_for_restricted_country_enabled)?null:(0,n.jsx)(s.t,{sentiment:"warning",title:(0,i.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.title"),badge:t,description:r})}},80304:function(e,t,r){"use strict";r.d(t,{t:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a=r(41553),s=function(e){var t=e.sentiment,r=e.title,i=e.badge,s=e.description,l=o()("md:border md:border-primary md:rounded-lg md:p-8 bg-primary",{"flex flex-row":"default"!==t});return(0,n.jsx)("div",{className:l,"data-testid":"payment-processor-status",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[i&&(0,n.jsx)("div",{children:i}),r&&(0,n.jsx)(a.Z.TitleMd,{"data-testid":"title",children:r}),s&&(0,n.jsx)("div",{"data-testid":"description",children:s})]})})}},84484:function(e,t,r){"use strict";r.d(t,{t:()=>c});var n=r(85893),i=r(84326),o=r(14899),a=r(95342),s=r(82444),l=r(80304),c=function(e){var t=e.status,r=t==o.Q_.REJECTED?"danger":"warning",c=(0,n.jsx)(a.O,{variant:r,children:(0,i.t)("settings.paywalls.processor_status_v2.".concat(t,".status"))}),u=(0,n.jsx)(s.d,{children:(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.".concat(t,".description"))}})});return(0,n.jsx)(l.t,{sentiment:r,badge:c,title:(0,i.t)("settings.paywalls.processor_status_v2.".concat(t,".title")),description:u})}},65824:function(e,t,r){"use strict";r.d(t,{R:()=>T});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(39905),l=r(41553),c=r(74376),u=r(43032),d=function(e){var t,r,i,o,d=e.refetchPaywalls,f=e.paymentProcessorStatus,p=e.paywallGroupsEnabled,m=(0,c.I)(),b=function(){return m.show({paywall:void 0,refetchPaywalls:d,paywallGroupsEnabled:p})},h=null!=(o=(t={},r=u.J6.ENABLED,i=function(){return(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(l.Z.TitleSm,{weight:"font-semibold",children:(0,a.t)("settings.paywalls.title")}),(0,n.jsx)(s.z,{variant:"circle",onClick:b,children:(0,a.t)("settings.paywalls.buttons.new")})]})},r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t)[f])?o:function(){return(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)(l.Z.TitleSm,{weight:"font-semibold",children:(0,a.t)("settings.paywalls.title")})})};return(0,n.jsx)("div",{className:"paywalls-admin-header__container table-wrapper",children:h()})};d.propTypes={refetchPaywalls:o().func.isRequired,paymentProcessorStatus:o().string.isRequired,paywallGroupsEnabled:o().bool.isRequired};var f=r(2754),p=r(51169),m=r(92074),b=r(46051),h=r(57363),y=r(38120),v=r(57018),g=function(e){var t=e.paywalls,r=e.refetchPaywalls,i=e.paywallGroupsEnabled,o=(0,c.I)().show;return{showPaywallAdminFormModalToCreate:function(){return o({paywall:void 0,refetchPaywalls:r,paywallGroupsEnabled:i})},dataSource:null==t?void 0:t.map(function(e){var t,s,l={active:{label:(0,a.t)("settings.paywalls.status.active"),variant:"success"},inactive:{label:(0,a.t)("settings.paywalls.status.inactive"),variant:"default"},draft:{label:(0,a.t)("settings.paywalls.status.draft"),variant:"default"},notIdentified:{label:"",variant:"default"}},c=null!=(t=l[e.status])?t:l.notIdentified,u=null!=(s=e.stripe_prices_attributes.find(function(e){return e.preferred}))?s:e.stripe_prices_attributes[0],d=u?(0,m.Y9)(e.currency,u.interval,u.interval_count,u.amount):(0,a.t)("settings.paywalls.list.form.no_preferred_price_selected"),f=[{key:"edit-paywall",label:(0,a.t)("settings.paywalls.list.form.edit"),onClick:function(){return o({paywall:e,refetchPaywalls:r,paywallGroupsEnabled:i})}}];return{key:e.id,displayName:e.name||e.display_name,preferred_price:d,status:(0,n.jsx)(y.C,{variant:c.variant,children:c.label}),action:(0,n.jsxs)("button",{type:"button",className:"text-[12px]",onClick:function(){return(0,b.p0)(e.checkout_path,"#paywalls-list")},children:[(0,n.jsx)(h.JO,{type:"20-copy",className:"mr-2"}),(0,n.jsx)("span",{children:(0,a.t)("settings.paywalls.list.form.copy_url")})]}),actionMenu:(0,n.jsx)(v.t,{menuItems:f,dropdownSide:"left",shouldCloseOnClickItem:!0})}})}},_=function(e){var t=e.paywalls,r=e.refetchPaywalls,i=e.isPaywallsLoading,o=g({paywalls:t,refetchPaywalls:r,paywallGroupsEnabled:e.paywallGroupsEnabled}).dataSource;return i?(0,n.jsx)(p.a,{}):(0,n.jsx)("div",{className:"paywall-coupons-list","data-testid":"paywall-list",children:o.length>0&&(0,n.jsx)(f.w,{columns:u.nh,className:"paywall-coupons-list__table",dataSource:o||[],hasStickyHeader:!0,headerClassName:"top-[116px]"})})};_.propTypes={paywalls:o().array,refetchPaywalls:o().func.isRequired,isPaywallsLoading:o().bool,paywallGroupsEnabled:o().bool.isRequired};var x=r(16770),j=r(20771),w=r(8002),O=r(50171),S=r(84484),k=r(88767),P=r(93199),C=r(13532),N=r(22513);function A(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var I=function(e){var t=e.paymentProcessor,r=(0,k.useQuery)(u.Rx,function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,P.UT)(C.av.paywalls.index())]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){A(o,n,i,a,s,"next",e)}function s(e){A(o,n,i,a,s,"throw",e)}a(void 0)})})()});return{paywalls:r.data,refetchPaywalls:r.refetch,isPaywallsLoading:r.isLoading,paymentProcessorStatus:(0,N.l)({paymentProcessor:t}).paymentProcessorStatus}},E=function(e,t){switch(e){case u.J6.REJECTED:return(0,n.jsx)(S.t,{status:"rejected"});case u.J6.PENDING:return(0,n.jsx)(S.t,{status:"pending"});case u.J6.RESTRICTED_FOR_APPLICATION_FEES:return(0,n.jsx)(O.c,{});case u.J6.RESTRICTED:return(0,n.jsx)(w.a,{});case u.J6.ENABLED:return(0,n.jsx)(x.T,{paymentProcessor:t});case u.J6.NOT_EXIST:return(0,n.jsx)(j.q,{});default:return null}},T=function(e){var t=e.paymentProcessor,r=e.paywallGroupsEnabled,i=e.shouldHideHeader,o=I({paymentProcessor:t}),a=o.paymentProcessorStatus,s=o.paywalls,l=o.refetchPaywalls,c=o.isPaywallsLoading,f=E(a,t);return(0,n.jsxs)(n.Fragment,{children:[!(void 0!==i&&i)&&(0,n.jsx)(d,{refetchPaywalls:l,paymentProcessorStatus:a,paywallGroupsEnabled:r}),f,a===u.J6.ENABLED&&(0,n.jsx)(_,{refetchPaywalls:l,paywalls:null!=s?s:[],isPaywallsLoading:c,paywallGroupsEnabled:r})]})}},82895:function(e,t,r){"use strict";r.d(t,{G:()=>l});var n=r(85893),i=r(1168),o=r(45201),a=r(41553),s=function(e){var t=e.children;return(0,n.jsx)(a.Z.TitleXl,{truncate:!0,weight:"font-bold",children:t})},l=function(e){var t=e.title,r=e.titleNode,a=e.subtitle,l=e.subtitleNode,c=e.className;return(0,n.jsxs)("div",{className:(0,i.A)("flex flex-col gap-y-2",c),children:[t&&(0,n.jsx)(s,{children:t}),void 0===r?null:r,a&&(0,n.jsx)(o.k,{children:a}),void 0===l?null:l]})}},45201:function(e,t,r){"use strict";r.d(t,{k:()=>o});var n=r(85893),i=r(41553),o=function(e){var t=e.children;return(0,n.jsx)(i.Z.BodyMd,{color:"text-default",children:t})}},43032:function(e,t,r){"use strict";r.d(t,{J6:()=>o,Rx:()=>s,eA:()=>i,nh:()=>a});var n=r(84326),i={DETAILS_TAB:(0,n.t)("settings.paywalls.modal.tabs.details.title"),CHECKOUT_TAB:(0,n.t)("settings.paywalls.modal.tabs.checkout.title"),PRICING_TAB:(0,n.t)("settings.paywalls.modal.tabs.pricing.title"),ACCESS_TAB:(0,n.t)("settings.paywalls.modal.tabs.access.title"),POST_PURCHASE_TAB:(0,n.t)("settings.paywalls.modal.tabs.post_purchase.title"),TRACKING_TAB:(0,n.t)("settings.paywalls.modal.tabs.tracking.title"),WORKFLOWS_TAB:(0,n.t)("settings.paywalls.modal.tabs.workflows.title")},o={NOT_EXIST:"PAYMENT_PROCESSOR_NOT_EXIST",RESTRICTED:"PAYMENT_PROCESSOR_RESTRICTED",RESTRICTED_FOR_APPLICATION_FEES:"PAYMENT_PROCESSOR_RESTRICTED_FOR_APPLICATION_FEES",PENDING:"PAYMENT_PROCESSOR_PENDING",REJECTED:"PAYMENT_PROCESSOR_REJECTED",ENABLED:"PAYMENT_PROCESSOR_ENABLED"},a=[{title:(0,n.t)("settings.paywalls.list.form.display_name_label"),dataIndex:"displayName",key:"displayName"},{title:(0,n.t)("settings.paywalls.list.form.amount_label"),dataIndex:"preferred_price",key:"preferred_price"},{title:(0,n.t)("settings.paywalls.list.form.status_label"),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"},{title:" ",dataIndex:"actionMenu",key:"actionMenu"}],s="paywalls"},22513:function(e,t,r){"use strict";r.d(t,{l:()=>o});var n=r(14899),i=r(43032),o=function(e){var t=e.paymentProcessor,r=void 0;return(0,n.$1)(t).some(function(e){r||(r=e())}),{paymentProcessorStatus:null!=r?r:i.J6.ENABLED}}},42481:function(e,t,r){"use strict";r.d(t,{B:()=>x});var n=r(88767),i=r(84326),o=r(47373),a=r(57105),s=r(85893),l=r(25362),c=r(57851),u=r(76934),d=r(10116),f=r(57363),p=r(90431),m=r(31089),b="settings.paywalls.paywall_momentum_modal",h=a.gk.create(function(e){var t,r=e.paywall,n=e.onClose,o=(0,l.dd)(),a=(0,u.g)("paywall_momo"),h=(0,d.A)({templateKey:null!=(t=null==a?void 0:a.template_key)?t:"",isAutomationWorkflow:(null==a?void 0:a.template_type)==="dynamic"}),y=h.createFromTemplate,v=h.isLoading;return(0,s.jsx)(p.o,{isOpen:o.visible,onClose:function(){o.hide(),null==n||n()},title:(0,i.t)("".concat(b,".paywall_created")),description:(0,i.t)("".concat(b,".paywall_created_description"),{paywall_display_name:r.display_name}),isLoading:v,"data-testid":"paywall-momentum-modal",children:(0,s.jsx)(c.X,{title:(0,i.t)([b,"workflow_trigger_section.title"]),description:(0,i.t)([b,"workflow_trigger_section.description"]),children:(0,s.jsx)(m.K,{iconEl:(0,s.jsx)(f.JO,{type:"16-lightning-filled",size:16}),onClick:function(){y(void 0,{onSuccess:function(){o.hide()}})},disabled:v,children:(0,i.t)([b,"workflow_trigger_section.cta"])})})})}),y=r(65766),v=r(60878),g=r(62750),_=function(){var e=(0,n.useQueryClient)();return{invalidatePaywallQueries:function(){e.invalidateQueries(g.lP)}}},x=function(e){var t=e.createCallback,r=e.updateCallback,s=e.paywall,l=(0,v.pm)(),c=l.success,u=l.error,d=_().invalidatePaywallQueries,f=(0,i.t)("settings.paywalls.alerts.error.action_failed"),p=function(e,t,r){var n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];n&&c(t),r&&r(e),d()},m=function(e){u("string"==typeof(null==e?void 0:e.errorDetails)?null==e?void 0:e.errorDetails:f,{duration:"long"})},b=function(e){return{publish:e,paywall:{status:e?null==s?void 0:s.status:y.Tl.INACTIVE}}};return{updateMutation:(0,n.useMutation)(function(e){return o.i.updatePaywall(null==s?void 0:s.id,e)},{onSuccess:function(e){return p(e,(0,i.t)("settings.paywalls.alerts.success.updated"),r)},onError:m}),createMutation:(0,n.useMutation)(function(e){return o.i.createPaywall(e)},{onSuccess:function(e,r){p(e,(0,i.t)("settings.paywalls.alerts.success.created"),t,!r.publish),r.publish&&a.gk.show(h,{paywall:e})},onError:m}),publishMutation:(0,n.useMutation)(function(){return o.i.updatePaywall(null==s?void 0:s.id,b(!0))},{onSuccess:function(e){p(e,(0,i.t)("settings.paywalls.alerts.success.published"),r,!1),a.gk.show(h,{paywall:e})},onError:m}),archiveMutation:(0,n.useMutation)(function(){return o.i.updatePaywall(null==s?void 0:s.id,b(!1))},{onSuccess:function(e){return p(e,(0,i.t)("settings.paywalls.alerts.success.archived"),r)},onError:m}),deleteMutation:(0,n.useMutation)(function(){return o.i.deletePaywall(null==s?void 0:s.id)},{onSuccess:function(e){return p(e,(0,i.t)("settings.paywalls.alerts.success.deleted"),r)},onError:m})}}},3562:function(e,t,r){"use strict";r.d(t,{u:()=>f});var n=r(85893),i=r(88767),o=r(57105),a=r(88990),s=r(91149),l=r(52478),c=r(60878),u=r(65824),d=new i.QueryClient(l.V),f=function(e){var t=e.paymentProcessor,r=e.paywallGroupsEnabled;return(0,n.jsx)(a.C,{children:(0,n.jsx)(s.H,{children:(0,n.jsx)(c.VW,{children:(0,n.jsx)(i.QueryClientProvider,{client:d,children:(0,n.jsx)(o.yB,{children:(0,n.jsx)(u.R,{paymentProcessor:t,paywallGroupsEnabled:r})})})})})})}},53564:function(e,t,r){"use strict";r.d(t,{x:()=>i});var n=r(41342),i=function(){var e,t=(0,n.wh)().currentCommunity;return null==t||null==(e=t.policies)?void 0:e.is_paywall_tax_available}},50867:function(e,t,r){"use strict";r.d(t,{g:()=>a});var n=r(85893),i=r(94184),o=r.n(i),a=function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:o()("border-secondary-200 flex flex-col empty:hidden",t),children:r})}},28890:function(e,t,r){"use strict";r.d(t,{$:()=>eP});var n,i,o,a,s=r(85893),l=r(84326),c=r(41553),u=r(67294),d=r(1168),f=r(50867),p="default",m="paywall_customization",b=r(96486),h=r(72806),y=function(e){var t;return(null==e||null==(t=e.trial_period)?void 0:t.free)?{hide:!0}:{}},v=function(e){return e.first_payment.discount<0||e.first_payment.tax>0||e.first_payment.ending_balance<0},g=r(60221),_=Object.assign({},{DefaultLine:function(e){var t=e.options;return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))},EndingBalanceLine:function(e){var t=e.preview,r=e.options;return!v(t)||t.first_payment.ending_balance>=0?null:(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.first_payment.ending_balance"),tooltip:(0,l.t)("paywall_checkout.first_payment.ending_balance_tooltip"),value:t.first_payment.formatted_ending_balance,valueColor:"text-green-600",dataTestId:"checkout-form-preview-carry-over"},r))},FreeTrialLine:function(e){var t,r=e.preview,n=e.options;return[g.Rt.trialThenValue,g.Rt.trialThenUpfrontThenValue].includes(r.preview_scenario)?(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.free_trial_day",{count:null==r||null==(t=r.trial_period)?void 0:t.days}),value:r.formatted_amount_due_now,valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-free-trial"},n)):null},PaidTrialLine:function(e){var t,r=e.preview,n=e.options;return v(r)||![g.Rt.upfrontThenTrialThenValue].includes(r.preview_scenario)?null:(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.first_payment.total_due_for_paid_trial",{count:null==r||null==(t=r.trial_period)?void 0:t.days}),value:r.formatted_amount_due_now,valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-paid-trial"},n))},SubtotalLine:function(e){var t=e.preview,r=e.options;return!v(t)||t.first_payment.subtotal<0?null:(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.coupon.subtotal"),value:t.first_payment.formatted_subtotal,dataTestId:"checkout-form-preview-today-payment-subtotal"},r))},TaxLine:function(e){var t=e.preview,r=e.options;return v(t)&&0!==t.first_payment.tax?(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.coupon.tax"),value:t.first_payment.formatted_tax,dataTestId:"checkout-form-preview-today-tax"},r)):null},DiscountLine:function(e){var t=e.preview,r=e.options;return!v(t)||t.first_payment.discount>=0?null:(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.coupon.discount"),value:t.first_payment.formatted_discount,valueColor:"text-green-600",dataTestId:"checkout-form-preview-today-discount"},r))},TodayPaymentLine:function(e){var t=e.preview,r=e.options;return t.first_payment?(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:t.first_payment.due_on_phrase,value:t.first_payment.formatted_amount_due,labelWeight:"semibold",valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-total"},r)):null},TotalDueTodayLine:function(e){var t=e.preview,r=e.options;return v(t)?(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.amount_due"),value:t.formatted_amount_due_now,dataTestId:"checkout-form-preview-total-due-today-line"},r)):null}}),x=r(16823),j="paywall_checkout.todays_payment",w=function(e){var t={label:(0,l.t)(j),value:e.formatted_amount_due_now,valueWeight:"semibold"},r={label:(0,l.t)(j),value:void 0};if([g.Rt.trialThenValue,g.Rt.trialThenUpfrontThenValue].includes(e.preview_scenario))return r;if([g.Rt.upfrontThenValue,g.Rt.upfrontThenTrialThenValue].includes(e.preview_scenario))return!v(e)&&(null==e||null==(o=e.trial_period)?void 0:o.paid)?r:t;if([g.Rt.value].includes(e.preview_scenario)){var n,i,o,a,s=1+ +!!e.future_payments+((null==e||null==(a=e.remaining_payments)?void 0:a.installments_preview.length)||0),c=(0,b.compact)([s>1?(0,l.t)("paywall_checkout.first_payment.header_installments"):(0,l.t)("paywall_checkout.todays_payment"),s>1?"(".concat((0,l.t)("progress_counter",{count:(0,x.hi)(1),total_count:s}),")"):null]).join(" ");return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),i=i={label:c},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n}return t},O=Object.assign({},{TodayPaymentLine:function(e){var t=e.preview,r=w(t);return(0,s.jsx)(_.TodayPaymentLine,{preview:t,options:r})},TotalDueTodayLine:function(e){var t=e.preview,r=[g.Rt.upfrontThenTrialThenValue,g.Rt.upfrontThenValue].includes(t.preview_scenario)?{label:(0,l.t)("paywall_checkout.amount_due_intro_fee")}:[g.Rt.trialThenValue,g.Rt.trialThenUpfrontThenValue].includes(t.preview_scenario)?{hide:!0}:{};return(0,s.jsx)(_.TotalDueTodayLine,{preview:t,options:r})}}),S=[[O.TodayPaymentLine,b.noop],[_.FreeTrialLine,b.noop],[_.SubtotalLine,y],[_.DiscountLine,y],[_.TaxLine,y],[_.EndingBalanceLine,y],[_.PaidTrialLine,b.noop],[O.TotalDueTodayLine,b.noop]],k=[[_.TodayPaymentLine,function(){return{label:(0,l.t)("paywall_checkout.todays_payment")}}],[_.SubtotalLine,b.noop],[_.DiscountLine,b.noop],[_.TaxLine,b.noop],[_.EndingBalanceLine,b.noop],[_.TotalDueTodayLine,b.noop]],P=[[_.TodayPaymentLine,function(e){return[g.Rt.trialThenValue,g.Rt.trialThenUpfrontThenValue].includes(e.preview_scenario)?{label:(0,l.t)("paywall_checkout.todays_payment"),value:null}:{label:(0,l.t)("paywall_checkout.todays_payment")}}],[_.FreeTrialLine,b.noop],[_.SubtotalLine,y],[_.DiscountLine,y],[_.TaxLine,y],[_.EndingBalanceLine,y],[_.TotalDueTodayLine,y]];function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=[[_.TodayPaymentLine,b.noop],[_.SubtotalLine,b.noop],[_.DiscountLine,b.noop],[_.TaxLine,b.noop],[_.EndingBalanceLine,b.noop]],A={default:(C(n={},h.E4.onetime,N),C(n,h.E4.subscription,N),C(n,h.E4.installments,N),n),paywall_customization:(C(i={},h.E4.onetime,k),C(i,h.E4.subscription,P),C(i,h.E4.installments,S),i)};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.className,r=e.preview,n=e.variant,i=(A[void 0===n?p:n]||A[p])[r.paywall_price.price_type];return(0,s.jsx)(f.g,{className:(0,d.A)("gap-y-2",t),children:(0,s.jsx)(u.Fragment,{children:i.map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return(0,t[0])({preview:r,options:(0,t[1])(r)||{}})})},Math.random())})},T=Object.assign({},{DiscountLine:function(e){var t,r,n=e.preview,i=e.options;return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.coupon.discount"),value:null==n||null==(t=n.future_payments)?void 0:t.formatted_discount,valueColor:"text-green-600",tooltip:null==n||null==(r=n.future_payments)?void 0:r.discount_phrase,dataTestId:"checkout-form-preview-future-payments-discount"},i))},HeaderLine:function(e){var t,r=e.preview,n=e.options;return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.future_payments.header"),labelWeight:"semibold",value:null==r||null==(t=r.future_payments)?void 0:t.formatted_total,valueWeight:"semibold",dataTestId:"checkout-form-preview-future-payments-total"},n))},HeaderPaywallCustomizationLine:function(){return(0,s.jsx)(eP.PreviewEntry,{label:(0,l.t)("paywall_checkout.future_payments.header"),labelWeight:"semibold",dataTestId:"checkout-form-preview-future-payments-total"})},RegularPriceLine:function(e){var t,r=e.preview,n=e.options;return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)(["settings.paywall_prices.subscription.regular_price",r.paywall_price.interval_type]),value:null==r||null==(t=r.future_payments)?void 0:t.formatted_subtotal,dataTestId:"checkout-form-preview-future-payments-regular-price"},n))},SubtotalLine:function(e){var t,r,n=e.preview,i=e.options;return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:null==n||null==(t=n.future_payments)?void 0:t.start_on_phrase,value:null==n||null==(r=n.future_payments)?void 0:r.formatted_subtotal,dataTestId:"checkout-form-preview-future-payments-subtotal"},i))},TaxLine:function(e){var t,r=e.preview,n=e.options;return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("paywall_checkout.coupon.tax"),value:null==r||null==(t=r.future_payments)?void 0:t.formatted_tax,dataTestId:"checkout-form-preview-future-payments-tax"},n))}}),L=function(e){var t,r,n;return[g.Rt.upfrontThenTrialThenValue,g.Rt.trialThenUpfrontThenValue,g.Rt.upfrontThenValue].includes(e.preview_scenario)?1+((null==e||null==(n=e.remaining_payments)||null==(r=n.installments_preview)?void 0:r.length)||0):1+ +!!e.future_payments+((null==e||null==(t=e.remaining_payments)?void 0:t.installments_preview.length)||0)},D=function(e){return 1===L(e)},M=function(e){return e.future_payments&&(e.future_payments.discount<0||e.future_payments.tax>0)},R=Object.assign({},{DiscountLine:function(e){var t=e.preview,r=e.options;return!t.future_payments||t.future_payments.discount>=0?null:(0,s.jsx)(T.DiscountLine,{preview:t,options:r})},HeaderLine:function(e){var t=e.preview,r=e.options;return t.future_payments?(0,s.jsx)(T.HeaderLine,{preview:t,options:r}):null},HeaderPaywallCustomizationLine:function(){return(0,s.jsx)(T.HeaderPaywallCustomizationLine,{})},RegularPriceLine:function(e){var t=e.preview,r=e.options;return t.future_payments&&M(t)?(0,s.jsx)(T.RegularPriceLine,{preview:t,options:r}):null},SubtotalLine:function(e){var t=e.preview,r=e.options;return t.future_payments?(0,s.jsx)(T.SubtotalLine,{preview:t,options:r}):null},TaxLine:function(e){var t=e.preview,r=e.options;return!t.future_payments||t.future_payments.tax<=0?null:(0,s.jsx)(T.TaxLine,{preview:t,options:r})}});function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var F={total_amount_due:0,coupons_applied_quantity:0,installments_preview:[]},z=function(e){if((0,g.Mf)(e.preview_scenario)&&e.future_payments){var t,r=e.remaining_payments||F,n=e.future_payments;return{total_amount_due:(null==r?void 0:r.total_amount_due)+n.amount_due,coupons_applied_quantity:(null==r?void 0:r.coupons_applied_quantity)+ +(n.discount<0),installments_preview:[{amount_due:n.amount_due,start_on:n.start_on,coupon_status:n.discount<0?"applied":"not_applied"}].concat(function(e){if(Array.isArray(e))return B(e)}(t=r.installments_preview)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}return e.remaining_payments},U=function(e,t){return"applied"===t.coupon_status&&e.discounted?(e.discounted.totalAmountDue+=t.amount_due,e.discounted.singleInstallmentAmountDue=t.amount_due,e.discounted.quantity+=1):"not_applied"===t.coupon_status&&e.standard&&(e.standard.totalAmountDue+=t.amount_due,e.standard.singleInstallmentAmountDue=t.amount_due,e.standard.quantity+=1),e},Z=function(e){var t,r;return{tooltip:void 0,hide:0===((null==(t=e.future_payments)?void 0:t.discount)||0),value:null==(r=e.future_payments)?void 0:r.formatted_discount}},G={trial_then_value:function(e){var t;return{tooltip:void 0,hide:0===((null==(t=e.first_payment)?void 0:t.discount)||0),value:e.first_payment.formatted_discount}},trial_then_upfront_then_value:Z,upfront_then_trial_then_value:Z,upfront_then_value:Z,value:function(){return{hide:!0}}},q=function(e){if(!e.paywall_coupon)return{hide:!0};if(1===L(e))return G[e.preview_scenario](e);var t,r,n=z(e),i=((null==n?void 0:n.coupons_applied_quantity)||0)>0?(0,l.t)(["paywall_checkout.future_payments.discount_phrase_v2",null==e||null==(t=e.paywall_coupon)?void 0:t.duration],{count:null==n?void 0:n.coupons_applied_quantity}):void 0;return(0,g.Mf)(e.preview_scenario)?{hide:0===e.first_payment.discount,value:e.first_payment.formatted_discount,tooltip:i}:{hide:0===((null==(r=e.future_payments)?void 0:r.discount)||0),tooltip:i}},V=function(e){var t,r;return{label:(0,l.t)("paywall_checkout.future_payments.future_payment_after_x_trial_days",{count:null==e||null==(t=e.trial_period)?void 0:t.days}),value:M(e)?null==(r=e.future_payments)?void 0:r.formatted_amount_due:void 0,valueWeight:"semibold"}},H=function(e){var t;return{label:(0,l.t)("paywall_checkout.future_payments.header_installments.one_installment"),value:M(e)?null==(t=e.future_payments)?void 0:t.formatted_amount_due:void 0,valueWeight:"semibold"}},W={trial_then_value:function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},V(e)),r=r={value:v(e)?e.first_payment.formatted_amount_due:void 0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},trial_then_upfront_then_value:V,upfront_then_trial_then_value:H,upfront_then_value:H,value:function(){return{hide:!0}}},Q=function(e){var t,r=L(e);return{label:(0,b.compact)([(0,l.t)(["paywall_checkout.future_payments.header_installments.first_payment",e.paywall_price.interval_type]),"(".concat((0,l.t)("progress_counter",{count:(0,x.hi)(1),total_count:r}),")")]).join(" "),value:M(e)?null==(t=e.future_payments)?void 0:t.formatted_amount_due:void 0}},J={trial_then_value:function(e){var t,r=L(e);return{label:(0,b.compact)([(0,l.t)(["paywall_checkout.future_payments.header_installments.first_payment",e.paywall_price.interval_type]),"(".concat((0,l.t)("progress_counter",{count:(0,x.hi)(1),total_count:r}),")")]).join(" "),value:v(e)?null==(t=e.first_payment)?void 0:t.formatted_amount_due:void 0}},trial_then_upfront_then_value:Q,upfront_then_trial_then_value:function(e){var t,r=L(e),n=(0,b.compact)([(0,l.t)(["paywall_checkout.future_payments.header_installments.first_payment",e.paywall_price.interval_type]),"(".concat((0,l.t)("progress_counter",{count:(0,x.hi)(1),total_count:r}),")")]).join(" ");return M(e)?{label:n,value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,valueWeight:"semibold"}:{label:n,value:void 0}},upfront_then_value:Q,value:function(e){var t,r=L(e);return{label:[(0,l.t)(["paywall_checkout.future_payments.header_installments.next_payment",e.paywall_price.interval_type]),"(".concat((0,l.t)("progress_counter",{count:(0,x.hi)(2),total_count:r}),")")].join(" "),value:M(e)?null==(t=e.future_payments)?void 0:t.formatted_amount_due:void 0}}},K=function(e){var t;return{value:null==e||null==(t=e.future_payments)?void 0:t.formatted_subtotal,hide:!M(e)}},$={trial_then_value:function(e){return{value:e.first_payment.formatted_subtotal,hide:!v(e)}},trial_then_upfront_then_value:K,upfront_then_trial_then_value:K,upfront_then_value:K,value:function(){return{hide:!0}}},X=function(e){var t,r;return{value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,label:(0,l.t)("paywall_checkout.future_payments.one_time_payment_on",{date:null==(r=e.future_payments)?void 0:r.formatted_start_on}),valueWeight:M(e)?"normal":"semibold"}},Y={trial_then_value:function(e){var t,r;return{valueWeight:v(e)?"normal":"semibold",value:null==(t=e.first_payment)?void 0:t.formatted_amount_due,label:(0,l.t)("paywall_checkout.future_payments.one_time_payment_on",{date:null==(r=e.first_payment)?void 0:r.formatted_due_on})}},trial_then_upfront_then_value:function(e){var t,r;return{valueWeight:M(e)?"normal":"semibold",value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,label:(0,l.t)("paywall_checkout.future_payments.one_time_payment_on",{date:null==(r=e.future_payments)?void 0:r.formatted_start_on})}},upfront_then_trial_then_value:X,upfront_then_value:X,value:function(){return{hide:!0}}},ee=function(e){var t,r,n,i;return(0,g.Mf)(e.preview_scenario)?{value:null==(n=e.first_payment)?void 0:n.formatted_amount_due,valueWeight:v(e)?"normal":"semibold",label:(0,l.t)(["paywall_checkout.future_payments.next_payment_on_v2",e.paywall_price.interval_type],{date:null==e||null==(i=e.first_payment)?void 0:i.formatted_due_on})}:{value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,valueWeight:M(e)?"normal":"semibold",label:(0,l.t)(["paywall_checkout.future_payments.next_payment_on_v2",e.paywall_price.interval_type],{date:null==(r=e.future_payments)?void 0:r.formatted_start_on})}},et=function(e){return(e||0)>0},er=function(e){var t,r;return{value:null==e||null==(t=e.future_payments)?void 0:t.formatted_tax,hide:!et(null==e||null==(r=e.future_payments)?void 0:r.tax)}},en={trial_then_value:function(e){var t;return{value:e.first_payment.formatted_tax,hide:!et(null==e||null==(t=e.first_payment)?void 0:t.tax)}},trial_then_upfront_then_value:er,upfront_then_trial_then_value:er,upfront_then_value:er,value:function(){return{hide:!0}}},ei=function(e){var t;return D(e)?en[e.preview_scenario](e):{hide:!et(null==e||null==(t=e.future_payments)?void 0:t.tax)}},eo=Object.assign({},{DiscountLine:function(e){var t=e.preview,r=q(t);return(0,s.jsx)(T.DiscountLine,{preview:t,options:r})},HeaderLine:function(e){var t=e.preview,r=1===L(t)?W[t.preview_scenario](t):J[t.preview_scenario](t);return(0,s.jsx)(T.HeaderLine,{preview:t,options:r})},RegularPriceLine:function(e){var t=e.preview,r=D(t)?$[t.preview_scenario](t):{hide:!M(t)};return(0,s.jsx)(T.RegularPriceLine,{preview:t,options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)("subtotal")},r)})},SubtotalLine:function(e){var t=e.preview,r=1===L(t)?Y[t.preview_scenario](t):ee(t);return(0,s.jsx)(T.SubtotalLine,{preview:t,options:r})},TaxLine:function(e){var t=e.preview,r=ei(t);return(0,s.jsx)(T.TaxLine,{preview:t,options:r})}}),ea=[[eo.HeaderLine,b.noop],[eo.RegularPriceLine,b.noop],[eo.DiscountLine,b.noop],[eo.TaxLine,b.noop],[eo.SubtotalLine,b.noop]],es=r(2056),el=function(e,t,r){var n=(0,b.compact)(["paywall_checkout.future_payments.discount_phrase_v2",e,r&&"forever"!=e?"plus":null]);return(0,l.t)(n,{count:t})},ec=function(e){var t=Number(e.coupon_applications.counter),r=0;return e.preview_scenario===g.Rt.value&&(r=2),[g.Rt.trialThenValue,g.Rt.upfrontThenValue].includes(e.preview_scenario)&&(r=2),[g.Rt.trialThenUpfrontThenValue,g.Rt.upfrontThenTrialThenValue].includes(e.preview_scenario)&&(r=3),Math.max(t-r,0)},eu=[[R.HeaderLine,function(e){var t,r;return(0,g.Mf)(e.preview_scenario)?{label:(0,l.t)("paywall_checkout.future_payments.future_payments_after_x_trial_days",{count:null==e||null==(r=e.trial_period)?void 0:r.days}),value:v(e)?e.first_payment.formatted_amount_due:null}:{value:M(e)?null==e||null==(t=e.future_payments)?void 0:t.formatted_amount_due:null}}],[T.RegularPriceLine,function(e){var t;return(0,g.Mf)(e.preview_scenario)?{hide:!v(e),value:e.first_payment.formatted_subtotal}:{hide:!M(e),value:null==(t=e.future_payments)?void 0:t.formatted_subtotal}}],[T.DiscountLine,function(e){var t,r,n=null==e||null==(t=e.paywall_coupon)?void 0:t.duration,i=ec(e),o=e.coupon_applications.has_more;return(0,g.Mf)(e.preview_scenario)?{hide:0===e.first_payment.discount,value:e.first_payment.formatted_discount,tooltip:n&&i>0&&el(n,i,o)}:{hide:0===((null==e||null==(r=e.future_payments)?void 0:r.discount)||0),tooltip:n&&i>0&&el(n,i,o)}}],[T.TaxLine,function(e){var t,r;return(0,g.Mf)(e.preview_scenario)?{hide:0===e.first_payment.tax,value:e.first_payment.formatted_tax}:{hide:0===((null==e||null==(t=e.future_payments)?void 0:t.tax)||0),value:null==e||null==(r=e.future_payments)?void 0:r.formatted_tax}}],[T.SubtotalLine,function(e){var t;if((0,g.Mf)(e.preview_scenario)){var r,n,i,o,a,s,c=e.paywall_price,u="",d={};return(null==e||null==(r=e.paywall_coupon)?void 0:r.duration)==="forever"?(u=(null==e||null==(i=e.future_payments)?void 0:i.formatted_start_on)||"",d={value:(0,es.I)(e.currency,(null==(o=e.future_payments)?void 0:o.amount_due)||e.paywall_price.amount),valueWeight:"normal"}):(null==e||null==(n=e.paywall_coupon)?void 0:n.duration)==="once"?(u=(null==e||null==(a=e.future_payments)?void 0:a.formatted_start_on)||"",d={value:(0,es.I)(e.currency,e.paywall_price.amount),valueWeight:"normal"}):(u=e.first_payment.formatted_due_on,d={value:null==e||null==(s=e.first_payment)?void 0:s.formatted_amount_due,valueWeight:v(e)?"normal":"semibold"}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,l.t)(["paywall_checkout.future_payments.payments_starting_on_phrase",c.price_type,c.interval_type],{date:u})},d)}return{value:null==e||null==(t=e.future_payments)?void 0:t.formatted_amount_due,valueWeight:M(e)?"normal":"semibold"}}]];function ed(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ef=[[R.HeaderLine,b.noop],[R.SubtotalLine,b.noop],[R.DiscountLine,b.noop],[R.TaxLine,b.noop]],ep={default:(ed(o={},h.E4.subscription,ef),ed(o,h.E4.installments,ef),o),paywall_customization:(ed(a={},h.E4.subscription,eu),ed(a,h.E4.installments,ea),a)};function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eb=function(e){var t=e.preview,r=e.className,n=e.variant;if("onetime"===t.paywall_price.price_type)return null;var i=(ep[void 0===n?p:n]||ep[p])[t.paywall_price.price_type];return(0,s.jsx)(f.g,{className:(0,d.A)("gap-y-2 border-t",r),children:(0,s.jsx)(u.Fragment,{children:i.map(function(e){var r=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return em(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return em(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return(0,r[0])({preview:t,options:(0,r[1])(t)||{}})})},Math.random())})},eh=r(57363),ey=r(70434),ev={xs:c.Z.LabelXs,sm:c.Z.LabelSm,md:c.Z.LabelMd,default:c.Z.LabelMd},eg=function(e){var t=e.className,r=e.label,n=e.labelSize,i=e.labelWeight,o=e.labelColor,a=e.labelClassName,l=e.tooltip,u=e.value,f=e.valueSize,p=void 0===f?"sm":f,m=e.valueColor,b=e.valueWeight,h=e.hide,y=e.dataTestId;if(void 0!==h&&h)return null;var v=ev[void 0===n?"sm":n]||ev.default,g="sm"===p?c.Z.LabelSm:"md"===p?c.Z.LabelMd:c.Z.LabelLg;return(0,s.jsxs)("div",{className:(0,d.A)(t,"flex flex-row items-center justify-between space-x-2 whitespace-nowrap md:space-x-3"),"data-testid":y,children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-2 whitespace-normal",children:[(0,s.jsx)(v,{weight:void 0===i?"normal":i,color:o,children:(0,s.jsx)("span",{className:void 0===a?"":a,children:r})}),l&&(0,s.jsx)(ey.Y,{dataTestId:"checkout-form-preview-entry-tooltip",className:"inline-flex",content:l,children:(0,s.jsx)(eh.JO,{type:"16-question-mark",size:16,color:"text-primary"})})]}),u&&(0,s.jsx)(g,{weight:void 0===b?"normal":b,color:void 0===m?"text-primary":m,children:u})]})},e_=function(e){var t,r=null==(t=e.remaining_payments)?void 0:t.installments_preview.reduce(U,{discounted:{quantity:0,singleInstallmentAmountDue:0,totalAmountDue:0}});if(!(null==r?void 0:r.discounted)||(null==r?void 0:r.discounted.quantity)===0)return{hide:!0};var n=(0,es.I)(e.currency,(null==r?void 0:r.discounted.singleInstallmentAmountDue)||0);return{label:(0,l.t)(["paywall_checkout.future_payments.discounted_installments",e.paywall_price.interval_type],{count:null==r?void 0:r.discounted.quantity}),value:"".concat(null==r?void 0:r.discounted.quantity,"x ").concat(n)}},ex=function(e){var t,r=null==(t=e.remaining_payments)?void 0:t.installments_preview.reduce(U,{standard:{quantity:0,singleInstallmentAmountDue:0,totalAmountDue:0}});if(!(null==r?void 0:r.standard)||(null==r?void 0:r.standard.quantity)===0||(null==r?void 0:r.standard.totalAmountDue)===0)return{hide:!0};var n=(0,es.I)(e.currency,(null==r?void 0:r.standard.singleInstallmentAmountDue)||0);return{label:(0,l.t)(["paywall_checkout.future_payments.standard_installments",e.paywall_price.interval_type],{count:null==r?void 0:r.standard.quantity}),value:"".concat(null==r?void 0:r.standard.quantity,"x ").concat(n)}},ej=function(e){var t,r;return{label:(0,l.t)(["paywall_checkout.future_payments.remaining_payments",e.paywall_price.interval_type],{count:null==(t=e.remaining_payments)?void 0:t.installments_preview.length}),labelWeight:"semibold",valueWeight:"semibold",value:(0,es.I)(e.currency,(null==e||null==(r=e.remaining_payments)?void 0:r.total_amount_due)||0)}},ew=Object.assign({},{TitleLine:function(e){var t=ej(e.preview);return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))},StandardInstallmentsLine:function(e){var t=ex(e.preview);return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))},DiscountedInstallmentsLine:function(e){var t=e_(e.preview);return(0,s.jsx)(eP.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))}}),eO=r(42612),eS=r(99103),ek=function(e){var t=e.preview,r=e.variant;return(0,s.jsx)(f.g,{className:"gap-y-3 border-t py-8",children:(0,s.jsx)(eP.PreviewEntry,{label:(0,s.jsxs)(s.Fragment,{children:[(0,l.t)("paywall_checkout.amount_due"),(void 0===r?p:r)===p&&(0,s.jsx)(eO.f,{preview:t,properties:eS.z8})]}),labelClassName:"flex flex-row gap-x-2 items-baseline",labelSize:"md",labelWeight:"semibold",value:t.formatted_amount_due_now,valueSize:"lg",valueWeight:"semibold",dataTestId:"checkout-form-preview-total-due-today"})})},eP=Object.assign(function(e){var t=e.preview;return(0,s.jsxs)("div",{className:"flex flex-col gap-y-6 md:pt-6",children:[(0,s.jsx)("div",{className:"mb-4 flex flex-row items-center",children:(0,s.jsx)(c.Z.LabelLg,{weight:"semibold",children:(0,l.t)("paywall_checkout.order_summary")})}),(0,s.jsx)(E,{className:"pb-4",preview:t}),(0,s.jsx)(eb,{className:"py-4",preview:t}),(0,s.jsx)(ek,{preview:t})]})},{ModalPreviewTemplate:function(e){var t=e.preview;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(eP.FirstPaymentPreview,{preview:t,className:"pb-4",variant:m}),(0,s.jsx)(eP.PaymentAfterTrialPreview,{preview:t,className:"py-4",variant:m}),(0,s.jsx)(eP.FuturePaymentsPreview,{preview:t,className:"py-4",variant:m}),(0,s.jsx)(eP.RemainingPaymentsPreview,{preview:t,className:"py-4",variant:m}),(0,s.jsx)(eP.PaymentSchedulePreview,{preview:t,className:"py-4",variant:m}),(0,s.jsx)(eP.TotalDueTodayPreview,{preview:t})]})},FirstPaymentPreview:E,FuturePaymentsPreview:eb,TotalDueTodayPreview:ek,ProratedCreditPreview:function(e){var t=e.preview,r=e.className,n=t.first_payment,i=n.prorated_credit_description,o=n.prorated_credit_amount,a=n.formatted_prorated_credit_amount;return i&&0!==o?(0,s.jsxs)(f.g,{className:(0,d.A)("gap-y-1 border-t",r),children:[(0,s.jsx)(eP.PreviewEntry,{label:(0,l.t)("paywall_checkout.prorated_credit"),labelWeight:"semibold",value:a,valueColor:o<0?"text-green-600":"text-primary",dataTestId:"checkout-form-preview-prorated-credit"}),(0,s.jsx)(c.Z.LabelXs,{children:i})]}):null},PaymentAfterTrialPreview:function(e){var t=e.preview,r=e.className;if(e.variant===p||![g.Rt.trialThenUpfrontThenValue].includes(t.preview_scenario)||!t.trial_period)return null;var n=t.first_payment.discount<0,i=t.first_payment.tax>0,o=i||n;return(0,s.jsxs)(f.g,{className:(0,d.A)("gap-y-2 border-t",r),children:[(0,s.jsx)(eg,{label:(0,l.t)("paywall_checkout.payment_after_trial.intro_fee_after_x_trial_days",{count:t.trial_period.days}),labelWeight:"semibold",value:o?t.first_payment.formatted_amount_due:void 0,valueWeight:o?"semibold":"normal"}),o&&(0,s.jsx)(eg,{label:(0,l.t)("subtotal"),value:t.first_payment.formatted_subtotal}),n&&(0,s.jsx)(eg,{label:(0,l.t)("paywall_checkout.coupon.discount"),valueColor:"text-green-600",value:t.first_payment.formatted_discount}),i&&(0,s.jsx)(eg,{label:(0,l.t)("paywall_checkout.coupon.tax"),value:t.first_payment.formatted_tax}),(0,s.jsx)(eg,{label:(0,l.t)("paywall_checkout.payment_after_trial.onetime_payment_due_on",{date:t.first_payment.formatted_due_on}),value:t.first_payment.formatted_amount_due,valueWeight:o?"normal":"semibold"})]})},RemainingPaymentsPreview:function(e){var t,r,n=e.preview,i=e.className;if(e.variant===p||"installments"!==n.paywall_price.price_type)return null;var o=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},n),r=r={remaining_payments:z(n)},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);return(null==o?void 0:o.remaining_payments)?(0,s.jsxs)(f.g,{className:(0,d.A)("gap-y-2 border-t",i),children:[(0,s.jsx)(ew.TitleLine,{preview:o}),(0,s.jsx)(ew.DiscountedInstallmentsLine,{preview:o}),(0,s.jsx)(ew.StandardInstallmentsLine,{preview:o})]}):null},PaymentSchedulePreview:function(e){var t,r,n=e.className,i=e.preview;return e.variant!==p&&(null==i||null==(t=i.future_payments)?void 0:t.payment_schedule_line)?(0,s.jsx)(f.g,{className:(0,d.A)("gap-y-2 border-t",n),children:(0,s.jsx)(eP.PreviewEntry,{label:(0,l.t)("paywall_checkout.payment_schedule",{payment_sentence:null==(r=i.future_payments)?void 0:r.payment_schedule_line}),labelSize:"xs",labelWeight:"medium",labelColor:"text-default",dataTestId:"checkout-form-payment-schedule"})}):null},PreviewEntry:eg})},99103:function(e,t,r){"use strict";r.d(t,{BD:()=>s,YH:()=>o,z8:()=>a});var n="!bg-blue-100 py-1 px-2",i="!text-blue-800 font-medium",o={trial_then_value:{labelLocale:"price_badge",className:n,labelClassName:i},trial_then_upfront_then_value:{labelLocale:"price_badge",className:n,labelClassName:i},upfront_then_trial_then_value:{labelLocale:"price_badge",className:"!bg-tertiary text-dark px-2 py-1",labelClassName:"!text-primary font-medium"},value:null,upfront_then_value:null},a={trial_then_value:{labelLocale:"free_trial",className:n,labelClassName:i},trial_then_upfront_then_value:{labelLocale:"free_trial",className:n,labelClassName:i},upfront_then_trial_then_value:{labelLocale:"paid_trial",className:"!bg-tertiary text-dark px-2 py-1",labelClassName:"!text-primary font-medium"},value:null,upfront_then_value:null},s={trial_then_value:{labelLocale:"free_trial",className:n,labelClassName:i},trial_then_upfront_then_value:{labelLocale:"free_trial",className:"!bg-blue-100 py-1  px-2",labelClassName:i},upfront_then_trial_then_value:null,value:null,upfront_then_value:null}},42612:function(e,t,r){"use strict";r.d(t,{f:()=>s});var n=r(85893),i=r(84326),o=r(1168),a=r(24330),s=function(e){var t=e.price,r=e.preview,s=e.properties;if(!t&&!r)return null;var l=s[(null==t?void 0:t.scenario)||(null==r?void 0:r.preview_scenario)||"value"];return l?(0,n.jsx)(a.g,{label:(0,i.t)([l.labelLocale],{count:null==t?void 0:t.trial_days}),className:(0,o.A)("rounded-md border-0",l.className),labelClassName:l.labelClassName,textSizeClassName:"text-xs"}):null}},88656:function(e,t,r){"use strict";r.d(t,{h:()=>i_});var n,i,o,a,s=r(85893),l=r(52293),c=r(12038),u=r(1168),d=r(67294),f=r(88767),p=r(84326),m=r(1553),b=r(93199),h=r(13532),y=r(42856),v=r(94260);function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function _(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)})}}function x(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var j=function(e,t){var r,n,i=(null==e?void 0:e.subscription_processor_id)||(null==e?void 0:e.payment_intent_processor_id)||(null==e?void 0:e.invoice_processor_id),o="".concat(t).concat(i);return null==(n=window.webview)||null==(r=n.paymentSuccessful)||r.call(n),window.open(o,"_self")},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return _(function(){return x(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})()},O=function(e){var t=e.retriesThreshold,r=void 0===t?30:t,n=e.sleepTimeInMilliseconds,i=void 0===n?2e3:n,o=e.executor;return _(function(){var e,t;return x(this,function(n){switch(n.label){case 0:e=null,t=0,n.label=1;case 1:if(!(t<r))return[3,5];return[4,o()];case 2:if(e=n.sent())return[3,5];return[4,w(i)];case 3:n.sent(),n.label=4;case 4:return t++,[3,1];case 5:return[2,e]}})})()},S=function(e,t,r,n,i){return _(function(){var o,a,s,l,c;return x(this,function(u){switch(u.label){case 0:var d;if(o=n.payment_intent_processor_id,a=n.invoice_processor_id,i>30)return e(m.PC),[2];return[4,(d=null!=o?o:a,(0,b.t5)(h.av.communityMemberCharge.show({processorId:d}),{method:"GET"}))];case 1:if(!((s=u.sent())&&s.ok))return[3,6];return[4,s.json()];case 2:if(l=u.sent(),!(0,v.Om)(l))return[3,6];return[4,y.k.complete(n)];case 3:if(!((c=u.sent())&&!c.ok))return[3,5];return[4,c.json()];case 4:return t(u.sent()),[2];case 5:return[2,j(n,r)];case 6:return[4,w()];case 7:return u.sent(),[4,S(e,t,r,n,i+1)];case 8:return u.sent(),[2,void 0]}})})()},k=r(23009),P=r(52770),C=r(51169),N=function(){var e=(0,h.Ph)("payment_intent")||"";return{paymentIntent:e,paymentMethodType:(0,h.Ph)("payment_method_type")||"",isVerifiable:!!e}};function A(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function I(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){A(o,n,i,a,s,"next",e)}function s(e){A(o,n,i,a,s,"throw",e)}a(void 0)})}}function E(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var T=function(){var e=(0,c.Y)(),t=e.checkoutConfirmationUrl,r=e.handleError,n=e.isPerformingVerification,i=e.setIsPerformingVerification,o=N(),a=o.paymentIntent,l=o.paymentMethodType,u=function(){var e=new URL(window.location.href);e.searchParams.delete("payment_intent"),e.searchParams.delete("payment_intent_client_secret"),e.searchParams.delete("redirect_status"),e.searchParams.delete("payment_method_type"),window.history.replaceState({},"",e)},b=(0,f.useMutation)(function(){return y.k.verifications.create({payment_intent_id:a,payment_method_type:l})}),h=function(){return I(function(){var e,t;return E(this,function(r){var n,i,o;switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,b.mutateAsync()];case 1:if(!(e=r.sent())||(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)!="object")return[2,{failure:{message:m.PC}}];if("failure"in e)return[2,e];if("checkout_attempt_status"in e){if("processing"===(o=e.checkout_attempt_status)||"waiting_for_confirmation"===o)return[2,null];return[2,e]}return[3,3];case 2:if(n=t=r.sent(),null!=(i=k.M)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)return[2,t.body];return(0,P.d)(t),[2,{failure:{message:t.message||m.PC}}];case 3:return[2]}})})()},v=function(e){var t=e||m.PC;setTimeout(function(){r({message:t,disablePayButton:!1}),i(!1),u()},2e3)},g=function(e){if(null===e)return void x();if("failure"in e){var r;v((null==e||null==(r=e.failure)?void 0:r.message)||null);return}if(_(e))return void j(e,t);v(null)},_=function(e){return"checkout_attempt_status"in e&&"completed"===e.checkout_attempt_status},x=function(){r({message:m.PC,disablePayButton:!1}),i(!1),u()};return((0,d.useEffect)(function(){I(function(){return E(this,function(e){switch(e.label){case 0:if(!a)return[2];i(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,O({executor:h})];case 2:return g(e.sent()),[3,4];case 3:return e.sent(),v(null),[3,4];case 4:return[2]}})})()},[a]),n)?(0,s.jsx)(C.a,{variant:"fullscreen",message:(0,p.t)("paywalls.checkout.bnpl_processing")}):null},L=r(86664),D=r(76289),M=r(60221);function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){R(e,t,r[t])})}return e}var F={variables:{borderRadius:"12px",colorPrimary:"#19283a"},rules:(R(o={},".AccordionItem",{padding:"1.5rem"}),R(o,".RadioIcon",{width:"18px"}),R(o,".RadioIconOuter",{stroke:"#D4D4D8"}),R(o,".RadioIconOuter--checked",{stroke:"#000000",strokeWidth:"28px"}),R(o,".RadioIconInner--checked",{r:"0"}),o)},z={appearance:{theme:"stripe",variables:{spacingGridRow:"20px"},rules:(R(a={},".Label",{color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"14px",fontWeight:"600",lineHeight:"20px",margin:"0",padding:"0"}),R(a,".Input",{backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(229, 231, 235)",borderColor:"rgb(229, 231, 235)",borderRadius:"8px",borderStyle:"solid",borderWidth:"1px",boxShadow:"none",color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"16px",fontWeight:"400",lineHeight:"18px",margin:"0",marginTop:"4px",outline:"transparent solid 0px",outlineOffset:"0",padding:"12px 16px",transition:"none"}),R(a,".Input:focus",{border:"1px solid rgba(107, 114, 128)",borderColor:"rgba(107, 114, 128)",borderWidth:"1px",boxShadow:"none",outline:"transparent solid 0px",outlineOffset:"0",transition:"none"}),a)}}.appearance,U=(n=B({},z),i=i={variables:B({},z.variables,F.variables),rules:B({},z.rules,F.rules)},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n),Z=r(80676),G=r(98303),q=function(){var e=(0,c.Y)(),t=e.currentCommunityProcessorPaymentMethodConfigurationId,r=e.currentCommunityMemberPaymentProcessorSessionClientSecret,n=e.paywall,i=e.getSelectedPrice,o=e.previewMutation,a=n.currency.code,s=i(),l=o.data,u=(0,G.J)(s,l),f=0===u?Z.hX.setup:(0,M.ZN)(s)?Z.hX.payment:Z.hX.subscription;return(0,d.useMemo)(function(){return{appearance:U,paymentMethodConfiguration:t,customerSessionClientSecret:r,mode:f,currency:a,amount:u}},[t,r,f,a,u])},V=function(e){var t=e.children,r=(0,c.Y)(),n=r.processorId,i=r.processorKey,o=r.setStripeElementsMode,a=(0,d.useMemo)(function(){return(0,D.O)({stripeAccountId:n,stripePublicKey:i,locale:window.locale})},[n,i]),l=q(),u=l.mode;return(0,d.useEffect)(function(){u&&o(u)},[o,u]),(0,s.jsx)(L.Elements,{stripe:a,options:l,children:t})},H=function(e){var t=e.currentCommunity;return t.logo_url?(0,s.jsx)("img",{loading:"lazy",className:"max-h-[2.5rem] lg:max-h-10",src:t.logo_url,alt:""}):t.icon_url?(0,s.jsxs)("div",{className:"flex max-h-[2.5rem] flex-row gap-x-1 lg:max-h-10",children:[(0,s.jsx)("div",{className:"box-border h-7 w-7 p-1 text-center",children:(0,s.jsx)("img",{loading:"lazy",src:t.icon_url,alt:""})}),(0,s.jsx)("span",{className:"text-lg font-medium",children:t.name})]}):(0,s.jsx)("span",{className:"max-h-[2.5rem] text-lg font-medium lg:max-h-10",children:t.name})},W=function(){var e=(0,c.Y)().paywall,t=e.paywall_customization.cover_image_url||(0,h.C9)({filename:"cover_image",signed_id:e.paywall_customization.cover_image});return(0,s.jsx)("img",{loading:"lazy",alt:"",src:t,className:"relative max-h-[303px] w-full rounded-t-xl object-cover","data-testid":"paywall-cover-image"})},Q=r(96486),J=r(34860),K=r(85924);function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var X=function(){var e=(0,K.TC)().isDarkAppearance,t=(0,c.Y)().paywall.event;if(!t)return null;var r=t.cover_image_url,n=t.cover_image,i=t.cover_image_variants;if(!r||!n)return null;var o=e?(0,J.aP)("dark-mode-cover-thumbnail-2x.png"):(0,J.aP)("light-mode-cover-thumbnail-2x.png"),a=!(0,Q.isEmpty)(i),l=$({src:a?i.original:r||o},a?{srcSet:"".concat(i.medium," 640w, ").concat(i.large," 768w, ").concat(i.original," 1024w")}:{});return(0,s.jsx)("img",$({loading:"lazy",alt:"",className:"relative w-full rounded-t-xl object-cover"},l))},Y=r(17617),ee=r(41553),et=function(e){var t=e.description;return(0,s.jsx)(ee.Z.BodySm,{color:"text-default",children:(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:t})})};function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var en=function(e){var t,r=e.description,n=e.className,i=e.shouldShowMoreInitialState,o=e.maximumLength,a=(t=(0,d.useState)(void 0!==i&&i),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return er(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1],f=function(){c(!l)};return(0,s.jsx)("div",{className:(0,u.A)(n),children:(0,s.jsx)(ee.Z.BodySm,{color:"text-default",children:l?(0,s.jsxs)("span",{className:"flex flex-col gap-y-1 whitespace-pre-wrap",children:[r,(0,s.jsx)("button",{type:"button",className:"text-left underline",onClick:f,children:(0,p.t)("show_less")})]}):(0,s.jsxs)("span",{className:"whitespace-pre-wrap",children:["".concat(r.substring(0,void 0===o?160:o),"... "),(0,s.jsx)("button",{type:"button",className:"underline",onClick:f,children:(0,p.t)("show_more")})]})})})},ei={desktop:160,tablet:250,mobile:120},eo=function(e){var t=e.description,r=(0,Y.HE)(),n=(0,Y.j)()?"desktop":r?"tablet":"mobile";return t?t.length<=ei[n]?(0,s.jsx)(et,{description:t}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en,{description:t,className:"hidden lg:block",shouldShowMoreInitialState:!0,maximumLength:ei.desktop}),(0,s.jsx)(en,{description:t,className:"block lg:hidden",maximumLength:ei[n]})]}):null},ea=r(37811),es=function(e){var t;return(null==e||null==(t=e.event)?void 0:t.name)?e.event.name:e.display_name},el=function(e){var t,r,n;return e.description?r=e.description:(null==(t=e.event)?void 0:t.body)&&(r=null==(n=e.event)?void 0:n.body),r},ec=r(80219),eu=r(6915),ed=r(23125),ef=function(e){var t,r,n=e.icon,i=e.dataTestId,o=n.emoji_type,a={},l=K.OR.LIGHT;if(o===ed.BG.EMOJI){var c=n.emoji;a={className:(0,u.A)("!w-6 !p-0"),emptyIcon:d.Fragment,emoji:c}}if(o===ed.BG.CUSTOM&&(a={className:(0,u.A)("!w-6 !p-0 !pr-1"),emptyIcon:d.Fragment,customEmojiUrl:(0,h.Gd)(n),customEmojiDarkUrl:(0,h.Gd)(n)}),o===ed.BG.SHAPES){var f=n.identifier;a={className:(0,u.A)("!w-4 !p-0 !pr-1"),emptyIcon:d.Fragment,customEmojiUrl:(0,eu.c)(f)||null,customEmojiDarkUrl:(0,eu.c)(f)||null}}return(0,s.jsx)("span",{"data-testid":i,children:(0,s.jsx)(ec.S,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={appearance:l},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},ep=function(e){var t=e.background_color,r=e.icon,n=e.label,i=e.text_color;return e.visible?(0,s.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-x-2 rounded-full px-3 py-1",style:{backgroundColor:t},"data-testid":"paywall-badge",children:[(0,s.jsx)(ef,{icon:r,"data-testid":"paywall-badge-icon"}),(0,s.jsx)(ee.Z.LabelXs,{weight:"medium",children:(0,s.jsx)("span",{style:{color:i},"data-testid":"paywall-badge-label",children:n})})]}):null},em=r(26359),eb=r(57363);function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ey=function(){var e,t=(0,d.useRef)(null),r=(e=(0,d.useState)(0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eh(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eh(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],i=r[1];return(0,d.useEffect)(function(){var e=new ResizeObserver(function(e){var t=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value.contentRect.width;l>n&&i(l)}}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}});return t.current&&e.observe(t.current),function(){t.current&&e.unobserve(t.current)}},[n]),{contentRef:t,maxWidth:n}},ev=function(e){var t=e.countdownProperties,r=(0,e.useHook)({countdownProperties:t}).timeRemainingText,n=ey(),i=n.contentRef,o=n.maxWidth;return(0,s.jsxs)("div",{className:"border-primary bg-primary flex flex-row items-center justify-center gap-x-2 rounded-3xl border py-2.5",children:[(0,s.jsx)(eb.JO,{type:"16-clock",viewBox:"0 0 16 16"}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-x-1",children:[(0,s.jsx)(ee.Z.LabelSm,{weight:"medium",children:t.displayed_text}),(0,s.jsx)("div",{ref:i,style:{minWidth:o>0?"".concat(o,"px"):"auto"},children:(0,s.jsx)(ee.Z.LabelSm,{weight:"semibold",children:r})})]})]})},eg=r(46705),e_=r(67803),ex=r(76972),ej=r(69690),ew=r(11699),eO=r(58545),eS=r(61973),ek=r(36808),eP=r.n(ek),eC=function(e,t){var r=new Date(e),n=new Date;if(r<=n)return t&&t(Math.abs(Number(n)-Number(r))),"0s";var i=(0,e_.Z)(r,n),o=(0,ex.Z)(r,n)%24,a=(0,ej.Z)(r,n)%60,s=(0,ew.Z)(r,n)%60;return 0===i&&0===o?"".concat(a,"m : ").concat(s,"s"):i>0?"".concat(i,"d : ").concat(o,"h : ").concat(a,"m"):"".concat(o,"h : ").concat(a,"m")},eN=function(e){var t;return(0,eg.$Z)(e.countdown_type)?{finish_at:"minutes"===e.remaining_time_interval?(0,eO.default)(new Date,e.remaining_time||1).toISOString():(0,eS.Z)(new Date,e.remaining_time||1).toISOString()}:{finish_at:null!=(t=e.finish_at)?t:""}},eA=function(e){var t=eP().get("checkout_countdown_".concat(e));if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Can't parse the Countdown data"),null}};function eI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eI(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eT=function(e){var t=e.countdownProperties,r=(0,c.Y)(),n=r.paywall,i=r.isProcessingPayment,o=r.isPerformingVerification,a=(0,d.useRef)(i||o),s=(0,d.useMemo)(function(){return eA(null==n?void 0:n.id)||eN(t)},[null==n?void 0:n.id,t]).finish_at,l=eE((0,d.useState)(""),2),u=l[0],f=l[1],p=eE((0,d.useState)(0),2),m=p[0],b=p[1];return(0,d.useEffect)(function(){a.current=i||o},[i,o]),(0,d.useEffect)(function(){var e=new URL(window.location.href);e.searchParams.delete(eg.WI),window.history.replaceState({},"",e)},[]),(0,d.useEffect)(function(){if(!s)return void f("");var e=function(){f(eC(s,b))};e();var t=setInterval(e,1e3);return function(){return clearInterval(t)}},[s]),{timeRemainingText:u,exceedTime:m}},eL=function(e){var t=e.countdownProperties,r="";return(0,eg.$Z)(t.countdown_type)&&(r="".concat(t.remaining_time,"m : 0s")),(0,eg.jS)(t.countdown_type)&&(r=eC(t.finish_at||new Date().toISOString())),{timeRemainingText:r}},eD=r(42822),eM="!max-w-6 !p-0 !max-h-6",eR=function(e){var t,r,n=e.icon,i=e.hide,o=n.emoji_type,a={},l=K.OR.LIGHT;if(o===ed.BG.ICONS){var c=n.identifier;a={className:(0,u.A)(eM),emptyIcon:d.Fragment,customEmojiUrl:(0,eD.ir)(c,K.OR.LIGHT)||null,customEmojiDarkUrl:(0,eD.ir)(c,K.OR.LIGHT)||null}}if(o===ed.BG.EMOJI){var f=n.emoji;a={className:(0,u.A)("!p-0 text-[1.5rem] leading-8"),emptyIcon:d.Fragment,emoji:f}}if(o===ed.BG.CUSTOM&&(a={className:(0,u.A)(eM),emptyIcon:d.Fragment,customEmojiUrl:(0,h.Gd)(n),customEmojiDarkUrl:(0,h.Gd)(n)}),o===ed.BG.SHAPES){var p=n.identifier;a={className:(0,u.A)("!p-0 !w-5 !h-5"),emptyIcon:d.Fragment,customEmojiUrl:(0,eu.c)(p)||null,customEmojiDarkUrl:(0,eu.c)(p)||null}}return(0,s.jsx)("div",{className:(0,u.A)("flex h-8 w-8 items-center justify-center",{invisible:i}),"data-testid":"benefit-icon",children:(0,s.jsx)(ec.S,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={appearance:l},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},eB=function(e){var t=e.title,r=e.description,n=e.icon;return(0,s.jsxs)("div",{className:"grid grid-cols-8 gap-x-3 md:grid-cols-12","data-testid":"benefit-item",children:[(0,s.jsx)("div",{className:"col-span-1 max-h-[1.875rem] md:col-span-1",children:(0,s.jsx)(eR,{icon:n})}),(0,s.jsx)("div",{className:"col-span-7 flex items-center md:col-span-11",children:(0,s.jsx)(ee.Z.LabelSm,{weight:"semibold","data-testid":"benefit-title-item",children:t})}),(0,s.jsx)("div",{className:"col-span-1"}),(0,s.jsx)("div",{className:"col-span-7 flex items-center md:col-span-11","data-testid":"benefit-description-item",children:(0,s.jsx)(ee.Z.BodySm,{children:r})})]})},eF=function(e){var t=e.title;return(0,s.jsx)("div",{className:"py-2","data-testid":"benefits-title",children:(0,s.jsx)(ee.Z.TitleSm,{weight:"semibold",children:t})})},ez=function(){var e=(0,c.Y)().paywallCustomization,t=(null==e?void 0:e.benefit_properties)||{enabled:!1,benefits:[]},r=t.enabled,n=t.benefits,i=t.title;return r?(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(eF,{title:i}),(0,s.jsx)("div",{className:"flex flex-col gap-y-2","data-testid":"benefits-container",children:n.map(function(e){return(0,s.jsx)(eB,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),e.id)})})]}):null},eU=r(94473),eZ=function(e){var t=e.children,r=e.dataTestId;return(0,s.jsx)("div",{className:"flex flex-row gap-x-1","data-testid":r,children:t})},eG=function(e){var t=e.color;return(0,s.jsx)(eZ,{dataTestId:"testimonial-quotation-mark",children:(0,s.jsx)(eb.JO,{type:"20-open-quote",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,style:{color:t},viewBox:"0 0 20 20"})})};function eq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var eV=function(e){return{type:"16-star-fill",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,style:{color:e},className:"!h-4 !w-4"}},eH=function(e){var t=e.color;return(0,s.jsxs)(eZ,{dataTestId:"testimonial-stars",children:[(0,s.jsx)(eb.JO,eq({},eV(t))),(0,s.jsx)(eb.JO,eq({},eV(t))),(0,s.jsx)(eb.JO,eq({},eV(t))),(0,s.jsx)(eb.JO,eq({},eV(t))),(0,s.jsx)(eb.JO,eq({},eV(t)))]})},eW=r(67142),eQ=function(e){var t=e.visible,r=e.quote,n=e.name,i=e.avatar_image,o=e.avatar_image_url,a=e.headline,l=e.children;if(!t)return null;var c=i?(0,h.C9)({filename:"avatar_image",signed_id:i}):o;return(0,s.jsxs)("div",{className:"flex flex-col gap-y-3.5","data-testid":"testimonial",children:[l,(0,s.jsx)(ee.Z.BodySm,{"data-testid":"testimonial-quote",children:r}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-3",children:[(0,s.jsx)(eW.sJ,{name:n||(0,p.t)("random"),src:c,size:"10",isFullRounded:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[n&&""!==n&&(0,s.jsx)(ee.Z.LabelSm,{weight:"semibold","data-testid":"testimonial-name",children:n}),a&&""!==a&&(0,s.jsx)(ee.Z.BodySm,{"data-testid":"testimonial-headline",children:a})]})]})]})},eJ=function(){var e=(0,c.Y)().paywallCustomization,t=(null==e?void 0:e.testimonial_properties)||{enabled:!1,testimonials:[]},r=t.enabled,n=t.testimonials;return r?(0,s.jsx)("div",{className:"flex flex-col gap-y-[2.125rem]","data-testid":"testimonials-container",children:n.map(function(e){var t,r;return(0,s.jsxs)(eQ,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:[e.display_style.type===eU.y_.QUOTATION_MARK&&(0,s.jsx)(eG,{color:e.display_style.color}),e.display_style.type===eU.y_.STARS&&(0,s.jsx)(eH,{color:e.display_style.color})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),e.id)})}):null},eK=Object.assign(function(e){var t=e.shouldHide,r=e.className,n=(0,c.Y)(),i=n.paywallCustomization,o=n.checkoutPreviewContext,a=i||{},l=a.testimonial_properties,d=a.benefit_properties;return((null==l?void 0:l.enabled)||(null==d?void 0:d.enabled))&&!t?(0,s.jsxs)("div",{className:(0,u.A)("grid grid-cols-1 gap-y-9 divide-y *:pt-12",r,{"pb-16 md:pb-0":!!o}),children:[(0,s.jsx)(ez,{}),(0,s.jsx)(eJ,{})]}):null},{Badges:function(){var e=(0,c.Y)().paywallCustomization,t=(null==e?void 0:e.badge_properties)||{enabled:!1,badges:[]},r=t.enabled,n=t.badges;return r?(0,s.jsx)("div",{className:"flex flex-row flex-wrap gap-2",children:n.map(function(e){return(0,s.jsx)(ep,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),e.id)})}):null},Countdown:function(){var e=(0,c.Y)(),t=e.paywallCustomization,r=e.checkoutPreviewContext,n=((null==t?void 0:t.countdown_properties)||{enabled:!1}).enabled;if(!(0,em.W)()||!(null==t?void 0:t.countdown_properties)||!n)return null;var i=t.countdown_properties;return r?(0,s.jsx)(ev,{countdownProperties:i,useHook:eL}):(0,s.jsx)(ev,{countdownProperties:i,useHook:eT})}}),e$=r(25152),eX=r(73660),eY=function(e){var t=e.event,r=e.className;if(!(null==t?void 0:t.event_setting_attributes))return null;var n=t.event_setting_attributes,i=n.starts_at,o=n.ends_at,a=n.time_zone,l=n.time_zone_abbreviations,c=n.location_type,d=new Date(i),f=new Date(o),p=(0,eX.lo)(d,f,a),m=[{icon:"16-calendar",text:"".concat(p," (").concat(l,")")},{icon:c===e$.Bq.IN_PERSON||c===e$.Bq.TBD?"16-location":"16-video",text:e$.gP[c]}];return(0,s.jsx)("div",{className:(0,u.A)("flex flex-col gap-y-2",r),children:m.map(function(e){var t=e.icon,r=e.text;return(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(eb.JO,{type:t,size:16,className:"text-default !w-4"}),(0,s.jsx)(ee.Z.LabelXs,{children:r})]},t)})})},e0=r(2056),e1=function(e){var t=e.children;return(0,s.jsxs)("div",{className:"inline-block",children:[(0,s.jsx)(eb.JO,{type:"16-arrow-right",size:16}),t]})},e2=r(42612),e3=r(99103),e6=function(e){var t=e.price;return(0,s.jsx)(e2.f,{price:t,properties:e3.YH})},e4={includeCurrencyCode:!1},e5=function(e){var t=e.prefix,r=e.title,n=e.suffix;return(0,s.jsxs)("span",{className:"inline-block whitespace-nowrap",children:[t&&(0,s.jsx)("span",{className:"pr-1",children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",children:t})}),(0,s.jsx)(ee.Z.LabelMd,{weight:"semibold",children:r}),n&&(0,s.jsx)("span",{className:"pl-1",children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",children:n})})]})},e8=function(e){var t=e.price,r=e.paywall,n=t.upfront_payment_amount?{title:(0,e0.I)(r.currency,t.upfront_payment_amount,e4),suffix:(0,p.t)("intro_fee").toLowerCase()}:null;return n?(0,s.jsx)(e5,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},n)):null},e9=function(e){var t=e.price,r=e.paywall;return(0,s.jsx)(e5,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,M.ZN)(t)?{title:(0,e0.I)(r.currency,t.amount,e4)}:(0,M.t3)(t)?{prefix:"".concat(t.installments_count,"x"),title:(0,e0.I)(r.currency,Math.floor((t.amount-(t.upfront_payment_amount||0))/(t.installments_count||1)),e4),suffix:"/".concat((0,p.t)(["paywall_checkout.price_value.interval_suffix",t.interval_type]))}:{title:(0,e0.I)(r.currency,t.amount,e4),suffix:"/".concat((0,p.t)(["paywall_checkout.price_value.interval_suffix",t.interval_type]))}))},e7=Object.assign(e9,{Value:e9,Badge:e6,IntroFee:e8,Arrow:e1,Title:e5,BadgeWithArrow:function(e){return(0,s.jsx)(e1,{children:(0,s.jsx)(e6,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})},IntroFeeWithArrow:function(e){return(0,s.jsx)(e1,{children:(0,s.jsx)(e8,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})},ValueWithArrow:function(e){return(0,s.jsx)(e1,{children:(0,s.jsx)(e9,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})}}),te={value:[e7],trial_then_value:[e7.Badge,e7.ValueWithArrow],trial_then_upfront_then_value:[e7.Badge,e7.IntroFeeWithArrow,e7.ValueWithArrow],upfront_then_value:[e7.IntroFee,e7.ValueWithArrow],upfront_then_trial_then_value:[e7.IntroFee,e7.BadgeWithArrow,e7.ValueWithArrow]},tt={subscription:function(e){return["settings.paywall_prices.subscription.title",e]},onetime:function(){return["settings.paywall_prices.onetime.type_qualifier"]},installments:function(){return[]}},tr=function(e){var t=e.price,r=e.paywall,n=(0,M.QT)(t)||(0,M.ZN)(t)?(0,p.t)(tt[t.price_type](t.interval_type)):(0,p.t)(["paywall_checkout.price_value.title",t.price_type,t.interval_type],{total_amount:(0,e0.I)(r.currency,t.amount,e4)}),i=te[t.scenario];return(0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsx)("div",{className:"leading-6",children:i.map(function(e){return e({price:t,paywall:r})})},t.id),(0,s.jsx)(ee.Z.LabelXs,{color:"text-default",children:n})]})},tn=r(99595),ti=function(e){var t=e.id,r=e.value,n=e.isSelected,i=e.label,o=e.dataTestId;return(0,s.jsx)("label",{className:(0,u.A)("mb-0 p-4 first:rounded-t-xl last:rounded-b-xl",{"bg-secondary":n}),htmlFor:t,"data-testid":o,"data-selected":n,children:(0,s.jsx)(tn.Y,{id:t,value:r,labelWrapperClassName:"w-full",labelClassName:"flex flex-col gap-y-1 w-full",label:i,checked:n,name:"paywall_price_id"})})},to=r(46051),ta=r(39905),ts=function(e){var t,r,n=e.setAddCouponClickedState,i=(0,l.Gc)().watch,o=(0,c.Y)(),a=o.couponPreviewMutation,u=o.clearCouponCode,d=i("coupon_code"),f=null==a||null==(t=a.data)?void 0:t.paywall_coupon,m=null==a||null==(r=a.data)?void 0:r.currency;return a.isLoading?null:(0,s.jsxs)("div",{className:"bg-secondary flex w-fit flex-row items-center justify-between gap-x-3 rounded-lg px-4 py-2.5","data-testid":"checkout-form-coupon-code",children:[(0,s.jsx)(eb.JO,{type:"16-tags-topics",size:16,className:"text-default"}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(ee.Z.BodySm,{weight:"medium",color:"text-dark",children:d}),f&&m&&(0,s.jsx)(ee.Z.LabelXs,{weight:"normal",color:"text-default",children:(0,p.t)(["paywall_checkout.coupon_badge",f.duration],{amount:"PaywallCoupons::Percent"===f.type?"".concat(Number(null==f?void 0:f.amount),"%"):(0,e0.I)(m,Number(null==f?void 0:f.amount),{amountInCents:!1,includeCurrencyCode:!1}),count:null==f?void 0:f.duration_in_months})})]}),(0,s.jsxs)(ta.z,{small:!0,className:"text-default !p-0",type:"button",variant:"plain",onClick:function(){n(!1),u({resetPreview:!0})},"data-testid":"checkout-form-remove-coupon",children:[(0,s.jsx)("span",{className:"sr-only",children:(0,p.t)("paywall_checkout.form.buttons.remove_coupon")}),(0,s.jsx)(eb.JO,{type:"24-close",size:24,className:"text-default"})]})]})},tl=r(94184),tc=r.n(tl),tu=(0,d.forwardRef)(function(e,t){var r,n,i=e.className,o=e.error,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","error"]);return(0,s.jsx)("input",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,u.A)(i,"placeholder:text-light h-11 grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0 placeholder:opacity-100 focus:border focus:border-gray-500 focus:shadow-none focus:outline-0 focus:ring-0",{"border-red-600 focus:border-red-600":void 0!==o&&o})},a),n=n={ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))});function td(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}tu.displayName="CheckoutFormInput";var tf=function(e){var t,r,n=e.autoFocus,i=e.className,o=e.name,a=e.placeholder,c=e.options,u=e.type,d=e.children,f=e.disabled,m=e.wrapperClassName,b=e.checkoutFormClassName,h=e.onBlur,y=e.onKeyDown,v=(0,l.Gc)(),g=v.register,_=v.formState.errors,x=(0,l.U2)(_,o),j=g(o,void 0===c?{}:c);return(0,s.jsxs)("div",{className:tc()(i,"flex flex-col gap-y-1"),children:[(0,s.jsxs)("div",{className:tc()("flex flex-row gap-x-2.5",m),children:[(0,s.jsx)(tu,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({autoFocus:void 0!==n&&n,type:u,error:!!x,placeholder:a},j),r=r={onBlur:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,j.onBlur(e)];case 1:return t.sent(),h&&h(e),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){td(o,n,i,a,s,"next",e)}function s(e){td(o,n,i,a,s,"throw",e)}a(void 0)})})()},disabled:f,className:b,onKeyDown:y},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),d]}),x&&"password"!==o&&(0,s.jsx)(ee.Z.LabelXs,{weight:"normal",color:"text-feedback-error",children:(0,p.t)("paywall_checkout.form.errors.".concat(o,"_").concat(String(x.type)))})]})},tp=function(e){var t=e.applyCoupon,r=(0,l.Gc)(),n=r.watch,i=r.setError,o=(0,c.Y)().couponPreviewMutation,a=n("coupon_code");(0,d.useEffect)(function(){var e,t,r,n,a,s,l,c,u;(null==(n=o.error)||null==(r=n.body)||null==(t=r.error_details)||null==(e=t.code)?void 0:e.match(/coupon_/))&&i("coupon_code",{type:null==(c=o.error)||null==(l=c.body)||null==(s=l.error_details)||null==(a=s.code)?void 0:a.replace("coupon_",""),message:null==(u=o.error)?void 0:u.message})},[o.error]);var u=function(e){return!["",void 0,null].includes(null==e?void 0:e.trim())};return(0,s.jsx)(tf,{type:"text",name:"coupon_code",disabled:o.isLoading,checkoutFormClassName:"grow w-[150px] md:w-auto",wrapperClassName:"w-full",onKeyDown:function(e){"Enter"===e.key&&u(a)&&(e.preventDefault(),t())},children:a&&(0,s.jsx)(ta.z,{large:!0,type:"button",className:"grow md:grow-0",variant:"secondary",disabled:o.isLoading,onClick:function(){u(a)&&t()},"data-testid":"checkout-form-apply-coupon",children:o.isLoading?(0,s.jsx)(C.a,{}):(0,s.jsx)(ee.Z.LabelSm,{weight:"medium",children:(0,p.t)("paywall_checkout.form.buttons.apply_coupon")})})})};function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tm(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var th=r(28890),ty=r(76896),tv=function(e){var t,r=e.className,n=(0,c.Y)().previewMutation,i=n.data;if(!i||n.isLoading)return(0,s.jsx)(ty.gi,{variant:"row",lg:!0,className:r});if(i.first_payment.discount>=0||(null==(t=i.trial_period)?void 0:t.free))return null;var o=(0,e0.I)(i.currency,-1*i.first_payment.discount);return(0,s.jsx)("div",{className:(0,u.A)("text-right first:w-full first:text-right",r),children:(0,s.jsx)(ee.Z.LabelXs,{weight:"medium",color:"text-green-success",children:(0,p.t)("total_savings_today",{formatted_discount:o})})})},tg=r(34870);function t_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tx=function(e){if(e){var t=e.match(/(\d\d\d\d)-(\d\d)-(\d\d)/);if(t){var r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,4)||function(e,t){if(e){if("string"==typeof e)return t_(e,4);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t_(e,t)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[1],i=r[2],o=r[3],a=new Date(Number(n),Number(i)-1,Number(o));return(0,tg.w)({dateTime:a,format:tg.f.short_month_and_date_with_year})}}},tj=function(e){var t=e.className,r=(0,c.Y)().previewMutation,n=r.data;if(!n||r.isLoading)return(0,s.jsx)(ty.gi,{variant:"row",lg:!0,className:t});var i=[];if((((null==n||null==(a=n.first_payment)?void 0:a.tax)||0)>0||((null==n||null==(l=n.future_payments)?void 0:l.tax)||0)>0)&&i.push((0,p.t)("tax_included")),(0,M.Mf)(n.preview_scenario)||(0,M.$v)(n.preview_scenario)){var o=tx(n.first_payment.due_on);o&&i.push((0,p.t)("next_payment",{next_payment_date:o}))}else{var a,l,d,f=tx(null==(d=n.future_payments)?void 0:d.start_on);n.future_payments&&f&&i.push((0,p.t)("next_payment",{next_payment_date:f}))}return(0,s.jsx)("div",{className:(0,u.A)("h-full w-full",t),children:(0,s.jsx)(ee.Z.BodyXs,{color:"text-default",children:i.join(" ")})})},tw=function(){var e=(0,c.Y)().previewMutation.data;return(0,s.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[(0,s.jsx)(ee.Z.LabelMd,{weight:"semibold",children:(0,p.t)("paywall_checkout.amount_due")}),e&&(0,s.jsx)(e2.f,{preview:e,properties:e3.BD})]})},tO=function(){var e,t,r=(0,c.Y)().previewMutation,n=r.data;if(!n||r.isLoading)return(0,s.jsx)("div",{className:"flex flex-row items-center gap-x-1.5",children:(0,s.jsx)(ty.gi,{variant:"row",lg:!0})});var i=!(null==n||null==(e=n.trial_period)?void 0:e.free)&&(null==(t=n.first_payment)?void 0:t.discount)<0;return(0,s.jsxs)("div",{className:"flex flex-row gap-x-1.5",children:[i&&(0,s.jsx)(ee.Z.LabelMd,{weight:"semibold",color:"text-disabled",children:(0,s.jsx)("span",{className:"line-through",children:(0,e0.I)(n.currency,n.first_payment.price_amount,{includeCurrencyCode:!1})})}),(0,s.jsx)(ee.Z.LabelMd,{weight:"semibold",children:(0,e0.I)(n.currency,n.amount_due_now)})]})},tS=Object.assign(function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tw,{}),(0,s.jsx)(tO,{})]})},{Value:tO}),tk=r(57105),tP=r(84208),tC=r(37416),tN=r(85633),tA=tk.gk.create(function(e){var t=e.preview,r=(0,tk.dd)(),n=function(){r.hide()};return(0,Y.kK)()?(0,s.jsxs)(tC.x,{isOpen:r.visible,onClose:n,shouldShowCloseButton:!0,className:"!h-auto !max-h-[80%] rounded-t-2xl",children:[(0,s.jsx)(tC.x.Header,{className:"border-none !py-4",children:(0,s.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,s.jsx)(ee.Z.TitleMd,{weight:"font-bold",children:(0,p.t)("paywall_checkout.order_summary")}),(0,s.jsx)(tN.o,{onClick:n})]})}),(0,s.jsx)(tC.x.Body,{className:"px-5",children:(0,s.jsx)(th.$.ModalPreviewTemplate,{preview:t})})]}):(0,s.jsx)(tP.W,{title:(0,p.t)("paywall_checkout.order_summary"),titleClassName:"!text-left !px-0",isOpen:r.visible,onClose:n,children:(0,s.jsx)(th.$.ModalPreviewTemplate,{preview:t})})}),tI=function(e){var t=e.className,r=(0,c.Y)().previewMutation,n=(0,tk.dd)(tA);return(0,s.jsx)(ta.z,{variant:"link",small:!0,className:(0,u.A)("!p-0 text-left",t),type:"button",onClick:function(){(null==r?void 0:r.data)&&n.show({preview:null==r?void 0:r.data})},disabled:r.isLoading,children:(0,s.jsx)(ee.Z.LabelXs,{color:(0,u.A)("underline",{"text-secondary":!r.isLoading,"text-lightest":r.isLoading}),children:(0,s.jsx)("span",{className:"cursor-pointer",children:(0,p.t)("view_order_details")})})})},tE=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,s.jsx)("div",{className:"flex flex-row justify-between",children:(0,s.jsx)(tS,{})}),(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)(tI,{}),(0,s.jsx)(tv,{})]})]}),(0,s.jsx)(tj,{})]})},tT=Object.assign(tE,{CheckoutPagePreview:tE,MobileFixedOnTopPreview:function(){var e=(0,c.Y)().previewMutation.data;return(0,s.jsxs)("div",{className:"bg-primary fixed z-10 flex w-full flex-row justify-between border-b px-5 py-4 md:hidden",children:[(0,s.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[(0,s.jsx)(tI,{}),e&&(0,s.jsx)(e2.f,{properties:e3.BD,preview:e})]}),(0,s.jsx)(tS.Value,{})]})}}),tL=function(e){var t=e.variant,r=void 0===t?"classical":t,n=(0,c.Y)(),i=n.previewMutation,o=n.hasAlreadyPurchased,a=n.paywall,l=i.data;return"with_modals"===r?(0,s.jsx)(tT,{}):"mobile_fixed_on_top"===r?(0,s.jsx)(tT.MobileFixedOnTopPreview,{}):i.isLoading?(0,s.jsx)(C.a,{variant:"default"}):(0,to.y9)(o,a)||i.isIdle||i.isError||!l?null:(0,s.jsx)(th.$,{preview:l})},tD=r(72530),tM=r(44497),tR=function(e){return(null==e?void 0:e.status)==="requires_action"},tB=function(e){return(null==e?void 0:e.status)==="succeeded"},tF=function(e){var t;return(null==e?void 0:e.name)?t=e.name:((null==e?void 0:e.first_name)||(null==e?void 0:e.last_name))&&(t=[e.first_name,e.last_name].filter(function(e){return!!e}).join(" ").trim()),t};function tz(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tU(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tz(o,n,i,a,s,"next",e)}function s(e){tz(o,n,i,a,s,"throw",e)}a(void 0)})}}function tZ(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tG=function(){var e=(0,L.useStripe)(),t=(0,c.Y)(),r=t.currentCommunity,n=t.stripePaymentMethodType,i=t.currentUser,o=t.memberBillingInfo,a=function(e){throw Error(null==e?void 0:e.message,{cause:e.body})},s="Stripe has not been initialized.",l=function(e,t){return(null==o?void 0:o[e])||t.billing_info_attributes[e]},u=(0,f.useMutation)(function(t){return tU(function(){return tZ(this,function(r){if(!e)throw(0,P.d)(s),Error(s);return[2,e.confirmKlarnaPayment(t.payment_intent_client_secret,{payment_method:{billing_details:{email:t.email,address:{country:l("address_country",t)}}},return_url:(0,m.xB)(to.Lt.KLARNA)})]})})()}),d=(0,f.useMutation)(function(t){return tU(function(){return tZ(this,function(r){if(!e)throw(0,P.d)(s),Error(s);return[2,e.confirmAfterpayClearpayPayment(t.payment_intent_client_secret,{payment_method:{billing_details:{email:t.email,name:t.name,address:{country:l("address_country",t),line1:l("address_line1",t),city:l("address_city",t),postal_code:l("address_postal_code",t)}}},shipping:{name:t.name,address:{country:l("address_country",t),line1:l("address_line1",t),city:l("address_city",t),postal_code:l("address_postal_code",t)}},return_url:(0,m.xB)(to.Lt.AFTERPAY_CLEARPAY)})]})})()}),p=(0,f.useMutation)(function(t){return tU(function(){return tZ(this,function(r){if(!e)throw(0,P.d)(s),Error(s);return[2,e.confirmAffirmPayment(t.payment_intent_client_secret,{payment_method:{billing_details:{email:t.email,name:t.name,address:{country:l("address_country",t),line1:l("address_line1",t),city:l("address_city",t),state:l("address_state",t),postal_code:l("address_postal_code",t)}}},shipping:{name:t.name,address:{country:l("address_country",t),line1:l("address_line1",t),city:l("address_city",t),state:l("address_state",t),postal_code:l("address_postal_code",t)}},return_url:(0,m.xB)(to.Lt.AFFIRM)})]})})()}),b=(0,f.useMutation)(function(e){return y.k.prepare(e)});return{onSubmitMutation:(0,f.useMutation)(function(e){return tU(function(){return tZ(this,function(t){switch(t.label){case 0:return e.payment_method_type=n,[4,tU(function(){var t,n,o,s,l,c,f,m,h,y,v,g;return tZ(this,function(_){switch(_.label){case 0:return t=e.name,n=e.email,o=e.payment_method_type,s=e.paywall_price_id,l=e.coupon_code,c=e.coupon_code_applied,f=e.community_member_billing_info_attributes,m=e.password,h={name:t,email:n,payment_method_type:o,paywall_price_id:s,community_id:r.id,coupon_code:c?l:void 0,community_member_billing_info_attributes:f,password:m},[4,b.mutateAsync(h,{onSuccess:function(){},onError:a})];case 1:if(!(y=_.sent()))return[3,9];if(v={payment_intent_client_secret:y.payment_intent_client_secret,billing_info_attributes:f,email:n||(null==i?void 0:i.email),name:t||tF(i)},!(0,to.dm)(e.payment_method_type))return[3,3];return[4,u.mutateAsync(v)];case 2:case 4:case 6:return g=_.sent(),[3,8];case 3:if(!(0,to.AL)(e.payment_method_type))return[3,5];return[4,d.mutateAsync(v)];case 5:if(!(0,to.Br)(e.payment_method_type))return[3,7];return[4,p.mutateAsync(v)];case 7:throw(0,P.d)("Unsupported payment method type: ".concat(e.payment_method_type)),Error("Unsupported payment method type: ".concat(e.payment_method_type));case 8:if(!tB(g))throw b.reset(),Error("Buy Now Pay Later payment expired");_.label=9;case 9:return[2,y]}})})()];case 1:return t.sent(),[2]}})})()}),mutations:{prepareMutation:b}}},tq=r(70442),tV=r(98684),tH=function(){var e,t,r,n,i,o,a=(0,c.Y)().memberBillingInfo,s=(0,l.Gc)().getValues("name")||"";return{paymentMethodDataParams:(0,Q.isEmpty)(a)?{payment_method_data:{billing_details:{name:s}}}:{payment_method_data:{billing_details:{address:(t=(e=a||{}).address_line1,r=e.address_line2,n=e.address_city,i=e.address_state,o=e.address_postal_code,{line1:t,line2:r,city:n,state:i,country:e.address_country,postal_code:o}),name:s}}}}};function tW(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tQ(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tW(o,n,i,a,s,"next",e)}function s(e){tW(o,n,i,a,s,"throw",e)}a(void 0)})}}function tJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function t$(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tX=function(){var e=(0,L.useStripe)(),t=(0,L.useElements)(),r=(0,tq.k6)(),n=(0,c.Y)(),i=n.currentCommunity,o=n.checkoutConfirmationUrl,a=n.loginRedirectUrl,s=n.handleError,l=n.setIsProcessingPayment,u=n.getSelectedPrice,d=n.isCardInfoRequired,p=n.setPaywallFailure,b=n.resetPasswordRedirectUrl,h=n.isMemberUsingSavedPaymentMethod,v=n.isPaywallsAsyncCardPaymentsEnabled,g=n.stripePaymentMethodType,_=n.stripeElementsMode,x=tH().paymentMethodDataParams,j=_===Z.hX.setup,w=function(e){if((0,tV.kW)(e))p(e.failure);else s((0,m.bE)(e,{loginUrl:a,resetPasswordRedirectUrl:b}))},O=function(e,t){return tQ(function(){return t$(this,function(r){switch(r.label){case 0:return[4,S(s,w,o,e,t)];case 1:return[2,r.sent()]}})})()},k=function(){return tQ(function(){var e;return t$(this,function(r){switch(r.label){case 0:return[4,t.submit()];case 1:if(e=r.sent().error)return s({message:e.message,disablePayButton:!1}),l(!1),[2,!1];return[2,!0]}})})()},C=u();return{onSubmitMutation:(0,f.useMutation)(function(n){return tQ(function(){var o,a,c,u,f;return t$(this,function(p){var b,_,S;switch(p.label){case 0:if(o=n,l(!0),!t||!e)throw Error("Stripe has not been initialized.");p.label=1;case 1:if(p.trys.push([1,12,,13]),!d)return[3,10];return[4,k()];case 2:if(!p.sent())return[2];if(!j)return[3,10];return[4,y.k.prepare_DEPRECATED(i.id,C.id)];case 3:if(!(a=p.sent()))return[2];if(a.ok)return[3,5];return[4,a.json()];case 4:return w(p.sent()),l(!1),[2];case 5:return[4,a.json()];case 6:return c=p.sent().setup_intent.client_secret,[4,e.retrieveSetupIntent(c)];case 7:if(!(!(u=p.sent()).setupIntent||"succeeded"!==u.setupIntent.status))return[3,9];return[4,e.confirmSetup({elements:t,clientSecret:c,confirmParams:tJ({return_url:window.location.href},x),redirect:"if_required"})];case 8:u=p.sent(),p.label=9;case 9:if(u.error)return s({message:u.error.message,disablePayButton:!1}),l(!1),[2];o.payment_method_processor_id=u.setupIntent.payment_method,p.label=10;case 10:return[4,(b=o,tQ(function(){var n,i;return t$(this,function(o){switch(o.label){case 0:return[4,y.k.create_DEPRECATED({formData:tK(tJ({},b),{payment_method_type:g,community_member_adding_payment_method:!h})})];case 1:if(!((n=o.sent())&&n.ok))return[3,4];return[4,n.json()];case 2:var a;return[4,(a=o.sent(),tQ(function(){var n,i,o,l,c,u,d,f,p,b;return t$(this,function(h){switch(h.label){case 0:if(n=a.payment_intent_processor_id,i=a.payment_intent_client_secret,!(!n&&!i))return[3,2];return[4,O(a,0)];case 1:case 4:return h.sent(),[2];case 2:return[4,e.retrievePaymentIntent(i)];case 3:if((o=h.sent()).error)return s({message:o.error.message,disablePayButton:!0}),[2];if("canceled"===(l=o.paymentIntent).status)return s(m.PC),[2];if("succeeded"!==l.status)return[3,5];return[4,O(a,0)];case 5:if(!j)return[3,7];return[4,k()];case 6:if(!h.sent())return[2];h.label=7;case 7:return[4,e.confirmPayment({elements:t,clientSecret:a.payment_intent_client_secret,confirmParams:tK(tJ({},x),{return_url:(0,m.xB)(g)}),redirect:"if_required"})];case 8:if(c=h.sent(),u=function(e){s(e?{message:e.message,disablePayButton:!1}:m.PC)},v){if(!c.paymentIntent)return u(c.error),[2];return d=(0,m.$v)(g,c.paymentIntent.id),r.replace(d),[2]}if(!(c.error||"succeeded"!==c.paymentIntent.status))return[3,11];return[4,y.k.cancel(tK(tJ({},a),{processor_error:c.error}))];case 9:return[4,null==(p=h.sent())||null==(f=p.json)?void 0:f.call(p)];case 10:if(!(b=h.sent())||b.failure)return w(b),[2];return u(c.error),[2];case 11:return[4,O(tK(tJ({},a),{processor_payment_method_id:c.paymentIntent.payment_method}),0)];case 12:return h.sent(),[2]}})})())];case 3:return o.sent(),[3,6];case 4:return[4,null==n||null==(i=n.json)?void 0:i.call(n)];case 5:w(o.sent()),o.label=6;case 6:return[2]}})})())];case 11:return p.sent(),[3,13];case 12:return _=f=p.sent(),(null!=(S=Error)&&"undefined"!=typeof Symbol&&S[Symbol.hasInstance]?!!S[Symbol.hasInstance](_):_ instanceof S)&&(0,P.d)(f),s(m.PC),[3,13];case 13:return l(!1),[2,void 0]}})})()})}};function tY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t0(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function t1(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){t0(o,n,i,a,s,"next",e)}function s(e){t0(o,n,i,a,s,"throw",e)}a(void 0)})}}function t2(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var t3=function(e){throw Error(null==e?void 0:e.message,{cause:e.body})},t6=function(){var e,t=(0,L.useStripe)(),r=(0,c.Y)().checkoutConfirmationUrl,n=(0,f.useMutation)(function(e){if(!t)throw Error("Stripe has not been initialized.");return t.confirmPixPayment(e.payment_intent_client_secret,{payment_method:{}})}),i=(e=(0,d.useState)({}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tY(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=(0,f.useMutation)(function(e){return y.k.prepare(e)}),l=(0,f.useMutation)(function(e){return y.k.create({formData:e})}),u=(0,f.useMutation)(function(e){return y.k.attempts.show(e)});return{onSubmitMutation:(0,f.useMutation)(function(e){return t1(function(){var i,c;return t2(this,function(d){var f,p;switch(d.label){case 0:return[4,t1(function(){var r,i,l,c,u,d,f,p;return t2(this,function(b){switch(b.label){case 0:if(!(i=JSON.stringify(o)===JSON.stringify(e)))return[3,4];if(!t)return[3,2];return[4,t.retrievePaymentIntent((null==s||null==(r=s.data)?void 0:r.payment_intent_client_secret)||"")];case 1:return u=b.sent(),[3,3];case 2:u=null,b.label=3;case 3:return c=u,[3,5];case 4:c=null,b.label=5;case 5:if(l=c,f=i&&tR(null==l?void 0:l.paymentIntent)&&(null==s?void 0:s.data))return[3,7];return[4,s.mutateAsync(e,{onSuccess:function(){a(e)},onError:t3})];case 6:f=b.sent(),b.label=7;case 7:if(!(d=f))return[3,9];return[4,n.mutateAsync(d)];case 8:if(tR(p=b.sent().paymentIntent))throw Error("Pix modal is closed",{cause:m.zS});if(!tB(p))throw s.reset(),a({}),Error("Pix payment expired",{cause:m.C});b.label=9;case 9:return[2,d]}})})()];case 1:if(!(i=d.sent()))return[3,4];return[4,O({executor:function(){var e;return e=i,t1(function(){var t,r;return t2(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.mutateAsync(e.payment_intent_id)];case 1:if("completed"===(t=n.sent()).status)return[2,t];return[2,null];case 2:if(404===(r=n.sent()).status)return[2,null];throw r;case 3:return[2]}})})()}})];case 2:if(!((c=d.sent())&&"completed"===c.status))return[3,4];return[4,l.mutateAsync((f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),p=p={payment_intent_id:i.payment_intent_id},Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(p)).forEach(function(e){Object.defineProperty(f,e,Object.getOwnPropertyDescriptor(p,e))}),f))];case 3:return d.sent(),[2,j({payment_intent_processor_id:i.payment_intent_id},r)];case 4:throw Error("Pix payment failed",{cause:m.PC})}})})()}),mutations:{prepareMutation:s,checkoutMutation:l,confirmPixPaymentMutation:n}}};function t4(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function t5(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){t4(o,n,i,a,s,"next",e)}function s(e){t4(o,n,i,a,s,"throw",e)}a(void 0)})}}function t8(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var t9=function(e,t,r){var n,i;(null==e||null==(n=e.cause)?void 0:n.error_details)!==m.zS.error_details&&((0,P.d)(e),console.error("Error: unexpected error occurred: ",e),t((0,m.bE)({message:e.message,error_details:(null==e||null==(i=e.cause)?void 0:i.error_details)||m.PC},r)))},t7=function(){var e=(0,c.Y)(),t=e.handleError,r=e.setIsProcessingPayment,n=e.loginUrl,i=e.resetPasswordRedirectUrl,o=e.stripePaymentMethodType,a=e.clearAlerts,s=e.currentUser,u=tX(),d=t6(),f=tG(),p=(0,tM.$)({shouldUseDebounce:!1}).validateEmail,b=(0,l.Gc)(),h=b.setError,y=b.clearErrors,v=b.setFocus,g={pix:d,card:u,link:u,klarna:f,afterpay_clearpay:f,affirm:f,google_pay:u,apple_pay:u};return{onSubmit:function(e){return t5(function(){var l,c;return t8(this,function(u){switch(u.label){case 0:if(e.coupon_code_applied||(e.coupon_code=""),a(),(0,m.IF)()&&(e.referral_metadata=(0,m.IF)()),!g[l=(0,to.F_)(e.payment_method_type)?o:e.payment_method_type])throw Error("Invalid payment method type ".concat(l));c=g[l].onSubmitMutation,u.label=1;case 1:var d;return u.trys.push([1,4,5,6]),r(!0),[4,(d=e.email,t5(function(){return t8(this,function(e){switch(e.label){case 0:if(!(!s&&d))return[3,2];return y("email"),[4,p(d)];case 1:if(!0!==e.sent())return h("email",{type:"manual"}),v("email"),[2,!1];e.label=2;case 2:return[2,!0]}})})())];case 2:if(!u.sent())return[2];return[4,c.mutateAsync(e)];case 3:return u.sent(),[3,6];case 4:return t9(u.sent(),t,{loginUrl:n,resetPasswordRedirectUrl:i}),[3,6];case 5:return r(!1),[7];case 6:return[2]}})})()}}};function re(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rt=function(){var e=(0,l.Gc)().getValues,t=t7().onSubmit;return(0,d.useCallback)(function(){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,t(e())];case 1:return r.sent(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){re(o,n,i,a,s,"next",e)}function s(e){re(o,n,i,a,s,"throw",e)}a(void 0)})})()},[e,t])};function rr(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function rn(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rr(o,n,i,a,s,"next",e)}function s(e){rr(o,n,i,a,s,"throw",e)}a(void 0)})}}function ri(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ro=function(){var e=(0,c.Y)(),t=e.currentCommunityProcessorPaymentMethodConfigurationId,r=e.isLinkCapabilityActive,n=e.currentCommunityMemberPaymentProcessorSessionClientSecret,i=e.isMemberWithSavedPaymentMethods,o=e.isMemberUsingSavedPaymentMethod,a=e.stripePaymentMethodType,s=e.stripeElementsMode,l=(0,L.useElements)(),u=rt(),f=(0,d.useRef)(null),p=(0,d.useCallback)(function(){return rn(function(){var e,c,d,p;return ri(this,function(m){switch(m.label){case 0:if(!l)return[2];if(s!==Z.hX.setup)return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,u()];case 2:case 3:return m.sent(),[3,4];case 4:return[2];case 5:return e=function(){rn(function(){var e;return ri(this,function(r){switch(r.label){case 0:if(!f.current)return[2];l.off("update-end",f.current),f.current=null,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,u()];case 2:case 3:return r.sent(),[3,5];case 4:return e={customerSessionClientSecret:n,payment_method_configuration:t,payment_method_types:null,setup_future_usage:null},l.update(e),[7];case 5:return[2]}})})()},f.current=e,c=(0,to.Lm)(a)?[to.Lt.CARD]:(0,to.F_)(a)||(0,to.u$)(a)?r?[to.Lt.CARD,to.Lt.LINK]:[to.Lt.CARD]:[a],d=(0,to.F_)(a)&&i&&!o?null:n,p={customerSessionClientSecret:d,payment_method_configuration:null,payment_method_types:c,setup_future_usage:(0,to.mG)(a)?Z.pB.off_session:null},l.on("update-end",e),l.update(p),[2]}})})()},[t,r,a,n,i,o,s,l,u]);return(0,d.useEffect)(function(){return function(){l&&f.current&&l.off("update-end",f.current)}},[l]),{onSubmit:p}},ra=function(){var e=(0,l.Gc)().watch,t=(0,c.Y)(),r=t.currentUser,n=t.hasAlreadyPurchased,i=t.loginUrl,o=t.communityRootUrl,a=t.paywall,s=t.getSelectedPrice,u=t.previewMutation,d=t.paymentError,f=t.isCardInfoValid,p=t.isPaywallActive,b=t.isCardInfoComplete,h=t.setIsCardInfoComplete,y=t.isTaxIdMandatory,v=t.shouldShowTaxIdForm,g=t.setStripePaymentMethodType,_=t.setIsMemberUsingSavedPaymentMethod,x=(0,L.useStripe)(),j=s(),w=e(),O=w.name,S=w.email,k=w.password,P=w.termsOfService,C=w.community_member_billing_info_address_attributes_complete,N=w.community_member_billing_info_attributes,A=N.tax_id_value,I=N.tax_id_type,E=tD.CU.test(S),T=tD.zU.test(k),D=!C||!P||!r&&(!O||!E||!T)||!f||!p||d.disablePayButton||(0,to.y9)(n,a)||u.isLoading||u.isError||y&&v&&(!A||!I),M=u.data,R=(0,m.Gs)({isPaywallActive:p,selectedPrice:j,preview:M,currency:a.currency});return{paymentError:d,isSubmitDisabled:D,selectedPrice:j,currentUser:r,stripe:x,loginUrl:i,communityRootUrl:o,payButtonLabel:R,hasAlreadyPurchased:n,handleOnChangeCard:function(e){var t,r;g(e.value.type),e.complete?h(!0):b&&h(!1),_(!!(null==(r=e.value)||null==(t=r.payment_method)?void 0:t.id))},handleOnReadyCard:function(e){return r&&e.focus()},onLoadError:function(e){console.error("PaymentElement failed to render due to:",e)},onSubmit:ro().onSubmit}},rs=function(e){var t=e.children,r=e.className,n=e.wrapperClassName,i=e.dataTestId;return(0,s.jsx)("div",{className:(0,u.A)("w-full",r),"data-testid":i,children:(0,s.jsx)("div",{className:(0,u.A)("w-full sm:max-w-[540px]",n),children:t})})},rl=r(41342),rc=r(50867),ru=r(98363),rd=function(){var e,t=(0,c.Y)().paywallCustomization,r=((null==t?void 0:t.countdown_properties)||{enabled:!1}).enabled,n=null==t?void 0:t.countdown_properties;return r&&(0,eg.d0)(null==n||null==(e=n.action)?void 0:e.action_type)},rf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=rd();return(0,d.useMemo)(function(){var r=new URL(window.location.href),n=Object.keys(e);return t&&r.searchParams.set(eg.WI,"true"),n.forEach(function(t){r.searchParams.set(t,e[t])}),r.href},[t,e])},rp=function(){var e=(0,c.Y)(),t=e.currentUser,r=e.currentCommunityMember||t,n=rf();if(!r)return null;var i="".concat((0,h.jE)(),"?redirect_back_url=").concat(n);return(0,s.jsxs)("div",{className:"border-primary bg-primary shadow-xs flex flex-row items-center gap-x-4 rounded-xl border p-4","data-testid":"checkout-form-account-details",children:[(0,s.jsx)(ru.s,{src:r.avatar_url,name:r.name,size:"10"}),(0,s.jsxs)("div",{className:"flex w-full flex-col justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(ee.Z.LabelSm,{weight:"medium","data-testid":"checkout-form-account-details-name",children:r.name}),(0,s.jsx)(ee.Z.LabelXs,{weight:"medium",children:(0,s.jsx)("a",{className:"!text-dark cursor-pointer",href:i,children:(0,p.t)("sign_out")})})]}),(0,s.jsx)(ee.Z.LabelXs,{weight:"medium",color:"text-default","data-testid":"checkout-form-account-details-email",children:r.email})]})]})},rm=r(9981);function rb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rh(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function ry(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rb(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rv=function(e){var t=e.fieldName,r=ry((0,d.useState)(!1),2),n=r[0],i=r[1],o=ry((0,d.useState)(!1),2),a=o[0],s=o[1],c=(0,l.Gc)(),u=c.watch,f=c.formState.errors,p=c.trigger,m=u(t),b=(0,l.U2)(f,t),h=(0,d.useMemo)(function(){return(0,rm.eF)(m||"")},[m]);return(0,d.useEffect)(function(){m||i(!1)},[m]),(0,d.useEffect)(function(){(0,rm.G2)(h)&&b&&p(t)},[h,b,p,t]),{isPasswordVisible:n,isFocused:a,setIsPasswordVisible:i,passwordFieldError:b,passwordValue:m,passwordStrength:h,handleBlur:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return s(!1),[4,p(t)];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rh(o,n,i,a,s,"next",e)}function s(e){rh(o,n,i,a,s,"throw",e)}a(void 0)})})()},handleFocus:(0,d.useCallback)(function(){s(!0)},[])}},rg=r(29570),r_=r(82542),rx=function(e){var t=e.email,r=e.onClose,n=(0,Y.kK)();return(0,s.jsxs)("div",{className:"bg-secondary flex items-center justify-between rounded-t-xl py-[13px]",children:[(0,s.jsx)(ee.Z.BodySm,{weight:"normal",size:"text-base",children:t}),(0,s.jsx)(ta.z,{type:"button",variant:"tertiary",onClick:r,className:"rounded-full !p-1",children:(0,s.jsx)(eb.JO,{type:n?"24-close":"20-close",size:n?24:20,className:(0,u.A)({"!text-dark":n,"text-primary":!n})})})]})},rj=function(){return(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border px-2 py-1",children:[(0,s.jsx)(eb.JO,{type:"16-safe-lock",size:16,color:"text-tertiary"}),(0,s.jsx)(ee.Z.LabelXs,{weight:"medium",color:"text-tertiary",children:(0,p.t)("paywall_checkout.form.safe_and_secure")})]})},rw="paywall_checkout.form.email_verification_states.account_setup_state",rO=function(e){var t=e.email,r=e.onClose,n=(0,c.Y)().currentCommunity,i=rv({fieldName:"password"}),o=i.isPasswordVisible,a=i.setIsPasswordVisible,l=i.passwordValue,u=i.passwordFieldError,d=i.passwordStrength,f=i.handleBlur,m=(null==n?void 0:n.name)||(0,p.t)([rw,"community_label"]);return(0,s.jsxs)("div",{className:"flex flex-col gap-5 pb-6 *:px-6",children:[(0,s.jsx)(rx,{email:t,onClose:r}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"flex flex-col gap-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(ee.Z.TitleSm,{weight:"bold",size:"text-base",children:(0,p.t)([rw,"join_community"],{community_name:m})}),(0,s.jsx)(ee.Z.BodySm,{weight:"normal",color:"text-default",children:(0,p.t)([rw,"create_password"],{community_name:m})})]})}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)(it.Item,{name:"password",children:[(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)(tf,{type:o&&l?"text":"password",name:"password",options:{required:!0,pattern:tD.zU},className:"w-full",checkoutFormClassName:"!pr-12",onBlur:f}),(0,s.jsx)(r_.Z,{passwordValue:l,isPasswordVisible:o,setIsPasswordVisible:a})]}),(0,s.jsx)(rg.o,{passwordStrength:d,passwordFieldError:u,passwordValue:l})]})})]}),(0,s.jsx)("div",{className:"flex items-center justify-start",children:(0,s.jsx)(rj,{})})]})},rS="initial",rk="otp_required",rP="password_signin",rC="signup",rN="claim",rA="SET_EMAIL",rI="START_VALIDATION",rE="VALIDATION_SUCCESS",rT="VALIDATION_ERROR",rL="START_OTP_SUBMISSION",rD="OTP_SUBMISSION_SUCCESS",rM="OTP_SUBMISSION_ERROR",rR="START_RESEND_OTP",rB="RESEND_OTP_SUCCESS",rF="RESEND_OTP_ERROR",rz="START_PASSWORD_SUBMISSION",rU="PASSWORD_SUBMISSION_SUCCESS",rZ="PASSWORD_SUBMISSION_ERROR",rG="START_FORGOT_PASSWORD_SUBMISSION",rq="FORGOT_PASSWORD_SUBMISSION_SUCCESS",rV="FORGOT_PASSWORD_SUBMISSION_ERROR",rH="SHOW_OTP_FORM",rW="SHOW_PASSWORD_FORM",rQ="SHOW_CLAIM_FORM",rJ="RESET_TO_INITIAL",rK=function(e){return"existing_member"===e},r$=function(e){return"new_member"===e},rX=function(e){return"user_with_pending_invitation"===e},rY=function(e){return e===rC};function r0(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function r1(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){r0(o,n,i,a,s,"next",e)}function s(e){r0(o,n,i,a,s,"throw",e)}a(void 0)})}}function r2(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var r3=function(e){var t=e.onAuthenticationLinkClick,r=(0,l.Gc)(),n=r.trigger,i=r.formState.errors,o=(0,r.watch)("email"),a=(0,d.useCallback)(function(){return r1(function(){return r2(this,function(e){switch(e.label){case 0:return[4,n("email")];case 1:return e.sent(),[2]}})})()},[n]),s=(0,d.useCallback)(function(){null==t||t()},[t]);return(0,d.useEffect)(function(){r1(function(){return r2(this,function(e){switch(e.label){case 0:if(!(i.email&&"manual"!==i.email.type))return[3,2];return[4,n("email")];case 1:e.sent(),e.label=2;case 2:return[2]}})})()},[o,n,i.email]),{handleBlur:a,handleAuthenticationClick:s}},r6="paywall_checkout.form.email_verification_states.initial_state",r4=function(e){var t=e.isValidating,r=void 0!==t&&t,n=e.shouldShowAuthenticationLink,i=r3({onAuthenticationLinkClick:e.onAuthenticationLinkClick}),o=i.handleBlur,a=i.handleAuthenticationClick;return(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,s.jsx)(it.Item,{name:"email",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(tf,{type:"text",name:"email",onBlur:o,options:{required:!0,pattern:tD.CU}}),r&&(0,s.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:(0,s.jsx)(C.a,{})})]})}),void 0!==n&&n&&(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,s.jsx)(eb.JO,{className:"text-v2-warning",type:"info",size:20,useWithFillCurrentColor:!0}),(0,s.jsxs)(ee.Z.LabelXs,{weight:"normal",color:"text-tertiary",children:[(0,s.jsx)(ta.z,{type:"button",disabled:r,variant:"link",onClick:a,className:"text-tertiary hover:text-primary !h-auto !p-0 underline",children:(0,s.jsx)(ee.Z.LabelXs,{weight:"medium",color:"inherit",children:(0,p.t)([r6,"authenticate_account"])})})," ".concat((0,p.t)([r6,"before_completing_checkout"]))]})]})]})},r5=function(e){var t=e.shouldShowMessage,r=e.messageType;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(C.a,{className:"!py-0"})}),(void 0===t||t)&&(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(ee.Z.BodySm,{weight:"normal",color:"text-default",children:(0,p.t)(["paywall_checkout.form","success"===r?"completing_login":"authenticating_account"])})})]})},r8=function(){var e=rf();return{reloadPage:function(){e!==window.location.href?window.location.href=e:window.location.reload()}}};function r9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var r7=function(e){var t,r=e.status,n=e.isSubmitting,i=void 0!==n&&n,o=e.error,a=void 0===o?null:o,s=e.onOTPSubmit,l=e.onResendCode,c=e.onShowClaimForm,u=(t=(0,d.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return r9(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r9(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],p=u[1],m=r8().reloadPage,b=(0,d.useRef)(!1),h=(0,d.useCallback)(function(e){null==s||s(e)},[s]),y=(0,d.useCallback)(function(){null==l||l()},[l]);(0,d.useEffect)(function(){i?(b.current=!0,p(!1)):b.current&&!i&&(b.current=!1,a||(p(!0),rK(r)||r$(r)?m():(null==c||c(),p(!1))))},[i,a,r,c]),(0,d.useEffect)(function(){a&&p(!1)},[a]);var v=f&&!i&&!a,g=!(i||v);return{isSuccessShown:v,hasError:!!a,shouldShowSuccess:v,shouldShowFooter:g,handleOTPComplete:h,handleResendClick:y}},ne=function(e){var t=e.status,r=e.isSubmitting,n=e.isResending,i=e.onShowPasswordForm;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[rK(t)&&(0,s.jsx)(ta.z,{type:"button",variant:"link",onClick:i,disabled:void 0!==r&&r||void 0!==n&&n,className:"!px-0 underline",children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",children:(0,p.t)(["paywall_checkout.form.email_verification_states.otp_state","sign_in_with_password"])})}),(0,s.jsx)(rj,{})]})},nt=r(71470);function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ni(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var no=function(e){var t,r,n=e.onComplete,i=e.onValueChange,o=e.disabled,a=void 0!==o&&o,l=e.error,c=void 0!==l&&l,u=(t=(0,d.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nr(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],m=u[1],b=(0,Y.WJ)();return(0,d.useEffect)(function(){c&&m("")},[c]),(0,s.jsxs)("fieldset",{className:"contents",children:[(0,s.jsx)("legend",{className:"sr-only",children:(0,p.t)("paywall_checkout.form.email_verification_states.otp_state.verification_code_legend")}),(0,s.jsx)(nt.default,{value:f,onChange:function(e){m(e),null==i||i(e),6===e.length&&(null==n||n(e))},numInputs:6,separator:(0,s.jsx)("span",{className:"w-[.65rem] sm:w-[1.9rem]"}),isInputNum:!0,shouldAutoFocus:!a,inputStyle:(r={width:b?"56px":"48px",height:b?"56px":"48px",border:"1px solid",borderRadius:"8px",fontSize:b?"18px":"16px",lineHeight:b?"28px":"24px",fontWeight:"500",textAlign:"center",outline:"none",transition:"all 0.15s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--color-white)",color:"var(--color-text-darkest)"},a?ni(nn({},r),{borderColor:"var(--color-border-tertiary)",backgroundColor:"var(--color-background-secondary)",cursor:"not-allowed",color:"var(--color-text-disabled)"}):c?ni(nn({},r),{borderColor:"var(--color-feedback-error)"}):ni(nn({},r),{borderColor:"var(--color-border-primary)",boxShadow:"none"})),focusStyle:c?{borderColor:"var(--color-feedback-error)",boxShadow:"0 0 0 2px rgba(220, 38, 38, 0.2)"}:{borderColor:"var(--color-border-light)"},isDisabled:a})]})},na="paywall_checkout.form.email_verification_states.otp_state",ns=function(e){var t=e.isSubmitting,r=e.isResending,n=void 0!==r&&r,i=e.onResendClick;return(0,s.jsxs)("div",{children:["".concat((0,p.t)([na,"did_not_receive_code"])," "),(0,s.jsx)(ta.z,{type:"button",variant:"link",onClick:i,className:"!h-auto !p-0 underline",disabled:void 0!==t&&t||n,children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",children:n?(0,p.t)([na,"sending"]):(0,p.t)([na,"resend_code"])})})]})},nl="paywall_checkout.form.email_verification_states.otp_state",nc=function(e){var t=e.email,r=e.status,n=e.onClose,i=e.onShowPasswordForm,o=e.onShowClaimForm,a=e.onOTPSubmit,l=e.onResendCode,c=e.isSubmitting,u=void 0!==c&&c,d=e.isResending,f=void 0!==d&&d,m=e.error,b=r7({status:r,isSubmitting:u,error:void 0===m?null:m,onOTPSubmit:a,onResendCode:l,onShowClaimForm:o}),h=b.hasError,y=b.shouldShowSuccess,v=b.shouldShowFooter,g=b.handleOTPComplete,_=b.handleResendClick;return(0,s.jsxs)("div",{className:"flex flex-col gap-5 pb-6 *:px-6",children:[(0,s.jsx)(rx,{email:t,onClose:n}),(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(ee.Z.TitleSm,{weight:"bold",size:"text-base",children:(0,p.t)([nl,"enter_verification_code"])}),(0,s.jsxs)(ee.Z.BodySm,{weight:"normal",color:"text-default",textAlign:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{children:[(0,p.t)([nl,"enter_the_code_sent_to"]),"\xa0",(0,s.jsx)(ee.Z.LabelSm,{weight:"medium",children:t}),"\xa0",(0,p.t)([nl,"to_securely_authenticate_your_account"])]}),(0,s.jsx)(ns,{isSubmitting:u,isResending:f,onResendClick:_})]})]}),(0,s.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,s.jsx)(no,{onComplete:g,disabled:u||f,error:h})})]}),(u||y)&&(0,s.jsx)(r5,{messageType:y&&(rK(r)||r$(r))?"success":"authenticating"}),v&&(0,s.jsx)(ne,{status:r,isSubmitting:u,isResending:f,onShowPasswordForm:i})]})};function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nu(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nf=function(e){var t=e.isSubmitting,r=void 0!==t&&t,n=e.error,i=void 0===n?null:n,o=e.onPasswordSubmit,a=nd((0,d.useState)(""),2),s=a[0],l=a[1],c=nd((0,d.useState)(!1),2),u=c[0],f=c[1],p=(0,d.useRef)(!1),m=r8().reloadPage,b=(0,d.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),s.trim()&&(null==o||o(s))},[s,o]),h=(0,d.useCallback)(function(e){l(e.target.value)},[]),y=(0,d.useCallback)(function(e){"Enter"!==e.key||r||(e.preventDefault(),e.stopPropagation(),b(e))},[r,b]);return(0,d.useEffect)(function(){r?(p.current=!0,f(!1)):p.current&&!r&&(p.current=!1,i||f(!0))},[r,i]),(0,d.useEffect)(function(){i&&f(!1)},[i]),(0,d.useEffect)(function(){u&&m()},[u]),{password:s,hasError:!!i,isSuccessShown:u,handleSubmit:b,handlePasswordChange:h,handleKeyDown:y}},np="paywall_checkout.form.email_verification_states.password_state",nm=function(e){var t=e.isSubmitting,r=e.isSubmittingForgotPassword,n=e.onForgotPasswordSubmit,i=e.onShowOTPForm;return(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex justify-between sm:gap-4",children:[(0,s.jsx)(ta.z,{type:"button",variant:"link",onClick:n,disabled:t||r,className:"!px-0 underline",children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",children:(0,p.t)([np,"forgot_password.link"])})}),(0,s.jsx)(ta.z,{type:"button",variant:"link",onClick:i,disabled:t||r,className:"!px-0 underline",children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",children:(0,p.t)([np,"sign_in_with_code"])})})]}),(0,s.jsx)("div",{className:"flex justify-start sm:justify-end",children:(0,s.jsx)(rj,{})})]})},nb="paywall_checkout.form.email_verification_states.password_state",nh=function(e){var t=e.password,r=e.hasError,n=e.isSubmitting,i=e.isSubmittingForgotPassword,o=e.shouldShowActions,a=e.onPasswordChange,l=e.onKeyDown,c=e.onSubmit;return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(ee.Z.TitleSm,{weight:"bold",size:"text-base",children:(0,p.t)([nb,"sign_in_to_your_account"])}),(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsx)(ee.Z.LabelSm,{weight:"medium",children:(0,p.t)("paywall_checkout.form.fields.password")}),(0,s.jsx)(tu,{type:"password",value:t,onChange:a,onKeyDown:l,disabled:n||i,error:r,autoFocus:!0,autoComplete:"current-password"})]}),o&&(0,s.jsx)(ta.z,{type:"button",variant:"circle",disabled:n||i||!t.trim(),onClick:c,className:"self-start !text-sm font-medium","data-testid":"paywall-checkout-password-sign-in-button",children:(0,p.t)([nb,"sign_in"])})]})]})},ny=function(e){var t=e.email,r=e.onClose,n=e.onShowOTPForm,i=e.onPasswordSubmit,o=e.onForgotPasswordSubmit,a=e.isSubmitting,l=void 0!==a&&a,c=e.isSubmittingForgotPassword,u=void 0!==c&&c,d=e.error,f=nf({isSubmitting:l,error:void 0===d?null:d,onPasswordSubmit:i}),p=f.password,m=f.hasError,b=f.isSuccessShown,h=f.handleSubmit,y=f.handlePasswordChange,v=f.handleKeyDown,g=l||u,_=b&&!g,x=!g&&!_;return(0,s.jsxs)("div",{className:"flex flex-col gap-5 pb-6 *:px-6",children:[(0,s.jsx)(rx,{email:t,onClose:r}),(0,s.jsx)(nh,{password:p,hasError:m,isSubmitting:l,isSubmittingForgotPassword:u,shouldShowActions:x,onPasswordChange:y,onKeyDown:v,onSubmit:h}),(g||_)&&(0,s.jsx)(r5,{shouldShowMessage:l||_,messageType:_?"success":"authenticating"}),x&&(0,s.jsx)(nm,{isSubmitting:l,isSubmittingForgotPassword:u,onForgotPasswordSubmit:o,onShowOTPForm:n})]})},nv=function(e){var t=e.displayedStep,r=e.state,n=e.onAuthenticationLinkClick,i=e.resetToInitial,o=e.showPasswordForm,a=e.showClaimForm,l=e.handleOTPSubmit,c=e.handleResendOTP,u=e.showOTPForm,d=e.handlePasswordSubmit,f=e.handleForgotPasswordSubmit;return t===rS||"validating"===t?(0,s.jsx)(r4,{isValidating:r.isLoading,shouldShowAuthenticationLink:r.shouldShowAuthenticationLink,onAuthenticationLinkClick:n}):t===rk?(0,s.jsx)(nc,{email:r.email,status:r.status,onClose:i,onShowPasswordForm:o,onShowClaimForm:a,onOTPSubmit:l,onResendCode:c,isSubmitting:r.isSubmittingOTP,isResending:r.isResendingOTP,error:r.error}):t===rP?(0,s.jsx)(ny,{email:r.email,onClose:i,onShowOTPForm:u,onPasswordSubmit:d,onForgotPasswordSubmit:f,isSubmitting:r.isSubmittingPassword,isSubmittingForgotPassword:r.isSubmittingForgotPassword,error:r.error}):rY(t)||t===rN?(0,s.jsx)(rO,{email:r.email,onClose:i}):null};function ng(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var n_=function(e){var t=e.verifyEmail,r=e.onEmailChange,n=e.onValidationStart,i=e.onValidationSuccess,o=e.onValidationError,a=(0,(0,l.Gc)().watch)("email")||"",s=(0,d.useMemo)(function(){return(0,Q.debounce)(function(e){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!tD.CU.test(e))return[2];n(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t(e)];case 2:return i(r.sent().status),[3,4];case 3:return r.sent(),o(""),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){ng(o,n,i,a,s,"next",e)}function s(e){ng(o,n,i,a,s,"throw",e)}a(void 0)})})()},500)},[t,n,i,o]),c=(0,d.useCallback)(function(e){r(e),tD.CU.test(e)&&s(e)},[r,s]);return(0,d.useEffect)(function(){var e=a.trim();e&&c(e)},[a,c]),{handleEmailChange:c}},nx=function(e){var t=e.state,r=e.dispatch,n=e.setValue,i=e.mutations,o=i.verifyEmailMutation,a=i.verifyOTPMutation,s=i.resendOTPMutation,l=i.signInWithPasswordMutation,c=i.forgotPasswordMutation;return{handleEmailChange:(0,d.useCallback)(function(e){r({type:rA,payload:e}),n("email",e)},[r,n]),startValidation:(0,d.useCallback)(function(){r({type:rI})},[r]),handleValidationSuccess:(0,d.useCallback)(function(e){r({type:rE,payload:{status:e}})},[r]),handleValidationError:(0,d.useCallback)(function(e){r({type:rT,payload:e})},[r]),handleOTPSubmit:(0,d.useCallback)(function(e){t.email&&(r({type:rL}),a.mutate({email:t.email,otp:e}))},[t.email,r,a]),handlePasswordSubmit:(0,d.useCallback)(function(e){t.email&&(r({type:rz}),l.mutate({email:t.email,password:e}))},[t.email,r,l]),handleForgotPasswordSubmit:(0,d.useCallback)(function(){t.email&&(r({type:rG}),c.mutate(t.email))},[t.email,r,c]),handleResendOTP:(0,d.useCallback)(function(){t.email&&(r({type:rR}),s.mutate(t.email))},[t.email,r,s]),showOTPForm:(0,d.useCallback)(function(){r({type:rH})},[r]),showPasswordForm:(0,d.useCallback)(function(){r({type:rW})},[r]),showClaimForm:(0,d.useCallback)(function(){r({type:rQ}),t.verifiedOTP&&rX(t.status)&&n("otp",t.verifiedOTP)},[r,t.verifiedOTP,t.status,n]),resetToInitial:(0,d.useCallback)(function(){r({type:rJ}),n("password",""),n("otp","")},[r,n]),handleAuthenticationLinkClick:(0,d.useCallback)(function(){t.email&&tD.CU.test(t.email)&&(r({type:rI}),o.mutate(t.email))},[t.email,r,o])}},nj=r(2499),nw=r(60878),nO=function(e){var t=e.dispatch,r=(0,nw.pm)(),n=r.success,i=r.error,o=function(e){return function(r){var n=(null==r?void 0:r.message)||(0,p.t)("paywall_checkout.form.errors.generic_error");t({type:e,payload:n}),i(n,{duration:"long"})}};return{verifyEmailMutation:(0,f.useMutation)(function(e){return(0,b.Cu)(h.av.paywallCheckout.emailVerifications.create(),{email:e})},{onSuccess:function(e){t({type:rE,payload:{status:e.status}})},onError:o(rT)}),verifyOTPMutation:(0,f.useMutation)(function(e){var t=e.email,r=e.otp;return(0,b.Cu)(h.av.paywallCheckout.otpSessions.create(),{user:{email:t,otp:r}})},{onSuccess:function(e,r){t({type:rD,payload:{otp:r.otp}})},onError:o(rM)}),resendOTPMutation:(0,f.useMutation)(function(e){return(0,b.Cu)(nj.P.resendOtp(),{user:{email:e}})},{onSuccess:function(){t({type:rB}),n((0,p.t)("paywall_checkout.form.resent_otp"))},onError:o(rF)}),signInWithPasswordMutation:(0,f.useMutation)(function(e){var t=e.email,r=e.password;return(0,b.Cu)(h.av.paywallCheckout.sessions.create(),{user:{email:t,password:r}})},{onSuccess:function(){t({type:rU})},onError:o(rZ)}),forgotPasswordMutation:(0,f.useMutation)(function(e){return(0,b.Cu)(nj.P.resetPassword(),{user:{email:e}})},{onSuccess:function(){t({type:rq}),n((0,p.t)("paywall_checkout.form.email_verification_states.password_state.forgot_password.success"))},onError:o(rV)})}};function nS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nP(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nC=function(e,t){var r,n;switch(t.type){case rA:return nP(nk({},e),{email:t.payload,error:null});case rI:return nP(nk({},e),{isLoading:!0,error:null});case rE:return nP(nk({},e),{isLoading:!1,status:t.payload.status,step:"user_not_found"===(r=t.payload.status)?rC:rK(r)||r$(r)||rX(r)?rk:rS,error:null});case rT:return nP(nk({},e),{isLoading:!1,error:t.payload||null});case rL:return nP(nk({},e),{isSubmittingOTP:!0,error:null});case rD:return nP(nk({},e),{isSubmittingOTP:!1,verifiedOTP:(null==(n=t.payload)?void 0:n.otp)||null});case rM:return nP(nk({},e),{isSubmittingOTP:!1,error:t.payload});case rR:return nP(nk({},e),{isResendingOTP:!0,error:null});case rB:return nP(nk({},e),{isResendingOTP:!1});case rF:return nP(nk({},e),{isResendingOTP:!1,error:t.payload});case rz:return nP(nk({},e),{isSubmittingPassword:!0,error:null});case rU:return nP(nk({},e),{isSubmittingPassword:!1});case rZ:return nP(nk({},e),{isSubmittingPassword:!1,error:t.payload});case rG:return nP(nk({},e),{isSubmittingForgotPassword:!0,error:null});case rq:return nP(nk({},e),{isSubmittingForgotPassword:!1});case rV:return nP(nk({},e),{isSubmittingForgotPassword:!1,error:t.payload});case rH:return nP(nk({},e),{step:rk,error:null});case rW:return nP(nk({},e),{step:rP,error:null});case"SHOW_SIGNUP_FORM":return nP(nk({},e),{step:rC,error:null});case rQ:return nP(nk({},e),{step:rN,error:null});case rJ:return nP(nk({},e),{step:rS,status:null,verifiedOTP:null,error:null,shouldShowAuthenticationLink:!0});default:return e}},nN={step:rS,email:"",status:null,verifiedOTP:null,isLoading:!1,isSubmittingOTP:!1,isResendingOTP:!1,isSubmittingPassword:!1,isSubmittingForgotPassword:!1,error:null,shouldShowAuthenticationLink:!1},nA=function(){var e,t=(e=(0,d.useReducer)(nC,nN),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return nS(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nS(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],i=(0,l.Gc)(),o=i.setValue,a=i.formState.errors,s=i.setFocus,c=nO({dispatch:n}),u=nx({state:r,dispatch:n,setValue:o,mutations:c});return(0,d.useEffect)(function(){a.email&&rY(r.step)&&setTimeout(function(){n({type:rJ}),o("password",""),s("email")},0)},[a.email,r.step,o,s]),nk({state:r,verifyEmail:c.verifyEmailMutation.mutateAsync},u)};function nI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nI(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nT=function(e){var t=e.currentStep,r=nE((0,d.useState)(!1),2),n=r[0],i=r[1],o=nE((0,d.useState)(void 0),2),a=o[0],s=o[1],l=nE((0,d.useState)(t),2),c=l[0],u=l[1],f=(0,d.useRef)(null);return(0,d.useEffect)(function(){t!==c&&f.current&&(i(!0),s(f.current.offsetHeight),setTimeout(function(){u(t),setTimeout(function(){f.current&&(s(f.current.scrollHeight),setTimeout(function(){i(!1),s(void 0)},300))},50)},200))},[t,c]),{isTransitioning:n,currentHeight:a,displayedStep:c,contentRef:f}},nL=function(){var e=nA(),t=e.state,r=e.verifyEmail,n=e.handleEmailChange,i=e.startValidation,o=e.handleValidationSuccess,a=e.handleValidationError,l=e.handleOTPSubmit,c=e.handlePasswordSubmit,d=e.handleForgotPasswordSubmit,f=e.handleResendOTP,p=e.showOTPForm,m=e.showPasswordForm,b=e.showClaimForm,h=e.resetToInitial,y=e.handleAuthenticationLinkClick;n_({verifyEmail:r,onEmailChange:n,onValidationStart:i,onValidationSuccess:o,onValidationError:a});var v=nT({currentStep:t.step}),g=v.isTransitioning,_=v.currentHeight,x=v.displayedStep,j=v.contentRef;return(0,s.jsx)("div",{className:(0,u.A)("border-primary shadow-xs rounded-xl border bg-white","relative w-full overflow-hidden","mx-auto","sm:mx-auto md:mx-0"),children:(0,s.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-out",style:{height:_?"".concat(_,"px"):"auto"},children:(0,s.jsx)("div",{ref:j,className:(0,u.A)("transition-all duration-200 ease-in-out",{"-translate-y-2 opacity-0":g,"translate-y-0 opacity-100":!g}),children:(0,s.jsx)(nv,{displayedStep:x,state:t,onAuthenticationLinkClick:y,resetToInitial:h,showPasswordForm:m,showClaimForm:b,handleOTPSubmit:l,handleResendOTP:f,showOTPForm:p,handlePasswordSubmit:c,handleForgotPasswordSubmit:d})})})})},nD=function(){var e=(0,c.Y)().currentUser;return(0,rl.wh)().isLoading?null:(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 lg:pb-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)(ee.Z.TitleSm,{weight:"semibold",children:(0,p.t)("paywall_checkout.your_account")})}),(0,s.jsx)(rc.g,{className:"gap-y-5 !py-0",children:e?(0,s.jsx)(rp,{}):(0,s.jsx)(nL,{})})]})},nM=r(8386),nR=r(71367),nB=function(){return(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)("div",{className:"inline-flex items-start gap-3",children:(0,s.jsx)(nR.X,{id:"terms",name:"termsOfService",label:(0,s.jsx)(nM.y,{variant:"paywallCheckout"})})})})},nF=r(86812),nz=r(77459),nU=r(625),nZ={addressCountry:"community_member_billing_info_attributes.address_country",taxIdType:"community_member_billing_info_attributes.tax_id_type",taxIdTypeLabel:"community_member_billing_info_attributes.tax_id_type_label",taxIdValue:"community_member_billing_info_attributes.tax_id_value"},nG=function(){var e=(0,(0,l.Gc)().watch)().community_member_billing_info_attributes,t=(void 0===e?{}:e).address_country,r=(0,c.Y)(),n=r.isTaxCollectionEnabled,i=r.isBrazilianAccountAndProcessorStripeBr,o=(0,d.useMemo)(function(){return{fieldNames:nZ,selectedCountry:t,isBrazilianCommunity:i,isTaxCollectionEnabled:n}},[t,i,n]),a=(0,nz.g)(o),u=a.handleTaxIdTypeChange,f=a.isRequired,p=a.isTaxIdValueRequired,m=a.isVisible,b=a.selectedTaxIdType,h=a.selectOptions,y=a.taxIdTypeLabel;return m?(0,s.jsxs)(it.Item,{name:"tax_id",optional:!f,children:[(0,s.jsx)(nU.P,{variant:"single",name:"taxIdTypeLabel",data:h,value:y,onChange:u,filterBy:nF.gf,hideSelectedItems:!0}),y&&(0,s.jsx)(tf,{className:"mt-2 grow",type:"text",name:"community_member_billing_info_attributes.tax_id_value",placeholder:null==b?void 0:b.example,options:{required:p}})]}):null},nq=function(){var e=(0,(0,l.Gc)().watch)().community_member_billing_info_attributes.address_country,t=(0,c.Y)(),r=t.isMemberAddressRequired,n=t.isTaxIdCollectionEnabled,i=t.shouldShowTaxIdForm,o=t.enableTaxIdCollection;return i&&(!r||e)&&(!e||(0,nF.Zx)(e))?n?(0,s.jsx)(nG,{}):(0,s.jsx)("div",{className:"flex flex-row items-center gap-x-1 underline",children:(0,s.jsx)(ta.z,{type:"button",variant:"link",className:"!p-0",onClick:o,children:(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",color:"text-default",children:(0,p.t)("paywall_checkout.form.tax_id.cta")})})}):null},nV=r(13411),nH=function(e){var t=e.children,r=e.value,n=e.className;return(0,s.jsx)(nV.E.Option,{value:r,className:function(e){var t=e.checked;return tc()("bg-primary hover:border-secondary relative flex cursor-pointer justify-center rounded-xl border py-3 transition-colors focus:outline-none",{"border-secondary bg-secondary border-1":t,"border-primary":!t},n)},children:(0,s.jsx)("span",{className:"flex flex-row items-center space-x-2",children:t})})},nW=function(){var e,t=(0,l.Gc)(),r=t.control,n=t.setValue,i=(0,c.Y)(),o=i.getSelectedPrice,a=i.amountDue,u=o(),f=(null==u||null==(e=u.payable_payment_methods)?void 0:e.length)===1,m=a<to.eq.MINIMUM||a>to.eq.MAXIMUM;return((0,d.useEffect)(function(){(f||m)&&n("payment_method_type",to.Lt.CARD)},[f,a]),f||m)?null:(0,s.jsx)(l.Qr,{control:r,name:"payment_method_type",render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,s.jsx)(nV.E,{value:n,onChange:r,children:(0,s.jsxs)("div",{className:"flex flex-row space-x-4",children:[(0,s.jsxs)(nH,{value:to.Lt.CARD,className:"basis-1/2",children:[(0,s.jsx)(eb.JO,{type:"credit-card",size:16}),(0,s.jsx)(ee.Z.LabelMd,{children:(0,p.t)("paywall_checkout.payment_method_type.card")})]}),(0,s.jsxs)(nH,{value:to.Lt.PIX,className:"basis-1/2",children:[(0,s.jsx)(eb.JO,{type:"20-pix",viewBox:"0 0 24 24",size:24}),(0,s.jsx)(ee.Z.LabelMd,{children:(0,p.t)("paywall_checkout.payment_method_type.pix")})]})]})})}})},nQ=r(41609),nJ=r.n(nQ),nK=function(){return(0,s.jsx)(it.Item,{name:"business_name",optional:!0,children:(0,s.jsx)(tf,{type:"text",name:"community_member_billing_info_attributes[business_name]",options:{maxLength:200}})})},n$=function(e){var t=e.name,r=e.addon,n=e.className,i=e.childClassName,o=e.children,a=e.optional,l=e.LabelComponent,c=void 0===l?ee.Z.LabelSm:l,u=e["data-testid"];return(0,s.jsxs)("div",{className:tc()(n,"flex flex-col"),"data-testid":u,children:[(0,s.jsxs)("div",{className:tc()(i,"mb-1 flex flex-row items-center"),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(c,{weight:"semibold",children:p.Z.t("paywall_checkout.form.fields.".concat(t))}),a&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(p.Z.t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),o]})},nX=function(){return(0,s.jsx)(n$,{name:"name",children:(0,s.jsx)(tf,{type:"text",name:"name",options:{required:!0}})})},nY=r(7587),n0=r(9394),n1=r(51911),n2=function(){var e=(0,c.Y)(),t=e.setMemberAddressAttributes,r=e.currentUser,n=e.memberBillingInfo,i=Z.I7.billing,o=(0,nY.u)({billingInfo:n,name:tF(r)}),a=(0,n1.X)(),l=(0,n0.B)(),u=(0,d.useMemo)(function(){return{mode:i,defaultValues:o,fields:a,display:l}},[i,o,a,l]);return(0,s.jsx)(L.AddressElement,{options:u,onChange:t})};let n3=r.p+"static/images/paywalls/payment-form-desktop-96eca658a6c63cf0.png",n6=r.p+"static/images/paywalls/payment-form-mobile-0db9dd043640c20c.png",n4=r.p+"static/images/paywalls/payment-form-tablet-96eca658a6c63cf0.png";var n5=r(80171),n8=function(){var e=(0,l.Gc)().watch,t=(0,c.Y)(),r=t.currentUser,n=t.memberBillingInfo,i=e("email"),o=e("name");return(0,d.useMemo)(function(){var e,t,a={};return a.email=null!=(e=null==r?void 0:r.email)?e:i,a.name=null!=(t=tF(r))?t:o,(null==n?void 0:n.address_country)&&(a.address={line1:n.address_line1,line2:n.address_line2||void 0,city:n.address_city,state:n.address_state,postal_code:n.address_postal_code,country:n.address_country}),{billingDetails:a}},[r,n,i,o])},n9=function(){var e=(0,c.Y)(),t=e.getSelectedPrice,r=e.checkoutPreviewContext,n=t(),i=n8(),o=(0,d.useMemo)(function(){return{billingDetails:{name:"never",address:"auto"}}},[]),a=(0,d.useMemo)(function(){return{card:"never",googlePay:"never",applePay:"never"}},[]),l={type:Z.jw.accordion,radios:!0},u=(0,d.useMemo)(function(){return{defaultValues:i,fields:o,terms:a,layout:l}},[i,o,l,a]),f=ra(),m=f.handleOnChangeCard,b=f.handleOnReadyCard,h=f.onLoadError,y=!!r;return(0,s.jsxs)(n$,{name:"payment",childClassName:"!mb-4",LabelComponent:ee.Z.TitleSm,addon:n.trial_enabled&&(0,s.jsx)("span",{className:"inline-flex",children:(0,s.jsx)(n5.T,{className:"inline-flex",content:p.Z.t("paywall_checkout.payment_subtitle_tooltip"),children:(0,s.jsx)(eb.JO,{type:"12-question-mark",size:12,color:"text-primary"})})}),"data-testid":"checkout-form-payment-methods-field-wrapper",children:[y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:n3,alt:"",loading:"lazy",className:"hidden lg:block"}),(0,s.jsx)("img",{src:n4,alt:"",loading:"lazy",className:"hidden sm:block lg:hidden"}),(0,s.jsx)("img",{src:n6,alt:"",loading:"lazy",className:"sm:hidden"})]}),!y&&(0,s.jsx)(L.PaymentElement,{options:u,onChange:m,onReady:b,onLoadError:h})]})},n7=function(){var e=(0,l.Gc)().watch,t=(0,c.Y)(),r=t.paywall,n=t.getSelectedPrice,i=t.previewMutation,o=n(),a=i.data,s=(0,to.Lf)(e("payment_method_type"));return(0,d.useMemo)(function(){return(!o.trial_enabled||o.trial_requires_upfront_payment||r.trial_requires_card)&&!s&&!(null==a?void 0:a.free_forever)},[r,o,a,s])},ie=function(){var e=(0,c.Y)(),t=e.currentUser,r=e.isMemberAddressRequired,n=e.memberBillingInfo,i=e.stripePaymentMethodType,o=n7(),a=!t||nJ()(n),l=(r||(0,to.wO)(i))&&a,u=!(null==n?void 0:n.business_name);return(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)(n9,{}),l&&(0,s.jsx)(n2,{}),!l&&!t&&(0,s.jsx)(nX,{}),u&&(0,s.jsx)(nK,{})]})},it=Object.assign(function(e){var t=e.className,r=(0,l.Gc)().handleSubmit,n=(0,c.Y)(),i=n.isProcessingPayment,o=n.authProviderProperties,a=n.checkoutPreviewContext,d=ra(),f=d.onSubmit,p=d.payButtonLabel,m=d.stripe,b=d.isSubmitDisabled,h=(0,Y.a7)();return(null==o?void 0:o.is_sso_authentication_required)?null:(0,s.jsxs)(rs,{className:(0,u.A)("flex h-auto w-full flex-col items-center lg:items-start",t,{"pb-6":!!a}),dataTestId:"paywall-checkout-right-column",children:[(0,s.jsx)(ir.CommunityHeader,{className:"hidden lg:invisible lg:block"}),i&&(0,s.jsx)(C.a,{variant:"fullscreen"}),(0,s.jsxs)("form",{className:"flex flex-col gap-y-6",onSubmit:r(f),"data-testid":"checkout-form",children:[(0,s.jsx)(it.Alerts,{className:"hidden lg:block",shouldFocus:!0}),(0,s.jsx)(nD,{}),(0,s.jsxs)(rc.g,{className:"gap-y-5",children:[(0,s.jsx)(nW,{}),(0,s.jsx)(ie,{}),(0,s.jsx)(nq,{})]}),(0,s.jsx)(it.Alerts,{className:"block lg:hidden"}),(0,s.jsxs)(rc.g,{className:"gap-y-5",children:[(0,s.jsx)(nB,{}),(0,s.jsxs)(ta.z,{type:"submit",extraLarge:!0,variant:"circle",disabled:!m||b||i,"data-testid":"checkout-form-submit-button",className:"flex flex-row items-center justify-center gap-x-2",children:[(0,s.jsx)(eb.JO,{size:20,type:"20-lock"}),p]})]})]}),(0,s.jsx)(eK,{shouldHide:h})]})},{Item:function(e){var t=e.name,r=e.addon,n=e.className,i=e.childClassName,o=e.children,a=e.optional,l=e.LabelComponent,c=void 0===l?ee.Z.LabelSm:l;return(0,s.jsxs)("div",{className:(0,u.A)(n,"flex flex-col"),children:[(0,s.jsxs)("div",{className:(0,u.A)(i,"mb-1 flex flex-row items-center"),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(c,{weight:"semibold",children:p.Z.t("paywall_checkout.form.fields.".concat(t))}),a&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsx)(ee.Z.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(p.Z.t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),o]})},PricePreview:tL,CouponForm:function(e){var t,r=e.className,n=(0,l.Gc)(),i=n.watch,o=n.clearErrors,a=n.getValues,f=n.setValue,b=n.formState.errors,y=(0,c.Y)(),v=y.areCouponsEnabled,g=y.applyCouponCode,_=y.clearCouponCode,x=y.checkoutPreviewContext,j=y.couponPreviewMutation,w=y.previewMutation,O=tb((0,d.useState)(!1),2),S=O[0],k=O[1],P=tb((0,d.useState)(!1),2),C=P[0],N=P[1],A=i().coupon_code_applied,I=(0,d.useCallback)(function(){var e=a(),t=(0,m.pN)(e);t.queryParams.community_member_billing_info_attributes={},j.mutate(t,{onSuccess:function(){g(e.coupon_code)},onError:function(){f("coupon_code_applied",!1)}})},[a,g,f,j]);return((0,d.useEffect)(function(){var e,t=(0,h.Ph)("coupon_code")||(null==x||null==(e=x.coupon_applied)?void 0:e.code);t&&!S&&w.isSuccess&&(k(!0),N(!0),f("coupon_code",t),I())},[S,null==x||null==(t=x.coupon_applied)?void 0:t.code,f,I,w.isSuccess]),v)?A?(0,s.jsx)(ts,{setAddCouponClickedState:N}):(0,s.jsxs)("div",{className:(0,u.A)("flex w-full flex-col gap-y-2",r),children:[(0,s.jsxs)(ta.z,{variant:"link",small:!0,className:"!p-0 text-left !no-underline",type:"button",onClick:function(){var e=(0,l.U2)(b,"coupon_code");C&&(_({resetPreview:!!e}),o("coupon_code")),N(!C)},children:[C?(0,s.jsx)(eb.JO,{type:"20-minus",className:"!w-4"}):(0,s.jsx)(eb.JO,{type:"20-plus-v3",className:"!w-4"}),(0,s.jsx)(ee.Z.LabelXs,{color:"text-secondary",weight:"medium",children:(0,s.jsx)("span",{className:"cursor-pointer",children:(0,p.t)("coupon_code")})})]}),C&&(0,s.jsx)(tp,{applyCoupon:I})]}):null},Alerts:function(e){var t=e.className,r=e.shouldFocus,n=(0,c.Y)(),i=n.paywall,o=n.communityRootUrl,a=n.hasAlreadyPurchased,l=n.paymentError,f=n.paywallFailure,m=(0,d.useRef)(null),b="",y="";return((0,to.y9)(a,i)?(b="warning",y=(0,p.t)("services.paywalls.failures.paywall.already_purchased",{billing_url:"".concat(o).concat(h.G3.billing.slice(1))})):f?(b=f.level,y=f.message):l&&l.message&&(b=l.type,y=l.message),(0,d.useEffect)(function(){if(r&&m&&y){var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"})}},[y,r]),b&&y)?(0,s.jsx)("div",{ref:m,className:(0,u.A)("rounded-xl border px-6 py-5",t,{"border-red-500 bg-red-50 text-red-800":"danger"===b,"border-yellow-500 bg-yellow-50 text-yellow-800":"warning"===b}),dangerouslySetInnerHTML:{__html:y},"data-testid":"checkout-alert"}):null}}),ir=Object.assign(function(e){var t=e.className,r=e.dataTestId,n=(0,c.Y)().authProviderProperties,i=(0,Y.a7)();return(0,s.jsxs)(rs,{className:(0,u.A)("flex flex-row-reverse justify-center lg:justify-normal",t,{"pointer-events-none !hidden opacity-60 lg:!flex":null==n?void 0:n.is_sso_authentication_required}),dataTestId:void 0===r?"paywall-checkout-left-column":r,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(ir.CommunityHeader,{}),(0,s.jsx)(eK.Countdown,{}),(0,s.jsxs)("div",{className:"bg-primary border-primary flex h-fit w-full flex-col rounded-xl border shadow-lg","data-testid":"paywall-checkout-info",children:[(0,s.jsx)(ir.Cover,{}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 p-4 pb-5 md:p-7",children:[(0,s.jsx)(ir.PriceSelector,{}),(0,s.jsx)(it.CouponForm,{className:"pb-4"}),(0,s.jsx)(tL,{variant:"with_modals"})]})]})]}),(0,s.jsx)(eK,{shouldHide:!i,className:"px-4"})]})},{Cover:function(){var e,t=(0,c.Y)().paywall;return t.event?(0,s.jsx)(X,{}):(null==t||null==(e=t.paywall_customization)?void 0:e.cover_image)?(0,s.jsx)(W,{}):null},PriceSelector:function(){var e=(0,c.Y)(),t=e.paywall,r=e.setSelectedPrice,n=e.isSelectedPrice,i=es(t),o=el(t),a=(0,d.useCallback)(function(e){r(e)},[r]);return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3","data-testid":"checkout-paywall-detail",children:[(0,s.jsx)(ee.Z.LabelLg,{weight:"semibold",children:(0,s.jsx)("span",{className:"text-xl",children:i})}),(0,s.jsx)(eY,{event:t.event}),(0,s.jsx)(eo,{description:o}),(0,s.jsx)(eK.Badges,{})]}),(0,s.jsx)(ea.p,{divProps:{className:"border border-primary rounded-xl divide-y flex flex-col"},onChange:function(e){return a(Number(e.target.id))},children:t.prices.map(function(e){return(0,s.jsx)(ti,{id:e.id.toString(),value:e.value,isSelected:n(e),label:(0,s.jsx)(tr,{paywall:t,price:e}),dataTestId:"checkout-paywall-price-option"},"paywall_price-".concat(e.id))})})]})},CommunityHeader:function(e){var t=e.className,r=(0,c.Y)().currentCommunity;return(0,s.jsx)("div",{className:(0,u.A)("flex flex-row justify-center py-[1.625rem] md:py-[2.625rem] lg:justify-start lg:py-10",t),children:(0,s.jsx)(H,{currentCommunity:r})})},PaywallDescription:eo}),ii=function(e){var t=e.className,r=(0,c.Y)(),n=r.currentCommunity,i=r.loginRedirectUrl,o=r.authProviderProperties;return(null==o?void 0:o.is_sso_authentication_required)?(0,s.jsxs)(rs,{className:(0,u.A)("flex h-full w-full flex-col items-center text-center lg:h-auto lg:items-start",t),wrapperClassName:"h-full lg:pt-20 flex flex-col items-center",children:[(0,s.jsx)(ir.CommunityHeader,{className:"lg:invisible lg:block"}),(0,s.jsx)("div",{className:"flex h-full items-center justify-center lg:h-auto",children:(0,s.jsxs)("div",{className:"flex max-w-[24rem] flex-col gap-y-8",children:[n.icon_url&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("img",{loading:"lazy",className:"w-[4rem]",src:n.icon_url,alt:""})}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsx)(ee.Z.TitleMd,{children:(0,p.t)("paywall_checkout.sso_login_prompt.title")}),(0,s.jsx)(ee.Z.BodyMd,{color:"text-default",children:(0,p.t)("paywall_checkout.sso_login_prompt.subtitle",{community_name:n.name})})]}),(0,s.jsx)("div",{className:"flex flex-row justify-center",children:(0,s.jsx)("a",{href:i,children:(0,s.jsx)(ta.z,{variant:"circle",large:!0,children:(0,p.t)("paywall_checkout.sso_login_prompt.call_to_action",{auth_provider_name:o.name})})})}),(0,s.jsx)(ee.Z.LabelXs,{color:"text-default",children:(0,p.t)("paywall_checkout.sso_login_prompt.note")})]})})]}):null},io=function(e){var t=e.children,r=e.className;return(0,s.jsx)("div",{className:(0,u.A)("flex h-full flex-col",r),children:t})},ia=function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,s.jsx)("div",{className:(0,u.A)("flex w-full flex-col lg:grid lg:grid-cols-2",r),"data-testid":n,children:t})},is=function(){var e=(0,c.Y)().authProviderProperties;return(0,s.jsxs)(io,{children:[!(null==e?void 0:e.is_sso_authentication_required)&&(0,s.jsx)(tL,{variant:"mobile_fixed_on_top"}),(0,s.jsxs)(ia,{className:(0,u.A)("bg-primary h-full gap-y-6 *:px-5 md:gap-y-10 md:pt-0",{"pt-12 *:lg:pt-0":!(null==e?void 0:e.is_sso_authentication_required)}),dataTestId:"paywall-checkout-container",children:[(0,s.jsx)(ir,{className:"!bg-secondary pb-8 md:pb-10 xl:pr-28"}),(0,s.jsx)(ii,{className:"xl:pl-28"}),(0,s.jsx)(V,{children:(0,s.jsx)(it,{className:"bg-primary pb-8 xl:pl-28"})})]}),(0,s.jsx)(T,{})]})},il=r(25362),ic=r(64593),iu=r(52928),id=r(52478),ip=Object.assign(function(e){var t=e.title,r=e.children,n=(0,d.useMemo)(function(){return new f.QueryClient(id.V)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ic.q,{children:(0,s.jsx)("title",{children:t})}),(0,s.jsx)(iu.VK,{children:(0,s.jsx)(K.hk,{children:(0,s.jsx)(f.QueryClientProvider,{client:n,children:(0,s.jsx)(nw.VW,{children:(0,s.jsx)(il.ZP.Provider,{children:r})})})})})]})},{Preview:function(e){var t=e.children;return(0,s.jsx)(K.hk,{children:t})}}),im=r(59335),ib=function(e){var t,r=e.paywall,n=(0,h.Ph)("price_id");if(n){var i=parseInt(n,10);isNaN(i)||(t=i)}return(0,G.r)(r,t)},ih=function(e,t,r,n){var i,o=(i=null==n?void 0:n.address_country)?i:e&&"brl"===t?im.n.br:void 0;return{address_city:null==n?void 0:n.address_city,address_complete:r,address_country:o,address_line1:null==n?void 0:n.address_line1,address_line2:null==n?void 0:n.address_line2,address_postal_code:null==n?void 0:n.address_postal_code,address_state:null==n?void 0:n.address_state,business_name:null==n?void 0:n.business_name,tax_id_type:null==n?void 0:n.tax_id_type,tax_id_value:null==n?void 0:n.tax_id_value}},iy=function(e){var t,r=e.currentCommunity,n=e.currentUser,i=e.isMemberAddressComplete,o=e.isBrazilianAccountAndProcessorStripeBr,a=e.memberBillingInfo,s=e.paywall,c=ib(e);return(0,l.cI)({defaultValues:{community_id:r.id,paywall_price_id:c.id,user_id:null==n?void 0:n.id,email:null==n?void 0:n.email,name:tF(n),payment_method_type:"card",coupon_code_applied:!1,community_member_billing_info_attributes:ih(o,null==s||null==(t=s.currency)?void 0:t.code,i,a),community_member_billing_info_address_attributes_complete:i}})};function iv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ig(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var i_=function(e){var t=e.shouldUseWrapper,r=iy(e),n=es(e.paywall),i=null==t||t?ip:ip.Preview;return(0,s.jsx)(i,{title:n,children:(0,s.jsx)(l.RV,ig(iv({},r),{children:(0,s.jsx)(c.G,ig(iv({},e),{children:(0,s.jsx)(is,{})}))}))})}},50165:function(e,t,r){"use strict";r.d(t,{b:()=>d});var n=r(85893),i=r(67294),o=r(86664),a=r(80676),s=r(7587),l=r(9394),c=r(51911),u=r(36276),d=function(){var e=(0,u.n)(),t=e.communityMemberBillingInfo,r=e.communityMember,d=e.setAddress,f=e.markAddressFieldsReady,p=a.I7.billing,m=(0,s.u)({billingInfo:t,name:null==r?void 0:r.name}),b=(0,c.X)(),h=(0,l.B)(),y=(0,i.useMemo)(function(){return{mode:p,defaultValues:m,fields:b,display:h}},[p,m,b,h]);return(0,n.jsx)(o.AddressElement,{options:y,onChange:d,onReady:f})}},99495:function(e,t,r){"use strict";r.d(t,{C:()=>N});var n=r(85893),i=r(86664);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){return"undefined"!=typeof window&&getComputedStyle(document.documentElement).getPropertyValue(e).trim()||""},s=function(){var e,t=a("--color-text-dark")||"#19283a",r=a("--color-background-primary")||"hsl(0, 0%, 100%)",n=a("--color-border-primary")||"#d2d7db",i=a("--color-border-light")||"hsl(0, 0%, 87.1%)",s=a("--color-text-placeholder")||"rgb(162, 173, 190)",l="#EF4444",c=a("--font-system-ui")||'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"';return{theme:"flat",disableAnimations:!0,variables:{spacingGridRow:"0",borderRadius:"8px",fontFamily:c,fontSizeBase:"16px",fontWeightNormal:"400",fontWeightMedium:"500"},rules:(o(e={},".Label",{color:t,fontFamily:c,fontSize:"15px",fontWeight:"600",lineHeight:"22.5px",margin:"19px 0 4px 0",padding:"0 0 0 0"}),o(e,".Input",{backgroundColor:r,border:"1px solid ".concat(n),borderRadius:"8px",boxShadow:"none",color:t,fontFamily:c,fontSize:"16px",fontWeight:"400",lineHeight:"20px",margin:"0 0 8px 0",outline:"transparent solid 0px",outlineOffset:"0",padding:"12px 16px",transition:"ease 0.2s border",width:"100%"}),o(e,".Input:focus",{border:"1px solid ".concat(i),boxShadow:"none",outline:"transparent solid 2px",outlineOffset:"0"}),o(e,".Input::placeholder",{color:s,opacity:"0.5"}),o(e,".Input--invalid",{color:l,borderColor:l,boxShadow:"none"}),o(e,".Input--invalid:focus",{color:l,borderColor:l,boxShadow:"none"}),o(e,".Error",{color:l,fontSize:"14px",lineHeight:"20px",marginBottom:"8px",marginTop:"0"}),o(e,".TermsText",{fontSize:"0"}),e)}},l=r(76289),c=r(67294),u=r(88767),d=r(84326),f=r(79054),p=r(51466),m=r(60878),b=r(86812),h=function(e){return{address_city:null==e?void 0:e.address_city,address_complete:null==e?void 0:e.address_complete,address_country:null==e?void 0:e.address_country,address_line1:null==e?void 0:e.address_line1,address_line2:null==e?void 0:e.address_line2,address_postal_code:null==e?void 0:e.address_postal_code,address_state:null==e?void 0:e.address_state,business_name:null==e?void 0:e.business_name,tax_id_type_label:(0,b.kk)(null==e?void 0:e.tax_id_type,null==e?void 0:e.address_country),tax_id_type:null==e?void 0:e.tax_id_type,tax_id_value:null==e?void 0:e.tax_id_value}},y=r(52293),v=r(41342),g=r(36276);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){var t,r,i,o,a,s=e.communityMember,l=e.communityMemberBillingInfo,u=e.children,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["communityMember","communityMemberBillingInfo","children"]),f=(0,y.Gc)().setValue,p=(0,v.wh)().currentCommunity,m=!!(null==p||null==(o=p.payment_processor)?void 0:o.is_brazilian_account_and_processor_stripe_br),b=!!(null==p||null==(a=p.payment_processor)?void 0:a.is_tax_collection_enabled),h=(0,c.useCallback)(function(e){var t=e.value,r=e.complete,n=t.name,i=t.address,o={shouldDirty:n!==(null==s?void 0:s.name)||i.country!==(null==l?void 0:l.address_country)||i.line1!==(null==l?void 0:l.address_line1)||i.line2!==(null==l?void 0:l.address_line2)||i.city!==(null==l?void 0:l.address_city)||i.state!==(null==l?void 0:l.address_state)||i.postal_code!==(null==l?void 0:l.address_postal_code)};f("address_country",i.country,o),f("address_line1",i.line1,o),f("address_line2",i.line2,o),f("address_city",i.city,o),f("address_state",i.state,o),f("address_postal_code",i.postal_code,o),f("address_complete",r)},[s,l,f]),x=(t=(0,c.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return _(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=x[0],w=x[1],O=(0,c.useCallback)(function(){w(!0)},[w]);return(0,n.jsx)(g.L.Provider,{value:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),i=i={areAddressFieldsReady:j,communityMember:s,communityMemberBillingInfo:l,isBrazilianCommunity:m,isTaxCollectionEnabled:b,markAddressFieldsReady:O,setAddress:h},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r),children:u})},j=r(16183);function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function O(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)})}}function S(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var k=(0,d.t)([j.p,"submitting"]),P=(0,d.t)([j.p,"success"]),C=function(e){var t,r,o=e.children,a=e.communityMember,s=e.communityMemberBillingInfo,l=e.onSuccess,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","communityMember","communityMemberBillingInfo","onSuccess"]),b=(0,m.pm)(),y=b.show,v=b.remove,g=b.success,_=b.error,j=(0,i.useElements)(),w=(0,c.useMemo)(function(){return h(s)},[s]),C=(0,c.useCallback)(function(e){return O(function(){return S(this,function(t){return s.id?[2,f.O.update(a.id,e)]:[2,f.O.create(a.id,e)]})})()},[a,s]),N=(0,c.useRef)(null),A=(0,u.useMutation)(C,{onMutate:function(){N.current=y(k,{shouldAutohide:!1,shouldUseIndefiniteIcon:!0})},onSuccess:function(){g(P,{duration:"short",shouldAutohide:!0,shouldUseProgress:!1}),l()},onError:function(e){_(e.message,{duration:"short",shouldAutohide:!0,shouldUseProgress:!1})},onSettled:function(){N.current&&v(N.current)}}),I=(0,c.useCallback)(function(e,t){var r=t.reset;return O(function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,null==j?void 0:j.submit()];case 1:if(null==(t=n.sent())?void 0:t.error)return[2];return[4,A.mutateAsync(e,{onSuccess:function(e){r(h(e))}})];case 2:return n.sent(),[2]}})})()},[j,A]);return(0,n.jsx)(p.l,{defaultValues:w,onSubmit:I,children:(0,n.jsx)(x,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={communityMember:a,communityMemberBillingInfo:s,billingInfoMutation:A,children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},N=function(e){var t,r,o=e.children,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]),c=(0,l.C)().stripePromise,u=s();return(0,n.jsx)(i.Elements,{stripe:c,options:{appearance:u},children:(0,n.jsx)(C,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})}},67560:function(e,t,r){"use strict";r.d(t,{j:()=>x});var n=r(85893),i=r(84326),o=r(57105),a=r(34519),s=r(16183),l=r(51169),c=r(99495),u=r(1492),d=r(52293),f=r(39905),p=r(50165),m=r(36276),b=function(){var e=(0,d.Gc)().formState,t=(0,m.n)().asPrerequisite,r=(0,i.t)([s.p,"submit".concat(t?"_as_prerequisite":"")]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.u_.Body,{className:"pt-3",children:(0,n.jsx)(p.b,{})}),(0,n.jsx)(a.u_.Footer,{children:(0,n.jsx)(f.z,{full:!0,large:!0,variant:"primary",type:"submit",disabled:e.isSubmitting,children:r})})]})},h=function(e){var t,r,i=e.communityMember,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["communityMember"]),a=(0,u.r)(i),s=a.isLoadingBillingInfo,d=a.billingInfo;return s?(0,n.jsx)(l.a,{variant:"default"}):(0,n.jsx)(c.C,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={communityMember:i,communityMemberBillingInfo:null!=d?d:{},children:(0,n.jsx)(b,{})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var g=function(e){var t=e.communityMember,r=e.onSuccess,l=e.asPrerequisite,c=(0,o.dd)(),u=function(){c.hide(),c.remove()};return(0,n.jsxs)(a.u_,{title:(0,i.t)([s.p,"title"]),isOpen:c.visible,onClose:u,children:[(0,n.jsx)(a.u_.Overlay,{}),(0,n.jsxs)(a.u_.Content,{size:"md",children:[(0,n.jsxs)(a.u_.Header,{children:[(0,n.jsx)(a.u_.Title,{children:(0,i.t)([s.p,"title"])}),(0,n.jsx)(a.u_.HeaderActions,{children:(0,n.jsx)(a.u_.CloseButton,{onClick:u})})]}),(0,n.jsx)(h,{asPrerequisite:l,communityMember:t,onSuccess:function(){r(),c.hide(),c.remove()}})]})]})},_=o.gk.create(function(e){return(0,n.jsx)(g,v({},e))}),x=function(e,t){var r,n,i=(0,o.dd)(e),a=(0,o.dd)(_);return r=v({},i),n=n={show:function(e){var r,n=t(e);return(null==n||null==(r=n.policies)?void 0:r.requires_billing_info)?a.show({asPrerequisite:!0,communityMember:n,onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,i.show(e)];case 1:return t.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)})})()}}):i.show(e)}},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}},16183:function(e,t,r){"use strict";r.d(t,{p:()=>n});var n="paywalls.community_members.billing_info_form"},36276:function(e,t,r){"use strict";r.d(t,{L:()=>i,n:()=>o});var n=r(67294),i=(0,n.createContext)({});i.displayName="BillingInfoContext";var o=function(){return(0,n.useContext)(i)}},1492:function(e,t,r){"use strict";r.d(t,{r:()=>a});var n=r(88767),i=r(79054),o=r(13532),a=function(e){var t=(0,n.useQuery)(o.av.paywalls.communityMembers.billingInfo.show(e.id),function(){return i.O.show(e.id)},{retry:function(e,t){return 404!==t.status},useErrorBoundary:function(e){return(null==e?void 0:e.status)!==404},enabled:!!e.id});return{isLoadingBillingInfo:t.isLoading,billingInfo:t.data,refetchBillingInfo:t.refetch}}},7587:function(e,t,r){"use strict";r.d(t,{u:()=>i});var n=r(67294),i=function(e){var t=e.billingInfo,r=e.name;return(0,n.useMemo)(function(){var e={};return t&&t.address_country&&(e.name=r,e.address={line1:t.address_line1,line2:t.address_line2,city:t.address_city,state:t.address_state,postal_code:t.address_postal_code,country:t.address_country}),e},[t,r])}},9394:function(e,t,r){"use strict";r.d(t,{B:()=>i});var n=r(67294),i=function(){return(0,n.useMemo)(function(){return{name:"full"}},[])}},51911:function(e,t,r){"use strict";r.d(t,{X:()=>i});var n=r(67294),i=function(){return(0,n.useMemo)(function(){return{phone:"never"}},[])}},81508:function(e,t,r){"use strict";r.d(t,{t:()=>a});var n=r(85893),i=r(84326),o=r(41553),a=function(){return(0,n.jsx)("div",{className:"px-2 py-4 md:p-0",children:(0,n.jsxs)("div",{className:"border-primary bg-primary flex w-full flex-col justify-center rounded-lg border py-20 text-center md:h-auto md:w-auto","data-testid":"post_section_with_topic",children:[(0,n.jsx)(o.Z.TitleSm,{weight:"semibold",children:(0,i.t)("topics.filters.no_posts_with_topic")}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(o.Z.LabelMd,{children:(0,i.t)("topics.filters.no_posts_with_topic_description")})})]})})}},76125:function(e,t,r){"use strict";r.d(t,{$:()=>s});var n=r(85893),i=r(76896),o=r(60589),a=function(e){var t=e.space,r=e.count,a=e.withContainer,s=e.columnsCount;return(0,o.AU)(t)?(0,n.jsx)("div",{className:"grid grid-cols-1 gap-6 first:mt-5 md:mx-0 md:grid-cols-2 md:first:mt-0 xl:grid-cols-3",children:(0,n.jsx)(i.gi,{variant:"card-view",count:r,withContainer:a})}):(0,o.Hn)(t)?(0,n.jsx)(i.gi,{variant:"grid-view",count:r,columnsCount:s}):(0,o.G6)(t)?(0,n.jsx)(i.gi,{variant:"list-view",count:r}):(0,n.jsx)(i.gi,{variant:"feed-view",count:r})},s=function(e){var t=e.hasPinnedPost,r=e.space,o=e.count,s=e.withContainer,l=e.columnsCount;return(0,n.jsxs)(n.Fragment,{children:[!!t&&(0,n.jsx)(i.gi,{variant:"feed-view",count:1}),(0,n.jsx)(a,{space:r,count:o,withContainer:void 0!==s&&s,columnsCount:l})]})}},35282:function(e,t,r){"use strict";r.d(t,{P:()=>s});var n=r(85893),i=r(94184),o=r.n(i);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t,r,i=e.children,s=e.className,l=e.displayView,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className","displayView"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}({className:o()("space__posts !pb-16 lg:!pb-6",a({},"space__posts--".concat(l),l),s),"data-testid":"post_section"},c),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},69621:function(e,t,r){"use strict";r.d(t,{N:()=>l});var n=r(85893),i=r(84326),o=r(60589),a=r(47624),s=r(555),l=function(e){var t=e.space,r=(0,o.Ds)(t),l=(0,a.r)();return r?(0,n.jsx)(s.u,{header:(0,i.t)("image_space.empty_state.title"),description:(0,i.t)("image_space.empty_state.description")}):(0,o.oO)(t)?(0,n.jsx)(s.u,{header:(0,i.t)("empty_state.posts.title"),description:(0,i.t)("empty_state.posts.description"),primaryLabel:(0,i.t)("empty_state.posts.create_post"),onPrimaryClick:function(){return l.show({spaceId:t.id})}}):(0,n.jsx)(s.u,{header:(0,i.t)("no_posts_to_show")})}},13381:function(e,t,r){"use strict";r.r(t),r.d(t,{PostViewList:()=>N,default:()=>A});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(58533),l=r(61193),c=r(96354),u=r(66849),d=r(68538),f=r(9105),p=r(41342),m=r(88241),b=r(23583),h=r(81508),y=r(30581),v=r(76125),g=r(35282),_=r(73384),x=r(69621),j=r(60589),w=r(71948),O=r(15731),S=function(){var e=(0,p.L2)().data,t=(0,w.p)(),r=(0,O.I)(),n=(0,j.H3)(e),i=(0,j.Y_)(e),o=(0,j.oO)(e),a=(0,j.G6)(e),s=(0,j.fe)(e);return{shouldDisplayQuickPostBox:n&&(o||i)&&(s||a&&t)&&!r}};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=(0,p.L2)().data,r=Number(null==t?void 0:t.topics_count)>0,n=function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],o=n.slice(1),a=!e.length,s=(null==t?void 0:t.display_view)==="cards",l=!!i,c=l&&i.pinned_at_top_of_space;return{firstPost:i,remainingPosts:o,shouldDisplayTopicsFilters:r,isFirstPostPinnedOutside:l&&c,isFirstPostInside:l&&!c,hasNoPosts:a,isCardsView:s}},C=function(){return window.innerHeight>=1600?36:window.innerHeight>=925?24:15},N=function(){var e=(0,c.t)().sort,t=(0,p.L2)().data,r=S().shouldDisplayQuickPostBox,o=(0,l.D)(),j=(0,f.m)().currentFilters,w=!!j.size,O=(0,b.N)({sort:e,include_top_pinned_post:!0,used_on:null==t?void 0:t.display_view,per_page:C(),topics:Array.from(j)}),k=O.posts,N=O.mapPages,A=O.hasNextPage,I=O.isLoading,E=O.fetchNextPage,T=O.refetch,L=O.onPostChange,D=O.onPostDestroy,M=P(k),R=M.firstPost,B=M.remainingPosts,F=M.shouldDisplayTopicsFilters,z=M.isFirstPostPinnedOutside,U=M.isFirstPostInside,Z=M.hasNoPosts,G=M.isCardsView;(0,i.useEffect)(function(){window.scrollTo(0,0);var e=document.getElementById("panel");e&&e.scrollTo(0,0)},[null==t?void 0:t.id]);var q=N(function(e){return e.records.map(function(e){return e.id})}),V=I&&(!k||!k.length);return(!V||w)&&(null==t?void 0:t.id)&&!o?Z&&!w?(0,n.jsx)(x.N,{space:t}):(0,n.jsx)(m._x,{spaceId:t.id,perPagePostIds:q,children:(0,n.jsx)(_.Fk,{hasNextPage:A,params:{sort:e,topics:Array.from(j),per_page:C(),include_top_pinned_post:!0,used_on:null==t?void 0:t.display_view},children:(0,n.jsxs)(g.P,{displayView:t.display_view,children:[F&&(0,n.jsx)(d.h,{}),r&&(0,n.jsx)("div",{className:"mb-6 hidden md:block",children:(0,n.jsx)(u.J,{})}),V?(0,n.jsx)(v.$,{count:12,space:t,hasPinnedPost:!!(null==t?void 0:t.top_pinned_post_id)}):Z&&w?(0,n.jsx)(h.t,{}):(0,n.jsxs)(n.Fragment,{children:[z&&(0,n.jsx)(y.Y,{post:R,space:t,onPostChange:L,refetchPosts:T,isFirst:!0,className:"mt-5 md:mt-0"}),(0,n.jsxs)(s.Z,{className:a()("infinity_scroll infinity_scroll__container",{"infinity_scroll__container--auto-fit mx-4 grid grid-cols-1 gap-6 first:mt-5 md:mx-0 md:grid-cols-2 md:first:mt-0 xl:grid-cols-3":G}),style:{overflow:"initial"},scrollThreshold:.5,next:E,hasMore:!!A,loader:(0,n.jsx)(v.$,{count:10,space:t,withContainer:!1}),dataLength:B.length,scrollableTarget:"panel",children:[U&&(0,n.jsx)(y.Y,{post:R,space:t,onPostChange:L,onPostDestroy:D,refetchPosts:T,isFirst:!0},R.id),B.map(function(e){return(0,n.jsx)(y.Y,{post:e,space:t,onPostChange:L,onPostDestroy:D,refetchPosts:T},e.id)})]})]})]})})}):(0,n.jsx)(v.$,{count:12,space:t,hasPinnedPost:!!(null==t?void 0:t.top_pinned_post_id)})};let A=N},46401:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>eC,Show:()=>eP});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(70442),l=r(87792),c=r(84326),u=r(78152),d=r(64529),f=r(27732),p=r(86342),m=r(24012),b=r(13532),h=r(30244),y=r(41342),v=r(1168),g=r(17617),_=r(56345),x=r(76896),j=r(76972),w=r(96486),O=r(62068),S=r(58401),k=r(25152),P=r(42953),C=r(17e3),N=r(34822),A=r(78456),I=r(44830),E=r(29379),T=r(41553),L=r(71347),D=r(69644),M=r(20712),R=r(63029),B=r(69447),F=r(47190),z=r(98363),U=function(e){var t=e.event,r=t.event_setting_attributes||{},i=r.rsvp_disabled,o=r.hide_attendees,a=(0,B.C)(t)||{},s=a.totalCount,l=a.attendees,u=a.handleAttendeesClick;return!s||o||i?null:(0,n.jsxs)("div",{className:"bg-primary border-primary w-[320px] rounded-2xl border p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(T.Z.LabelMd,{weight:"medium",children:[s," ",(0,c.t)("events.attendees")]}),(0,n.jsx)("button",{onClick:u,type:"button",children:(0,n.jsx)(T.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,c.t)("see_all")})})]}),(0,n.jsx)("div",{className:"mt-6 flex flex-col space-y-3",children:null==l?void 0:l.map(function(e){return(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(F.o,{member:e,children:(0,n.jsx)(z.s,{src:e.avatar_url,name:e.name,size:"10"})}),(0,n.jsx)(F.o,{member:e,children:(0,n.jsx)(T.Z.LabelMd,{children:e.name})})]},e.id)})})]})},Z=r(60983),G=r(59834);function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function V(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var H=function(e){var t=e.host,r=(0,G.O)({public_uid:t.public_uid});return(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("a",V(q({},r),{title:t.name,children:(0,n.jsx)(Z.C,{communityMemberId:t.id,name:t.name,publicUid:t.public_uid,headline:t.headline,avatarURL:t.avatar_url,children:(0,n.jsx)(z.s,{src:t.avatar_url,name:t.name,size:"10"})})})),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(T.Z.LabelSm,{weight:"normal",children:(0,c.t)("event_details.hosted_by")}),(0,n.jsx)("a",V(q({},r),{title:t.name,children:(0,n.jsx)(T.Z.LabelSm,{weight:"semibold",children:t.name})}))]})]})},W=r(4826),Q=r(98324),J=r(9668);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(){var e=(0,i.useRef)({focus:w.noop}),t=$((0,i.useState)(!0),2),r=t[0],n=t[1],o=$((0,i.useState)(!1),2),a=o[0],s=o[1],l=(0,i.useCallback)(function(){var t;return null==e||null==(t=e.current)?void 0:t.focus()},[e]),c=(0,i.useCallback)(function(){n(!0),s(!0),e.current&&e.current.focus()},[]);return{commentsFormRef:e,shouldShowComment:r,setShouldShowComment:n,focusCommentsForm:l,toggleComment:function(){s(!1),n(function(e){return!e})},showComments:c,shouldAutofocusReplyForm:a}},Y=function(e){var t,r=e.onDestroy,i=void 0===r?w.noop:r,o=e.onChange,a=void 0===o?w.noop:o,l=e.shouldOpenCommentPage,u=e.isSharedPostMinimalLayout,d=void 0!==u&&u,f=(0,y.wh)().currentCommunityMember,p=(0,A.vb)(f),b={isPaymentSuccessful:"true"===new URLSearchParams((0,s.TH)().search).get("payment_success")}.isPaymentSuccessful,h=(0,y.Zh)(),x=h.record,B=h.refetchPostDetails,F=(0,g.Fs)(),z=(0,s.k6)(),Z=x.name,G=x.status,q=x.event_setting_attributes,V=x.pin_to_top,K=x.post_details_loaded,$=x.is_comments_enabled,Y=x.rsvped_event,ee=x.body_trix_content,et=x.tiptap_body,er=x.internal_custom_html,en=x.community_member,ei=x.hide_meta_info,eo=x.rsvp_status,ea=q||{},es=ea.live_stream_room_setting_attributes,el=ea.in_person_location,ec=ea.hide_location_from_non_attendees,eu=ea.location_type,ed=ea.starts_at,ef=ea.ends_at,ep=!!(null==es?void 0:es.auto_post_recording_enabled),em=null==es?void 0:es.recording_attributes,eb=!!(null==em?void 0:em.content_type)&&!!(null==em?void 0:em.media_transcoding)&&I.$.isVideo(null==em?void 0:em.content_type),eh=X(),ey=eh.commentsFormRef,ev=eh.shouldAutofocusReplyForm,eg=eh.shouldShowComment,e_=eh.toggleComment,ex=eh.showComments,ej=G===k.Q_.PUBLISHED,ew=eu===k.Bq.IN_PERSON,eO=!Y&&ec,eS=ej&&!(0,R.QP)(x)&&(0,R.HV)(x),ek=!eO&&ew&&el,eP=5>=(0,j.Z)(new Date(ed),new Date),eC=eo==k._w.INVITED,eN=(null==em?void 0:em.url)&&ep&&(!eO||p)&&(!(0,P.yl)(x)||"yes"==eo);return(0,n.jsxs)("div",{className:(0,v.A)("flex w-full flex-col",{"py-8":d}),children:[(0,n.jsx)(M.y5,{isPinned:V,event:x,isFullView:!0}),eC&&(0,n.jsx)(S.w,{name:en.name}),(0,n.jsxs)("div",{className:"flex flex-row space-x-6",children:[(0,n.jsxs)("div",{className:(0,v.A)("bg-primary h-full w-full sm:rounded-md md:w-[680px] md:rounded-2xl",{"border-primary border":!d}),children:[(0,n.jsxs)("div",{className:(0,v.A)({"flex flex-col gap-5 p-5 md:px-6":!d,"flex flex-col gap-5 px-0 py-5 md:px-6":d}),children:[eP&&(0,n.jsx)("div",{className:"flex w-full justify-between",children:(0,n.jsx)(D.m,{startsAt:ed,endsAt:ef,status:G})}),(0,n.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,n.jsx)(T.Z.TitleMd,{as:"h1",leading:"!leading-7",dataTestId:"event-title",children:Z}),!F&&(0,n.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,n.jsx)(_.e,{bookmarkType:"event",record:x,onSuccess:B,className:(0,v.A)("!text-default",{"group-hover:!text-dark":!x.bookmark_id})}),(0,n.jsx)(Q.i,{onChange:a}),(0,n.jsx)(m.m,{onChange:a,onPostDestroy:i})]})]}),(0,n.jsx)("div",{className:"m-0 flex md:mx-auto md:my-6 md:hidden",children:(0,n.jsx)(J.Y,{onChange:a,shouldDisplayRsvpAction:eS})}),!ei&&(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(H,{host:en})}),(ee||et||er)&&(0,n.jsxs)("div",{className:(0,v.A)({"border-primary md:border-t":!ei}),children:[(0,n.jsx)("div",{className:"py-5",children:(0,n.jsx)(T.Z.TitleSm,{weight:"semibold",leading:"leading-4",children:(0,c.t)("event_details.details")})}),(0,n.jsx)(O.y,{enableTruncation:!1,noPadding:!0})]}),eN&&(0,n.jsxs)("div",{className:"border-primary border-t pb-[30px] pt-7",children:[(0,n.jsx)(T.Z.TitleSm,{weight:"semibold",leading:"leading-4",children:(0,c.t)("event_details.recording")}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(E.T,{src:em.url,type:em.content_type,mediaTranscoding:em.media_transcoding,mediaTranscriptId:em.media_transcript_id,isDownloadable:em.is_downloadable,poster:null==(t=em.image_variants)?void 0:t.thumbnail,variants:em.video_variants,signedId:em.signed_id,isTranscodingEnabled:eb})})]}),ek&&(0,n.jsxs)("div",{className:"border-primary border-t pb-[30px] pt-7",children:[(0,n.jsx)(T.Z.TitleSm,{weight:"semibold",leading:"leading-4",children:(0,c.t)("event_details.location")}),(0,n.jsx)(W.I,{serializedLocation:el,variant:"full"})]})]}),(0,n.jsx)("div",{className:"post !mb-0 !border-none sm:!rounded-md md:!rounded-2xl",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(N.S,{toggleComment:e_,showCommentAndFocusCommentForm:ex,shouldOpenCommentPage:void 0!==l&&l,className:"!py-3.5"}),K&&$&&eg&&(0,n.jsx)(C.o,{commentsFormRef:ey,autofocusReplyForm:ev,className:(0,v.A)({"px-0 md:px-6":d})})]})})]}),(0,n.jsxs)("div",{className:"hidden w-[320px] flex-col space-y-6 md:flex",children:[(0,n.jsx)(J.Y,{onChange:a,shouldDisplayRsvpAction:eS}),(0,n.jsx)(U,{event:x})]})]}),b&&(0,n.jsx)(L.c,{event:x,events:[x],show:b,onClose:function(){var e=new URL(window.location.href);e.searchParams.delete("payment_success"),z.push(e)}})]})},ee=function(e){var t=e.event,r=void 0===t?{}:t,i=e.space,o=e.isLoading,a=e.onChange,s=e.onDestroy,l=e.isSharedPostMinimalLayout,j=void 0!==l&&l,w=(0,g.Fs)();if(o)return(0,n.jsx)(x.gi,{variant:"new-event-detail"});if(j){var O=document.getElementById("root-header-v2_1");return(0,n.jsxs)(d.F.Body,{isMinimalLayout:!0,className:(0,v.A)("!bg-primary",{"!min-h-screen":!O,"!min-h-[calc(100vh-61px)]":O}),children:[(0,n.jsx)(u.S,{bodyClassNames:"view-shared-post minimal-layout hide-search-bar"}),(0,n.jsx)(y.DW,{post:r,children:r&&(0,n.jsx)("div",{className:"w-full sm:p-0 lg:mx-auto lg:max-w-5xl lg:p-4","data-testid":"post-full",children:(0,n.jsx)(Y,{onChange:a,onDestroy:s,isSharedPostMinimalLayout:j})})})]})}var S=r.name,k=r.space_slug,P=r.space_name;return(0,n.jsx)(h.W,{fullWidth:!0,children:(0,n.jsx)(d.F.Body,{children:(0,n.jsx)(y.DW,{post:r,children:function(e){var t=e.record,o=e.refetchPostDetails;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.S,{title:S}),i&&(0,n.jsx)(p.a,{hidden:!k,backLink:b.RZ.show({spaceSlug:k}),backLinkText:(0,c.t)("back_to_space_slug",{name:P}),customRightContent:w&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(_.e,{bookmarkType:"event",record:t,onSuccess:o}),(0,n.jsx)(m.m,{onPostDestroy:s,onChange:a})]})}),(0,n.jsx)(f.a.Content,{noPadding:!0,fullWidth:!0,fullHeight:!0,children:r&&(0,n.jsx)("div",{className:"w-full sm:px-0 sm:py-4 md:mx-auto md:max-w-5xl lg:py-2","data-testid":"post-full",children:(0,n.jsx)(Y,{onChange:a,onDestroy:s})})})]})}})})})},et=r(20982),er=r(30581),en=r(88241),ei=function(e){var t,r,i,o,a=e.postResource,s=e.bodyClassNames,l=(0,en.hD)(null==(t=a.data)?void 0:t.id),c=l.postDetails;if(l.isLoading||a.isLoading)return null;var d=(null==(r=c.meta_tag_attributes)?void 0:r.meta_title)||(null==(i=a.data)?void 0:i.name)||(null==(o=a.data)?void 0:o.truncated_content);return(0,n.jsx)(u.S,{title:d,bodyClassNames:s})},eo=r(60589),ea=r(61826),es=r(72826),el=r(41084),ec=r(85924),eu=r(51169),ed=function(e){var t=e.postResource.data,r=(0,ea.h)(),o=r.setEmptyLayout,a=r.setStandardLayout;return((0,i.useEffect)(function(){return o(),a},[]),t)?(0,n.jsx)(h.W,{fullWidth:!0,children:(0,n.jsxs)(d.F.Body,{children:[(0,n.jsx)(u.S,{bodyClassNames:"view-space"}),(0,n.jsx)(d.F.Content,{children:(0,n.jsx)(er.Y,{post:t,forceIframeView:!0})})]})}):null},ef=function(e){var t,r=e.postResource,o=e.onPostDestroy,a=(0,ea.h)(),s=a.setMinimalLayout,l=a.setStandardLayout;return(0,i.useEffect)(function(){return s(),l},[]),(0,n.jsxs)(d.F.Body,{isMinimalLayout:!0,children:[(0,n.jsx)(u.S,{bodyClassNames:"view-shared-post minimal-layout hide-search-bar"}),(0,n.jsx)(d.F.Content,{children:(0,n.jsx)(er.Y,{forcePostView:!0,isRenderedOutsideTheSpace:!0,onPostChange:r.onPostChange,onPostDestroy:o,post:r.data,pageSupportsContentTruncation:!1,hideShareLink:!0,defaultShowComment:!0},null==(t=r.data)?void 0:t.id)})]})},ep=r(41609),em=r.n(ep),eb=r(75148),eh=r(42194),ey=function(e){var t=e.space,r=e.postResource,i=e.onPostDestroy,o=!em()(t),a=(0,g.kK)(),l=(0,s.k6)(),u=(0,y.wh)().currentCommunitySettings,d=!!(null==u?void 0:u.post_details_mobile_header_enabled);return o?a&&d?(0,n.jsxs)("div",{className:"bg-primary border-b-primary sticky top-0 z-10 flex items-center justify-between border-b px-5 py-4",children:[(0,n.jsx)(eb.h,{name:"16-arrow-left",iconClassName:"!text-dark",onClick:function(){return l.push(b.RZ.show({spaceSlug:t.slug}))}}),"error"!==r.status&&(0,n.jsx)(eh.p,{space:t,onChange:r.onPostChange,onPostDestroy:i,refetchPosts:r.refetchPosts})]}):(0,n.jsx)(p.a,{hidden:!t.slug,backLink:b.RZ.show({spaceSlug:t.slug}),backLinkText:(0,c.t)("back_to_space_slug",t)}):(0,n.jsx)("div",{className:"h-16"})},ev=r(39905),eg=r(16312),e_=r(71948),ex=function(){var e=(0,y.L2)().data;return(0,e_.p)()||(0,eo.V5)(e)},ej=function(e){var t=e.children,r=ex();return(0,n.jsx)(eg.W,{maxWidth:r?"lg":"md",children:t})},ew=function(e){var t=e.space,r=e.postResource,i=e.onPostDestroy,o=e.spaceSlug,a=(0,s.k6)();return(0,n.jsx)(h.W,{fullWidth:!0,children:(0,n.jsxs)(d.F.Body,{children:[(0,n.jsx)(ey,{space:t,postResource:r,onPostDestroy:i}),(0,n.jsx)(ej,{children:(0,n.jsx)("div",{className:"w-full p-4 md:px-0",children:(0,n.jsxs)("div",{className:"bg-primary border-primary mt-5 flex w-full flex-col items-center justify-center gap-4 rounded-lg border p-6 md:mt-0",children:[(0,n.jsx)(T.Z.TitleMd,{weight:"font-bold",children:(0,c.t)("post_not_found")}),(0,n.jsx)(T.Z.BodyMd,{textAlign:"text-center",children:(0,c.t)("post_not_found_description")}),(0,n.jsx)(ev.z,{large:!0,variant:"circle",onClick:function(){return a.push(b.RZ.show({spaceSlug:o}))},children:(0,c.t)("back_to_space")})]})})})]})})},eO=r(97869),eS=function(e){var t=e.postResource,r=e.className,i=ex();return(0,n.jsx)(d.F.Right,{className:r,hidden:!i,children:(0,n.jsx)(y.DW,{post:null==t?void 0:t.data,children:(0,n.jsx)(eO.t,{})})})},ek=r(90161),eP=function(){var e,t,r,o,c,u=(0,ek.v)(),f=u.postSlug,p=u.space,m=u.spaceSlug,b=u.postResource,v=u.isLoading,g=u.isIframeEmbed,_=u.hasRightSidebar,j=u.bodyClassNames,w=u.perPagePostIds,O=u.onPostDestroy,S=u.shouldShowEditPostModal,k=u.setShouldShowEditPostModal,P=u.spacesContext,C=(0,ec.wC)().minimal_layout,N=(0,ea.h)().layoutType,A=null==(e=(0,s.TH)().state)?void 0:e.isRedirectFromPostModal;if((0,l.$)({postId:null==(t=b.data)?void 0:t.id,spaceId:null==(r=b.data)?void 0:r.space_id,isDisabled:!!A}),(0,i.useEffect)(function(){window.scrollTo(0,0);var e=document.getElementById("panel");e&&e.scrollTo(0,0)},[f]),"error"===b.status&&(null==(o=b.error)?void 0:o.status)===404)return(0,n.jsx)(ew,{space:p,postResource:b,onPostDestroy:O,spaceSlug:m});if(g)return(0,n.jsx)(en._x,{perPagePostIds:w,children:(0,n.jsx)(ed,{postResource:b})});var I=(0,el.Sb)(b.data||{},{postSlugInUrl:f}),E=(null==(c=b.data)?void 0:c.minimal_layout)&&I;if(P.isLoading||C&&!(null==b?void 0:b.data))return(0,n.jsx)(eu.a,{center:!0});var T=(0,eo.V5)(p),L=(0,el.HZ)(null==b?void 0:b.data);if(E&&!L)return(0,n.jsx)(en._x,{perPagePostIds:w,isSharedPostView:I,children:(0,n.jsx)(ef,{postResource:b,onPostDestroy:O})});if(T||L)return(0,n.jsx)(en._x,{perPagePostIds:w,isSharedPostView:!!I,children:(0,n.jsx)(ee,{event:null==b?void 0:b.post,space:p,isLoading:null==b?void 0:b.isLoading,onChange:null==b?void 0:b.onPostChange,onDestroy:O,isSharedPostMinimalLayout:E})});var D=[et.C.empty,et.C.minimal].includes(N);return(0,n.jsx)(en._x,{perPagePostIds:w,isSharedPostView:!!I,children:(0,n.jsx)(h.W,{fullWidth:!0,children:(0,n.jsxs)(d.F.Body,{children:[(0,n.jsx)(ei,{postResource:b,bodyClassNames:j}),!D&&(0,n.jsx)(y.DW,{post:null==b?void 0:b.post,children:(0,n.jsx)(ey,{space:p,postResource:b,onPostDestroy:O})}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(x.gi,{variant:"full-post-view",show:v}),!v&&b.data&&(0,n.jsxs)("div",{className:a()("react-page-post-show w-full",{"react-page-post-show--no-right-sidebar":_}),"data-testid":"post-full",children:[(0,n.jsx)(er.Y,{post:b.data,onPostChange:b.onPostChange,onPostDestroy:O,pageSupportsContentTruncation:!1,defaultShowComment:!0,hideShareLink:L},b.data.id),(0,n.jsx)(es.u,{show:S,post:null==b?void 0:b.post,closeModal:k,onChange:b.onPostChange})]}),(0,n.jsx)(eS,{postResource:b})]})]})})})};let eC=eP},90161:function(e,t,r){"use strict";r.d(t,{v:()=>_});var n=r(67294),i=r(94184),o=r.n(i),a=r(70442),s=r(60589),l=r(13532),c=r(1892),u=r(61193),d=r(40274),f=r(41342),p=r(15731),m=r(24804),b=r(96354);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r=e.enabled,i=e.key,o=e.onLoadInEditMode,a=(0,b.t)().edit,s=(t=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];(0,n.useEffect)(function(){c(!1)},[i]),(0,n.useEffect)(function(){r&&!l&&"true"===a&&(o(),c(!0))},[r,l,a,o])};function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var _=function(){var e,t,r,i=(0,a.UO)(),b=i.postSlug,h=i.spaceSlug,_=(0,f.wh)().isLoading,x=(0,f.nT)(),j=(0,a.k6)(),w=(0,d.L)().show,O=x.helpers.findBy({slug:h}),S=(0,c.t)({spaceId:null==O?void 0:O.id,spaceSlug:h,postSlug:b}),k=(0,u.D)(),P=(0,p.I)(),C=!!(null==O?void 0:O.hide_right_sidebar)&&!(0,s.V5)(O),N=(e=(0,m.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return v(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=N[0],I=N[1];(0,n.useEffect)(function(){document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})},[null==S||null==(t=S.post)?void 0:t.id]);var E=o()("view-space view-space--".concat(null==(r=S.data)?void 0:r.space_id," view-space-in-group view-space-in-group--").concat(null==O?void 0:O.space_group_id)),T=k||S.isLoading||!S.data;y({enabled:!_&&!T,key:"".concat(h).concat(b),onLoadInEditMode:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,w({post:S.data,onPostChange:S.onPostChange})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)})})()}});var L=S.data?[[S.data.id]]:[];return{isLoading:T,isLoadingAppData:k,isIframeEmbed:P,space:O,postResource:S,bodyClassNames:E,hasRightSidebar:C,shouldShowEditPostModal:A,setShouldShowEditPostModal:I,perPagePostIds:L,onPostDestroy:function(){h&&j.push(l.RZ.show({spaceSlug:h}))},spacesContext:x,spaceSlug:h,postSlug:b}}},46407:function(e,t,r){"use strict";r.d(t,{h:()=>y});var n=r(85893),i=r(67294),o=r(47624),a=r(3697),s=r(83095),l=r(41342),c=r(23560),u=r.n(c),d=r(39905),f=r(57363),p=function(e){var t=e.children,r=e.className,i=e.hasIcon,o=e.id,a=e.isButton,s=e.linkName,l=e.render,c=e.showModal;return u()(l)?(0,n.jsx)(n.Fragment,{children:l({onClick:c})}):void 0!==a&&a?(0,n.jsxs)(d.z,{type:"button",className:r,id:o,onClick:c,"aria-haspopup":!0,large:!0,isFullRounded:!0,children:[void 0!==i&&i&&(0,n.jsx)(f.JO,{type:"plus"}),s||t]}):(0,n.jsx)("a",{className:r,id:o,onClick:c,href:"#new-post","aria-haspopup":!0,children:s||t})},m=r(69788);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t,r=e.bodyForEditor,c=void 0===r?"":r,u=e.children,d=e.className,f=e.currentSpaceId,b=e.hasIcon,y=e.id,v=e.isButton,g=e.linkName,_=e.maxZIndexEnabled,x=e.onSubmitSuccess,j=e.render,w=e.tiptapBodyForEditor,O=e.title,S=void 0===O?"":O,k=(0,l.wh)().isViewOnlyMasquerading,P=(0,o.r)(),C=h((0,i.useState)(!1),2),N=C[0],A=C[1],I=(0,l.L2)(),E=f||(null==I||null==(t=I.data)?void 0:t.id),T=(0,s.d)({cacheKey:a._7}).getPersistedFormFieldValues,L=h((0,i.useState)({space_id:E}),2),D=L[0],M=L[1];return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(p,{className:d,hasIcon:void 0!==b&&b,id:y,isButton:void 0===v||v,linkName:g,render:j,showModal:function(e){if(!k){e.preventDefault();var t,r,n=T();M((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},n),r=r={name:S||(null==n?void 0:n.name),body_for_editor:c||(null==n?void 0:n.body),space_id:E||(null==n?void 0:n.space_id)},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),P.show({spaceId:E,onSubmitSuccess:x,bodyForEditor:c,tiptapBodyForEditor:w})}},children:u}),N&&(0,n.jsx)(l.DW,{post:D,onPostChange:M,children:(0,n.jsx)(m.Y,{show:!0,closeModal:function(){A(!1),M({})},currentSpaceId:E,maxZIndexEnabled:void 0!==_&&_,onSubmitSuccess:x})})]},E)}},23776:function(e,t,r){"use strict";r.d(t,{R:()=>b});var n=r(85893),i=r(67294),o=r(88767),a=r(84326),s=r(52478),l=r(41342),c=r(1892),u=r(51169);function d(e){var t,r,i=e.currentSpaceId,o=e.postSlug,a=e.children,s=e.loaderVariant,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["currentSpaceId","postSlug","children","loaderVariant"]),f=(0,c.t)({spaceId:i,postSlug:o}),p=f.post;return f.isLoading?(0,n.jsx)(u.a,{variant:void 0===s?"fullscreen":s}):(0,n.jsx)(l.DW,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({post:p},d),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}var f=r(69788);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e){var t=e.currentSpaceId,r=e.postSlug,c=m((0,i.useState)(!1),2),u=c[0],p=c[1],b=m((0,i.useState)(!1),2)[1],h=function(){p(!1)},y=new o.QueryClient(s.V);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",onClick:function(e){e.preventDefault(),b(!0),p(!0)},children:[(0,n.jsx)("h4",{children:(0,a.t)("edit_post")}),(0,n.jsx)("div",{className:"dropdown-menu__descriptor",children:(0,a.t)("edit_post_description")})]}),(0,n.jsx)(o.QueryClientProvider,{client:y,children:(0,n.jsx)(l.HB,{children:u&&(0,n.jsx)(d,{currentSpaceId:t,postSlug:r,closeModal:h,onPostChange:function(){h(),window.location.reload()},children:(0,n.jsx)(f.Y,{show:!0,closeModal:h,currentSpaceId:t})})})})]})}},66849:function(e,t,r){"use strict";r.d(t,{J:()=>p});var n=r(85893),i=r(94184),o=r.n(i),a=r(84326),s=r(57363),l=r(98363),c=r(41553),u=function(e){var t=e.userName,r=e.userAvatarUrl,i=e.onClick;return(0,n.jsxs)("button",{type:"button",onClick:i,className:o()("border-primary bg-primary focus-visible:!outline-secondary flex w-full cursor-pointer items-center justify-between rounded-2xl border p-3.5 transition-shadow hover:shadow-md focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(l.s,{name:t,src:r,size:"8"}),(0,n.jsx)(c.Z.LabelMd,{color:"text-light",children:(0,a.t)("start_a_post")})]}),(0,n.jsx)("div",{className:o()("bg-tertiary flex h-8 w-8 justify-center rounded-full"),children:(0,n.jsx)(s.JO,{type:"20-plus-v2",size:20,className:"text-dark"})})]})},d=r(41342),f=r(46407),p=function(){var e=(0,d.wh)().currentCommunityMember,t=null!=e?e:{},r=t.name,i=t.avatar_url;return(0,n.jsx)(f.h,{render:function(e){var t=e.onClick;return(0,n.jsx)(u,{userName:null!=r?r:"",userAvatarUrl:i,onClick:t})}})}},47624:function(e,t,r){"use strict";r.d(t,{r:()=>O});var n=r(85893),i=r(96486),o=r(84326),a=r(57105),s=r(86214),l=r(3697),c=r(41342),u=r(83095),d=function(e){var t;return void 0!==(null==e||null==(t=e.data)?void 0:t.id)},f=function(e){var t=e.spaceId,r=e.bodyForEditor,i=e.tiptapBodyForEditor,o=e.shouldSkipRedirectAfterSubmit,a=e.onSubmitSuccess,f=(0,c.L2)(),p=t||(d(f)?f.data.id:void 0),m=(0,(0,u.d)({cacheKey:l._7}).getPersistedFormFieldValues)(),b={id:null,space_id:p||(null==m?void 0:m.space_id),name:null==m?void 0:m.name,body_for_editor:r||(null==m?void 0:m.body),tiptap_body:i||(null==m?void 0:m.tiptap_body),cover_image:null==m?void 0:m.cover_image};return(0,n.jsx)(c.DW,{post:b,children:(0,n.jsx)(s.H,{shouldSkipRedirectAfterSubmit:o,onSubmitSuccess:a})})},p=r(43515),m=r(20987),b=r(13087),h=r(34519),y=r(88241),v=r(91149),g=r(56516),_=r(79895),x=r(6233),j=function(e){var t=e.spaceId,r=e.shouldSkipRedirectAfterSubmit,s=e.onSubmitSuccess,l=e.bodyForEditor,c=e.tiptapBodyForEditor,u=(0,a.dd)(),d=(0,p.L)().isDirty,j=(0,b.c)({shouldPrevent:d}),w=(0,_.Z)(),O=(0,x.d)(),S=(0,g.d)(),k=w.visible||O.visible||S.visible;return(0,m.u)({disabled:k,onClose:j}),(0,n.jsxs)(h.u_,{isOpen:u.visible,onClose:i.noop,className:"quick-post-v2-modal w-full max-w-3xl","aria-label":(0,o.t)("quick_post_v2.title"),children:[(0,n.jsx)(h.u_.Overlay,{onClick:j}),(0,n.jsx)(v.H,{children:(0,n.jsx)(y._x,{children:(0,n.jsx)(f,{spaceId:t,bodyForEditor:l,tiptapBodyForEditor:c,shouldSkipRedirectAfterSubmit:r,onSubmitSuccess:s})})})]})},w=a.gk.create(function(e){return(0,n.jsx)(j,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),O=function(){return(0,a.dd)(w)}},83665:function(e,t,r){"use strict";r.d(t,{Z:()=>s});var n=r(85893),i=r(67294),o=r(92640),a=(0,i.forwardRef)(function(e,t){var r,i;return(0,n.jsx)("div",{children:(0,n.jsx)(o.y,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))})});a.displayName="RichTextInput";let s=a},54738:function(e,t,r){"use strict";r.d(t,{G:()=>n});var n={ALL:"all",ACTIVE:"active",ARCHIVED:"archived"}},48125:function(e,t,r){"use strict";r.d(t,{n:()=>l});var n=r(96486),i=r(26758),o=r(35975),a=r(61089),s=r(54738),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.G.ALL,t=(0,a.Xt)().queryParams,r=(0,i.v)(),l=r.setPage,c=r.initialPage,u=(0,n.omit)(t,["page","status"]),d=(0,n.isNil)(e)?u:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({status:e},u);return{accessGroupsInfiniteQuery:(0,o.M)({perPage:o.L,initialPage:c,options:{keepPreviousData:!1},filters:d}),initialPage:c,setPage:l}}},59986:function(e,t,r){"use strict";r.d(t,{d:()=>m,x:()=>b});var n=r(85893),i=r(67294),o=r(96486),a=r(50308),s=r.n(a),l=r(21835),c=r(14598);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||f(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}var p=(0,i.createContext)({accessGroup:{id:0,name:"",space_group_ids:[],space_ids:[],has_members:!1,status:"active"},updateFiltersToAddMembers:s(),selectedMemberIds:[],setSelectedMemberIds:s(),clearSelectedMemberIds:s(),addMemberId:s(),updateTotalMembersToProcess:s(),totalMembersToProcess:0,shouldBlockActions:!1,setShouldBlockActions:s(),filtersToProcessMembers:{},setFiltersToProcessMembers:s(),clearMemberIdsAndFilters:s(),showMemberProfileEdit:s()});p.displayName="AccessGroupDataContext";var m=function(){var e=(0,i.useContext)(p);return(0,l.Z)(e,"useAccessGroupData must be used within a AccessGroupDataContextProvider"),e};function b(e){var t=e.accessGroup,r=e.children,a=d((0,i.useState)([]),2),s=a[0],l=a[1],m=d((0,i.useState)(!1),2),b=m[0],h=m[1],y=d((0,i.useState)(0),2),v=y[0],g=y[1],_=d((0,i.useState)([]),2),x=_[0],j=_[1],w=(0,i.useCallback)(function(){l([])},[l]),O=(0,i.useCallback)(function(e){l(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return u(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||f(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},[l]),S=(0,i.useCallback)(function(e){(0,o.isEqual)(e,x)||(w(),j(e))},[x,w]),k=(0,i.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=s.length;t>0?t!=v&&g(s.length):e!=v&&g(e)},[s.length,v]),P=(0,i.useCallback)(function(){l([]),j([])},[l,j]),C=(0,c.H)().showMemberProfileEdit;return(0,n.jsx)(p.Provider,{value:{accessGroup:t,selectedMemberIds:s,setSelectedMemberIds:l,clearSelectedMemberIds:w,addMemberId:O,updateFiltersToAddMembers:S,updateTotalMembersToProcess:k,totalMembersToProcess:v,shouldBlockActions:b,setShouldBlockActions:h,setFiltersToProcessMembers:j,filtersToProcessMembers:x,clearMemberIdsAndFilters:P,showMemberProfileEdit:C},children:r})}},38669:function(e,t,r){"use strict";r.d(t,{D:()=>O});var n=r(85893),i=r(57105),o=r(84326),a=r(63676),s=r(95727),l=r(41553),c=r(88767),u=r(70442),d=r(3176),f=r(13532),p=r(85924),m=r(60878),b=r(48125),h=function(e){var t=e.hideModal,r=(0,b.n)().accessGroupsInfiniteQuery,n=(0,m.pm)(),i=(0,d.L)().destroyAccessGroup,a=(0,u.k6)();return(0,c.useMutation)(function(e){return i(e.accessGroupId)},{onSuccess:function(){p.Eh.invalidateQueries(r.queryKey[0]),n.success((0,o.t)("settings.access_groups.admin.messages.archived")),a.push(f.Lo.members.access_groups),t()},onError:function(e){return n.error(e.message)}})},y="settings.access_groups.admin.form.archive",v=function(e){var t,r,i=e.accessGroup,c=e.isOpen,u=e.onClose,d=h({hideModal:u}),f=d.mutate,p=d.isLoading,m=null==i||null==(t=i.policies)?void 0:t.can_destroy;return(0,n.jsx)(s.V,{title:(0,o.t)([y,"title"],{name:i.name}),isOpen:c,onClose:u,onCancel:u,confirmText:(0,o.t)([y,"action"]),confirmVariant:"danger",isDisabled:p||!m,onConfirm:function(){f({accessGroupId:i.id})},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(l.Z.BodyMd,{children:i.has_members?(0,o.t)([y,"archive_with_members.count"],{count:(0,a.HA)(null!=(r=i.total_members)?r:0)}):(0,o.t)([y,"are_you_sure"])}),(0,n.jsx)(l.Z.BodyMd,{children:(0,o.t)([y,"active_workflows_notice"])})]})})},g=r(63549),_="settings.access_groups.admin.form.archive",x=function(e){var t,r,i,a=e.accessGroup,s=e.isOpen,c=e.onClose;return(0,n.jsx)(g.c,{title:(0,o.t)([_,"title"],{name:a.name}),isOpen:s,onClose:c,disabled:!0,onConfirm:function(){},confirmText:(0,o.t)([_,"action"]),confirmVariant:"danger",children:(0,n.jsxs)(n.Fragment,{children:[(0,o.t)([_,"remove_entry_points_body"]),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:(0,o.t)([_,"entry_points"])})}),null==a||null==(i=a.running_sources)||null==(r=i.map(function(e){return e.record_display_name}))||null==(t=r.filter(function(e){return e}))?void 0:t.join(", ")]})})},j=function(e){var t=e.accessGroup,r=(0,i.dd)();return t.running_sources&&t.running_sources.length>0?(0,n.jsx)(x,{accessGroup:t,isOpen:r.visible,onClose:r.hide}):(0,n.jsx)(v,{accessGroup:t,isOpen:r.visible,onClose:r.hide})},w=i.gk.create(function(e){var t=e.accessGroup;return(0,n.jsx)(j,{accessGroup:t})}),O=function(){return(0,i.dd)(w)}},71660:function(e,t,r){"use strict";r.d(t,{c:()=>th});var n=r(85893),i=r(70442),o=r(37416),a=r(59986),s=r(84326),l=r(75148),c=r(41553),u=r(44102),d=r(57363),f=r(39905),p=r(43544),m=r(38669),b=r(52621),h="settings.access_groups.admin.form.actions",y=function(){var e=(0,a.d)().accessGroup,t=(0,b.e)(),r=(0,m.D)();return(0,n.jsxs)(p.Lt,{button:(0,n.jsxs)(f.z,{type:"button",variant:"tertiary",className:"flex !pr-4",large:!0,children:[(0,s.t)([h,"title"]),(0,n.jsx)(d.JO,{type:"caret-down-bold",size:16,className:"ml-1"})]}),menuButtonEl:"div",children:[(0,n.jsx)(p.Lt.ItemWithLink,{linkType:"button",onClick:function(){return t.show({accessGroup:e})},children:(0,n.jsx)(p.Lt.IconContainer,{children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)([h,"rename"])})})}),(0,n.jsx)(p.Lt.ItemWithLink,{linkType:"button",onClick:function(){return r.show({accessGroup:e})},children:(0,n.jsx)(p.Lt.IconContainer,{children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)([h,"archive"])})})}),(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return(0,u.g)({entityId:e.id,entityType:"AccessGroup"}).then(function(e){return window.open(e.masquerade_url,"_self")}).catch(function(e){return console.error(e)})},children:(0,n.jsx)(p.Lt.IconContainer,{children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)([h,"view_as"])})})})]})},v=r(51466),g=r(67294),_=r(96486),x=r(52293),j=r(22294),w=r(10060),O=function(e){return{id:e.id,name:e.name,spaces:[]}};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r=e.defaultValues,i={options:(0,w.zo)({serializeSpaceGroup:O,serializeSpace:w.lV}).options}.options,a=(0,x.qo)(),l=(t=(0,g.useState)(!0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],d=l[1];return(0,g.useEffect)(function(){d((0,_.isEqual)((0,_.sortBy)(a.space_ids),(0,_.sortBy)(r.space_ids))&&(0,_.isEqual)((0,_.sortBy)(a.space_group_ids),(0,_.sortBy)(r.space_group_ids)))},[a,r]),(0,n.jsxs)(o.x.Body,{className:"h-full overflow-y-auto",children:[(0,n.jsxs)("div",{className:"mb-4 mt-14 h-full overflow-y-auto px-8 pb-20",children:[(0,n.jsx)(c.Z.TitleMd,{children:(0,s.t)("settings.access_groups.admin.modal.access.title")}),(0,n.jsx)(c.Z.LabelMd,{color:"text-light",children:(0,s.t)("settings.access_groups.admin.modal.access.description")}),(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsxs)(j.i,{options:i,className:"flex-auto",children:[(0,n.jsx)(j.i.Header,{children:(0,n.jsx)(j.i.SearchBar,{})}),(0,n.jsxs)(j.i.Body,{className:"overflow-y-auto",children:[(0,n.jsxs)(j.i.ListHeader,{className:"min-h-[3rem]",children:[(0,n.jsx)(j.i.ListHeaderColumnNoAccess,{}),(0,n.jsx)(j.i.ListHeaderColumnAccessGranted,{})]}),(0,n.jsxs)(j.i.ListContainer,{children:[(0,n.jsx)(j.i.ListMobile,{}),(0,n.jsx)(j.i.ListNoAccess,{}),(0,n.jsx)(j.i.ListAccessGranted,{})]})]})]})})]}),(0,n.jsx)("div",{className:"bg-primary border-primary absolute bottom-0 left-0 w-full border-t",children:(0,n.jsx)("div",{className:"mx-auto max-w-screen-md px-6 py-4",children:(0,n.jsx)("div",{className:"flex w-full flex-row justify-end",children:(0,n.jsx)(f.z,{type:"submit",variant:"circle",disabled:u,children:(0,s.t)("settings.access_groups.admin.modal.access.actions.save")})})})})]})},P=r(57105),C=r(63549),N=r(88767),A=r(93199),I=r(13532),E=r(85924),T=r(60878),L=r(50180),D=function(e){var t=e.accessGroupId,r=e.closeModal,n=(0,T.pm)(),i=function(e){var t=e.accessGroupId,r=e.params;return(0,A.aU)(I.av.admin.accessGroupContent.update(t),r)},o=(0,N.useMutation)({mutationFn:function(e){return i({accessGroupId:t,params:e})},onSuccess:function(){E.Eh.invalidateQueries((0,L.M)(t)),n.success((0,s.t)("settings.access_groups.admin.modal.access.messages.updated")),r&&r()},onError:function(e){n.error(e.message),r&&r()}}),a=o.mutate;return{isSubmitting:o.isLoading,handleSubmit:a}},M="settings.access_groups.admin.modal.access.update_confirmation",R=function(e){var t=e.contentData,r=e.accessGroupId,i=(0,P.dd)(),o=function(){i.hide(),i.remove()},a=D({accessGroupId:r,closeModal:o}),l=a.handleSubmit,u=a.isSubmitting;return(0,n.jsx)(C.c,{isOpen:i.visible,title:(0,s.t)([M,"title"]),onClose:o,onConfirm:function(){l(t)},confirmVariant:"circle",confirmText:(0,s.t)([M,"on_confirm"]),disabled:u,children:(0,n.jsx)(c.Z.BodyMd,{children:(0,s.t)([M,"description"])})})},B=P.gk.create(function(e){var t=e.contentData,r=e.accessGroupId;return(0,n.jsx)(R,{contentData:t,accessGroupId:r})});function F(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var z=function(){var e=(0,a.d)().accessGroup,t=(0,P.dd)(B),r=D({accessGroupId:e.id}).handleSubmit,i={space_group_ids:e.space_group_ids,space_ids:e.space_ids};return(0,n.jsx)(v.l,{onSubmit:function(n){var i;return(i=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!e.has_members)return[3,2];return[4,t.show({contentData:n,accessGroupId:e.id})];case 1:return i.sent(),[3,3];case 2:r(n),i.label=3;case 3:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,n){var o=i.apply(e,t);function a(e){F(o,r,n,a,s,"next",e)}function s(e){F(o,r,n,a,s,"throw",e)}a(void 0)})})()},defaultValues:i,children:(0,n.jsx)(k,{defaultValues:i})})},U=r(38317),Z=function(){var e=(0,i.k6)();return{redirectToEditModal:function(){e.push(U.y.MEMBERS)},redirectToAddMembers:function(){e.push(U.y.ADD_MEMBERS)}}},G=r(34568),q=r(33975),V=r(96354),H=r(34062),W=function(e){var t=e.page,r=e.queryParams,n=e.history,i=e.pageQueryName,o=void 0===i?"page":i;(0,g.useEffect)(function(){if(Number(r[o]||1)!==t){var e=new URLSearchParams(n.location.search);t>1?e.set(o,String(t)):e.delete(o),n.push({search:e.toString()})}},[t,n])},Q=r(67579),J=function(){return{manageAccessGroupMembers:function(e){var t=e.id,r=e.params;return(0,A.Cu)(I.av.admin.accessGroupMembers.manage(t),r)}}},K=Object.freeze({JOIN:"join",REMOVE:"remove"}),$=function(e){var t=e.closeConfirmationModal,r=(0,a.d)(),n=r.selectedMemberIds,i=r.filtersToProcessMembers,o=r.accessGroup,s=r.setShouldBlockActions,l=r.clearSelectedMemberIds,c=(0,T.pm)(),u=J().manageAccessGroupMembers;return(0,N.useMutation)({mutationFn:function(){return u({id:o.id,params:{community_member_ids:n,process_type:K.REMOVE,filters:n.length>0?void 0:i}})},onSuccess:function(){l(),s(!0),t()},onError:function(e){return c.error(e.message)}})},X="settings.access_groups.admin.modal.members.bulk_actions.remove_confirmation",Y=function(e){var t=e.isVisible,r=e.onClose,i=(0,a.d)().totalMembersToProcess,o=$({closeConfirmationModal:function(){r()}}),l=o.mutate,c=o.isLoading;return(0,n.jsx)(C.c,{title:(0,s.t)([X,"title"]),isOpen:t,onClose:r,disabled:c,onConfirm:function(){l()},confirmText:(0,s.t)([X,"confirm"]),confirmVariant:"danger",children:(0,s.t)([X,"description"],{count:i})})};function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var et="settings.access_groups.admin.actions.bulk_actions",er=function(){var e,t=(0,a.d)().shouldBlockActions,r=(e=(0,Q.Z)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ee(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],l=[{icon:"16-remove-user",label:(0,s.t)([et,"remove_members"]),onClick:function(){o()},value:"reorder"}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y,{isVisible:i,onClose:o}),(0,n.jsx)(p.Lt,{direction:"bottom-start",button:(0,n.jsx)(p.Lt.MenuButton,{children:(0,n.jsxs)(f.z,{disabled:t,small:!0,variant:"secondary-light",children:[(0,n.jsx)(c.Z.LabelXs,{weight:"medium",children:(0,s.t)([et,"title"])}),(0,n.jsx)(d.JO,{type:"16-chevron-down",size:16})]})}),options:l})]})},en=r(555),ei="settings.access_groups.admin.modal.members",eo=function(){var e=Z().redirectToAddMembers,t=(0,a.d)().shouldBlockActions;return(0,n.jsx)("div",{className:"w-full pt-7 lg:px-9",children:(0,n.jsx)("div",{className:"border-primary rounded-2xl border py-12",children:(0,n.jsx)(en.u,{header:(0,s.t)([ei,"setup"]),description:(0,s.t)([ei,"setup_description"]),secondaryLabel:(0,s.t)([ei,"actions.select_members"]),secondaryDisabled:t,onSecondaryClick:function(){e()}})})})},ea=r(13847),es=r(35565),el=r(85798),ec=function(e){var t=e.communityMember,r=(0,a.d)(),i=r.selectedMemberIds,o=r.addMemberId,s=r.updateTotalMembersToProcess;return(0,n.jsx)("input",{type:"checkbox",className:"text-dark bg-primary hover:bg-tertiary hover:border-secondary disabled:bg-tertiary disabled:border-selector-inactive border-secondary focus:bg-tertiary focus:border-secondary placeholder:text-light h-4 w-4 cursor-pointer rounded align-middle placeholder:opacity-100 focus:ring-0 focus:ring-offset-0",id:"community-member-".concat(t.id,"-box"),checked:i.includes(t.id),onChange:function(){o(t.id),s(0)},disabled:!1})},eu=r(98363),ed=function(e){var t=e.member,r=e.isAvatarHidden,i=(0,a.d)().showMemberProfileEdit,o=t.name,l=t.avatar_url,u=t.email;return o?(0,n.jsxs)("button",{className:"flex items-center gap-3 text-left",type:"button",onClick:function(){return i({member:t})},children:[!(void 0!==r&&r)&&(0,n.jsx)(eu.s,{src:l,name:o,size:"6"}),(0,n.jsxs)("div",{className:"grid pr-4",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:o}),(0,n.jsx)(c.Z.LabelSm,{color:"text-default",children:u})]})]}):(0,n.jsx)(n.Fragment,{children:(0,s.t)("dash")})};function ef(e){var t=e.memberId,r=e.shortDisabledLabel,i=e.shouldHideIfNoScore,o=(0,es.wW)(),a=o.data,l=o.isLoading,u=(0,ea.m3)();if(l)return null;if(u){var d={activityScore:{label:void 0!==r&&r?(0,s.t)("activity_score.view"):(0,s.t)("activity_score.view_score"),activity:"disabled"}};return(0,n.jsx)("div",{children:(0,n.jsx)(es.uy,{activityScore:d.activityScore})})}var f=null==a?void 0:a.get(t);return void 0!==i&&i&&!f?null:f?(0,n.jsx)(es.Yf,{scoreDetail:f}):(0,n.jsx)(c.Z.LabelSm,{color:"text-default",children:(0,s.t)("n/a")})}var ep=r(12274),em=r(43271),eb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PP";if(!e)return"";var r=new Date(e);return(0,ep.default)(r)?(0,_.startCase)((0,em.default)(r,t)):""},eh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.admin?(0,s.t)("role_admin"):e.moderator?(0,s.t)("moderator"):(0,s.t)("member")},ey=r(4117),ev=r(54096);function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e_=ey.f2.SpaceGroupsFilterV2,ex=ey.f2.SpacesFilter,ej=ey.f2.StatusFilter,ew=ey.f2.MemberTagsFilter,eO=ey.f2.PaywallsFilter,eS=ey.f2.EventsFilter,ek=ey.f2.HasPastDueSubscriptionFilter,eP=ey.f2.JoinedCommunityDaysAgoFilter,eC=ey.f2.LastLoggedInDaysAgoFilter,eN=ey.f2.AvatarSet,eA=ey.f2.ActivityScoreFilter,eI=ey.f2.HeadlineFilter,eE=ey.f2.NameFilter,eT=ey.f2.LocationFilter,eL=ey.f2.BioFilter,eD=ey.f2.EmailFilter,eM=ey.f2.InvitationLinksFilter,eR=[{name:"joined_community_days_ago",component:eP,label:(0,s.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,s.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:eC,label:(0,s.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],eB=[{name:"name",component:eE,label:(0,s.t)("members_directory.header.search.filters.name")},{name:"email",component:eD,label:(0,s.t)("members_directory.header.search.filters.email")},{name:"spaces",component:ex,label:(0,s.t)("members_directory.header.search.filters.spaces.singular_title")},{name:"invitation_link_ids",component:eM,label:(0,s.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},{name:"space_groups",component:e_,label:(0,s.t)("members_directory.header.search.filters.space_groups.singular_title")},{name:"online_status",component:ej,label:(0,s.t)("members_directory.header.search.filters.online_status")},{name:"headline",component:eI,label:(0,s.t)("members_directory.header.search.filters.headline")},{name:"bio",component:eL,label:(0,s.t)("members_directory.header.search.filters.bio")},{name:"location",component:eT,label:(0,s.t)("members_directory.header.search.filters.location")},{name:"tags",component:ew,label:(0,s.t)("members_directory.header.search.filters.tags.singular_title")},{name:"paywalls",component:eO,label:(0,s.t)("members_directory.header.search.filters.paywalls.singular_title")},{name:"events",component:eS,label:(0,s.t)("members_directory.header.search.filters.events.singular_title")},{name:"has_past_due_subscription",component:ek,label:(0,s.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(function(e){if(Array.isArray(e))return eg(e)}(eR)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(eR)||function(e,t){if(e){if("string"==typeof e)return eg(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eg(e,t)}}(eR)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{name:"is_avatar_set",component:eN,label:(0,s.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:eA,label:(0,s.t)("members_directory.header.search.filters.activity_score")}]),eF=function(){return(0,n.jsx)("div",{className:"!px-0",children:(0,n.jsx)(ey.YP,{platformFilters:eB,defaultFilterNames:["name","spaces","tags","events"],className:"!items-start border-none pb-0 pt-7",children:(0,n.jsx)(ev.kT,{})})})};function ez(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eU=function(e){var t=e.onSort,r=e.setPage,i=e.initialPage,o=e.infiniteQuery,l=e.order,c=e.children,u=(0,ea.rV)(),d=(0,g.useMemo)(function(){return l?Object.entries(l).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ez(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ez(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{id:t[0],desc:"desc"===t[1]}}):null},[l]),f=(0,a.d)().accessGroup,p=(0,g.useMemo)(function(){var e;return e=f.id,(0,_.compact)([{accessorKey:"memberIdCheckbox",header:"",accessorFn:function(e){return e},cell:function(t){return(0,n.jsx)(ec,{accessGroupId:e,communityMember:t.getValue()})},cellClassName:"!align-middle"},{accessorKey:"name",header:(0,s.t)("settings.manage_members.name"),accessorFn:function(e){return e},cell:function(e){return(0,n.jsx)(ed,{member:e.getValue()})}},u&&{accessorKey:"activity_score",header:(0,s.t)("settings.manage_members.activity_score"),accessorFn:function(e){return e.id},cell:function(e){return(0,n.jsx)(ef,{shortDisabledLabel:!0,memberId:e.getValue()})},cellClassName:"!align-middle"},{accessorKey:"roles",header:(0,s.t)("settings.manage_members.role"),cell:function(e){return eh(e.getValue())},canSort:!1,cellClassName:"!align-middle"},{accessorKey:"profile_confirmed_at",header:(0,s.t)("settings.manage_members.joined"),cell:function(e){return eb(e.getValue())},cellClassName:"!align-middle"}])},[u,f.id]),m=(0,g.useMemo)(function(){var e,t;return(null==(t=o.data)||null==(e=t.pages)?void 0:e.flatMap(function(e){return e.records}).map(function(e){return e.id}))||[]},[o]);return(0,n.jsxs)(es.XR,{ids:m,children:[(0,n.jsx)(eF,{}),(0,n.jsx)(el.J,{columns:p,infiniteQuery:o,initialSort:d,onChangeSorting:t,onChangePage:function(e){r(e)},initialPage:i,pageSize:(0,q.b7)(),children:(0,n.jsxs)("div",{className:"flex h-full flex-col",children:[c,(0,n.jsxs)("div",{className:"max-w-full overflow-x-auto px-6 lg:px-9","data-testid":"access-group-members-table",children:[(0,n.jsxs)(H.w.Table,{className:"w-full min-w-[800px]",children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{className:"w-4"}),(0,n.jsx)("col",{}),u&&(0,n.jsx)("col",{className:"min-w-[2rem]"}),(0,n.jsx)("col",{className:"w-3/12"}),(0,n.jsx)("col",{className:"min-w-[4rem]"})]}),(0,n.jsx)(H.w.SortableHead,{}),(0,n.jsx)(H.w.Loader,{}),(0,n.jsx)(H.w.NoRecords,{text:(0,s.t)("settings.manage_members.no_members_found")}),(0,n.jsx)(H.w.Body,{})]}),(0,n.jsx)(H.w.Pagination,{align:"left",direction:"reverse"})]})]})})]})},eZ=r(42392),eG=r(76937);function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eH(e){return function(e){if(Array.isArray(e))return eq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eW(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eW(e,t){if(e){if("string"==typeof e)return eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}var eQ=function(e){var t,r,n=e.accessGroupId,o=e.shouldLoadGroupMembers,a=(0,i.k6)(),s=(0,i.TH)(),l=(0,ea.ov)(),c=(0,g.useCallback)(function(){return l?{activity_score:"desc"}:{profile_confirmed_at:"desc"}},[l]),u=function(){return[eV({key:"access_group_ids",value:n},!o&&{filter_type:"is_not"})]},d=function(){return{exclude_empty_profiles:!1,status:eG.vC.ALL}},f=(0,eZ.k)(),p=f.queryParams,m=p.order,b=p.filters;return t=eV({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(f.queryParams,["order","filters"])),r=r={onSort:function(e){var t=(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,1)||eW(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=new URLSearchParams(s.search);m&&Object.keys(m).forEach(function(e){r.delete("order[".concat(e,"]"))}),t&&r.append("order[".concat(t.id,"]"),t.desc?"desc":"asc"),a.push({search:r.toString()})},order:null!=m?m:c(),filters:eH(u()).concat(eH(b)),scope:d(),getAccessGroupFilterFilter:u,getOrderField:c,getGroupMembersInitialQueryOptions:function(){return{order:c(),initialPage:1,query:void 0,filters:eV({},u()),scope:d}}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t};function eJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eK="page",e$="settings.access_groups.admin.modal.members",eX=function(){var e,t,r=(0,V.t)(),o=Number(r[eK]||1),l=(e=(0,g.useState)(o),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eJ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eJ(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],d=(0,i.k6)(),f=(0,a.d)(),p=f.accessGroup,m=f.updateFiltersToAddMembers,b=f.updateTotalMembersToProcess,h=f.selectedMemberIds,y=eQ({accessGroupId:p.id,shouldLoadGroupMembers:!0}),v=y.query,_=y.order,x=y.onSort,j=y.filters,w=y.scope,O=y.getGroupMembersInitialQueryOptions,S={order:_,initialPage:o,query:v,filters:j,scope:w};location.pathname.includes("members/add")&&(S=O()),W({page:c,queryParams:r,history:d,pageQueryName:eK});var k=(0,q.fd)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({perPage:(0,q.b7)(),options:{keepPreviousData:!1},isAdminScope:!0},S));return((0,g.useEffect)(function(){m(j),b(k.totalQueryMembers)},[k.totalQueryMembers,b,j,m]),(null!=(t=null==p?void 0:p.total_members)?t:0)===0)?(0,n.jsx)(eo,{}):(0,n.jsx)(eU,{initialPage:S.initialPage,order:S.order,onSort:x,setPage:u,infiniteQuery:k,children:(0,n.jsxs)(H.w.Headline,{children:[(0,n.jsx)(H.w.Headline.Title,{children:(0,n.jsx)("div",{className:"flex items-center gap-5",children:0==h.length?(0,s.t)([e$,"count"],{count:k.totalQueryMembers}):(0,s.t)([e$,"count_selected"],{count:k.totalQueryMembers,total_selected:h.length})})}),(0,n.jsx)(er,{})]})})},eY="settings.access_groups.admin.modal.members",e0=function(){var e=(0,a.d)(),t=e.accessGroup,r=e.shouldBlockActions,i=e.clearMemberIdsAndFilters;(0,G.I)();var l=Z().redirectToAddMembers;return(0,n.jsx)(o.x.Body,{wrapperClassName:"max-w-screen-lg",children:(0,n.jsxs)("div",{className:"mt-14",children:[(0,n.jsxs)("div",{className:"flex justify-between px-6 lg:px-9",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.TitleMd,{children:(0,s.t)([eY,"title"],{access_group:t.name})}),(0,n.jsx)(c.Z.LabelMd,{color:"text-light",children:(0,s.t)([eY,"subtitle"])})]}),(0,n.jsx)("div",{children:(0,n.jsx)(f.z,{disabled:r,variant:"secondary-light",isFullRounded:!1,onClick:function(){i(),l()},className:"!border-primary",children:(0,s.t)([eY,"actions.add_members"])})})]}),(0,n.jsx)(eX,{})]})})},e1=r(50308),e2=r.n(e1),e3=r(21835);function e6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||e5(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e5(e,t){if(e){if("string"==typeof e)return e6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e6(e,t)}}var e8=(0,g.createContext)({updateFiltersToAddMembers:e2(),selectedMemberIds:[],setSelectedMemberIds:e2(),clearSelectedMemberIds:e2(),addMemberId:e2(),updateTotalMembersToProcess:e2(),totalMembersToProcess:0,filtersToProcessMembers:{},setFiltersToProcessMembers:e2()});e8.displayName="AddAccessGroupMembersDataContext";var e9=function(){var e=(0,g.useContext)(e8);return(0,e3.Z)(e,"useAddAccessGroupMemberData must be used within a AddAccessGroupMembersDataContextProvider"),e};function e7(e){var t=e.children,r=e4((0,g.useState)([]),2),i=r[0],o=r[1],a=e4((0,g.useState)(0),2),s=a[0],l=a[1],c=e4((0,g.useState)([]),2),u=c[0],d=c[1],f=(0,g.useCallback)(function(){o([])},[o]),p=(0,g.useCallback)(function(e){o(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return e6(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||e5(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},[o]),m=(0,g.useCallback)(function(e){(0,_.isEqual)(e,u)||(f(),d(e))},[u,f]),b=(0,g.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=i.length;t>0?t!=s&&l(i.length):e!=s&&l(e)},[i.length,s]);return(0,n.jsx)(e8.Provider,{value:{selectedMemberIds:i,setSelectedMemberIds:o,clearSelectedMemberIds:f,addMemberId:p,updateFiltersToAddMembers:m,updateTotalMembersToProcess:b,totalMembersToProcess:s,setFiltersToProcessMembers:d,filtersToProcessMembers:u},children:t})}var te=function(){var e=(0,a.d)(),t=e.accessGroup,r=e.setShouldBlockActions,n=(0,T.pm)(),i=J().manageAccessGroupMembers,o=Z().redirectToEditModal,s=e9(),l=s.clearSelectedMemberIds,c=s.filtersToProcessMembers,u=s.selectedMemberIds;return(0,N.useMutation)({mutationFn:function(){return i({id:t.id,params:{community_member_ids:u,process_type:K.JOIN,filters:u.length>0?void 0:c}})},onSuccess:function(){l(),r(!0),o()},onError:function(e){return n.error(e.message)}})},tt="settings.access_groups.admin.modal.members",tr=function(e){var t=e.isProcessingMembers,r=e.totalMembersToProcess,i=e.handleAddMembers,o=(0,P.dd)();return(0,n.jsx)(C.c,{isOpen:o.visible,onClose:o.hide,title:(0,s.t)([tt,"add.confirm_title"]),confirmVariant:"circle",confirmText:(0,s.t)([tt,"actions.add_selected_members"],{count:r}),disabled:t||0===r,onConfirm:function(){o.hide(),i()},children:(0,n.jsxs)("div",{className:"grid gap-y-6",children:[(0,n.jsx)(c.Z.BodyMd,{children:(0,s.t)([tt,"add.description1"],{count:r})}),(0,n.jsx)(c.Z.BodyMd,{children:(0,s.t)([tt,"add.description2"])})]})})},tn=P.gk.create(function(e){return(0,n.jsx)(tr,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),ti=r(51169),to=function(e){var t=e.communityMemberId,r=e9(),i=r.selectedMemberIds,o=r.addMemberId,a=r.updateTotalMembersToProcess;return(0,n.jsx)("input",{type:"checkbox",className:"text-dark bg-primary hover:bg-tertiary hover:border-secondary disabled:bg-tertiary disabled:border-selector-inactive border-secondary focus:bg-tertiary focus:border-secondary placeholder:text-light h-4 w-4 cursor-pointer rounded align-middle placeholder:opacity-100 focus:ring-0 focus:ring-offset-0",id:"community-member-".concat(t,"-box"),checked:i.includes(t),onChange:function(){o(t),a(0)},disabled:!1})};function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ts=function(e){var t=e.onSort,r=e.setPage,i=e.initialPage,o=e.infiniteQuery,a=e.order,l=e.children,c=(0,g.useMemo)(function(){return a?Object.entries(a).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ta(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ta(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{id:t[0],desc:"desc"===t[1]}}):null},[a]),u=(0,g.useMemo)(function(){return(0,_.compact)([{accessorKey:"memberIdCheckbox",header:"",accessorFn:function(e){return e},cell:function(e){return(0,n.jsx)(to,{communityMemberId:e.getValue().id})},thClassName:"!px-3",cellClassName:"!align-middle"},{accessorKey:"name",header:(0,s.t)("settings.manage_members.name"),accessorFn:function(e){return e},cell:function(e){return(0,n.jsx)(ed,{member:e.getValue()})},thClassName:"!px-3"},{accessorKey:"roles",header:(0,s.t)("settings.manage_members.role"),cell:function(e){return eh(e.getValue())},canSort:!1,thClassName:"!px-3",cellClassName:"!align-middle"},{accessorKey:"profile_confirmed_at",header:(0,s.t)("settings.manage_members.joined"),cell:function(e){return eb(e.getValue())},thClassName:"!px-3",cellClassName:"!align-middle"}])},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eF,{}),(0,n.jsx)(el.J,{columns:u,infiniteQuery:o,initialSort:c,onChangeSorting:t,onChangePage:function(e){r(e)},initialPage:i,pageSize:(0,q.b7)(),children:(0,n.jsxs)("div",{className:"flex h-full flex-col",children:[l,(0,n.jsxs)("div",{className:"max-w-full overflow-x-auto px-6 lg:px-9",children:[(0,n.jsxs)(H.w.Table,{className:"w-full min-w-[800px]",children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{className:"w-4"}),(0,n.jsx)("col",{}),(0,n.jsx)("col",{className:"w-3/12"}),(0,n.jsx)("col",{className:"min-w-[4rem]"})]}),(0,n.jsx)(H.w.SortableHead,{}),(0,n.jsx)(H.w.Loader,{}),(0,n.jsx)(H.w.NoRecords,{text:(0,s.t)("settings.manage_members.no_members_found")}),(0,n.jsx)(H.w.Body,{})]}),(0,n.jsx)(H.w.Pagination,{align:"left",direction:"reverse"})]})]})})]})};function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tc="settings.access_groups.admin.modal.members",tu="page",td=function(){var e,t=(0,V.t)(),r=Number(t[tu]||1),o=(e=(0,g.useState)(r),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tl(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tl(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],c=o[1],u=(0,i.k6)(),d=(0,a.d)().accessGroup,f=e9(),p=f.updateTotalMembersToProcess,m=f.updateFiltersToAddMembers,b=f.selectedMemberIds,h=eQ({accessGroupId:d.id,shouldLoadGroupMembers:!1}),y=h.query,v=h.order,_=h.onSort,x=h.filters,j=h.scope;W({page:l,queryParams:t,history:u,pageQueryName:tu});var w=(0,q.fd)({perPage:(0,q.b7)(),options:{keepPreviousData:!1},isAdminScope:!0,order:v,initialPage:r,query:y,filters:x,scope:j});return((0,g.useEffect)(function(){m(x),p(w.totalQueryMembers)},[w.totalQueryMembers,p,x,m]),w.isRefetching&&!w.isFetched)?(0,n.jsx)(ti.a,{center:!0}):(0,n.jsx)(ts,{initialPage:r,order:v,onSort:_,setPage:c,infiniteQuery:w,children:(0,n.jsx)(H.w.Headline,{children:(0,n.jsx)(H.w.Headline.Title,{children:0==b.length?(0,s.t)([tc,"count"],{count:w.totalQueryMembers}):(0,s.t)([tc,"count_selected"],{count:w.totalQueryMembers,total_selected:b.length})})})})},tf="settings.access_groups.admin.modal.members",tp=function(){var e=e9().totalMembersToProcess,t=Z().redirectToEditModal,r=function(){t()},i=te(),a=i.mutate,l=i.isLoading,u=function(){a()},d=(0,P.dd)(tn),p=(0,g.useCallback)(function(){d.show({isProcessingMembers:l,totalMembersToProcess:e,handleAddMembers:u})},[l,e,u,d]);return(0,n.jsxs)(o.x,{isOpen:!0,onClose:r,shouldShowCloseButton:!0,size:"xl",children:[(0,n.jsx)(o.x.Header,{className:"lg:px-9",children:(0,n.jsx)(o.x.HeaderContent,{children:(0,n.jsx)(c.Z.TitleSm,{truncate:!0,weight:"semibold",children:(0,s.t)([tf,"add.title"])})})}),(0,n.jsx)(o.x.Body,{wrapperClassName:"!ml-0",children:(0,n.jsx)(td,{})}),(0,n.jsx)(o.x.Footer,{children:(0,n.jsxs)("div",{className:"flex w-full flex-row justify-end gap-3",children:[(0,n.jsx)(f.z,{type:"button",onClick:r,variant:"secondary",children:(0,s.t)([tf,"actions.cancel"])}),(0,n.jsx)(f.z,{onClick:p,type:"submit",disabled:l||0===e,variant:"circle",children:(0,s.t)([tf,"actions.add_selected_members"],{count:e})})]})})]})},tm=function(){return(0,n.jsx)(e7,{children:(0,n.jsx)(tp,{})})},tb=function(e){var t=e.onClose,r=e.initialTab,u=(0,a.d)().accessGroup,d=[{label:(0,s.t)("settings.access_groups.admin.modal.tabs.members"),href:U.y.MEMBERS},{label:(0,s.t)("settings.access_groups.admin.modal.tabs.access"),href:U.y.CONTENT}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.x.Header,{children:(0,n.jsx)(o.x.HeaderNav,{titleNode:(0,n.jsxs)("div",{className:"divide-primary flex items-center divide-x",children:[(0,n.jsx)(l.h,{name:"20-arrow-left",iconSize:20,buttonSize:28,className:"text-default me-4",iconClassName:"w-5 h-5",ariaLabel:(0,s.t)("back"),onClick:t}),(0,n.jsx)("div",{className:"ps-4",children:(0,n.jsx)(c.Z.TitleSm,{weight:"semibold",truncate:!0,children:null==u?void 0:u.name})})]}),items:d,rightNode:(0,n.jsx)(y,{})})}),(0,n.jsx)(o.x.Body,{wrapperClassName:"max-w-screen-lg",children:(0,n.jsxs)(i.rs,{children:[(0,n.jsx)(i.AW,{exact:!0,path:U.y.MEMBERS,children:(0,n.jsx)(e0,{})}),(0,n.jsx)(i.AW,{exact:!0,path:U.y.ADD_MEMBERS,children:(0,n.jsx)(tm,{})}),(0,n.jsx)(i.AW,{exact:!0,path:U.y.CONTENT,children:(0,n.jsx)(z,{})}),(0,n.jsx)(i.l_,{to:(void 0===r?"":r)||U.y.MEMBERS})]})})]})},th=function(e){var t=e.accessGroup,r=e.handleClose,s=e.initialTab,l=e.isOpen;return(0,n.jsx)(a.x,{accessGroup:t,children:(0,n.jsx)(i.VA,{children:(0,n.jsx)(o.x,{isOpen:void 0===l||l,onClose:r,shouldShowCloseButton:!0,children:(0,n.jsx)(tb,{onClose:r,initialTab:void 0===s?"":s})})})})}},52621:function(e,t,r){"use strict";r.d(t,{e:()=>_});var n=r(85893),i=r(67294),o=r(96486),a=r(84326),s=r(57105),l=r(63549),c=r(51466),u=r(88767),d=r(3176),f=r(60878),p=r(48125),m=r(50180),b=function(e){var t=e.id,r=(0,u.useQueryClient)(),n=(0,f.pm)(),i=(0,d.L)().updateAccessGroup,o=(0,p.n)().accessGroupsInfiniteQuery;return(0,u.useMutation)(function(e){return i({id:t,params:{name:e.name,description:e.description}})},{onSuccess:function(){r.invalidateQueries((0,m.M)(t)),r.invalidateQueries(o.queryKey[0]),n.success((0,a.t)("settings.access_groups.admin.messages.updated"))},onError:function(e){return n.error(e.message)}})},h="settings.access_groups.admin.form",y=(0,o.uniqueId)(),v=function(e){var t=e.accessGroup,r=(0,i.useRef)(null),o=(0,s.dd)(),u=b({id:t.id}),d=u.mutate,f=u.isLoading,p=function(e){d(e,{onSuccess:function(){return o.hide()}})};return(0,n.jsx)(l.c,{formId:y,isOpen:o.visible,onClose:o.hide,title:(0,a.t)([h,"update_title"]),confirmVariant:"circle",confirmText:(0,a.t)(["save"]),disabled:f,initialFocusRef:r,children:(0,n.jsxs)(c.l,{id:y,mode:"onChange",defaultValues:{name:t.name,description:t.description||""},onSubmit:function(e){return p(e)},children:[(0,n.jsx)(c.l.Item,{name:"name",translationRoot:h,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{required:(0,a.t)([h,"validations.name_required"])},tooltipText:(0,a.t)([h,"tooltips.name"]),children:(0,n.jsx)(c.l.Input,{ref:r})}),(0,n.jsx)(c.l.Item,{name:"description",translationRoot:h,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,tooltipText:(0,a.t)([h,"tooltips.description"]),children:(0,n.jsx)(c.l.Input,{})})]})})},g=s.gk.create(function(e){var t=e.accessGroup;return(0,n.jsx)(v,{accessGroup:t})}),_=function(){return(0,s.dd)(g)}},38317:function(e,t,r){"use strict";r.d(t,{y:()=>n});var n=Object.freeze({CONTENT:"/content",MEMBERS:"/members",ADD_MEMBERS:"/add_members"})},34568:function(e,t,r){"use strict";r.d(t,{I:()=>y});var n=r(85893),i=r(51019),o=r(63271),a=r(41342),s=r(22301),l=r(85924),c=r(60878),u=r(59986),d=r(67294);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=function(){var e,t=(e=(0,d.useState)({}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{toastsIdsMap:t[0],setToastsIdsMap:t[1],updateToastProgress:function(e){c.V2.setCustomProgress(e)}}};function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){b(e,t,r[t])})}return e}var y=function(){var e=(0,a.wh)().currentCommunityMember,t=p(),r=t.toastsIdsMap,d=t.setToastsIdsMap,f=t.updateToastProgress,y=(0,u.d)(),v=y.setShouldBlockActions,g=y.shouldBlockActions,_=(0,c.pm)(),x=_.error,j=_.show,w=window.location.pathname,O=w.split("/").pop();(0,o.s)({channel:i.uX,onMessageReceive:function(e){var t;return(t=function(){var t,o,a,u,p,m,y;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(_){switch(_.label){case 0:if(t=e.event,a=(o=JSON.parse(e.record)).id,u=o.params,p=String(a),m=(null==u?void 0:u.access_group_id)||((null==u?void 0:u.access_group_ids)||[]).find(function(e){return e===Number(O)}),!(0,i.nb)(null==o?void 0:o.type)&&!(0,i.gV)(null==o?void 0:o.type))return[2];return y=!(m&&s.X.edit({accessGroupId:m})===w),r[p]||d(function(e){var t,r;return j("",{id:String(p),shouldAutohide:!1,render:function(e){return(0,n.jsx)(c.cT,h({},e))}}),t=h({},e),r=null!=(r=b({},p,!0))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}),(0,i.O6)(t)?(g||v(!0),f({toastId:p,customProgress:0,message:o.progress,shouldHideToast:y})):(0,i.HY)(t)&&((0,i.WD)(o.status)?(x(o.message),f({toastId:p,customProgress:100,shouldHideToast:!0})):f({toastId:p,customProgress:100,message:o.message,shouldHideToast:y}),v(!1)),[4,l.Eh.invalidateQueries("community-members")];case 1:return _.sent(),[4,l.Eh.invalidateQueries(["access_groups","show"])];case 2:return _.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})})()},canCreateConnection:!!(null==e?void 0:e.id),community_member_id:null==e?void 0:e.id})}},50180:function(e,t,r){"use strict";r.d(t,{M:()=>s,S:()=>l});var n=r(88767),i=r(84326),o=r(3176),a=r(60878),s=function(e){return["access_groups","show",e]},l=function(e){var t=(0,a.pm)(),r=(0,o.L)().showAccessGroup;return(0,n.useQuery)({queryKey:s(e),queryFn:function(){return r(e)},onError:function(){return t.error((0,i.t)("error"))}})}},31343:function(e,t,r){"use strict";r.d(t,{o:()=>j});var n=r(85893),i=r(67294),o=r(96486),a=r(84326),s=r(57105),l=r(63549),c=r(51466),u=r(88767),d=r(70442),f=r(3176),p=r(22301),m=r(85924),b=r(60878),h=r(48125),y=function(e){var t=e.closeModal,r=e.onSuccess,n=(0,h.n)().accessGroupsInfiniteQuery,i=(0,b.pm)(),o=(0,f.L)().createAccessGroup,a=(0,d.k6)(),s=(0,u.useMutation)({mutationFn:function(e){return o(e)},onSuccess:function(e){m.Eh.invalidateQueries(n.queryKey),t(),r?r(e):a.push({pathname:p.X.edit({accessGroupId:e.id})})},onError:function(e){return i.error(e.message)}}),l=s.mutate;return{isSubmitting:s.isLoading,handleSubmit:l}},v="settings.access_groups.admin.form",g=(0,o.uniqueId)(),_=function(e){var t=e.accessGroupName,r=e.onSuccess,o=(0,i.useRef)(null),u=(0,s.dd)(),d=y({closeModal:u.hide,onSuccess:r}),f=d.isSubmitting,p=d.handleSubmit;return(0,n.jsx)(l.c,{formId:g,isOpen:u.visible,onClose:u.hide,title:(0,a.t)([v,"create_title"]),confirmText:(0,a.t)([v,"create_confirm_text"]),confirmVariant:"circle",disabled:f,initialFocusRef:o,children:(0,n.jsxs)(c.l,{id:g,mode:"onChange",defaultValues:{name:t||"",description:""},onSubmit:function(e){return p(e)},children:[(0,n.jsx)(c.l.Item,{name:"name",translationRoot:v,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{required:(0,a.t)([v,"validations.name_required"]),maxLength:{value:65,message:(0,a.t)([v,"validations.name_max_length"])}},tooltipText:(0,a.t)([v,"tooltips.name"]),children:(0,n.jsx)(c.l.Input,{ref:o})}),(0,n.jsx)(c.l.Item,{name:"description",translationRoot:v,tooltipText:(0,a.t)([v,"tooltips.description"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{maxLength:{value:100,message:(0,a.t)([v,"validations.description_max_length"])}},children:(0,n.jsx)(c.l.Input,{})})]})})},x=s.gk.create(function(e){var t=e.accessGroupName,r=e.onSuccess;return(0,n.jsx)(_,{accessGroupName:t,onSuccess:r})}),j=function(){return(0,s.dd)(x)}},233:function(e,t,r){"use strict";r.d(t,{v:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.cms_video_analytics_enabled)}},55017:function(e,t,r){"use strict";r.d(t,{X:()=>s});var n=r(85893),i=r(84326),o=r(18083),a=r(41553),s=function(){return(0,n.jsx)(o.b,{className:"lg:-mt-16",leftContent:(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)("a",{className:"text-dark",href:"/",children:(0,i.t)("settings.analytics.title")})})})}},43511:function(e,t,r){"use strict";r.d(t,{Y:()=>f});var n=r(85893),i=r(67294),o=r(96486),a=r(88767),s=r(41342),l=r(93199),c=r(78456),u=r(12979),d=r(13532);function f(){var e=(0,s.wh)().currentCommunityMember,t=(0,c.vb)(e),r=(0,a.useInfiniteQuery)(["member-tags"],function(e){var t=e.pageParam;return(0,l.UT)(d.av.memberTags.index({params:{page:void 0===t?1:t}}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),f=r.data,p=r.fetchNextPage,m=r.hasNextPage,b=r.isLoading;return(0,i.useEffect)(function(){m&&p()},[f]),{isLoading:b,memberTags:(0,i.useMemo)(function(){var e=(0,o.flatten)(null==f?void 0:f.pages.map(function(e){return e.records})),r=function(e){return{label:e.name,richLabel:(0,n.jsxs)("span",{className:"flex gap-1.5",children:[e.custom_emoji_url?(0,n.jsx)("img",{loading:"lazy",className:"mt-[3px] block h-4",src:e.custom_emoji_url,alt:e.name}):(0,n.jsx)("span",{children:e.emoji}),(0,n.jsx)("span",{children:e.name})]}),value:e.id.toString()}};return t?e.map(r):(0,u.U)({memberTags:e}).map(r)},[f,t])}}},7144:function(e,t,r){"use strict";r.d(t,{x:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)(),t=e.currentCommunity;return!!(!e.isLoading&&(null==t?void 0:t.analytics_filters_feature_flag_enabled))}},3345:function(e,t,r){"use strict";r.d(t,{$:()=>i});var n=r(85893),i=function(){return(0,n.jsx)("div",{className:"my-8",children:(0,n.jsx)("div",{className:"bg-overlay-dark h-[1px] w-full"})})}},80981:function(e,t,r){"use strict";r.d(t,{s:()=>k});var n=r(85893),i=r(67294),o=r(96486),a=r(84326),s=r(89860),l=r(78152),c=r(76896),u=r(41553),d=r(864),f=r(84954),p=r(22424),m=r(39905),b=r(51466),h=r(52293),y=r(3697),v=r(10623),g=function(){var e="settings.mobile_app.design_section",t=(0,h.Gc)().watch,r=t("brand_color_light_mode"),i=t("brand_color_dark_mode"),o=t("button_text_color_light"),s=t("button_text_color_dark");return(0,n.jsx)("div",{className:"bg-tertiary mt-2 rounded-lg px-6 py-5",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(b.l.Item,{name:"brand_color_light_mode",label:(0,a.t)([e,"brand_color_light"]),hideDescription:!0,className:"flex !items-center justify-between !border-none",inline:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof r&&r?r.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"brand_color_light_mode"})]}),(0,n.jsxs)(b.l.Item,{name:"brand_color_dark_mode",inline:!0,label:(0,a.t)([e,"brand_color_dark"]),className:"flex !items-center justify-between !border-none",hideDescription:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof i&&i?i.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"brand_color_dark_mode"})]}),(0,n.jsxs)(b.l.Item,{name:"button_text_color_light",label:(0,a.t)([e,"button_text_color_light"]),hideDescription:!0,className:"flex !items-center justify-between !border-none",inline:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof o&&o?o.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"button_text_color_light"})]}),(0,n.jsxs)(b.l.Item,{name:"button_text_color_dark",inline:!0,label:(0,a.t)([e,"button_text_color_dark"]),className:"flex !items-center justify-between !border-none",hideDescription:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof s&&s?s.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"button_text_color_dark"})]}),(0,n.jsx)(v.Y,{name:"logo_light",isHorizontal:!0,className:"py-2",isCropEnabled:!1,label:(0,a.t)([e,"logo_light"]),title:(0,a.t)([e,"logo_light"]),description:(0,a.t)([e,"logo_light_description"]),aspectRatio:y.pI.COMMUNITY_LOGO_V3}),(0,n.jsx)(v.Y,{name:"logo_dark",isHorizontal:!0,className:"py-2",isCropEnabled:!1,label:(0,a.t)([e,"logo_dark"]),title:(0,a.t)([e,"logo_dark"]),description:(0,a.t)([e,"logo_dark_description"]),aspectRatio:y.pI.COMMUNITY_LOGO_V3})]})})},_=function(e){var t=e.defaultValues,r=e.handleSubmit,i=e.isSaving;return(0,n.jsxs)(b.l,{onSubmit:r,defaultValues:t,children:[(0,n.jsx)(g,{}),(0,n.jsx)("div",{className:"mt-6 flex justify-end",children:(0,n.jsx)(m.z,{type:"submit",variant:"circle",disabled:i,children:i?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})},x=r(3345),j=r(53788),w=function(e){var t,r,i=e.defaultValues,o=e.handleSubmit,s=e.isSaving,l=(0,h.cI)({defaultValues:i,mode:"onChange"});return(0,n.jsx)(h.RV,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={children:(0,n.jsxs)(b.l,{onSubmit:o,defaultValues:i,children:[(0,n.jsx)("div",{className:"bg-tertiary mt-2 rounded-lg px-6 py-5",children:(0,n.jsx)(j.k,{})}),(0,n.jsx)("div",{className:"mt-6 flex justify-end",children:(0,n.jsx)(m.z,{type:"submit",variant:"circle",disabled:s,children:s?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e,t){if(!e||!t)return null;var r=t.find(function(t){return t.signed_id===e});return r||null},k=function(){var e,t,r,m=(0,a.t)("settings_nav_v3.branded_apps_dashboard.title"),b=(0,p.w)(),h=b.defaultValues,y=b.mobileHomeSegments,v=b.mutate,g=b.isSaving,j=b.isLoading,k=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),P=k[0],C=k[1];(0,i.useEffect)(function(){y&&y.length>0&&C(y)},[y]);var N=(0,s.C)(),A=N.designConfigData,I=N.isLoading,E=N.mutateDesignConfig;if(I||j||(0,o.isEmpty)(A))return(0,n.jsxs)("div",{className:"mx-auto max-w-[784px] px-8 pb-8",children:[(0,n.jsx)(l.S,{title:m,bodyClassNames:"view-plans"}),(0,n.jsx)(d.y,{disableRightSidebar:!0}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(c.gi,{variant:"mobile-home-segments"})})]});var T=null==A?void 0:A.config,L=null==A?void 0:A.theme,D=null==A?void 0:A.attachments,M=S(null==T||null==(t=T.community_logo_light)?void 0:t.signed_id,D),R=S(null==T||null==(r=T.community_logo_dark)?void 0:r.signed_id,D),B={brand_color_light_mode:(null==L?void 0:L.brand_color_light_mode)||"",brand_color_dark_mode:(null==L?void 0:L.brand_color_dark_mode)||"",button_text_color_light:(null==L?void 0:L.button_text_color_light)||"",button_text_color_dark:(null==L?void 0:L.button_text_color_dark)||"",logo_light:(null==M?void 0:M.signed_id)||"",logo_dark:(null==R?void 0:R.signed_id)||""};return(0,n.jsx)(f.X,{orderedMobileHomeSegments:P,setOrderedMobileHomeSegments:C,children:(0,n.jsxs)("div",{className:"mx-auto max-w-[784px] px-8 pb-8",children:[(0,n.jsx)(l.S,{title:m,bodyClassNames:"view-plans"}),(0,n.jsx)(d.y,{disableRightSidebar:!0}),(0,n.jsxs)("div",{className:"bg-primary border-primary mt-6 rounded-lg border px-8 py-7",children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:"border-primary flex justify-between",children:(0,n.jsx)(u.Z.TitleSm,{children:(0,a.t)("settings_nav_v3.branded_apps_dashboard.navigation")})})})}),(0,n.jsx)(x.$,{}),(0,n.jsx)(w,{defaultValues:h,handleSubmit:function(e){var t,r,n=P.map(function(e){return e.kind});v({community_setting:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={mobile_home_segments_order:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)})},isSaving:g}),(0,n.jsx)("div",{className:"mt-4 flex",children:(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:"border-primary flex justify-between",children:(0,n.jsx)(u.Z.TitleSm,{children:(0,a.t)("settings_nav_v3.branded_apps_dashboard.branding")})})})}),(0,n.jsx)(x.$,{}),(0,n.jsx)(_,{defaultValues:B,handleSubmit:function(e){E({branded_mobile_app:{brand_color_light_mode:e.brand_color_light_mode||"",brand_color_dark_mode:e.brand_color_dark_mode||"",button_text_color_light:e.button_text_color_light||"",button_text_color_dark:e.button_text_color_dark||"",community_logo_light:e.logo_light||"",community_logo_dark:e.logo_dark||""}})},isSaving:g})]})]})})}},33989:function(e,t,r){"use strict";r.d(t,{S:()=>b});var n=r(85893),i=r(94184),o=r.n(i),a=r(30154),s=r(84326),l=r(61089),c=function(e){var t=e.value,r=e.onChange;return(0,n.jsx)(l.wn,{chip:(0,s.t)("settings.community_bot.knowledge.filters.name_chip"),title:(0,s.t)("settings.community_bot.knowledge.filters.name_title"),selectedText:t,onApply:function(e){return r(e||"")},isInitialOpen:!1,shouldShowRemoveButton:!0,children:(0,n.jsx)(l.xo,{name:"name-filter",placeholder:(0,s.t)("settings.community_bot.knowledge.filters.name_search_placeholder"),defaultValue:t})})},u=r(58610),d=function(e){var t=e.value,r=e.onChange;return(0,n.jsx)(u.Y,{localeNamespace:"community_bot.bot_builder.knowledge_page.filters.space_groups",isInitialOpen:!1,onApply:r,changeUrl:!1,value:t,shouldShowRemoveButton:!0})},f=r(69787),p=r(65260),m=function(e){var t,r=e.value,i=e.onChange,o=e.options,a=(null==(t=o.find(function(e){return e.value===r}))?void 0:t.label)||"";return(0,n.jsxs)(f.w,{onApply:function(e){if(null===e)i("");else e&&(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&"value"in e&&"string"==typeof e.value&&i(e.value)},children:[(0,n.jsx)(f.w.Chip,{renderSelectedValue:function(){return a},children:(0,s.t)("settings.community_bot.knowledge.filters.type_chip")}),(0,n.jsx)(f.w.Popover,{title:(0,s.t)("settings.community_bot.knowledge.filters.type_title"),isInitialOpen:!1,shouldShowRemoveButton:!0,children:(0,n.jsx)(p.d,{options:o,legend:(0,s.t)("settings.community_bot.knowledge.filters.type_legend"),value:r})})]})},b=function(e){var t=e.name,r=e.onNameChange,i=e.type,s=e.onTypeChange,l=e.typeOptions,u=e.spaceGroup,f=e.onSpaceGroupChange,p=e.showSpaceGroup,b=e.isModal;return(0,n.jsx)("div",{className:o()("bg-primary border-primary flex items-center justify-between gap-x-1 border-b py-3",void 0!==b&&b?"px-5":"px-6 lg:px-9"),children:(0,n.jsxs)(a.x,{children:[(0,n.jsx)(c,{value:t,onChange:r}),(0,n.jsx)(m,{value:i,onChange:s,options:l}),void 0!==p&&p&&f&&(0,n.jsx)(d,{value:u||"",onChange:f})]})})}},93291:function(e,t,r){"use strict";r.d(t,{OH:()=>h,X5:()=>v,q_:()=>y,vQ:()=>g});var n=r(96486),i=r(88767),o=r(84326),a=r(41342),s=r(93199),l=r(13532),c=r(60878);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function p(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var b=["internal_api","community_bot","agents"],h=function(e){var t=e.currentPage,r=e.perPage,n=void 0===r?10:r,o=e.enabled;return(0,i.useQuery)({queryKey:b,queryFn:function(){return(0,s.UT)(l.av.communityBot.agents.index({params:{page:t,per_page:n}}))},enabled:void 0===o||o})},y=function(e){var t=e.id;return(0,i.useQuery)({queryKey:p(b).concat([t]),queryFn:function(){return(0,s.UT)(l.av.communityBot.agents.show({id:t}))}})},v=function(){var e=(0,c.pm)().success;return(0,i.useMutation)(function(){return f(function(){return m(this,function(e){switch(e.label){case 0:return[4,(0,s.Cu)(l.av.communityBot.agents.create())];case 1:return[2,e.sent()]}})})()},{onSuccess:function(){e((0,o.t)("changes_saved"))}})},g=function(e){var t=e.id,r=(0,i.useQueryClient)(),u=(0,c.pm)(),d=u.success,h=u.error,y=(0,a.wh)().refetch;return(0,i.useMutation)(function(e){var r=1===Object.keys(e).length&&"enabled"in e;return(0,s.aU)(l.av.communityBot.agents.update({id:t}),{community_bot_profile:r?{enabled:e.enabled}:(0,n.omit)(e,"enabled")})},{onSuccess:function(e){r.invalidateQueries(p(b).concat([e.id])),r.invalidateQueries(p(b)),d((0,o.t)("changes_saved"))},onError:function(e){return f(function(){var t,r;return m(this,function(i){switch(i.label){case 0:return[4,y()];case 1:return i.sent(),(null==e||null==(t=e.body)?void 0:t.error_details)?(r=(0,n.values)((0,n.omit)(e.body.error_details,"message","success")),h((0,n.flatten)(r).join(", "))):h((0,o.t)("request_failure_message")),[2]}})})()}})}},45665:function(e,t,r){"use strict";r.d(t,{h$:()=>f,qN:()=>p,t8:()=>d});var n=r(88767),i=r(84326),o=r(93199),a=r(13532),s=r(60878);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var c=["internal_api","community_bot","spaces"],u=["internal_api","community_bot","setting"],d=function(e){var t=e.currentPage,r=e.name,i=e.type,s=e.spaceGroup;return(0,n.useQuery)({queryKey:[c,t,r,i,s],queryFn:function(){return(0,o.UT)(a.av.communityBot.spaces.index({params:l({page:t,per_page:10},r?{name:r}:{},i?{type:i}:{},s?{space_group:s}:{})}))}})},f=function(){return(0,n.useQuery)({queryKey:u,queryFn:function(){return(0,o.UT)(a.av.communityBot.setting.show())}})},p=function(){var e=(0,n.useQueryClient)(),t=(0,s.pm)(),r=t.success,d=t.error;return(0,n.useMutation)(function(e){var t={community_bot_setting:l({},e)};return(0,o.aU)(a.av.communityBot.setting.update(),t)},{onSuccess:function(){e.invalidateQueries(u),e.invalidateQueries(c),r((0,i.t)("changes_saved"))},onError:function(){d((0,i.t)("request_failure_message"))}})}},86195:function(e,t,r){"use strict";r.d(t,{o:()=>eH});var n=r(85893),i=r(67294),o=r(96486),a=r(70442),s=r(84326),l=r(88767),c=r(61853),u=r(93199),d=r(95533),f=function(e,t){var r=(0,c.Dk)(),n=r.adminChats,i=r.memberChats,o=t?i:n,a=null==o?void 0:o.find(function(t){return t.id===e}),s=(0,l.useQuery)(["community-inbox","chat-room",e],function(){return(0,u.UT)(d.a.communityInbox.show({id:e}))},{enabled:!!e&&!a}),f=s.data;return{isChatLoading:s.isLoading,currentChat:a||f,error:s.error}},p=r(81772),m=r(77384),b=function(e){return e.inbox.messages},h=r(90926),y=r(51169),v=r(60878),g=r(13532),_=r(10749);function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var j=function(e){var t=e.id,r=e.params,n=void 0===r?{per_page:20}:r,s=e.isDms,f=void 0!==s&&s,p=(0,c.Dk)(),m=p.setMessages,b=p.appendMessage,h=p.setScrollAction,y=p.setCurrentChatId,v=(0,a.TH)().pathname,j=(0,a.k6)(),w=v.startsWith("/messages/new");(0,i.useEffect)(function(){y(t)},[t,y]);var O=(0,l.useInfiniteQuery)(["community-inbox","chat-room","messages",t],function(e){var r,i=e.pageParam;return r=void 0===i?1:i,(0,u.UT)(d.a.communityInbox.fetchMessages({id:t,params:x({page:r},n)}))},{select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,o.flatten)(r.map(function(e){return e.records})),pageParams:r.map(function(e){return e.page}),pagesList:r}},enabled:!!t,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(e){1===e.pagesList.length&&h(_.aO.FIRST_LOAD),m(e.pages)},refetchOnWindowFocus:!1}),S=O.isLoading,k=O.fetchNextPage,P=O.hasNextPage,C=O.isFetching;return{isMessagesLoading:S,createMessage:(0,l.useMutation)(function(e){return(0,u.Cu)(d.a.communityInbox.createMessage({id:t}),x({},e))},{onSuccess:function(e){h(_.aO.NEW_MESSAGE),b(e,f?"member":"admin"),w&&j.push((0,g.Gr)({id:String(t)}))},onError:function(e){console.error("Error while creating message",e)}}).mutateAsync,hasNextPage:P,fetchNextPage:k,isFetching:C}},w=r(94184),O=r.n(w),S=r(1771),k=r(68129),P=r(41342),C=r(57338),N=r(51466),A=r(65121),I=r(41553),E=r(52293),T=r(46977),L=r(57363),D=r(80171),M=r(13467),R=r(15517),B=r(43544),F=function(){return(0,n.jsxs)("div",{className:"m-2 flex flex-col items-start gap-1",children:[(0,n.jsx)(I.Z.LabelSm,{weight:"medium",color:"text-[#F4F4F5]",children:(0,s.t)("community_inbox.admin_send_message_tooltip.title")}),(0,n.jsx)(I.Z.BodySm,{color:"text-[#D4D4D8]",children:(0,s.t)("community_inbox.admin_send_message_tooltip.description")})]})},z=function(e){var t=e.isSubmitting,r=e.isUploading,i=e.editorHasNoContent,o=e.handleSubmit,a=e.isDms,l=void 0===a||a,c=(0,E.Gc)().setValue,u=t||r,d=function(e){e&&c("pause_ai_minutes",e),o()},f=(0,R.q)(),p=function(){l?d():d(5)};return(0,T.y1)("enter",p,{enabled:!l&&!f,enableOnContentEditable:!0},[l,f]),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)(D.T,{placement:"top",interactive:!1,arrow:l,content:l?(0,s.t)("community_inbox.send_message"):(0,n.jsx)(F,{}),children:(0,n.jsx)(M.o,{type:"submit",onClick:p,disabled:t||i()||r,id:"tiptap-send","aria-label":(0,s.t)("community_inbox.send_message"),icon:u?"loader":"28-message-send",size:u?20:28,isLight:!i(),shouldAnimateSpin:u,isSendButton:!0})}),!l&&(0,n.jsxs)(B.Lt,{className:"py-2",direction:"bottom-end",button:(0,n.jsx)(B.Lt.MenuButton,{id:"send-pause-ai",children:(0,n.jsx)(L.JO,{type:"16-chevron-down",className:"text-gray-400",size:16})}),children:[(0,n.jsx)("div",{className:"mb-1.5",children:(0,n.jsx)(I.Z.BodyXs,{weight:"font-bold",color:"text-light",children:(0,n.jsx)("span",{className:"uppercase",children:(0,s.t)("community_bot.pause_ai.send_and_pause_ai")})})}),(0,n.jsx)(B.Lt.Item,{onClick:function(){return d(5)},children:(0,n.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,n.jsx)(L.JO,{type:"16-pause-timer",size:16}),(0,n.jsx)(I.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.five_minutes")})]})}),(0,n.jsx)(B.Lt.Item,{onClick:function(){return d(15)},children:(0,n.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,n.jsx)(L.JO,{type:"16-pause-timer",size:16}),(0,n.jsx)(I.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.fifteen_minutes")})]})}),(0,n.jsx)(B.Lt.Item,{onClick:function(){return d(60)},children:(0,n.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,n.jsx)(L.JO,{type:"16-pause-timer",size:16}),(0,n.jsx)(I.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.one_hour")})]})}),(0,n.jsx)(B.Lt.Item,{onClick:function(){return d(525600)},children:(0,n.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,n.jsx)(L.JO,{type:"16-pause-timer",size:16}),(0,n.jsx)(I.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.indefinitely")})]})})]})]})},U={body:{type:"doc",content:[]},pause_ai_minutes:null},Z=function(e){var t=e.onSubmit,r=e.isProcessing,a=e.agentName,l=e.isDms,c=e.isPreviewMode,u=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=u.current;e&&(r?e.view.dom.blur():c||e.view.dom.focus())},[r,c]),(0,n.jsx)(N.l,{onSubmit:t,defaultValues:U,children:function(e){var i=e.getValues;return(0,n.jsxs)("div",{className:"group relative",children:[(0,n.jsx)(A.T,{menuBarComponent:z,placeholder:(0,s.t)("community_inbox.message_bot",{agent_name:(0,o.truncate)(a,{length:40})}),className:"!mb-2 !flex-row items-center justify-between !p-0 !py-[0.1875rem] !pr-4",messageBoxClassName:"grow",editorClassName:"px-4 py-3",onSubmit:function(e){var r=i().pause_ai_minutes;r?t({body:e,pause_ai_minutes:r}):t({body:e})},disabled:r,editorRef:u,menubarProps:{isDms:l},shouldShowPreviewBlocks:!1,shouldDisableEntities:!0},"message-box-".concat(a)),r&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)("div",{className:"invisible mt-[-50px] rounded-lg bg-black px-3 py-2 group-hover:visible",children:(0,n.jsx)(I.Z.LabelSm,{weight:"font-medium",color:"text-white",children:(0,s.t)("community_inbox.please_wait_message")})})})]})}})},G=function(e){var t=e.aiPaused;return(0,n.jsx)("div",{className:"before:border-primary relative z-0 mx-5 flex items-center justify-center before:absolute before:bottom-0 before:left-0 before:top-1/2 before:z-[-1] before:m-0 before:w-full before:border-t before:border-solid before:content-['']",children:(0,n.jsxs)("span",{className:"bg-primary text-disabled text-xxs flex items-center gap-2 border-none px-[15px] py-[5px] font-bold uppercase",children:[(0,s.t)(t?"community_inbox.ai_paused":"community_inbox.ai_resumed"),(0,n.jsx)(L.JO,{type:"16-stars-ai",size:16})]})})},q=function(e){var t=e.agentName;return(0,n.jsx)("div",{className:"bg-warning-light mx-1 my-4 rounded-lg p-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(L.JO,{type:"16-info",size:16}),(0,n.jsx)(I.Z.LabelMd,{weight:"semibold",color:"text-secondary",children:(0,s.t)("community_inbox.broadcast_mode",{agent_name:t})})]})})},V=r(1168),H=r(39905),W=function(e){var t=e.communityBotProfile,r=e.conversationStatus,i=e.isDms,o=(0,a.k6)(),l=(0,c.Dk)().setCurrentBotProfile,u="getting_too_long"===r?(0,s.t)("community_inbox.conversation_getting_too_long"):(0,s.t)("community_inbox.conversation_too_long");return i?(0,n.jsxs)("div",{className:(0,V.A)("mb-4 flex items-center gap-2 rounded-2xl p-3 pl-4",{"bg-amber-50 dark:bg-[#F59E0B26]":"getting_too_long"===r||"too_long"===r,"bg-red-50 dark:bg-[#EF444426]":"exceeded"===r}),children:[(0,n.jsx)("div",{className:"shrink-0 grow basis-0",children:(0,n.jsx)(I.Z.LabelSm,{weight:"medium",color:"text-[#545861] dark:text-[#E4E7EB]",children:u})}),(0,n.jsx)("div",{children:(0,n.jsx)(H.z,{variant:"circle",onClick:function(){l(t),o.push((0,g.W9)())},children:(0,s.t)("community_inbox.start_new_conversation")})})]}):"too_long"===r||"exceeded"===r?(0,n.jsx)("div",{className:(0,V.A)("mb-4 flex items-center gap-2 rounded-2xl p-3 pl-4",{"bg-amber-50 dark:bg-[#F59E0B26]":"too_long"===r,"bg-red-50 dark:bg-[#EF444426]":"exceeded"===r}),children:(0,n.jsx)("div",{className:"shrink-0 grow basis-0",children:(0,n.jsx)(I.Z.LabelSm,{weight:"medium",color:"text-[#545861] dark:text-[#E4E7EB]",children:(0,s.t)("community_inbox.conversation_too_long_admin")})})}):null},Q=r(98363),J=r(67142);let K=r.p+"static/react/components/SettingsApp/CommunityInbox/BotChatRoom/ChatWindow/thinking-0121ade9713134b6.gif";var $=function(e){var t=e.name;return(0,n.jsx)(J.sJ,{isFullRounded:!0,name:t,size:"9",src:K})},X=function(e){var t=e.message,r=t.author_type,i=t.community_bot_profile,o=t.community_member,a=t.is_processing,s="community_member"===r,l=s?(null==o?void 0:o.name)||"":(null==i?void 0:i.name)||"",c=s?(null==o?void 0:o.avatar_url)||"":(null==i?void 0:i.avatar_url)||"",u=!s&&!(null==i?void 0:i.avatar_url);return a?(0,n.jsx)($,{name:l}):u?(0,n.jsx)(L.JO,{type:"36-ai-bot",size:36,className:"!h-[36px] !w-[36px]"}):(0,n.jsx)(Q.s,{src:c,name:l,size:"9",isFullRounded:!0})},Y=r(24804);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var et=function(e){var t,r=e.sources,i=(t=(0,Y.k)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ee(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],l=r.length;if(!o){var c=1===l?(0,s.t)("community_inbox.messages.sources.count_singular"):(0,s.t)("community_inbox.messages.sources.count_plural",{count:l});return(0,n.jsx)(H.z,{variant:"secondary-light",type:"button",onClick:a,small:!0,children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(L.JO,{type:"16-ai-sources",size:16}),c]})})}return(0,n.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,n.jsx)("div",{className:"flex flex-col gap-2",children:r.map(function(e){return(0,n.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"text-default hover:text-default text-sm font-normal underline",children:e.title||e.url},"source-".concat(e.url))})}),(0,n.jsx)(H.z,{variant:"secondary-light",type:"button",onClick:a,small:!0,children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(L.JO,{type:"16-ai-sources",size:16}),(0,s.t)("community_inbox.messages.sources.hide")]})})]})},er=function(e){var t=e.authorName,r=e.timestamp,i=e.body,o=e.sources,a=e.isUserMessage,s=(0,C.H)(r).time;return(0,n.jsxs)("div",{className:"min-w-0 grow",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("div",{className:"max-w-[200px] truncate",children:(0,n.jsx)(I.Z.LabelSm,{weight:"semibold",color:"text-darkest",truncate:!0,children:t})}),(0,n.jsx)(I.Z.LabelSm,{weight:"medium",color:"text-timestamp",children:s})]}),(0,n.jsx)("div",{className:"text-dark whitespace-pre-line text-sm font-normal",children:(0,n.jsx)(A.T,{editable:!1,rich_text_body:i,shouldShowPreviewBlocks:a})}),o&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(et,{sources:o})})]})},en=function(e){var t,r,i=e.message,o=i.id,a=i.body,s=i.author_type,l=i.community_bot_profile,c=i.community_member,u=i.created_at,d=i.updated_at,f=i.sources,p="".concat(o,"-").concat(d),m="community_member"===s,b=m?null!=(t=null==c?void 0:c.name)?t:"":null!=(r=null==l?void 0:l.name)?r:"";return(0,n.jsx)("div",{className:"px-4 py-3",id:o.toString(),children:(0,n.jsxs)("div",{className:"flex w-full items-start justify-start gap-3",children:[(0,n.jsx)("div",{className:"pt-0.5",children:(0,n.jsx)(X,{message:i})}),(0,n.jsx)(er,{isUserMessage:m,authorName:b,timestamp:u,body:a,sources:f})]})},p)},ei=r(40761),eo=function(e){var t=e.createMessage,r=(0,c.Dk)().currentBotProfile;return(0,n.jsxs)("div",{className:"mx-2 mb-4 flex flex-col items-start",children:[(null==r?void 0:r.avatar_url)&&(0,n.jsx)("img",{src:null==r?void 0:r.avatar_url,alt:null==r?void 0:r.name,className:"mb-2 h-12 w-12 rounded-full",loading:"lazy"}),!(null==r?void 0:r.avatar_url)&&(0,n.jsx)("div",{children:(0,n.jsx)(L.JO,{type:"48-ai-bot",size:48,className:"mb-2 !h-[3rem] !w-[3rem]"})}),(0,n.jsx)(I.Z.TitleSm,{as:"h2",weight:"semibold",children:(0,s.t)("messaging.start_conversation")}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(I.Z.BodySm,{color:"text-default",children:(0,s.t)("messaging.bot_start_conversation",{name:null==r?void 0:r.name})})}),(null==r?void 0:r.suggested_questions)&&r.suggested_questions.length>0&&(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:r.suggested_questions.map(function(e){return(0,n.jsx)(ei.n,{question:e,onClick:function(){return t({body:{body:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]},attachments:[],localAttachments:[],localSgidToObjectMap:{}}})}},e)})})]})},ea=r(34938),es=function(e){var t=e.createMessage,r=(0,c.Dk)().currentBotProfile;if(!r)return null;var i=r.name,o=r.bio;return(0,n.jsxs)("div",{className:"mx-2 mb-4",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(ea.I,{profile:r})}),(0,n.jsx)(I.Z.LabelMd,{as:"div",weight:"semibold",children:i}),o&&(0,n.jsx)("div",{className:"text-default mt-1 whitespace-pre-line text-sm font-normal",children:(0,n.jsx)(A.T,{editable:!1,rich_text_body:o})}),(null==r?void 0:r.suggested_questions)&&r.suggested_questions.length>0&&(0,n.jsx)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:r.suggested_questions.map(function(e){return(0,n.jsx)(ei.n,{question:e,onClick:function(){return t({body:{body:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]},attachments:[],localAttachments:[],localSgidToObjectMap:{}}})}},e)})})]})},el=r(87545),ec=r(85924),eu=function(e){var t=e.onRestart,r=(0,ec.TC)().isDarkAppearance;return(0,n.jsx)("div",{className:"mx-4 rounded-xl bg-[rgba(245,158,11,0.1)] p-4 dark:bg-[rgba(245,158,11,0.20)]",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(L.JO,{type:"16-ai-snooze",size:16,className:"text-[#191b1f] dark:text-white"}),(0,n.jsx)(I.Z.LabelSm,{weight:"semibold",color:"text-[#191b1f] dark:text-white",children:(0,s.t)("community_inbox.preview_paused_by_keywords")})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(I.Z.BodySm,{color:"text-[#545861] dark:text-gray-300",children:(0,s.t)("community_inbox.preview_paused_description")})})]}),(0,n.jsx)(el.J,{onClick:t,variant:r?"light":"dark"})]})})},ed=function(e){return!(0,o.isNull)(null==e?void 0:e.id)&&(null==e?void 0:e.isAiSnoozed)},ef=function(e){var t,r=e.messages,a=e.createMessage,s=e.isDms,l=e.fetchNextPage,c=e.hasNextPage,u=e.isLoading,d=e.isNewConversation,f=e.isPreviewMode,p=e.agentName,m=e.isProcessing,b=e.isDisabled,h=e.chatCommunityMember,y=e.currentChat,v=e.onRestart,g=(0,i.createRef)(),x=f&&!(null==r?void 0:r.length),j={id:null,isAiSnoozed:null},w=(0,P.wh)().currentCommunityMember,N=(null==w?void 0:w.id)===(null==h?void 0:h.id),A=(null==y?void 0:y.conversation_status)||"normal",I=f&&r.some(function(e){return e.pause_keywords_detected_in_preview}),E=s||!N,T=!f&&"normal"!==A;return t=f?!I:!s||"normal"===A||"getting_too_long"===A,(0,n.jsxs)("div",{className:O()("bg-primary flex w-full flex-col justify-between",d||f?"h-full":"lg:h-[calc(100%-64px)]",s?"h-[calc(100dvh-64px)]":"h-[calc(100dvh-120px)]"),children:[c&&(0,n.jsx)(k.Z,{componentId:_.Or,fetchNewPage:l,onEvent:"scrollUp",messageId:null,isLoading:u}),(0,n.jsxs)("div",{id:_.Or,className:"overflow-auto px-2",children:[r.map(function(e){var t,r,a=e.id,s=e.ai_snoozed,l=e.created_at,c=e.pause_keywords_detected_in_preview,u=(0,C.H)(l).day,d=!(0,o.isFunction)(g)&&(null==g?void 0:g.current)!==u;g&&!(0,o.isFunction)(g)&&(g.current=u);var p=f?!!c:s;return(t=j,((0,o.isNull)(null==t?void 0:t.id)&&(0,o.isNull)(null==t?void 0:t.isAiSnoozed)||(r=j,!(0,o.isNull)(null==r?void 0:r.id)&&!(null==r?void 0:r.isAiSnoozed)))&&p)?j={id:a,isAiSnoozed:p}:ed(j)&&!p&&(j={id:a,isAiSnoozed:!1}),(0,n.jsxs)(i.Fragment,{children:[!f&&(0,n.jsx)(S.J,{showDateChangeLine:d,day:u}),(0,n.jsx)(en,{message:e}),j.id===a&&(0,n.jsx)(G,{aiPaused:!0})]},a)}),!f&&!ed(j)&&(null==y?void 0:y.ai_snoozed)&&(0,n.jsx)(G,{aiPaused:null==y?void 0:y.ai_snoozed}),!f&&ed(j)&&!(null==y?void 0:y.ai_snoozed)&&(0,n.jsx)(G,{aiPaused:null==y?void 0:y.ai_snoozed}),f&&!ed(j)&&I&&(0,n.jsx)(G,{aiPaused:!0}),f&&I&&v&&(0,n.jsx)(eu,{onRestart:v})]}),E&&(0,n.jsxs)("div",{className:O()("px-4",f?"py-2":"pt-2"),children:[d&&(0,n.jsx)(eo,{createMessage:a}),x&&(0,n.jsx)(es,{createMessage:a}),b&&(0,n.jsx)(q,{agentName:p||""}),!b&&(0,n.jsxs)(n.Fragment,{children:[T&&(0,n.jsx)(W,{communityBotProfile:null==y?void 0:y.community_bot_profile,conversationStatus:A,isDms:s}),t&&(0,n.jsx)(Z,{onSubmit:a,isProcessing:m,agentName:s?p:null==h?void 0:h.name,isDms:s,isPreviewMode:f})]})]})]})},ep=function(e){var t=e.isDms,r=e.children;return(0,n.jsx)("div",{className:O()("bg-primary flex h-full w-full flex-row",{"max-h-[calc(100vh-64px)]":!t}),children:r})},em=r(17617),eb=r(59413),eh=r(75148),ey=r(64470),ev=r(36394),eg=function(){var e=(0,c.Dk)().updateChat,t=(0,v.pm)(),r=(0,l.useMutation)(function(e){return ev.MW.pauseAi({id:e})},{onSuccess:function(r){e(r,"admin"),t.success((0,s.t)("messaging.actions.pause_ai_success"))},onError:function(e){console.error("Error while creating chat",e)}}),n=r.mutateAsync,i=r.isLoading,o=(0,l.useMutation)(function(e){return ev.MW.resumeAi({id:e})},{onSuccess:function(r){e(r,"admin"),t.success((0,s.t)("messaging.actions.resume_ai_success"))},onError:function(e){console.error("Error while creating chat",e)}});return{pauseAi:n,isPauseAiLoading:i,resumeAi:o.mutateAsync,isResumeAiLoading:o.isLoading}},e_=r(91525),ex=r(85712),ej=r(29306),ew=r(79869),eO=r(94375);function eS(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ek=function(){var e=eg().isResumeAiLoading,t=(0,ew.w)(),r=(0,P.wh)(),i=r.currentCommunity,o=r.isLoading,l=(0,a.k6)();return(0,n.jsx)("button",{type:"button",onClick:function(){var e;return(e=function(){var e,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(!i)return[2];return[4,ej.c.getNextPlanWithFeature(i.current_plan.id.toString(),{plan_feature_flag:"ai_agents"})];case 1:return r=(null==(e=n.sent())?void 0:e.plan_tier)||"enterprise",[4,t.show({planTier:r,source:eO.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,s.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,s.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,s.t)("pricing_plans.upgrade_modal.actions.go_to_community_ai"),showPlanDetails:!0,onSuccess:function(){l.push("/settings/ai-agents/agents")}})];case 2:return n.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eS(o,n,i,a,s,"next",e)}function s(e){eS(o,n,i,a,s,"throw",e)}a(void 0)})})()},disabled:o,className:"h-[34px] rounded-full border bg-[#15803D] px-4 transition-all duration-300 hover:bg-[#15803D]/90",children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(L.JO,{type:"16-ai-agent",size:16,className:"text-white"}),(0,n.jsx)(I.Z.LabelSm,{weight:"bold",color:"text-white",children:(0,s.t)(e?"community_bot.ai_resuming":"community_bot.resume_ai")})]})})};function eP(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eC=function(e){var t,r,n,i,o=(0,e_.wh)().currentCommunity;return{isAgentEligibleButDisabled:(!(null==(t=e.community_bot_profile)?void 0:t.enabled)||!(null==(r=e.community_bot_profile)?void 0:r.allow_direct_messages))&&(null==o?void 0:o.ai_agents_feature_flag_enabled),isChatDisabled:e.disabled&&(null==(n=e.community_bot_profile)?void 0:n.enabled)&&(null==(i=e.community_bot_profile)?void 0:i.allow_direct_messages)}},eN=function(e){var t=e.chat,r=(0,v.pm)(),i=(0,e_.wh)().currentCommunity,o=eg(),a=o.pauseAi,l=o.isPauseAiLoading,c=o.resumeAi,u=o.isResumeAiLoading,d=(0,ex.k)(t.community_bot_profile),f=eC(t),p=f.isAgentEligibleButDisabled,m=f.isChatDisabled,b=function(e){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(m)return[2];if(!p)return[3,1];return d.show(),[3,4];case 1:return n.trys.push([1,3,,4]),[4,e?a(t.id):c(t.id)];case 2:return n.sent(),[3,4];case 3:return n.sent(),r.error((0,s.t)("messaging.actions.pause_ai_error")),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){eP(o,r,i,a,s,"next",e)}function s(e){eP(o,r,i,a,s,"throw",e)}a(void 0)})})()};return(null==i?void 0:i.ai_agents_feature_flag_enabled)?"too_long"===t.conversation_status||"exceeded"===t.conversation_status?null:t.ai_snoozed?(0,n.jsx)(D.T,{enabled:m,content:(0,s.t)("community_bot.pause_ai.tooltip"),children:(0,n.jsx)("button",{type:"button",onClick:function(){return b(!1)},className:(0,V.A)("h-[34px] rounded-full border bg-[#15803D] px-4 transition-all duration-300 hover:bg-[#15803D]/90",{"cursor-not-allowed opacity-80":m}),children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(L.JO,{type:u?"loader":"16-ai-agent",size:16,className:"text-white"}),(0,n.jsx)(I.Z.LabelSm,{weight:"bold",color:"text-white",children:(0,s.t)(u?"community_bot.ai_resuming":"community_bot.resume_ai")})]})})}):(0,n.jsx)(D.T,{enabled:m,content:(0,s.t)("community_bot.pause_ai.tooltip"),children:(0,n.jsx)("button",{type:"button",onClick:function(){return b(!0)},className:(0,V.A)("hover:bg-secondary h-[34px] rounded-full border px-4 transition-all duration-300",{"cursor-not-allowed opacity-80":m}),children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(L.JO,{type:l?"loader":"16-ai-snooze",size:16,className:"text-dark font-medium"}),(0,n.jsx)(I.Z.LabelSm,{weight:"medium",children:(0,s.t)(l?"community_bot.ai_pausing":"community_bot.pause_ai.title")})]})})}):(0,n.jsx)(ek,{})},eA=r(97485),eI=r(71807),eE=r(33516),eT=r(19347),eL=function(e){var t=e.profile;return(0,n.jsxs)(n.Fragment,{children:[!t.avatar_url&&(0,n.jsx)(L.JO,{type:"120-ai-bot",size:120,className:"mb-4 !h-[7.5rem] !w-[7.5rem]"}),t.avatar_url&&(0,n.jsx)("img",{src:t.avatar_url,alt:t.name,className:"mb-4 !h-[7.5rem] !w-[7.5rem] rounded-full",loading:"lazy"})]})},eD=function(){return(0,n.jsxs)("div",{className:"group relative inline-block",children:[(0,n.jsx)("div",{className:"border-disabled cursor-default border-b",children:(0,n.jsx)(I.Z.LabelSm,{color:"text-disabled",children:(0,s.t)("community_inbox.privacy_notice.visibility")})}),(0,n.jsxs)("div",{className:"absolute bottom-8 left-1/2 z-[1100] hidden w-80 -translate-x-1/2 flex-col gap-1 rounded-lg bg-black px-4 py-3 text-start group-hover:flex",children:[(0,n.jsx)(I.Z.LabelSm,{weight:"bold",color:"text-white",children:(0,s.t)("community_inbox.privacy_notice.title")}),(0,n.jsx)(I.Z.BodySm,{color:"text-white",children:(0,s.t)("community_inbox.privacy_notice.message")})]})]})},eM=function(e){var t=e.botProfile,r=e.conversationStatus,i=void 0===r?"normal":r,o=(0,eE.T)(),l=o.ref,u=o.height,d=(0,a.k6)(),f=(0,c.Dk)().setCurrentBotProfile,p=function(e){var t={body:{body:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]},attachments:[],localAttachments:[],localSgidToObjectMap:{}}};m.K.sendSuggestedQuestion(t)};return(0,n.jsxs)(eI.x,{children:[(0,n.jsx)("div",{ref:l,children:(0,n.jsx)(eT.S0.Header,{className:"!min-h-14",children:(0,n.jsx)(eA.h,{title:(0,s.t)("profile"),isDirect:!0})})}),(0,n.jsx)(eT.S0.Content,{noPadding:!0,heightGap:u,children:(0,n.jsxs)("div",{className:"flex h-full flex-col px-6 py-5",children:[(0,n.jsxs)("div",{className:"flex grow flex-col",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)(eL,{profile:t}),(0,n.jsx)(I.Z.TitleSm,{weight:"semibold",children:t.name})]}),t.enabled&&t.allow_direct_messages&&(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("button",{type:"button",className:"border-primary hover:bg-tertiary text-secondary flex items-baseline whitespace-normal rounded-[1.25rem] border px-3.5 py-2 text-left text-sm font-medium","aria-label":(0,s.t)("chat_space.header.new_conversation"),onClick:function(){f(t),d.push({pathname:(0,g.W9)()})},children:[(0,n.jsx)(L.JO,{"aria-label":(0,s.t)("chat_space.header.new_conversation"),type:"new-conversation",className:"text-dark mr-1",useWithFillCurrentColor:!0,size:20}),(0,n.jsx)(I.Z.LabelSm,{weight:"medium",children:(0,s.t)("chat_space.header.new_conversation")})]})}),t.bio&&(0,n.jsxs)("div",{className:"mb-5 flex flex-col gap-y-2",children:[(0,n.jsx)(I.Z.LabelSm,{weight:"semibold",children:(0,s.t)("community_inbox.profile.bio")}),(0,n.jsx)("div",{className:"text-sm font-normal leading-5 tracking-tighter",children:(0,n.jsx)(A.T,{editable:!1,rich_text_body:t.bio,shouldShowPreviewBlocks:!1})})]}),t.suggested_questions&&t.suggested_questions.length>0&&(0,n.jsxs)("div",{className:"mb-5 flex flex-col gap-y-2",children:[(0,n.jsx)(I.Z.LabelSm,{weight:"semibold",children:(0,s.t)("community_bot.profiles.suggested_questions_label")}),(0,n.jsx)("div",{className:"flex flex-col items-start gap-2",children:t.suggested_questions.map(function(e){return(0,n.jsx)(ei.n,{question:e,onClick:function(){return p(e)},disabled:!t.enabled||!t.allow_direct_messages||"too_long"===i||"exceeded"===i},e)})})]})]}),(0,n.jsx)("div",{className:"shrink-0 pb-2 text-center",children:(0,n.jsx)(eD,{})})]})})]})},eR=r(87685),eB=r(81261),eF=r(8054),ez={page_name:eB.$q.PROFILE_VIEW},eU=function(e){var t=e.communityMember,r=void 0===t?{}:t,i=(0,eF.P$)({publicId:null==r?void 0:r.public_uid,params:ez}).getProfileInfoQuery,o=i.data,a=i.isLoading,l=(0,eE.T)(),c=l.ref,u=l.height;return(0,n.jsxs)(eI.x,{children:[(0,n.jsx)("div",{ref:c,children:(0,n.jsx)(eT.S0.Header,{className:"!min-h-14",children:(0,n.jsx)(eA.h,{title:(0,s.t)("profile"),isDirect:!0})})}),(0,n.jsx)(eT.S0.Content,{noPadding:!0,heightGap:u,children:a?(0,n.jsx)(y.a,{center:!0}):(0,n.jsx)(eR.N,{memberPublicId:null==r?void 0:r.public_uid,member:void 0===o?{}:o,isFullPageProfile:!1,isRenderedOnRailBar:!0,shouldHideMessageButton:!0,shouldHideBadge:!0})})]})},eZ=function(e){var t=e.author,r=void 0===t?{}:t,i=e.isDms,o=e.conversationStatus;return i?(0,n.jsx)(eM,{botProfile:r,conversationStatus:void 0===o?"normal":o}):(0,n.jsx)(eU,{communityMember:r})},eG=function(e){var t=e.isDms,r=e.chat,i=(0,c.Dk)().setCurrentBotProfile,o=(0,eb.x)(),l=o.shouldShowRailBar,u=o.toggleShowRailBar,d=(0,a.k6)(),f=(0,em.BT)(),p=r||{},m=p.community_member,b=p.community_bot_profile,h=t?b:m;return(0,n.jsxs)("div",{className:"border-primary bg-primary flex h-14 w-full items-center border-b px-6 py-1",children:[r?(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[f&&(0,n.jsx)(eh.h,{name:"24-arrow-left",iconSize:24,ariaLabel:(0,s.t)("back"),className:"mr-2",onClick:function(){return d.push(t?(0,g.yg)():(0,g.Hs)())}}),(0,n.jsx)("div",{className:"max-w-[200px] md:max-w-[300px]",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(I.Z.LabelMd,{weight:"semibold",as:"h2",truncate:!0,children:null==h?void 0:h.name}),h&&"status"in h&&("idle"===h.status||"online"===h.status)&&(0,n.jsx)(J.Eg,{status:h.status})]})})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[!t&&(0,n.jsx)(eN,{chat:r}),h===b&&(null==b?void 0:b.enabled)&&(null==b?void 0:b.allow_direct_messages)&&(0,n.jsx)(D.T,{interactive:!1,content:(0,s.t)("chat_space.header.new_conversation"),children:(0,n.jsx)("button",{type:"button",className:"hover:bg-tertiary focus-visible:outline-secondary mt-1 hidden h-6 w-6 rounded transition-colors duration-200 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 lg:block",onClick:function(){i(b||null),d.push((0,g.W9)())},children:(0,n.jsx)(L.JO,{type:"new-conversation",className:"text-dark ml-0.5 mt-0.5",useWithFillCurrentColor:!0})})}),(0,n.jsx)("button",{type:"button",className:"hover:bg-tertiary focus-visible:outline-secondary mt-1 hidden h-6 w-6 rounded transition-colors duration-200 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 lg:block",onClick:u,children:(0,n.jsx)(L.JO,{"aria-label":l?(0,s.t)("chat_space.header.collapse_railbar"):(0,s.t)("chat_space.header.expand_railbar"),className:"text-dark ml-0.5 mt-0.5",useWithFillCurrentColor:!0,type:l?"rail-collapse-right":"rail-collapse-left"})})]})]}):(0,n.jsx)(ey.RN,{full:!0,children:(0,n.jsx)(ey.X2,{xxl:!0,extraLong:!0})}),l&&(0,n.jsx)(eZ,{author:h,isDms:t,conversationStatus:(null==r?void 0:r.conversation_status)||"normal"})]})};function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eH=function(e){var t,r,l,u,d=e.isDms,g=void 0!==d&&d,x=e.isNewConversation,w=void 0!==x&&x,O=e.previewId,S=e.onRestart,k=!!O,P=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eq(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=P[0],N=P[1],A=(0,a.UO)().id,I=null!=O?O:Number(A||C),E=(0,_.vO)(),T=E.setFirstMessage,L=E.setScrollAction,D=E.adjustScroller,M=E.preparePagination,R=j({id:I,isDms:g}),B=R.createMessage,F=R.fetchNextPage,z=R.hasNextPage,U=R.isFetching,Z=(0,p.O)().createChat,G=(0,a.k6)(),q=(0,v.pm)(),V=(0,c.Dk)(),H=V.setCurrentChatId,W=V.currentBotProfile,Q=V.adminMarkAsRead,J=V.memberMarkAsRead,K=V.previewChat,$=V.setIsProcessing,X=V.setPreviewChatProcessing,Y=g?J:Q,ee=f(I,g),et=ee.isChatLoading,er=ee.currentChat;ee.error&&(G.push("/settings/ai-inbox"),q.error((0,s.t)("community_inbox.chats.errors.not_found")));var en=(null==er||null==(r=er.community_bot_profile)?void 0:r.name)||(null==W?void 0:W.name)||(0,s.t)("community_inbox.agent"),ei=k?!!(null==K?void 0:K.is_processing):!!(null==er?void 0:er.is_processing),eo=!!(null==er?void 0:er.disabled)||(!(null==er||null==(l=er.community_bot_profile)?void 0:l.enabled)||!(null==er||null==(u=er.community_bot_profile)?void 0:u.allow_direct_messages))&&!k&&!w;(0,i.useEffect)(function(){I&&H(I)},[I,H]);var ea=g?null==er?void 0:er.has_unread_messages_for_member:null==er?void 0:er.has_unread_messages_for_admin;(0,i.useEffect)(function(){ea&&Y(I)},[I,Y,ea]);var es=(0,h.aK)(b),el=(0,i.useMemo)(function(){return(null==es?void 0:es.length)?(0,o.sortBy)(es||[],"created_at"):[]},[es]);(0,i.useLayoutEffect)(function(){!U&&el.length>0&&D()},[el,U,D]);var ec=function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(t.trys.push([0,4,,5]),!w)return[3,2];return[4,Z(W)];case 1:N(t.sent().id),t.label=2;case 2:return g&&(k?X(!0):$(!0,"member")),[4,B(e)];case 3:return t.sent(),[3,5];case 4:return console.error("Error while creating message",t.sent()),g&&(k?X(!1):$(!1,"member")),[3,5];case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){eV(o,n,i,a,s,"next",e)}function s(e){eV(o,n,i,a,s,"throw",e)}a(void 0)})})()};(0,i.useEffect)(function(){var e=function(e){I&&ec(e)};return m.K.on("sendSuggestedQuestion",e),function(){m.K.off("sendSuggestedQuestion",e)}},[ec,I]);var eu=!k&&!er&&!w;if(U||et||eu)return(0,n.jsx)(ep,{isDms:g,children:(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)(y.a,{})})});var ed=null==er?void 0:er.community_member,em=!k&&!w;return(0,n.jsx)(h.G5,{children:(0,n.jsxs)(ep,{isDms:g,children:[(0,n.jsxs)("div",{className:"w-full",children:[em&&(0,n.jsx)(eG,{isDms:g,chat:er}),(0,n.jsx)(ef,{messages:w?[]:el,createMessage:ec,isDms:g,fetchNextPage:function(){U||(M(),T(el[0]),L(_.aO.PAGINATION),F())},hasNextPage:!!z,isLoading:U,isNewConversation:w,isPreviewMode:k,agentName:en,isProcessing:ei,isDisabled:eo,chatCommunityMember:ed,currentChat:er,onRestart:S})]}),em&&(0,n.jsx)("div",{id:"rail-bar-header"})]})})}},75563:function(e,t,r){"use strict";r.d(t,{r:()=>a});var n=r(85893),i=r(84326),o=r(41553),a=function(){return(0,n.jsx)("div",{className:"border-primary flex h-14 items-center border-b px-6 py-2",children:(0,n.jsx)(o.Z.TitleSm,{weight:"semibold",children:(0,i.t)("settings_nav_v3.community_inbox.label")})})}},79893:function(e,t,r){"use strict";r.d(t,{z:()=>b});var n=r(85893),i=r(94184),o=r.n(i),a=r(96486),s=r(52928),l=r(84326),c=r(37103),u=r(8683),d=r(57363),f=r(41553),p=r(64514),m=function(e){var t,r,i=e.isDirect,a=e.chatRoomName,s=e.timestamp,l=e.lastMessage,c=e.isUnread,u=e.isAiSnoozed,m=!(0,p.Z)(new Date(l.created_at));return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:o()("truncate",m?"max-w-[106px]":"max-w-[130px]"),children:(0,n.jsx)(f.Z.BodySm,{truncate:!0,weight:"font-semibold",children:a})}),(0,n.jsx)("span",{className:"mt-[-1px] min-w-fit shrink-0",children:(0,n.jsx)(f.Z.BodySm,{as:"time",weight:"font-medium",color:"text-timestamp",children:s})}),(0,n.jsxs)("div",{className:"flex grow justify-end",children:[u&&(0,n.jsx)(d.JO,{type:"16-ai-snooze-v3",size:16}),c&&(0,n.jsx)(d.JO,{type:"16-inbox-unread",size:16})]})]}),(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsx)("p",{className:"text-default !line-clamp-1 flex items-center overflow-hidden hyphens-auto break-all text-left text-sm",children:"".concat(i?"":"".concat(null==(t=l.sender)?void 0:t.name,": ")).concat((null==(r=l.body)?void 0:r.circle_ios_fallback_text)||"")})})]})},b=function(e){var t=e.chat,r=e.path,i=e.isBotType,p=void 0!==i&&i,b=e.shouldHightlightChat,h=void 0!==b&&b,y=e.isUnread,v=t.community_bot_profile,g=t.community_member,_=t.last_message,x=void 0===_?{}:_,j=t.id,w=t.ai_snoozed,O=p?v:g,S=p&&!O.avatar_url;return(0,a.isNull)(x)?null:(0,n.jsx)("div",{className:o()({"border-secondary-dark mx-2 border-b last:border-none":!h}),children:(0,n.jsxs)(s.OL,{className:o()("hover:bg-secondary-dark -mx-2 block cursor-pointer py-[9px]",h?"bg-[#674FD90A]/[.04] px-6":"rounded-lg px-4"),activeClassName:"bg-secondary-dark",to:r,"data-testid":"chat-room-dm-list",children:[h&&(0,n.jsxs)("div",{className:"-mt-1",children:[(0,n.jsx)(d.JO,{type:"20-ai-bot-gradient",size:20,className:"mt-1"}),(0,n.jsx)(f.Z.LabelXxs,{weight:"semibold",as:"span",textTransform:"uppercase",color:"bg-gradient-to-t from-[#6C47D2] to-[#516DF1] bg-clip-text text-transparent",children:(0,l.t)("messaging.agent")})]}),(0,n.jsx)("div",{className:"flex w-full items-start justify-between",children:(0,n.jsxs)("div",{className:"flex w-full items-center space-x-3",children:[S?(0,n.jsx)(d.JO,{type:"36-ai-bot",size:36,className:"!h-[36px] !w-[36px] shrink-0"}):(0,n.jsx)(c.q,{isDirect:!0,otherParticipants:[O]}),(0,n.jsx)(m,{isDirect:!0,chatRoomName:O.name,timestamp:(0,u.TF)(x.created_at,{format:"short"}),lastMessage:x,isUnread:void 0!==y&&y,isAiSnoozed:w})]})})]},j)})}},73902:function(e,t,r){"use strict";r.d(t,{o:()=>a});var n=r(85893),i=r(84326),o=r(41553),a=function(){return(0,n.jsxs)("div",{className:"flex h-[calc(100dvh-160px)] flex-col items-center justify-center",children:[(0,n.jsx)(o.Z.LabelMd,{weight:"semibold",children:(0,i.t)("community_inbox.chats.no_conversations")}),(0,n.jsx)(o.Z.LabelSm,{children:(0,i.t)("community_inbox.chats.no_conversations_description")})]})}},84435:function(e,t,r){"use strict";r.d(t,{j:()=>y});var n=r(85893),i=r(75850),o=r(35756),a=r(58533),s=r(13532),l=r(61853),c=r(51169),u=r(34675),d=r(41342),f=r(63271),p=function(){var e=(0,d.wh)().currentCommunity,t=null==e?void 0:e.id,r=(0,l.Dk)(),n=r.appendMessage,i=r.updateMessage,o=r.destroyMessage,a=r.appendChat,s=r.updateChat,c=r.destroyChat;return(0,f.s)({channel:"CommunityInbox::AdminChannel",community_id:t,canCreateConnection:!!t,onMessageReceive:function(e){switch(e.event){case"createMessage":n(e.json_message,"admin");break;case"updateMessage":i(e.json_message);break;case"destroyMessage":o(e.json_message.id);break;case"createChat":var t=e.json_message;t.has_member_interaction&&a(t,"admin");break;case"updateChat":var r=e.json_message;r.has_member_interaction&&s(r,"admin");break;case"destroyChat":c(e.json_message.id,"admin")}}},[t])},m=r(79893),b=r(73902),h=function(e){var t=e.activeSort,r=e.activeChatType,i=e.activeAgent,o=(0,u.c)({sort:t,filter:"has_member_interaction",chatType:r,agentId:i.id}),d=o.isChatsLoading,f=o.hasNextPage,h=o.fetchNextPage,y=(0,l.Dk)(),v=y.adminChats,g=y.currentChatId;return(p(),d)?(0,n.jsx)("div",{className:"h-full overflow-auto p-2",children:(0,n.jsx)(c.a,{})}):(0,n.jsxs)(n.Fragment,{children:[0==v.length&&(0,n.jsx)(b.o,{}),(0,n.jsx)(a.Z,{className:"!h-[calc(100dvh-160px)] overflow-auto px-2",style:{overflow:"auto"},scrollThreshold:.8,next:h,height:600,hasMore:!!f,dataLength:v.length,loader:(0,n.jsx)(c.a,{center:!0}),children:v.map(function(e){var t=e.id==g;return(0,n.jsx)(m.z,{chat:e,path:(0,s.Av)({id:e.id.toString()}),isUnread:!t&&e.has_unread_messages_for_admin},e.id)})})]})},y=function(e){var t=e.activeSort,r=e.activeChatType,a=e.activeAgent;return(0,n.jsx)(o.S,{renderFunc:i.$,children:(0,n.jsx)(h,{activeSort:t,activeChatType:r,activeAgent:a})})}},25488:function(e,t,r){"use strict";r.d(t,{C:()=>v});var n=r(85893),i=r(58533),o=r(84326),a=r(5603),s=r(13532),l=r(61853),c=r(48298),u=r(51169),d=r(79893),f=r(73902),p=r(96486),m=r(88767),b=r(93199),h=r(95533),y=function(e){var t=(0,l.Dk)().setChats,r=(0,m.useInfiniteQuery)(["community-inbox-search",e],function(t){var r,n=t.pageParam;return r=void 0===n?1:n,(0,b.UT)(h.a.search.communityInbox.chats({params:{page:r,query:e}}))},{enabled:e.length>0,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,p.flatten)(r.map(function(e){return e.records})),pageParams:r.map(function(e){return e.page}),pagesList:r}},onSuccess:function(e){t((null==e?void 0:e.pages)||[],"admin")}});return{fetchNextPage:r.fetchNextPage,hasNextPage:r.hasNextPage,isLoading:r.isFetching}},v=function(e){var t=e.searchQuery,r=e.setSearchQuery,p=e.setIsSearchBarVisible,m=(0,c.c)(t,300),b=y(m),h=b.isLoading,v=b.fetchNextPage,g=b.hasNextPage,_=(0,l.Dk)(),x=_.adminChats,j=_.currentChatId;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-primary my-1 flex h-10 w-full items-center justify-center",children:(0,n.jsx)(a.M,{searchValue:t,onChange:r,onKeyPress:function(e){e.shiftKey||"Enter"!==e.key||e.preventDefault()},onClickCancel:function(){p(!1),r("")},placeholder:(0,o.t)("community_inbox.header.placeholder"),className:"!h-[34px] duration-500 ease-in",showCancelButton:!0,shouldAutoFocus:!0})}),t&&(h?(0,n.jsx)("div",{className:"h-auto overflow-auto p-2",children:(0,n.jsx)(u.a,{center:!0})}):(0,n.jsxs)(n.Fragment,{children:[0==x.length&&m.length>0&&(0,n.jsx)(f.o,{}),(0,n.jsx)(i.Z,{className:"!h-[calc(100dvh-160px)] overflow-auto px-2",scrollThreshold:.8,next:v,hasMore:!!g,dataLength:x.length,loader:(0,n.jsx)(u.a,{center:!0}),height:"100%",children:x.map(function(e){var t=e.id==j;return(0,n.jsx)(d.z,{chat:e,path:(0,s.Av)({id:e.id.toString()}),isUnread:!t&&e.has_unread_messages_for_admin},e.id)})})]}))]})}},15945:function(e,t,r){"use strict";r.d(t,{h:()=>g});var n=r(85893),i=r(67294),o=r(84326),a=r(75148),s=r(91525),l=r(93291),c=r(57363),u=r(80171),d=r(43544),f=r(41553),p=function(e){var t=e.className,r=e.activeItem,i=e.onItemClick,o=e.items,a=e.dataTestId;return(0,n.jsx)(d.Lt,{direction:"bottom-start",className:t,buttonClassName:"w-32",menuItemsClassName:"!w-40",buttonDataTestId:a,button:(0,n.jsxs)(d.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex h-[34px] !w-fit justify-between !gap-1 rounded-md border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,n.jsx)("div",{className:"max-w-18 gap-x-2 truncate text-left",children:(0,n.jsx)(f.Z.LabelSm,{weight:"medium",children:r.name})}),(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(c.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark"})})]}),children:o.map(function(e){var t=e.name,o=e.id;return(0,n.jsx)(d.Lt.Item,{onClick:function(){return i(e)},children:(0,n.jsx)(d.Lt.ItemLink,{type:"button",active:r.id===o,"aria-label":t,children:(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("span",{className:"block w-full truncate",children:t})})})},o)})})},m=r(82384),b=function(e){var t=e.className,r=e.activeItem,i=e.localeScope,a=e.onItemClick,s=e.dataTestId;return(0,n.jsx)(d.Lt,{direction:"bottom-start",className:t,buttonClassName:"w-full",menuItemsClassName:"!w-40",buttonDataTestId:s,button:(0,n.jsxs)(d.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex justify-between !gap-1 rounded-md border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,n.jsx)("div",{className:"flex gap-x-2",children:(0,n.jsx)(f.Z.LabelSm,{weight:"medium",children:(0,o.t)([i,r])})}),(0,n.jsx)(c.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark"})]}),children:m.UC.map(function(e){var t=e.value,s=e.icon;return(0,n.jsx)(d.Lt.Item,{onClick:function(){return a(t)},children:(0,n.jsx)(d.Lt.ItemLink,{type:"button",active:r===t,"aria-label":(0,o.t)([i,t]),children:(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(c.JO,{type:s,size:20}),(0,n.jsx)("span",{children:(0,o.t)([i,t])})]})})},t)})})},h=function(e){var t=e.className,r=e.activeItem,i=e.localeScope,a=e.onItemClick,s=e.items,l=e.button,u=e.direction,p=e.dataTestId;return(0,n.jsx)(d.Lt,{direction:void 0===u?"bottom-start":u,className:t,buttonClassName:"w-full",menuItemsClassName:"!w-40",buttonDataTestId:p,button:null!=l?l:(0,n.jsxs)(d.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex justify-between rounded-lg border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,n.jsx)("div",{className:"flex gap-x-2",children:(0,n.jsx)(f.Z.LabelSm,{weight:"medium",children:(0,o.t)([i,r])})}),(0,n.jsx)(c.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark"})]}),children:s.map(function(e){return(0,n.jsx)(d.Lt.Item,{onClick:function(){return a(e)},children:(0,n.jsx)(d.Lt.ItemLink,{type:"button",active:r===e,"aria-label":(0,o.t)([i,e]),children:(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("span",{children:(0,o.t)([i,e])})})})},e)})})};function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}var g=function(e){var t,r=e.activeSort,f=e.setActiveSort,g=e.activeChatType,_=e.setActiveChatType,x=e.activeAgent,j=e.setActiveAgent,w=e.setIsSearchBarVisible,O=((0,s.wh)().currentCommunitySettings||{}).community_inbox_chat_search_enabled,S=(t=(0,i.useState)([m.hP]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||v(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=S[0],P=S[1],C=(0,l.OH)({currentPage:1}).data;return(0,i.useEffect)(function(){var e;(null==C?void 0:C.records)&&C.records.length>0&&P([m.hP].concat(function(e){if(Array.isArray(e))return y(e)}(e=C.records)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},[C]),(0,n.jsxs)("div",{className:"bg-primary sticky top-0 z-10 my-1 flex h-10 items-center justify-between gap-2 pl-2 pr-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(b,{className:"min-w-fit",activeItem:g,localeScope:"community_inbox.filters",onItemClick:_,dataTestId:"chat-types-dropdown"}),(0,n.jsx)(p,{className:"min-w-fit",activeItem:x,onItemClick:function(e){return j(e)},items:k,dataTestId:"agent-dropdown"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h,{className:"min-w-fit",items:Object.values(m.W_),activeItem:r,localeScope:"community_inbox.filters",onItemClick:f,dataTestId:"sort-filter-dropdown",button:(0,n.jsx)(d.Lt.MenuButton,{className:"hover:bg-tertiary flex justify-between rounded-full bg-transparent !py-1.5 px-1 transition-colors",children:(0,n.jsx)(c.JO,{type:"16-sort-v2",className:"text-default",size:16})}),direction:"bottom-end"}),O&&(0,n.jsx)(u.T,{interactive:!1,content:(0,o.t)("community_inbox.header.search_messages"),children:(0,n.jsx)(a.h,{iconSize:20,buttonSize:24,name:"20-search-v3",ariaLabel:(0,o.t)("community_inbox.header.search_messages"),className:"!rounded-full",onClick:function(){return w(!0)}})})]})]})}},82384:function(e,t,r){"use strict";r.d(t,{Ki:()=>s,UC:()=>c,W_:()=>a,hP:()=>l});var n,i=r(84326);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={LATEST:"latest",OLDEST:"oldest"},s={ALL:"all",UNREAD:"admin_unread",AI_PAUSED:"ai_paused"},l={name:(0,i.t)("community_inbox.filters.all_agents"),id:0},c=Object.values((o(n={},s.ALL,{value:s.ALL,icon:"20-inbox"}),o(n,s.UNREAD,{value:s.UNREAD,icon:"20-inbox-unread"}),o(n,s.AI_PAUSED,{value:s.AI_PAUSED,icon:"20-inbox-snooze"}),n))},34675:function(e,t,r){"use strict";r.d(t,{c:()=>u});var n=r(67294),i=r(88767),o=r(82384),a=r(61853),s=r(93199),l=r(95533);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.filter,u=void 0===r?"":r,d=t.per_page,f=void 0===d?20:d,p=t.sort,m=void 0===p?o.W_.LATEST:p,b=t.chatType,h=void 0===b?o.Ki.ALL:b,y=t.agentId,v=void 0===y?0:y,g=t.isPinned,_=void 0!==g&&g,x=(0,a.Dk)(),j=x.setChats,w=x.appendChats,O=(e=(0,n.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=O[0],k=O[1];(0,n.useEffect)(function(){k(1)},[h,u,_,v,m]);var P=function(e){var t={page:e,filter:u,per_page:f,sort:m,chat_type:h};return 0!==v&&(t.agent_id=v),(0,s.UT)(l.a.communityInbox.index({params:t}))},C=(0,i.useQuery)(["community-inbox",u,f,m,h,v,_,S],function(){return P(S)},{onSuccess:function(e){if(!_){var r=e||{},n=r.page,i=r.records,o=void 0===i?[]:i,a="mine"===t.filter?"member":"admin";1===n?j(o,a):w(o,a)}}}),N=C.data,A=void 0===N?{}:N,I=C.isLoading,E=(null==A?void 0:A.records)||[],T=(null==A?void 0:A.has_next_page)||!1;return{chats:E,isChatsLoading:I&&1===S,hasNextPage:T,fetchNextPage:function(){T&&k(A.page+1)}}}},3180:function(e,t,r){"use strict";r.d(t,{U:()=>i});var n=r(34675),i=function(){var e,t=(0,n.c)({filter:"mine",per_page:1,isPinned:!0}),r=t.chats,i=void 0===r?[]:r,o=t.isChatsLoading;return{botChat:null==i||null==(e=i.filter(function(e){return!e.disabled}))?void 0:e[0],isLoading:o}}},24091:function(e,t,r){"use strict";r.d(t,{T:()=>f});var n=r(85893),i=r(88767),o=r(84326),a=r(93199),s=r(13532),l=r(84208),c=r(41342),u=r(60878),d=r(41553),f=function(e){var t=e.show,r=e.onClose,f=(0,u.pm)(),p=(0,c.N3)(),m=null==p?void 0:p.active_paywall_subscriptions,b=null==p?void 0:p.active_but_non_cancelable_paywall_subscriptions,h=s.av.communityMembers.deactivateAccount({id:null==p?void 0:p.id}),y=(0,i.useMutation)(function(){return(0,a.pC)(h)},{onSuccess:function(){f.success((0,o.t)("deactivate_account_confirmation_modal.successfully_deactivated")),r(),window.location.href=(0,s.jE)()},onError:function(){f.error((0,o.t)("deactivate_account_confirmation_modal.error_deactivated"))}}),v=y.mutateAsync,g=y.isLoading;return b?(0,n.jsx)(l.W,{title:(0,o.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account-not-allowed",actionVariant:"primary",actionText:(0,o.t)("deactivate_account_confirmation_modal.not_allowed_action"),onAction:r,disabled:g,children:(0,n.jsx)(d.Z.LabelMd,{color:"text-default",children:(0,o.t)("deactivate_account_confirmation_modal.not_allowed_description")})}):(0,n.jsxs)(l.W,{title:(0,o.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account",actionVariant:"danger",actionText:(0,o.t)("deactivate_account_confirmation_modal.deactivate"),onAction:v,disabled:g,children:[m&&(0,n.jsx)("div",{className:"pb-3",children:(0,n.jsx)(d.Z.LabelMd,{color:"text-default",children:(0,o.t)("deactivate_account_confirmation_modal.description_with_subscription")})}),(0,n.jsx)(d.Z.LabelMd,{color:"text-default",children:(0,o.t)("deactivate_account_confirmation_modal.description")})]})}},62950:function(e,t,r){"use strict";r.d(t,{Z:()=>p});var n=r(85893),i=r(96486),o=r(84326),a=r(57105),s=r(63549),l=r(21486),c=r(99198),u=(0,i.uniqueId)("broadcast-settings-form-"),d=function(e){var t=e.confirmText,r=e.onSuccess,i=(0,a.dd)();return(0,n.jsx)(s.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",confirmText:t||(0,o.t)("save"),title:(0,o.t)([c.jD,"can_you_tell_bit_more"]),onCancel:i.hide,formId:u,size:"xl",titleSize:"md",headerClassName:"!pb-4 !border-solid !border-b",footerClassName:"border border-t",children:(0,n.jsx)(l.e,{className:"py-6",formId:u,shouldShowSaveButton:!1,modal:i,onSuccess:r})})},f=a.gk.create(function(e){var t=e.confirmText,r=e.onSuccess;return(0,n.jsx)(d,{confirmText:t,onSuccess:r})}),p=function(){return(0,a.dd)(f)}},21486:function(e,t,r){"use strict";r.d(t,{e:()=>J});var n=r(85893),i=r(94184),o=r.n(i),a=r(87279),s=r(51169),l=r(14275),c=r(96486),u=r(88767),d=r(84326),f=r(26816),p=r(60878),m=r(99198),b=function(e){var t=e.modal,r=e.onSuccess,n=(0,u.useQueryClient)(),i=(0,p.pm)();return(0,u.useMutation)({mutationFn:function(e){return f.G.upsert(e)},onSuccess:function(){i.success((0,d.t)([m.jD,"settings_updated"])),n.invalidateQueries(l.E),null==t||t.remove(),(0,c.isFunction)(r)&&r()},onError:function(){i.error((0,d.t)("unexpected_error"))}})},h=r(13532),y=r(795),v=r(52293),g=r(41342),_=r(48298),x=function(e){var t=(0,p.pm)();return(0,u.useQuery)({queryKey:["marketing-email-address-settings","footer-html",e],queryFn:function(){return f.G.footerHtml({root_url:e.rootUrl,address_line_1:e.addressLine1,address_city:e.addressCity,address_postal_code:e.addressPostalCode,address_country:e.addressCountryCode,address_state:e.addressState||""})},onError:function(){return t.error((0,d.t)("error"))},keepPreviousData:!0})},j=function(){var e=(0,g.wh)().currentCommunity,t=(void 0===e?{}:e).root_url,r=(0,v.Gc)().watch,i=r("address_line_1"),o=r("address_city"),a=r("address_postal_code"),s=r("address_country"),l=r("address_state"),c=(x((0,_.c)({rootUrl:t||"",addressLine1:i,addressCity:o,addressPostalCode:a,addressCountryCode:s,addressState:l},500)).data||{footer_html:""}).footer_html;return(0,n.jsx)(y.w,{content:c})},w=r(41553),O=function(e){var t=e.children,r=e.title,i=e.description,a=e.childrenClassName,s=e.shouldHideMarginBottom;return(0,n.jsxs)("div",{className:o()({"mb-12":!(void 0!==s&&s)}),children:[(0,n.jsx)(w.Z.TitleSm,{weight:"bold",children:r}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(w.Z.BodyMd,{color:"text-default",children:i})}),(0,n.jsx)("div",{className:o()("mt-2",a),children:t})]})},S=function(e){var t=e.shouldHideBottomMargin;return(0,n.jsx)(O,{title:(0,d.t)([m.jD,"footer"]),description:(0,n.jsx)(y.w,{sanitizeProps:{ADD_ATTR:["target"]},content:(0,d.t)([m.jD,"footer_description"],{url:(0,h.UN)()})}),childrenClassName:"mt-7",shouldHideMarginBottom:void 0===t||t,children:(0,n.jsx)(j,{})})},k=r(57363),P=r(51466),C=r(10989),N=function(e){var t=e.children,r=e.name,i=e.label,o=e.tooltipText;return(0,n.jsx)(P.l.Item,{className:"grow basis-0 !pt-4",hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,labelClassName:"mb-2",errorClassName:"mt-1 text-v2-danger text-sm",name:r,label:i,tooltipText:o,children:t||(0,n.jsx)(P.l.Input,{})})};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){var t=(0,v.Gc)().getValues,r=I(t(["sender_email_domain"]),1)[0],i=I(t(["is_custom_domain_enabled_for_email_hub"]),1)[0];return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(P.l.Input,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({suffix:(0,n.jsx)("div",{className:"whitespace-nowrap py-1",children:(0,n.jsx)(w.Z.LabelMd,{color:"text-light",children:"@".concat(r)})}),suffixWrapperClassName:"!bg-selector-active"},e)),!i&&(0,n.jsx)(w.Z.LabelXs,{color:"text-default",children:(0,d.t)([m.jD,"sender_email_description"])})]})}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=function(){var e,t=(0,v.Gc)(),r=t.watch,i=t.getValues,o=r(m.r_),a=(e=i(["is_custom_domain_enabled_for_email_hub"]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,1)||function(e,t){if(e){if("string"==typeof e)return T(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,n.jsxs)(O,{title:(0,d.t)([m.jD,"from_address"]),description:(0,d.t)([m.jD,"from_address_description"]),children:[(0,n.jsx)(N,{name:"sender_name",label:(0,d.t)([m.jD,"sender_name"])}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)(N,{name:"sender_email_local_part",label:(0,d.t)([m.jD,"sender_email_local_part"]),tooltipText:a?"":(0,d.t)([m.jD,"sender_email_tooltip"]),children:(0,n.jsx)(E,{})}),!a&&(0,n.jsx)(C.q,{iconEl:(0,n.jsx)(k.JO,{type:"16-info",size:16,className:"text-default mt-0.5"}),className:"bg-tertiary border-primary mb-6",children:(0,n.jsx)(w.Z.LabelSm,{children:(0,n.jsx)(y.w,{content:(0,d.t)([m.jD,"from_address_info_notice"]),sanitizeProps:{ADD_ATTR:["target"]}})})})]}),(0,n.jsx)(P.l.Item,{className:"!flex flex-row-reverse !pt-4",labelClassName:"text-base text-default !font-normal ml-4",translationRoot:m.jD,hideDescription:!0,hideBorder:!0,fullWidth:!0,inline:!0,name:m.r_,id:m.r_,children:(0,n.jsx)(P.l.ToggleSwitch,{id:m.r_,wrapperClass:"!ml-0",name:m.r_,variant:"small"})}),o&&(0,n.jsx)(N,{name:"reply_to_email",label:(0,d.t)([m.jD,"reply_to_email"]),tooltipText:(0,d.t)([m.jD,"reply_to_email_tooltip"])})]})},D=r(67294),M=r(39788),R=r(72667);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(){var e=m.i4.map(function(e){return{label:(0,d.t)([R.p,e]),value:e.toLowerCase()}}),t=m.Q9.map(function(e){return{label:(0,d.t)([R.p,e]),value:e.toLowerCase()}}).sort(function(e,t){return e.label>=t.label?1:-1});return F(e).concat(F(t))},U=function(){var e=(0,D.useMemo)(function(){return z()},[]);return(0,n.jsx)(M.N,{wrapperClassName:"form-group no-border grow basis-0 !pt-4",name:"address_country",label:(0,d.t)([m.jD,"address_country"]),options:e,placeholder:(0,d.t)([m.jD,"select_country"])})},Z=function(){return(0,n.jsxs)(O,{title:(0,d.t)([m.jD,"postal_address"]),description:(0,d.t)([m.jD,"postal_address_description"]),childrenClassName:"mt-3",children:[(0,n.jsx)(N,{name:"address_line_1",label:(0,d.t)([m.jD,"address_line_1"])}),(0,n.jsxs)("div",{className:"grid gap-3 sm:grid-cols-1 md:grid-cols-2",children:[(0,n.jsx)(N,{name:"address_city",label:(0,d.t)([m.jD,"address_city"])}),(0,n.jsx)(N,{name:"address_state",label:(0,d.t)([m.jD,"address_state"])}),(0,n.jsx)(N,{name:"address_postal_code",label:(0,d.t)([m.jD,"address_postal_code"])}),(0,n.jsx)(U,{})]})]})},G=r(39905),q=function(){var e=(0,v.Gc)().formState.isSubmitting;return(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)(G.z,{variant:"circle",className:"float-right",large:!0,disabled:e,children:e?(0,d.t)([m.jD,"saving_changes"]):(0,d.t)([m.jD,"save_changes"])})})},V=r(65978),H="settings.emails.settings.errors",W=V.Ry().shape({sender_name:V.Z_().required((0,d.t)([H,"sender_name_is_required"])),sender_email_local_part:V.Z_().matches(m.lb,{message:(0,d.t)([H,"please_enter_valid_email_address"])}).required((0,d.t)([H,"sender_email_is_required"])),reply_to_email:V.Z_().when(m.r_,{is:!0,then:V.Z_().email((0,d.t)([H,"please_enter_valid_email_address"])).required((0,d.t)([H,"reply_to_email_is_required"]))}),address_country:V.Z_().required((0,d.t)([H,"country_is_required"])),address_line_1:V.Z_().required((0,d.t)([H,"address_is_required"])),address_city:V.Z_().required((0,d.t)([H,"city_is_required"])),address_postal_code:V.Z_().required((0,d.t)([H,"zip_code_is_required"]))});function Q(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var J=function(e){var t=e.shouldShowSaveButton,r=void 0===t||t,i=e.formId,c=e.modal,u=e.onSuccess,d=e.className,f=b({modal:c,onSuccess:u}).mutateAsync,p=(0,l.F)(),m=p.data;return p.isLoading?(0,n.jsx)(s.a,{}):(0,n.jsxs)(a.l,{id:i,className:o()("flex flex-col",void 0===d?"":d),defaultValues:m,validationSchema:W,onSubmit:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,f(e)];case 1:return t.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){Q(o,n,i,a,s,"next",e)}function s(e){Q(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:[(0,n.jsx)(L,{}),(0,n.jsx)(Z,{}),(0,n.jsx)(S,{shouldHideBottomMargin:!r}),r&&(0,n.jsx)(q,{})]})}},99198:function(e,t,r){"use strict";r.d(t,{Q9:()=>s,i4:()=>a,jD:()=>n,lb:()=>o,r_:()=>i});var n="settings.emails.settings",i="use_custom_reply_to_email",o=/^[A-Z0-9._%+-]+$/i,a=["US","BR","GB","AU","CA","DE","FR"],s=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BS","BT","BV","BW","BY","BZ","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CX","CY","CZ","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","GA","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]},72040:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(67294),i=r(51896),o=function(){var e=(0,i.aH)().data;return{shouldShowEmailNotices:(0,n.useMemo)(function(){return!!(0,i.su)(e)},[e]),isSendingMarketingEmailsAllowed:(0,n.useMemo)(function(){return!(0,i.su)(e)||e.limits.allowance>0},[e]),marketingHubData:(0,n.useMemo)(function(){return(0,i.su)(e)?e:null},[e])}}},55471:function(e,t,r){"use strict";r.d(t,{D8:()=>u,DA:()=>p,MS:()=>h,SL:()=>l,Ut:()=>f,V9:()=>d,Z4:()=>a,lJ:()=>c,uf:()=>s});var n,i=r(84326);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={ALL:"all",DRAFT:"draft",SENT:"sent",PROCESSING:"processing",SCHEDULED:"scheduled",FAILED:"failed"},s={TRIAL_LIMIT_REACHED:"trial_limit_reached",LIMIT_REACHED:"limit_reached",SYSTEM_UNAVAILABLE:"system_unavailable",EMAIL_HUB_NOT_ENABLED:"email_hub_not_enabled",BLOCKED:"blocked",UNKNOWN:"unknown"},l={standard:"standard",workflow:"workflow"},c=[a.ALL,a.SENT,a.DRAFT,a.SCHEDULED],u=(o(n={},a.ALL,"default"),o(n,a.DRAFT,"default"),o(n,a.SENT,"success"),o(n,a.PROCESSING,"info"),o(n,a.SCHEDULED,"warning"),o(n,a.FAILED,"danger"),n),d="status",f=[a.PROCESSING,a.SENT,a.FAILED],p=15e3,m=(0,i.t)("dynamic_vars_groups.member"),b=(0,i.t)("dynamic_vars_groups.community"),h=[{group:m,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:m,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:m,label:"{{member.name}}",value:"{{member.name}}"},{group:m,label:"{{member.email}}",value:"{{member.email}}"},{group:m,label:"{{member.public_uid}}",value:"{{member.public_uid}}"},{group:b,label:"{{community.name}}",value:"{{community.name}}"},{group:b,label:"{{community.url}}",value:"{{community.url}}"}]},57086:function(e,t,r){"use strict";r.d(t,{b:()=>l});var n=r(88767),i=r(84326),o=r(51896),a=r(51507),s=r(60878),l=function(){var e=(0,s.pm)(),t=(0,n.useQueryClient)();return(0,n.useMutation)({mutationFn:function(e){return a.w.create(e)},onSuccess:function(){t.invalidateQueries(o.$4)},onError:function(){return e.error((0,i.t)(["settings.emails.broadcasts.new_broadcast_modal","error_saving"]))}})}},56965:function(e,t,r){"use strict";r.d(t,{R:()=>d,S:()=>f});var n=r(85893),i=r(67294),o=r(21835),a=r(91112),s=r(84587);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=(0,i.createContext)(null);u.displayName="BuilderBlockContext";var d=function(){var e=(0,i.useContext)(u);return(0,o.Z)(e,"useBuilderBlockContext must be used within a BuilderBlockContextProvider"),e};function f(e){var t,r,o,l,d,f,p,m,b,h,y=e.children,v=(0,a.u)().data,g=(null==v||null==(t=v.community_segment)?void 0:t.audience_count)||0,_=(0,i.useMemo)(function(){var e,t,r,n,i,o,a,l,c,u;return new Map([["to",(u=null==v||null==(o=v.community_segment)||null==(i=o.rules)?void 0:i.rule_type)===s.g.ALL_MEMBERS||u===s.g.ALL_CONTACTS||u===s.g.CUSTOM_FILTERS&&!!(null==v||null==(c=v.community_segment)||null==(l=c.rules)||null==(a=l.rules)?void 0:a.length)],["subject",!!(null==v||null==(e=v.broadcast_content)?void 0:e.subject)],["preview_text",!!(null==v||null==(t=v.broadcast_content)?void 0:t.preview_text)],["email_content",!!(null==v||null==(r=v.broadcast_content)?void 0:r.email_content)],["visual_email_builder_content",!!(null==v||null==(n=v.broadcast_content)?void 0:n.visual_email_builder_content)],["schedule",!!(null==v?void 0:v.send_type)]])},[null==v||null==(o=v.community_segment)||null==(r=o.rules)?void 0:r.rule_type,null==v||null==(f=v.community_segment)||null==(d=f.rules)||null==(l=d.rules)?void 0:l.length,null==v||null==(p=v.broadcast_content)?void 0:p.email_content,null==v||null==(m=v.broadcast_content)?void 0:m.visual_email_builder_content,null==v||null==(b=v.broadcast_content)?void 0:b.preview_text,null==v||null==(h=v.broadcast_content)?void 0:h.subject,null==v?void 0:v.send_type]),x=(0,i.useMemo)(function(){var e=!0,t=!1,r=void 0;try{for(var n,i=_[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=c(n.value,2),a=o[0];if(!o[1])return a}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return"to"},[_]),j=c((0,i.useState)(x),2),w=j[0],O=j[1],S=(0,i.useMemo)(function(){return{activeSection:w,setActiveSection:O,filledStatus:_,audienceCount:g}},[w,O,_,g]);return(0,n.jsx)(u.Provider,{value:S,children:y})}},82751:function(e,t,r){"use strict";r.d(t,{z:()=>S});var n=r(85893),i=r(67294),o=r(70442),a=r(73129),s=r(51466),l=r(34519),c=r(13411),u=r(52293),d=r(84326),f=r(57363),p=r(41553),m=r(85924),b=r(1168),h="settings.emails.builder.email_builder_selector.tile",y=function(e){var t=e.tileName,r=e.isSelected,i=(0,m.TC)().isDarkAppearance;return t?(0,n.jsxs)("div",{className:(0,b.A)("border-primary flex w-full cursor-pointer flex-col gap-5 rounded-xl border p-3 transition-colors duration-300","hover:border-dark hover:shadow-md",{"border-secondary hover:border-secondary":r}),children:[(0,n.jsx)("div",{className:"bg-secondary h-[144px] rounded-lg",children:(0,n.jsx)(f.JO,{type:i?"".concat(t,"-email-builder-dark"):"".concat(t,"-email-builder"),viewBox:"0 0 244 144",className:"!w-full"})}),(0,n.jsxs)("div",{className:"mx-1 mb-2 flex flex-col gap-2 text-center",children:[(0,n.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,n.jsx)(p.Z.LabelMd,{weight:"bold",children:(0,d.t)([h,t,"name"])}),"visual"===t&&(0,n.jsx)("div",{className:"flex items-center gap-1 rounded bg-blue-500/10 px-1 py-px",children:(0,n.jsx)(p.Z.LabelXxs,{color:"text-date-blue",children:(0,d.t)([h,"new"])})})]}),(0,n.jsx)(p.Z.LabelXs,{color:"text-default",weight:"light",children:(0,d.t)([h,t,"description"])})]})]}):null},v=function(){var e=["visual","text"],t="editor",r=(0,u.Gc)().control;return(0,n.jsx)(l.u_.Body,{children:(0,n.jsx)(s.l.Item,{name:t,hideLabel:!0,hideDescription:!0,hideBorder:!0,isFirstChild:!0,children:(0,n.jsx)(u.Qr,{name:t,control:r,render:function(t){var r=t.field,i=r.value,o=r.onChange;return(0,n.jsx)(c.E,{className:"my-5 flex gap-6",value:i,onChange:o,children:e.map(function(e){return(0,n.jsx)(c.E.Option,{value:e,className:"flex-1",children:function(t){var r=t.checked;return(0,n.jsx)(y,{tileName:e,isSelected:r})}},e)})})}})})})},g=r(39905),_=function(e){var t=e.onClose,r=(0,(0,u.Gc)().watch)("editor");return(0,n.jsx)(l.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-stretch justify-end space-x-4",children:[(0,n.jsx)(g.z,{type:"button",variant:"secondary",onClick:function(){t()},children:(0,d.t)("cancel")}),(0,n.jsx)(g.z,{type:"submit",variant:"circle",disabled:!r,children:(0,d.t)("continue")})]})})},x="settings.emails.builder.email_builder_selector.modal",j=function(e){var t=e.onClose;return(0,n.jsxs)(l.u_.Header,{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between",children:[(0,n.jsx)(l.u_.Title,{children:(0,d.t)([x,"title"])}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:t})})]}),(0,n.jsx)(p.Z.LabelSm,{color:"text-default",children:(0,d.t)([x,"description"])})]})},w=function(e){var t=e.isOpen,r=e.onClose,i=(0,o.k6)(),c=(0,a.Q)(),u=c.visualBuilderPath,d=c.contentPath;return(0,n.jsxs)(l.u_,{isOpen:t,onClose:r,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsx)(l.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:(0,n.jsxs)(s.l,{onSubmit:function(e){var t="visual"===e.editor?u:d;r(),i.push(t)},defaultValues:{editor:null},shouldStopPropagation:!0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},children:[(0,n.jsx)(j,{onClose:r}),(0,n.jsx)(v,{}),(0,n.jsx)(_,{onClose:r})]})})]})};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(){var e,t=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1];return{modalElement:(0,n.jsx)(w,{isOpen:r,onClose:function(){o(!1)}}),openModal:function(e){e&&(e.preventDefault(),e.stopPropagation()),o(!0)}}}},50583:function(e,t,r){"use strict";r.d(t,{G:()=>s});var n=r(85893),i=r(52293),o=r(87435),a=r(28116),s=function(e){return function(t){var r=t.index,s=t.onApply,l=t.param,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["index","onApply","param"]),u=(0,o.R)().onClear,d="community_segment.rules.rules[".concat(r,"]");return(0,n.jsx)(i.Qr,{name:d,defaultValue:l,render:function(t){var i,o,l=t.field,d=l.value,f=l.onChange;return(0,n.jsx)(e,(i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),o=o={param:d,onApply:function(e){!e||(0,a.N)(e)?null==u||u(r):f(e),s(e)}},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}),i))}})}}},84587:function(e,t,r){"use strict";r.d(t,{V:()=>a,g:()=>o});var n=r(84326),i="settings.emails.builder",o={ALL_CONTACTS:"all_contacts",ALL_MEMBERS:"all_members",CUSTOM_FILTERS:"custom_filters",SELECTED_MEMBERS:"selected_members"},a=[{text:(0,n.t)([i,"all_contacts"]),value:o.ALL_CONTACTS},{text:(0,n.t)([i,"all_members"]),value:o.ALL_MEMBERS},{text:(0,n.t)([i,"custom_filters"]),value:o.CUSTOM_FILTERS}]},31695:function(e,t,r){"use strict";r.d(t,{Mb:()=>n,b:()=>o,gv:()=>i});var n=255,i=140,o=140},64275:function(e,t,r){"use strict";r.d(t,{K:()=>l,Z:()=>s});var n=r(21769),i=r.n(n),o=r(84326);function a(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var s=function(e){var t,r=e.embedCodeRef,n=e.embedCodeText,i=e.toast;return(t=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(!r.current)return[2];null==(e=window.getSelection())||e.selectAllChildren(r.current),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(n)];case 2:return t.sent(),i.success((0,o.t)("settings.forms.edit.embed.copy_success")),[3,4];case 3:return t.sent(),i.error((0,o.t)("settings.forms.edit.embed.copy_error")),[3,4];case 4:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(e){a(o,n,i,s,l,"next",e)}function l(e){a(o,n,i,s,l,"throw",e)}s(void 0)})})()},l=function(e){var t=e.formUid,r=e.isPopup,n=e.currentCommunityFullUrl,o=e.isPreview,a=e.isUsedOnPages;return'<div data-is-popup="'.concat(r,'" data-circle-form-uid="').concat(t,'" ').concat(c(void 0!==o&&o,void 0!==a&&a),"></div>\n          <script>").concat(i()({code:"\n    if (!window.circleFormsScriptLoaded) {\n      window.circleFormsScriptLoaded = true;\n      const script = document.createElement('script');\n      script.src = '".concat(n,"external/form-embeds.js';\n      script.defer = true;\n      document.head.appendChild(script);\n    }\n  ")}),"<\/script>")},c=function(e,t){var r="";return e&&(r+='data-is-preview="'.concat(e,'"')),t&&(r+=' data-is-used-on-pages="'.concat(t,'"')),r}},38484:function(e,t,r){"use strict";r.d(t,{u:()=>s});var n=r(88767),i=r(84326),o=r(62880),a=r(60878),s=function(e){var t=e.id,r=(0,a.pm)();return(0,n.useQuery)({queryKey:["forms","show",t],queryFn:function(){return void 0===t?null:o.G.show(t)},onError:function(){return r.error((0,i.t)("error"))},enabled:void 0!==t})}},99783:function(e,t,r){"use strict";r.d(t,{E:()=>s,L:()=>a});var n=r(67294),i=r(88767),o=r(62880),a=20,s=function(e){var t,r,s,l,c,u,d,f=e.perPage,p=void 0===f?a:f,m=e.initialPage,b=["forms","list",p,m],h=(0,i.useInfiniteQuery)(b,function(e){var t=e.pageParam,r=void 0===t?m:t,n=1;return"number"==typeof r&&r>0&&(n=r),o.G.index({page:n,per_page:p})},{getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0}),y=(0,n.useMemo)(function(){var e,t;return null!=(t=null==(e=h.data)?void 0:e.pages)?t:[]},[null==(s=h.data)?void 0:s.pages]),v=null!=(u=null==(l=y[0])?void 0:l.count)?u:0,g=null!=(d=null==(c=y[0])?void 0:c.per_page)?d:a;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},h),r=r={queryKey:b,totalRecords:v,pageSize:g,pages:y},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},13074:function(e,t,r){"use strict";r.d(t,{e:()=>s});var n=r(85893),i=r(84326),o=r(795),a=r(41553),s=function(){return(0,n.jsx)("div",{className:"py-5",children:(0,n.jsx)(a.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(o.w,{content:(0,i.t)(["settings.emails.view_broadcast","please_wait_processing_recipient_list"])})})})}},74481:function(e,t,r){"use strict";r.d(t,{M:()=>n});var n=function(e){var t=e.value,r=e.total,n=e.precision,i=e.fallbackValue,o=void 0===i?"0.0%":i;return t&&r&&r>0&&t>=0?"".concat((t/r*100).toFixed(void 0===n?1:n),"%"):o}},86862:function(e,t,r){"use strict";r.d(t,{r:()=>i});var n=r(14275),i=function(){var e=(0,n.F)(),t=e.data,r=e.isLoading;return{areMarketingSettingsAvailable:!!(null==t?void 0:t.id),isLoading:r}}},50449:function(e,t,r){"use strict";r.d(t,{t:()=>l,x:()=>s});var n=r(88767),i=r(84326),o=r(51507),a=r(60878),s=function(e){return["broadcasts","show",e]},l=function(e){var t=e.id,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["id"]),l=(0,a.pm)();return(0,n.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryKey:s(t),queryFn:function(){return o.w.show({id:t})},onError:function(){return l.error((0,i.t)("error"))},enabled:!!t},r))}},59917:function(e,t,r){"use strict";r.d(t,{w:()=>l});var n=r(88767),i=r(84326),o=r(51507),a=r(60878),s=r(55471),l=function(e){var t=e.id,r=(0,a.pm)();return(0,n.useQuery)({queryKey:["broadcasts",t,"report"],queryFn:function(){return o.w.report({id:t})},onError:function(){return r.error((0,i.t)("error"))},refetchInterval:s.DA})}},14275:function(e,t,r){"use strict";r.d(t,{E:()=>s,F:()=>l});var n=r(88767),i=r(84326),o=r(26816),a=r(60878),s=["marketing-email-address-settings"],l=function(){var e=(0,a.pm)();return(0,n.useQuery)({queryKey:s,queryFn:function(){return o.G.show()},onError:function(){return e.error((0,i.t)("error"))}})}},88670:function(e,t,r){"use strict";r.d(t,{F:()=>j});var n=r(88767),i=r(70442),o=r(84326),a=r(51507),s=r(91112),l=r(60878),c=r(62950),u=r(85893),d=r(39468),f=r(57105),p=r(41342),m=r(84208),b=r(51169),h=r(41553),y="settings.emails.builder",v=function(e){var t=e.handleSendTestEmail,r=(0,f.dd)(),n=(0,p.wh)(),i=n.currentUser;return n.isLoading?(0,u.jsx)(b.a,{}):(0,u.jsxs)(m.W,{isOpen:r.visible,onClose:function(){r.hide()},actionVariant:"circle",actionText:(0,o.t)([y,"send"]),onAction:t,title:(0,o.t)([y,"send_test_email_modal.send_test_email"]),children:[(0,u.jsx)("div",{className:"mb-1",children:(0,u.jsx)(d.I,{value:(null==i?void 0:i.email)||"",disabled:!0})}),(0,u.jsx)("div",{className:"leading-tight",children:(0,u.jsx)(h.Z.LabelXs,{color:"text-default",children:(0,o.t)([y,"send_test_email_modal.description"])})})]})},g=f.gk.create(function(e){var t=e.handleSendTestEmail;return(0,u.jsx)(v,{handleSendTestEmail:t})}),_=r(86862);function x(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var j=function(){var e,t=(0,l.pm)(),r=(0,s.u)().data,u=(0,i.UO)().id,d=null!=(e=null==r?void 0:r.id)?e:Number(u),p=(0,_.r)(),m=p.isLoading,b=p.areMarketingSettingsAvailable,h=(0,c.Z)(),y=(0,f.dd)(g),v=(0,n.useMutation)(function(){return a.w.sendTestEmail({id:d})},{onSuccess:function(){t.success((0,o.t)("settings.emails.builder.send_test_email_modal.test_email_sent"))},onError:function(){t.error((0,o.t)("request_failure_message"))}}),j=v.mutate,w=v.isLoading,O=function(){y.show({handleSendTestEmail:function(){j(),y.hide()}})};return{isSending:w,isLoadingMarketingSettings:m,handleTestEmail:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(b)return[2,O()];return[4,h.show({confirmText:(0,o.t)(["settings.emails.builder","save_and_send"]),onSuccess:j})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)})})()}}}},67792:function(e,t,r){"use strict";r.d(t,{j:()=>l});var n=r(88767),i=r(84326),o=r(51507),a=r(60878),s=r(50449),l=function(e){var t=e.id,r=(0,n.useQueryClient)(),l=(0,a.pm)();return(0,n.useMutation)({mutationFn:function(e){var r=e.body;return o.w.update({id:t,body:{internal_name:r.internal_name,broadcast_content_attributes:r.broadcast_content,community_segment_attributes:r.community_segment,scheduled_at:r.scheduled_at,send_type:r.send_type}})},onSuccess:function(){r.invalidateQueries((0,s.x)(t))},onError:function(e){if(e.message)return l.error(e.message);l.error((0,i.t)("unexpected_error"))}})}},93723:function(e,t,r){"use strict";r.d(t,{x:()=>c});var n=r(85893),i=r(94184),o=r.n(i),a=r(96486),s=r(51466),l=function(e){var t=e.children;return(0,n.jsx)("div",{className:"w-full",children:t})},c=function(e){var t=e.name,r=e.translationRoot,i=e.id,c=e.label,u=e.description,d=e.childrenWrapper,f=e.isHorizontal,p=e.hideLabel,m=e.placeholder,b=e.hidePlaceholder,h=e.hideDescription,y=e.rules,v=e.className,g=e.fullWidth,_=e.children,x=e.isDisabled,j=e.tooltipText,w=e.inlineReverse,O=e.inline;return(0,n.jsx)(s.l.Item,{id:null!=i?i:(0,a.uniqueId)("".concat(t,"-")),name:t,translationRoot:r,label:c,description:u,className:o()("flex gap-4",{"flex-col":!(void 0!==f&&f)},v),labelWrapperClassName:"!w-full !order-none !p-0",placeholder:m,hidePlaceholder:void 0!==b&&b,hideBorder:!0,hideLabel:void 0!==p&&p,hideDescription:void 0!==h&&h,childrenWrapper:void 0===d?l:d,rules:y,fullWidth:g,isDisabled:void 0!==x&&x,tooltipText:j,inlineReverse:void 0!==w&&w,inline:void 0!==O&&O,children:_})}},46135:function(e,t,r){"use strict";r.d(t,{F:()=>l,L:()=>s});var n=r(67294),i=r(88767),o=r(51630);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=20,l=function(e){var t,r,l,c,u,d,f,p=null!=e?e:{},m=p.query,b=void 0===m?"":m,h=p.perPage,y=void 0===h?s:h,v=p.initialPage,g=void 0===v?1:v,_=p.options,x=["settings","invitation-links",b,y,g],j=a({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===_?{}:_),w=(0,i.useInfiniteQuery)(x,function(e){var t=e.pageParam,r=void 0===t?g:t,n=1;r>0&&(n=r);var i=a({page:n,per_page:y},b&&{query:b});return o.bC.list({params:i})},j),O=(0,n.useMemo)(function(){var e,t;return null!=(t=null==(e=w.data)?void 0:e.pages)?t:[]},[null==(l=w.data)?void 0:l.pages]),S=null!=(d=null==(c=O[0])?void 0:c.count)?d:0,k=null!=(f=null==(u=O[0])?void 0:u.per_page)?f:y;return t=a({},w),r=r={queryKey:x,totalInvitationLinks:S,pageSize:k,pages:O},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},55078:function(e,t,r){"use strict";r.d(t,{f:()=>i});var n=r(85893),i=function(e){var t=e.title,r=e.subtitle,i=e.children;return(0,n.jsxs)("div",{className:"form-content",children:[!!t&&(0,n.jsx)("h1",{children:t}),!!r&&(0,n.jsx)("div",{className:"subtitle",children:r}),i]})}},19784:function(e,t,r){"use strict";r.d(t,{n:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"form-wrapper !mt-6",children:t})}},18014:function(e,t,r){"use strict";r.d(t,{l:()=>x,S:()=>_});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(70442),l=r(24091),c=function(e){var t;return!!(null==e||null==(t=e.currentUser)?void 0:t.id)},u=r(24804),d=r(62598),f=r(41342),p=r(81097),m=r(76896);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,i.memo)(function(){var e,t=(e=(0,u.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1],o=(0,s.TH)().pathname.includes(p.L.community_inbox.index),h=(0,f.wh)();return h.isLoading?(0,n.jsx)(m.gi,{variant:"community-sidebar-v2"}):c(h)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.T,{show:r,onClose:i}),(0,n.jsx)("div",{className:"sidebar sidebar--left","data-testid":"sidebar-left",children:(0,n.jsx)("div",{className:a()("fixed h-full w-full",o?"!max-w-[24rem]":"!max-w-[23rem]"),"data-draggable":"false",children:(0,n.jsx)(d.R,{})})})]}):(0,n.jsx)(s.l_,{to:"/"})});function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v={disableRightSidebar:!1,renderLeftSidebar:function(){return(0,n.jsx)(h,{})},disableSidebar:!1,hideAppBar:!1,shouldHideSidebarNestedNavBar:!1},g=(0,i.createContext)({config:{},setConfig:function(){},mergeConfig:function(){}});g.displayName="LayoutContext";var _=function(e){var t,r=e.children,o=(t=(0,i.useState)(v),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return(0,n.jsx)(g.Provider,{value:{config:a,setConfig:s,resetToDefault:function(){s(v)},mergeConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a,e))}},children:r})},x=function(){return(0,i.useContext)(g)}},864:function(e,t,r){"use strict";r.d(t,{y:()=>s});var n=r(67294),i=r(23560),o=r.n(i),a=r(18014),s=function(e){var t=(0,a.l)().mergeConfig;return(0,n.useEffect)(function(){o()(t)&&t(e)},[]),null}},60142:function(e,t,r){"use strict";r.d(t,{L:()=>b});var n=r(85893),i=r(55666),o=r(88767),a=r(72624),s=r(91946),l=r(18014),c=r(41342),u=r(90225),d=r(52478),f=r(60878),p=new o.QueryClient(d.V),m=(0,s.P)(function(e){var t=e.notice,r=e.alert,i=e.display_community_switcher,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["notice","alert","display_community_switcher","children"]);return(0,n.jsx)(o.QueryClientProvider,{client:p,children:(0,n.jsx)(u.i,{backendProps:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({notice:t,alert:r,display_community_switcher:i},s),children:(0,n.jsx)(c.HB,{children:(0,n.jsx)(f.VW,{children:(0,n.jsx)(l.S,{children:a})})})})})},function(){return(0,n.jsx)(a.D,{})}),b=function(){return(0,n.jsx)(m,{children:(0,n.jsx)(i.LiveStreamSettings,{hideHeader:!0})})}},55666:function(e,t,r){"use strict";r.r(t),r.d(t,{LiveStreamSettings:()=>eC,default:()=>eN});var n=r(85893),i=r(84326),o=r(78152),a=r(71462),s=r(33372),l=r(73928),c=r(41342),u=r(51922),d=r(20624),f=r(34062),p=r(63833),m=r(80926),b=r(41553),h=r(24869),y=r(98833),v=r(51169),g=function(e){var t=e.title,r=e.children,o=e.isLoading,a=e.canPurchaseMore,s=e.onPurchase,l=(0,h.E)().isCommunityOnTrial,c=(0,y.v)();return(0,n.jsx)("div",{className:"bg-primary border-primary relative shrink-0 grow rounded-lg border px-5 py-4","data-testid":"live-main-status",children:o?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)(v.a,{})}):(0,n.jsxs)("div",{className:"flex h-full flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,n.jsx)(b.Z.LabelSm,{children:t}),!l&&(void 0===a||a)&&(0,n.jsx)("button",{type:"button",className:"cursor-pointer text-sm",onClick:function(){c.show({onSuccess:s})},children:(0,i.t)("live_streams.dashboard.limits.add_more")})]}),(0,n.jsx)("div",{className:"relative grow",children:r})]})})},_=function(e){var t=e.hosts,r=e.participants,o=e.onPurchase,a=e.isLoading,s=(0,h.E)().isCommunityOnEnterprise;return(0,n.jsx)(g,{isLoading:a,canPurchaseMore:!s,onPurchase:o,title:(0,i.t)("live_streams.dashboard.limits.hosts"),children:(0,n.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"text-dark text-base font-bold",children:t})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(b.Z.LabelSm,{children:(0,i.t)("live_streams.dashboard.limits.participants")}),(0,n.jsx)("div",{className:"text-dark text-base font-bold",children:r})]})]})})},x=function(e){return Math.trunc(100*e)/100},j=function(e){var t=e.usage,r=e.limit,i=e.color,o=e.label,a="".concat(r?Math.min(t/r*100,100):0,"%"),s="".concat(x(t)," / ").concat(x(r));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"relative mb-2 h-1 w-full rounded-sm bg-gray-300",children:(0,n.jsx)("div",{className:"absolute h-full rounded-sm",style:{width:a,backgroundColor:void 0===i?"red":i}})}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[o&&(0,n.jsx)(b.Z.LabelXs,{children:o}),(0,n.jsx)(b.Z.LabelXs,{children:s})]})]})},w=function(e){var t=e.limit,r=e.usage,o=e.onPurchase,a=e.isLoading;if(!t)return null;var s=r/t*100;return(0,n.jsxs)(g,{isLoading:a,canPurchaseMore:!0,onPurchase:o,title:(0,i.t)("live_streams.dashboard.limits.video_storage"),children:[(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsx)(b.Z.TitleMd,{children:x(r)})}),(0,n.jsx)(j,{usage:r,limit:t,label:(0,i.t)("live_streams.dashboard.limits.storage_limit"),color:s>75?"red":"green"})]})},O=function(e){var t=e.limit,r=e.usage,o=e.onPurchase,a=e.isLoading;if(!t)return null;var s=r/t*100;return(0,n.jsxs)(g,{isLoading:a,canPurchaseMore:!0,onPurchase:o,title:(0,i.t)("live_streams.dashboard.limits.hours_this_month"),children:[(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsx)(b.Z.TitleMd,{children:x(r)})}),(0,n.jsx)(j,{usage:r,limit:t,label:(0,i.t)("live_streams.dashboard.limits.monthly_limit"),color:s>75?"red":"green"})]})},S=function(){var e=(0,c.wh)().currentCommunity,t=(0,m.lQ)(),r=t.monthlyHourLimit,i=t.monthlyHourUsage,o=t.storageLimit,a=t.storageUsage,s=t.hostLimit,l=t.participantLimit,u=t.isLoading,d=t.refetchAddons;return(null==e?void 0:e.supports_live_streams)?(0,n.jsxs)("div",{className:"mb-4 flex w-full flex-col gap-4 md:flex-row",children:[(0,n.jsx)(O,{isLoading:u,limit:r,usage:i,onPurchase:d}),(0,n.jsx)(w,{isLoading:u,limit:o,usage:a,onPurchase:d}),(0,n.jsx)(_,{isLoading:u,hosts:s,participants:l,onPurchase:d})]}):null},k=r(98329),P=r(555),C=function(){var e=(0,k.t)();return(0,n.jsx)(P.u,{header:(0,i.t)("live_streams.dashboard.table.no_live_records"),description:(0,i.t)("live_streams.dashboard.table.engage_with_live"),primaryLabel:(0,i.t)("live_streams.now_live.go_live"),onPrimaryClick:function(){return e.show()}})},N=r(39905),A=function(e){var t=e.startRecordNumber,r=e.endRecordNumber,o=e.totalRecordCount,a=e.page,s=e.fetchPrevPage,l=e.hasNextPage,c=e.fetchNextPage;return(0,n.jsxs)("div",{className:"flex flex-row-reverse items-center justify-end space-x-4 space-x-reverse",children:[(0,n.jsxs)("div",{className:"text-dark text-sm font-medium",children:[t,"-",r," ",(0,i.t)("live_streams.dashboard.pagination.of")," ",o]}),(0,n.jsxs)("div",{className:"ml-2 space-x-2",children:[(0,n.jsx)(N.z,{variant:"secondary",disabled:1===a,onClick:s,type:"button",children:(0,i.t)("live_streams.dashboard.pagination.prev")}),(0,n.jsx)(N.z,{variant:"secondary",disabled:!l,onClick:c,type:"button",children:(0,i.t)("live_streams.dashboard.pagination.next")})]})]})},I=r(67294),E=r(94184),T=r.n(E),L=r(85122),D=r(25),M=r(2754),R=r(46407),B=r(71458),F=r(37588),z=r(88767),U=r(6756),Z=r(60878),G=function(e){var t=e.room,r=e.refetch,n=(0,Z.pm)(),o=n.error,a=n.success,s=(0,c.wh)().currentUser;return{chatTranscript:(0,z.useMutation)(function(){return U.Q.chatTranscript({id:null==t?void 0:t.id})},{onSuccess:function(){a((0,i.t)("live_streams.room.chat_transcript_success",{name:null==t?void 0:t.name,email:null==s?void 0:s.email})),r()},onError:function(){return o((0,i.t)("live_streams.room.chat_transcript_error"))}}).mutate}},q=function(e){var t=e.room,r=e.refetch,n=(0,Z.pm)(),o=n.error,a=n.success;return{deleteRecording:(0,z.useMutation)(function(){return U.Q.deleteRoomRecording({roomId:null==t?void 0:t.id,id:(null==t?void 0:t.recording_id)||""})},{onSuccess:function(){a((0,i.t)("live_streams.delete_recording.success"),{duration:"short",shouldUseProgress:!1}),r()},onError:function(){o((0,i.t)("live_streams.delete_recording.error"))}}).mutate}},V=function(e){var t=e.room,r=e.refetch,n=(0,Z.pm)(),o=n.error,a=n.success;return{endRoom:(0,z.useMutation)(function(){return U.Q.endStream({id:null==t?void 0:t.id})},{onSuccess:function(){a((0,i.t)("live_streams.room.".concat((0,F.vX)(t),".end_success")),{duration:"short",shouldUseProgress:!1}),r()},onError:function(){return o((0,i.t)("live_streams.room.".concat((0,F.vX)(t),".end_error")))}}).mutate}},H=r(22837),W=r(4614),Q=function(e){var t=e.room,r=(0,c.wh)().currentCommunitySettings,n=!!(null==r?void 0:r.tiptap_post_enabled);return{trixBodyWithRecording:(0,I.useMemo)(function(){if(n||!t.recording_url)return"";var e,r,i=t.recording_blob,o=new H.default.Attachment((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={url:t.recording_url,sgid:i.attachable_sgid,filesize:i.byte_size,contentType:"video/mp4",content:t.video_container_tag},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e)),a=H.default.Text.textForAttachmentWithAttributes(o),s=[new H.default.Block(a)];if(t.description){var l=new H.default.StringPiece(t.description),c=new H.default.Text([l]);s.unshift(new H.default.Block(c))}var u=new H.default.Document(s),d=new H.default.DocumentView(u).render(),f="";return d.forEach(function(e){var t=e.pop();f+=t.outerHTML}),f},[n,t]),tiptapBodyWithRecording:n&&t.recording_attachment?(0,W.Ln)({bodyContent:[t.description?(0,W.Z9)({text:t.description}):(0,W.H9)(),(0,W.Om)({file:t.recording_attachment})],inlineAttachments:[t.recording_attachment]}):null}},J=function(e){var t=e.room,r=e.refetch,o=e.setCurrentRoom,a=V({room:t,refetch:r}).endRoom,s=(0,F.vX)(t),l=q({room:t,refetch:r}).deleteRecording,c=G({room:t,refetch:r}).chatTranscript,u=(0,B.tv)({title:(0,i.t)("live_streams.".concat(s,"_ended.confirm")),onConfirm:a}),d=u.confirmModal,p=u.onConfirmButtonClick,m=(0,B.tv)({title:(0,i.t)("live_streams.chat_transcript.confirm"),onConfirm:c,sentiment:"primary"}),b=m.confirmModal,h=m.onConfirmButtonClick,y=(0,B.tv)({title:(0,i.t)("live_streams.delete_recording.confirm"),onConfirm:l,description:(0,i.t)("live_streams.delete_recording.confirm_description")}),v=y.confirmModal,g=y.onConfirmButtonClick,_=Q({room:t}),x=_.trixBodyWithRecording,j=_.tiptapBodyWithRecording,w=[{key:"view-details",label:(0,i.t)("live_streams.dashboard.table.actions.view_details"),onClick:function(){return o(t)}}];return(0,F.UT)(t)||w.unshift({key:"end-stream",label:(0,i.t)("live_streams.dashboard.table.actions.".concat(s,".end")),onClick:p}),t.recording_url&&w.push({key:"post-to-space",linkComponent:function(e){return(0,n.jsx)(R.h,{hasIcon:!1,isButton:!1,render:function(e){var t=e.onClick;return(0,n.jsx)(f.w.Actions.Item,{onClick:t,children:(0,i.t)("live_streams.dashboard.table.actions.post_to_space")})},bodyForEditor:x,tiptapBodyForEditor:j,title:t.name},e)},label:(0,i.t)("live_streams.dashboard.table.actions.post_to_space")}),t.chat_transcript&&w.push({key:"chat-transcript",label:(0,i.t)("live_streams.dashboard.table.actions.chat_transcript"),onClick:h}),t.recording_url&&w.push({key:"download-recording",label:(0,i.t)("live_streams.dashboard.table.actions.download_recording"),onClick:function(){window.open(t.recording_url,"_blank")}}),t.transcript_url&&w.push({key:"download-transcript",label:(0,i.t)("live_streams.dashboard.table.actions.download_transcript"),onClick:function(){window.open(t.transcript_url,"_blank")}}),t.recording_url&&w.push({key:"delete-recording",label:(0,i.t)("live_streams.dashboard.table.actions.delete_recording"),hasDanger:!0,onClick:g}),(0,n.jsxs)(n.Fragment,{children:[d,v,b,(0,n.jsx)(f.w.Actions,{children:w.map(function(e){var t=e.key,r=e.label,i=e.hasDanger,o=e.onClick,a=e.linkComponent;return"post-to-space"===t?a(t):(0,n.jsx)(f.w.Actions.Item,{hasDanger:i,onClick:o,children:r},t)})})]})},K=r(26950),$=r(40432),X=r(57363),Y=r(70434),ee=r(57018),et=r(9955),er=function(e){var t=e.room,r=e.refetch,o=(0,c.wh)().currentCommunitySettings,a=q({room:t,refetch:r}).deleteRecording,s=Q({room:t}),l=s.trixBodyWithRecording,u=s.tiptapBodyWithRecording,d=(0,B.tv)({title:(0,i.t)("live_streams.delete_recording.confirm"),onConfirm:a,description:(0,i.t)("live_streams.delete_recording.confirm_description"),maxIndex:!0}),f=d.confirmModal,p=d.onConfirmButtonClick,m=[{key:"download",label:(0,i.t)("live_streams.dashboard.details.download"),href:t.recording_url},{key:"delete",label:(0,i.t)("live_streams.dashboard.details.delete"),onClick:p},{key:"post-to-space",linkComponent:(0,n.jsx)(R.h,{hasIcon:!1,isButton:!1,linkName:(0,i.t)("live_streams.dashboard.table.actions.post_to_space"),bodyForEditor:l,tiptapBodyForEditor:u,title:t.name,maxZIndexEnabled:!0}),label:(0,i.t)("live_streams.dashboard.table.actions.post_to_space")}];return t.transcript_url&&m.splice(1,0,{key:"download-transcript",label:(0,i.t)("live_streams.dashboard.details.download_transcript"),onClick:function(){window.open(t.transcript_url||"","_blank")}}),(0,n.jsxs)("div",{children:[(0,n.jsx)(et.Y,{rounded:!0,src:t.recording_url||"",type:"video/mp4",mediaTranscriptId:t.transcript_id,variant:(null==o?void 0:o.community_ai_settings_enabled)?"enhanced":"default"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-dark mb-1 mt-4 text-lg font-semibold",children:t.recording_name}),f,(0,n.jsx)(ee.t,{renderButton:function(){return(0,n.jsx)(Y.Y,{content:(0,i.t)("live_streams.dashboard.details.actions"),children:(0,n.jsx)(X.JO,{type:"menu-dots-vertical"})})},menuItems:m,dropdownSide:"left",shouldCloseOnClickItem:!0})]})]})},en=function(e){var t=e.recording_duration;return(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("div",{className:"text-darkest font-medium",children:(0,i.t)("live_streams.dashboard.details.duration")}),(0,n.jsx)("p",{children:t})]})},ei=function(e){var t=e.room,r=e.refetch,o=(0,L.ie)(t.created_at,{year:"numeric",month:"short",day:"numeric"});return(0,n.jsxs)("div",{className:"text-dark py-6 text-sm font-normal",children:[t.recording_url&&(0,n.jsx)(er,{room:t,refetch:r}),t.description&&(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("p",{className:"break-words pr-12",children:t.description})}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("div",{className:"text-darkest font-medium",children:(0,i.t)("live_streams.dashboard.details.room_id")}),(0,n.jsx)("p",{children:t.id})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("div",{className:"text-darkest font-medium",children:(0,i.t)("live_streams.dashboard.details.created_at")}),(0,n.jsx)("p",{children:o})]}),t.recording_duration&&(0,n.jsx)(en,{recording_duration:t.recording_duration}),(0,F.L6)(t)&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("div",{className:"text-darkest font-medium",children:(0,i.t)("live_streams.dashboard.details.guests_count")}),(0,n.jsx)("p",{children:t.guests_count})]})]})},eo=function(e){var t=e.onClickDownload;return(0,n.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium",children:[(0,n.jsx)("p",{className:"pr-1",children:(0,i.t)("live_streams.dashboard.participants.csv")}),(0,n.jsx)(X.JO,{type:"download",className:"cursor-pointer",onClick:t})]})},ea=r(53347),es=function(e){var t=e.record;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"flex w-1/2 items-center py-2",children:[(0,n.jsx)("div",{className:"relative mr-3 h-10 w-10",children:(0,n.jsx)(ea.u,{name:t.name,src:t.avatar_url})}),(0,n.jsx)(b.Z.LabelSm,{weight:"semibold",children:t.name})]}),(0,n.jsx)("div",{className:"w-1/2",children:t.email})]})},el=function(e){var t=e.onSearchChange;return(0,n.jsxs)("div",{className:"grow",children:[(0,n.jsx)(X.JO,{type:"search"}),(0,n.jsx)("input",{type:"text",name:"textSearch",placeholder:(0,i.t)("live_streams.dashboard.participants.placeholder"),onChange:t,className:"bg-primary placeholder:text-light mr-2 w-10/12 border-transparent placeholder:opacity-100 focus:border-transparent focus:ring-0"})]})},ec=r(1168);function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ed=function(e){var t,r=e.onClickSort,o=(t=(0,I.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eu(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return(0,n.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium text-gray-800",children:[(0,n.jsx)("p",{className:"pr-1",children:(0,i.t)("live_streams.dashboard.participants.sort")}),(0,n.jsx)(X.JO,{type:"caret-down",className:(0,ec.A)("cursor-pointer fill-gray-800",{"rotate-180":a}),onClick:function(){s(!a),r(a)}})]})},ef=r(13532),ep=function(e){var t=(0,Z.pm)(),r=t.success,n=t.error,o=(0,c.wh)().currentCommunityMember,a=null==o?void 0:o.email;return{onDownloadCSV:function(){return fetch(ef.av.liveStreams.downloadParticipantsCSV({roomId:e})).then(function(e){e.ok?r((0,i.t)("export_member_csv.message",{email:a})):n((0,i.t)("export_member_csv.error_message"))}).catch(function(e){n((0,i.t)("export_member_csv.error_message")),console.error(null==e?void 0:e.message)})}}};function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eb=function(e){var t,r=(0,z.useQuery)(ef.av.liveStreams.participants({roomId:e,params:{per_page:2e3,sort:"oldest"}})),n=r.data,i=r.isLoading,o=null==n?void 0:n.records;return{records:o&&(function(e){if(Array.isArray(e))return em(e)}(t=new Map(o.map(function(e){return[e.email,e]})).values())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return em(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return em(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),isLoading:i}};function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eh(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ev=function(e){var t=e.roomId,r=e.participantsCount,o=eb(t),a=o.records,s=o.isLoading,l=ey((0,I.useState)(""),2),c=l[0],u=l[1],d=ey((0,I.useState)(!1),2),f=d[0],p=d[1],m=ep(t).onDownloadCSV,b=a&&a.filter(function(e){return e.name.toLowerCase().includes(c.toLocaleLowerCase())})||[];return b=f?b.sort(function(e,t){return t.name.localeCompare(e.name)}):b.sort(function(e,t){return e.name.localeCompare(t.name)}),(0,n.jsxs)("div",{className:"text-dark absolute inset-x-9 bottom-0 top-[114px] flex flex-col pb-4 pt-1.5 text-sm font-normal",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex items-center justify-between border-b-[1px] pb-1.5",children:[(0,n.jsx)(el,{onSearchChange:function(e){u(e.target.value)}}),(0,n.jsx)(ed,{onClickSort:function(e){p(!e)}}),(0,n.jsx)(eo,{onClickDownload:m})]}),!s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-darkest mb-6 text-base font-semibold",children:(0,i.t)("live_streams.dashboard.participants.participant_count",{count:r})}),b&&b.length>0&&(0,n.jsx)("div",{className:"grow overflow-auto",children:b.map(function(e){return(0,n.jsx)(es,{record:e},e.id)})})]})]})};function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e_=function(e){var t,r=e.isOpen,o=e.onClose,a=e.room,s=e.refetch,l=Object.freeze({DETAILS:(0,i.t)("live_streams.dashboard.details.tabs.details"),PARTICIPANTS:(0,i.t)("live_streams.dashboard.details.tabs.participants")}),c=Object.values(l).map(function(e){return{label:e}}),u=(t=(0,I.useState)(l.DETAILS),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eg(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eg(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],p=(null==a?void 0:a.room_type)||F.H0.STREAM;return a?(0,n.jsxs)(K.u,{variant:"large",show:r,onClose:o,className:"stream-details",children:[(0,n.jsx)("div",{className:"text-darkest mb-4 text-2xl font-bold",children:(0,i.t)("live_streams.dashboard.details.".concat(p,".title"))}),(0,n.jsx)($.m,{controlled:!0,activeTab:d,onClick:f,options:c,variant:"underline"}),d===l.DETAILS&&(0,n.jsx)(ei,{room:a,refetch:s}),d===l.PARTICIPANTS&&(0,n.jsx)(ev,{roomId:null==a?void 0:a.id,participantsCount:null==a?void 0:a.total_participants})]}):null};function ex(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ej=function(e){var t,r=e.status,o=(ex(t={},F.LV.INITIALIZING,(0,i.t)("live_streams.status.initializing")),ex(t,F.LV.BACKSTAGE,(0,i.t)("live_streams.status.backstage")),ex(t,F.LV.LIVE,(0,i.t)("live_streams.status.live")),ex(t,F.LV.ENDED,(0,i.t)("live_streams.status.finished")),ex(t,F.LV.CLOSING,(0,i.t)("live_streams.status.closing")),t);return(0,n.jsxs)("div",{className:"flex items-center",children:[[F.LV.BACKSTAGE,F.LV.LIVE,F.LV.ENDED].includes(r)?(0,n.jsx)("div",{className:(0,ec.A)({"text-[#4262f0]":r===F.LV.BACKSTAGE,"text-[#e02f2f]":r===F.LV.LIVE,"text-[#61C878]":r===F.LV.ENDED}),children:(0,n.jsx)(X.JO,{size:6,type:"middot"})}):null,o[r]||""]})};function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eO=function(e){var t,r=e.records,o=e.refetch,a=e.className,s=(t=(0,I.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ew(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=[{title:(0,i.t)("live_streams.dashboard.table.name"),dataIndex:"name",key:"name",variant:"uppercase"},{title:(0,i.t)("live_streams.dashboard.table.status"),dataIndex:"status",key:"status",variant:"uppercase",className:D.M.sm,tdClassName:D.M.sm},{title:(0,i.t)("live_streams.dashboard.table.date"),dataIndex:"live_at",key:"live_at",variant:"uppercase",className:D.M.xl,tdClassName:D.M.xl},{title:(0,i.t)("live_streams.dashboard.table.recording"),dataIndex:"recording",key:"recording",variant:"uppercase"},{title:(0,i.t)("live_streams.dashboard.table.participants"),dataIndex:"total_participants",key:"total_participants",variant:"uppercase",className:D.M.md,tdClassName:D.M.md},{title:(0,i.t)("live_streams.dashboard.table.type"),dataIndex:"type",key:"type",variant:"uppercase",className:D.M.xl,tdClassName:D.M.xl},{title:" ",dataIndex:"actions",key:"actions",variant:"actions"}],d=function(e){c(e)},f=(null==r?void 0:r.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={key:e.id,name:(0,n.jsx)("button",{type:"button",className:"max-w-[240px] cursor-pointer truncate",title:e.name,onClick:function(){return d(e)},children:e.name}),status:(0,n.jsx)(ej,{status:e.status}),live_at:(0,L.ie)(e.live_at,{year:"numeric",month:"short",day:"numeric"}),recording:(0,n.jsx)("a",{className:T()("text-dark inline max-w-sm truncate hover:text-black",{"cursor-text":!e.recording_url}),title:(0,i.t)("live_streams.dashboard.table.actions.download"),href:e.recording_url,download:!0,target:"_blank",rel:"noreferrer",children:e.recording_url?(0,i.t)("live_streams.dashboard.table.actions.download"):"-"}),type:"conference"==e.room_type?(0,i.t)("live_streams.dashboard.table.room"):(0,i.t)("live_streams.dashboard.table.stream"),actions:(0,n.jsx)(J,{room:e,refetch:o,setCurrentRoom:c}),rowClassName:"group"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}))||[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e_,{isOpen:!!l,onClose:function(){c(null)},room:l,refetch:o}),(0,n.jsx)(M.w,{columns:u,dataSource:f,className:a})]})},eS=r(95533);function ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eP=function(){var e,t,r,n=(e=(0,I.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ek(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ek(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,z.useQuery)(eS.a.liveStreams.index({params:{page:i,per_page:10}}),{keepPreviousData:!0}),s=a.isLoading,l=a.isFetching,c=a.data,u=a.refetch,d=(null==c?void 0:c.records)||[],f=null!=(t=null==c?void 0:c.count)?t:0,p=null!=(r=null==c?void 0:c.page_count)?r:0,m=f?Math.ceil(f/10):0,b=!!(null==c?void 0:c.has_next_page),h=(i-1)*10+1;return{page:i,records:d,totalRecordCount:f,pageRecordCount:p,pageCount:m,hasNextPage:b,startRecordNumber:h,endRecordNumber:h+p-1,isLoading:s,isFetching:l,refetch:u,fetchNextPage:function(){o(i+1)},fetchPrevPage:function(){o(Math.max(i-1,1))}}},eC=function(e){var t=e.hideHeader,r=(0,c.wh)().currentCommunity,m=(void 0===r?{}:r).supports_live_streams,b=(0,u.R)().isLiveStreamsLimitsEnabled,h=eP(),y=h.records,v=h.page,g=h.hasNextPage,_=h.totalRecordCount,x=h.startRecordNumber,j=h.endRecordNumber,w=h.isLoading,O=h.refetch,k=h.fetchNextPage,P=h.fetchPrevPage,N=_>0;return(0,n.jsxs)("div",{className:"bg-primary h-full",children:[void 0!==t&&t?(0,n.jsx)(o.S,{title:(0,i.t)("live_streams_settings")}):(0,n.jsx)(a.b,{pageTitle:(0,i.t)("live_streams_settings"),rightContent:(0,n.jsx)(l.G,{inSettings:!0}),hasBorder:!0}),(0,n.jsxs)(p.T,{maxWidth:"none",children:[m&&(0,n.jsx)(n.Fragment,{children:w?(0,n.jsx)(d.m,{}):(0,n.jsxs)(n.Fragment,{children:[b&&N&&(0,n.jsx)(S,{}),_>0&&(0,n.jsx)(f.w.Headline,{className:"!px-0",children:(0,n.jsx)(f.w.Headline.Title,{children:(0,i.t)("live_streams.count",{count:_})})}),N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eO,{records:y,refetch:O,className:"mb-7"}),(0,n.jsx)(A,{startRecordNumber:x,endRecordNumber:j,totalRecordCount:_,page:v,fetchPrevPage:P,hasNextPage:g,fetchNextPage:k})]}):(0,n.jsx)(C,{})]})}),!m&&(0,n.jsx)("div",{className:"border-primary bg-primary border p-6 text-center lg:rounded-lg lg:p-36",children:(0,n.jsx)(s.s,{})})]})]})};let eN=eC},13605:function(e,t,r){"use strict";r.d(t,{Q:()=>l});var n=r(85893),i=r(84326),o=r(14598),a=r(98363),s=r(41553),l=function(e){var t=e.member,r=e.isAvatarHidden,l=e.children,c=(0,o.H)().showMemberProfileEdit,u=t.name,d=t.avatar_url;return u?(0,n.jsxs)("div",{className:"group flex items-center justify-between gap-x-1",children:[(0,n.jsxs)("button",{className:"flex items-center gap-3 text-left",type:"button",onClick:function(){return c({member:t})},children:[!(void 0!==r&&r)&&(0,n.jsx)(a.s,{src:d,name:u,size:"6"}),(0,n.jsx)(s.Z.LabelSm,{weight:"medium",children:u})]}),l]}):(0,n.jsx)(n.Fragment,{children:(0,i.t)("dash")})}},46837:function(e,t,r){"use strict";r.d(t,{f$:()=>d,p6:()=>s,uf:()=>c,ze:()=>u});var n=r(12274),i=r(43271),o=r(96486),a=r(84326),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PP";if(!e)return"";var r=new Date(e);return(0,n.default)(r)?(0,o.startCase)((0,i.default)(r,t)):""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.admin?(0,a.t)("role_admin"):e.moderator?(0,a.t)("moderator"):(0,a.t)("member")},c=function(e){return"CommunityMember"===e.type?l(e.roles):""},u=function(e){return e?(0,a.t)("settings.manage_members.subscribed"):(0,a.t)("settings.manage_members.unsubscribed")},d=function(e){return e?(0,a.t)(["invitation_status_column",e]):""}},1083:function(e,t,r){"use strict";r.d(t,{CU:()=>E,EC:()=>F,Hz:()=>et,JN:()=>K,Jm:()=>J,LI:()=>W,Oq:()=>Z,Q1:()=>ee,Q_:()=>X,VX:()=>T,W9:()=>D,Yl:()=>z,en:()=>U,ih:()=>er,j7:()=>R,kQ:()=>$,nL:()=>L,pq:()=>q,r7:()=>B,s3:()=>Y,sE:()=>V,sm:()=>Q,uN:()=>M,xz:()=>I,yE:()=>G,zu:()=>H});var n=r(84326),i=r(4117),o=i.f2.SpaceGroupsFilterV2,a=i.f2.SpacesFilter,s=i.f2.StatusFilter,l=i.f2.MemberTagsFilter,c=i.f2.PaywallsFilter,u=i.f2.EventsFilter,d=i.f2.HasPastDueSubscriptionFilter,f=i.f2.JoinedCommunityDaysAgoFilter,p=i.f2.LastLoggedInDaysAgoFilter,m=i.f2.AvatarSet,b=i.f2.ActivityScoreFilter,h=i.f2.HeadlineFilter,y=i.f2.NameFilter,v=i.f2.LocationFilter,g=i.f2.GeoLocationFilter,_=i.f2.BioFilter,x=i.f2.EmailFilter,j=i.f2.InvitationLinksFilter,w=i.f2.LevelFilter,O=i.f2.EmailMarketingFilter,S=i.f2.MemberFilter,k=i.f2.InvitationStatusFilter,P=i.f2.InvitedAtDaysAgoFilter,C=i.f2.RoleFilter,N=i.f2.SegmentFilter,A=i.f2.AccessGroupsFilter,I={name:"geo_location",component:g,label:(0,n.t)("members_directory.header.search.filters.geo_location")},E={name:"name",component:y,label:(0,n.t)("members_directory.header.search.filters.name")},T={name:"email",component:x,label:(0,n.t)("members_directory.header.search.filters.email")},L={name:"subscribed_to_marketing_emails",component:O,label:(0,n.t)("members_directory.header.search.filters.email_marketing")},D={name:"member",component:S,label:(0,n.t)("members_directory.header.search.filters.member")},M={name:"invitation_status",component:k,label:(0,n.t)("members_directory.header.search.filters.invitation_status.title")},R={name:"invited_at_days_ago",component:P,label:(0,n.t)("members_directory.header.search.filters.invited_at_days_ago")},B={name:"invitation_link_ids",component:j,label:(0,n.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},F={name:"tags",component:l,label:(0,n.t)("members_directory.header.search.filters.tags.singular_title")},z={name:"spaces",component:a,label:(0,n.t)("members_directory.header.search.filters.spaces.singular_title")},U={name:"space_groups",component:o,label:(0,n.t)("members_directory.header.search.filters.space_groups.singular_title")},Z={name:"online_status",component:s,label:(0,n.t)("members_directory.header.search.filters.online_status")},G={name:"bio",component:_,label:(0,n.t)("members_directory.header.search.filters.bio")},q={name:"headline",component:h,label:(0,n.t)("members_directory.header.search.filters.headline")},V={name:"location",component:v,label:(0,n.t)("members_directory.header.search.filters.location")},H={name:"paywalls",component:c,label:(0,n.t)("members_directory.header.search.filters.paywalls.singular_title")},W={name:"events",component:u,label:(0,n.t)("members_directory.header.search.filters.events.singular_title")},Q={name:"has_past_due_subscription",component:d,label:(0,n.t)("members_directory.header.search.filters.has_past_due_subscription")},J={name:"joined_community_days_ago",component:f,label:(0,n.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,n.t)("members_directory.header.search.filters.joined_community_days_ago_available")},K={name:"last_logged_in_days_ago",component:p,label:(0,n.t)("members_directory.header.search.filters.last_logged_in_days_ago")},$={name:"is_avatar_set",component:m,label:(0,n.t)("members_directory.header.search.filters.avatar_set")},X={name:"activity_score",component:b,label:(0,n.t)("members_directory.header.search.filters.activity_score")},Y={name:"level",component:w,label:(0,n.t)("members_directory.header.search.filters.level")},ee={name:"role",component:C,label:(0,n.t)("members_directory.header.search.filters.role")},et={name:"segment_id",component:N,label:(0,n.t)("members_directory.header.search.filters.segments.singular_title")},er={name:"access_group_ids",component:A,label:(0,n.t)("members_directory.header.search.filters.access_groups.singular_title")}},17651:function(e,t,r){"use strict";r.d(t,{a:()=>o});var n=r(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=function(e){var t=e.allFilters,r=e.selectedFilters;return(0,n.useMemo)(function(){var e,n=((function(e){if(Array.isArray(e))return i(e)})(e=t.map(function(e){return e.name}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["profile_field","geo_location","near_me"]);return r.filter(function(e){return n.includes(e.key)})},[t,r])}},65144:function(e,t,r){"use strict";r.d(t,{Z:()=>n});let n=(0,r(64100).Ue)(function(e){return{manageMemberQueryParams:{},setManageMemberQueryParams:function(t){return e({manageMemberQueryParams:t})},resetManageMemberQueryParams:function(){return e({manageMemberQueryParams:void 0})}}})},26758:function(e,t,r){"use strict";r.d(t,{v:()=>c});var n=r(67294),i=r(70442),o=r(13532),a=r(96354);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l="page",c=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],c=Number((0,a.t)()[l]||t),u=(e=(0,n.useState)(c),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],p=(0,i.k6)();return(0,n.useEffect)(function(){r&&p.push({search:(0,o.m_)(l,String(d))})},[d,p,r]),{page:d,setPage:f,initialPage:c}}},95288:function(e,t,r){"use strict";r.d(t,{$:()=>f});var n=r(67294),i=r(70442),o=r(34332),a=r(42392),s=r(76937);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=new Map([[0,s.vC.ALL],[1,s.vC.ALL],[2,s.vC.ACTIVE],[3,s.vC.INACTIVE],[4,s.vC.ACTIVE],[5,s.vC.ACTIVE]]),f=function(e){var t=(0,i.k6)(),r=(0,i.TH)(),f=(0,o.b)(),p=(0,n.useCallback)(function(){return{created_at:"desc"}},[]),m=(0,a.k)(),b=m.queryParams,h=b.order,y=b.filters;return u(c({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(m.queryParams,["order","filters"])),{onSort:function(e){var n=(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,1)||function(e,t){if(e){if("string"==typeof e)return l(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],i=new URLSearchParams(r.search);h&&Object.keys(h).forEach(function(e){i.delete("order[".concat(e,"]"))}),n&&i.append("order[".concat(n.id,"]"),n.desc?"desc":"asc"),t.push({search:i.toString()})},order:null!=h?h:p(),filters:null!=y?y:[],scope:u(c({},f.scope),{status:d.get(e)||s.vC.ALL})})}},53788:function(e,t,r){"use strict";r.d(t,{k:()=>N});var n=r(85893),i=r(84326),o=r(44081),a=r(41553),s=r(48857),l=r(84954),c=r(66007),u=r(57363),d=r(80171),f=r(43544),p=r(75148),m=r(57105),b=r(63549),h=r(51466),y=r(60878),v=r(96486),g=r(88767),_=r(93199),x=r(13532),j=function(e){var t=e.id,r=e.payload;return(0,_.gN)(x.av.settings.mobileHomeSegments.update(t),r)},w=r(22424),O=function(e){var t=e.onSuccess,r=(0,y.pm)(),n=(0,g.useQueryClient)(),i=(0,g.useMutation)({mutationFn:j,onSuccess:function(){n.invalidateQueries(w.R),(0,v.isFunction)(t)&&t()},onError:function(e){r.error(e.message)}}),o=i.mutate,a=i.mutateAsync;return{mutate:o,isUpdating:i.isLoading,mutateAsync:a}},S="settings.mobile_app.mobile_home_segments_order.rename_modal",k=function(e){var t=e.segment,r=(0,m.dd)(),o=(0,y.pm)(),a=O({onSuccess:function(){o.success((0,i.t)([S,"success"])),r.hide()}}),s=a.mutate,l=a.isUpdating;return(0,n.jsx)(b.c,{formId:"rename-segment-modal",isOpen:r.visible,onClose:r.hide,title:(0,i.t)([S,"title"]),confirmVariant:"circle",confirmText:(0,i.t)([S,"save"]),disabled:l,children:(0,n.jsx)(h.l,{id:"rename-segment-modal",defaultValues:{custom_name:t.custom_name},onSubmit:function(e){s({id:t.id,payload:e})},children:(0,n.jsx)(h.l.Item,{name:"custom_name",translationRoot:S,tooltipText:(0,i.t)([S,"custom_name_tooltip"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,children:(0,n.jsx)(h.l.Input,{name:"custom_name",maxLength:255,autocomplete:"off"})})})})},P=m.gk.create(function(e){return(0,n.jsx)(k,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),C=function(){var e,t,r,l=(0,m.dd)(P),b=(0,o.dI)().item,h="".concat(s.I18N_ROOT,".mobile_home_segments_order"),y=!b.available&&(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order",b.kind,"unavailable_state_label"]),v=(r="#506cf0",(t="--brand")in(e={})?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e);return(0,n.jsxs)("div",{className:"bg-primary flex h-full justify-between px-6 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,n.jsx)(u.JO,{type:"16-reorder",size:16}),(0,n.jsx)(a.Z.LabelSm,{color:b.available?"text-dark":"text-light",children:b.custom_name||(0,i.t)([h,b.kind,"label"])})]}),y&&(0,n.jsx)(d.T,{allowHTML:!0,content:(0,n.jsx)(c.Z,{style:v,html:(0,i.t)([h,"unavailable_tooltip"],{path:(0,i.t)([h,b.kind,"enable_in_path"])})}),children:(0,n.jsx)(a.Z.LabelXs,{color:"text-light",children:y})}),!y&&(0,n.jsx)(f.Lt,{button:(0,n.jsx)(p.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,i.t)([h,"actions","aria_label"])}),children:(0,n.jsx)(f.Lt.ItemWithLink,{onClick:function(){return l.show({segment:b})},linkType:"button",children:(0,i.t)([h,"actions",b.custom_name?"edit_custom_name":"assign_custom_name"])})})]})},N=function(){var e=(0,l.u)(),t=e.orderedMobileHomeSegments,r=e.setOrderedMobileHomeSegments;return(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order","title"])})}),(0,n.jsx)(a.Z.BodyMd,{size:"text-sm",children:(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order","subtitle"])}),(0,n.jsx)("div",{className:"bg-primary border-primary mt-6 flex border-b py-3 pl-12 pr-6",children:(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",children:(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order","menu_title"])})}),(0,n.jsxs)(o.cm,{items:t,onSort:r,lockedVerticalAxis:!0,distance:10,children:[(0,n.jsx)(o.cm.List,{gap:0,className:"divide-y",children:t.map(function(e){return(0,n.jsx)(o.cm.Item,{item:e,className:"border-primary h-14",children:(0,n.jsx)(C,{})},e.id)})}),(0,n.jsx)(o.cm.DragOverlay,{shouldRestrictToParent:!0,children:(0,n.jsx)("div",{className:"border-primary border-y shadow-md",children:(0,n.jsx)(C,{})})})]})]})}},84954:function(e,t,r){"use strict";r.d(t,{X:()=>a,u:()=>s});var n=r(85893),i=r(67294),o=(0,i.createContext)({orderedMobileHomeSegments:[],setOrderedMobileHomeSegments:function(){}});o.displayName="MobileHomeSegmentsContext";var a=function(e){var t=e.orderedMobileHomeSegments,r=e.setOrderedMobileHomeSegments,i=e.children;return(0,n.jsx)(o.Provider,{value:{orderedMobileHomeSegments:t,setOrderedMobileHomeSegments:r},children:i})},s=function(){return(0,i.useContext)(o)}},22424:function(e,t,r){"use strict";r.d(t,{R:()=>s,w:()=>l});var n=r(88767),i=r(84326),o=r(94836),a=r(60878),s="mobileAppSettings",l=function(){var e=(0,a.pm)(),t=(0,n.useQueryClient)(),r=(0,n.useQuery)(s,o.D.show),l=r.isLoading,c=r.data,u=(null==c?void 0:c.community_setting)||{mobile_home_segments:[]},d=u.mobile_home_segments,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(u,["mobile_home_segments"]),p=(0,n.useMutation)(function(e){return o.D.update(e)},{onSuccess:function(){t.invalidateQueries(s),e.success((0,i.t)("settings.mobile_app.messages.success"))},onError:function(t){e.error(t.message)}});return{defaultValues:{community_setting:f},mobileHomeSegments:d,isLoading:l,mutate:p.mutate,isSaving:p.isLoading}}},48857:function(e,t,r){"use strict";r.r(t),r.d(t,{I18N_ROOT:()=>k,MobileApp:()=>P,default:()=>C});var n=r(85893),i=r(67294),o=r(84326),a=r(85870),s=r(39905),l=r(51466),c=r(51169),u=r(55078),d=r(19784),f=r(63833),p=r(71462),m=r(52293),b=r(41342),h=r(53788),y=r(66007),v=r(93723),g=function(){var e,t,r=(0,b.wh)().currentCommunity||{},a=r.has_plus_plan,s=r.name;return(0,n.jsx)(v.x,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"community_setting.show_ios_app_banner",translationRoot:k,childrenWrapper:i.Fragment,isHorizontal:!0},a&&{description:(0,n.jsx)(y.Z,{html:(0,o.t)([k,"community_setting.show_ios_app_banner_description_for_plus"],{community_name:s})})}),t=t={children:(0,n.jsx)(l.l.ToggleSwitch,{name:"community_setting.show_ios_app_banner",variant:"small"})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))},_=function(e){var t=e.iosAppEnabled,r=e.hasBrandedApp;return t||r?r?(0,n.jsx)(g,{}):(0,n.jsxs)("div",{className:"bg-tertiary mt-6 rounded-lg px-6 py-5",children:[(0,n.jsx)(h.k,{}),(0,n.jsx)(g,{})]}):null},x=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-primary border-t"}),(0,n.jsx)(v.x,{name:"community_setting.ios_app_enabled",translationRoot:k,childrenWrapper:i.Fragment,isHorizontal:!0,description:(0,n.jsx)(y.Z,{html:(0,o.t)([k,"community_setting.ios_app_enabled_description"])}),children:(0,n.jsx)(l.l.ToggleSwitch,{name:"community_setting.ios_app_enabled",variant:"small"})})]})},j=function(){var e=(0,b.wh)().currentCommunity,t=(0,(0,m.Gc)().watch)("community_setting.ios_app_enabled");return(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)(x,{}),(0,n.jsx)(_,{iosAppEnabled:t,hasBrandedApp:!!(null==e?void 0:e.has_branded_app)})]})},w=r(84954),O=r(22424);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k="settings.mobile_app",P=function(){var e,t=(0,O.w)(),r=t.defaultValues,m=t.mobileHomeSegments,b=t.isLoading,h=t.mutate,y=t.isSaving,v=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],_=v[1];return((0,i.useEffect)(function(){_(m)},[m]),b)?(0,n.jsx)(c.a,{center:!0}):(0,n.jsxs)(w.X,{orderedMobileHomeSegments:g,setOrderedMobileHomeSegments:_,children:[(0,n.jsx)(p.b,{pageTitle:(0,o.t)([k,"title"])}),(0,n.jsxs)(f.T,{children:[(0,n.jsx)(a.C,{}),(0,n.jsx)(d.n,{children:(0,n.jsx)(u.f,{subtitle:(0,o.t)([k,"subtitle"]),children:(0,n.jsxs)(l.l,{defaultValues:r,onSubmit:function(e){e.community_setting.mobile_home_segments_order=g.map(function(e){return e.kind}),h(e)},children:[(0,n.jsx)(j,{}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(s.z,{type:"submit",variant:"circle",disabled:y,large:!0,children:y?(0,o.t)("saving"):(0,o.t)("save_changes")})})]})})})]})]})};let C=P},58418:function(e,t,r){"use strict";r.d(t,{D:()=>l,L:()=>s});var n=r(67294),i=r(88767),o=r(88262);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=20,l=function(e){var t,r,l,c,u,d,f,p=(0,o.M)().list,m=null!=e?e:{},b=m.query,h=void 0===b?"":b,y=m.perPage,v=void 0===y?s:y,g=m.initialPage,_=void 0===g?1:g,x=m.options,j=m.status,w=void 0===j?"inbox":j,O=["flagged-content",h,v,_,w],S=a({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===x?{}:x),k=(0,i.useInfiniteQuery)(O,function(e){var t=e.pageParam,r=void 0===t?_:t,n=1;return r>0&&(n=r),p({params:a({page:n,per_page:v,status:w},h&&{query:h})})},S),P=(0,n.useMemo)(function(){var e,t;return null!=(t=null==(e=k.data)?void 0:e.pages)?t:[]},[null==(l=k.data)?void 0:l.pages]),C=null!=(d=null==(c=P[0])?void 0:c.count)?d:0,N=null!=(f=null==(u=P[0])?void 0:u.per_page)?f:v;return t=a({},k),r=r={queryKey:O,totalRecords:C,pageSize:N,pages:P},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},76581:function(e,t,r){"use strict";r.d(t,{JH:()=>a,V9:()=>o,dW:()=>i,de:()=>s,vC:()=>n});var n={INBOX:"inbox",APPROVED:"approved",REJECTED:"rejected"},i=["inbox","approved","rejected"],o="status",a="post",s="comment"},88262:function(e,t,r){"use strict";r.d(t,{M:()=>o});var n=r(93199),i=r(13532),o=function(){return{list:function(e){var t=e.params;return(0,n.UT)(i.av.flaggedContent.index({params:void 0===t?{}:t}))},exportCsv:function(e){return(0,n.Cu)(i.av.flaggedContent.exportCsv(e))},get:function(e){return(0,n.UT)(i.av.flaggedContent.show({id:e}))},approve:function(e){return(0,n.gN)(i.av.flaggedContent.approve({id:e}))},reject:function(e,t){return(0,n.gN)(i.av.flaggedContent.reject({id:e}),{action_reason_body:t})}}}},62066:function(e,t,r){"use strict";r.d(t,{O:()=>o});var n=r(58418),i=r(76581),o=function(){var e=(0,n.D)({status:i.vC.INBOX}).totalRecords,t=(0,n.D)({status:i.vC.APPROVED}).totalRecords,r=(0,n.D)({status:i.vC.REJECTED}).totalRecords;return{inboxCount:e,approvedCount:t,rejectedCount:r,totalReports:e+t+r}}},60685:function(e,t,r){"use strict";r.d(t,{w:()=>a});var n=r(88767),i=r(93199),o=r(13532),a=function(e){var t=e.id,r=e.audience;return(0,n.useQuery)(["community","header-nav-items",r],function(){return(0,i.UT)(o.av.settings.navigation.list(r?{params:{audience:r}}:{}))},{enabled:!!t})}},2214:function(e,t,r){"use strict";r.d(t,{_:()=>a,s:()=>i});var n=r(84326),i=function(e){return e.name||e.display_name},o=function(e){var t;return null!=(t=e.stripe_prices_attributes.find(function(e){return e.preferred}))?t:e.stripe_prices_attributes[0]},a=function(e){var t=o(e);return(null==t?void 0:t.short_description)||(0,n.t)("settings.paywalls.list.form.no_preferred_price_selected")}},98833:function(e,t,r){"use strict";r.d(t,{v:()=>T});var n=r(85893),i=r(88767),o=r(84326),a=r(57105),s=r(34519),l=r(60878),c=r(44820),u=r(51466),d=r(51169),f=r(15582),p=function(e){var t,r,i=e.serverErrors,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["serverErrors"]),a=i.title,s=i.errors,l=i.topExtraInfo,c=i.bottomExtraInfo;return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"server-errors"},o),r=r={children:(0,n.jsxs)("div",{className:"server-errors__wrapper",children:[(0,n.jsx)("div",{className:"server-errors__close-icon",children:(0,n.jsx)(f.Z,{className:"server-errors__icon-svg"})}),(0,n.jsxs)("div",{className:"server-errors__container",children:[a&&(0,n.jsx)("h3",{className:"server-errors__title",children:a}),l&&(0,n.jsx)("p",{className:"server-errors__extra-info",children:l}),s&&Array.isArray(s)&&(0,n.jsx)("div",{className:"server-errors__content",children:(0,n.jsx)("ul",{className:"server-errors__list",children:s.map(function(e){return(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"server-errors__error-title",children:e.title}),":"," ",(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})]},e.title)})})}),c&&(0,n.jsx)("p",{className:"server-errors__extra-info",children:c})]})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},m=r(67294),b=r(6046),h=function(e){var t=e.handleOnSuccess,r=e.setServerErrors,n=e.onCloseModal,a=e.refetchCurrentPlan,s=(0,l.pm)();return{handleAddonsMutation:(0,i.useMutation)(function(e){return b.z.create(e)},{onSuccess:function(){t?t():(null==a||a(),s.success((0,o.t)("settings.billing.add_ons.changes_succeeded")),null==n||n())},onError:function(e){console.error(e),r&&r({title:null==e?void 0:e.message,errors:null==e?void 0:e.errorDetails})}})}};function y(e,t,r){return"boolean"==typeof e?e?t:0:e*t/r}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=(0,m.createContext)(void 0);j.displayName="AddOnsSettingsContext";var w=function(e){var t=e.onSuccess,r=e.onCloseModal,i=e.children,a=e.refetchCurrentPlan,s=x((0,m.useState)(),2),l=s[0],c=s[1],u=x((0,m.useState)([]),2),d=u[0],f=u[1],p=x((0,m.useState)(),2),v=p[0],w=p[1],O=x((0,m.useState)(),2),S=O[0],k=O[1],P=x((0,m.useState)(!0),2),C=P[0],N=P[1],A=x((0,m.useState)(),2),I=A[0],E=A[1],T=x((0,m.useState)(),2),L=T[0],D=T[1],M=h({handleOnSuccess:t,setServerErrors:E,onCloseModal:r,refetchCurrentPlan:a}).handleAddonsMutation,R=function(){var e=0;S&&(Object.keys(S).forEach(function(t){e+=S[t]}),c(e))},B=function(e){var t={};return e.forEach(function(e){t[e.slug]=y(e.quantity,e.base_amount,e.unit_size)}),t},F=function(e){var t={};return e.forEach(function(e){t[e.slug]=e.quantity}),t},z=function(e){return d.find(function(t){return t.slug===e})},U=function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),[4,b.z.index()];case 1:return w(F(e=t.sent())),f(e.map(function(e){var t,r;return t=_({},e),r=r={step:e.unit_size},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})),D(e.filter(function(e){return e.is_grandfathered}).map(function(e){return e.name}).join(", ")),k(B(e)),[3,4];case 2:return t.sent(),E({title:(0,o.t)("something_went_wrong")}),[3,4];case 3:return N(!1),[7];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,m.useEffect)(function(){U()},[]),(0,m.useEffect)(function(){R()},[S]),(0,n.jsx)(j.Provider,{value:{getPlanInterval:function(){return d[0].interval},getPlanCurrency:function(){return d[0].price_currency},total:l,addOnsData:d,defaultValues:v,isLoading:C,handleAddonsMutation:M,serverErrors:I,getAddOnPrice:function(e,t){var r=z(e);return r?y(t,r.base_amount,r.unit_size):0},updateTotalPrice:function(e,t){var r=_({},S);r[e]=t,k(r)},onSubmit:function(e){var t={};Object.keys(e).forEach(function(r){var n=z(r);n&&(t[n.id.toString()]=e[r])}),M.mutate(t)},grandfatheredAddonNames:L},children:i})},O=function(){var e=(0,m.useContext)(j);if(void 0===e)throw Error("useAddOnsSettingsContext must be used within an AddOnsSettingsContextProvider");return e},S=r(28566),k=r(38151);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t,r,i,a=e.name,s=e.interval,l=e.monthlyAmount,c=e.step,d=e.toggleable,f=void 0!==d&&d,p=e.maxPurchasableQuantity,b=e.priceCurrency,h=e.unitSize,y=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","interval","monthlyAmount","step","toggleable","maxPurchasableQuantity","priceCurrency","unitSize"]),v=O(),g=v.defaultValues,_=v.getAddOnPrice,x=v.updateTotalPrice,j=(t=(0,m.useState)((null==g?void 0:g[a])!==void 0?_(a,null==g?void 0:g[a]):void 0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=j[0],C=j[1],N=function(e){x(a,A(e))},A=(0,m.useCallback)(function(e){var t=_(a,e);return C(t),t},[_,a]);return(0,n.jsx)(u.l.Item,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:a,hideBorder:!0,isFirstChild:!0,label:(0,o.t)("settings.billing.add_ons.manage.".concat(a)),description:(0,o.t)("settings.billing.add_ons.manage.".concat(s,".").concat(a,"_description"),{amount:l,quantity:h})},y),i=i={children:(0,n.jsxs)("div",{className:"form-input manage-add-ons__item",children:[f&&(0,n.jsx)("div",{className:"manage-add-ons__item-button",children:(0,n.jsx)(S.R,{name:a,onChange:N})}),!f&&(0,n.jsx)("div",{className:"manage-add-ons__item-button",children:(0,n.jsx)(k.A,{name:a,step:void 0===c?1:c,onChange:N,max:p})}),(0,n.jsx)("div",{className:"manage-add-ons__item-price",children:(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:b+w})," ",(0,o.t)("separator_slash")," ",s.charAt(0)]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))},N=function(e){var t=e.onAfterSubmit,r=O(),i=r.isLoading,a=r.addOnsData,s=r.defaultValues,l=r.onSubmit,f=r.total,m=r.serverErrors,b=r.getPlanInterval,h=r.getPlanCurrency,y=r.grandfatheredAddonNames,v=r.handleAddonsMutation.isLoading;return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("div",{className:"manage-add-ons__loader",children:(0,n.jsx)(d.a,{})}),!i&&(0,n.jsxs)("div",{children:[y&&(0,n.jsx)("div",{className:"mt-6 rounded-md border border-l-8 border-amber-500 p-5",children:(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,o.t)("settings.billing.add_ons.manage.grandfathered_addons",{addons:y})}})}),(0,n.jsx)(u.l,{onSubmit:function(e){l(e),null==t||t()},defaultValues:s,children:(0,n.jsxs)("div",{className:"manage-add-ons__fields-wrapper text-dark space-y-2",children:[m&&(0,n.jsx)(p,{serverErrors:m}),a.map(function(e){var t;return(0,n.jsx)("div",{children:(0,n.jsx)(C,{name:e.slug,step:e.step,monthlyAmount:e.formatted_base_monthly_amount,toggleable:"boolean"==typeof e.quantity,interval:e.interval,maxPurchasableQuantity:null!=(t=e.max_purchasable_quantity)?t:void 0,unitSize:e.unit_size,priceCurrency:e.price_currency})},e.slug)}),(0,n.jsxs)("div",{className:"manage-add-ons__total",children:[(0,n.jsx)("div",{className:"manage-add-ons__total-label",children:(0,o.t)("settings.billing.add_ons.manage.total_purchase")}),(0,n.jsxs)("div",{className:"manage-add-ons__total-value",children:[(0,n.jsx)("b",{children:h()+f})," ",(0,o.t)("separator_slash")," ",b().charAt(0)]})]}),(0,n.jsx)("div",{className:"form-actions",children:(0,n.jsx)(c._,{type:"submit",variant:"primary",full:!0,submitting:v,children:(0,o.t)("settings.billing.add_ons.manage.apply_changes")})})]})})]})]})},A=new i.QueryClient,I=function(e){var t=e.onSuccess,r=e.refetchCurrentPlan,c=(0,l.pm)(),u=(0,a.dd)(),d=function(){u.hide(),u.remove()};return(0,n.jsx)(i.QueryClientProvider,{client:A,children:(0,n.jsx)(w,{onSuccess:t,onCloseModal:d,refetchCurrentPlan:r,children:(0,n.jsxs)(s.u_,{isOpen:u.visible,onClose:d,className:"manage-add-ons__modal",title:(0,o.t)("settings.billing.add_ons.manage_addons"),children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{size:"lg",children:[(0,n.jsx)(s.u_.Header,{children:(0,n.jsx)(s.u_.Title,{size:"sm",children:(0,o.t)("settings.billing.add_ons.manage_addons")})}),(0,n.jsx)(s.u_.Body,{children:(0,n.jsx)(N,{onAfterSubmit:function(){t&&(d(),c&&c.success((0,o.t)("settings.billing.add_ons.changes_succeeded")))}})})]})]})})})},E=a.gk.create(function(e){var t=e.onSuccess,r=e.refetchCurrentPlan;return(0,n.jsx)(I,{onSuccess:t,refetchCurrentPlan:r})}),T=function(){return(0,a.dd)(E)}},15679:function(e,t,r){"use strict";r.d(t,{d:()=>A});var n=r(85893),i=r(57105),o=r(84326),a=r(34519),s=r(6082);let l=r.p+"static/images/features/ai-actions/en/value-prop_1x-ada5cde634ab4d2f.png",c=r.p+"static/images/features/ai-actions/en/value-prop_2x-14689d55280fff16.png";var u=r(24869),d=r(79869),f=r(94375),p=r(69075),m=r(57363),b=r(39905),h=r(41553),y=function(e){var t=e.description;return(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"mt-1 flex h-5 w-5 items-center justify-center",children:(0,n.jsx)(m.JO,{type:"20-checkmark-circle-fill-thin",size:20,className:"text-black-600"})}),(0,n.jsx)(h.Z.BodySm,{color:"text-default",children:t})]})},v=function(){return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(h.Z.LabelSm,{weight:"bold",children:(0,o.t)("settings.ai_actions.modal.ai_actions.title")})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_actions.deploy_agents_desc")}),(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_actions.train_agents_desc")})]})]})},g=function(){return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(h.Z.LabelSm,{weight:"bold",children:(0,o.t)("settings.ai_actions.modal.ai_filters.title")})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_filters.analyze_sentiment_desc")}),(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_filters.content_moderation_desc")})]})]})},_=r(51169),x=function(e){var t=e.plan;return e.isLoading?(0,n.jsx)("div",{className:"bg-primary border-primary flex h-32 w-full items-center justify-center rounded-b-lg border",children:(0,n.jsx)(_.a,{})}):t?(0,n.jsxs)("div",{className:"bg-primary border-primary rounded-b-xl border p-4",children:[(0,n.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,n.jsx)(h.Z.LabelLg,{weight:"semibold",children:t.display_name}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1 align-middle",children:[(0,n.jsx)(h.Z.LabelMd,{weight:"bold",children:t.display_base_monthly_amount}),(0,n.jsx)(h.Z.BodyMd,{weight:"font-normal",color:"text-slate-700 dark:text-slate-300",size:"text-sm",children:(0,o.t)("settings.ai_actions.modal.monthly_interval")})]})]}),(0,n.jsx)(h.Z.LabelXs,{children:(0,o.t)((0,s.pE)(t.interval)?"settings.ai_actions.modal.annual_amount":"settings.ai_actions.modal.monthly_amount",(0,s.pE)(t.interval)?{dollar_amount:t.annual_base_amount_with_currency}:{})})]}):null},j=function(e){var t=e.handleActivate,r=e.handleLearnMore,i=e.isPlanLoading,a=e.plan;return(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(h.Z.BodyMd,{children:(0,o.t)("settings.ai_actions.modal.description")})}),(0,n.jsx)(g,{}),(0,n.jsx)(v,{}),(0,n.jsxs)(b.z,{onClick:r,variant:"secondary",className:"mb-4 w-auto self-start",children:[(0,o.t)("settings.ai_actions.modal.learn_more_button"),(0,n.jsx)(m.JO,{type:"16-arrow-top-right",size:16,className:"ml-2"})]}),(0,n.jsxs)("div",{className:"mt-auto flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"lg:hidden",children:(0,n.jsx)(x,{plan:a,isLoading:i})}),(0,n.jsx)(b.z,{onClick:t,large:!0,full:!0,variant:"marketing-gradient",children:(0,o.t)("settings.ai_actions.modal.upgrade_to",{plan_name:"Enterprise"})})]})]})},w=function(e){var t=e.image1x,r=e.imageVariants,i=e.alt,o=e.plan,a=e.isLoading,s="".concat(r.thumbnail," 300w, ").concat(r.small," 600w, ").concat(r.medium," 900w, ").concat(r.large," 1200w");return(0,n.jsx)("div",{className:"hidden h-full flex-1 lg:flex",children:(0,n.jsxs)("div",{className:"relative h-full w-full",children:[(0,n.jsx)("div",{className:"h-full w-full",children:(0,n.jsx)("img",{src:t,srcSet:s,alt:i,loading:"eager",className:"h-full w-full object-cover"})}),(0,n.jsx)(x,{plan:o,isLoading:a})]})})};function O(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var S=function(e){var t=e.handleClose,r=(0,d.w)(),i=(0,u.E)().defaultCurrency,m=(0,p.R)({planTier:s.Gb.enterprise,billingCurrency:i||void 0}),b=m.plan,h=m.isPlanLoading;return(0,n.jsx)(a.u_.Body,{children:(0,n.jsxs)("div",{className:"flex h-full gap-8 pb-6 pt-4",children:[(0,n.jsx)(j,{handleActivate:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return t(),[4,r.show({planTier:s.Gb.enterprise,showPlanDetails:!1,successButtonLabel:(0,o.t)("pricing_plans.upgrade_modal.actions.close"),source:f.fe.AI_ACTIONS_ENABLE_MODAL})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,s,"next",e)}function s(e){O(o,n,i,a,s,"throw",e)}a(void 0)})})()},handleLearnMore:function(){window.open("https://help.circle.so/c/workflow-setup/getting-started-with-ai-workflows","_blank")},plan:b,isPlanLoading:h}),(0,n.jsx)(w,{image1x:l,imageVariants:{thumbnail:l,small:l,medium:l,large:c},alt:(0,o.t)("settings.ai_actions.modal.image_alt"),plan:b,isLoading:h})]})})},k=function(e){var t=e.handleClose;return(0,n.jsxs)(a.u_.Header,{children:[(0,n.jsx)(a.u_.Title,{size:"md",className:"w-full text-left",children:(0,n.jsx)(h.Z.TitleMd,{weight:"font-bold",children:(0,o.t)("settings.ai_actions.modal.title")})}),(0,n.jsx)(a.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(a.u_.CloseButton,{onClick:t})})]})};function P(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var C=function(e){var t=e.afterClose,r=(0,i.dd)(),s=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,r.hide()];case 1:return e.sent(),r.remove(),null==t||t(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){P(o,n,i,a,s,"next",e)}function s(e){P(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsxs)(a.u_,{title:(0,o.t)("settings.ai_actions.modal.title"),isOpen:r.visible,onClose:s,children:[(0,n.jsx)(a.u_.Overlay,{}),(0,n.jsxs)(a.u_.Content,{size:"2xl",children:[(0,n.jsx)(k,{handleClose:s}),(0,n.jsx)(S,{handleClose:s})]})]})},N=i.gk.create(function(e){var t=e.afterClose,r=e.source;return(0,n.jsx)(C,{afterClose:t,source:r})}),A=function(){return(0,i.dd)(N)}},9089:function(e,t,r){"use strict";r.d(t,{K:()=>eg});var n=r(85893),i=r(67294),o=r(84326),a=r(90809),s=r(32050),l=r(51169),c=r(41553),u=r(98833),d=function(e){var t,r=e.currentPlan,i=e.refetchCurrentPlan,a=(0,u.v)(),s=r.plan_addons_total_amount_with_interval;return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsx)(c.Z.TitleSm,{weight:"bold",children:(0,o.t)("settings.billing.add_ons.my_addons")}),(0,n.jsx)(c.Z.TitleSm,{weight:"bold",children:s})]}),null==r||null==(t=r.plan_addons)?void 0:t.map(function(e){return(0,n.jsxs)("div",{className:"flex justify-between gap-3 pb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(c.Z.LabelSm,{children:[e.value," ",e.label]}),"number"==typeof e.remaining_resources&&(0,n.jsx)(c.Z.LabelSm,{color:"text-light pl-2",children:(0,o.t)("settings.billing.add_ons.remaining_resources",{count:e.remaining_resources})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{weight:"bold",children:e.amount_with_interval})})]},e.community_plan_addon_id)}),(0,n.jsx)("button",{type:"button",onClick:function(){return a.show({refetchCurrentPlan:i})},children:(0,n.jsx)(c.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,o.t)("settings.billing.add_ons.manage_add_ons")})})]})},f=r(91712),p=r(3189),m=r(43271),b=function(e){var t=e.startDate;return(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:(0,o.t)("settings.billing.ai_actions.usage_this_month_starting_from",{date:(0,m.default)(new Date(1e3*t),"MMM d, yyyy")})})})},h=r(1168),y=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:(0,h.A)("bg-primary border-primary rounded-lg border px-8 py-7",r),children:t})},v=r(63676),g=r(57363),_=r(80171),x=function(e){var t=e.finalOveragePrice,r=e.currencySymbol,i=e.isOverage,a=e.priceOverage;return(0,n.jsxs)("div",{className:"mb-1 flex justify-between",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,o.t)("settings.billing.ai_actions.product_name")})}),i&&t&&a&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-price",children:"".concat(r).concat((0,v.HA)(t))}),(0,n.jsx)(_.T,{content:(0,o.t)("settings.billing.ai_actions.overage_tooltip",{price:"".concat(r).concat((0,v.HA)(a))}),children:(0,n.jsx)(g.JO,{type:"16-info",useWithStrokeCurrentColor:!0,size:16,className:"ml-1"})})]})]})},j=function(){return(0,n.jsx)("div",{className:"border-primary mb-6 border-b pb-6"})},w=r(41342),O=r(66219),S=r(88767),k=r(93199),P=r(13532),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,k.UT)(P.av.AccountSubscriptions.getBillingCycles(e.limit,e.products))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.limit,n=void 0===r?12:r,i=e.products,o=void 0===i?["ai_actions"]:i,a=(0,S.useQuery)(["billing-cycles",n,o],function(){return C({limit:n,products:o})},{enabled:void 0!==t&&t,staleTime:3e5,cacheTime:6e5}),s=a.data,l=a.isLoading,c=a.error,u=a.refetch;return{billingCycles:(null==s?void 0:s.billing_cycles)||[],isLoading:l,error:c,refetch:u,hasData:!!s}};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onDateRangeSelect,r=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return A(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],a=r[1],s=N({enabled:n,products:["ai_actions"]}),l=s.billingCycles,c=s.isLoading,u=s.hasData,d=s.refetch,f=(0,i.useCallback)(function(e,t,r,n){var i=(0,m.default)(e,"MMM d");return r||n?(0,o.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,o.t)("settings.billing.ai_actions.date_ranges.present")}):e.toDateString()===t.toDateString()?(0,o.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,m.default)(t,"MMM d")}):e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?(0,o.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,m.default)(t,"d")}):(0,o.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,m.default)(t,"MMM d")})},[]),p=(0,i.useMemo)(function(){return u?l.sort(function(e,t){return t.start_date-e.start_date}).map(function(e){var t,r=new Date(1e3*e.start_date),n=new Date(1e3*e.end_date),i=new Date;return{label:f(r,n,r<=i&&i<=n,(null==(t=l[0])?void 0:t.id)===e.id),value:e.id,startDate:e.start_date,endDate:e.end_date}}):[]},[l,u,f]),b=(0,i.useCallback)(function(){u||c?u&&d():a(!0)},[u,c,d]);return{dateRanges:p,handleDateRangeSelect:function(e){null==t||t(e)},isLoading:c,hasData:u,fetchBillingCycles:b}},E=r(39905),T=r(43544),L=function(e){var t=e.dateRanges,r=e.isLoading,i=e.onDropdownClick,a=e.onDateRangeSelect;return(0,n.jsx)(T.Lt,{direction:"bottom-start",size:"large",onToggle:function(e){e&&i()},button:(0,n.jsx)(T.Lt.MenuButton,{className:"!border-0 !bg-transparent !p-0",children:(0,n.jsx)(E.z,{variant:"text",className:"!p-0",children:(0,n.jsxs)("span",{className:"inline-flex items-center gap-0",children:[(0,o.t)("settings.billing.ai_actions.view_usage_history"),(0,n.jsx)(g.JO,{type:"caret-down-bold",size:12,className:"mb-1 shrink-0"})]})})}),children:(0,n.jsx)("div",{className:"py-1",children:r?(0,n.jsx)("div",{className:"flex items-center justify-center px-4 py-8",children:(0,n.jsx)(l.a,{className:"h-5 w-5"})}):0===t.length?(0,n.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:(0,o.t)("settings.billing.ai_actions.no_billing_cycles",{defaultValue:"No billing cycles found"})}):t.map(function(e){return(0,n.jsx)(T.Lt.Item,{children:(0,n.jsx)("button",{type:"button",onClick:function(){return a(e)},className:"text-dark hover:bg-secondary w-full px-4 py-2 text-left text-sm transition-colors",children:e.label})},e.value)})})})};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){var t=e.start_date,r=e.end_date,n=e.free_quantity,o=e.price_overage,a=e.initialPage,s=e.initialPerPage,l=e.initialSortField,c=e.initialSortDirection,u=e.enabled,d=M((0,i.useState)(void 0===a?1:a),2),f=d[0],p=d[1],m=M((0,i.useState)(void 0===s?10:s),2),b=m[0],h=m[1],y=M((0,i.useState)(void 0===l?"total_credits_consumed":l),2),v=y[0],g=y[1],_=M((0,i.useState)(void 0===c?"desc":c),2),x=_[0],j=_[1],w={start_date:t,end_date:r,free_quantity:n,price_overage:o,page:f,per_page:b,sort_field:v,sort_direction:x},O=(0,S.useQuery)(["ai-workflows-billing-history",w],function(){var e;return e=w,(0,k.UT)(P.av.aiWorkflowsBillingHistory.list({params:e}))},{enabled:(void 0===u||u)&&!!t&&!!r,keepPreviousData:!0}),C=O.data,N=O.isLoading,A=O.error,I=O.refetch;return{workflows:(null==C?void 0:C.workflows)||[],pagination:(null==C?void 0:C.pagination)||{current_page:f,per_page:b,total_pages:0,total_count:0},isLoading:N,error:A,refetch:I,page:f,perPage:b,sortField:v,sortDirection:x,handlePageChange:function(e){p(e)},handlePerPageChange:function(e){h(e),p(1)},handleSortChange:function(e){e===v?j("asc"===x?"desc":"asc"):(g(e),j("desc")),p(1)}}},B=r(57105),F=r(34062),z=r(34519),U=function(){var e=(0,p.D)(),t=e.currentPlan,r=e.isCurrentPlanLoading,n=e.errorFetchingCurrentPlan;return{billingDetails:null==t?void 0:t.ai_actions_billing,isLoading:r,error:n}},Z=function(e){var t=new Date(e);return(0,n.jsx)(c.Z.BodyMd,{children:(0,m.default)(t,(0,o.t)("settings.billing.ai_actions.date_format"))})},G=function(e){var t=e.dateRange,r=e.freeQuantity,a=(0,B.dd)(),s=U().billingDetails,l=(0,i.useMemo)(function(){if(!t||0===t.startDate||0===t.endDate)return{startDate:"",endDate:""};var e=new Date(1e3*t.startDate),r=new Date(1e3*t.endDate);return{startDate:(0,m.default)(e,"yyyy-MM-dd"),endDate:(0,m.default)(r,"yyyy-MM-dd")}},[t]),u=l.startDate,d=l.endDate,f=R({start_date:u,end_date:d,free_quantity:r,price_overage:(null==s?void 0:s.price_overage)||0,enabled:a.visible&&!!u&&!!d}),p=f.workflows,b=f.pagination,h=f.isLoading,y=f.error,g=f.page,_=f.sortField,x=f.sortDirection,j=f.handlePageChange,w=f.handleSortChange,O=function(){a.hide(),a.remove()},S=(0,i.useMemo)(function(){return[{accessorKey:"workflow_name",header:(0,o.t)("settings.billing.ai_actions.table_headers.name"),cell:function(e){var t;return t=e.getValue(),(0,n.jsx)(c.Z.BodyMd,{children:t})}},{accessorKey:"total_credits_consumed",header:(0,o.t)("settings.billing.ai_actions.table_headers.credits"),cell:function(e){var t;return t=e.getValue(),(0,n.jsx)(c.Z.BodyMd,{children:(0,v.HA)(t)})}},{accessorKey:"total_runs",header:(0,o.t)("settings.billing.ai_actions.table_headers.total_runs"),cell:function(e){var t;return t=e.getValue(),(0,n.jsx)(c.Z.BodyMd,{children:(0,v.HA)(t)})}},{accessorKey:"created_at",header:(0,o.t)("settings.billing.ai_actions.table_headers.created_at"),cell:function(e){return Z(e.getValue())}}]},[]);return(0,n.jsxs)(z.u_,{isOpen:a.visible,onClose:O,children:[(0,n.jsx)(z.u_.Overlay,{}),(0,n.jsxs)(z.u_.Content,{size:"full",className:"max-w-screen-xl",children:[(0,n.jsxs)(z.u_.Header,{children:[(0,n.jsx)(z.u_.Title,{children:(0,o.t)("settings.billing.ai_actions.modal_title")}),(0,n.jsx)(z.u_.HeaderActions,{children:(0,n.jsx)(z.u_.CloseButton,{onClick:O})})]}),(0,n.jsx)(z.u_.Body,{className:"flex h-full flex-col p-8",children:y?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)(c.Z.BodyMd,{color:"text-danger",children:(0,o.t)("settings.billing.ai_actions.error_loading_data")})}):(0,n.jsx)(F.w,{data:p,columns:S,totalRecordsCount:b.total_count,isLoading:h,onChangePage:j,pageSize:b.per_page,initialPage:g,onChangeSorting:function(e){e.length>0&&w(e[0].id)},initialSort:[{id:_,desc:"desc"===x}],children:(0,n.jsxs)(F.w.TableWrapper,{className:"px-0",children:[(0,n.jsxs)(F.w.Table,{children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{style:{width:"40%"}}),(0,n.jsx)("col",{style:{width:"25%"}}),(0,n.jsx)("col",{style:{width:"15%"}}),(0,n.jsx)("col",{style:{width:"20%"}})]}),(0,n.jsx)(F.w.SortableHead,{}),(0,n.jsx)(F.w.Loader,{}),(0,n.jsx)(F.w.NoRecords,{text:(0,o.t)("settings.billing.ai_actions.no_workflows_found")}),(0,n.jsx)(F.w.Body,{})]}),(0,n.jsx)(F.w.Pagination,{align:"left",direction:"reverse"})]})})})]})]})},q=B.gk.create(function(e){var t=e.dateRange,r=e.freeQuantity;return(0,n.jsx)(G,{dateRange:t,freeQuantity:r})}),V=function(e){var t=e.freeQuantity,r=e.isOverage,i=e.progress,a=e.usageCount,s=(0,w.wh)().currentCommunitySettings,l=(0,B.dd)(q),u=I({onDateRangeSelect:function(e){l.show({dateRange:e,freeQuantity:t})}}),d=u.dateRanges,f=u.handleDateRangeSelect,p=u.isLoading,m=u.fetchBillingCycles;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,o.t)("settings.billing.ai_actions.credits")})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(O.N,{progress:i,size:"sm",type:r?"danger":"success"})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:(0,o.t)("settings.billing.ai_actions.credits_in_tier",{current_credits_count:(0,v.HA)(a),max_credits_count_in_tier:(0,v.HA)(t)})}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:!r&&(0,o.t)("settings.billing.ai_actions.included")})})]}),(null==s?void 0:s.ai_workflows_billing_history_modal_enabled)&&(0,n.jsx)("div",{className:"mt-3 inline-block",children:(0,n.jsx)(L,{dateRanges:d,isLoading:p,onDropdownClick:m,onDateRangeSelect:f})}),r&&(0,n.jsx)("div",{className:"mt-4 flex flex-col items-start gap-2",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-danger",children:(0,o.t)("settings.billing.ai_actions.overage_message")})})]})},H=function(){var e=U().billingDetails;if(!e||"canceled"===e.status)return null;var t=e.free_quantity,r=e.usage_count,i=e.overage,o=e.final_overage_price,a=e.price_overage,s=e.cycle,l=e.currency_symbol,c=e.progress;return(0,n.jsxs)(y,{children:[(0,n.jsx)(x,{isOverage:i,finalOveragePrice:o,priceOverage:a,currencySymbol:l}),(0,n.jsx)(b,{startDate:s.start_date}),(0,n.jsx)(j,{}),(0,n.jsx)(V,{usageCount:r,freeQuantity:t,isOverage:i,progress:c})]})},W=r(52928),Q=r(55627),J=r(24330),K=r(67803),$=function(e){var t=e.freePeriod,r=null==t?void 0:t.ends_at,i=function(e){return new Date(e.toDateString())},a=i(new Date),s=i(new Date(r)),l=Math.max((0,K.Z)(s,a),0),u=(0,m.default)(s,"MMM d, yyyy");return(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("div",{className:"dark:bg-tertiary rounded-lg bg-blue-100 p-4",children:[(0,n.jsx)(c.Z.LabelMd,{color:"text-secondary",weight:"medium",children:(0,o.t)("settings.billing.email_hub.free_period_banner.title")}),(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(c.Z.BodySm,{color:"text-secondary",children:(0,o.t)("settings.billing.email_hub.free_period_banner.remaining_days",{days_left:l,end_date:u})})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.Z.BodySm,{children:(0,o.t)("settings.billing.email_hub.free_period_banner.banner_text")})}),(0,n.jsx)(W.rU,{to:P.Lo.email.overview,children:(0,n.jsx)(E.z,{variant:"secondary",children:(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("settings.billing.email_hub.free_period_banner.send_broadcast")})})})]})})},X=function(){return(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("div",{className:"dark:bg-tertiary rounded-lg bg-blue-100 p-6",children:[(0,n.jsx)(c.Z.LabelMd,{color:"text-secondary",weight:"medium",children:(0,o.t)("settings.billing.email_hub.free_tier_banner.title")}),(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(c.Z.BodySm,{color:"text-secondary",children:(0,o.t)("settings.billing.email_hub.free_tier_banner.banner_text")})}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(W.rU,{to:P.Lo.email.overview,children:(0,n.jsx)(E.z,{variant:"secondary",children:(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("settings.billing.email_hub.free_period_banner.send_broadcast")})})})})]})})},Y=function(e){var t=e.billingDetails,r=t.percentage_completion_in_tier,i=t.max_contacts_count_in_tier,a=t.current_contacts_count,s=t.amount_with_currency_interval,l=t.amount_with_currency,u=t.free_period,d=t.billing_status,f=t.free_tier,p=Q.J.useCancellationModal();return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,o.t)("settings.billing.email_hub.title")}),"free_period"===d&&(0,n.jsx)(J.g,{label:(0,o.t)("settings.billing.email_hub.free_period_badge")}),f&&(0,n.jsx)(J.g,{label:(0,o.t)("settings.billing.email_hub.free_tier_badge")})]}),(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-price",children:(null==u?void 0:u.active)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("s",{children:l}),(0,o.t)("settings.billing.email_hub.per_month")]}):s})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,o.t)("settings.billing.email_hub.contacts")})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(O.N,{progress:r,size:"sm"})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:(0,o.t)("settings.billing.email_hub.contacts_in_tier",{current_contacts_count:a,max_contacts_count_in_tier:i})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:(0,o.t)("settings.billing.email_hub.scales_as_you_grow")}),(0,n.jsx)(_.T,{content:(0,o.t)("settings.billing.email_hub.scales_as_you_grow_tooltip"),children:(0,n.jsx)(g.JO,{type:"16-info",useWithStrokeCurrentColor:!0,size:16,className:"ml-1"})})]})]})]}),(null==u?void 0:u.active)&&(0,n.jsx)($,{freePeriod:u}),f&&(0,n.jsx)(X,{}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(W.rU,{to:P.Lo.members.manage,children:(0,n.jsx)("button",{type:"button",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,o.t)("settings.billing.email_hub.manage_contacts")})})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"button",onClick:function(){return p.show()},children:(0,n.jsx)(c.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,o.t)("settings.billing.email_hub.disable_email_hub")})})})]})]})},ee=r(35410),et=r(34870),er=function(e){var t=e.billingDetails.current_period_end,r=(0,ee.K)(),i=r.reactivateEmailHubSubscription,a=r.isReactivatingEmailHubSubscription,s=(0,et.w)({dateTime:new Date(t),format:et.f.short_month_and_date_with_year});return a?(0,n.jsx)(l.a,{variant:"fullscreen",center:!0}):(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsx)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,o.t)("settings.billing.email_hub.title")})})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(c.Z.BodySm,{color:"secondary",children:(0,o.t)("settings.billing.email_hub.cancel_at_period_end_state.callout",{date:s})})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.Z.BodySm,{color:"secondary",children:(0,o.t)("settings.billing.email_hub.cancel_at_period_end_state.text")})}),(0,n.jsx)("div",{children:(0,n.jsx)(E.z,{onClick:function(){i(),setTimeout(function(){window.location.reload()},2e3)},variant:"secondary",children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,o.t)("settings.billing.email_hub.cancel_at_period_end_state.button")})})})]})},en=r(2352),ei=function(){var e=(0,en.T)();return(0,n.jsxs)("div",{className:"dark:bg-tertiary border-primary my-6 rounded-lg border bg-blue-100 px-8 py-7",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(c.Z.TitleSm,{weight:"medium",children:(0,o.t)("settings.billing.email_hub.inactive_state.title")})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.Z.BodySm,{color:"secondary",children:(0,o.t)("settings.billing.email_hub.inactive_state.description")})}),(0,n.jsx)("div",{children:(0,n.jsx)(E.z,{onClick:function(){return e.show()},variant:"secondary",children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,o.t)("settings.billing.email_hub.inactive_state.enable_button")})})})]})},eo=function(){var e=(0,p.D)().currentPlan;if(!(null==e?void 0:e.email_hub_billing))return null;var t=e.email_hub_billing.billing_status;return"active"===t||"free_period"===t?(0,n.jsx)(Y,{billingDetails:e.email_hub_billing}):"cancel_at_period_end"===t?(0,n.jsx)(er,{billingDetails:e.email_hub_billing}):(0,n.jsx)(ei,{})},ea=r(6082),es=function(e){var t=e.count,r=e.remainingValue;return(0,n.jsxs)("div",{className:"flex gap-3 pb-2",children:[(0,n.jsx)(g.JO,{type:"check",size:16}),(0,n.jsx)(c.Z.LabelSm,{color:"text-dark",children:t}),"number"==typeof r&&(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:(0,o.t)("pricing_plans.features_with_values.remaining_resources",{count:r})})]})},el=function(e){var t=e.currentPlan;return(0,n.jsxs)("div",{className:"bg-primary border-primary rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,ea.gR)(t.tier)?t.name:(0,o.t)("settings.billing.plans.".concat(t.tier))}),(0,n.jsx)(c.Z.TitleSm,{weight:"bold","data-testid":"plan-price",children:(0,ea.gR)(t.tier)?t.annual_base_amount_with_interval:t.base_amount_with_interval})]}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,o.t)("settings.billing.your_plan")})}),(0,n.jsx)(es,{count:t.max_space_count,remainingValue:t.remaining_max_space_count}),(0,n.jsx)(es,{count:t.max_admin_count,remainingValue:t.remaining_max_admin_count}),(0,n.jsx)(es,{count:t.max_moderator_count,remainingValue:t.remaining_max_moderator_count}),(0,n.jsx)(es,{count:t.max_member_count,remainingValue:t.remaining_max_member_count}),(0,n.jsx)(es,{count:t.live_stream_max_host_capacity}),(0,n.jsx)(es,{count:t.live_stream_max_spectator_capacity}),(0,n.jsx)(es,{count:t.live_stream_monthly_stream_hours,remainingValue:t.remaining_live_stream_monthly_stream_hours}),(0,n.jsx)(es,{count:t.live_stream_recording_hours,remainingValue:t.remaining_live_stream_recording_hours}),(0,n.jsx)(es,{count:t.live_room_participants_capacity})]})},ec=function(){var e=(0,S.useQuery)(["community-upcoming-invoice"],function(){return(0,k.UT)(P.av.accountPaymentProcessors.invoice.upcomingInvoice())},{retry:10});return{upcomingInvoice:e.data,isUpcomingInvoiceLoading:e.isLoading,errorFetchingUpcomingInvoice:e.error,refetchUpcomingInvoice:e.refetch,isRefetchingUpcomingInvoice:e.isRefetching}},eu=function(e){var t=e.item,r=e.labelTranslation,i=e.label,a=e.amountColor,s=e.labelColor;return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsxs)("div",{className:"flex justify-between pb-2",children:[(0,n.jsx)(c.Z.LabelSm,{color:void 0===s?"text-dark":s,children:r?(0,o.t)("settings.billing.preview_invoice.".concat(r)):i}),(0,n.jsx)(c.Z.LabelSm,{color:void 0===a?"text-dark":a,children:t})]})})},ed=function(e){var t=e.invoice,r=e.title;return null===t?null:(0,n.jsxs)(n.Fragment,{children:[t.next_payment_date&&(0,n.jsxs)("div",{className:"border-primary mb-3 flex justify-between border-b pb-3",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"bold",children:r}),(0,n.jsx)(c.Z.LabelSm,{children:t.next_payment_date})]}),t.line_items.map(function(e){return(0,n.jsx)(eu,{item:e.amount,label:e.name},e.id)}),t.coupon_amount&&(0,n.jsx)(eu,{item:t.coupon_amount,label:(0,o.t)("settings.billing.preview_invoice.coupon_terms",{coupon_name:t.coupon_name,discount:t.coupon_terms}),labelColor:"text-light",amountColor:"text-v2-success"}),t.tax&&(0,n.jsx)(eu,{item:t.tax,labelTranslation:"tax"}),t.balance&&(0,n.jsx)(eu,{item:t.balance,labelTranslation:"balance",amountColor:"text-v2-success"}),(0,n.jsx)(eu,{item:t.amount_due,labelTranslation:"amount_due"})]})},ef=r(82606),ep=r(11638),em=function(){return(0,k.Cu)(P.av.accountPaymentProcessors.billingPortal.create(),{})},eb=r(60878),eh=function(){var e=(0,eb.pm)().error,t=(0,S.useMutation)(em,{onSuccess:function(t){t.url?window.location.replace(t.url):e((0,o.t)("pricing_plans.payment_processor.errors.billing_portal"))},onError:function(t){console.error(t),e((0,o.t)("pricing_plans.payment_processor.errors.billing_portal"))}});return{onGenerateBillingPortalUrl:function(){t.mutate()},isCreatingBillingPortal:t.isLoading}},ey=function(e){var t=e.cancellingMetadata,r=eh(),i=r.onGenerateBillingPortalUrl,a=r.isCreatingBillingPortal,s=(0,ep.n5)()?"UJB6AB55":"nH21fEOM";return(0,n.jsxs)("div",{className:"border-t border-gray-200 py-5",children:[a&&(0,n.jsx)(l.a,{variant:"fullscreen"}),["view_invoices","manage_card","manage_billing_address"].map(function(e){return(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("button",{type:"button",onClick:i,children:(0,n.jsx)(c.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,o.t)("pricing_plans.".concat(e))})})},e)}),t&&(0,n.jsx)(ef.PopupButton,{id:s,size:66,medium:"demo-test",hidden:t,children:(0,n.jsx)(c.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,o.t)("pricing_plans.cancel_plan")})})]})},ev=function(e){var t=e.showBillingPortal,r=e.currentPlan,i=ec(),a=i.upcomingInvoice;if(i.isUpcomingInvoiceLoading)return(0,n.jsx)(l.a,{center:!0});var s=a.community_plan_invoice,u=a.secondary_subscription_invoice,d=a.shared_invoice;return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsx)("div",{className:"mb-6 flex justify-between",children:(0,n.jsx)(c.Z.TitleSm,{weight:"bold",children:(0,o.t)("settings.billing.billing_cycle.title")})}),(0,n.jsx)(ed,{invoice:s,title:(0,o.t)("settings.billing.preview_invoice.community_plan_title",{community_plan:"Circle ".concat(r.display_name)})}),!d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(ed,{invoice:u,title:(0,o.t)("settings.billing.preview_invoice.marketing_plan_title")})]}),t&&(0,n.jsx)(ey,{cancellingMetadata:r.cancelling_metadata})]})},eg=function(e){var t=e.showBillingPortal,r=e.showAddons,c=e.forceFromSubscription,u=e.showBillingDetails,m=(0,p.D)(void 0===c||c),b=m.currentPlan,h=m.isCurrentPlanLoading,y=m.errorFetchingCurrentPlan,v=m.refetchCurrentPlan,g=(0,a.C)().trackEvent;return((0,i.useEffect)(function(){g("plan_settings.billing_page.visited",{})},[]),h)?(0,n.jsx)(l.a,{center:!0}):y||!b?(0,n.jsx)(s.b,{title:(0,o.t)("settings.billing.plans.errors.plan_not_found"),type:"alert"}):(0,n.jsxs)(n.Fragment,{children:[b.scheduled_downgrade_metadata&&(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(f.o,{currentPlan:b})}),(0,n.jsx)(el,{currentPlan:b}),r&&(0,n.jsx)(d,{currentPlan:b,refetchCurrentPlan:v}),(0,n.jsx)(eo,{}),(0,n.jsx)(H,{}),(void 0===u||u)&&(0,n.jsx)(ev,{showBillingPortal:t,currentPlan:b})]})}},40858:function(e,t,r){"use strict";r.d(t,{Z:()=>ei});var n=r(85893),i=r(67294),o=r(84326),a=r(41553),s=r(760),l=function(e){return e.value?(0,n.jsx)(s.n,{}):(0,n.jsx)(a.Z.BodyMd,{color:"text-default",children:""})},c=function(e){var t=e.children;return(0,n.jsx)("div",{className:"border-primary flex items-center border-y border-t-0 py-4",children:t})},u=r(27820),d=r(94184),f=r.n(d),p=function(e){var t=e.value,r=e.hideCheckIcon,i=e.className;return(0,n.jsxs)("div",{className:f()("flex items-center",i),children:[!(void 0!==r&&r)&&(0,n.jsx)(s.n,{}),(0,n.jsx)(a.Z.BodyMd,{color:"text-default",children:t})]})};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var t=e.title,r=e.basic,i=e.professional,o=e.business,a=e.enterprise,s=(0,u.x)().plans,d=Object.entries({basic:r,professional:i,business:o,enterprise:a}).filter(function(e){var t=b(e,1)[0];return s.some(function(e){return e.tier===t})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{children:(0,n.jsx)(p,{className:"pr-5",value:t,hideCheckIcon:!0})}),d.map(function(e){var t=b(e,2),r=t[0],i=t[1];return(0,n.jsx)(c,{children:"string"==typeof i?(0,n.jsx)(p,{value:i}):(0,n.jsx)(l,{value:!!i})},r)})]})},y=r(1168),v=function(e){var t,r,i=e.sectionName,o=e.children,s=(0,u.x)().plans,l="grid-cols-".concat(s.length+1),c=(0,y.A)("grid",l,"bg-primary");return(0,n.jsxs)("div",{className:"bg-primary mb-12",children:[(0,n.jsx)("div",{className:c,children:(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(a.Z.LabelMd,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},{weight:"medium"}),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})}),(0,n.jsx)("div",{className:(0,y.A)("grid",l),children:o})]})},g=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.ai_agents"),children:[(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.chat_agents"),basic:!1,professional:!1,business:!1,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.knowledge_engine"),basic:!1,professional:!1,business:!1,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.ai_inbox"),basic:!1,professional:!1,business:!1,enterprise:!0})]})},_=r(13382);function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={admin:{business:"5,000",enterprise:"30,000"},headless:{business:"100",enterprise:"500"}},w=function(e,t,r,n){var i,a=(t||"usd").toLowerCase();if("included"===n)return"admin"===r?"".concat(j[r][e]," ").concat((0,o.t)("pricing_plans.interval.abbreviation.month")):"".concat(j[r][e]," ").concat((0,o.t)("settings.developers.mau"));if("admin"===r){var s,l=(x(s={},_.X.USD.code.toLowerCase(),{business:.005,enterprise:.002,symbol:_.X.USD.symbol}),x(s,_.X.BRL.code.toLowerCase(),{business:.03,enterprise:.012,symbol:_.X.BRL.symbol}),s),c=l[a][e],u=l[a].symbol;return"".concat(u).concat(c," / ").concat((0,o.t)("pricing_plans.request"))}var d=(x(i={},_.X.USD.code.toLowerCase(),{business:.5,enterprise:.3,symbol:_.X.USD.symbol}),x(i,_.X.BRL.code.toLowerCase(),{business:3.5,enterprise:2,symbol:_.X.BRL.symbol}),i),f=d[a][e],p=d[a].symbol;return"".concat(p).concat(f," / ").concat((0,o.t)("pricing_plans.mau"))},O=function(){var e=(0,u.x)().billingCurrency;return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.api"),children:[(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.included_admin_api"),basic:!1,professional:!1,business:w("business",e,"admin","included"),enterprise:w("enterprise",e,"admin","included")}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.extra_admin_api"),basic:!1,professional:!1,business:w("business",e,"admin","extra"),enterprise:w("enterprise",e,"admin","extra")}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.included_headless_api"),basic:!1,professional:!1,business:w("business",e,"headless","included"),enterprise:w("enterprise",e,"headless","included")}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.extra_headless_api"),basic:!1,professional:!1,business:w("business",e,"headless","extra"),enterprise:w("enterprise",e,"headless","extra")})]})},S=r(80932),k=function(e){var t=e.value,r=e.suffix,i=0===t||!t;return(0,n.jsx)("div",{className:"flex items-center",children:i?(0,n.jsx)(a.Z.BodyMd,{color:"text-default",children:"-"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.n,{}),(0,n.jsx)(a.Z.BodyMd,{color:"text-default",children:(0,S.tL)(t)?(0,o.t)("settings.billing.unlimited"):"".concat(t).concat(void 0===r?"":r)})]})})},P=function(e){var t=e.title,r=e.feature,i=e.suffix,o=(0,u.x)().plans;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{children:(0,n.jsx)(p,{className:"pr-5",value:t,hideCheckIcon:!0})}),o.map(function(e){var t=e.plan_feature_flags[r],o="number"==typeof t;return(0,n.jsx)(c,{children:o?(0,n.jsx)(k,{value:t,suffix:i}):(0,n.jsx)(l,{value:!!t})},e.id)})]})};function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var A=function(){var e,t=(0,u.x)().currentPlan;return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.features"),children:[(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.custom_domain"),feature:S.GY.custom_domain}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.private_spaces"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.bulk_import_export"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.notifications"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.member_profiles_directory"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.moderation_basic"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.direct_messaging"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.group_chat"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.email_digest"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.events"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.gdpr_compliant"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.ios_app"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.chat_spaces"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.scheduled_posts"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.gamification"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.custom_snippets"),feature:S.GY.custom_css}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.zapier"),feature:S.GY.zapier_token_automatic_creation}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.integrately"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.embed"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.white_labelling"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.moderation_automated"),feature:S.GY.automated_moderation}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.advanced_reporting"),feature:S.GY.advanced_reporting}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.color_themes"),basic:!1,professional:!0,business:!0,enterprise:!0}),(e={title:(0,o.t)("pricing_plans.feature.courses")},t.show_pro_grandfathered_for_courses?(0,n.jsx)(h,N(C({},e),{basic:!1,professional:!0,business:!0,enterprise:!0})):(0,n.jsx)(P,N(C({},e),{feature:S.GY.courses}))),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.conversion_tracking_code"),feature:S.GY.paywall_conversion_tracking_code}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.automated_workflows"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.custom_profile_fields"),feature:S.GY.profile_fields_enabled}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.sender_email_customization"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.affiliates"),feature:S.GY.affiliates}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.analytics_filtering"),feature:S.GY.analytics_filters})]})},I=r(57363),E=r(80171),T=function(e){var t=e.tooltipKey,r=e.tooltipProps;return(0,n.jsx)(E.T,{className:"flex items-center",content:(0,o.t)(t,r),children:(0,n.jsx)(I.JO,{type:"16-info",size:16,className:"ml-2"})})},L=function(e){var t=e.plan,r=e.feature,i=t.plan_feature_flags[r],a=t.legacy_limits_info[r],s=a&&a.is_legacy_limit,l=null==a?void 0:a.current_plan_value,u=(0,o.t)("settings.billing.".concat(r)),d=r===S.GY.max_member_count&&t.unlimited_members;return(0,n.jsxs)(c,{children:[d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{value:(0,o.t)("settings.billing.unlimited")}),(0,n.jsx)(T,{tooltipKey:"settings.billing.unlimited_members_tooltip",tooltipProps:{total:l,resource:u}})]}):(0,n.jsx)(k,{value:i}),s&&(0,n.jsx)(T,{tooltipKey:"settings.billing.legacy_limits_tooltip",tooltipProps:{total:l,resource:u}})]})},D=function(e){var t=e.featureFlagKeys,r=(0,u.x)().plans;return(0,n.jsx)(n.Fragment,{children:t.map(function(e){return(0,S.FV)(e)?null:(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(c,{children:(0,n.jsx)(p,{hideCheckIcon:!0,value:(0,o.t)("pricing_plans.feature.".concat(e)),className:"pr-5"})}),r.map(function(t){return(0,n.jsx)(L,{plan:t,feature:e},t.id)})]},e)})})},M=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.community"),children:[(0,n.jsx)(D,{featureFlagKeys:[S.GY.max_member_count,S.GY.max_admin_count,S.GY.max_moderator_count,S.GY.max_space_count]}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.transaction_fees"),feature:S.GY.payments_fee_percentage,suffix:"%"}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.total_storage"),basic:(0,o.t)("pricing_plans.feature.total_storage_basic"),professional:(0,o.t)("pricing_plans.feature.total_storage_professional"),business:(0,o.t)("pricing_plans.feature.total_storage_business"),enterprise:(0,o.t)("pricing_plans.feature.total_storage_enterprise")}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.admin_api_requests"),business:(0,o.t)("pricing_plans.feature.admin_api_requests_business"),enterprise:(0,o.t)("pricing_plans.feature.admin_api_requests_enterprise")})]})},R=function(e){return function(t){return t.tier===e}},B=function(e,t){return function(r){if(Array.isArray(null==r?void 0:r.plan_addons_info)){var n=r.plan_addons_info.find(function(t){return Object.hasOwn(t,e)});if(n&&n[e])return n[e][t]}}},F=function(e,t,r){var n=e.find(R(t));if(!n)return"";var i=B(r,"value")(n);return null!=i?i:""},z=function(e,t,r){var n=e.find(R(t));if(!n)return"";var i=B(r,"monthly_amount")(n);return null!=i?i:""},U=r(6082),Z=r(51169),G=function(){var e=(0,u.x)(),t=e.plans;if(e.isPlansLoading)return(0,n.jsx)(Z.a,{center:!0});var r="settings.billing.add_ons.manage",i="settings.billing.add_ons.included";return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.community"),children:[(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.manage.admins"),professional:(0,o.t)("".concat(r,".admins_description"),{amount:z(t,U.Gb.professional,S.GY.max_admin_count)}),business:(0,o.t)("".concat(r,".admins_description"),{amount:z(t,U.Gb.business,S.GY.max_admin_count)}),enterprise:(0,o.t)("".concat(r,".admins_description"),{amount:z(t,U.Gb.enterprise,S.GY.max_admin_count)})}),(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.manage.moderators"),professional:(0,o.t)("".concat(r,".moderators_description"),{quantity:F(t,U.Gb.professional,S.GY.max_moderator_count),amount:z(t,U.Gb.professional,S.GY.max_moderator_count)}),business:(0,o.t)("".concat(r,".moderators_description"),{quantity:F(t,U.Gb.business,S.GY.max_moderator_count),amount:z(t,U.Gb.business,S.GY.max_moderator_count)}),enterprise:(0,o.t)("".concat(r,".moderators_description"),{quantity:F(t,U.Gb.enterprise,S.GY.max_moderator_count),amount:z(t,U.Gb.enterprise,S.GY.max_moderator_count)})}),(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.manage.spaces"),professional:(0,o.t)("".concat(r,".spaces_description"),{quantity:F(t,U.Gb.professional,S.GY.max_space_count),amount:z(t,U.Gb.professional,S.GY.max_space_count)}),business:(0,o.t)("".concat(r,".spaces_description"),{quantity:F(t,U.Gb.business,S.GY.max_space_count),amount:z(t,U.Gb.business,S.GY.max_space_count)}),enterprise:(0,o.t)("".concat(r,".spaces_description"),{quantity:F(t,U.Gb.enterprise,S.GY.max_space_count),amount:z(t,U.Gb.enterprise,S.GY.max_space_count)})}),(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.manage.email_white_labeling"),professional:(0,o.t)("settings.billing.add_ons.manage.email_white_labeling_description",{amount:z(t,U.Gb.professional,S.GY.email_whitelist)}),business:(0,o.t)(i),enterprise:(0,o.t)(i)}),(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.manage.profile_fields"),professional:(0,o.t)("settings.billing.add_ons.manage.profile_fields_description",{amount:z(t,U.Gb.professional,S.GY.profile_fields_enabled)}),business:(0,o.t)(i),enterprise:(0,o.t)(i)})]})},q=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.community_ai"),children:[(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.content_co_pilot"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.automated_transcriptions"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.activity_scores"),basic:!1,professional:!1,business:!0,enterprise:!0})]})},V="grid-cols-".concat(5),H="pricing_plans.annual_only",W=function(e){var t=e.children;return(0,n.jsx)("div",{className:"grid ".concat(V),children:(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(a.Z.TitleSm,{weight:"bold",children:t})})})},Q=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.live_streams"),children:[(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.live_stream_max_spectator_capacity"),feature:S.GY.live_stream_max_spectator_capacity}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.live_room_participants"),feature:S.GY.live_room_participants_capacity}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.live_stream_hosts"),feature:S.GY.live_stream_max_host_capacity}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.live_stream_monthly_stream_hours"),feature:S.GY.live_stream_monthly_stream_hours}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.live_stream_recording_storage"),professional:(0,o.t)("pricing_plans.feature.live_stream_recording_storage_professional"),enterprise:(0,o.t)("pricing_plans.feature.live_stream_recording_storage_enterprise"),business:(0,o.t)("pricing_plans.feature.live_stream_recording_storage_business")})]})},J=function(){var e=(0,u.x)(),t=e.plans;return e.isPlansLoading?(0,n.jsx)(Z.a,{center:!0}):(0,n.jsxs)(v,{sectionName:(0,o.t)("settings.billing.add_ons.live_stream.title"),children:[(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.live_stream.live_attendees"),professional:(0,o.t)("settings.billing.add_ons.live_stream.live_attendees_professional",{amount:z(t,U.Gb.professional,S.GY.live_stream_max_spectator_capacity)}),enterprise:(0,o.t)("settings.billing.add_ons.live_stream.live_attendees_enterprise"),business:(0,o.t)("settings.billing.add_ons.live_stream.live_attendees_business",{amount:z(t,U.Gb.business,S.GY.live_stream_max_spectator_capacity)})}),(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.live_stream.hours"),professional:(0,o.t)("settings.billing.add_ons.live_stream.hours_professional",{amount:z(t,U.Gb.professional,S.GY.live_stream_monthly_stream_hours)}),enterprise:(0,o.t)("settings.billing.add_ons.live_stream.hours_enterprise",{amount:z(t,U.Gb.enterprise,S.GY.live_stream_monthly_stream_hours)}),business:(0,o.t)("settings.billing.add_ons.live_stream.hours_business",{amount:z(t,U.Gb.business,S.GY.live_stream_monthly_stream_hours)})}),(0,n.jsx)(h,{title:(0,o.t)("settings.billing.add_ons.live_stream.video_storage"),professional:(0,o.t)("settings.billing.add_ons.live_stream.video_storage_professional",{amount:z(t,U.Gb.professional,S.GY.live_stream_recording_hours)}),enterprise:(0,o.t)("settings.billing.add_ons.live_stream.video_storage_enterprise",{amount:z(t,U.Gb.enterprise,S.GY.live_stream_recording_hours)}),business:(0,o.t)("settings.billing.add_ons.live_stream.video_storage_business",{amount:z(t,U.Gb.business,S.GY.live_stream_recording_hours)})})]})},K=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.services"),children:[(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.concierge"),basic:!1,professional:!1,enterprise:(0,o.t)(H),business:!1}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.support_dedicated"),basic:!1,professional:!1,enterprise:(0,o.t)(H),business:!1}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.business_review"),basic:!1,professional:!1,enterprise:(0,o.t)(H),business:!1}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.payments_migration"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.courses_migration"),basic:!1,professional:!1,enterprise:(0,o.t)(H),business:(0,o.t)(H)})]})},$=function(){var e=[{title:(0,o.t)("pricing_plans.feature.facebook"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.twitter"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.memberstack"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.memberspace"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.teachable"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.memberful"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.wordpress"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.bubble"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.outseta"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.auth0"),basic:!1,professional:!1,business:!1,enterprise:!0},{title:(0,o.t)("pricing_plans.feature.custom_oauth"),basic:!1,professional:!1,business:!1,enterprise:!0}];return(0,n.jsx)(v,{sectionName:(0,o.t)("pricing_plans.section.sso"),children:e.map(function(e){var t,r;return(0,i.createElement)(h,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={key:e.title},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})},X=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.support"),children:[(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.circle_community"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.support_basic"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.support_priority"),basic:!1,professional:!1,business:!1,enterprise:(0,o.t)(H)}),(0,n.jsx)(h,{title:(0,o.t)("pricing_plans.feature.beta_features"),basic:!1,professional:!1,business:!1,enterprise:(0,o.t)(H)})]})},Y=function(){return(0,n.jsxs)(v,{sectionName:(0,o.t)("pricing_plans.section.workflows"),children:[(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.workflows.automations"),feature:S.GY.max_dynamic_workflows_count}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.workflows.scheduled_workflows"),feature:S.GY.max_scheduled_workflows_count}),(0,n.jsx)(P,{title:(0,o.t)("pricing_plans.feature.workflows.bulk_actions"),feature:S.GY.max_bulk_action_workflows_count,suffix:(0,o.t)("pricing_plans.per_month")})]})},ee=r(39905),et="pricing_plans.plan_settings.plan_selection.features",er=function(){return(0,n.jsxs)("div",{className:"mb-4 grid grid-cols-4",children:[(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,o.t)([et,"usage"])}),(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,o.t)([et,"tiers","professional"])}),(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,o.t)([et,"tiers","business"])}),(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,o.t)([et,"tiers","enterprise"])})]})};function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let ei=function(){var e,t=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return en(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],a=t[1];return(0,n.jsxs)("div",{className:"hidden sm:block",children:[(0,n.jsx)("div",{className:"my-12 flex justify-center",children:(0,n.jsxs)(ee.z,{variant:"secondary",onClick:function(){return a(function(e){return!e})},className:"mb-6 !text-base","aria-expanded":r,"aria-controls":"features-content",large:!0,children:[(0,o.t)("pricing_plans.plan_settings.plan_selection.features.toggle_text"),(0,n.jsx)(I.JO,{type:r?"20-chevron-up":"20-chevron-down",className:"ml-1"})]})}),r&&(0,n.jsxs)("div",{id:"features-content",children:[(0,n.jsx)(W,{children:(0,o.t)(["pricing_plans.plan_settings.plan_selection.features","title"])}),(0,n.jsx)(er,{}),(0,n.jsx)(M,{}),(0,n.jsx)(Y,{}),(0,n.jsx)(Q,{}),(0,n.jsx)(A,{}),(0,n.jsx)(q,{}),(0,n.jsx)(g,{}),(0,n.jsx)(W,{children:(0,o.t)("settings.billing.add_ons.title")}),(0,n.jsx)(G,{}),(0,n.jsx)(O,{}),(0,n.jsx)(J,{}),(0,n.jsx)($,{}),(0,n.jsx)(X,{}),(0,n.jsx)(K,{})]})]})}},14356:function(e,t,r){"use strict";r.d(t,{I:()=>l});var n=r(85893),i=r(760),o=r(57363),a=r(1168),s=r(41553),l=function(e){var t=e.feature,r=e.isHighlighted,l=e.color,c=e.highlightColor,u=e.LabelComponent,d=void 0===u?s.Z.BodySm:u;return(0,n.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[r?(0,n.jsx)(o.JO,{type:"16-star-fill",size:16,className:(0,a.A)("mr-1",r?void 0===c?"text-blue-highlight":c:""),useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0}):(0,n.jsx)(i.n,{}),(0,n.jsx)(d,{color:void 0===l?"text-slate-700 dark:text-slate-300":l,children:t},t)]},t)}},52463:function(e,t,r){"use strict";r.d(t,{R:()=>z});var n=r(85893),i=r(67294),o=r(13411),a=r(84326),s=r(6082),l=r(24869),c=r(27820),u=r(57363),d=r(76896),f=r(41553),p=r(80932),m=r(1168),b=r(17617),h=r(24330),y=r(99595),v="pricing_plans.plan_settings.plan_selection.plan_selector",g=function(e){var t=5*Math.round(Math.abs(parseInt(e.replace("%",""),10))/5);return"".concat(t,"%")},_=function(e){var t=e.plan;return t.annual_discount_amount_with_currency?(0,n.jsxs)(f.Z.BodyXs,{weight:"light",children:[(0,a.t)("".concat(v,".annual_amount"),{dollar_amount:t.annual_base_amount_with_currency}),(0,n.jsx)("span",{className:"text-green-success-dark ml-1 font-semibold",children:t.fetch_discount?(0,a.t)("".concat(v,".saved_dollar_amount_with_percentage"),{dollar_amount:t.annual_discount_amount_with_currency,percentage:g(t.fetch_discount)}):(0,a.t)("".concat(v,".saved_dollar_amount"),{dollar_amount:t.annual_discount_amount_with_currency})})]}):null},x=r(70442),j=r(79869),w=r(39905);function O(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,s,"next",e)}function s(e){O(o,n,i,a,s,"throw",e)}a(void 0)})}}function k(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var P=function(e){var t,r,i,o=e.plan,s=(0,c.x)(),u=s.renewSubscription,d=s.updateSubscription,f=s.refetchPlans,m=s.refetchCurrentPlan,b=(0,x.k6)(),h=(0,j.w)(),y=(0,l.E)(),v=y.shouldShowProration,g=y.isCommunityOnTrial,_=function(){return o.professional_grandfathered_id||o.id},O=function(){f(),m()},P=!g&&!v(o),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return S(function(){return k(this,function(t){switch(t.label){case 0:return[4,h.show({planId:_(),onSuccess:function(){return S(function(){return k(this,function(e){switch(e.label){case 0:return b.push("/feed"),[4,h.hide()];case 1:return e.sent(),[2]}})})()},successButtonLabel:(0,a.t)("pricing_plans.change_plan.go_to_community"),showPlanDetails:P,onCloseModal:O,couponId:e})];case 1:return t.sent(),[2]}})})()};if((0,p.Kj)(o.plan_action))return(0,n.jsx)("button",{type:"button",onClick:function(){window.open("mailto:support@circle.so","emailWindow")},children:(0,a.t)("pricing_plans.actions.contact_cx")});var N=(0,a.t)((t=o.plan_action)===p.$v.upgrade||t===p.$v.downgrade?"pricing_plans.new_plans_page_actions.".concat(t):"pricing_plans.actions.".concat(t),{plan_name:o.display_name}),A=o.plan_action===p.$v.upgrade?"bg-gradient-to-tl from-[#471AFF] to-[#509AF0] text-white dark:bg-gradient-to-tl dark:from-white dark:to-white dark:text-black":"";return(0,n.jsx)(w.z,{variant:(r=o.plan_action,(0,p.sR)(r)||(0,p.NU)(r)?"primary":(0,p.q2)(r)||(0,p.s5)(r)||(0,p.sq)(r)?"circle":(0,p._D)(r)?"secondary":void 0),large:!0,onClick:(i=o.plan_action,(0,p.sR)(i)||(0,p.NU)(i)||(0,p._D)(i)?function(){return S(function(){return k(this,function(e){switch(e.label){case 0:return[4,C()];case 1:return e.sent(),[2]}})})()}:(0,p.q2)(i)?function(){d(_())}:(0,p.s5)(i)?function(){u(_())}:(0,p.sq)(i)?function(){return null}:(0,p.KC)(i)?function(){return S(function(){var e;return k(this,function(t){switch(t.label){case 0:return[4,C(null==(e=o.plan_coupon)?void 0:e.id)];case 1:return t.sent(),[2]}})})()}:void 0),disabled:(0,p.sq)(o.plan_action),"data-testid":"submit-button-".concat(o.plan_action),className:A,children:N})},C=r(14356),N="pricing_plans.plan_settings.plan_selection.plan_selector.plan_card.tier_highlights",A={basic:[(0,a.t)("".concat(N,".basic.rich_member_profiles")),(0,a.t)("".concat(N,".basic.search_member_profiles")),(0,a.t)("".concat(N,".basic.discussions")),(0,a.t)("".concat(N,".basic.events")),(0,a.t)("".concat(N,".basic.paid_memberships")),(0,a.t)("".concat(N,".basic.weekly_digest")),(0,a.t)("".concat(N,".basic.gamification")),(0,a.t)("".concat(N,".basic.custom_domain"))],professional:[(0,a.t)("".concat(N,".professional.courses")),(0,a.t)("".concat(N,".professional.website_builder")),(0,a.t)("".concat(N,".professional.live_streams")),(0,a.t)("".concat(N,".professional.live_rooms")),(0,a.t)("".concat(N,".professional.unlimited_members")),(0,a.t)("".concat(N,".professional.custom_branding")),(0,a.t)("".concat(N,".professional.reporting_and_analytics")),(0,a.t)("".concat(N,".professional.custom_code_snippets")),(0,a.t)("".concat(N,".professional.conversion_tracking"))],business:[(0,a.t)("".concat(N,".business.workflows")),(0,a.t)("".concat(N,".business.custom_profile_fields")),(0,a.t)("".concat(N,".business.headless_member_api")),(0,a.t)("".concat(N,".business.admin_api")),(0,a.t)("".concat(N,".business.branded_email_notifications")),(0,a.t)("".concat(N,".business.content_co_pilot")),(0,a.t)("".concat(N,".business.automated_transcriptions")),(0,a.t)("".concat(N,".business.activity_scores"))],enterprise:[(0,a.t)("".concat(N,".enterprise.ai_agents")),(0,a.t)("".concat(N,".enterprise.ai_workflows")),(0,a.t)("".concat(N,".enterprise.unlimited_workflows")),(0,a.t)("".concat(N,".enterprise.custom_sso")),(0,a.t)("".concat(N,".enterprise.priority_support")),(0,a.t)("".concat(N,".enterprise.advanced_analytics")),(0,a.t)("".concat(N,".enterprise.lower_transaction_fees")),(0,a.t)("".concat(N,".enterprise.sandbox_community")),(0,a.t)("".concat(N,".enterprise.up_to_10_admins_and_100_moderators")),(0,a.t)("".concat(N,".enterprise.concierge_onboarding")),(0,a.t)("".concat(N,".enterprise.dedicated_csm"))]},I=function(e){var t=e.plan,r=e.shouldHighlightFeatures;if(t.tier===s.Gb.plus)return null;var i=A[t.tier];return(0,n.jsx)(n.Fragment,{children:i.map(function(e){return(0,n.jsx)(C.I,{feature:e,isHighlighted:r},e)})})},E="pricing_plans.plan_settings.plan_selection.plan_selector.plan_card",T=function(e){var t=e.plan,r=(0,l.E)(),o=r.currentPlanTier,c=!!(r.isCommunityOnTrial||o&&(0,s.sR)(o,t.tier)),u=(0,i.useMemo)(function(){var e;return t.tier===s.Gb.basic?(0,a.t)("".concat(E,".core_features")):t.tier===s.Gb.professional?(0,a.t)("".concat(E,".professional_features")):(0,a.t)("".concat(E,".everything_plus"),{tier:(0,s.fm)(null!=(e=(0,s._q)(t.tier))?e:"")})},[t]);return(0,n.jsxs)("div",{className:"mt-6 px-0 sm:px-11",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(f.Z.LabelXs,{weight:"semibold",children:u})}),(0,n.jsx)("div",{className:(0,m.A)("grid auto-cols-max grid-flow-col gap-x-10 gap-y-2",{"grid-rows-11 md:grid-rows-6":t.tier===s.Gb.enterprise,"grid-rows-9 md:grid-rows-5":t.tier===s.Gb.professional,"grid-rows-8 md:grid-rows-4":t.tier===s.Gb.basic||t.tier===s.Gb.business}),children:(0,n.jsx)(I,{plan:t,shouldHighlightFeatures:c})})]}),(0,n.jsx)("div",{className:"my-6",children:(0,n.jsx)(P,{plan:t})})]})};function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var D="pricing_plans.plan_settings.plan_selection.plan_selector",M=function(e){var t,r=e.plan,s=e.selected,l=e.onClick,c=(0,p.sq)(r.plan_action),u=(0,b.WJ)(),d=(0,i.useRef)(null),v=(t=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return L(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],x=v[1];(0,i.useEffect)(function(){s&&d.current?x(d.current.scrollHeight):x(0)},[s]);var j=(0,n.jsx)(f.Z.BodySm,{weight:"font-normal",children:(0,a.t)("".concat(D,".tier_descriptions.").concat(r.tier))});return(0,n.jsxs)(o.E.Option,{value:r.id,className:(0,m.A)("border-primary cursor-pointer border-b p-4 last:border-none sm:p-6",s?"bg-gray-50 dark:bg-gray-900":"bg-primary"),onClick:l,children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex items-start",children:(0,n.jsx)(y.Y,{value:r.id,label:"",checked:s})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,n.jsx)(f.Z.LabelLg,{weight:"semibold",children:r.display_name}),c&&(0,n.jsx)(h.g,{label:(0,a.t)("".concat(D,".current_plan")),square:!0})]}),u&&(0,n.jsx)("div",{className:"mt-2 hidden sm:block",children:j})]})]})}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1 align-middle",children:[(0,n.jsx)(f.Z.TitleMd,{weight:"font-bold",children:r.display_base_monthly_amount}),(0,n.jsx)(f.Z.BodyMd,{weight:"font-normal",color:"text-slate-700 dark:text-slate-300",size:"text-sm",children:(0,a.t)("".concat(D,".monthly_interval"))})]}),u&&(0,n.jsx)("div",{className:"hidden sm:block",children:(0,n.jsx)(_,{plan:r})})]})]}),(0,n.jsx)("div",{ref:d,className:"overflow-hidden duration-300 ease-in-out",style:{height:"".concat(g,"px")},children:(0,n.jsxs)("div",{className:"px-7 sm:px-0",children:[!u&&(0,n.jsxs)("div",{className:"mb-4 mt-2 block sm:hidden",children:[(0,n.jsx)("div",{children:(0,n.jsx)(_,{plan:r})}),(0,n.jsx)("div",{className:"mt-4",children:j})]}),(0,n.jsx)(T,{plan:r})]})})]},r.id)};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||F(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}var z=function(){var e=(0,c.x)(),t=e.plans,r=e.selectedPlan,p=e.setSelectedPlanTier,m=(0,l.E)(),b=m.isCommunityOnPaidPlan,h=m.currentPlanTier,y=m.isCommunityOnTrial,v=B((0,i.useState)(!1),2),g=v[0],_=v[1],x=(0,i.useRef)(null),j=B((0,i.useState)(0),2),w=j[0],O=j[1],S=(0,i.useMemo)(function(){return((function(e){if(Array.isArray(e))return R(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||F(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse()},[t]),k=(0,i.useMemo)(function(){if(g)return{visiblePlans:S,hiddenPlans:[]};var e=function(e){return y?e.tier===s.Gb.basic:!!b&&!!h&&(0,s._D)(h,e.tier)};return{visiblePlans:S.filter(function(t){return!e(t)}),hiddenPlans:S.filter(function(t){return e(t)})}},[S,g,y,b,h]),P=k.visiblePlans,C=k.hiddenPlans;if((0,i.useEffect)(function(){g&&x.current?O(x.current.scrollHeight):O(0)},[g,C.length]),0===t.length)return(0,n.jsx)(d.gi,{variant:"plan-selector",cardCount:3});var N=g?"see_less_plans":"see_more_plans";return(0,n.jsx)(o.E,{value:null==r?void 0:r.id,children:(0,n.jsx)("div",{className:"mt-4 flex w-full justify-center",children:(0,n.jsxs)("ul",{className:"border-primary flex w-full flex-col overflow-hidden rounded-2xl border bg-white",children:[P.map(function(e){return(0,n.jsx)(M,{plan:e,selected:e.tier===(null==r?void 0:r.tier),onClick:function(){return p(e.tier)}},e.id)}),C.length>0&&(0,n.jsx)("div",{ref:x,className:"overflow-hidden duration-300 ease-in-out",style:{height:"".concat(w,"px")},children:C.map(function(e){return(0,n.jsx)(M,{plan:e,selected:e.tier===(null==r?void 0:r.tier),onClick:function(){return p(e.tier)}},e.id)})}),C.length>0&&(0,n.jsxs)("button",{type:"button",className:"bg-primary flex w-full cursor-pointer flex-row justify-start gap-0 px-6 py-4",onClick:function(){return _(!g)},children:[(0,n.jsx)(f.Z.BodyXs,{weight:"font-medium",children:(0,a.t)("".concat("pricing_plans.plan_settings.plan_selection.plan_selector",".").concat(N))}),(0,n.jsx)(u.JO,{type:g?"16-chevron-up":"16-chevron-down",size:12,className:"ml-2"})]})]})})})}},91712:function(e,t,r){"use strict";r.d(t,{o:()=>p});var n=r(85893),i=r(84326),o=r(79869),a=r(94375),s=r(48097),l=r(80932),c=r(57363),u=r(41553),d=r(39905),f=r(41813),p=function(e){var t=e.currentPlan,r=null==t?void 0:t.scheduled_downgrade_metadata,p=null==r?void 0:r.plan_downgrade,m=p?a.P6.PLAN_DOWNGRADE:a.P6.INTERVAL_DOWNGRADE,b="pricing_plans.downgrade_schedule_banner.".concat(m),h=(0,o.w)();if(!(null==r?void 0:r.next_plan))return null;var y=(0,l.Sy)(r.next_plan).toLowerCase(),v=r.switch_date,g=r.annual_discount_amount_with_currency;return(0,n.jsx)(f.q,{children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"mr-2 mt-[2px]",children:(0,n.jsx)(c.JO,{type:"information-outline",size:24})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(u.Z.LabelMd,{color:"text-default",weight:"semibold",children:(0,i.t)([b,"title"],{nextPlanName:y,switchDate:v})})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(u.Z.BodySm,{color:"text-default",children:(0,i.t)([b,"body"],p?{nextPlanName:(0,l.Vp)(r.next_plan.tier),currentPlanName:(0,l.Vp)(t.tier)}:{discountAmount:g})})}),(0,n.jsx)(d.z,{variant:"secondary",className:"border-secondary hover:bg-secondary rounded-full border bg-white px-4 py-2 text-sm font-semibold text-black shadow-sm",onClick:function(){h.show({source:s.V.SCHEDULED_DOWNGRADE_BANNER,showPlanDetails:!1})},children:(0,i.t)([b,"cta_button"])})]})]})})}},41813:function(e,t,r){"use strict";r.d(t,{q:()=>i});var n=r(85893);r(67294);var i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"dark:bg-primary dark:border-primary rounded-2xl border border-amber-200 bg-amber-100 p-6","data-testid":"plan-cancelled",children:t})}},37744:function(e,t,r){"use strict";r.d(t,{K:()=>f});var n=r(85893),i=r(84326),o=r(41342),a=r(32050),s=r(24330),l=r(41553),c=r(9089),u=r(47075),d=function(e){var t=e.name,r=e.email,o=e.image;return(0,n.jsxs)("div",{className:"border-primary inline-block rounded-lg border",children:[(0,n.jsx)("img",{loading:"lazy",alt:(0,i.t)("settings.billing.account_manager.alt",{name:t}),src:o,className:"rounded-t-lg"}),(0,n.jsxs)("div",{className:"p-5",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:t})}),(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelMd,{children:(0,i.t)("settings.billing.account_manager.contact")})}),(0,n.jsx)("div",{className:"pt-6",children:(0,n.jsx)(u.Q,{href:"mailto:".concat(r),variant:"circle",children:(0,i.t)("settings.billing.account_manager.message")})})]})]})},f=function(e){var t=e.isExpired,r=(0,o.wh)().currentCommunity.csm;return(0,n.jsxs)("div",{className:"bg-primary h-full pb-10",children:[(0,n.jsxs)("div",{className:"bg-secondary px-5 py-20 xl:px-40",style:{backgroundColor:"#191B1F"},children:[(0,n.jsx)(s.g,{label:(0,i.t)("settings.billing.your_membership"),inverted:!0,square:!0}),(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.TitleXxl,{color:"text-white",children:(0,i.t)("settings.billing.plans.plus")})})]}),t&&(0,n.jsx)("div",{className:"mt-20 px-5 xl:flex xl:px-40",children:(0,n.jsx)(a.b,{className:"!w-full",title:(0,i.t)("settings.billing.plans.errors.canceled_plus_subscription"),type:"warning"})}),(0,n.jsxs)("div",{className:"mt-20 px-5 xl:flex xl:px-40",children:[(0,n.jsx)("div",{className:"grow pr-6",children:(0,n.jsx)(c.K,{showBillingDetails:!t,forceFromSubscription:!1})}),r&&(0,n.jsx)("div",{children:(0,n.jsx)(d,{name:r.name,email:r.email,image:r.profile_image})})]})]})}},64506:function(e,t,r){"use strict";r.d(t,{l:()=>s});var n=r(85893),i=r(18267),o=r(86396),a=r(27820),s=function(){var e=(0,a.x)(),t=e.shouldRenderBillingCurrency,r=e.billingCurrency,s=(0,i.I)();return t?(0,n.jsx)(o.v,{billingCurrency:r,onCurrencyChange:function(e){return s("billing_currency",e)},useCurrencySymbol:!0}):null}},99601:function(e,t,r){"use strict";r.d(t,{u:()=>f});var n=r(85893),i=r(84326),o=r(1168),a=r(41342),s=r(80932),l=r(18267),c=r(24330),u=function(e){var t=e.interval,r=e.isSelected,a=e.label,u=(0,l.I)(),d=r(t)?"bg-primary !text-dark ":"text-tertiary",f=t===s.ff.year;return(0,n.jsxs)("button",{onClick:function(e){e.preventDefault(),u("billing_cycle",t)},className:(0,o.A)("hover:text-darkest text-tertiary shadow-xs flex flex-row rounded-lg px-2 py-1 text-center align-baseline font-medium",d),"aria-pressed":r(t),type:"button",children:[a,f&&(0,n.jsx)(c.g,{square:!0,label:(0,i.t)("pricing_plans.billing_cycle.annual_discount"),className:"ml-2 !border-none !bg-[#22C55E1A] !text-[#15803D]"})]})},d=r(27820),f=function(){var e=(0,d.x)(),t=e.billingCycle,r=e.currentPlan,l=(0,a.wh)().currentCommunity,c=function(e){return!t&&r?!(null==l?void 0:l.is_on_trial):t===e};return(0,s.Km)(r)?(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:(0,o.A)("bg-secondary mt-0 flex w-full flex-row space-x-1 rounded-lg p-1 text-sm"),children:[(0,n.jsx)(u,{interval:s.ff.year,isSelected:c,label:(0,i.t)("pricing_plans.billing_cycle.annually")}),(0,n.jsx)(u,{interval:s.ff.month,isSelected:c,label:(0,i.t)("pricing_plans.billing_cycle.monthly")})]})}):(0,n.jsx)("div",{})}},760:function(e,t,r){"use strict";r.d(t,{n:()=>o});var n=r(85893),i=r(57363),o=function(){return(0,n.jsx)("div",{className:"mr-2",children:(0,n.jsx)(i.JO,{type:"check",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"text-green-success"})})}},27820:function(e,t,r){"use strict";r.d(t,{o:()=>g,x:()=>v});var n=r(85893),i=r(67294),o=r(70442),a=r(41342),s=r(6082),l=r(56664),c=r(13382),u=r(80932),d=r(35410),f=r(24869),p=r(3189),m=r(26307);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=(0,i.createContext)(void 0);y.displayName="PlansContext";var v=function(){var e=(0,i.useContext)(y);if(!e)throw Error("usePlans must be used within a PlansProvider");return e},g=function(e){var t,r,b=e.children,v=(0,o.TH)(),g=new URLSearchParams(v.search),_=g.get("billing_cycle"),x=g.get("billing_currency"),j=g.get("locale"),w=(0,p.D)(),O=w.currentPlan,S=w.isCurrentPlanLoading,k=w.refetchCurrentPlan,P=(0,f.E)(),C=P.isCommunityOnPaidPlan,N=P.isCommunityOnTrial,A=P.isExpiredTrial,I=P.canChooseCurrency,E=(0,a.wh)().experimentation,T=E.experiments,L=E.flags,D=(0,i.useCallback)(function(){return N||A?u.ff.year:!S&&O?O.interval:u.ff.year},[N,S,O,A]),M=h((0,i.useState)(null),2),R=M[0],B=M[1],F=h((0,i.useState)(null),2),z=F[0],U=F[1],Z=h((0,i.useState)(null),2),G=Z[0],q=Z[1],V=(0,d.K)(),H=V.renewSubscription,W=V.isRenewLoading,Q=V.updateSubscription,J=V.isUpdatingSubscription,K=(0,l.$)(),$=K.scheduleDowngrade,X=K.isSchedulingDowngrade,Y=(0,m.B)({billing_cycle:R,billing_currency:G,locale:z}),ee=Y.plans,et=Y.isPlansLoading,er=Y.refetchPlans;(0,i.useEffect)(function(){x?q(x):O&&q(null),j&&U(j),_&&(_===u.ff.month||_===u.ff.year)?B(_):O&&B(D())},[v,D,O]);var en=et||S,ei=ee.length>0&&!et?ee[0].currency:null,eo=I&&(!!x||ei===c.X.BRL.code.toLowerCase()),ea=ei||G,es=h((0,i.useState)(void 0),2),el=es[0],ec=es[1];(0,i.useEffect)(function(){if(ee.length&&!el){if(N||A){var e=ee.find(function(e){return(0,s.BD)(e.tier)});e&&ec(e.tier)}else if(C&&O&&!(0,s.kw)(O.tier)){var t=ee.find(function(e){return e.tier===(0,s.FZ)(O.tier)});t&&ec(t.tier)}}},[O,C,N,A,ee,el]);var eu=ee.find(function(e){return e.tier===el}),ed=!!(null==T?void 0:T.some(function(e){return"professional_price_test"===e.flag_name})),ef="object"==((t=null==L?void 0:L.professional_price_test)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)&&(null==L||null==(r=L.professional_price_test)?void 0:r.type)==="control",ep=ed&&ef&&R===u.ff.year?ee.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={annual_discount_amount_with_currency:"professional"===e.tier?"$120":e.annual_discount_amount_with_currency,fetch_discount:"professional"===e.tier?"-10%":e.fetch_discount},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}):ee;return(0,n.jsx)(y.Provider,{value:{plans:ep,isPlansLoading:et,selectedPlanTier:el,selectedPlan:eu,currentPlan:O,isCurrentPlanLoading:S,billingCycle:R,billingCurrency:ea,renewSubscription:H,isRenewLoading:W,shouldRenderBillingCurrency:eo,updateSubscription:Q,isUpdatingSubscription:J,refetchPlans:er,refetchCurrentPlan:k,isListingPlans:en,setSelectedPlanTier:ec,scheduleDowngrade:$,isSchedulingDowngrade:X},children:b})}},26307:function(e,t,r){"use strict";r.d(t,{B:()=>a});var n=r(88767),i=r(51630),o=r(32244),a=function(e){var t,r=e.billing_cycle,a=e.billing_currency,s=e.locale,l=(0,o.f)(),c=(0,n.useQuery)(["plans",r,a,s,l],function(){return i.Q2.fetchPlans({billing_cycle:r,billing_currency:a,locale:s,isPriceTestingEnabled:l})},{enabled:!!r,cacheTime:6e5,staleTime:6e4}),u=c.data,d=c.isLoading,f=c.error,p=c.refetch,m=c.isRefetching,b="month"===r?"year":"month";return(0,n.useQuery)(["plans",b,a,s,l],function(){return i.Q2.fetchPlans({billing_cycle:b,billing_currency:a,locale:s,isPriceTestingEnabled:l})},{enabled:!!r,cacheTime:6e5,staleTime:6e4}),{plans:null!=(t=null==u?void 0:u.plans)?t:[],isPlansLoading:d,errorFetchingPlans:f,refetchPlans:p,isRefetchingPlans:m}}},90597:function(e,t,r){"use strict";r.d(t,{k:()=>s});var n=r(65978),i=r(21523),o=r(56336),a=r(76810),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.t)(n.Ry()),r=t.page,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["page"]),l=Number(r)||1,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({status:o.MG},s,e),u={page:l,filter:c};"scheduled"===c.status&&(u.sort="scheduled_at");var d=(0,a.D)(u);return{posts:d.posts,postsCount:d.postsCount,isLoadingPosts:d.isLoadingPosts,filter:c,page:l}}},22205:function(e,t,r){"use strict";r.d(t,{C:()=>l,i:()=>c});var n=r(88767),i=r(93199),o=r(13532),a=r(66364);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l="archived-profile-fields",c=function(){return{getArchivedQueryOptions:(0,n.useQuery)(l,function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,i.UT)(o.av.profileFields.archivedList())]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},{select:function(e){return(0,a.fW)(e)}})}}},59520:function(e,t,r){"use strict";r.d(t,{K:()=>f,k:()=>m});var n=r(88767),i=r(84326),o=r(93199),a=r(13532),s=r(8054),l=r(60878),c=r(20176),u=r(66364);function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var f="page-profile-fields",p=function(e){var t=e.visible_profile_fields,r=e.hidden_profile_fields;return{visibleFields:(0,u.fW)(t),hiddenFields:(0,u.fW)(r)}},m=function(e){var t=e.currentPage,r=(0,n.useQueryClient)(),u=(0,l.pm)(),m=[f,t];return{getOptions:(0,n.useQuery)(m,function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,(0,o.UT)(a.av.profileFields.pageIndex(t))];case 1:if(!(e=r.sent()))return[2];return[2,p(e)]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})})()}),reorderFields:(0,n.useMutation)(function(e){var r=e.reorderedProfileFields,n=e.hideProfileField,i=e.unhideProfileField;return(0,o.Cu)(a.av.profileFields.pageFieldReorder(),{page_name:t,reordered_profile_fields:null==r?void 0:r.map(function(e){return e.id}),hide_profile_field_id:null==n?void 0:n.id,unhide_profile_field_id:null==i?void 0:i.id})},{onError:function(){u.error((0,i.t)("something_went_wrong"))},onSuccess:function(e){r.setQueryData(m,p(e)),r.invalidateQueries([(0,c.OT)()]),r.removeQueries(s.Wx)}})}}},20176:function(e,t,r){"use strict";r.d(t,{Gn:()=>b,OT:()=>p,Yw:()=>h});var n=r(88767),i=r(21835),o=r(93199),a=r(13532),s=r(71066),l=r(26239);function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var p=function(e){var t="PROFILE_FIELD_DETAIL";return e?[t,e]:[t]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return("headline"===t?Object.values(s.Nd):Object.values(s.Nd).filter(function(e){return e!==s.Nd.COMMUNITY_VIEW})).map(function(t){var r=e.find(function(e){return e.name===t});return r?f(d({},r),{visible:r.visible}):{name:t,visible:!0}})},b=function(e){var t,r;return f(d({},e),(u(r={},l.PX[l.Z9.SELECT].CHOICES_ATTRIBUTES,e.choices),u(r,l.PX[l.Z9.NUMBER].NUMBER_OPTIONS,e.number_options),u(r,l.k_,m(e.pages,e.key)),u(r,l.xg.HIDDEN,null==(t=e.pages)?void 0:t.every(function(e){return!e.visible})),r))},h=function(e){var t=e.fieldId;return{getOptions:(0,n.useQuery)(p(t),function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return(0,i.Z)(t,"Field ID is required"),[2,(0,o.UT)(a.av.profileFields.detail(t))]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})})()},{select:function(e){return b(e)},enabled:!!t})}}},66364:function(e,t,r){"use strict";r.d(t,{Eu:()=>_,fW:()=>g,or:()=>x});var n=r(96486),i=r(88767),o=r(84326),a=r(37882),s=r(93199),l=r(13532),c=r(8054),u=r(60878),d=r(26239),f=r(59520),p=r(20176);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function h(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})}}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){if(e)return e.map(p.Gn)},_="profile-fields",x=function(){var e=(0,u.pm)(),t=(0,i.useQueryClient)(),r=(0,i.useQuery)(_,function(){return h(function(){return v(this,function(e){switch(e.label){case 0:return[4,(0,s.UT)(l.av.profileFields.index())];case 1:return[2,g(e.sent())]}})})()}),m=(0,i.useMutation)(function(e){return(0,s.Cu)(l.av.profileFields.index(),e)},{onSuccess:function(){return h(function(){return v(this,function(e){switch(e.label){case 0:return[4,r.refetch()];case 1:return e.sent(),[4,t.invalidateQueries(f.K)];case 2:return e.sent(),[4,t.invalidateQueries(a.d)];case 3:return e.sent(),t.removeQueries(c.Wx),[2]}})})()},onError:function(t){var r;e.error(null!=(r=t.errorDetails)?r:t.message)}}).mutateAsync,b=(0,i.useMutation)(function(e){var t=e.id,r=e.payload;return(0,s.gN)(l.av.profileFields.detail(t),r)},{onSuccess:function(e){return h(function(){return v(this,function(n){switch(n.label){case 0:return[4,r.refetch()];case 1:return n.sent(),[4,t.invalidateQueries(a.d)];case 2:return n.sent(),t.removeQueries(f.K),t.removeQueries(c.Wx),[4,t.invalidateQueries((0,p.OT)(e.id))];case 3:return n.sent(),[2]}})})()},onError:function(t){e.error(t.message)}}).mutateAsync,x=function(e){var t=e[d.AZ.FIELD_TYPE];return Object.values(d.PX[t])},j=function(e){var t=x(e),r=y(d.Yp).concat(["pages_attributes"],y(t));return(0,n.pick)(e,r)};return{getOptions:r,onNewProfileField:function(t,r){m(j(t),{onSuccess:function(){e.success((0,o.t)("profile_fields.field_modal.success_message")),r()}})},onEditProfileField:function(t,r,n){b({id:t,payload:j(r)},{onSuccess:function(){e.success((0,o.t)("changes_saved")),n()}})}}}},75489:function(e,t,r){"use strict";r.d(t,{s:()=>n});var n=["/settings","/audience/manage","/members/invite","/members/invitation_links","/members/onboarding","/members/bulk_import","/members/edit","/members/profile_fields","/settings/members/activity_logs"]},28998:function(e,t,r){"use strict";r.d(t,{Gg:()=>f,L8:()=>c,V6:()=>u,hE:()=>d});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(43445);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var c=20,u="segments",d="all",f=function(e){var t,r,i,f,p,m,b=e.perPage,h=void 0===b?c:b,y=e.initialPage,v=void 0===y?1:y,g=e.options,_=[u,d,h,v],x=(0,a.useInfiniteQuery)(_,function(e){var t=e.pageParam,r=void 0===t?v:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,per_page:h};return s.W.list({params:i})},l({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===g?{}:g)),j=(0,n.useMemo)(function(){var e;return(null==(e=x.data)?void 0:e.pages)||[]},[null==(i=x.data)?void 0:i.pages]),w=(null==(f=j[0])?void 0:f.per_page)||h,O=null!=(m=null==(p=j[0])?void 0:p.count)?m:0,S=(0,n.useMemo)(function(){return o()(j.map(function(e){return e.records}))},[j]);return t=l({},x),r=r={queryKey:_,segments:S,pageSize:w,pages:j,count:O},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},63833:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a=r(84326),s=function(e){var t=e.maxWidth,r=e.className,i=e.children;return(0,n.jsx)("main",{"aria-label":(0,a.t)("main_content"),className:o()("settings-app text-dark mx-auto p-4 lg:px-9 lg:py-12",{md:"max-w-4xl",lg:"max-w-[1152px]",xl:"max-w-8xl",none:"max-w-none"}[void 0===t?"md":t]||"",r),children:i})}},71462:function(e,t,r){"use strict";r.d(t,{b:()=>p});var n=r(85893),i=r(78152),o=r(18083),a=r(864),s=r(89424),l=r(52804),c=r(72171),u=r(41342),d=r(29378);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var p=function(e){var t=e.pageTitle,r=e.layoutConfigProps,p=e.pageMetaProps,m=e.rightContent,b=e.leftContent,h=e.filters,y=e.headline,v=e.hasBorder,g=e.children,_=window.innerWidth<=768,x=(0,u.wh)().currentCommunity,j=(0,d.Aq)(x);return(0,s.$)(_?".no-header:not(#canvas-header-preview .no-header)":".header__inside:not(#canvas-header-preview .header__inside)"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.S,f({title:t},p)),(0,n.jsx)(a.y,f({disableRightSidebar:!1},r)),!j&&(0,n.jsxs)(l.n,{children:[(0,n.jsx)(o.b,{leftContent:b||(0,n.jsx)(c.y,{children:t}),rightContent:m,filters:h,headline:y,hasBorder:v}),g]})]})}},35985:function(e,t,r){"use strict";r.d(t,{N:()=>c});var n=r(85893),i=r(67294),o=r(84326),a=r(27373),s=r(41553),l=r(91105),c=(0,i.memo)(function(e){var t=e.currentAppearance,r=e.onAppearanceChange;return(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-4 border-b px-6 py-5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(a.g,{children:(0,o.t)("builder_ui.design.appearance.title")}),(0,n.jsx)(l.N,{value:t,onChange:r,name:"site-theme-appearance-toggle"})]}),(0,n.jsx)(s.Z.LabelXs,{color:"text-default",as:"p",children:(0,o.t)("builder_ui.design.appearance.description")})]})});c.displayName="AppearanceToggle"},55632:function(e,t,r){"use strict";r.d(t,{T:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.builder_global_theming_enabled)}},78797:function(e,t,r){"use strict";r.d(t,{j:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.builder_custom_themes_enabled)}},11291:function(e,t,r){"use strict";r.d(t,{LZ:()=>s,ON:()=>l,qt:()=>c});var n=r(88767),i=r(93199),o=r(95533);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=["settings","site","pages"],l=function(e){return((function(e){if(Array.isArray(e))return a(e)})(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([String(e)])},c=function(e){var t=(0,n.useQuery)(l(e),function(){return(0,i.UT)(o.a.settings.sites.pages.show({pageId:e.toString()}))});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({page:t.data},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["data"]))}},34397:function(e,t,r){"use strict";r.d(t,{L:()=>u,i:()=>d});var n=r(67294),i=r(88767),o=r(93199),a=r(95533),s=r(11291);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=20,d=function(e){var t,r,d,f,p,m=e.perPage,b=void 0===m?u:m,h=e.initialPage,y=void 0===h?1:h,v=e.query,g=void 0===v?"":v,_=e.status,x=e.options,j=(0,i.useInfiniteQuery)(((function(e){if(Array.isArray(e))return l(e)})(t=s.LZ)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{perPage:b,query:g}]),function(e){var t=e.pageParam;return(0,o.UT)(a.a.settings.sites.pages.index({params:c({page:void 0===t?y:t,per_page:b,query:g},_?{status:_}:{})}))},c({getNextPageParam:function(e){return(null==e?void 0:e.has_next_page)?e.page+1:void 0}},void 0===x?{}:x)),w=j.data,O=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(j,["data"]),S=(0,n.useMemo)(function(){var e;return null!=(e=null==w?void 0:w.pages)?e:[]},[null==w?void 0:w.pages]);return c({data:w,totalRecords:null!=(f=null==(r=S[0])?void 0:r.count)?f:0,pageSize:null!=(p=null==(d=S[0])?void 0:d.per_page)?p:b},O)}},6439:function(e,t,r){"use strict";r.d(t,{s:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.sites_enabled)}},5473:function(e,t,r){"use strict";r.d(t,{T:()=>l});var n=r(85893),i=r(66007),o=r(84326),a=r(57363),s=r(18943),l=function(){return(0,n.jsxs)(s.v,{className:"flex gap-x-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(a.JO,{type:"20-info",size:24,"aria-hidden":"true"})}),(0,n.jsx)(i.Z,{html:(0,o.t)("settings_sso_add_members_suggestion")})]})}},29312:function(e,t,r){"use strict";r.d(t,{V:()=>N});var n=r(85893),i=r(67294),o=r(45697),a=r.n(o),s=(r(99623),r(67367),r(52293)),l=r(84326),c=(r(17435),r(52634)),u=(r(37401),r(94343)),d=r(91112),f=r(47532),p=r(51169),m=r(88894);r(63647);r(3178),r(65510),r(25076),r(32309);var b=r(74709),h=r(94184),y=r.n(h),v=r(11947),g=r(57363),_=r(43544),x=r(80171),j=r(24330),w=r(41553),O=(r(34511),r(34245),r(96486)),S=r(12369),k=r(41342),P=r(79869),C=r(39788);a().object,a().number,r(80466);var N=function(e){var t=e.actionType,r=e.apiParams,n=c.U0.find(function(e){return e.value===t});return n&&"getActionTitle"in n?n.getActionTitle(r):(0,l.t)("settings.workflows.view.actions.".concat(t,".title"),{defaultValue:(0,l.t)("settings.workflows.form.add_an_action")})};a().bool,a().func,a().func},34511:function(e,t,r){"use strict";r.d(t,{B:()=>a,t:()=>s});var n=r(85893),i=r(67294),o=(0,i.createContext)(null);o.displayName="CurrentActionContext";var a=function(){var e=(0,i.useContext)(o);if(!e)throw Error("useCurrentAction must be used within a Action");return e},s=function(e){var t=e.action,r=e.index,i=void 0===r?0:r,a=e.children,s=e.isViewOnlyMode,l="actions.".concat(i),c="".concat(l,".api_params"),u="string"==typeof(null==t?void 0:t.id)&&!t.id.startsWith("action");return(0,n.jsx)(o.Provider,{value:{action:t,index:i,isSaved:u,paramsPath:c,path:l,isViewOnlyMode:void 0!==s&&s},children:a})}},34245:function(e,t,r){"use strict";r.d(t,{Z:()=>g});var n=r(85893),i=r(84326),o=r(66570),a=r(37401),s=r(28281),l=r(32309),c=r(34511),u=r(80466),d=r(62950),f=r(86862),p=r(83235);function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var b=function(e){var t,r,n=(0,f.r)(),i=n.areMarketingSettingsAvailable,o=n.isLoading,a=(0,d.Z)(),s=(0,p.q)(null!=(r=null==e||null==(t=e.api_params)?void 0:t.broadcast_id)?r:null).onUpsert;return{handleEmailActionContinue:function(e){var t,r=e.continueAction;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(!i)return[3,3];return[4,s()];case 1:return e.sent(),[4,r()];case 2:return e.sent(),[3,5];case 3:return[4,a.show({onSuccess:function(){r()}})];case 4:e.sent(),e.label=5;case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})})()},isLoadingMarketingSettings:o}};function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)})}}function v(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}let g=function(e){var t,r=e.onSubmit,d=e.onSuccess,f=(0,o.Ve)().setActionNodeUpdateParams,p=(0,u.o)(),m=p.saveActions,h=p.isSavingActions,g=(0,c.B)(),_=g.action,x=g.path,j=(0,l.l)(x),w=j.value,O=j.revalidate,S=j.hasValue,k=b(_),P=k.handleEmailActionContinue,C=k.isLoadingMarketingSettings,N=w.action_type;t=h?(0,i.t)("settings.workflows.form.saving"):(0,i.t)("settings.workflows.form.continue");var A=N===a.Cz.value;return(0,n.jsx)(s.f,{disabled:h||!S||A&&C,onClick:function(){return y(function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,O()];case 1:if(!t.sent())return[2];if(f({nodeId:w.id,isUpdating:!0}),e=function(){return y(function(){return v(this,function(e){switch(e.label){case 0:return[4,m(d)];case 1:return e.sent(),null==r||r(),[2]}})})()},!A)return[3,3];return[4,P({continueAction:e})];case 2:return t.sent(),[3,5];case 3:return[4,e()];case 4:t.sent(),t.label=5;case 5:return f({nodeId:"",isUpdating:!1}),[2]}})})()},children:t})}},99623:function(e,t,r){"use strict";r.d(t,{Lz:()=>u});var n=r(85893),i=r(84326),o=r(57105),a=r(63549),s="settings.workflows.edit.confirm_delete_action_modal",l=function(e){var t=e.onConfirm,r=e.onCancel,l=e.disabled,c=(0,o.dd)();return(0,n.jsx)(a.c,{isOpen:c.visible,onClose:c.hide,confirmVariant:"danger",confirmText:(0,i.t)("".concat(s,".confirm_text")),title:(0,i.t)("".concat(s,".title")),cancelText:(0,i.t)("".concat(s,".cancel_text")),onConfirm:t,onCancel:r,disabled:void 0!==l&&l,children:(0,i.t)("".concat(s,".body"))})},c=o.gk.create(function(e){var t=e.onConfirm,r=e.onCancel,i=e.disabled;return(0,n.jsx)(l,{onConfirm:t,onCancel:r,disabled:void 0!==i&&i})}),u=function(){return(0,o.dd)(c)}},47532:function(e,t,r){"use strict";r.d(t,{B2:()=>n.B,ol:()=>i.o}),r(85893),r(67294),r(65144),r(84991),r(29312);var n=r(34511),i=r(80466)},30170:function(e,t,r){"use strict";r.d(t,{a:()=>l,q:()=>c});var n=r(96486),i=r(52293),o=r(73753),a=r(67933),s=r(23527),l="actions",c=function(){var e=(0,i.Gc)(),t=e.watch,r=e.formState,c=r.dirtyFields,u=r.touchedFields,d=t(l,[]),f=(0,o.Y)(),p=d.some(function(e,t){var r="".concat(l,"[").concat(t,"]"),i=(0,n.get)(c,r,null);return(0,s.p)(i)}),m=d.some(function(e,t){var r="".concat(l,"[").concat(t,"]"),i=(0,n.get)(u,r,null);return(0,s.p)(i)}),b=d.every(function(e){return(0,a.a)(e,f)}),h=d.every(function(e){return(0,n.isString)(null==e?void 0:e.id)&&!e.id.startsWith("action")});return{doesActionhasServerId:function(e){return(0,n.isString)(null==e?void 0:e.id)&&!e.id.startsWith("action")},areSomeActionsDirty:p,areSomeActionsTouched:m,areAllActionsFilled:b,areAllActionsWithServerIds:h,areAllActionsSaved:b&&!p&&h}}},80466:function(e,t,r){"use strict";r.d(t,{o:()=>q});var n=r(67294),i=r(68989),o=r(50362),a=r(52293),s=r(88767),l=r(51630),c=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,(0,a.Gc)().watch)("id"),i=(0,s.useQueryClient)();return(0,s.useMutation)(function(e){return l.nH.deleteAction({workflowId:n,id:e})},(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),t=t={onSuccess:function(e,t,o){var a;i.invalidateQueries(["workflows",n]),null==(a=r.onSuccess)||a.call(r,e,t,o)}},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))},u=r(66964),d=r(41378),f=r(74052),p=r(36913);function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var h=function(e){return b({action_type:e.action_type,api_params:e.api_params,community_segment_id:e.community_segment_id},e.id&&!e.id.startsWith("action")&&{id:e.id})},y=function(e){var t,r=e.workflowId,n=e.actions;return(t=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return[4,Promise.all(n.map(f.z))];case 1:return e=i.sent(),[4,(0,p.Cw)({workflowId:r})];case 2:return i.sent(),t=e.map(h),[4,l.nH.upsertActions({workflowId:r,body:{actions:t}})];case 3:var o,a;return[2,(o=i.sent(),a=e,o.map(function(e){var t,r,n=e.community_segment_id;if(!n)return e;var i=a.find(function(e){return e.community_segment_id===n});return i?(t=b({},e),r=r={rules:i.rules},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t):e}))]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})})()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,a.Gc)().watch)("id");return(0,s.useMutation)(function(e){return y({workflowId:t,actions:e})},e)},g=r(96486),_=r(23560),x=r.n(_),j=r(84326),w=r(70216),O=r(6082),S=r(12369),k=r(41342),P=r(84991),C=r(79869),N=r(60878),A=r(84555),I=r(73753),E=r(67933),T=r(30170);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var D={id:"0"},M=function(){var e=(0,(0,a.Gc)().watch)(T.a,[]).map(function(e,t){return{id:(null==e?void 0:e.id)||t+1}});return{itemsIds:[D].concat(function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),actionsIds:e}};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function F(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){B(o,n,i,a,s,"next",e)}function s(e){B(o,n,i,a,s,"throw",e)}a(void 0)})}}function z(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function U(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}function G(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var q=function(){var e,t=(e=(0,n.useState)(!0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||Z(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],s=t[1],l=(0,P.d)(),f=l.onCloseItemAndOpenNext,p=l.setActiveItemId,m=(0,N.pm)(),b=(0,i.hp)(),h=(0,I.Y)(),y=(0,a.Gc)(),_=y.watch,L=y.setError,D=y.trigger,R=y.setValue,B=y.resetField,q=y.formState,V=M(),H=V.actionsIds,W=V.itemsIds,Q=(0,T.q)(),J=Q.doesActionhasServerId,K=Q.areSomeActionsDirty,$=Q.areSomeActionsTouched,X=Q.areAllActionsFilled,Y=Q.areAllActionsWithServerIds,ee=Q.areAllActionsSaved,et=q.errors,er=q.defaultValues,en=_(T.a,[]),ei=en.length>0,eo=Object.keys(et).length>0,ea=(0,a.Dq)({name:T.a}),es=ea.remove,el=ea.replace,ec=(0,o.D)(),eu=ec.status,ed=ec.id,ef=(0,u.m)({workflowId:ed}).refetch,ep=(0,k.wh)().currentCommunity,em=null==ep?void 0:ep.current_plan_tier,eb=(0,C.w)(),eh=(0,k.wh)().refetch,ey=function(e){var t,r;eb.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,w.h)(e)&&{planTier:(0,O.gq)(em)}),r=r={subheading:e.body.message,isEmailHubRequired:(0,w.w)(e),source:(0,S.yf)(),onSuccess:function(){return F(function(){return G(this,function(e){switch(e.label){case 0:return[4,eh()];case 1:return e.sent(),[2]}})})()},successButtonLabel:(0,j.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};(0,n.useEffect)(function(){r&&!ei&&(s(!1),el(null==er?void 0:er.actions))},[null==er?void 0:er.actions,ei,r,el]);var ev=c(),eg=ev.mutate,e_=ev.isLoading,ex=(0,d.H)(),ej=ex.mutateAsync,ew=ex.isLoading,eO=ex.isError,eS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return F(function(){var r;return G(this,function(n){switch(n.label){case 0:el(r=e.map(function(e){return(0,g.omit)(e,"errors")})),B(T.a,{defaultValue:r}),x()(t)?t():f(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ef()];case 2:return n.sent(),[3,4];case 3:return console.error(n.sent()),[3,4];case 4:return[2]}})})()},ek=function(e){var t,r;return(((null==e||null==(r=e.body)||null==(t=r.data)?void 0:t.actions)||[]).forEach(function(e,t){for(var r in e)L("".concat(T.a,"[").concat(t,"].").concat(r),{type:"server",message:e[r]})}),(0,w.h)(e)||(0,w.w)(e))?ey(e):m.error(e.message)},eP=v({onSuccess:eS,onError:ek}),eC=eP.mutateAsync,eN=eP.isLoading,eA=eP.isError,eI=function(e,t){var r;el(e),B(T.a,{defaultValue:e}),p(null==(r=e[t])?void 0:r.id)};return{actionsIds:H,isFirstRender:r,addActionAfterPosition:function(e){var t=e.index,r=(0,A.Ep)(),n=_(T.a,[]);eI(U(n.slice(0,t+1)).concat([r],U(n.slice(t+1))),t+1)},addActionAtStart:function(){eI([(0,A.Ep)()].concat(U(_(T.a,[]))),0)},formActions:en,hasActions:ei,hasErrors:eo,isActionError:eO,doesActionhasServerId:J,isActionsError:eA,isSavingActions:eN,isUpdatingAction:ew,itemsIds:W,isActionDeleting:e_,removeActionAtPosition:function(e){return F(function(){var t,r,n,i;return G(this,function(o){switch(o.label){case 0:if(o.trys.push([0,4,,5]),r=J(t=_(T.a,[])[e]),es(e),n=_(T.a,[]),B(T.a,{defaultValue:n}),!r)return[2];if(eg(t.id),0!==n.length||eu!==A.qN.ACTIVE)return[3,3];return R("status",A.qN.INACTIVE),[4,ef()];case 1:return o.sent(),[4,b.show({i18nBase:"settings.workflows.edit.incomplete_workflow_no_actions_modal",onAction:function(){b.hide()}})];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:return console.error(i=o.sent()),m.error(z(i,Error)?i.message:String(i)),[3,5];case 5:return[2]}})})()},saveAction:function(e){var t=e.path,r=e.action,n=e.skipOpenNext,i=void 0!==n&&n;return F(function(){var e,n;return G(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,ej(r)];case 1:return(R(t,e=o.sent()),B(t,{defaultValue:e}),i&&e&&(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&"id"in e)?p(e.id):f(),ef(),[3,3];case 2:return console.error(n=o.sent()),m.error(z(n,Error)?n.message:String(n)),[3,3];case 3:return[2]}})})()},saveActions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.noop;return F(function(){var t;return G(this,function(r){switch(r.label){case 0:return[4,D(T.a)];case 1:if(t=r.sent(),!X)return en.forEach(function(e,t){(0,E.a)(e,h)||L("actions[".concat(t,"]"),{type:"manual",message:(0,j.t)("settings.workflows.form.step_incomplete")})}),[2];if(!t||!X)return[2];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,eC(_(T.a)||[])];case 3:return eS(r.sent(),e),[3,5];case 4:return ek(r.sent()),[3,5];case 5:return[2]}})})()},areAllActionsFilled:X,areSomeActionsDirty:K,areSomeActionsTouched:$,areAllActionsWithServerIds:Y,areAllActionsSaved:ee}}},97346:function(e,t,r){"use strict";r.d(t,{o:()=>g});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(73849),l=r(52293),c=r(63034),u=r(41553),d=r(51466),f=r(47532),p=r(58269),m=r(73753),b=r(88767),h=r(93199),y=r(95533),v=r(67093),g={label:(0,i.t)("settings.workflows.form.actions.ai_agents_hide_post_from_featured_areas"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_hide_post_from_featured_areas"),value:"ai_agents_hide_post_from_featured_areas",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-hide",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,f.B2)().paramsPath,t=(0,l.Gc)(),r=t.setValue,o=t.getValues,a=(0,m.Y)(),s=o("".concat(e,".community_bot_profile_id"));return(0,p.h)("".concat(e,".community_bot_profile_id"),null),(0,p.h)("".concat(e,".close_comments"),!1),(0,p.h)("".concat(e,".hide_metadata"),!1),(0,p.h)("".concat(e,".hide_post_from_featured_areas"),!a),(0,n.jsxs)("div",{className:"flex flex-col gap-9",children:[!a&&(0,n.jsx)(d.l.Item,{name:"".concat(e,".community_bot_profile_id"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.agent"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(c.E,{selectedId:s,setValue:function(t){return r("".concat(e,".community_bot_profile_id"),t)},placeholderKey:"settings.workflows.form.select_agent",notFoundKey:"settings.workflows.form.no_agents_found",enabledStatus:!0})}),a&&(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.what_do_you_want_to_do")})}),(0,n.jsx)(d.l.Item,{name:"".concat(e,".close_comments"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(d.l.ToggleSwitch,{variant:"small",name:"".concat(e,".close_comments"),onChange:function(t){return r("".concat(e,".close_comments"),t.target.value)}})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.close_comments")})]})}),(0,n.jsx)(d.l.Item,{name:"".concat(e,".hide_post_from_featured_areas"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(d.l.ToggleSwitch,{variant:"small",name:"".concat(e,".hide_post_from_featured_areas"),onChange:function(t){return r("".concat(e,".hide_post_from_featured_areas"),t.target.value)}})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.hide_post_from_featured_areas")})]})}),(0,n.jsx)(d.l.Item,{name:"".concat(e,".hide_metadata"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(d.l.ToggleSwitch,{variant:"small",name:"".concat(e,".hide_metadata"),onChange:function(t){return r("".concat(e,".hide_metadata"),t.target.value)}})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.hide_metadata")})]})})]})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,l,c,d=e.body,f=e.log,p=(0,m.Y)(),g=d.community_bot_profile_id,_=null!=(l=null==(t=f.message.response_details)?void 0:t.body)?l:{},x=_.space_slug,j=_.post_slug,w=(0,b.useQuery)({queryKey:["posts",null!=(c=null==(o=f.message.response_details)||null==(r=o.body)?void 0:r.post_id)?c:null],queryFn:function(){return(0,h.UT)(y.a.posts.show({postSlug:j,spaceSlug:x}))},retry:!1,enabled:!!(null==(s=f.message.response_details)||null==(a=s.body)?void 0:a.post_id)}),O=w.data,S=w.isLoading;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[!p&&(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.ai_agent")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(v.t,{communityBotProfileId:g})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:O?(0,n.jsx)("a",{href:"/c/".concat(x,"/").concat(j),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(S?"post_loading":"post_not_found"))})})]})]})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:s.S}},14711:function(e,t,r){"use strict";r.d(t,{w:()=>x});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(52293),l=r(80171),c=r(63034),u=r(41553),d=r(99725),f=r(51466),p=r(47532),m=r(58269),b=Array.from({length:10},function(e,t){return{text:"".concat(100-10*t,"%"),value:100-10*t}}),h=r(88767),y=r(93199),v=r(95533),g=r(67093),_=r(41342),x={label:(0,i.t)("settings.workflows.form.actions.ai_agents_post_comment"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_post_comment"),value:"ai_agents_post_comment",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-action",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,p.B2)().paramsPath,t=(0,s.Gc)(),r=t.getValues,o=t.setValue,h=r("".concat(e,".community_bot_profile_id")),y=r("".concat(e,".response_rate")),v=r("".concat(e,".additional_instructions"));return(0,m.h)("".concat(e,".community_bot_profile_id"),null),(0,m.h)("".concat(e,".response_rate"),100),(0,m.h)("".concat(e,".additional_instructions"),""),(0,m.h)("".concat(e,".skip_if_answered"),!0),(0,n.jsxs)("div",{className:"workflows-form-post-comment flex flex-col gap-5",children:[(0,n.jsx)(f.l.Item,{name:"".concat(e,".community_bot_profile_id"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.agent"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(c.E,{selectedId:h,setValue:function(t){return o("".concat(e,".community_bot_profile_id"),t)},placeholderKey:"settings.workflows.form.select_agent",notFoundKey:"settings.workflows.form.no_agents_found",enabledStatus:!0})}),(0,n.jsx)(f.l.Item,{name:"".concat(e,".response_rate"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{className:"mb-0.5 flex items-center gap-[3px]",children:[(0,n.jsxs)("span",{children:[(0,i.t)("settings.workflows.form.response_rate")," "]}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.form.response_rate_description"),className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",size:16,useWithStrokeCurrentColor:!0})})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(f.l.Select,{value:null!=y?y:100,onChange:function(t){return o("".concat(e,".response_rate"),Number(t.value))},data:b,name:"".concat(e,".response_rate")})}),(0,n.jsx)(f.l.Item,{name:"".concat(e,".additional_instructions"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.JO,{type:"20-ai-prompt",size:20,className:"mb-0.5 mr-1"}),(0,n.jsx)("span",{children:(0,i.t)("settings.workflows.form.additional_instructions")})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.additional_instructions_placeholder"),rules:{required:!1},children:(0,n.jsx)(d.t,{value:v,onChange:function(t){return o("".concat(e,".additional_instructions"),t.target.value)},name:"".concat(e,".additional_instructions"),rows:8,maxLength:1500})}),(0,n.jsx)(f.l.Item,{name:"".concat(e,".skip_if_answered"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(f.l.ToggleSwitch,{variant:"small",name:"".concat(e,".skip_if_answered"),onChange:function(t){return o("".concat(e,".skip_if_answered"),t.target.value)}})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.skip_if_answered")}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.form.skip_if_answered_tooltip"),arrow:!1,className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",className:"ml-0.5",size:16,useWithStrokeCurrentColor:!0})})]})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o=e.body,a=e.log,s=o.community_bot_profile_id,l=(0,h.useQuery)({queryKey:["comments",null==(r=a.message.response_details)||null==(t=r.body)?void 0:t.id],queryFn:function(){return(0,y.UT)(v.a.comments.show({id:a.message.response_details.body.id}))},retry:!1}),c=l.data,d=l.isLoading;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.ai_agent")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(g.t,{communityBotProfileId:s})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment")})}),(0,n.jsx)("div",{className:"w-3/4",children:c?(0,n.jsx)("a",{href:c.show_url,target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment_link")}):(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(d?"comment_loading":"comment_not_found"))})})]})]})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:function(){var e=(0,_.wh)().currentCommunitySettings;return!!(null==e?void 0:e.ai_automations_enabled)}}},84260:function(e,t,r){"use strict";r.d(t,{l:()=>v});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(52293),l=r(80171),c=r(99725),u=r(51466),d=r(47532),f=r(58269),p=r(88767),m=r(93199),b=r(95533),h=r(41553),y=r(73753),v={label:(0,i.t)("settings.workflows.form.actions.ai_agents_rename_post_title"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_rename_post_title"),value:"ai_agents_rename_post_title",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-rename",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.Gc)(),r=t.getValues,o=t.setValue,p=r("".concat(e,".instructions"));return(0,f.h)("".concat(e,".instructions"),""),(0,n.jsx)("div",{className:"workflows-form-rename-post-title flex flex-col gap-5",children:(0,n.jsx)(u.l.Item,{name:"".concat(e,".instructions"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{className:"mb-0.5 flex items-center gap-[3px]",children:[(0,n.jsx)(a.JO,{type:"20-ai-prompt",size:20,className:"mr-1"}),(0,n.jsxs)("span",{children:[(0,i.t)("settings.workflows.form.instructions")," "]}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.form.instructions_description"),className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",size:16,useWithStrokeCurrentColor:!0})})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.instructions_placeholder"),rules:{required:!1},children:(0,n.jsx)(c.t,{value:p,onChange:function(t){return o("".concat(e,".instructions"),t.target.value)},name:"".concat(e,".instructions"),rows:8,maxLength:500})})})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,l=e.log,c=null!=(a=null==(t=l.message.response_details)?void 0:t.body)?a:{},u=c.space_slug,d=c.post_slug,f=(0,p.useQuery)({queryKey:["posts",null!=(s=null==(o=l.message.response_details)||null==(r=o.body)?void 0:r.id)?s:null],queryFn:function(){return(0,m.UT)(b.a.posts.show({postSlug:d,spaceSlug:u}))},retry:!1}),y=f.data,v=f.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:y?(0,n.jsx)("a",{href:"/c/".concat(u,"/").concat(d),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(h.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(v?"post_loading":"post_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:y.Y}},73753:function(e,t,r){"use strict";r.d(t,{Y:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.ai_automations_v2_enabled)}},38998:function(e,t,r){"use strict";r.d(t,{c:()=>_});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(73849),l=r(67294),c=r(27361),u=r.n(c),d=r(52293),f=r(41553),p=r(99725),m=r(51466),b=r(47532),h=r(58269),y=r(88767),v=r(93199),g=r(95533),_={label:(0,i.t)("settings.workflows.form.actions.ai_agents_report_comment"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_report_comment"),value:"ai_agents_report_comment",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-report",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,b.B2)(),t=e.paramsPath,r=e.isSaved,o=(0,d.Gc)(),a=o.setValue,s=o.getValues,c=o.formState;(0,h.h)("".concat(t,".reported_reason_body"),""),(0,l.useEffect)(function(){if(!r){var e=s("".concat(t,".hide_until_approved")),n=!!u()(c.touchedFields,"".concat(t,".hide_until_approved")),i=!!u()(c.dirtyFields,"".concat(t,".hide_until_approved"));null!=e&&!1!==e||n||i||a("".concat(t,".hide_until_approved"),!0,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})}},[r,s,a,t,c.dirtyFields,c.touchedFields]);var y=s("".concat(t,".reported_reason_body"));return(0,n.jsxs)("div",{className:"flex flex-col gap-[21px]",children:[(0,n.jsx)(m.l.Item,{name:"".concat(t,".hide_until_approved"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(m.l.ToggleSwitch,{variant:"small",name:"".concat(t,".hide_until_approved")})}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.flag_comment_for_review_and_hide_until_approved")})]})}),(0,n.jsx)(m.l.Item,{name:"".concat(t,".reported_reason_body"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.explanation"),labelClassName:"!mb-2 !text-sm",className:"!py-0",rules:{required:!1},placeholder:(0,i.t)("settings.workflows.form.ai_agents_report_comment_placeholder"),children:(0,n.jsx)(p.t,{value:y,onChange:function(e){return a("".concat(t,".reported_reason_body"),e.target.value)},name:"".concat(t,".reported_reason_body"),rows:4,maxLength:500})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o=e.log,a=(0,y.useQuery)({queryKey:["comments",null==(r=o.message.response_details)||null==(t=r.body)?void 0:t.comment_id],queryFn:function(){return(0,v.UT)(g.a.comments.show({id:o.message.response_details.body.comment_id}))},retry:!1}),s=a.data,l=a.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment")})}),(0,n.jsx)("div",{className:"w-3/4",children:s?(0,n.jsx)("a",{href:s.show_url,target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment_link")}):(0,n.jsx)(f.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(l?"comment_loading":"comment_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:s.S}},44123:function(e,t,r){"use strict";r.d(t,{m:()=>_});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(67294),l=r(27361),c=r.n(l),u=r(52293),d=r(41553),f=r(99725),p=r(51466),m=r(47532),b=r(58269),h=r(88767),y=r(93199),v=r(95533),g=r(73849),_={label:(0,i.t)("settings.workflows.form.actions.ai_agents_report_post"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_report_post"),value:"ai_agents_report_post",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-report",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,m.B2)(),t=e.paramsPath,r=e.isSaved,o=(0,u.Gc)(),a=o.setValue,l=o.getValues,h=o.formState;(0,b.h)("".concat(t,".reported_reason_body"),""),(0,s.useEffect)(function(){if(!r){var e=l("".concat(t,".hide_until_approved")),n=!!c()(h.touchedFields,"".concat(t,".hide_until_approved")),i=!!c()(h.dirtyFields,"".concat(t,".hide_until_approved"));null!=e&&!1!==e||n||i||a("".concat(t,".hide_until_approved"),!0,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})}},[r,l,a,t,h.dirtyFields,h.touchedFields]);var y=l("".concat(t,".reported_reason_body"));return(0,n.jsxs)("div",{className:"flex flex-col gap-[21px]",children:[(0,n.jsx)(p.l.Item,{name:"".concat(t,".hide_until_approved"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(p.l.ToggleSwitch,{variant:"small",name:"".concat(t,".hide_until_approved")})}),(0,n.jsx)(d.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.flag_post_for_review_and_hide_until_approved")})]})}),(0,n.jsx)(p.l.Item,{name:"".concat(t,".reported_reason_body"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.explanation"),labelClassName:"!mb-2 !text-sm",className:"!py-0",rules:{required:!1},placeholder:(0,i.t)("settings.workflows.form.ai_agents_report_post_placeholder"),children:(0,n.jsx)(f.t,{value:y,onChange:function(e){return a("".concat(t,".reported_reason_body"),e.target.value)},name:"".concat(t,".reported_reason_body"),rows:4,maxLength:500})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,l=e.log,c=null!=(a=null==(t=l.message.response_details)?void 0:t.body)?a:{},u=c.space_slug,f=c.post_slug,p=(0,h.useQuery)({queryKey:["posts",null!=(s=null==(o=l.message.response_details)||null==(r=o.body)?void 0:r.id)?s:null],queryFn:function(){return(0,y.UT)(v.a.posts.show({postSlug:f,spaceSlug:u}))},retry:!1}),m=p.data,b=p.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(d.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:m?(0,n.jsx)("a",{href:"/c/".concat(u,"/").concat(f),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(d.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(b?"post_loading":"post_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:g.S}},73849:function(e,t,r){"use strict";r.d(t,{S:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.ai_automations_enabled)}},35476:function(e,t,r){"use strict";r.d(t,{M:()=>h});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(52293),l=r(63034),c=r(99725),u=r(51466),d=r(47532),f=r(58269),p=r(41553),m=r(67093),b=r(41342),h={label:(0,i.t)("settings.workflows.form.actions.ai_agents_send_dm"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_send_dm"),value:"ai_agents_send_dm",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-send-dm",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.Gc)(),r=t.getValues,o=t.setValue,p=r("".concat(e,".community_bot_profile_id")),m=r("".concat(e,".ai_prompt"));return(0,f.h)("".concat(e,".community_bot_profile_id"),null),(0,f.h)("".concat(e,".ai_prompt"),""),(0,n.jsxs)("div",{className:"workflows-form-ai-agents-send-dm flex flex-col gap-5",children:[(0,n.jsx)(u.l.Item,{name:"".concat(e,".community_bot_profile_id"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.agent"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(l.E,{selectedId:p,setValue:function(t){return o("".concat(e,".community_bot_profile_id"),t)},placeholderKey:"settings.workflows.form.select_agent",notFoundKey:"settings.workflows.form.no_agents_found",enabledStatus:!0})}),(0,n.jsx)(u.l.Item,{name:"".concat(e,".ai_prompt"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.JO,{type:"20-ai-prompt",size:20,className:"mb-0.5 mr-1"}),(0,n.jsx)("span",{children:(0,i.t)("settings.workflows.form.additional_instructions")})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.ai_prompt_placeholder"),rules:{required:!1},children:(0,n.jsx)(c.t,{value:m,onChange:function(t){return o("".concat(e,".ai_prompt"),t.target.value)},name:"".concat(e,".ai_prompt"),rows:8,maxLength:500})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s=e.body,l=e.log,c=s.community_bot_profile_id;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.ai_agent")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(m.t,{communityBotProfileId:c})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.chat")})}),(0,n.jsx)("div",{className:"w-3/4",children:(null==(r=l.message.response_details)||null==(t=r.body)?void 0:t.chat_id)&&(0,n.jsx)("a",{href:null==(a=l.message.response_details)||null==(o=a.body)?void 0:o.chat_url,target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.chat_link")})})]})]})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:function(){var e=(0,b.wh)().currentCommunitySettings;return!!(null==e?void 0:e.ai_workflows_send_dm_enabled)}}},96846:function(e,t,r){"use strict";r.d(t,{P:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a=r(41553),s=Object.assign(function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:o()("flex flex-col gap-6",t),children:r})},{Section:function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:o()("flex flex-col gap-2",t),children:r})},Title:function(e){var t=e.children;return(0,n.jsx)("div",{children:(0,n.jsx)(a.Z.LabelSm,{weight:"semibold",children:t})})}})},39315:function(e,t,r){"use strict";r.d(t,{t:()=>x,I:()=>j});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(67294),l=r(52293),c=r(93723),u=r(91525),d=r(51466),f=r(18943),p=r(41553),m=r(39788),b=r(47532),h="settings.workflows.form.time_delay",y=[{value:"hours",label:(0,i.t)([h,"time_unit_options.hours_label"]),rules:{minValue:1,maxValue:999}},{value:"days",label:(0,i.t)([h,"time_unit_options.days_label"]),rules:{minValue:1,maxValue:365}},{value:"weeks",label:(0,i.t)([h,"time_unit_options.weeks_label"]),rules:{minValue:1,maxValue:52}}],v=r(34870),g=function(e,t){var r=x[t.time_unit]||1,n=t.time_unit_amount*r;return(0,v.w)({dateTime:new Date(new Date(e).getTime()+1e3*n),format:"short_date_at_short_time"})},_={cancelled:{time:function(e){return(0,n.jsx)(p.Z.LabelSm,{children:(0,v.w)({dateTime:new Date(null==e?void 0:e.updated_at),format:"short_date_at_short_time"})})},title:(0,n.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.view.actions.time_delay.cancelled")}),statusTitle:(0,n.jsx)(p.Z.LabelSm,{weight:"medium",color:"text-v2-danger",children:(0,i.t)("settings.workflows.table.result.cancelled")})},in_progress:{time:function(e,t){return(0,n.jsx)(p.Z.LabelSm,{children:(0,n.jsx)("i",{children:g(null==e?void 0:e.created_at,t)})})},title:(0,n.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,n.jsx)("i",{children:(0,i.t)("settings.workflows.view.actions.time_delay.expected_end")})}),statusTitle:(0,n.jsx)(p.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,i.t)("settings.workflows.table.result.in_progress")})},success:{time:function(e){return(0,n.jsx)(p.Z.LabelSm,{children:(0,v.w)({dateTime:new Date(e.updated_at),format:"short_date_at_short_time"})})},title:(0,n.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.view.actions.time_delay.ended")}),statusTitle:(0,n.jsx)(p.Z.LabelSm,{color:"text-v2-success",children:(0,i.t)("settings.workflows.table.result.success")})}},x={hours:3600,days:86400,weeks:604800},j={label:(0,i.t)("settings.workflows.form.actions.time_delay"),value:"time_delay",group:(0,i.t)("settings.workflows.form.action_groups.flow"),leftAddon:(0,n.jsx)(a.JO,{type:"16-workflow-time-delay",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e,t,r=(0,b.B2)(),v=r.paramsPath,g=r.action,_=(0,b.ol)().doesActionhasServerId,x=(0,l.Gc)(),j=x.watch,w=x.setValue,O=x.clearErrors,S=x.trigger,k=(0,u.wh)().currentCommunitySettings,P=(0,(0,l.Gc)().getValues)("status")===o.qN.DRAFT,C=j("".concat(v,".time_unit")),N=null!=(t=null==(e=y.find(function(e){return e.value===C}))?void 0:e.rules)?t:{minValue:1,maxValue:999},A=N.minValue,I=N.maxValue;return((0,s.useEffect)(function(){C||(w("".concat(v,".time_unit_amount"),1),w("".concat(v,".time_unit"),"days",{shouldValidate:!0}))},[v,w,C]),(0,s.useEffect)(function(){O("".concat(v,".time_unit_amount")),S("".concat(v,".time_unit_amount"))},[C,O,v,S]),!(null==k?void 0:k.edit_time_delays_enabled)&&_(g)&&!P)?(0,n.jsx)(f.v,{className:"flex justify-between !py-3",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(a.JO,{className:"mr-3",type:"20-info",size:20}),(0,n.jsx)(p.Z.LabelSm,{children:(0,i.t)([h,"cannot_edit_time_delay"])})]})}):(0,n.jsxs)("div",{className:"react-form",children:[(0,n.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,i.t)([h,"time_unit_amount"])}),(0,n.jsxs)("div",{className:"mt-2 flex flex-row gap-5",children:[(0,n.jsx)("div",{className:"flex flex-1",children:(0,n.jsx)(c.x,{className:"w-full !p-0",name:"".concat(v,".time_unit_amount"),hideLabel:!0,placeholder:(0,i.t)([h,"time_unit_amount_placeholder"]),translationRoot:h,hideDescription:!0,rules:{required:(0,i.t)([h,"errors.time_unit_amount.required"]),min:{value:A,message:(0,i.t)([h,"errors.time_unit_amount.enter_a_value_between"],{start:A,end:I})},max:{value:I,message:(0,i.t)([h,"errors.time_unit_amount.enter_a_value_between"],{start:A,end:I})}},children:(0,n.jsx)(d.l.Input,{type:"number",name:"".concat(v,".time_unit_amount"),"data-testid":"time_unit_amount"})})}),(0,n.jsx)("div",{className:"flex flex-1",children:(0,n.jsx)(m.N,{wrapperClassName:"w-full",name:"".concat(v,".time_unit"),label:"",options:y,rules:{required:(0,i.t)([h,"errors.time_unit.required"])}})})]})]})},viewComponent:function(e){var t,r=(e.action||{}).api_params;return(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsxs)("div",{className:"border-dark flex h-[60px] w-[360px] justify-center gap-3 rounded-xl border px-5 py-[18px]",children:[(0,n.jsx)(a.JO,{type:"20-time-delay",size:20,useWithFillCurrentColor:!0,"aria-hidden":!0}),(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",children:null==(t=j.getActionTitle)?void 0:t.call(j,r)})]})})},isCompactView:!0,compactViewTitlePrefix:(0,n.jsx)(a.JO,{type:"24-workflow-time-delay",size:24,className:"!h-5 !w-5"}),historyDetailViewComponent:function(e){var t,r=e.apiParams,a=e.log,s=e.status,l=_[a.message.status===o.bI.IN_PROGRESS&&s===o.bI.IN_PROGRESS?o.bI.IN_PROGRESS:a.message.status===o.bI.SUCCESS?o.bI.SUCCESS:(null==a?void 0:a.created_at)===(null==a?void 0:a.updated_at)&&(null==a?void 0:a.action)==="task_action_completed"||"cancelled"===a.message.status?"cancelled":"in_progress"],c=(0,v.w)({dateTime:new Date(a.created_at),format:"short_date_at_short_time"});return(0,n.jsxs)("div",{className:"flex flex-col rounded-lg",children:[(0,n.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-1 rounded-t-lg border-b px-6 py-5",children:[(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",children:"".concat((0,i.t)("settings.workflows.view.actions.time_delay.delay")," ").concat(null==(t=j.getActionTitle)?void 0:t.call(j,r))}),l.statusTitle]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 px-6 py-5",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.view.actions.time_delay.started")}),(0,n.jsx)(p.Z.LabelSm,{children:c})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[l.title,(0,n.jsx)(p.Z.LabelSm,{children:l.time(a,r)})]})]})]})},getActionTitle:function(e){var t=e.time_unit_amount,r=e.time_unit;return t&&r?(0,i.t)("settings.workflows.view.actions.time_delay.title_with_units",{time_unit_amount:t,time_unit:(0,i.t)("settings.workflows.view.actions.time_delay.options.".concat(r),{count:Number(t)})}):(0,i.t)("settings.workflows.view.actions.time_delay.title")},icon:"clock",isCompactHistoryView:!0,isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.MH_WITH_LOWER_OR_HIGHER_TIER_PLAN}},82470:function(e,t,r){"use strict";r.d(t,{s:()=>m});var n=r(85893),i=r(84326),o=r(93723),a=r(47532),s=r(51466),l="settings.workflows.form.award_points",c=r(41553),u=r(96846),d="settings.workflows.view",f=r(84555),p=r(57363),m={label:(0,i.t)("settings.workflows.form.actions.award_points"),value:"award_points",group:(0,i.t)("settings.workflows.form.action_groups.gamification"),leftAddon:(0,n.jsx)(p.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,a.B2)().paramsPath;return(0,n.jsxs)("div",{children:[(0,n.jsx)(o.x,{name:"".concat(e,".points"),hideDescription:!0,label:(0,i.t)([l,"points.label"]),placeholder:(0,i.t)([l,"points.placeholder"]),translationRoot:l,rules:{required:(0,i.t)([l,"errors.points.required"]),min:{value:1,message:(0,i.t)([l,"errors.points.enter_a_value_between"],{start:1,end:500})},max:{value:500,message:(0,i.t)([l,"errors.points.enter_a_value_between"],{start:1,end:500})}},children:(0,n.jsx)(s.l.Input,{type:"number",name:"".concat(e,".points"),"data-testid":"points"})}),(0,n.jsx)(o.x,{name:"".concat(e,".reason"),label:(0,i.t)([l,"reason.label"]),hideDescription:!0,placeholder:(0,i.t)([l,"reason.placeholder"]),translationRoot:l,rules:{maxLength:{value:255,message:(0,i.t)([l,"errors.reason.max_length"])}},children:(0,n.jsx)(s.l.Input,{type:"text",name:"".concat(e,".reason"),"data-testid":"reason"})})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.points,o=t.reason;return(0,n.jsxs)(u.P,{children:[(0,n.jsxs)(u.P.Section,{children:[(0,n.jsx)(u.P.Title,{children:(0,i.t)([d,"points"])}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:r})})]}),o&&(0,n.jsxs)(u.P.Section,{children:[(0,n.jsx)(u.P.Title,{children:(0,i.t)([d,"reason"])}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:o})})]})]})},historyDetailViewComponent:function(e){var t=e.points;return(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.award_points.points")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:t})})]})},icon:"user",isApplicableToMembersOnly:!0,availablePlanTier:f.PQ.HIGHER_TIER_PLAN_ONLY}},37401:function(e,t,r){"use strict";r.d(t,{KY:()=>eO,Ah:()=>ev,TQ:()=>ew,MK:()=>ey,Cz:()=>e4,r1:()=>e5,zW:()=>ej});var n,i=r(85893),o=r(84326),a=r(84555),s=r(57363),l=r(67294),c=r(52293),u=r(41342),d=r(51466),f=r(47532),p=r(50362),m=r(27036),b=r(92998),h=r(39905),y=r(51169),v=r(41553),g=r(88767),_=r(51630),x=r(93828),j=r(68167),w=r(73321),O=r(49333),S=r(66564),k=r(96471),P=r(43609),C=r(87105),N=r(35354),A=r(3922),I=r(28911),E=r(23836);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M="event",R="space",B="space_group",F="member_tag",z="post",U=["post","flagged_content"],Z=["comment","flagged_content"],G=["paywall","paywall_price","currency"],q=(L(n={},j.Zo.value,[M]),L(n,j.PJ.value,[M]),L(n,j.OC.value,[M]),L(n,I.G.value,[M]),L(n,j.BP.value,[M]),L(n,j.Q4.value,[M]),L(n,A.aD.value,[R]),L(n,A.D1.value,[R]),L(n,x.ey.value,[R]),L(n,x.ES.value,[R]),L(n,x.dP.value,[R]),L(n,E._.value,[B]),L(n,E.d.value,[B]),L(n,w.m.value,[F]),L(n,w.E.value,[F]),L(n,N.dO.value,[z]),L(n,N.fT.value,[z]),L(n,N.jU.value,U),L(n,N.pC.value,U),L(n,N.GT.value,U),L(n,N.Qw.value,["comment"]),L(n,N.Uu.value,Z),L(n,N.Fw.value,Z),L(n,N.sj.value,Z),L(n,S.u.value,G),L(n,k.H.value,G),L(n,P.j.value,G),L(n,C.j.value,G),L(n,O.x.value,G),n),V=function(e){var t=e.triggerType,r=q[t]||"",n=D(["community_member","community"]).concat(D(r)).filter(Boolean);return(0,g.useQuery)(["workflows-fetch-preview-attributes",t],function(){return _.nH.fetchPreviewAttributes({params:{resource_names:n}})})},H=r(20153),W=r(57105),Q=r(65121),J=r(98363),K=r(34519),$=function(e){var t=e.children,r=(0,W.dd)();return(0,i.jsxs)(K.u_,{title:(0,o.t)("settings.workflows.form.preview_message.modal_title"),isOpen:r.visible,onClose:r.hide,contentPortalId:"",children:[(0,i.jsx)(K.u_.Overlay,{}),(0,i.jsxs)(K.u_.Content,{size:"lg",children:[(0,i.jsxs)(K.u_.Header,{children:[(0,i.jsx)(K.u_.Title,{className:"text-left",children:(0,o.t)("settings.workflows.form.preview_message.modal_title")}),(0,i.jsx)(K.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,i.jsx)(K.u_.CloseButton,{onClick:r.hide})})]}),(0,i.jsxs)(K.u_.Body,{className:"pt-0",children:[(0,i.jsx)("p",{className:"text-default mb-6 text-sm",children:(0,o.t)("settings.workflows.form.preview_message.modal_description")}),(0,i.jsx)("div",{className:"border-primary mb-6 flex rounded border px-4 py-6",children:t})]})]})]})},X=r(96486),Y=r(13532),ee=function(e){var t=e.communityMemberId,r=e.body,n=e.resourceAttributes,i=(0,g.useQuery)(["workflows-fetch-interpolated-preview-message",t,r,n],function(){return _.nH.fetchInterpolatedPreviewMessage({body:{rich_text_body:r,mappings:n}})},{enabled:!(0,X.isEmpty)(n)}),o=i.data,a=(void 0===o?{}:o).interpolated_body,s=i.isLoading,l=(0,g.useQuery)(Y.av.communityMembers.show({id:t}),{enabled:!!t}),c=l.data;return{isLoadingPreviewMessageBody:s,isLoadingCommunityMember:l.isLoading,interpolatedBody:void 0===a?{}:a,communityMember:c}},et=function(e){var t=e.body,r=e.communityMemberId,n=e.resourceAttributes,a=e.localSgidToObjectMap,s=ee({body:t,communityMemberId:r,resourceAttributes:n}),l=s.interpolatedBody,c=s.isLoadingCommunityMember,u=s.isLoadingPreviewMessageBody,d=s.communityMember;if(c||u||!d)return(0,i.jsx)($,{children:(0,i.jsx)(y.a,{})});var f=d.name,p=d.avatar_url;return(0,i.jsxs)($,{children:[(0,i.jsx)("div",{className:"px-2",children:(0,i.jsx)(J.s,{size:"10",src:p,name:f})}),Object.keys(l).length>0&&(0,i.jsxs)("div",{className:"max-w-[calc(100%-3rem)] px-2",children:[(0,i.jsxs)("div",{className:"mb-2 flex items-center gap-x-2",children:[(0,i.jsx)(v.Z.LabelMd,{weight:"semibold",children:f}),(0,i.jsx)(v.Z.LabelXs,{color:"text-light",weight:"medium",children:(0,o.t)("settings.workflows.form.preview_message.placeholder_time")})]}),(0,i.jsx)(Q.T,{rich_text_body:{body:l,sgids_to_object_map:void 0===a?{}:a},editable:!1})]})]})},er=W.gk.create(function(e){return(0,i.jsx)(et,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),en=r(93199),ei=r(1737),eo=function(e){var t=e.triggerType,r=e.shouldSupportTriggerVariables,n=["dynamic_variables",t];return(0,g.useQuery)(n,function(){return(0,en.UT)(ei.v.fetchDynamicVariables({params:{trigger_type:t,support_trigger_variables:r}}))})},ea=function(e,t){return Object.values(e||{}).some(function(e){return(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"?Array.isArray(e)?e.some(function(e){return ea(e,t)}):ea(e,t):"string"==typeof e&&t.test(e)})},es=function(){var e=(0,c.Gc)(),t=e.watch,r=e.getValues,n=(0,f.B2)().paramsPath,i=(0,W.dd)(er),o=(0,H.Z)(),a=r("trigger.trigger_type"),s=eo({triggerType:a,shouldSupportTriggerVariables:o}),l=s.data,u=(void 0===l?{}:l).supported_variables,d=s.isLoading,p=t("".concat(n,".rich_text_body")),m=V({triggerType:a}),b=m.data,h=m.isSuccess;return{paramsPath:n,triggerType:a,dynamicVariables:void 0===u?[]:u,isLoadingDynamicVariables:d,shouldShowPreviewDmButton:ea(p||{},/{{[^{}]+}}/g)&&h,handlePreviewDmClick:function(){i.show({body:r("".concat(n,".rich_text_body")).body,communityMemberId:r("".concat(n,".from")),localSgidToObjectMap:r("".concat(n,".rich_text_body")).localSgidToObjectMap,resourceAttributes:b})}}},el=function(){var e=(0,f.B2)().isViewOnlyMode,t=es(),r=t.paramsPath,n=t.triggerType,a=t.isLoadingDynamicVariables,s=t.dynamicVariables,l=t.shouldShowPreviewDmButton,c=t.handlePreviewDmClick;return a?(0,i.jsx)(y.a,{}):(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.form.message_body")}),(0,i.jsx)(m._,{placeholder:(0,o.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(r,".rich_text_body"),submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",menuBarComponent:b.D,menubarProps:{dynamicVariables:s},type:"workflow",disabled:e},n),l&&(0,i.jsx)(h.z,{variant:"circle-plain",type:"button",className:"max-w-fit !px-2",onClick:c,children:(0,o.t)("settings.workflows.form.preview_message.button_label")})]})},ec=function(e,t){var r=(0,c.Gc)(),n=r.getValues,i=r.setValue;(0,l.useEffect)(function(){n(e)||i(e,t)},[e,i,n,t])},eu=r(14998),ed=r(45697),ef=r.n(ed),ep=r(58892),em=r(96846),eb="settings.workflows.view",eh=function(e){var t=(e.action||{}).api_params||{},r=t.from,n=t.rich_text_body;return r&&n?(0,i.jsxs)(em.P,{children:[(0,i.jsxs)(em.P.Section,{children:[(0,i.jsx)(em.P.Title,{children:(0,o.t)([eb,"from"])}),(0,i.jsx)("div",{children:(0,i.jsx)(eu.q,{communityMemberId:r})})]}),(0,i.jsxs)(em.P.Section,{children:[(0,i.jsx)(em.P.Title,{children:(0,o.t)([eb,"to"])}),(0,i.jsx)("div",{children:(0,i.jsx)(ep.C,{icon:(0,i.jsx)(s.JO,{type:"12-lightning",size:12,className:"!text-default !h-3 !w-3"}),text:(0,o.t)("settings.workflows.view.initiator")})})]}),(0,i.jsxs)(em.P.Section,{children:[(0,i.jsx)(em.P.Title,{children:(0,o.t)([eb,"message_body"])}),(0,i.jsx)("div",{className:"text-default text-sm",children:(0,i.jsx)(Q.T,{type:"workflow",rich_text_body:{body:n.body,sgids_to_object_map:n.localSgidToObjectMap},editable:!1},(0,X.uniqueId)("tiptap_"))})]})]}):null};eh.propTypes={action:ef().object,hasSeparator:ef().bool};var ey={label:(0,o.t)("settings.workflows.form.actions.send_dm"),textLabel:(0,o.t)("settings.workflows.form.actions.send_dm"),value:"send_dm",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-messages",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,f.B2)().paramsPath,t=(0,c.Gc)().register,r=(0,p.D)().isBulkAction,n=(0,u.N3)().id;return ec("".concat(e,".from"),n),ec("".concat(e,".to"),r?void 0:"initiator"),(0,i.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,i.jsx)(d.l.Item,{name:"".concat(e,".from"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)("settings.workflows.form.from"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,i.jsx)(d.l.CommunityMemberSelect,{defaultValue:n,name:"".concat(e,".from"),filters:{role:"admin_or_moderator",messaging_enabled:!0}})}),(0,i.jsx)("div",{className:"hidden",children:(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("".concat(e,".to"))))}),(0,i.jsx)(el,{})]})},viewComponent:eh,historyDetailViewComponent:function(e){var t=e.body,r=t.executor_member_id,n=t.receiver_member_id,a=t.rich_text_body;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_dm.from")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(eu.q,{communityMemberId:r})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_dm.to")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(eu.q,{communityMemberId:n})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_dm.message")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(Q.T,{editable:!1,rich_text_body:a,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"chat",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY,disablable:!0,disableToolTipText:(0,o.t)("workflows_v2.action_selector.enable_dm_for_action_tooltip")},ev={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_community"),value:"remove_community_member_from_community",group:(0,o.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,i.jsx)(s.JO,{type:"16-workflow-user-remove-outline",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=new URL(e.url).pathname.split("/").pop();return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(eu.q,{communityMemberId:t})})]})},icon:"user-remove",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eg=r(73622),e_="settings.workflows.view",ex=function(e){var t=(e.action||{}).api_params||{},r=t.path,n=t.message,a=(0,u.wh)().currentCommunity.root_url;return n?(0,i.jsxs)(em.P,{children:[r&&(0,i.jsxs)(em.P.Section,{children:[(0,i.jsx)(em.P.Title,{children:(0,o.t)([e_,"path"])}),(0,i.jsx)("div",{children:(0,i.jsx)(v.Z.LabelSm,{children:"https://".concat(a,"/").concat(r)})})]}),(0,i.jsxs)(em.P.Section,{children:[(0,i.jsx)(em.P.Title,{children:(0,o.t)([e_,"message_body"])}),(0,i.jsx)("div",{className:"text-default text-sm",children:(0,i.jsx)(Q.T,{rich_text_body:n,editable:!1},(0,X.uniqueId)("tiptap_"))})]})]}):null};ex.propTypes={action:ef().object,hasSeparator:ef().bool};var ej={label:(0,o.t)("settings.workflows.form.actions.send_notification_to_member"),value:"send_notification_to_member",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-mobile",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,f.B2)(),t=e.paramsPath,r=e.isViewOnlyMode,n=(0,u.wh)().currentCommunity.root_url,a=(0,c.Gc)(),s=a.getValues,p=a.setValue,b=s("".concat(t,".path"));return(0,l.useEffect)(function(){if(b){if(b.match(/^\//)){var e=b.replace(/^\//,"");p("".concat(t,".path"),e);return}var r=b.split("://");if(!(r.length<=1)){var n=r[1].split("/");if(n.length<=1)return void p("".concat(t,".path"),"");var i=n.slice(1).join("/");p("".concat(t,".path"),i)}}},[b]),(0,i.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,i.jsx)(d.l.Item,{name:"".concat(t,".path"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)("settings.workflows.form.path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,o.t)("settings.workflows.form.path.placeholder"),rules:{pattern:{value:eg.i4,message:(0,o.t)("settings.workflows.form.path.error")}},children:(0,i.jsx)(d.l.Input,{prefix:(0,i.jsx)("div",{className:"whitespace-nowrap pl-4 pr-2",children:(0,i.jsx)(v.Z.LabelMd,{children:"".concat(n,"/")})})})}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.form.message_body")}),(0,i.jsx)(m._,{placeholder:(0,o.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(t,".message"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",maxLength:150,disabled:r,type:"workflow"})]})]})},viewComponent:ex,historyDetailViewComponent:function(e){var t=e.body,r=t.path,n=t.message,a=(0,u.wh)().currentCommunity,s=(null!=a?a:{}).root_url;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_notification_to_member.path")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.Z.LabelSm,{children:"https://".concat(s,"/").concat(r)})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_notification_to_member.message")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(Q.T,{editable:!1,rich_text_body:n,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"notification",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},ew={label:(0,o.t)("settings.workflows.form.actions.enable_messaging_on_member"),value:"enable_messaging_on_member",group:(0,o.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,i.jsx)(s.JO,{type:"16-enable-DM",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.body.community_member_id;return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(eu.q,{communityMemberId:t})})]})},icon:"chat",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY,disablable:!0,disableToolTipText:(0,o.t)("workflows_v2.action_selector.enable_dm_for_action_tooltip")},eO={label:(0,o.t)("settings.workflows.form.actions.disable_messaging_on_member"),value:"disable_messaging_on_member",group:(0,o.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,i.jsx)(s.JO,{type:"16-disable-DM",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=new URL(e.url).pathname.split("/").pop();return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(eu.q,{communityMemberId:t})})]})},icon:"chat",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY,disablable:!0,disableToolTipText:(0,o.t)("workflows_v2.action_selector.enable_dm_for_action_tooltip")},eS=r(31695),ek=r(50449),eP=r(91112),eC=r(34352),eN=r(41901),eA=r(70442),eI=r(21835),eE=r(82751),eT=r(90290),eL=r(73129),eD=r(32898),eM=r(88670),eR=r(85122),eB=r(19677),eF=r(76896),ez=r(32309),eU=r(88853);function eZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var eq=function(){var e,t=(0,eA.$B)(),r=t.path,n=t.params,i=(e=(0,l.useState)({contentPath:"",editPath:"",listTemplatePath:"",previewTemplatePath:"",visualBuilderPath:""}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eZ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eZ(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s="".concat(r,"/send-email/:broadcastId"),c="".concat(s,"/visual-builder");return{editorUrls:o,setEditorUrlsForBroadcast:function(e){a({editPath:"",listTemplatePath:"",previewTemplatePath:"",visualBuilderPath:(0,eA.Gn)(c,eG({broadcastId:e},n)),contentPath:(0,eA.Gn)(s,eG({broadcastId:e},n))})}}},eV=r(83235);function eH(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eW(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eH(o,n,i,a,s,"next",e)}function s(e){eH(o,n,i,a,s,"throw",e)}a(void 0)})}}function eQ(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var eJ="settings.workflows.form",eK=function(e){var t=e.lastUpdatedAt,r=eq(),n=r.editorUrls,a=r.setEditorUrlsForBroadcast,s=(0,c.Gc)(),u=s.watch,d=s.setValue,p=(0,f.B2)().paramsPath,m=(0,eA.k6)(),b=(0,eM.F)(),y=b.handleTestEmail,g=b.isSending,_=(0,eE.z)(),x=_.modalElement,j=_.openModal,w=(0,eD.a)().doesTemplatesExist,O=t?"".concat((0,eR.ie)(t,{day:"2-digit",month:"short",year:"numeric"})," ").concat((0,o.t)("workflows_v2.action_selector.email.at")," ").concat((0,eR.ie)(t,{hour:"2-digit",minute:"2-digit",hour12:!0})):void 0,S=u("".concat(p,".email_content")),k=u("".concat(p,".visual_email_builder_content")),P=u("".concat(p,".broadcast_id")),C=(0,eV.q)(P?Number(P):null).onUpsert,N=(0,f.ol)(),A=N.doesActionhasServerId,I=N.saveAction,E=(0,f.B2)(),T=E.action,L=E.path,D=(0,ez.l)(L).value,M=(0,eU.n)().getPathToContentEditor,R=!!S||!!k;return(0,l.useEffect)(function(){eW(function(){var e,t,r;return eQ(this,function(n){switch(n.label){case 0:if(!(A(T)&&S&&!P))return[3,3];return[4,C()];case 1:return t=null==(e=n.sent())?void 0:e.id,(0,eI.Z)(t,"Broadcast ID is required to start writing email"),r=D,d("".concat(p,".broadcast_id"),t),[4,I({path:L,action:r,skipOpenNext:!0})];case 2:n.sent(),n.label=3;case 3:return[2]}})})()},[]),(0,i.jsxs)("div",{className:"w-full space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",color:"text-very-dark",children:(0,o.t)([eJ,"email_content"])}),(0,i.jsx)(v.Z.LabelXs,{color:"text-default",children:R&&O?(0,o.t)(["workflows_v2.action_selector.email","last_updated_at"],{timestamp:O}):(0,o.t)([eJ,"email_content_description"])})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[R&&(0,i.jsx)(h.z,{variant:"secondary-light",type:"button",onClick:y,disabled:g,children:(0,o.t)("workflows_v2.action_selector.email.send_a_test")}),(0,i.jsx)(h.z,{variant:"secondary-light",type:"button",onClick:function(){return eW(function(){var e,t,r;return eQ(this,function(n){switch(n.label){case 0:return[4,C()];case 1:return t=null==(e=n.sent())?void 0:e.id,r=!!k,(0,eI.Z)(t,"Broadcast ID is required to start writing email"),d("".concat(p,".broadcast_id"),t),a(t.toString()),w?m.push(M({hasEmailContent:R,broadcastId:t,isVisualEmailBuilderContent:r})):j(),[2]}})})()},disabled:g,children:R?(0,o.t)("edit"):(0,o.t)([eJ,"start_writing"])})]})]}),(0,i.jsx)("div",{className:"bg-secondary max-h-60 overflow-y-auto rounded-lg px-6 py-5",children:(0,i.jsx)("div",{className:"bg-primary h-[25rem] w-full max-w-[24rem] rounded-lg p-6 shadow",children:R?S?(0,i.jsx)(eB.C,{content:S}):(0,i.jsx)(eT.z,{}):(0,i.jsx)(eF.gi,{variant:"email-preview"})})}),(0,i.jsx)(eL.L,{paths:n,children:x})]})},e$="settings.workflows.action_messages.send_email",eX=r(99643),eY=r(67579),e0=r(63142),e1=r(16866),e2=r(88894);function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e6(){var e,t=(0,eX.U)().isLoading,r=(e=(0,eY.Z)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return e3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e3(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1];return t?(0,i.jsx)(y.a,{}):(0,i.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,i.jsx)(e2.h,{}),(0,i.jsx)(e0.J,{}),(0,i.jsx)(e1.L,{isOpen:n,onClose:o})]})}var e4={label:(0,o.t)("settings.workflows.form.actions.send_email"),textLabel:(0,o.t)("settings.workflows.form.actions.send_email"),value:"send_email",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-email",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e,t=(0,f.B2)().paramsPath,r=(0,c.Gc)(),n=r.watch,a=r.setValue,s=n("".concat(t,".broadcast_id")),l=(0,ek.t)({id:s,enabled:!!s,onSuccess:function(e){var r,n,i,o;a("".concat(t,".internal_name"),e.internal_name),a("".concat(t,".subject"),null==(r=e.broadcast_content)?void 0:r.subject),a("".concat(t,".preview_text"),null==(n=e.broadcast_content)?void 0:n.preview_text),a("".concat(t,".email_content"),null==(i=e.broadcast_content)?void 0:i.email_content),a("".concat(t,".visual_email_builder_content"),null==(o=e.broadcast_content)?void 0:o.visual_email_builder_content)}});return(0,i.jsxs)("div",{className:"react-form flex flex-col gap-y-7",children:[(0,i.jsx)(d.l.Item,{name:"".concat(t,".internal_name"),label:(0,o.t)(["settings.workflows.form","internal_name"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,isFirstChild:!0,rules:{maxLength:{value:eS.Mb,message:(0,o.t)(["settings.emails.broadcasts","internal_name_too_long"])}},children:(0,i.jsx)(d.l.Input,{})}),(0,i.jsx)(eN.O,{fieldName:"".concat(t,".subject")}),(0,i.jsx)(eC.W,{fieldName:"".concat(t,".preview_text")}),(0,i.jsx)(eP.X,{id:s,children:(0,i.jsx)(eK,{lastUpdatedAt:null==(e=l.data)?void 0:e.updated_at})})]})},viewComponent:function(e){var t=(e.action||{}).api_params,r=function(){if(t&&"broadcast_id"in t)return Number(t.broadcast_id);(0,eI.Z)(!1,"Broadcast ID is required for send_email action")};return(0,i.jsx)(eP.X,{id:r(),children:(0,i.jsx)(eX.x,{id:r(),children:(0,i.jsx)(e6,{})})})},historyDetailViewComponent:function(e){var t,r,n=e.apiParams.broadcast_id,a=(0,ek.t)({id:Number(n)}),s=a.data;return a.isLoading?(0,i.jsx)(y.a,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)([e$,"internal_name"])})}),(0,i.jsx)("div",{className:"w-3/4",children:null==s?void 0:s.internal_name})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)([e$,"subject"])})}),(0,i.jsx)("div",{className:"w-3/4",children:null==s||null==(t=s.broadcast_content)?void 0:t.subject})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)([e$,"preview_text"])})}),(0,i.jsx)("div",{className:"w-3/4",children:null==s||null==(r=s.broadcast_content)?void 0:r.preview_text})]})]})},icon:"email",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.MH_ONLY},e5={label:(0,o.t)("settings.workflows.form.actions.unsubscribe"),value:"unsubscribe",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-unsubscribe",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.body.contact_id;return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(eu.q,{communityMemberId:t})})]})},icon:"unsubscribe",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY}},63142:function(e,t,r){"use strict";r.d(t,{J:()=>l});var n=r(85893),i=r(84326),o=r(99643),a=r(53973),s="settings.workflows.view";function l(){var e=(0,o.U)().data;if(!e)return null;var t=e.delivered,r=e.opened,l=e.clicked,c=e.recipient_count,u=e.sent||c;return(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsx)("div",{className:"border-hover bg-secondary mt-3 overflow-hidden rounded-lg border",children:(0,n.jsxs)("div",{className:"divide-primary flex items-center justify-around divide-x py-3 text-center",children:[(0,n.jsx)(a.j,{total:u,label:(0,i.t)([s,"delivered"]),value:t}),(0,n.jsx)(a.j,{total:u,label:(0,i.t)([s,"opened"]),value:r}),(0,n.jsx)(a.j,{total:u,label:(0,i.t)([s,"clicked"]),value:l})]})})})}},16866:function(e,t,r){"use strict";r.d(t,{L:()=>y});var n=r(85893),i=r(84326),o=r(64115),a=r(99643),s=r(80374),l=r(51169),c=r(34519),u=r(21835),d=r(34870),f=r(24589),p=r(41553),m=r(8778),b="settings.workflows.view",h=function(){var e=(0,a.U)().data;(0,u.Z)(e,"Broadcast data must be present");var t=e.subject,r=e.first_delivery_at,o=void 0===r?null:r,s=e.recipient_count;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-1 gap-y-1",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(p.Z.LabelSm,{weight:"semibold",color:"text-default",children:(0,i.t)([b,"subject"])}),(0,n.jsx)(p.Z.LabelSm,{color:"text-default",children:void 0===t?"":t})]}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(p.Z.LabelSm,{weight:"semibold",color:"text-default",as:"div",children:(0,i.t)([b,"first_delivery"])}),(0,n.jsx)(p.Z.LabelSm,{color:"text-default",as:"div",children:o?(0,i.t)([b,"sent_on_date_time"],{datetime:(0,d.w)({dateTime:new Date(o),format:d.f.short_date_at_short_time})}):(0,i.t)("n/a")})]})]}),(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(f.V,{recipient_type:"all_recipients",className:"text-dark flex items-center gap-x-1 decoration-current decoration-dashed underline-offset-2",children:(0,n.jsx)(m.u,{recipientCount:void 0===s?null:s})})})]})};function y(e){var t=e.isOpen,r=e.onClose,u=(0,a.U)().isLoading;return(0,n.jsxs)(c.u_,{isOpen:t,onClose:r,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsxs)(c.u_.Content,{size:"2xl",shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(c.u_.Header,{children:[(0,n.jsx)(c.u_.Title,{children:(0,i.t)("settings.workflows.view.email_report")}),(0,n.jsx)(c.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(c.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(c.u_.Body,{className:"pb-6 pt-4",children:u?(0,n.jsx)(l.a,{}):(0,n.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,n.jsx)(h,{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.o,{}),(0,n.jsx)(o.l,{})]})]})})]})]})}},8778:function(e,t,r){"use strict";r.d(t,{u:()=>l});var n=r(85893),i=r(84326),o=r(63676),a=r(41553),s="settings.workflows.view",l=function(e){var t=e.recipientCount;return null===t?(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",color:"text-default",children:(0,i.t)([s,"no_recipients"])}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",color:"text-default",children:(0,o.HA)(t)}),(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",color:"text-very-dark",children:(0,i.t)([s,"recipients"])})]})}},53973:function(e,t,r){"use strict";r.d(t,{j:()=>s});var n=r(85893),i=r(74481),o=r(63676),a=r(41553);function s(e){var t=e.value,r=e.total,s=e.label;return(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-y-1.5",children:[(0,n.jsx)(a.Z.LabelMd,{weight:"bold",color:"text-very-dark",children:(0,i.M)({total:r,value:t})}),(0,n.jsxs)("div",{className:"flex justify-center gap-x-1",children:[(0,n.jsx)(a.Z.LabelXs,{weight:"medium",color:"text-default",children:s}),(0,n.jsx)(a.Z.LabelXs,{weight:"medium",color:"text-default",children:t?(0,o.HA)(t):0})]})]})}},88894:function(e,t,r){"use strict";r.d(t,{h:()=>h});var n=r(85893),i=r(67579),o=r(84326),a=r(91112),s=r(39905),l=r(84745),c=r(51169),u=r(34519);function d(e){var t=e.isOpen,r=e.onClose,i=(0,a.u)(),s=i.data,d=i.isLoading;return(0,n.jsxs)(u.u_,{isOpen:t,onClose:r,children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{size:"xl",shouldCloseOnOutsideClick:!0,className:"grid grid-rows-[auto,_1fr]",children:[(0,n.jsxs)(u.u_.Header,{children:[(0,n.jsx)(u.u_.Title,{children:(0,o.t)("settings.workflows.view.view_email")}),(0,n.jsx)(u.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(u.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(u.u_.Body,{className:"pb-6 pt-4",children:d||!s?(0,n.jsx)(c.a,{}):(0,n.jsx)("div",{className:"border-primary h-full overflow-hidden rounded-xl border",children:(0,n.jsx)(l.M,{})})})]})]})}var f=r(19677);function p(){var e,t=(0,a.u)(),r=t.data,i=t.isLoading,o=null==r||null==(e=r.broadcast_content)?void 0:e.email_content;return i||!o?null:(0,n.jsx)("div",{className:"border-primary pointer-events-none relative aspect-square h-14 w-14 cursor-default select-none overflow-hidden rounded-md border",children:(0,n.jsx)("div",{className:"absolute h-[560px] w-[560px] origin-top-left scale-[10%] px-8 py-4",children:(0,n.jsx)(f.C,{content:o})})})}var m=r(63647);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t,r,l=e.hideViewEmailModal,c=(0,a.u)().data,u=(t=(0,i.Z)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],h=u[1];return(0,n.jsxs)("div",{className:"flex justify-between gap-x-2",children:[(0,n.jsx)(m.Z,{inlinePreviewComponent:(0,n.jsx)(p,{}),internalName:null==c?void 0:c.internal_name,subject:null==c||null==(r=c.broadcast_content)?void 0:r.subject}),!(void 0!==l&&l)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.z,{variant:"secondary-light",type:"button",onClick:h,children:(0,o.t)(["settings.workflows.view","view_email"])})}),(0,n.jsx)(d,{isOpen:f,onClose:h})]})]})}},63647:function(e,t,r){"use strict";r.d(t,{Z:()=>s});var n=r(85893),i=r(84326),o=r(41553),a="settings.workflows.view";let s=function(e){var t=e.inlinePreviewComponent,r=e.internalName,s=e.subject;return(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-x-4",children:[t,(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(o.Z.LabelSm,{weight:"semibold",children:r||(0,i.t)([a,"untitled_email"])}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(o.Z.LabelXs,{weight:"medium",children:(0,i.t)([a,"subject"])}),(0,n.jsx)(o.Z.LabelXs,{children:s||(0,i.t)([a,"no_subject_line"])})]})]})]})}},88853:function(e,t,r){"use strict";r.d(t,{n:()=>a});var n=r(70442),i=r(32898);function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var a=function(){var e=(0,n.$B)(),t=e.path,r=e.params,a="".concat(t,"/send-email/:broadcastId"),s="".concat(a,"/templates"),l="".concat(a,"/visual-builder"),c=(0,i.a)().doesTemplatesExist;return{getPathToContentEditor:function(e){var t=e.hasEmailContent,i=e.broadcastId,u=e.isVisualEmailBuilderContent;return c&&!t?(0,n.Gn)(s,o({broadcastId:i},r)):u?(0,n.Gn)(l,o({broadcastId:i},r)):(0,n.Gn)(a,o({broadcastId:i},r))},contentPath:a}}},83235:function(e,t,r){"use strict";r.d(t,{q:()=>d});var n=r(52293),i=r(55471),o=r(57086),a=r(67792),s=r(47532);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=function(e){var t=(0,s.B2)().paramsPath,r=(0,n.Gc)().getValues,d=(0,o.b)(),f=d.data,p=d.mutateAsync,m=Number(null!=e?e:null==f?void 0:f.id),b=(0,a.j)({id:m}).mutateAsync;return{onUpsert:function(){var e,n=(e=r(["".concat(t,".internal_name"),"".concat(t,".subject"),"".concat(t,".preview_text"),"".concat(t,".email_content"),"".concat(t,".visual_email_builder_content.content")]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,5)||function(e,t){if(e){if("string"==typeof e)return l(e,5);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,5)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],s=n[2],d=n[3],f=n[4],h={internal_name:o,broadcast_type:i.SL.workflow};return m?b({body:u(c({},h),{broadcast_content:{subject:a,preview_text:s,email_content:d,visual_email_builder_content:f}})}):p(u(c({},h),{broadcast_content_attributes:{subject:a,preview_text:s,email_content:d,visual_email_builder_content:f}}))},broadcastId:m}}},34542:function(e,t,r){"use strict";r.d(t,{m:()=>w,T:()=>Z});var n=r(85893),i=r(84326),o=r(84555),a=r(57363),s=r(48996),l=r(39788),c=r(51169),u=r(41553),d=r(47532),f="settings.workflows.form",p=r(14998),m=r(45697),b=r.n(m),h=r(41609),y=r.n(h),v=r(69300),g=r(58892),_=function(e){var t=e.id,r=(0,v.a)(t),o=r.data,a=void 0===o?{}:o;return r.isLoading?(0,n.jsx)(g.C,{isLoading:!0}):y()(a)?(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.view.deleted_paywall")}):(0,n.jsx)(u.Z.LabelSm,{children:a.name||a.display_name})};_.propTypes={id:b().number.isRequired};var x=r(96846),j=function(e){var t=((e.action||{}).api_params||{}).paywall_id,r=(0,v.a)(t),o=r.data,a=void 0===o?{}:o,s=r.isLoading;return a||s?(0,n.jsx)(x.P,{children:(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)(["settings.workflows.view","resources.paywall"])}),(0,n.jsx)("div",{children:s?(0,n.jsx)(g.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:a.name||a.display_name})})]})}):null};j.propTypes={action:b().object};var w={label:(0,i.t)("settings.workflows.form.actions.cancel_community_member_paywall_subscription"),value:"cancel_community_member_paywall_subscription",group:(0,i.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,n.jsx)(a.JO,{type:"16-remove-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.y)(),r=t.activePaywalls,o=t.isLoading,a=t.isSuccess,p=r.map(function(e){return{value:e.id,label:e.display_name}});return o?(0,n.jsx)(c.a,{center:!0}):a?(0,n.jsx)(l.N,{name:"".concat(e,".paywall_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([f,"select_paywall"])}),options:p,rules:{required:(0,i.t)([f,"errors.required"])},emptyMessage:(0,i.t)([f,"errors.paywalls.not_found"])}):(0,n.jsx)(u.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([f,"paywalls.fetch_failed"])})})},viewComponent:j,historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,o=t.community_member_id,a=r.paywall_id;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.paywall")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(_,{id:a})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(p.q,{communityMemberId:o})})]})]})},isApplicableToMembersOnly:!0,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY},O=r(52293),S=r(69288),k=r(51466),P="settings.workflows.form",C=function(){var e=(0,d.B2)().paramsPath;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([P,"notify_member"])}),(0,n.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,n.jsx)(k.l.ToggleSwitch,{name:"".concat(e,".send_notification_subscription_created_by_admin"),variant:"small"}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("span",{children:(0,i.t)([P,"send_notification_subscription_created_by_admin"])})})]})]})},N=r(60221),A="settings.workflows.form",I=function(e){var t=e.paywallPrices,r=(0,d.B2)().paramsPath,o=(0,N.PI)(t).map(function(e){return{value:e.id,label:e.display_name}});return(0,n.jsx)(l.N,{name:"".concat(r,".paywall_price_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([A,"select_paywall_price"])}),options:o,hidePlaceholder:!0,rules:{required:(0,i.t)([A,"errors.required"])},emptyMessage:(0,i.t)([A,"errors.paywalls.not_found"])})};I.propTypes={paywallPrices:b().array.isRequired};var E=r(28347),T="settings.workflows.form",L=function(e){var t=e.disabled,r=e.name,o={pattern:{value:/^[0-9]+$/,message:(0,i.t)("create_paywall_subscription_modal.warning.only_number_are_allowed")},required:(0,i.t)("create_paywall_subscription_modal.warning.only_number_are_allowed"),min:{value:E.dy,message:(0,i.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:E.ut,message:(0,i.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}};return(0,n.jsx)(k.l.Item,{name:r,hideDescription:!0,label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([T,"trial_days"])}),hideBorder:!0,isFirstChild:!0,hiddenField:!0,className:"flex flex-1 flex-col gap-1",errorClassName:"text-red-500 text-xs",rules:o,placeholder:(0,i.t)([T,"trial_days_placeholder"]),children:(0,n.jsx)(k.l.Input,{name:"trial_days",inputMode:"numeric",suffix:(0,i.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:t})})};L.propTypes={disabled:b().bool,name:b().string.isRequired};var D="settings.workflows.form",M=r(88767),R=r(1737),B=function(e){var t=e.paywallId,r=e.priceId,n=(0,M.useQuery)(R.v.paywallPrices.show({paywallId:t,id:r})),i=n.data;return{paywallPrice:void 0===i?{}:i,isLoading:n.isLoading,isSuccess:n.isSuccess}},F=function(e){var t=B({paywallId:e.paywallId,priceId:e.paywallPriceId}),r=t.paywallPrice,o=void 0===r?{}:r;return t.isLoading?(0,n.jsx)(g.C,{isLoading:!0}):y()(o)?(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.view.deleted_paywall_price")}):(0,n.jsxs)(u.Z.LabelSm,{children:[o.paywall_name," - ",o.display_name]})};F.propTypes={paywallPriceId:b().number.isRequired,paywallId:b().number.isRequired};var z="settings.workflows.view",U=function(e){var t=(e.action||{}).api_params,r=void 0===t?{}:t,o=r.paywall_price_id,a=r.paywall_id,s=r.trial_days,l=r.send_notification_subscription_created_by_admin,c=B({paywallId:a,priceId:o}),d=c.paywallPrice,f=c.isLoading;return d||f?(0,n.jsxs)(x.P,{children:[(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([z,"resources.paywall"])}),(0,n.jsx)("div",{children:f?(0,n.jsx)(g.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:y()(d)?(0,i.t)("settings.workflows.view.deleted_paywall"):d.paywall_name||d.paywall_display_name})})]}),(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([z,"resources.paywall_price"])}),(0,n.jsx)("div",{children:f?(0,n.jsx)(g.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:y()(d)?(0,i.t)("settings.workflows.view.deleted_paywall_price"):d.display_name})})]}),(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([z,"trial_days"])}),(0,n.jsx)("div",{children:f?(0,n.jsx)(g.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:s})})]}),(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([z,"send_notification_subscription_created_by_admin"])}),(0,n.jsx)("div",{children:f?(0,n.jsx)(g.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:l?(0,i.t)("yes"):(0,i.t)("no")})})]})]}):null};U.propTypes={action:b().object};var Z={label:(0,i.t)("settings.workflows.form.actions.subscribe_community_member_to_paywall_trial"),value:"subscribe_community_member_to_paywall_trial",group:(0,i.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,n.jsx)(a.JO,{type:"16-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.y)(),r=t.isLoading,o=t.isSuccess,a=t.activePaywalls,f=(0,(0,O.Gc)().watch)("".concat(e,".paywall_id")),p=[],m={};return((0,S.Jy)(a).forEach(function(e){p.push({value:e.id.toString(),label:e.name||e.display_name}),m[e.id]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e)}),r)?(0,n.jsx)(c.a,{center:!0}):o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.N,{name:"".concat(e,".paywall_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([D,"select_paywall"])}),options:p,rules:{required:(0,i.t)([D,"errors.required"])},emptyMessage:(0,i.t)([D,"errors.paywalls.not_found"])}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,n.jsx)(I,{paywallPrices:m[f].stripe_prices_attributes}),(0,n.jsx)(L,{name:"".concat(e,".trial_days"),disabled:r})]}),(0,n.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,n.jsx)(C,{})})]})]}):(0,n.jsx)(u.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([D,"errors.paywall_prices.fetch_failed"])})})},viewComponent:U,historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,o=t.community_member_id,a=t.trial_days,s=null!=r?r:{},l=s.paywall_id,c=s.paywall_price_id;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.paywall_price")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(F,{paywallId:l,paywallPriceId:c})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(p.q,{communityMemberId:o})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.trial_days")})}),(0,n.jsx)("div",{className:"w-3/4",children:a})]})]})},isApplicableToMembersOnly:!0,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},65510:function(e,t,r){"use strict";r.d(t,{p:()=>a});var n=r(85893),i=r(84326),o=r(39905),a=function(e){var t=e.handleTestWebhook,r=e.isDisabled,a=e.isTestingWebhook,s=e.isWebhookTestSuccessful,l=e.isWebhookUrlChanged,c=e.isWebhookTested,u=e.triggerType;return(0,n.jsx)(o.z,{disabled:r,onClick:t,large:!1,variant:"circle",type:"button",children:a?(0,i.t)("settings.workflows.form.testing_webhook"):(!s||l)&&c?(0,i.t)("settings.workflows.form.test_again"):u&&""!==u?(0,i.t)("settings.workflows.form.test_webhook"):(0,i.t)("settings.workflows.form.select_entry_rule")})}},25076:function(e,t,r){"use strict";r.d(t,{j:()=>_});var n=r(85893),i=r(84326),o=r(32050),a=r(41553),s=r(57105),l=r(34519),c=r(67294),u=r(34870),d=r(11944),f=r(57064),p=r(74472),m=function(e){var t=e.testResult,r=e.onClose,o=function(e){try{return JSON.stringify(e,null,2)}catch(e){return console.error("Error parsing JSON:",e),""}},s=(0,c.useMemo)(function(){return{request:o(t.request_body),response:o(t.response_body)}},[t]),m=(0,u.w)({dateTime:new Date(t.date_time),format:"short_date_at_short_time"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.u_.Header,{children:[(0,n.jsx)(l.u_.Title,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.webhook_test_result")}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:r})})]}),(0,n.jsxs)(l.u_.Body,{children:[(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"border-dark rounded-lg border",children:(0,n.jsxs)(d.O.Group,{children:[(0,n.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 pt-5",children:[(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,n.jsx)(p.x,{result:(null==t?void 0:t.success)?"success":"failed",isBadge:!1}),(0,n.jsx)(a.Z.LabelSm,{color:"text-default",as:"time",children:m})]})}),(0,n.jsxs)(d.O.List,{children:[(0,n.jsx)(d.O,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.webhook_url")}),(0,n.jsx)(d.O,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.request_body")}),(0,n.jsx)(d.O,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.response_body")})]})]}),(0,n.jsxs)(d.O.Panels,{children:[(0,n.jsx)(d.O.Panel,{className:"px-6 py-5",children:t.url}),(0,n.jsx)(d.O.Panel,{className:"p-2",children:(0,n.jsx)(f.X,{code:s.request})}),(0,n.jsx)(d.O.Panel,{className:"p-2",children:(0,n.jsx)(f.X,{code:s.response})})]})]})})}),(0,n.jsx)("div",{className:"mt-5"})]})]})},b=function(e){var t=e.testResult,r=(0,s.dd)();return(0,n.jsxs)(l.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsx)(l.u_.Content,{size:"lg",children:(0,n.jsx)(m,{testResult:t,onClose:r.hide})})]})},h=s.gk.create(function(e){return(0,n.jsx)(b,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))});function y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var v={type:"success",title:(0,i.t)("settings.workflows.action_messages.send_to_webhook.test_success"),description:(0,i.t)("settings.workflows.action_messages.send_to_webhook.success_support_text")},g={type:"alert",title:(0,i.t)("settings.workflows.action_messages.send_to_webhook.test_failed"),description:(0,i.t)("settings.workflows.action_messages.send_to_webhook.error_support_text")},_=function(e){var t=e.isWebhookTestSuccessful,r=e.webhookTestResult,l=(0,s.dd)(h),c=t?v:g,u=c.type,d=c.title,f=c.description,p=(0,n.jsxs)("span",{className:"flex gap-x-1",children:[(0,n.jsx)(a.Z.LabelSm,{children:f}),(0,n.jsx)("button",{type:"button",className:"border-light hover:border-darkest border-b border-dashed",onClick:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,l.show({testResult:r})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:(0,n.jsx)(a.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.show_test_data_output")})})]});return(0,n.jsx)("div",{className:"mb-9",children:(0,n.jsx)(o.b,{type:u,title:d,description:p})})}},3178:function(e,t,r){"use strict";r.d(t,{l:()=>n.l});var n=r(42694)},42694:function(e,t,r){"use strict";r.d(t,{l:()=>_,E:()=>x});var n=r(85893),i=r(84326),o=r(57363),a=r(84555),s=r(27036),l=r(73622),c=r(51466),u=r(41553),d=r(47532),f=function(){var e=(0,d.B2)(),t=e.paramsPath,r=e.isViewOnlyMode;return(0,n.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,n.jsx)(c.l.Item,{name:"".concat(t,".url"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.webhook_path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.webhook_path.placeholder"),rules:{pattern:{value:l.lu,message:(0,i.t)("settings.workflows.form.webhook_path.error")}},children:(0,n.jsx)(c.l.Input,{})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.optional_description")}),(0,n.jsx)(s._,{placeholder:(0,i.t)("settings.workflows.form.optional_description_placeholder"),name:"".concat(t,".description.body"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",type:"workflow",disabled:r})]})]})},p=function(e){var t=e.url;return(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.url")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:t})})]})},m=r(45697),b=r.n(m),h=r(65121),y=r(96846),v="settings.workflows.view",g=function(e){var t=(e.action||{}).api_params||{},r=t.url,o=t.description;return(0,n.jsxs)(y.P,{children:[r&&(0,n.jsxs)(y.P.Section,{children:[(0,n.jsx)(y.P.Title,{children:(0,i.t)([v,"webhook.url"])}),(0,n.jsx)("div",{children:(0,n.jsx)(u.Z.LabelSm,{children:r})})]}),(0,n.jsxs)(y.P.Section,{children:[(0,n.jsx)(y.P.Title,{children:(0,i.t)([v,"webhook.description"])}),o?(0,n.jsx)("div",{className:"text-default text-sm",children:(0,n.jsx)(h.T,{rich_text_body:o,editable:!1})}):(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)([v,"webhook.empty_description"])})]})]})};g.propTypes={action:b().object,hasSeparator:b().bool};var _={label:(0,i.t)("settings.workflows.form.actions.send_to_webhook"),textLabel:(0,i.t)("settings.workflows.form.action_groups.webhook.send_to_webhook"),value:"send_to_webhook",group:(0,i.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,n.jsx)(o.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:f,viewComponent:g,historyDetailViewComponent:p,availability:["dynamic"],eligiblePlanTiers:a.Db,isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.ENTERPRISE_AND_PLUS_ONLY},x={label:(0,i.t)("settings.workflows.form.actions.send_to_webhook"),textLabel:(0,i.t)("settings.workflows.form.actions.send_to_webhook"),value:"send_to_webhook",group:(0,i.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,n.jsx)(o.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:f,viewComponent:g,historyDetailViewComponent:p,availability:["dynamic"],eligiblePlanTiers:a.Db,isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.ENTERPRISE_AND_PLUS_ONLY}},85149:function(e,t,r){"use strict";r.d(t,{U:()=>ek});var n=r(82470),i=r(85893),o=r(84326),a=r(84555),s=r(17990),l=r(57363),c=r(52293),u=r(76492),d=r(89013),f=r(39788),p=r(51169),m=r(41553),b=r(47532),h="settings.workflows.form",y=function(){var e=(0,b.B2)().paramsPath,t=(0,c.Gc)().setValue,r=(0,u.S)(),n=r.data,a=r.isLoading,s=r.isError,l=(0,d.O)({selectNewAccessGroup:function(r){return t("".concat(e,".access_group_id"),r.id,{shouldDirty:!0,shouldValidate:!0})}}).openNewAccessGroupModal;if(a)return(0,i.jsx)(p.a,{center:!0});if(s)return(0,i.jsx)(m.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([h,"errors.access_groups.fetch_failed"])})});var y=null==n?void 0:n.map(function(e){return{label:e.name,value:e.id}});return(0,i.jsx)(f.N,{name:"".concat(e,".access_group_id"),label:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)([h,"select_access_group"])}),options:y,rules:{required:(0,o.t)([h,"errors.required"])},emptyMessage:(0,o.t)([h,"errors.access_groups.not_found"]),createLinkLabel:(0,o.t)("settings.access_groups.admin.entry_points.association.actions.create_new_access_group"),onCreateLinkClick:l})},v=r(14998),g=r(37140),_=function(e){var t=e.id,r=(0,g.t)(t),n=r.accessGroup;return r.isLoadingAccessGroup?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,i.jsx)("span",{children:null==n?void 0:n.name})},x=function(e){var t=e.body,r=e.url,n=t.community_member_id,a=Number(new URL(r).pathname.split("/")[5]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.access_group")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(_,{id:a})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},j=r(58892),w=r(96846),O=function(e){var t=((e.action||{}).api_params||{}).access_group_id,r=(0,g.t)(t),n=r.accessGroup,a=r.isLoadingAccessGroup;return n||a?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","access_group"])}),(0,i.jsx)("div",{children:a?(0,i.jsx)(j.C,{isLoading:a}):(0,i.jsx)(m.Z.LabelSm,{children:null==n?void 0:n.name})})]})}):null},S={label:(0,o.t)("settings.workflows.form.actions.add_community_member_to_access_group"),value:"add_community_member_to_access_group",group:(0,o.t)("settings.workflows.form.action_groups.access_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder",size:16,className:"!h-4 !w-4"}),formComponent:y,viewComponent:O,historyDetailViewComponent:x,icon:"user",isApplicableToMembersOnly:!0,released:s.l,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},k={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_access_group"),value:"remove_community_member_from_access_group",group:(0,o.t)("settings.workflows.form.action_groups.access_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder-remove",size:16,className:"!h-4 !w-4"}),formComponent:y,viewComponent:O,historyDetailViewComponent:x,icon:"user-remove",isApplicableToMembersOnly:!0,released:s.l,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},P=r(97346),C=r(14711),N=r(84260),A=r(38998),I=r(44123),E=r(35476),T=r(76453),L="settings.workflows.form",D=r(45697),M=r.n(D),R=r(88767),B=r(51714),F=function(e){var t=e.eventId;return(0,R.useQuery)(["event",t],function(){return B.S.fetchEvent({id:t})})},z=function(e){var t=F({eventId:e.id}),r=t.data;return t.isLoading?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,i.jsx)("span",{children:r.name})};z.propTypes={id:M().number.isRequired};var U=function(e){var t=F({eventId:((e.action||{}).api_params||{}).event_id}),r=t.data,n=t.isLoading;return r||n?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","event"])}),(0,i.jsx)("div",{children:n?(0,i.jsx)(j.C,{isLoading:!0}):(0,i.jsx)(m.Z.LabelSm,{children:r.name})})]})}):null};U.propTypes={action:M().object};var Z={label:(0,o.t)("settings.workflows.form.actions.rsvp_member_to_event"),value:"rsvp_member_to_event",group:(0,o.t)("settings.workflows.form.action_groups.events"),leftAddon:(0,i.jsx)(l.JO,{type:"16-calendar-join-date",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,b.B2)().paramsPath,t=(0,T.i)({per_page:300}),r=t.data,n=t.isLoading,a=t.isError,s=(r||{}).records,l=(void 0===s?[]:s).map(function(e){var t=e.recurring?"".concat(e.name," ").concat((0,o.t)([L,"recurring_label"])):e.name,r=e.paid_event?"".concat(e.space_name,"  ").concat(e.start_date,"  ").concat(e.ticket_price):"".concat(e.space_name,"  ").concat(e.start_date);return{label:t,value:e.id,description:r}});return n?(0,i.jsx)(p.a,{center:!0}):a?(0,i.jsx)(m.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([L,"errors.upcoming_events.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".event_id"),label:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)([L,"which_event"])}),options:l,rules:{required:(0,o.t)([L,"errors.required"])},emptyMessage:(0,o.t)([L,"errors.upcoming_events.not_found"])})},viewComponent:U,historyDetailViewComponent:function(e){var t=e.body,r=t.event_id,n=t.community_member_id;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.event")})}),(0,i.jsx)(z,{id:r})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},icon:"event",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},G=r(39315),q=r(37401),V=r(30713),H="settings.workflows.form",W=function(){var e=(0,b.B2)().paramsPath,t=(0,V.t)(),r=t.memberTags,n=t.isLoading,a=t.isError,s=(void 0===r?[]:r).map(function(e){return{value:e.id,label:e.name}});return n?(0,i.jsx)(p.a,{center:!0}):a?(0,i.jsx)(m.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([H,"member_tags.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".member_tag_id"),label:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)([H,"select_tag"])}),options:s,rules:{required:(0,o.t)([H,"errors.required"])},emptyMessage:(0,o.t)([H,"errors.member_tags.not_found"])})},Q=r(91026),J=r(41609),K=r.n(J),$=function(e){var t=e.memberTagId,r=(0,Q.u)({id:t}),n=r.data;return r.isLoading?(0,i.jsx)(j.C,{isLoading:!0}):K()(n)?(0,i.jsx)(m.Z.LabelSm,{children:(0,o.t)("settings.workflows.view.deleted_member_tag")}):(0,i.jsx)(m.Z.LabelSm,{children:n.name})};$.propTypes={memberTagId:M().number.isRequired};var X=function(e){var t=e.body,r=t.member_tag_id,n=t.community_member_id,a=t.contact_id;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.tag")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)($,{memberTagId:r})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n||a})})]})]})},Y="settings.workflows.view",ee=function(e){var t=((e.action||{}).api_params||{}).member_tag_id,r=(0,Q.u)({id:t}),n=r.data,a=void 0===n?{}:n,s=r.isLoading;if(!a)return null;var l=K()(a)?(0,o.t)([Y,"deleted_member_tag"]):a.name;return(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)([Y,"member_tag"])}),(0,i.jsx)("div",{children:s?(0,i.jsx)(j.C,{isLoading:!0}):a&&(0,i.jsx)(j.C,{text:l})})]})})};ee.propTypes={action:M().object};var et={label:(0,o.t)("settings.workflows.form.actions.add_tag"),value:"add_tag_to_community_member",group:(0,o.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,i.jsx)(l.JO,{type:"16-tag",size:16,className:"!h-4 !w-4"}),formComponent:W,viewComponent:ee,historyDetailViewComponent:X,icon:"tag",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.MH_WITH_LOWER_OR_HIGHER_TIER_PLAN},er={label:(0,o.t)("settings.workflows.form.actions.remove_tag"),value:"remove_tag_from_community_member",group:(0,o.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,i.jsx)(l.JO,{type:"16-remove-tags",size:16,className:"!h-4 !w-4"}),formComponent:W,viewComponent:ee,historyDetailViewComponent:X,icon:"tag",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.MH_WITH_LOWER_OR_HIGHER_TIER_PLAN},en=r(34542),ei=r(54787),eo="settings.workflows.form",ea=function(){var e=(0,b.B2)().paramsPath,t=(0,ei.r)(),r=t.data,n=t.isLoading,a=t.isError,s=(r||{}).records,l=(void 0===s?[]:s).map(function(e){return{value:e.id,label:[e.space_group_name,e.name].filter(Boolean).join("  ")}});return n?(0,i.jsx)(p.a,{center:!0}):a?(0,i.jsx)(m.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([eo,"spaces.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".space_id"),label:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)([eo,"select_space"])}),options:l,rules:{required:(0,o.t)([eo,"errors.required"])},emptyMessage:(0,o.t)([eo,"errors.spaces.not_found"])})},es=r(13532),el=r(93199),ec=function(e){var t=e.id,r=e.options;return(0,R.useQuery)(["space",t],function(){return(0,el.UT)(es.av.spaces.show({id:t}))},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:!!t},void 0===r?{}:r))},eu=r(60589),ed=function(e){var t=ec({id:e.id}),r=t.data,n=t.isLoading,a=t.isError;return n?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):a?(0,i.jsx)("div",{className:"post__space",children:(0,i.jsx)("span",{children:(0,o.t)("settings.workflows.history.errors.space.not_found")})}):(0,i.jsxs)("div",{className:"post__space",children:[(0,eu.xt)(r)&&(0,i.jsx)("span",{children:null==r?void 0:r.emoji}),(0,i.jsx)("span",{children:null==r?void 0:r.name})]})},ef=function(e){var t=e.body,r=e.url,n=t.executor_member_id,a=new URL(r).pathname.split("/")[5];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.space")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ed,{id:a})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},ep=r(41342),em=function(e){var t=((e.action||{}).api_params||{}).space_id,r=(0,ep.T4)({spaceId:t}),n=r.data,a=r.isLoading;return n||a?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","space"])}),(0,i.jsx)("div",{children:a?(0,i.jsx)(j.C,{isLoading:!0}):(0,i.jsx)(m.Z.LabelSm,{children:n.name})})]})}):null};em.propTypes={action:M().object};var eb={label:(0,o.t)("settings.workflows.form.actions.add_community_member_to_space"),value:"add_community_member_to_space",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:ea,viewComponent:em,historyDetailViewComponent:ef,icon:"user",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eh={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_space"),value:"remove_community_member_from_space",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-space-directory-remove",size:16,className:"!h-4 !w-4"}),formComponent:ea,viewComponent:em,historyDetailViewComponent:ef,icon:"user-remove",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},ey="settings.workflows.form",ev=function(){var e=(0,b.B2)().paramsPath,t=(0,ep.e2)(),r=t.records,n=t.isLoading,a=t.isError,s=r.map(function(e){return{value:e.id,label:e.name}});return n?(0,i.jsx)(p.a,{center:!0}):a?(0,i.jsx)(m.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([ey,"space_groups.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".space_group_id"),label:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)([ey,"select_space_group"])}),options:s,rules:{required:(0,o.t)([ey,"errors.required"])},emptyMessage:(0,o.t)([ey,"errors.space_groups.not_found"])})};ev.propTypes={};var eg=function(e){var t=e.id,r=e.options;return(0,R.useQuery)(["space-group",t],function(){return(0,el.UT)(es.av.spaceGroups.show({id:t}))},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:!!t},void 0===r?{}:r))},e_=function(e){var t=eg({id:e.id}),r=t.data;return t.isLoading?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,i.jsx)("span",{children:r.name})};e_.propTypes={id:M().string.isRequired};var ex=function(e){var t=e.body,r=e.url,n=t.executor_member_id,a=new URL(r).pathname.split("/")[5];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.space_group")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(e_,{id:a})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},ej=function(e){var t=((e.action||{}).api_params||{}).space_group_id,r=(0,ep.p7)(t),n=r.data,a=void 0===n?{}:n,s=r.isLoading;return a||s?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","space_group"])}),(0,i.jsx)("div",{children:s?(0,i.jsx)(j.C,{isLoading:!0}):(0,i.jsx)(m.Z.LabelSm,{children:a.name})})]})}):null};ej.propTypes={action:M().object};var ew={label:(0,o.t)("settings.workflows.form.actions.add_community_member_to_space_group"),value:"add_community_member_to_space_group",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder",size:16,className:"!h-4 !w-4"}),formComponent:ev,viewComponent:ej,historyDetailViewComponent:ex,icon:"user",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eO={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_space_group"),value:"remove_community_member_from_space_group",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder-remove",size:16,className:"!h-4 !w-4"}),formComponent:ev,viewComponent:ej,historyDetailViewComponent:ex,icon:"user-remove",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eS=r(3178),ek=[C.w,I.m,A.c,P.o,N.l,q.Cz,q.MK,et,er,q.Ah,eb,eh,ew,eO,S,k,eS.l,en.m,en.T,Z,q.zW,q.TQ,q.KY,G.I,n.s,q.r1,E.M]},52634:function(e,t,r){"use strict";r.d(t,{U0:()=>i.U,mR:()=>a,LK:()=>n.L});var n=r(50202),i=r(85149),o=i.U.reduce(function(e,t){return e.set(t.value,t.icon),e},new Map),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return o.get(e)||t}},50202:function(e,t,r){"use strict";r.d(t,{L:()=>d,f:()=>c});var n=r(84326),i=r(4118),o=r(20153),a=r(65305),s=r(50362),l=r(85149),c=function(e){return void 0===e||("function"==typeof e?e():e)},u=new Map(a.r.map(function(e){return[e.value,e.label]})),d=function(){var e=(0,o.Z)(),t=(0,s.D)(),r=t.type,a=t.triggerType,d=t.isDynamic,f=e?l.U:l.U.filter(function(e){return c(e.released)});return{eligibleActions:(f=f.filter(function(e){return!e.availability||e.availability.includes(r)})).map(function(e){if((0,i.E5)(e.value,a))return e;if(d){var t,r,o=u.get(a)||a,s=(0,n.t)("workflows_v2.action_selector.action_restricted_by_trigger",{trigger:o});return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={disabled:!0,disabledReason:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}}).filter(Boolean)}}},4118:function(e,t,r){"use strict";r.d(t,{E5:()=>a,RG:()=>i});var n=JSON.parse('{"actions":{"ai_agents_post_comment":{"limited_to_triggers":["post_approved","post_liked","post_published"]},"ai_agents_report_post":{"limited_to_triggers":["post_published"]},"ai_agents_report_comment":{"limited_to_triggers":["post_comment_created"]},"ai_agents_hide_post_from_featured_areas":{"limited_to_triggers":["post_approved","post_liked","post_published"]},"ai_agents_rename_post_title":{"limited_to_triggers":["post_published"]},"ai_agents_send_dm":{"limited_to_triggers":["community_member_joined_community","event_starts_in_an_hour","event_published","event_ended_for_member","community_member_attended_live_event","community_member_rsvps_to_event","community_member_rsvps_to_recurring_event","community_member_completed_course","community_member_completed_lesson","community_member_completed_section","community_member_passed_quiz","community_member_failed_quiz","community_member_joined_space","community_member_leaves_space","community_member_joined_space_group","community_member_leaves_space_group","community_member_purchases_paywall","community_member_subscribed_to_paywall","community_member_unsubscribed_from_paywall","community_member_started_paywall_trial","community_member_ended_trial_without_subscription","community_member_submitted_quiz","post_published","post_liked","post_flagged","post_approved","post_rejected","post_comment_created","post_comment_flagged","post_comment_approved","post_comment_rejected","received_form_submission","community_member_added_to_access_group","community_member_removed_from_access_group","contact_tagged","contact_untagged","community_member_profile_field_updated","community_member_email_changed","community_member_sent_dm_to_admin"]}}}'),i=function(e){var t;return e in n.actions&&!!(null==(t=n.actions[e])?void 0:t.limited_to_triggers)},o=function(e){var t;return e in n.actions&&(null==(t=n.actions[e])?void 0:t.limited_to_triggers)||[]},a=function(e,t){return!i(e)||!!t&&o(e).includes(t)}},67093:function(e,t,r){"use strict";r.d(t,{t:()=>l});var n=r(85893),i=r(84326),o=r(57363),a=r(98363),s=r(93291),l=function(e){var t=e.communityBotProfileId,r=(0,s.q_)({id:t}),l=r.data;if(r.isLoading)return(0,n.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"});if(!l)return(0,n.jsx)("span",{className:"text-sm",children:(0,i.t)("settings.workflows.action_messages.ai_agents.missing_agent")});var c=l.name,u=l.avatar_url;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"pl-2",children:(0,n.jsx)("div",{className:"float-left",children:u?(0,n.jsx)(a.s,{size:"6",src:u,name:c}):(0,n.jsx)(o.JO,{type:"24-ai-bot",size:24,className:"!h-6 !w-6"})})}),(0,n.jsx)("span",{className:"break-normal text-sm",children:c})]})}},48224:function(e,t,r){"use strict";r.d(t,{k:()=>o});var n=r(96486),i=r(28116),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rules;return(void 0===t?[]:t).filter(function(e){return!(0,i.N)(e)}).map(function(e){return(0,n.omit)(e,["isInitialOpen"])})}},17184:function(e,t,r){"use strict";r.d(t,{Y:()=>c});var n=r(96486),i=r(52293),o=r(59705),a=r(76937),s=r(20784),l=r(48224),c=function(e){var t=(0,(0,i.Gc)().watch)("audience.rules")||{},r=(0,l.k)(t);e&&r.push({key:"name",filter_type:"contains",value:e});var c=!(0,n.isEmpty)(r),u=(0,o._)({filters:r,scope:{status:a.vC.ALL,exclude_empty_name:!1,exclude_empty_profiles:!1},options:{keepPreviousData:!0},isAdminScope:!0}),d=u.totalQueryAudience,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(u,["totalQueryAudience"]);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hasFilters:c,formattedCount:(0,s.V)(d),count:d},f)}},10586:function(e,t,r){"use strict";r.d(t,{G:()=>s});var n=r(85893),i=r(52293),o=r(87435),a=r(28116),s=function(e,t){return function(r){var s=r.index,l=r.onApply,c=r.param,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(r,["index","onApply","param"]),d=(0,o.R)().onClear,f="".concat(t,".rules.rules[").concat(s,"]");return(0,n.jsx)(i.Qr,{name:f,defaultValue:c,render:function(t){var r,i,o=t.field,c=o.value,f=o.onChange;return(0,n.jsx)(e,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),i=i={param:c,onApply:function(e){!e||(0,a.N)(e)?null==d||d(s):f(e),l(e)}},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))}})}}},14998:function(e,t,r){"use strict";r.d(t,{q:()=>l});var n=r(85893),i=r(96486),o=r(84326),a=r(78812),s=r(98363),l=function(e){var t=e.communityMemberId,r=e.withDeleted,l=(0,a.y)({ids:[t],withDeleted:void 0===r||r,enabled:!!t}),c=l.data;l.isLoading;var u=(0,i.head)(null==c?void 0:c.records);if(!u)return(0,n.jsx)("span",{className:"text-sm",children:(0,o.t)("deactivated_member")});var d=u.name,f=u.avatar_url;return u.is_deleted?(0,n.jsxs)("span",{className:"break-normal text-sm",children:[(0,o.t)("deactivated_member")," (",d,")"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"pl-2",children:(0,n.jsx)("div",{className:"float-left",children:(0,n.jsx)(s.s,{size:"6",src:f,name:d})})}),(0,n.jsx)("span",{className:"break-normal text-sm",children:d})]})}},58892:function(e,t,r){"use strict";r.d(t,{C:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a=r(41553),s=function(e){var t=e.icon,r=e.text,i=e.isLoading;return(0,n.jsxs)("span",{className:o()("inline-flex h-6 items-center gap-1 rounded-full border px-2",{"bg-tertiary border-tertiary w-20 animate-pulse":i,"border-dark":!i}),children:[t&&(0,n.jsx)("span",{className:"flex",children:t}),r&&(0,n.jsx)(a.Z.LabelXs,{weight:"medium",color:"text-default",children:r})]})}},69558:function(e,t,r){"use strict";r.d(t,{I:()=>d,WX:()=>c,le:()=>u});var n=r(85893),i=r(67294),o=r(45697),a=r.n(o),s=r(78812);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,i.createContext)(null);c.displayName="CommunityMembersListContext";var u=function(){var e=(0,i.useContext)(c);return console.assert(e,"useCommunityMembersListContext is being used outside context provider."),e},d=function(e){var t,r=e.ids,i=e.children,o=(0,s.y)({ids:function(e){if(Array.isArray(e))return l(e)}(t=new Set(r))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),withDeleted:!0,enabled:!!(null==r?void 0:r.length)});return(0,n.jsx)(c.Provider,{value:o,children:i})};d.propTypes={ids:a().arrayOf(a().number),children:a().node.isRequired}},64981:function(e,t,r){"use strict";r.d(t,{I:()=>s.I,le:()=>s.le,Xg:()=>l});var n=r(85893),i=r(84326),o=r(98363),a=r(51169),s=r(69558),l=function(e){var t=e.id,r=e.isAvatarHidden,l=e.isLastNameHidden,c=(0,s.le)();if(!c)return(0,n.jsx)(a.a,{center:!0,className:"p-0"});var u=c.data;if(c.isLoading)return(0,n.jsx)(a.a,{center:!0,className:"!p-0"});var d=null==u?void 0:u.records.find(function(e){return e.id===t});if(!d)return(0,n.jsx)("span",{className:"break-normal text-sm",children:(0,i.t)("deactivated_member")});var f=d.first_name,p=d.name,m=d.avatar_url;return(0,n.jsxs)(n.Fragment,{children:[!r&&(0,n.jsx)("span",{className:"pl-3",children:(0,n.jsx)("div",{className:"float-left",children:(0,n.jsx)(o.s,{size:"6",src:m,name:p})})}),(0,n.jsx)("span",{className:"break-normal text-sm",children:l?f:p})]})}},94281:function(e,t,r){"use strict";r.d(t,{d:()=>u});var n=r(85893),i=r(84326),o=r(39905),a=r(34519),s=r(795),l=r(41553),c=function(e){if(!e||0===e.length)return"";var t=e.map(function(e){return e.name});return 1===t.length?t[0]:new Intl.ListFormat(i.Z.locale,{style:"long",type:"conjunction"}).format(t)},u=function(e){var t=e.disabledAgents,r=e.onCancel,u=e.onPublish,d=e.variant;return(0,n.jsxs)(a.u_.Content,{size:"lg",children:[(0,n.jsx)(a.u_.Header,{children:(0,n.jsx)(a.u_.Title,{children:(0,i.t)("settings.workflows.confirm_modal.ai_agent_currently_disabled",{count:t.length})})}),(0,n.jsx)(a.u_.Body,{children:(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)(l.Z.BodySm,{children:(0,n.jsx)(s.w,{content:(0,i.t)("settings.workflows.confirm_modal.ai_agent_disabled_description",{count:t.length,bot_name:c(t)})})})})}),(0,n.jsxs)(a.u_.Footer,{className:"flex w-full items-center justify-end gap-3",children:[(0,n.jsx)(o.z,{variant:"secondary",onClick:r,children:"edit"===(void 0===d?"edit":d)?(0,i.t)("settings.workflows.confirm_modal.edit_workflow"):(0,i.t)("cancel")}),(0,n.jsx)(o.z,{variant:"circle",onClick:u,children:(0,i.t)("settings.workflows.confirm_modal.enable_and_activate")})]})]})}},4523:function(e,t,r){"use strict";r.d(t,{C:()=>j});var n=r(85893),i=r(67294),o=r(88767),a=r(65978),s=r(84326),l=r(51630),c=r(34870),u=r(51466),d=r(34519),f=r(60878),p=r(37412),m=r(52293),b=r(39905),h=r(41553),y=r(87008),v="settings.workflows.one_time_schedule_modal",g=function(){var e=(0,m.Gc)().watch,t=!!e("scheduler.last_run_at"),r=e("scheduler.last_run_at");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.u_.Body,{children:[(0,n.jsx)(h.Z.LabelMd,{weight:"semibold",children:(0,s.t)([v,"date_and_time"])}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(u.l.Item,{name:"scheduler.last_run_at",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:" ",children:(0,n.jsx)(y.q,{name:"scheduler.last_run_at",datePlaceholder:(0,s.t)([v,"date"]),timePlaceholder:(0,s.t)([v,"time"]),minDate:new Date,dataTestId:"last_run_at"})})}),r&&(0,n.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,n.jsx)(h.Z.LabelSm,{weight:"medium",children:(0,s.t)("".concat(v,".summary"),{runAt:(0,c.w)({dateTime:new Date(r),format:"date_time_with_short_timezone"})})})})]}),(0,n.jsx)(d.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(b.z,{variant:"circle",disabled:!t,children:(0,s.t)("".concat(v,".submit"))})})]})};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(e){var t,r,m=e.workflowId,b=e.onCancel,h=e.setIsConfirmContent,y=e.hasRuns,v=e.schedule,_=(0,f.pm)(),j="settings.workflows.one_time_schedule_modal",w=x((0,i.useState)(!1),2),O=w[0],S=w[1],k=x((0,i.useState)({}),2),P=k[0],C=k[1],N=v.id,A=v.isReschedule,I=function(e,t,r){var n=new Date(r.scheduler.last_run_at).toISOString();return N?A?l.nH.reschedule({workflowId:e,id:N,body:{last_run_at:n,schedule_type:"one_time",do_not_skip_tasks:r.do_not_skip_tasks}}):l.nH.updateOneTimeSchedule({workflowId:e,id:N,body:{last_run_at:n,do_not_skip_tasks:r.do_not_skip_tasks}}):l.nH.createOneTimeSchedule({workflowId:e,body:{last_run_at:n}})},E=(0,o.useMutation)(function(e){return I(m,v,e)},{onSuccess:function(){h(!0)},onError:function(e){"message"in e&&_.error(null==e?void 0:e.message)}}).mutate,T=A?"":null==v?void 0:v.last_run_at;return O?(0,n.jsx)(p.R,{onSubmit:function(e){E(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},P,e))},doNotSkipTasks:null!=(r=null==v||null==(t=v.do_not_skip_tasks)?void 0:t.toString())?r:"false",onCancel:b}):(0,n.jsxs)(d.u_.Content,{size:"md",children:[(0,n.jsxs)(d.u_.Header,{children:[(0,n.jsx)(d.u_.Title,{size:"md",children:(0,s.t)([j,"title"])}),(0,n.jsx)(d.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(d.u_.CloseButton,{onClick:b})})]}),(0,n.jsx)(u.l,{defaultValues:{scheduler:{last_run_at:T}},validationSchema:a.Ry().shape({scheduler:a.Ry().shape({last_run_at:a.hT().required().min(new Date,(0,s.t)([j,"past_error"],{currentDateTime:(0,c.w)({dateTime:new Date,format:"date_time_with_short_timezone"})}))})}),onSubmit:function(e){C(e),y?S(!0):E(e)},children:(0,n.jsx)(g,{})})]})}},37412:function(e,t,r){"use strict";r.d(t,{R:()=>u});var n=r(85893),i=r(96486),o=r(84326),a=r(34519),s=r(39905),l=r(51466),c=r(33378),u=function(e){var t=e.doNotSkipTasks,r=e.onCancel,u=e.onSubmit,d=e.onBack;return(0,n.jsxs)(a.u_.Content,{onClose:r,children:[(0,n.jsxs)(a.u_.Header,{children:[(0,n.jsx)(a.u_.Title,{children:(0,o.t)("settings.workflows.recurring_schedule_modal.rerun_settings")}),(0,n.jsx)(a.u_.CloseButton,{onClick:r}),(0,i.isFunction)(d)&&(0,n.jsx)(a.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(a.u_.BackButton,{onClick:d})})]}),(0,n.jsx)(l.l,{defaultValues:{do_not_skip_tasks:null!=t?t:"false"},onSubmit:u,children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,n.jsx)(c.n,{}),(0,n.jsx)(a.u_.Footer,{children:(0,n.jsx)(s.z,{variant:"circle",full:!0,large:!0,type:"submit",children:(0,o.t)("settings.workflows.rerun_modal.continue")})})]})})]})}},80842:function(e,t,r){"use strict";r.d(t,{L:()=>ea});var n=r(85893),i=r(67294),o=r(83894),a=r(52293),s=r(88767),l=r(21835),c=r(84326),u=r(51630),d=r(24804),f=r(69831),p=r(34519),m=r(60878),b=r(41342),h=function(){var e=(0,b.wh)().currentCommunitySettings;return!!(null==e?void 0:e.modify_schedule_enabled)},y=r(43271),v=r(96486),g=r(34870),_=r(57363),x=r(39905),j=r(41553),w=r(51466);function O(e){var t=e.name,r=e.label,i=e.value,o=(0,a.Gc)().register;return(0,n.jsxs)("label",{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"checkbox",value:i,className:"peer sr-only"},o(t))),(0,n.jsx)("span",{className:"border-disabled peer-checked:border-secondary peer-checked:bg-secondary flex flex-wrap items-center justify-center rounded-md border px-3 py-2 uppercase",children:(0,n.jsx)(j.Z.LabelXxs,{weight:"semibold",children:r})})]})}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r=e.days,o=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return((0,i.useEffect)(function(){s(!0)},[]),a)?(0,n.jsx)(w.l.Item,{name:"days_of_week",label:(0,c.t)(["settings.workflows.recurring_schedule_modal","repeats_every"]),hideBorder:!0,hideDescription:!0,labelClassName:"mb-2",children:(0,n.jsx)("div",{className:"flex flex-wrap justify-between gap-y-2",children:r.map(function(e){return(0,n.jsx)(O,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"days_of_week"},e),e.value)})})}):null},P=r(39788),C=r(87008),N=r(94184),A=r.n(N),I=r(9198),E=r.n(I),T=r(79089);function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function D(e){var t=e.minDate,r=e.maxDate,o=e.name,s=e.disabled,l=e.placeholder,c=L(e,["minDate","maxDate","name","disabled","placeholder"]),u=(0,i.useRef)(null),d=(0,i.useRef)((0,v.uniqueId)("date-picker-portal-"));return(0,n.jsx)(a.Qr,{name:o,render:function(e){var i=e.field,o=i.value,a=i.ref,f=L(e.field,["value","ref"]),p=o?new Date(o):null,m=(0,T.l)([a,u]);return(0,n.jsxs)("div",{className:"relative mr-1",children:[(0,n.jsx)(E(),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({selected:p,dateFormat:"MMM d, yyyy",minDate:t,maxDate:r,disabled:s,placeholderText:l,ref:m,portalId:d,popperClassName:"!z-[1080] !w-auto",className:A()({"!bg-secondary !border-primary":s})},f,c)),(0,n.jsx)(_.JO,{type:"cheveron-down",className:"hover:text-darkest absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer",onClick:function(){var e,t;null==(t=u.current)||null==(e=t.input)||e.focus()}})]})}})}var M="settings.workflows.recurring_schedule_modal",R="never",B=[{label:(0,c.t)([M,R]),value:R},{label:(0,c.t)([M,"on"]),value:"on"}],F=function(){var e=new Date;return e.setDate(e.getDate()-1),e};function z(){var e,t=(0,a.Gc)(),r=t.watch,o=t.setValue,s=h(),l=r("first_run_at"),u=r("last_run_at"),d=r("ends_on"),f=r("has_schedule_run_before"),p=(0,i.useMemo)(function(){return l?new Date(l):new Date},[l]);(0,i.useEffect)(function(){d===R&&o("last_run_at",null)},[d,o]);var m=f&&s;return(0,n.jsxs)("div",{className:"flex flex-col",children:[m?(0,n.jsx)(w.l.Item,{name:"next_run_at",label:(0,c.t)([M,"time"]),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(C.q,{name:"next_run_at",timePlaceholder:(0,c.t)([M,"select_time"]),maxDate:u?new Date(u):void 0,classNameDate:"hidden",classNameTime:"ml-[-0.25rem] w-full",minDate:F()})}):(0,n.jsx)(w.l.Item,{name:"first_run_at",label:(0,c.t)([M,"first_run"]),hideDescription:!0,isDisabled:f,hideBorder:!0,children:(0,n.jsx)(C.q,{name:"first_run_at",datePlaceholder:(0,c.t)([M,"select_date"]),timePlaceholder:(0,c.t)([M,"select_time"]),maxDate:u?new Date(u):void 0,disabled:f})}),(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsx)(w.l.Item,{name:"ends_on",label:(0,c.t)("settings.workflows.recurring_schedule_modal.ends"),hideDescription:!0,hideBorder:!0,className:"flex-1",children:(0,n.jsx)(P.N,{name:"ends_on",label:null,options:B})}),(0,n.jsx)(w.l.Item,{name:"last_run_at",emptyLabel:!0,hideDescription:!0,hideBorder:!0,placeholder:(0,c.t)([M,"select_date"]),className:"flex-1",children:(0,n.jsx)(D,{name:"last_run_at",minDate:p,disabled:d===(null==(e=(0,v.head)(B))?void 0:e.value)})})]})]})}var U="settings.workflows.recurring_schedule_modal",Z=function(e){var t=h();return{prefix:e&&t?(0,c.t)("".concat(U,".workflow_already_started")):(0,c.t)("".concat(U,".workflow_will_start_running")),midSection:e&&t?(0,c.t)("".concat(U,".workflow_will_now_run")):(0,c.t)("".concat(U,".once_started_workflow_will_run"))}},G="settings.workflows.recurring_schedule_modal",q=[{value:"monday",label:(0,c.t)([G,"mon"])},{value:"tuesday",label:(0,c.t)([G,"tue"])},{value:"wednesday",label:(0,c.t)([G,"wed"])},{value:"thursday",label:(0,c.t)([G,"thu"])},{value:"friday",label:(0,c.t)([G,"fri"])},{value:"saturday",label:(0,c.t)([G,"sat"])},{value:"sunday",label:(0,c.t)([G,"sun"])}],V={daily:"every_day_at_until",weekly:"every_week_on_until",monthly:"every_month_on_until",yearly:"every_year_on_until"},H={daily:"every_day_at",weekly:"every_week_on",monthly:"every_month_on",yearly:"every_year_on"},W=function(e){var t=e.data,r=e.onBack,i=e.onCancel,o=e.onPublish,a=(null==t?void 0:t.do_not_skip_tasks)=="true"?(0,c.t)("settings.workflows.rerun_modal.all_members"):(0,c.t)("settings.workflows.rerun_modal.only_new_members"),s=t.ends_on,u=t.frequency,d=t.first_run_at,f=t.last_run_at,m=t.days_of_week,b=t.next_run_at,h=t.has_schedule_run_before,w=Z(h),O=w.prefix,S=w.midSection,k=new Date(h&&b?b:d),P=[{message:function(){var e=("on"===s?V:H)[u];(0,l.Z)(e,"Message by frequency should be selected.");var t=null;if("weekly"===u){var r=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),n=m.map(function(e){var t,r=null==(t=q.find(function(t){return t.value===e}))?void 0:t.label;return(0,v.capitalize)(r)});t=r.format(n)}return(0,c.t)(["settings.workflows.recurring_schedule_modal",e],{start_time_at:(0,g.w)({dateTime:new Date(d),format:"date_time_with_short_timezone"}),end_time_at:(0,g.w)({dateTime:new Date(f),format:"long_date"}),day_of_month:d?(0,y.default)(new Date(d),"do"):null,repeat_days:t,prefix:O,mid_section:S,recurring_time:d?(0,g.w)({dateTime:new Date(d),format:"short_month_and_date"}):null,recurring_hour_minutes:(0,g.w)({dateTime:k,format:"short_time"})})}(),icon:"16-clock"},{message:a,icon:"16-members"}],C=h?(0,c.t)("settings.workflows.confirm_modal.modify_schedule"):(0,c.t)("settings.workflows.confirm_modal.schedule");return(0,n.jsxs)(p.u_.Content,{size:"md",children:[(0,n.jsxs)(p.u_.Header,{children:[(0,n.jsx)(p.u_.Title,{size:"md",children:(0,c.t)("settings.workflows.confirm_modal.schedule_summary")}),(0,n.jsx)(p.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(p.u_.CloseButton,{onClick:i})}),(0,v.isFunction)(r)&&(0,n.jsx)(p.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(p.u_.BackButton,{onClick:r})})]}),(0,n.jsx)(p.u_.Body,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 pt-5",children:[(0,n.jsx)(j.Z.LabelMd,{weight:"semibold",children:(0,c.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,n.jsx)("ul",{className:"flex list-none flex-col gap-y-4",children:P.map(function(e){var t=e.message,r=e.icon;return(0,n.jsxs)("li",{className:"text-default flex items-center gap-x-2",children:[(0,n.jsx)(_.JO,{type:r,size:16,className:"mt-1 !h-4 !w-4 shrink-0 !self-start"}),(0,n.jsx)(j.Z.BodySm,{weight:"font-medium",children:t})]},t)})})]})}),(0,n.jsx)(p.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(x.z,{variant:"circle",onClick:o,children:C})})]})},Q=r(65978);function J(e){var t=e.i18n,r=e.isMessageVisible,i=e.variables,o=(0,a.Gc)().watch,s=o("first_run_at"),l=o("last_run_at"),u=o("next_run_at"),d=o("ends_on"),f=o("has_schedule_run_before"),p=new Date(f?u:s),m=Z(f),b=m.prefix,h=m.midSection;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(z,{}),(null!=r?r:!!s&&!("on"===d&&!l))&&(0,n.jsx)(j.Z.LabelSm,{weight:"medium",children:(0,c.t)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({start_time_at:(0,g.w)({dateTime:new Date(s),format:"date_time_with_short_timezone"}),end_time_at:(0,g.w)({dateTime:new Date(l),format:"long_date"}),prefix:b,mid_section:h,recurring_hour_minutes:(0,g.w)({dateTime:p,format:"short_time"})},void 0===i?{}:i))})]})}var K=function(e,t){return"on"===(0,(0,a.Gc)().watch)("ends_on")?e:t},$={daily:function(){var e=K("every_day_at_until","every_day_at");return(0,n.jsx)(J,{i18n:["settings.workflows.recurring_schedule_modal",e]})},weekly:function(){var e=(0,a.Gc)().watch,t=e("first_run_at"),r=e("last_run_at"),o=e("next_run_at"),s=e("days_of_week"),l=e("ends_on"),u=e("has_schedule_run_before"),d=new Date(u?o:t),f=Z(u),p=f.prefix,m=f.midSection,b=(0,i.useMemo)(function(){if(!(null==s?void 0:s.length))return"";var e=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),t=s.map(function(e){var t,r=null==(t=q.find(function(t){return t.value===e}))?void 0:t.label;return(0,v.capitalize)(r)});return e.format(t)},[s]);return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(k,{days:q}),(0,n.jsx)(z,{})]}),!!t&&!!s.length&&!("on"===l&&!r)&&(0,n.jsx)(j.Z.LabelSm,{weight:"medium",children:(0,c.t)([G,"on"===l?"every_week_on_until":"every_week_on"],{start_time_at:(0,g.w)({dateTime:new Date(t),format:"date_time_with_short_timezone"}),end_time_at:(0,g.w)({dateTime:new Date(r),format:"long_date"}),repeat_days:b,prefix:p,mid_section:m,recurring_hour_minutes:(0,g.w)({dateTime:d,format:"short_time"})})})]})},monthly:function(){var e=(0,(0,a.Gc)().watch)("first_run_at"),t=K("every_month_on_until","every_month_on");return(0,n.jsx)(J,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{day_of_month:e?(0,y.default)(new Date(e),"do"):null}})},yearly:function(){var e=(0,(0,a.Gc)().watch)("first_run_at"),t=K("every_year_on_until","every_year_on");return(0,n.jsx)(J,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{recurring_time:e?(0,g.w)({dateTime:new Date(e),format:"short_month_and_date"}):null}})}};function X(){var e=$[(0,(0,a.Gc)().watch)("frequency")];return(0,n.jsx)(e,{})}var Y=[{value:"daily",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_day")},{value:"weekly",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_week")},{value:"monthly",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_month")},{value:"yearly",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_year")}];function ee(){var e=(0,a.Gc)().watch,t=e("frequency"),r=e("first_run_at"),o=e("last_run_at"),s=e("days_of_week"),l=e("ends_on"),u=(0,i.useMemo)(function(){return!!t&&("weekly"!==t||!!s.length)&&("on"!==l||!!o)&&!!r},[t,r,o,l,s]);return(0,n.jsxs)("div",{className:"flex flex-col gap-y-10",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.l.Item,{name:"frequency",label:(0,c.t)("settings.workflows.recurring_schedule_modal.frequency"),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(P.N,{name:"frequency",label:null,options:Y})}),(0,n.jsx)(X,{})]}),(0,n.jsx)(x.z,{type:"submit",variant:"circle",disabled:!u,children:(0,c.t)("continue")})]})}var et=function(e){var t=e.schedule,r=e.formState,o=e.onSubmit,a=e.onCancel,s=t.isReschedule,l=(0,i.useMemo)(function(){return Q.Ry().shape({first_run_at:Q.Vo(function(){return(null==t?void 0:t.has_run_but_not_completed)?Q.hT().required():Q.hT().required().min(new Date,(0,c.t)(["settings.workflows.one_time_schedule_modal","past_error"],{currentDateTime:(0,g.w)({dateTime:new Date,format:"date_time_with_short_timezone"})}))})})},[null==t?void 0:t.has_run_but_not_completed]);return(0,n.jsxs)(p.u_.Content,{onClose:a,children:[(0,n.jsxs)(p.u_.Header,{children:[(0,n.jsx)(p.u_.Title,{children:(0,c.t)("".concat("settings.workflows.recurring_schedule_modal",".title"))}),(0,n.jsx)(p.u_.CloseButton,{onClick:a})]}),(0,n.jsx)(p.u_.Body,{className:"pb-6",children:(0,n.jsx)(w.l,{defaultValues:s?{frequency:"weekly",days_of_week:[],ends_on:"never"}:r||{frequency:(null==t?void 0:t.frequency)||"weekly",days_of_week:(null==t?void 0:t.days_of_week)||[],ends_on:(null==t?void 0:t.last_run_at)?"on":"never",first_run_at:null==t?void 0:t.first_run_at,last_run_at:null==t?void 0:t.last_run_at,next_run_at:null==t?void 0:t.next_run_at,has_schedule_run_before:null==t?void 0:t.has_run_but_not_completed},onSubmit:o,validationSchema:l,children:(0,n.jsx)(ee,{})})})]})},er=r(37412);function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e){var t,r,b,y=e.workflowId,v=e.onCancel,g=e.schedule,_=e.onPublish,x=e.isLoading,j=(0,m.pm)(),w=(0,s.useQueryClient)(),O=(0,a.Gc)(),S=g.id,k=g.isReschedule,P=eo((0,i.useState)(!1),2),C=P[0],N=P[1],A=eo((0,i.useState)(null),2),I=A[0],E=A[1],T=eo((0,i.useState)(null),2),L=T[0],D=T[1],M=eo((0,d.k)(!1),2),R=M[0],B=M[1],F=h(),z=function(e,t){var r=t.last_run_at?(0,o.default)(new Date(t.last_run_at)).toISOString():null,n=t.next_run_at?new Date(t.next_run_at).toISOString():null,i=new Date(t.first_run_at).toISOString(),a=Intl.DateTimeFormat().resolvedOptions().timeZone,s=t.frequency,l=t.days_of_week,c=t.do_not_skip_tasks;return S?k?u.nH.reschedule({workflowId:e,id:S,body:{last_run_at:r,first_run_at:i,frequency:s,days_of_week:l,schedule_type:"recurring",do_not_skip_tasks:c,tz:a}}):u.nH.updateRecurringSchedule({workflowId:e,id:S,body:ei({last_run_at:r,first_run_at:i,frequency:s,days_of_week:l,do_not_skip_tasks:c,tz:a},F&&{next_run_at:n})}):u.nH.createRecurringSchedule({workflowId:e,body:{last_run_at:r,first_run_at:i,frequency:s,days_of_week:l,do_not_skip_tasks:c,tz:a}})},U=(0,s.useMutation)(function(e){return z(y,e)},{onSuccess:function(e){B(),O.setValue("schedule",e),w.invalidateQueries(["workflows",y])},onError:function(e){"message"in e&&j.error(null==e?void 0:e.message)}}).mutate,Z=function(e){D(e),(0,l.Z)(I,"formData should be defined on rerun submit"),U(ei({},I,e))};if(x)return(0,n.jsx)(p.u_.Content,{children:(0,n.jsx)(p.u_.Body,{className:"w-full !px-10 !py-16",children:(0,n.jsx)(f.u,{title:(0,c.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,c.t)("settings.workflows.we_are_preparing")})})});if((null==I?void 0:I.has_schedule_run_before)&&F){var G,q,V=g.do_not_skip_tasks?"true":"false";return(0,n.jsx)(W,{onCancel:v,onBack:v,onPublish:function(){Z({do_not_skip_tasks:V}),_()},data:(G=ei({},I),q=q={do_not_skip_tasks:V},Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(q)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(q)).forEach(function(e){Object.defineProperty(G,e,Object.getOwnPropertyDescriptor(q,e))}),G)})}return R&&L&&I?(0,n.jsx)(W,{onCancel:v,onBack:B,onPublish:_,data:ei({},I,L)}):C&&I?(0,n.jsx)(er.R,{doNotSkipTasks:null!=(b=null!=(r=null==L?void 0:L.do_not_skip_tasks)?r:null==(t=g.do_not_skip_tasks)?void 0:t.toString())?b:"false",onCancel:v,onSubmit:Z,onBack:function(){N(!1),D(null)}}):(0,n.jsx)(et,{schedule:g,formState:I,onCancel:v,onSubmit:function(e){E(e),N(!0)}})}},33378:function(e,t,r){"use strict";r.d(t,{n:()=>f});var n=r(85893),i=r(52293),o=r(84326),a=r(37811),s=r(34519),l=r(99595),c=r(41553),u="settings.workflows.rerun_modal.form",d=[{value:"true",label:(0,o.t)([u,"include_all_members.title"]),description:(0,o.t)([u,"include_all_members.description"])},{value:"false",label:(0,o.t)([u,"only_new_members.title"]),description:(0,o.t)([u,"only_new_members.description"])}],f=function(){var e=(0,i.Gc)().register;return(0,n.jsxs)(s.u_.Body,{children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,o.t)([u,"title"])}),(0,n.jsx)("div",{className:"flex flex-col pt-5",children:(0,n.jsx)(a.p,{children:d.map(function(t){var r=t.value,i=t.label,o=t.description;return(0,n.jsx)(l.Y,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"rerunbody-radio-".concat(r),label:i,description:o,value:r},e("do_not_skip_tasks")),r)})})})]})}},87008:function(e,t,r){"use strict";r.d(t,{q:()=>s});var n=r(85893),i=r(67294),o=r(96486),a=r(64608);function s(e){var t=e.name,r=e.minDate,s=void 0===r?new Date:r,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","minDate"]),c=(0,i.useRef)((0,o.uniqueId)("date-time-picker-portal-")).current;return(0,n.jsx)(a.x,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:t,portalId:c,popperClassName:"!z-[1080] !w-auto",minDate:s},l))}},33617:function(e,t,r){"use strict";r.d(t,{W:()=>l});var n=r(85893),i=r(45697),o=r.n(i),a=r(94184),s=r.n(a),l=function(e){var t=e.children,r=e.className;return(0,n.jsx)("main",{className:s()("bg-primary flex h-full flex-col",r),children:t})};l.propTypes={children:o().node,className:o().string}},83769:function(e,t,r){"use strict";r.d(t,{i:()=>C});var n=r(85893),i=r(67294),o=r(84326),a=r(51169),s=r(41553),l=r(1168),c=r(70442),u=r(13532),d=r(57363),f=r(45697),p=r.n(f),m=function(e){var t=e.shouldTruncate,r=e.children;return(0,n.jsx)("div",{style:void 0===t||t?{display:"-webkit-box",WebkitLineClamp:"3",WebkitBoxOrient:"vertical",overflow:"hidden"}:{},children:(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:r})})};m.propTypes={shouldTruncate:p().bool,children:p().node};var b=r(94184),h=r.n(b),y=r(23560),v=r.n(y);let g=function(e){var t,r,i=e.children,o=e.onClick,a=e.centerContent,s=v()(o);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:h()("bg-primary border-primary hover:shadow-xs hover:border-secondary flex h-auto w-full max-w-xs flex-col gap-5 rounded-xl border p-5 transition-colors duration-75",{"cursor-pointer":s,"items-center justify-center text-center":void 0!==a&&a})},s?{role:"button",onClick:o}:{}),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var _=function(e){var t=e.onClose,r=(0,c.k6)();return(0,n.jsxs)(g,{onClick:function(){null==t||t(),r.push(u.o0.select_type())},centerContent:!0,children:[(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("div",{className:"text-default bg-secondary flex h-10 min-w-[2.5rem] cursor-pointer items-center justify-center rounded-full",children:(0,n.jsx)(d.JO,{type:"plus-v2",size:16,useWithFillCurrentColor:!0,className:"!h-5 !w-5"})})}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(m,{children:(0,o.t)("settings.onboarding.tabs.workflows.actions.create_custom")})})]})},x=r(39368),j=r(1790),w=r(88987),O="settings.workflows.table.type",S=function(e){var t=e.selectedTemplateType,r=e.setSelectedTemplateType,i=[{label:(0,o.t)([O,"all"]),value:"all"},{label:(0,o.t)([O,"dynamic"]),value:"dynamic"},{label:(0,o.t)([O,"bulk_action"]),value:"bulk_action"}];return(0,n.jsx)(w.m,{selectedTemplateType:t,setSelectedTemplateType:r,options:i,translationKey:O})};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P="settings.workflows.templates",C=function(e){var t,r=e.shouldIncludeCreateButton,c=e.onClose,u=e.shouldAutoAdjust,d=(0,j.r)(),f=d.templates,p=d.isLoadingTemplates,m=d.selectedCategory,b=(t=(0,i.useState)("all"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return k(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,i.useMemo)(function(){return f.filter(function(e){return"all"===h||e.template_type===h})},[f,h]);return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[!r&&(0,n.jsx)(s.Z.TitleMd,{children:(0,o.t)([P,"title",m])}),(0,n.jsx)(S,{selectedTemplateType:h,setSelectedTemplateType:y}),(0,n.jsx)(a.a,{show:p}),!p&&(0,n.jsx)(s.Z.LabelXs,{weight:"medium",children:(0,o.t)([P,"template_count"],{count:v.length})}),(0,n.jsxs)("div",{className:(0,l.A)({"grid gap-6 sm:grid-cols-2 lg:grid-cols-3":!u,"flex flex-wrap gap-4":u}),children:[r&&(0,n.jsx)(_,{onClose:c}),v.map(function(e){var t,r;return(0,i.createElement)(x.K,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={key:e.id,isNew:e.is_new,templateKey:e.key,templateType:e.template_type,onClose:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})]})]})}},1790:function(e,t,r){"use strict";r.d(t,{r:()=>b,N:()=>m});var n=r(85893),i=r(67294),o=r(85564),a=r.n(o),s=r(88767),l=r(51630),c=r(20153),u=r(94346),d=function(e){var t,r=(0,c.Z)(),n=(0,u.f)(),i=function(e,t){var r={page:e,per_page:100,v2_2_enabled:!0};return t&&"all"!==t&&(r.category=t),l.nH.templates({params:r})},o=(0,s.useInfiniteQuery)(["workflow-templates-list",e],function(t){var r=t.pageParam;return i(void 0===r?1:r,e)},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),d=o.data,f=o.isLoading,p=o.fetchNextPage,m=(null==d?void 0:d.pages)||[],b=a()(m.map(function(e){return e.records})),h=r?b:b.filter(function(e){return e.released});return n||(h=h.filter(function(e){var t;return!(null==(t=e.categories)?void 0:t.includes("ai_workflows"))})),{templates:h,totalCount:(null==(t=m[0])?void 0:t.total_count)||0,isLoading:f,fetchNextPage:p}};function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=(0,i.createContext)({templates:[],totalCount:0,isLoadingTemplates:!1,selectedCategory:"all",selectedTemplateId:void 0,setSelectedCategory:function(){}});p.displayName="WorkflowFormData";var m=function(e){var t,r=e.children,o=e.category,a=(t=(0,i.useState)(o||"all"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=d(s),u=c.templates,m=c.totalCount,b=c.isLoading;return(0,n.jsx)(p.Provider,{value:{templates:u,totalCount:m,isLoadingTemplates:b,selectedCategory:s,setSelectedCategory:l},children:r})},b=function(){return(0,i.useContext)(p)}},94644:function(e,t,r){"use strict";r.d(t,{N6:()=>f,Tc:()=>p,uj:()=>d});var n=r(67294),i=r(93199),o=r(13532);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var d=function(e){return l(function(){return u(this,function(t){return[2,Promise.all(e.map(function(e){return(0,i.aU)(o.av.communityBot.agents.update({id:e.id}),{community_bot_profile:{enabled:!0}})}))]})})()},f=function(e){return l(function(){var t,r;return u(this,function(n){switch(n.label){case 0:if(0===(t=e.map(function(e){var t;return null==e||null==(t=e.api_params)?void 0:t.community_bot_profile_id}).filter(Boolean)).length)return[2,{disabledAgents:[]}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,i.UT)(o.av.communityBot.agents.activeCheck({ids:t}))];case 2:return[2,{disabledAgents:(null==(r=n.sent())?void 0:r.filter(function(e){return!e.enabled}))||[]}];case 3:return n.sent(),[2,{disabledAgents:[]}];case 4:return[2]}})})()},p=function(e){var t=c((0,n.useState)([]),2),r=t[0],i=t[1],o=c((0,n.useState)(!1),2),a=o[0],s=o[1];return(0,n.useEffect)(function(){e&&e.length>0?l(function(){return u(this,function(t){switch(t.label){case 0:s(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,f(e)];case 2:return i(t.sent().disabledAgents),[3,5];case 3:return t.sent(),i([]),[3,5];case 4:return s(!1),[7];case 5:return[2]}})})():(i([]),s(!1))},[e]),{disabledAgents:r,isLoading:a}}},76454:function(e,t,r){"use strict";r.d(t,{p:()=>l});var n=r(85893),i=r(67294),o=r(84326),a=r(84121),s="settings.workflows.view.header",l=function(e){var t=e.isDisabled,r=e.isLoading,l=e.isWorkflowActive,c=e.hasNoActions,u=e.hasActionsUnsaved,d=e.isDraft,f=void 0!==d&&d,p=e.onChange,m=(0,i.useCallback)(function(){return u?(0,o.t)([s,"incomplete_actions_message"]):f?(0,o.t)([s,"disabled_tooltip"]):c?(0,o.t)([s,"has_no_actions_message"]):(0,o.t)([s,"off_tooltip"])},[u,c,f]),b=(0,i.useCallback)(function(e){null==p||p(e)},[p]);return(0,n.jsx)(a.J,{isChecked:l,checkedLabel:(0,o.t)([s,"on_value"]),uncheckedLabel:(0,o.t)([s,"off_value"]),tooltipCheckedLabel:(0,o.t)([s,"on_tooltip"]),tooltipUncheckedLabel:m(),tooltipPlacement:"bottom",isLoading:r,isDisabled:t,onChange:b,containerClassName:"mx-auto",className:""})}},84870:function(e,t,r){"use strict";r.d(t,{N:()=>a});var n=r(85893),i=r(3425),o=r(76454),a=function(e){var t,r,a=e.isActive,s=e.onToggle,l=e.actions,c=e.steps,u=e.workflowId,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isActive","onToggle","actions","steps","workflowId"]),f=(0,i.x)({isActive:a,onToggle:s,actions:l,steps:c,workflowId:u}),p=f.isEffectivelyActive,m=f.handleToggleChange;return(0,n.jsx)(o.p,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={isWorkflowActive:p,onChange:m},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},4015:function(e,t,r){"use strict";r.d(t,{H:()=>i});var n=r(84555),i=function(e){return e===n.qN.IN_PROGRESS||e===n.qN.ACTIVE}},67367:function(e,t,r){"use strict";r.d(t,{j:()=>a});var n=r(4015),i=r(5917),o=r(50362),a=function(){var e=(0,o.D)(),t=e.id,r=e.isDynamic,a=e.status,s=(0,i.C)({workflowId:r?void 0:t,disableRefetching:!0}),l=s.areAllRunsCompleted,c=s.isLoading;return r?{result:(0,n.H)(a)}:{result:!l,isLoading:c}}},13445:function(e,t,r){"use strict";r.d(t,{q:()=>y,P:()=>v});var n=r(84326),i=r(84555),o=r(85893),a=r(37140),s=r(95900),l=function(e){var t=e.resourceId,r=(0,a.t)(t),i=r.accessGroup,l=r.isLoadingAccessGroup;return(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.view.resources.access_group"),value:null==i?void 0:i.name,isLoading:l})},c=r(52293),u=r(76492),d=r(89013),f=r(39788),p=r(51169),m=function(){var e=(0,c.Gc)(),t=e.register,r=e.setValue,i=(0,u.S)(),a=i.data,s=i.isLoading,l=(0,d.O)({selectNewAccessGroup:function(e){return r("trigger.resource_id",e.id,{shouldDirty:!0,shouldValidate:!0})}}).openNewAccessGroupModal,m=null==a?void 0:a.map(function(e){return{label:e.name,value:e.id}});return s?(0,o.jsx)(p.a,{center:!0}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"hidden",children:(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,n.t)("settings.workflows.form.choose_access_group"),options:m,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.access_groups.not_found"),createLinkLabel:(0,n.t)("settings.access_groups.admin.entry_points.association.actions.create_new_access_group"),onCreateLinkClick:l})]})},b={label:(0,n.t)("settings.workflows.form.events.community_member_added_to_access_group.title"),value:"community_member_added_to_access_group",group:(0,n.t)("settings.workflows.form.event_groups.access_group"),description:(0,n.t)("settings.workflows.form.events.community_member_added_to_access_group.description"),resource:i.uN.ACCESS_GROUP,formComponent:m,viewComponent:l,icon:"space"},h={label:(0,n.t)("settings.workflows.form.events.community_member_removed_from_access_group.title"),value:"community_member_removed_from_access_group",group:(0,n.t)("settings.workflows.form.event_groups.access_group"),description:(0,n.t)("settings.workflows.form.events.community_member_removed_from_access_group.description"),resource:i.uN.ACCESS_GROUP,formComponent:m,viewComponent:l,icon:"space"},y=b,v=h},18301:function(e,t,r){"use strict";r.d(t,{j:()=>u});var n=r(85893),i=r(88767),o=r(84326),a=r(93199),s=r(13532),l=r(8054),c=r(95900),u=function(e){var t=e.resourceId,r=(0,i.useQuery)([l.Wx,t,{}],function(){return(0,a.UT)(s.av.profile.show({memberPublicId:String(t),params:{}}))}),u=r.data,d=r.isLoading;return(0,n.jsx)(c.i,{label:(0,o.t)("settings.workflows.view.resources.messaging"),value:null==u?void 0:u.name,isLoading:d})}},34260:function(e,t,r){"use strict";r.d(t,{b:()=>d});var n=r(85893),i=r(84326),o=r(59705),a=r(76937),s=r(39788),l=r(51169),c=r(41553),u={perPage:100,order:{created_at:"desc"},scope:{status:a.vC.ACTIVE,exclude_empty_name:!1,exclude_empty_profiles:!1},options:{keepPreviousData:!0},filters:[{id:"1",key:"role",value:"Admin"},{id:"2",key:"member",value:"true"}],isAdminScope:!0},d=function(){var e=(0,o._)(u),t=e.audience;if(e.isLoading)return(0,n.jsx)(l.a,{center:!0});var r=null==t?void 0:t.map(function(e){return{label:e.name,value:e.id}});return(0,n.jsx)(s.N,{name:"trigger.resource_id",label:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.which_admin")}),options:r,rules:{required:(0,i.t)("settings.workflows.form.errors.required")},emptyMessage:(0,i.t)("settings.workflows.form.errors.upcoming_events.not_found")})}},95900:function(e,t,r){"use strict";r.d(t,{i:()=>m});var n=r(85893),i=r(45697),o=r.n(i),a=r(51169),s=r(41553),l=r(58892),c=r(94184),u=r.n(c),d=function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:u()("flex flex-col gap-6",t),children:r})};d.propTypes={className:o().string,children:o().node};var f=function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:u()("flex flex-col gap-2",t),children:r})};f.propTypes={className:o().string,children:o().node};var p=function(e){var t=e.children;return(0,n.jsx)("div",{children:(0,n.jsx)(s.Z.LabelSm,{weight:"semibold",children:t})})};p.propTypes={children:o().node},d.Section=f,d.Title=p;var m=function(e){var t=e.label,r=e.value,i=e.isLoading,o=e.shouldRepresentAsBadge;return(0,n.jsx)(d,{children:(0,n.jsxs)(d.Section,{children:[(0,n.jsx)(d.Title,{children:t}),(0,n.jsx)("div",{children:void 0!==o&&o?(0,n.jsx)(b,{value:r,isLoading:i}):(0,n.jsx)(h,{value:r,isLoading:i})})]})})},b=function(e){var t=e.value;return e.isLoading?(0,n.jsx)(l.C,{isLoading:!0}):(0,n.jsx)(l.C,{text:t})},h=function(e){var t=e.value;return e.isLoading?(0,n.jsx)(a.a,{}):(0,n.jsx)(s.Z.LabelSm,{children:t})};m.propTypes={label:o().string.isRequired,value:o().string,isLoading:o().bool,shouldRepresentAsBadge:o().bool},b.propTypes={value:o().string.isRequired,isLoading:o().bool},h.propTypes={value:o().string.isRequired,isLoading:o().bool}},77774:function(e,t,r){"use strict";r.d(t,{H:()=>a});var n=r(85893),i=r(84326),o=r(95900),a=function(e){var t=String(e.resourceId);return(0,n.jsx)(o.i,{label:(0,i.t)("settings.workflows.form.events.community_member_joined_community.community_id"),value:t})}},36579:function(e,t,r){"use strict";r.d(t,{E:()=>l});var n=r(85893),i=r(67294),o=r(52293),a=r(41342);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l=function(){var e=(0,o.Gc)(),t=e.register,r=e.getValues,l=e.setValue,c=(0,a.wh)(),u=c.currentCommunity,d=c.isLoading,f=r("trigger.resource_id");return((0,i.useEffect)(function(){var e;d||f||(l("trigger.resource_type","Community"),l("trigger.resource_id",null!=(e=null==u?void 0:u.id)?e:""))},[u,d,l,f]),d)?null:(0,n.jsxs)("div",{className:"hidden",children:[(0,n.jsx)("input",s({type:"hidden"},t("trigger.resource_type"))),(0,n.jsx)("input",s({type:"hidden"},t("trigger.resource_id")))]})}},95241:function(e,t,r){"use strict";r.d(t,{T:()=>l,d:()=>u});var n=r(85893),i=r(84326),o=r(39788),a=r(41553),s="settings.workflows.form",l="all_contacts",c=[{value:"members",label:(0,i.t)([s,"audience_type_options.members"])},{value:"non_members",label:(0,i.t)([s,"audience_type_options.non_members"])},{value:l,label:(0,i.t)([s,"audience_type_options.all_contacts"])}],u=function(){return(0,n.jsx)(o.N,{name:"trigger.contact_type",options:c,initialValue:l,label:(0,n.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,i.t)([s,"audience_type"])})})}},93828:function(e,t,r){"use strict";r.d(t,{NX:()=>E,UP:()=>A,ES:()=>m,ey:()=>s,dP:()=>g,NB:()=>C});var n=r(84326),i=r(84555),o=r(45768),a=r(9464),s={label:(0,n.t)("settings.workflows.form.events.community_member_completed_course.title"),value:"community_member_completed_course",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)("settings.workflows.form.events.community_member_completed_course.description"),resource:i.uN.COURSE,formComponent:o.u,viewComponent:a.A,icon:"course"},l=r(79165),c=r(85893),u=r(47691),d="settings.workflows.form.entity_type.lesson",f=[{value:i.uN.COMMUNITY,label:(0,n.t)([d,"community.title"]),description:(0,n.t)([d,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([d,"space_group.title"]),description:(0,n.t)([d,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([d,"space.title"]),description:(0,n.t)([d,"space.description"])},{value:i.uN.LESSON,label:(0,n.t)([d,"specific_lesson.title"]),description:(0,n.t)([d,"specific_lesson.description"])}],p=function(){return(0,c.jsx)(u.X,{entityTypeOptions:f,resourceType:i.S7.COURSE})};p.propTypes={};var m={label:(0,n.t)("settings.workflows.form.events.community_member_completed_lesson.title"),value:"community_member_completed_lesson",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)("settings.workflows.form.events.community_member_completed_lesson.description"),resource:i.uN.LESSON,formComponent:p,viewComponent:l.k,icon:"course"},b="settings.workflows.form.entity_type.section",h=[{value:i.uN.COMMUNITY,label:(0,n.t)([b,"community.title"]),description:(0,n.t)([b,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([b,"space_group.title"]),description:(0,n.t)([b,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([b,"space.title"]),description:(0,n.t)([b,"space.description"])},{value:i.uN.SECTION,label:(0,n.t)([b,"specific_section.title"]),description:(0,n.t)([b,"specific_section.description"])}],y=function(){return(0,c.jsx)(u.X,{entityTypeOptions:h,resourceType:i.S7.COURSE})};y.propTypes={};var v="settings.workflows.form",g={label:(0,n.t)([v,"events.community_member_completed_section.title"]),value:"community_member_completed_section",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([v,"events.community_member_completed_section.description"]),resource:i.uN.SECTION,formComponent:y,viewComponent:l.k,icon:"course"},_=r(88767),x=r(13532),j=r(95900),w=function(e){var t=e.resourceId,r=(0,_.useQuery)(x.av.settings.courses.lessons.show({id:t})),i=r.data,o=r.isLoading;return(0,c.jsx)(j.i,{label:(0,n.t)("settings.workflows.view.resources.quiz"),value:null==i?void 0:i.name,isLoading:o})},O="settings.workflows.form.entity_type.quiz",S=[{value:i.uN.COMMUNITY,label:(0,n.t)([O,"community.title"]),description:(0,n.t)([O,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([O,"space_group.title"]),description:(0,n.t)([O,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([O,"space.title"]),description:(0,n.t)([O,"space.description"])},{value:i.uN.QUIZ,label:(0,n.t)([O,"specific_quiz.title"]),description:(0,n.t)([O,"specific_quiz.description"])}],k=function(){return(0,c.jsx)(u.X,{entityTypeOptions:S,resourceType:i.S7.COURSE,isQuizSelector:!0})};k.propTypes={};var P="settings.workflows.form",C={label:(0,n.t)([P,"events.community_member_passed_quiz.title"]),value:"community_member_passed_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([P,"events.community_member_passed_quiz.description"]),resource:i.uN.QUIZ,formComponent:k,viewComponent:w,icon:"course",released:!0},N="settings.workflows.form",A={label:(0,n.t)([N,"events.community_member_failed_quiz.title"]),value:"community_member_failed_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([N,"events.community_member_failed_quiz.description"]),resource:i.uN.QUIZ,formComponent:k,viewComponent:w,icon:"course",released:!0},I="settings.workflows.form",E={label:(0,n.t)([I,"events.community_member_submitted_quiz.title"]),value:"community_member_submitted_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([I,"events.community_member_submitted_quiz.description"]),resource:i.uN.QUIZ,formComponent:k,viewComponent:w,icon:"course",released:!0}},79165:function(e,t,r){"use strict";r.d(t,{k:()=>v});var n,i=r(85893),o=r(18301),a=r(84555),s=r(77774),l=r(88767),c=r(84326),u=r(13532),d=r(95900),f=r(37382),p=r(1737),m=r(9464),b=r(21272);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(h(n={},a.uN.COMMUNITY,s.H),h(n,a.uN.SPACE_GROUP,b.T),h(n,a.uN.SPACE,m.A),h(n,a.uN.POST_BASIC,function(e){var t=e.resourceId,r=(0,l.useQuery)(p.v.posts.show({id:String(t)})),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.post"),value:null==n?void 0:n.name,isLoading:o})}),h(n,a.uN.EVENT,f.B),h(n,a.uN.LESSON,function(e){var t=e.resourceId,r=(0,l.useQuery)(u.av.settings.courses.lessons.show({id:t})),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.lesson"),value:null==n?void 0:n.name,isLoading:o})}),h(n,a.uN.SECTION,function(e){var t=e.resourceId,r=(0,l.useQuery)(u.av.settings.courses.sections.show({id:t})),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.section"),value:null==n?void 0:n.name,isLoading:o})}),h(n,a.uN.COMMUNITY_MEMBER_ADMIN,o.j),n),v=function(e){var t=e.resourceType,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["resourceType"]),n=y[t]||null;return(0,i.jsx)(i.Fragment,{children:n&&(0,i.jsx)(n,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){h(e,t,r[t])})}return e}({resourceType:t},r))})}},47691:function(e,t,r){"use strict";r.d(t,{X:()=>Q});var n,i=r(85893),o=r(45697),a=r.n(o),s=r(84326),l=r(84555),c=r(39788),u=r(41553),d=r(34260),f=r(36579),p=r(52293),m=r(67294),b=r(96486),h=r(23279),y=r.n(h),v=r(88767),g=r(93199),_=r(13532),x=r(60878),j=function(e){var t=e.lessonId,r=(0,x.pm)().error;return(0,v.useQuery)(["workflows","list","lessons",t],function(){return(0,g.UT)(_.av.settings.courses.lessons.show({id:t}))},{onError:function(){return r((0,s.t)(["settings.workflows.form","errors","lessons","fetch_failed"]))},enabled:!!t})},w=function(e){var t=e.name,r=e.onlyQuizzes,n=void 0!==r&&r,i=(0,x.pm)().error;return(0,v.useQuery)(["workflows","list","lessons",t],function(){return(0,g.UT)(n?_.av.settings.courses.quizzes.index({params:{name:t}}):_.av.settings.courses.lessons.index({params:{name:t}}))},{onError:function(){return i((0,s.t)(["settings.workflows.form","errors","lessons","fetch_failed"]))}})};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}var k=function(e){return{label:e.name,value:e.id,description:"".concat(e.course_name,"  ").concat(e.section_name)}},P=function(e){var t,r,n,i=e.selectedLessonId,o=e.onlyQuizzes,a=(t=(0,m.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||S(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=w({name:s,onlyQuizzes:void 0!==o&&o}),u=c.data,d=c.isLoading,f=j({lessonId:i}),p=f.data,h=f.isLoading,v=f.isSuccess,g=(null!=(n=null==u?void 0:u.records)?n:[]).map(k);return p&&!h&&v&&(g=(0,b.uniqBy)(((function(e){if(Array.isArray(e))return O(e)})(r=g)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||S(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([k(p)]),"value")),{isLoading:d||h,lessonOptions:g,handleLessonTitleChange:y()(function(e){return l(e)},500)}},C=function(e){var t=e.sectionId,r=(0,x.pm)().error;return(0,v.useQuery)(["workflows","list","sections",t],function(){return(0,g.UT)(_.av.settings.courses.sections.show({id:t}))},{onError:function(){return r((0,s.t)(["settings.workflows.form","errors","sections","fetch_failed"]))},enabled:!!t})},N=function(e){var t=e.name,r=(0,x.pm)().error;return(0,v.useQuery)(["workflows","list","sections",t],function(){return(0,g.UT)(_.av.settings.courses.sections.index({params:{name:t}}))},{onError:function(){return r((0,s.t)(["settings.workflows.form","errors","sections","fetch_failed"]))}})};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){return{label:e.name,value:e.id,description:e.course_name}},E=function(e){var t,r,n=e.selectedSectionId,i=(t=(0,m.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return A(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=N({name:o}),l=s.data,c=s.isLoading,u=C({sectionId:n}),d=u.data,f=u.isLoading,p=u.isSuccess,b=(null!=(r=null==l?void 0:l.records)?r:[]).map(I);return d&&!f&&p&&b.push(I(d)),{isLoading:c||f,sectionOptions:b,handleSectionTitleChange:y()(function(e){return a(e)},500)}},T="settings.workflows.form",L=r(76453),D=r(51169),M=r(90597),R=r(1737),B=function(e){var t=(0,v.useQuery)(["post",e],function(){return(0,g.UT)(R.v.posts.show({id:e}))},{enabled:!!e});return{post:t.data,isLoadingPost:t.isLoading,isPostLoaded:t.isSuccess}};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){return{label:e.display_title,value:e.id,description:"".concat(e.space_name,"  ").concat(e.community_member.name)}},U=function(e){var t,r=e.selectedPostId,n=(t=(0,m.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,M.k)({title:i}),s=a.posts,l=a.isLoadingPosts,c=B(r),u=c.post,d=c.isLoadingPost,f=c.isPostLoaded,p=s.map(z);return u&&!d&&f&&p.push(z(u)),{isLoading:l||d,postOptions:p,handlePostTitleChange:y()(function(e){return o(e)},500)}},Z=r(45768),G=r(41812),q=r(13447),V=function(){var e=(0,p.Gc)(),t=e.watch,r=e.setValue;return{resourceType:t("trigger.resource_type"),handleEntitySelectorChange:function(){r("trigger.resource_id",null)}}};function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(H(n={},l.uN.COMMUNITY,f.E),H(n,l.uN.SPACE_GROUP,q.D),H(n,l.uN.SPACE,G.r),H(n,l.uN.COURSE_SPACE,Z.u),H(n,l.uN.POST_BASIC,function(){var e,t=(0,p.Gc)(),r=t.formState.touchedFields,n=t.register,o=t.getValues,a=U({selectedPostId:(null==(e=r.trigger)?void 0:e.resource_type)?null:o("trigger.resource_id")}),l=a.isLoading,d=a.postOptions,f=a.handlePostTitleChange;return l?(0,i.jsx)(D.a,{center:!0}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},n("trigger.resource_type"))),(0,i.jsx)(c.N,{name:"trigger.resource_id",label:(0,i.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)(["settings.workflows.form","choose_post"])}),options:d,rules:{required:(0,s.t)("settings.workflows.form.errors.required")},emptyMessage:(0,s.t)("settings.workflows.form.errors.posts.not_found"),onSearchChange:f})]})}),H(n,l.uN.EVENT,function(){var e,t=(0,p.Gc)().register,r=(0,L.i)({per_page:300}),n=r.data,o=r.isLoading,a=r.isError,l=null==n||null==(e=n.records)?void 0:e.map(function(e){var t=e.name,r=e.space_name,n=e.start_date,i=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,s.t)("settings.workflows.form.recurring_label")):e.name,value:i,description:e.paid_event?"".concat(String(r),"  ").concat(String(n),"  ").concat(e.ticket_price):"".concat(String(r),"  ").concat(String(n))}});return o?(0,i.jsx)(D.a,{center:!0}):a?(0,i.jsx)(u.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,s.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"hidden",children:(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,i.jsx)(c.N,{name:"trigger.resource_id",label:(0,i.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)("settings.workflows.form.which_event")}),options:l,rules:{required:(0,s.t)("settings.workflows.form.errors.required")},emptyMessage:(0,s.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})}),H(n,l.uN.LESSON,function(e){var t,r=e.isQuizSelector,n=(0,p.Gc)(),o=n.formState.touchedFields,a=n.register,l=n.getValues,d=P({selectedLessonId:(null==(t=o.trigger)?void 0:t.resource_type)?null:l("trigger.resource_id"),onlyQuizzes:r}),f=d.lessonOptions,m=d.handleLessonTitleChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},a("trigger.resource_type"))),(0,i.jsx)(c.N,{name:"trigger.resource_id",label:(0,i.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)(["settings.workflows.form",r?"choose_quiz":"choose_lesson"])}),options:f,rules:{required:(0,s.t)("settings.workflows.form.errors.required")},emptyMessage:(0,s.t)(r?"settings.workflows.form.errors.quizzes.not_found":"settings.workflows.form.errors.lessons.not_found"),onSearchChange:m})]})}),H(n,l.uN.SECTION,function(){var e,t=(0,p.Gc)(),r=t.formState.touchedFields,n=t.register,o=t.getValues,a=E({selectedSectionId:(null==(e=r.trigger)?void 0:e.resource_type)?null:o("trigger.resource_id")}),l=a.sectionOptions,d=a.handleSectionTitleChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},n("trigger.resource_type"))),(0,i.jsx)(c.N,{name:"trigger.resource_id",label:(0,i.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)([T,"choose_section"])}),options:l,rules:{required:(0,s.t)([T,"errors.required"])},emptyMessage:(0,s.t)([T,"errors.sections.not_found"]),onSearchChange:d})]})}),H(n,l.uN.COMMUNITY_MEMBER_ADMIN,d.b),n),Q=function(e){var t=e.entityTypeOptions,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["entityTypeOptions"]),n=V(),o=n.resourceType,a=n.handleEntitySelectorChange,l=W[o]||null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.N,{name:"trigger.resource_type",options:t,label:(0,i.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)(["settings.workflows.form","choose_entity"])}),onChange:a}),l&&(0,i.jsx)(l,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){H(e,t,r[t])})}return e}({},r))]})};Q.propTypes={entityTypeOptions:a().arrayOf(a().shape({label:a().string,value:a().string}))}},68167:function(e,t,r){"use strict";r.d(t,{OC:()=>b,Q4:()=>w,BP:()=>h,Zo:()=>m,PJ:()=>P});var n,i=r(84326),o=r(79165),a=r(85893),s=r(84555),l=r(47691),c=r(71943);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d="settings.workflows.form.entity_type.event",f=((function(e){if(Array.isArray(e))return u(e)})(n=c.L)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{value:s.uN.EVENT,label:(0,i.t)([d,"event.title"]),description:(0,i.t)([d,"event.description"])}]),p=function(){return(0,a.jsx)(l.X,{entityTypeOptions:f,resourceType:s.S7.EVENT})};p.propTypes={};var m={label:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_event.title"),value:"community_member_rsvps_to_event",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_event.description"),formComponent:p,viewComponent:o.k,icon:"event"},b={label:(0,i.t)("settings.workflows.form.events.event_starts_in_an_hour.title"),value:"event_starts_in_an_hour",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.event_starts_in_an_hour.description"),formComponent:p,viewComponent:o.k,icon:"event"},h={label:(0,i.t)("settings.workflows.form.events.event_ended_for_member.title"),value:"event_ended_for_member",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.event_ended_for_member.description"),formComponent:p,viewComponent:o.k,icon:"event",released:!0},y=r(76453),v=r(52293),g=r(39788),_=r(51169),x=r(41553),j=r(37382),w={label:(0,i.t)("settings.workflows.form.events.community_member_attended_live_event.title"),value:"community_member_attended_live_event",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.community_member_attended_live_event.description"),resource:s.uN.EVENT,formComponent:function(){var e,t=(0,v.Gc)().register,r=(0,y.i)({per_page:100,location_type:"live"}),n=r.data,o=r.isLoading,s=r.isError,l=null==n||null==(e=n.records)?void 0:e.map(function(e){var t=e.name,r=e.space_name,n=e.start_date,o=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,i.t)("settings.workflows.form.recurring_label")):e.name,value:o,description:e.paid_event?"".concat(String(r),"  ").concat(String(n),"  ").concat(e.ticket_price):"".concat(String(r),"  ").concat(String(n))}});return o?(0,a.jsx)(_.a,{center:!0}):s?(0,a.jsx)(x.Z.LabelXs,{children:(0,a.jsx)("span",{className:"text-v2-danger",children:(0,i.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden",children:(0,a.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,a.jsx)(g.N,{name:"trigger.resource_id",label:(0,a.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.which_event")}),options:l,rules:{required:(0,i.t)("settings.workflows.form.errors.required")},emptyMessage:(0,i.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:j.B,icon:"event",released:!0},O=r(88767),S=r(1737),k=r(95900),P={label:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.title"),value:"community_member_rsvps_to_recurring_event",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.description"),resource:s.uN.RECURRING_EVENT_SETTING,formComponent:function(){var e,t=(0,v.Gc)().register,r=(0,y.i)({per_page:100,location_type:"recurring"}),n=r.data,o=r.isLoading,s=r.isError,l=null==n||null==(e=n.records)?void 0:e.map(function(e){var t=e.name,r=e.space_name,n=e.start_date;return{label:t,value:e.recurring_event_setting_id,description:e.paid_event?"".concat(String(r),"  ").concat(String(n),"  ").concat(e.ticket_price):"".concat(String(r),"  ").concat(String(n))}});return o?(0,a.jsx)(_.a,{center:!0}):s?(0,a.jsx)(x.Z.LabelXs,{children:(0,a.jsx)("span",{className:"text-v2-danger",children:(0,i.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden",children:(0,a.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,a.jsx)(g.N,{name:"trigger.resource_id",label:(0,a.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.which_event")}),options:l,rules:{required:(0,i.t)("settings.workflows.form.errors.required")},emptyMessage:(0,i.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:function(e){var t=e.resourceId,r=(0,O.useQuery)(S.v.recurringEventSettings.show({id:String(t)})),n=r.data,o=r.isLoading;return(0,a.jsx)(k.i,{label:(0,i.t)("settings.workflows.view.resources.event"),value:null==n?void 0:n.name,isLoading:o})},icon:"event"}},71943:function(e,t,r){"use strict";r.d(t,{L:()=>l,d:()=>c});var n=r(85893),i=r(84326),o=r(84555),a=r(47691),s="settings.workflows.form.entity_type.event",l=[{value:o.uN.COMMUNITY,label:(0,i.t)([s,"community.title"]),description:(0,i.t)([s,"community.description"])},{value:o.uN.SPACE_GROUP,label:(0,i.t)([s,"space_group.title"]),description:(0,i.t)([s,"space_group.description"])},{value:o.uN.SPACE,label:(0,i.t)([s,"space.title"]),description:(0,i.t)([s,"space.description"])}],c=function(){return(0,n.jsx)(a.X,{entityTypeOptions:l,resourceType:o.S7.EVENT})};c.propTypes={}},37382:function(e,t,r){"use strict";r.d(t,{B:()=>l});var n=r(85893),i=r(88767),o=r(84326),a=r(1737),s=r(95900),l=function(e){var t=e.resourceId,r=(0,i.useQuery)(a.v.events.show({id:String(t)})),l=r.data,c=r.isLoading;return(0,n.jsx)(s.i,{label:(0,o.t)("settings.workflows.view.resources.event"),value:null==l?void 0:l.name,isLoading:c})}},73321:function(e,t,r){"use strict";r.d(t,{E:()=>_,m:()=>g});var n=r(84326),i=r(84555),o=r(85893),a=r(30713),s=r(52293),l=r(39788),c=r(51169),u=r(41553),d=r(95241),f=function(){var e=(0,s.Gc)().register,t=(0,a.t)(),r=t.memberTags;if(t.isLoading)return(0,o.jsx)(c.a,{center:!0});var i=r.map(function(e){return{label:e.name,value:e.id}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"hidden",children:(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},e("trigger.resource_type")))}),(0,o.jsx)(l.N,{name:"trigger.resource_id",label:(0,o.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.which_tag")}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.member_tags.not_found")}),(0,o.jsx)(d.d,{})]})};f.propTypes={};var p=r(91026),m=r(41609),b=r.n(m),h=r(95900),y="settings.workflows.view",v=function(e){var t=e.resourceId,r=e.contactType,i=(0,p.u)({id:t}),a=i.data,s=void 0===a?{}:a,l=i.isLoading;if(!s)return null;var c=b()(s)?(0,n.t)([y,"deleted_member_tag"]):s.name;return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,o.jsx)(h.i,{label:(0,n.t)([y,"resources.member_tag"]),value:c,isLoading:l,shouldRepresentAsBadge:!0}),(0,o.jsx)(h.i,{label:(0,n.t)([y,"resources.contact_type"]),value:(0,n.t)(["settings.workflows.form.audience_type_options",r])})]})},g={label:(0,n.t)("settings.workflows.form.events.contact_tagged.title"),value:"contact_tagged",group:(0,n.t)("settings.workflows.form.event_groups.tags"),description:(0,n.t)("settings.workflows.form.events.contact_tagged.description"),resource:i.uN.MEMBER_TAG,formComponent:f,viewComponent:v,icon:"tag"},_={label:(0,n.t)("settings.workflows.form.events.contact_untagged.title"),value:"contact_untagged",group:(0,n.t)("settings.workflows.form.event_groups.tags"),description:(0,n.t)("settings.workflows.form.events.contact_untagged.description"),resource:i.uN.MEMBER_TAG,formComponent:f,viewComponent:v,icon:"tag"}},49333:function(e,t,r){"use strict";r.d(t,{x:()=>s});var n=r(84326),i=r(84555),o=r(17919),a=r(56484),s={label:(0,n.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.title"),value:"community_member_ended_trial_without_subscription",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},66564:function(e,t,r){"use strict";r.d(t,{u:()=>s});var n=r(84326),i=r(84555),o=r(17919),a=r(56484),s={label:(0,n.t)("settings.workflows.form.events.community_member_purchases_paywall.title"),value:"community_member_purchases_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_purchases_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},96471:function(e,t,r){"use strict";r.d(t,{H:()=>s});var n=r(84326),i=r(84555),o=r(17919),a=r(56484),s={label:(0,n.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.title"),value:"community_member_subscribed_to_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},43609:function(e,t,r){"use strict";r.d(t,{j:()=>s});var n=r(84326),i=r(84555),o=r(17919),a=r(56484),s={label:(0,n.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.title"),value:"community_member_unsubscribed_from_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},17919:function(e,t,r){"use strict";r.d(t,{Q:()=>s});var n=r(85893),i=r(84326),o=r(69300),a=r(95900),s=function(e){var t,r=e.resourceId,s=(0,o.a)(String(r)),l=s.data,c=s.isLoading;return(0,n.jsx)(a.i,{label:(0,i.t)("settings.workflows.view.resources.paywall"),value:null!=(t=null==l?void 0:l.display_name)?t:"",isLoading:c})}},56484:function(e,t,r){"use strict";r.d(t,{Q:()=>u});var n=r(85893),i=r(52293),o=r(84326),a=r(48996),s=r(39788),l=r(51169),c=r(41553),u=function(){var e=(0,i.Gc)().register,t=(0,a.y)(),r=t.activePaywalls,u=t.isLoading,d=t.isSuccess,f=r.map(function(e){return{label:e.display_name,value:e.id}});return u?(0,n.jsx)(l.a,{center:!0}):d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},e("trigger.resource_type")))}),(0,n.jsx)(s.N,{name:"trigger.resource_id",label:(0,o.t)("settings.workflows.form.which_paywall"),options:f,rules:{required:(0,o.t)("settings.workflows.form.errors.required")},emptyMessage:(0,o.t)("settings.workflows.form.errors.paywalls.not_found")})]}):(0,n.jsx)(c.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,o.t)("settings.workflows.form.errors.paywalls.fetch_failed")})})}},87105:function(e,t,r){"use strict";r.d(t,{j:()=>s});var n=r(84326),i=r(84555),o=r(17919),a=r(56484),s={label:(0,n.t)("settings.workflows.form.events.community_member_started_paywall_trial.title"),value:"community_member_started_paywall_trial",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_started_paywall_trial.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},35354:function(e,t,r){"use strict";r.d(t,{pC:()=>j,Uu:()=>S,Fw:()=>k,Qw:()=>O,jU:()=>x,dO:()=>_,fT:()=>g,GT:()=>w,sj:()=>P});var n=r(84326),i=r(79165),o=r(85893),a=r(84555),s=r(47691),l="settings.workflows.form.entity_type.comment",c=[{value:a.uN.COMMUNITY,label:(0,n.t)([l,"community.title"]),description:(0,n.t)([l,"community.description"])},{value:a.uN.SPACE_GROUP,label:(0,n.t)([l,"space_group.title"]),description:(0,n.t)([l,"space_group.description"])},{value:a.uN.SPACE,label:(0,n.t)([l,"space.title"]),description:(0,n.t)([l,"space.description"])},{value:a.uN.POST_BASIC,label:(0,n.t)([l,"post.title"]),description:(0,n.t)([l,"post.description"])}],u=function(){return(0,o.jsx)(s.X,{entityTypeOptions:c,resourceType:a.S7.BASIC})},d="settings.workflows.form.entity_type.post",f=[{value:a.uN.COMMUNITY,label:(0,n.t)([d,"community.title"]),description:(0,n.t)([d,"community.description"])},{value:a.uN.SPACE_GROUP,label:(0,n.t)([d,"space_group.title"]),description:(0,n.t)([d,"space_group.description"])},{value:a.uN.SPACE,label:(0,n.t)([d,"space.title"]),description:(0,n.t)([d,"space.description"])}],p=function(){return(0,o.jsx)(s.X,{entityTypeOptions:f,resourceType:a.S7.BASIC})};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}p.propTypes={};var b="settings.workflows.form.entity_type.post",h=((function(e){if(Array.isArray(e))return m(e)})(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(f)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{value:a.uN.POST_BASIC,label:(0,n.t)([b,"specific_post.title"]),description:(0,n.t)([b,"specific_post.description"])}]),y=function(){return(0,o.jsx)(s.X,{entityTypeOptions:h,resourceType:a.S7.BASIC})};y.propTypes={};var v=(0,n.t)("settings.workflows.form.event_groups.moderation"),g={label:(0,n.t)("settings.workflows.form.events.post_liked.title"),value:"post_liked",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_liked.description"),formComponent:y,viewComponent:i.k,icon:"post"},_={label:(0,n.t)("settings.workflows.form.events.post_published.title"),value:"post_published",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_published.description"),formComponent:p,viewComponent:i.k,icon:"post"},x={label:(0,n.t)("settings.workflows.form.events.post_flagged.title"),value:"post_flagged",group:v,description:(0,n.t)("settings.workflows.form.events.post_flagged.description"),formComponent:y,viewComponent:i.k,icon:"post"},j={label:(0,n.t)("settings.workflows.form.events.post_approved.title"),value:"post_approved",group:v,description:(0,n.t)("settings.workflows.form.events.post_approved.description"),formComponent:y,viewComponent:i.k,icon:"post"},w={label:(0,n.t)("settings.workflows.form.events.post_rejected.title"),value:"post_rejected",group:v,description:(0,n.t)("settings.workflows.form.events.post_rejected.description"),formComponent:y,viewComponent:i.k,icon:"post"},O={label:(0,n.t)("settings.workflows.form.events.post_comment_created.title"),value:"post_comment_created",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_comment_created.description"),formComponent:u,viewComponent:i.k,icon:"post"},S={label:(0,n.t)("settings.workflows.form.events.post_comment_flagged.title"),value:"post_comment_flagged",group:v,description:(0,n.t)("settings.workflows.form.events.post_comment_flagged.description"),formComponent:u,viewComponent:i.k,icon:"post"},k={label:(0,n.t)("settings.workflows.form.events.post_comment_approved.title"),value:"post_comment_approved",group:v,description:(0,n.t)("settings.workflows.form.events.post_comment_approved.description"),formComponent:u,viewComponent:i.k,icon:"post"},P={label:(0,n.t)("settings.workflows.form.events.post_comment_rejected.title"),value:"post_comment_rejected",group:v,description:(0,n.t)("settings.workflows.form.events.post_comment_rejected.description"),formComponent:u,viewComponent:i.k,icon:"post"}},28911:function(e,t,r){"use strict";r.d(t,{G:()=>a});var n=r(84326),i=r(79165),o=r(71943),a={label:(0,n.t)("settings.workflows.form.events.event_published.title"),value:"event_published",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.event_published.description"),formComponent:o.d,viewComponent:i.k,icon:"event",released:!0}},3922:function(e,t,r){"use strict";r.d(t,{aD:()=>s,D1:()=>l,_:()=>c.G});var n=r(84326),i=r(84555),o=r(9464),a=r(41812),s={label:(0,n.t)("settings.workflows.form.events.community_member_joined_space.title"),value:"community_member_joined_space",group:(0,n.t)("settings.workflows.form.event_groups.space"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_space.description"),resource:i.uN.SPACE,formComponent:a.r,viewComponent:o.A,icon:"space"},l={label:(0,n.t)("settings.workflows.form.events.community_member_leaves_space.title"),value:"community_member_leaves_space",group:(0,n.t)("settings.workflows.form.event_groups.space"),description:(0,n.t)("settings.workflows.form.events.community_member_leaves_space.description"),resource:i.uN.SPACE,formComponent:a.r,viewComponent:o.A,icon:"space"},c=r(28911)},45768:function(e,t,r){"use strict";r.d(t,{u:()=>d});var n=r(85893),i=r(52293),o=r(84326),a=r(54787),s=r(17013),l=r(51466),c=r(51169),u="settings.workflows.form",d=function(){var e=(0,i.Gc)().register,t=(0,a.r)(),r=t.data,d=t.isLoading,f=(r||{}).records,p=(void 0===f?[]:f).filter(function(e){return"course"===e.post_type});return d?(0,n.jsx)(c.a,{center:!0}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,n.jsx)(l.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)([u,"choose_course"]),labelClassName:"!mb-2 !text-sm",placeholder:(0,o.t)([u,"search_course"]),className:"!py-0",children:d?(0,n.jsx)(c.a,{center:!0}):(0,n.jsx)(s.M,{spaces:p,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",defaultButtonLabel:(0,o.t)([u,"select_course"]),placeholder:(0,o.t)([u,"search_course"]),name:"space-select"})})]})}},9464:function(e,t,r){"use strict";r.d(t,{A:()=>s});var n=r(85893),i=r(84326),o=r(41342),a=r(95900),s=function(e){var t=e.resourceId,r=(0,o.T4)({spaceId:t}),s=r.data,l=r.isLoading;return(0,n.jsx)(a.i,{label:(0,i.t)("settings.workflows.view.resources.space"),value:null==s?void 0:s.name,isLoading:l})}},41812:function(e,t,r){"use strict";r.d(t,{r:()=>p});var n=r(85893),i=r(45697),o=r.n(i),a=r(52293),s=r(84326),l=r(54787),c=r(17013),u=r(51466),d=r(51169),f="settings.workflows.form",p=function(e){var t=e.resourceType,r=void 0===t?"":t,i=(0,a.Gc)().register,o=(0,l.r)(),p=o.data,m=o.isLoading,b=(p||{}).records,h=(void 0===b?[]:b).filter(function(e){var t=e.post_type;return!r||t===r});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},i("trigger.resource_type"))),(0,n.jsx)(u.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,s.t)([f,"choose_space"]),labelClassName:"!mb-2 !text-sm",errorClassName:"text-v2-danger text-xs mt-1",placeholder:(0,s.t)([f,"search_space"]),rules:{required:(0,s.t)("settings.workflows.form.errors.required")},className:"!py-0",children:m?(0,n.jsx)(d.a,{center:!0}):(0,n.jsx)(c.M,{spaces:h,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,s.t)("settings.workflows.form.errors.required")}})})]})};p.propTypes={resourceType:o().string}},23836:function(e,t,r){"use strict";r.d(t,{d:()=>l,_:()=>s});var n=r(84326),i=r(84555),o=r(21272),a=r(13447),s={label:(0,n.t)("settings.workflows.form.events.community_member_joined_space_group.title"),value:"community_member_joined_space_group",group:(0,n.t)("settings.workflows.form.event_groups.space_group"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_space_group.description"),resource:i.uN.SPACE_GROUP,formComponent:a.D,viewComponent:o.T,icon:"space"},l={label:(0,n.t)("settings.workflows.form.events.community_member_leaves_space_group.title"),value:"community_member_leaves_space_group",group:(0,n.t)("settings.workflows.form.event_groups.space_group"),description:(0,n.t)("settings.workflows.form.events.community_member_leaves_space_group.description"),resource:i.uN.SPACE_GROUP,formComponent:a.D,viewComponent:o.T,icon:"space"}},21272:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(85893),i=r(84326),o=r(41342),a=r(95900),s=function(e){var t=e.resourceId,r=(0,o.p7)(t),s=r.data,l=r.isLoading;return(0,n.jsx)(a.i,{label:(0,i.t)("settings.workflows.view.resources.space_group"),value:null==s?void 0:s.name,isLoading:l})}},13447:function(e,t,r){"use strict";r.d(t,{D:()=>f});var n=r(85893),i=r(52293),o=r(84326),a=r(15882),s=r(41342),l=r(51466),c=r(51169),u="settings.workflows.form",d=function(){var e=(0,i.Gc)().register,t=(0,s.e2)(),r=t.records,d=t.isLoading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,n.jsx)(l.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)([u,"choose_space_group"]),labelClassName:"!mb-2 !text-sm",errorClassName:"text-v2-danger text-xs mt-1",placeholder:(0,o.t)([u,"search_space_group"]),className:"!py-0",children:d?(0,n.jsx)(c.a,{center:!0}):(0,n.jsx)(a.V,{spaceGroups:r,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,o.t)("settings.workflows.form.errors.required")}})})]})},f=function(){return(0,n.jsx)(s.CM,{children:(0,n.jsx)(d,{})})}},65305:function(e,t,r){"use strict";r.d(t,{r:()=>q});var n=r(84326),i=r(84555),o=r(85893),a=r(38484),s=r(95900),l=r(52293),c=r(95241),u=r(13532),d=r(8684),f=r(39788),p=r(51169),m=r(41553);function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var h={label:(0,n.t)("settings.workflows.form.events.received_form_submission.title"),value:"received_form_submission",group:(0,n.t)("settings.workflows.form.event_groups.forms"),description:(0,n.t)("settings.workflows.form.events.received_form_submission.description"),formComponent:function(){var e=(0,l.Gc)().register,t=(0,d.U)({api:u.av.forms.index,key:"forms",useParamsWrapper:!1}),r=t.records,i=void 0===r?[]:r;if(t.isLoading)return(0,o.jsx)(p.a,{center:!0});var a=[];return i&&(a=i.map(function(e){var t=e.id,r=e.name;return{value:t,label:null!=r?r:""}})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",b({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,o.jsx)("input",b({type:"hidden",className:"hidden"},e("trigger.contact_type",{value:c.T}))),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,o.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","events.received_form_submission.choose"])}),options:a,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.events.received_form_submission.error")})]})},resource:i.uN.FORM,viewComponent:function(e){var t=e.resourceId,r=(0,a.u)({id:t}),i=r.data,l=r.isLoading;return(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.form.events.received_form_submission.form"),value:null==i?void 0:i.name,isLoading:l})},icon:"email"},y=r(13445),v=r(18301),g=r(34260),_={label:(0,n.t)("settings.workflows.form.events.community_member_sent_dm_to_admin.title"),value:"community_member_sent_dm_to_admin",group:(0,n.t)("settings.workflows.form.event_groups.messaging"),description:(0,n.t)("settings.workflows.form.events.community_member_sent_dm_to_admin.description"),formComponent:g.b,resource:i.uN.COMMUNITY_MEMBER_ADMIN,viewComponent:v.j,icon:"email"},x=r(77774),j=r(36579),w={label:(0,n.t)("settings.workflows.form.events.community_member_joined_community.title"),value:"community_member_joined_community",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_community.description"),formComponent:j.E,resource:i.uN.COMMUNITY,viewComponent:x.H,icon:"user",hasNoVisibleFormFields:!0},O={label:(0,n.t)("settings.workflows.form.events.community_member_email_changed.title"),value:"community_member_email_changed",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_email_changed.description"),formComponent:j.E,resource:i.uN.COMMUNITY,viewComponent:x.H,icon:"email",hasNoVisibleFormFields:!0},S=r(20176),k=r(37882),P={label:(0,n.t)("settings.workflows.form.events.community_member_profile_field_updated.title"),value:"community_member_profile_field_updated",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_profile_field_updated.description"),formComponent:function(){var e=(0,l.Gc)().register,t=(0,k.N)().getOptions,r=t.data;if(t.isLoading)return(0,o.jsx)(p.a,{center:!0});var i=null==r?void 0:r.map(function(e){return{value:e.id,label:e.label}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,o.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_profile_field"])}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.profile_fields.not_found")}),(0,o.jsx)(c.d,{})]})},viewComponent:function(e){var t=e.resourceId,r=e.contactType,i=(0,S.Yw)({fieldId:t}).getOptions,a=i.data,l=i.isLoading;return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.view.resources.profile_field"),value:null==a?void 0:a.label,isLoading:l,shouldRepresentAsBadge:!0}),(0,o.jsx)(s.i,{label:(0,n.t)(["settings.workflows.view","resources.contact_type"]),value:(0,n.t)(["settings.workflows.form.audience_type_options",r])})]})},resource:i.uN.PROFILE_FIELD,icon:"user",released:!0},C=r(93828),N=r(68167),A=r(86976),I=function(){var e=(0,l.Gc)().register,t=(0,A.c8)(),r=t.data;if(t.isLoading||!r)return(0,o.jsx)(p.a,{center:!0});var i=[];return r.levels&&(i=r.levels.map(function(e){var t=e.id,r=e.name;return{value:t,label:null!=r?r:""}})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,o.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_level"])}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.error")})]})},E=function(e){var t,r,i=e.resourceId,a=(0,A.c8)(),l=a.data,c=a.isLoading,u=null==l||null==(r=l.levels)||null==(t=r.find(function(e){return e.id===i}))?void 0:t.name;return(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.level"),value:u,isLoading:c})},T={label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_down.title"),value:"gamification_member_leveled_down",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_down.description"),formComponent:I,resource:i.uN.GAMIFICATION_LEVEL,viewComponent:E,icon:"email"},L={label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.title"),value:"gamification_member_leveled_up",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.description"),formComponent:I,resource:i.uN.GAMIFICATION_LEVEL,viewComponent:E,icon:"email"},D=r(73321),M=r(66564),R=r(96471),B=r(43609),F=r(87105),z=r(49333),U=r(35354),Z=r(3922),G=r(23836),q=[w,N.Zo,N.PJ,y.q,y.P,Z.aD,Z.D1,G._,G.d,M.u,D.m,D.E,N.BP,U.dO,U.Qw,U.jU,U.Uu,U.pC,U.Fw,U.GT,U.sj,U.fT,C.ey,C.ES,C.dP,R.H,B.j,F.j,z.x,N.OC,Z._,N.Q4,P,O,L,T,h,C.NB,C.UP,C.NX,_]},69024:function(e,t,r){"use strict";r.d(t,{h:()=>m});var n=r(85893),i=r(70442),o=r(84326),a=r(82895),s=r(29875),l=r(74376),c=r(72171),u=r(13532),d=r(39905),f=r(71462),p=r(65088),m=function(e){var t=e.title,r=e.showAddNewButton,m=e.showBottomBorder,b=e.children,h=(0,i.k6)(),y=(0,l.I)(),v=(0,s.u)(),g=(0,p._)().category;return(0,n.jsx)(f.b,{pageTitle:t,leftContent:"paywalls"===g?(0,n.jsx)(a.G,{title:t}):(0,n.jsx)(c.y,{children:t}),layoutConfigProps:{disableRightSidebar:!0},hasBorder:void 0===m||m,rightContent:(void 0===r||r)&&(0,n.jsx)(d.z,{onClick:function(){h.push(u.o0.new()),y.hide(),v.hide()},variant:"circle",children:(0,o.t)(["settings.workflows","new_workflow"])}),children:b})}},57064:function(e,t,r){"use strict";r.d(t,{X:()=>y});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(84326),l=(0,i.forwardRef)(function(e,t){var r=e.isExpanded,i=void 0!==r&&r,o=e.isTruncationEnabled,s=e.children;return(0,n.jsx)("div",{ref:t,className:a()("w-full",{"max-h-56 overflow-hidden":!i}),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},void 0!==o&&o&&!i&&{WebkitMaskImage:"linear-gradient(180deg,#000 80%,transparent)",maskImage:"linear-gradient(180deg,#000 80%,transparent)"}),children:s})});l.displayName="Container";var c=r(85924);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Promise.all([r.e("2781"),r.e("1982")]).then(r.bind(r,7983))];case 1:return e=n.sent().default,[4,r.e("260").then(r.bind(r,59675))];case 2:return t=n.sent().default,e.registerLanguage("json",t),e.configure({languages:["json"]}),e.highlightAll(),[3,4];case 3:return console.error("Error highlighting code",n.sent()),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)})})()},f=function(){var e=(0,c.TC)().isDarkAppearance;(0,i.useEffect)(function(){d()},[e])},p=function(e){var t,r,i=e.children,o=e.className,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return f(),(0,n.jsx)("pre",{className:"bg-tertiary m-0 !rounded-md border-none px-4 py-3",children:(0,n.jsx)("code",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:a()("!bg-transparent !p-0 text-xs leading-4",o)},s),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var t=e.containerRef,r=b((0,i.useState)(!1),2),n=r[0],o=r[1],a=b((0,i.useState)(!1),2),s=a[0],l=a[1];return(0,i.useLayoutEffect)(function(){var e=null==t?void 0:t.current;if(e){var r=e.querySelector("pre");if(r){var n=e.clientHeight;r.clientHeight>n&&l(!0)}}},[t]),{isTruncationEnabled:s,isExpanded:n,toggleExpand:function(){o(function(e){return!e})}}},y=function(e){var t=e.code,r=e.className,o=(0,i.useRef)(null),c=h({containerRef:o}),u=c.isTruncationEnabled,d=c.isExpanded,f=c.toggleExpand;return(0,n.jsxs)("div",{className:a()("flex flex-col items-start gap-1",r),children:[(0,n.jsx)(l,{ref:o,isExpanded:d,isTruncationEnabled:u,children:(0,n.jsx)(p,{children:t})}),u&&(0,n.jsx)("div",{className:"px-1",children:(0,n.jsx)("button",{type:"submit",className:"text-default hover:text-dark text-xs transition-colors",onClick:f,children:d?(0,s.t)("show_less"):(0,s.t)("show_more")})})]})}},39368:function(e,t,r){"use strict";r.d(t,{K:()=>w});var n=r(85893),i=r(23560),o=r.n(i),a=r(70442),s=r(84326),l=r(57363),c=r(42042),u=r(41553),d=r(1168),f=r(52382),p=r(18446),m=r(80171),b="settings.workflows.templates.labels.ai_action";function h(){return(0,n.jsx)("div",{className:"flex h-5 items-center gap-1 rounded pe-1 hover:bg-[#AB6DFB]/10",children:(0,n.jsxs)(m.T,{className:"flex",interactive:!1,content:(0,s.t)([b,"description"]),placement:"top",arrow:!1,tooltipTextClassName:"!max-w-[210px]",children:[(0,n.jsx)(l.JO,{type:"10-stardust",size:10,className:"text-[#AB6DFB]"}),(0,n.jsx)(u.Z.LabelXxs,{color:"text-[#AB6DFB]",children:(0,s.t)([b,"label"])})]},(0,s.t)([b,"description"]))})}var y="settings.workflows.templates.labels.email_hub";function v(){return(0,n.jsx)("div",{className:"flex h-5 items-center gap-1 rounded pe-1 hover:bg-[#3B82F6]/10",children:(0,n.jsxs)(m.T,{className:"flex",interactive:!1,content:(0,s.t)([y,"description"]),placement:"top",arrow:!1,tooltipTextClassName:"!max-w-[210px]",children:[(0,n.jsx)(l.JO,{type:"10-diagonal-send",size:10,className:"text-date-blue"}),(0,n.jsx)(u.Z.LabelXxs,{color:"text-date-blue",children:(0,s.t)([y,"label"])})]},(0,s.t)([y,"description"]))})}function g(){return(0,n.jsx)("div",{className:"flex h-[18px] items-center gap-1 rounded bg-red-500/10 px-1 py-px",children:(0,n.jsx)(u.Z.LabelXxs,{color:"text-feedback-error",children:(0,s.t)(["settings.workflows.templates.labels.new","label"])})})}var _=r(84516),x=r(38776),j="workflows.templates";function w(e){var t,r,i=e.id,m=e.templateType,b=e.templateKey,y=e.categories,w=e.isNew,O=e.displayLabels,S=e.onClose,k=(0,p.y)(void 0===y?[]:y),P=k.category,C=k.isEmailHub,N=k.isAiAgent,A=(0,a.k6)(),I=function(){null==S||S(),A.push(f.o.preview({workflowId:i}))},E=o()(I);return(0,n.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,d.A)("bg-primary border-primary hover:border-dark dark:hover:border-light flex w-80 cursor-pointer flex-col gap-4 rounded-xl border p-4 transition-shadow hover:shadow-md",{"cursor-pointer":E})},E?{role:"button",onClick:I}:{}),r=r={children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-black text-white dark:bg-white dark:text-black",children:(0,n.jsx)(l.JO,{type:c.b[b],size:16})}),(void 0===O||O)&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[C&&(0,n.jsx)(v,{}),N&&(0,n.jsx)(h,{}),void 0!==w&&w&&(0,n.jsx)(g,{})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("span",{className:"line-clamp-1 overflow-hidden text-ellipsis",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)([j,b,"title"])})}),(0,n.jsx)("span",{className:"line-clamp-2 overflow-hidden text-ellipsis",children:(0,n.jsx)(u.Z.BodyXs,{children:(0,s.t)([j,b,"description"])})})]})]}),(0,n.jsxs)("div",{className:"mt-auto flex flex-wrap gap-2",children:[(0,n.jsx)(x.X,{templateType:m}),(0,n.jsx)(_.h,{category:P})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},7406:function(e,t,r){"use strict";r.d(t,{a:()=>l});var n=r(85893),i=r(70434),o=r(94184),a=r.n(o),s=function(e){var t=e.tooltipContent,r=e.className,i=e.children;return(0,n.jsx)("div",{className:a()("flex items-center justify-center",r,{"cursor-pointer":t}),children:i})},l=function(e){var t=e.tooltipContent,r=e.className,o=e.children;return t?(0,n.jsx)(i.Y,{placement:"top",content:t,children:(0,n.jsx)(s,{tooltipContent:t,className:r,children:o})}):(0,n.jsx)(s,{tooltipContent:t,className:r,children:o})}},11294:function(e,t,r){"use strict";r.d(t,{W:()=>p});var n=r(85893),i=r(1168),o=r(57363),a=r(41553),s=r(7406),l=r(67294),c=r(84326),u=r(67521),d="settings.workflows",f=function(e){var t=e.actions,r=e.truncationLimit,n=(0,l.useMemo)(function(){return t.filter(function(e){return""!==e}).map(function(e){var t=(0,u.mR)(e);return{title:"".concat((0,c.t)([d,"action_types",e],{defaultValue:(0,c.t)([d,"action_types","unknown"])})),icon:t}})},[t]),i=(0,l.useMemo)(function(){return t.slice(r).map(function(e){return"".concat((0,c.t)([d,"action_types",e],{defaultValue:(0,c.t)([d,"action_types","unknown"])}))}).join(", ")},[t,r]),o=t.length-r;return{actions:o>1?n.slice(0,r):n,remainingActionsCount:o,remainingItemsTooltip:i}},p=function(e){var t=e.actions,r=void 0===t?[]:t,l=e.size,c=void 0===l?"lg":l,u=e.truncationLimit,d=void 0===u?2:u,p=e.className,m=f({actions:r,truncationLimit:d}),b=m.actions,h=m.remainingActionsCount,y=m.remainingItemsTooltip;return 0===r.length||d<1?(0,n.jsx)("div",{className:"py-[25px] leading-none",children:"-"}):(0,n.jsxs)("div",{className:(0,i.A)("flex items-center",{"gap-1":"md"===c,"gap-2":"lg"===c},p),children:[b.map(function(e,t){var r=e.title,i=e.icon;return(0,n.jsx)(s.a,{tooltipContent:r,children:(0,n.jsx)("div",{className:"bg-tertiary flex h-8 max-h-8 w-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,n.jsx)(o.JO,{type:i,size:16,className:"text-dark !h-4 !w-4 shrink-0"})})},"".concat(i,"-").concat(t))}),h>1&&(0,n.jsx)(s.a,{tooltipContent:y,children:(0,n.jsx)("div",{className:"bg-tertiary flex h-8 max-h-8 w-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,n.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,n.jsx)("span",{className:(0,i.A)("text-dark flex",{"text-xxs":"md"===c}),children:"+".concat(h)})})})})]})}},90069:function(e,t,r){"use strict";r.d(t,{o:()=>T});var n=r(88767),i=r(70442),o=r(84326),a=r(51630),s=r(70216),l=r(6082),c=r(12369),u=r(41342),d=r(13532),f=r(96354),p=r(79869),m=r(60878),b=r(84555),h=r(85893),y=r(57105),v=r(63549),g=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,y.dd)();return(0,h.jsx)(v.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"danger",confirmText:(0,o.t)("settings.workflows.table.actions.deactivate_and_archive"),title:(0,o.t)("settings.workflows.table.actions.archive_confirm_active_workflow_title"),onConfirm:r,disabled:n,children:(0,o.t)("settings.workflows.table.actions.archive_confirm_active_workflow_description",{name:t||(0,o.t)("settings.workflows.table.untitled_workflow")})})},_=y.gk.create(function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,h.jsx)(g,{name:t,onConfirm:r,disabled:n})}),x=r(795),j=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,y.dd)(),a=(0,o.t)("settings.workflows.table.actions.archive_confirm_description",{name:t||(0,o.t)("settings.workflows.table.untitled_workflow")}),s=(0,h.jsx)(x.w,{content:a});return(0,h.jsx)(v.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"danger",confirmText:(0,o.t)("settings.workflows.table.actions.archive"),title:(0,o.t)("settings.workflows.table.actions.archive_confirm_title"),onConfirm:r,disabled:n,children:s})},w=y.gk.create(function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,h.jsx)(j,{name:t,onConfirm:r,disabled:n})}),O=r(84208),S=function(e){var t=e.onConfirm,r=e.disabled,n="settings.workflows.table.actions.cancel",i=(0,y.dd)();return(0,h.jsx)(O.W,{isOpen:i.visible,onClose:i.hide,actionVariant:"danger",actionText:(0,o.t)("".concat(n,".title")),title:(0,o.t)("".concat(n,".confirm_title")),onAction:t,disabled:r,children:(0,o.t)("".concat(n,".description"))})},k=y.gk.create(function(e){var t=e.onConfirm,r=e.disabled;return(0,h.jsx)(S,{onConfirm:t,disabled:r})}),P=function(e){var t=e.onConfirm,r=e.disabled,n=(0,y.dd)();return(0,h.jsx)(O.W,{isOpen:n.visible,onClose:n.hide,actionVariant:"danger",actionText:(0,o.t)("settings.workflows.table.actions.delete"),title:(0,o.t)("settings.workflows.table.actions.delete_confirm_title"),onAction:t,disabled:r,children:(0,o.t)("settings.workflows.table.actions.delete_confirm_description")})},C=y.gk.create(function(e){var t=e.onConfirm,r=e.disabled;return(0,h.jsx)(P,{onConfirm:t,disabled:r})});function N(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function A(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){N(o,n,i,a,s,"next",e)}function s(e){N(o,n,i,a,s,"throw",e)}a(void 0)})}}function I(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var E="settings.workflows.table.actions",T=function(e){var t=e.workflowId,r=e.type,h=e.status,v=e.name,g=e.refetch,x=(0,i.k6)(),j=(0,m.pm)(),O=j.success,S=j.error,P=(0,n.useQueryClient)(),N=(0,f.t)(),T=(0,y.dd)(C),L=(0,y.dd)(k),D=(0,y.dd)(w),M=(0,y.dd)(_),R=(0,p.w)(),B=(0,u.wh)().currentCommunity,F=(null!=B?B:{}).current_plan_tier,z=h===b.qN.ACTIVE?M:D,U=(0,n.useMutation)(function(){return a.nH.createRun({workflowId:t})},{onSuccess:function(){O((0,o.t)([E,"run_in_progress"]),{messageComplete:(0,o.t)([E,"run_success"]),onComplete:function(){return x.push({pathname:d.o0.history(),search:"workflow_type=bulk_action"})}})},onError:function(e){(0,s.h)(e)||(0,s.w)(e)?Z(e):S(e.message)}}).mutate,Z=function(e){var t,r;return R.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,s.h)(e)&&{planTier:(0,l.gq)(F)}),r=r={subheading:e.body.message,source:(0,c.yf)(),isEmailHubRequired:(0,s.w)(e),onSuccess:function(){R.hide(),U()},successButtonLabel:(0,o.t)("settings.workflows.upgrade_modal.run_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},G=(0,n.useMutation)(function(){return a.nH.deleteWorkflow({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:return T.hide(),O((0,o.t)([E,"deleting_workflow"]),{messageComplete:(0,o.t)([E,"deletion_successful"])}),[4,null==g?void 0:g()];case 1:return e.sent(),[2]}})})()},onError:function(e){return S(e.message)}}),q=G.mutate,V=G.isLoading,H=(0,n.useMutation)(function(){return a.nH.inactivate({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:return L.hide(),O((0,o.t)([E,"cancel","cancelling_schedule"]),{messageComplete:(0,o.t)([E,"cancel","cancellation_successful"])}),[4,null==g?void 0:g()];case 1:return e.sent(),[2]}})})()},onError:function(e){return S(e.message)}}),W=H.mutate,Q=H.isLoading,J=(0,n.useMutation)(function(){return a.nH.archiveWorkflow({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:return z.hide(),O((0,o.t)([E,"archiving_workflow"]),{messageComplete:(0,o.t)([E,"archive_successful"]),onComplete:function(){P.invalidateQueries({queryKey:["totalArchivedWorkflows"]})}}),[4,null==g?void 0:g()];case 1:return e.sent(),[2]}})})()},onError:function(e){return S(e.message)}}),K=J.mutate,$=J.isLoading,X=N.page,Y=N.status;return{onDelete:q,onDuplicate:(0,n.useMutation)(function(){return a.nH.duplicateWorkflow({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:if(O((0,o.t)([E,"duplicating_workflow"]),{messageComplete:(0,o.t)([E,"duplication_successful"])}),Y!==b.qN.ARCHIVED&&1===Number(X))return[3,1];return x.push({pathname:d.o0.index(),search:"workflow_type=".concat(r,"&page=1")}),[3,3];case 1:return[4,null==g?void 0:g()];case 2:e.sent(),e.label=3;case 3:return[2]}})})()},onError:function(e){return S(e.message)}}).mutate,handleDeleteWithConfirmation:function(){T.show({disabled:V,onConfirm:q})},handleArchiveWithConfirmation:function(){z.show({name:v,disabled:$,onConfirm:K})},handleCancelWithConfirmation:function(){L.show({name:v,disabled:Q,onConfirm:W})}}}},4501:function(e,t,r){"use strict";r.d(t,{u:()=>o});var n=r(85893),i=r(34870),o=function(e){var t=e.date,r=e.shouldIncludeTime?i.f.short_date_at_short_time:i.f.long_date;return(0,n.jsx)("span",{className:"break-normal",children:t?(0,i.w)({dateTime:new Date(t),format:r}):"-"})}},88203:function(e,t,r){"use strict";r.d(t,{V:()=>c});var n=r(85893),i=r(84326),o=r(27175),a=r(12581),s=r(39905),l=r(51466),c=function(e){var t,r,c=e.name,u=void 0===c?"member-filter":c,d=(0,a.j)(),f=d.selectedText,p=d.onApply,m=(0,o.r)();return(0,n.jsx)(l.l,{defaultValues:(t={},r=+(f||0),u in t?Object.defineProperty(t,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[u]=r,t),onSubmit:function(e,t){var r=t.reset;p(e[u]),r()},children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 p-4",children:[(0,n.jsx)(l.l.CommunityMemberSelect,{name:u,includeInactive:!0,direction:"down",autoFocus:!0}),(0,n.jsx)(s.z,{variant:m,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})}},74472:function(e,t,r){"use strict";r.d(t,{x:()=>d});var n,i=r(85893),o=r(84326),a=r(84555),s=r(95342),l=r(63234);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=(c(n={},a.Ii.SUCCESS,{text:"success",badge:"success"}),c(n,a.Ii.PARTIAL_SUCCESS,{text:"warning",badge:"warning"}),c(n,a.Ii.FAILED,{text:"danger",badge:"danger"}),c(n,a.Ii.CANCELLED,{text:"danger",badge:"danger"}),c(n,a.Ii.IN_PROGRESS,{text:"default",badge:"info"}),c(n,a.Ii.SKIPPED,{text:"default",badge:"info"}),c(n,a.Ii.DUPLICATE_SKIPPED,{text:"default",badge:"info"}),c(n,a.qN.ACTIVE,{text:"success",badge:"success"}),c(n,a.qN.INACTIVE,{text:"default",badge:"default"}),c(n,a.qN.DRAFT,{text:"default",badge:"default"}),c(n,a.qN.ARCHIVED,{text:"default",badge:"default"}),c(n,a.qN.ALL,{text:"default",badge:"default"}),c(n,a.qN.PUBLISHED,{text:"success",badge:"success"}),n),d=function(e){var t,r,n,d=e.result,f=e.isBadge,p=void 0===f||f,m=d in a.Ii,b=null!=(n=u[d])?n:{text:"default",badge:"default"},h=p?b.badge:b.text,y=p?s.O:l.r;return(0,i.jsx)(y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({variant:h},!m&&{textTransform:"capitalize"}),r=r={children:(0,o.t)(["settings.workflows.table.result",d],{defaultValue:d||""})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},41051:function(e,t,r){"use strict";r.d(t,{W:()=>o});var n=r(85893),i=r(41553),o=function(e){var t=e.children;return(0,n.jsx)(i.Z.LabelSm,{weight:"medium",children:(0,n.jsx)("span",{className:"break-normal",children:t})})}},55125:function(e,t,r){"use strict";r.d(t,{m:()=>V});var n=r(67294),i=r(96486),o=r(84326),a=r(5100),s=r(98062),l=r(6563),c=r(46837),u=r(2098),d=r(96835),f=r(55611),p=r(51290),m=r(67330),b=r(8407),h=r(11570),y=r(76492),v=function(e){var t=null==e?void 0:e.map(function(e){return String(e.value)}),r=(0,y.S)({params:{ids:t},enabled:!!(null==t?void 0:t.length)}).data;return(0,n.useMemo)(function(){return null==r?void 0:r.reduce(function(e,t){return e[String(t.id)]=t.name,e},{})},[r])},g=r(88767),_=r(51630),x=function(e){var t=e.ids;return(0,g.useQuery)(["workflows","events","list",t],function(){return _.S1.listEvents({params:{ids:t}})},{enabled:!(0,i.isEmpty)((0,i.compact)(t))})},j=function(e){var t=x({ids:null==e?void 0:e.value}).data,r=void 0===t?{}:t;return(0,n.useMemo)(function(){var e;return(null==(e=r.records)?void 0:e.reduce(function(e,t){return e[t.id]=t.name,e},{}))||{}},[r])},w=r(30713),O=function(){var e=(0,w.t)().memberTags;return(0,n.useMemo)(function(){return e.map(function(e){return{id:e.id,name:e.name}}).reduce(function(e,t){return e[t.id]=t.name,e},{})},[e])},S=r(48996),k=function(){var e=(0,S.y)().allPaywalls;return(0,n.useMemo)(function(){return e.reduce(function(e,t){return e[t.id]=t.display_name,e},{})},[e])},P=r(72582),C=function(){var e=(0,P.h)().segments;return(0,n.useMemo)(function(){return null==e?void 0:e.map(function(e){return{id:e.id,title:e.title}}).reduce(function(e,t){return e[t.id]=t.title,e},{})},[e])},N=r(54150),A=function(){var e=(0,N.t)({valueKey:"slug"}).visibleSpaceGroups;return(0,n.useMemo)(function(){return e.reduce(function(e,t){return e[t.value]=t.label,e},{})},[e])},I=r(41342),E=function(){var e=(0,I.nT)().helpers.spaceWithViewContentAccess();return(0,n.useMemo)(function(){return e.map(function(e){return{label:e.emoji?"".concat(e.emoji," ").concat(e.name):e.name,value:e.slug}}).reduce(function(e,t){return e[t.value]=t.label,e},{})},[e])},T="settings.workflows.view",L=function(e,t){return(0,a.T)(e,e.value?t[e.value]:null)},D=function(e){var t=e.filterParam,r=e.spaceNameMap,n=void 0===r?{}:r,a=e.tagsIdMap,y=void 0===a?{}:a,v=e.spaceGroupNameMap,g=void 0===v?{}:v,_=e.eventNameMap,x=void 0===_?{}:_,j=e.paywallsNameMap,w=void 0===j?{}:j,O=e.segmentsIdMap,S=void 0===O?{}:O,k=e.accessGroupNameMap,P=void 0===k?{}:k,C=t.key,N=t.value,A=(0,o.t)([T,"audience_filters",C],{defaultValue:(0,o.t)([T,"unknown"])}),I={name:u.d1,email:u.d1,headline:u.d1,spaces:function(e){return L(e,n)},tags:function(e){return L(e,y)},space_groups:function(e){return L(e,g)},events:function(e){return L(e,x)},paywalls:function(e){return L(e,w)},joined_community_days_ago:m.P,last_logged_in_days_ago:b.$,activity_score:d.i,geo_location:s.d,is_avatar_set:function(e){var t=e.value;return(0,f.c)(t)},member:function(e){var t=e.value;return(0,h.c)({selectedText:t})},segment_id:function(e){return S[Number(e.value)]},access_group_ids:function(e){return L(e,P)},invitation_status:function(e){var t=e.value;return(0,c.f$)(t)},invited_at_days_ago:l.l,subscribed_to_marketing_emails:function(e){var t=e.value;return(0,p.c)({selectedText:t})}};return(0,i.isFunction)(I[C])?{name:A,value:I[C](t)}:{name:A,value:N}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=E(),r=O(),o=A(),a=j(e.find(function(e){return"events"===e.key})),s=k(),l=C(),c=v(e.filter(function(e){return"access_group_ids"===e.key}));return(0,n.useMemo)(function(){var n=e.filter(function(e){return"profile_field"!==e.key});return(0,i.isEmpty)(n)?[]:n.map(function(e){return D({filterParam:e,spaceNameMap:t,tagsIdMap:r,spaceGroupNameMap:o,eventNameMap:a,paywallsNameMap:s,segmentsIdMap:l,accessGroupNameMap:c})})},[e,t,r,o,a,s,l,c])},R=r(22205),B=r(71066),F=r(81791),z=r(28847),U=function(e,t){var r=t.label,n=t.field_type,i=t.choices,o=null;if([B.Z9.TEXT,B.Z9.NUMBER,B.Z9.TEXTAREA,B.Z9.LINK].includes(n))o=(0,F.d)(e);else if([B.Z9.SELECT,B.Z9.CHECKBOX].includes(n)){var s=e.value,l=(void 0===i?[]:i).find(function(e){return e.id===Number(s)});o=(0,a.T)(e,l?l.value:s)}return{name:r,value:o}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,z.C)({platformFilters:[],component:function(){return null}}),r=t.customProfileFields,a=t.isLoadingProfileFields,s=(0,R.i)().getArchivedQueryOptions,l=s.data,c=void 0===l?[]:l,u=s.isLoading;return(0,n.useMemo)(function(){return(0,i.isEmpty)(e)||a||u?[]:e.filter(function(e){return"profile_field"===e.key}).map(function(e){var t=e.profile_field_id,n=r.find(function(e){return e.id===Number(t)});if(n)return U(e,n);var i=c.find(function(e){return e.id===Number(t)});return i?U(e,i):{name:(0,o.t)("settings.workflows.view.deleted_profile_field"),value:""}})},[e,a,u,r,c])};function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function q(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=M(e),r=Z(e),i=(0,n.useMemo)(function(){return q(t).concat(q(r))||[]},[t,r]);return{filters:i,hasFilters:i.length>0}}},67930:function(e,t,r){"use strict";r.d(t,{PF:()=>c});var n=r(85893),i=r(84326),o=r(57105),a=r(63549),s=function(e){var t=e.onConfirm,r=e.onCancel,s=e.disabled,l=e.title,c=e.body,u=(0,o.dd)();return(0,n.jsx)(a.c,{isOpen:u.visible,onClose:u.hide,confirmVariant:"circle",confirmText:(0,i.t)("settings.workflows.continue_to_edit"),title:l,cancelText:(0,i.t)("settings.workflows.cancel"),onConfirm:t,onCancel:r,disabled:void 0!==s&&s,children:c})},l=o.gk.create(function(e){var t=e.onConfirm,r=e.onCancel,i=e.disabled,o=e.title,a=e.body;return(0,n.jsx)(s,{onConfirm:t,onCancel:r,disabled:void 0!==i&&i,title:o,body:a})}),c=function(){return(0,o.dd)(l)}},68989:function(e,t,r){"use strict";r.d(t,{hp:()=>u});var n=r(85893),i=r(84326),o=r(57105),a=r(84208),s=r(41553),l=function(e){var t=e.onAction,r=e.i18nBase,l=void 0===r?"settings.workflows.edit.incomplete_workflow_modal":r,c=(0,o.dd)();return(0,n.jsx)(a.W,{isOpen:c.visible,onClose:c.hide,actionVariant:"circle",actionText:(0,i.t)([l,"confirm_text"]),onAction:t,titleClassName:"!text-left !px-0",title:(0,i.t)([l,"title"]),children:(0,n.jsx)("div",{children:(0,n.jsx)(s.Z.BodyMd,{color:"text-default",children:(0,i.t)([l,"body"])})})})},c=o.gk.create(function(e){var t=e.onAction,r=e.i18nBase;return(0,n.jsx)(l,{onAction:t,i18nBase:r})}),u=function(){return(0,o.dd)(c)}},5917:function(e,t,r){"use strict";r.d(t,{C:()=>i});var n=r(61676),i=function(e){var t=e.workflowId,r=e.disableRefetching,i=(0,n.RC)({workflowId:t,shouldDisableRefetching:r});return{areAllRunsCompleted:i.areAllRunsCompleted,isLoading:i.isLoading}}},71923:function(e,t,r){"use strict";r.d(t,{q:()=>y});var n=r(88767),i=r(84326),o=r(51630),a=r(70216),s=r(6082),l=r(12369),c=r(41342),u=r(4393),d=r(79869),f=r(60878);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})}}function b(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var h="settings.workflows.view.header",y=function(e){var t=e.workflowId,r=e.isActive,p=(0,n.useQueryClient)(),y=(0,f.pm)(),v=y.success,g=y.error,_=function(){return m(function(){return b(this,function(e){switch(e.label){case 0:return[4,p.invalidateQueries(["workflows",t])];case 1:return e.sent(),[4,p.invalidateQueries(["all-workflows"])];case 2:return e.sent(),[2]}})})()},x=(0,c.wh)().currentCommunity,j=(null!=x?x:{}).current_plan_tier,w=(0,d.w)(),O=function(e){var t,r;w.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,a.h)(e)&&{planTier:(0,s.gq)(j)}),r=r={subheading:e.body.message,isEmailHubRequired:(0,a.w)(e),source:(0,l.yf)(),onSuccess:function(){w.hide(),k({})},successButtonLabel:(0,i.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},S=(0,n.useMutation)(function(){return(0,u.Cp)(o.nH.activate({id:t}))},{onSuccess:function(e,t){return m(function(){return b(this,function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),t.onSuccessCallback?t.onSuccessCallback():v((0,i.t)([h,"workflow_activated"])),[2]}})})()},onError:function(e){return(0,a.h)(e)||(0,a.w)(e)?O(e):g((0,i.t)([h,"workflow_activation_error"]))}}),k=S.mutate,P=S.isLoading,C=(0,n.useMutation)(function(){return o.nH.inactivate({id:t})},{onSuccess:function(){return m(function(){return b(this,function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),v((0,i.t)([h,"workflow_deactivated"])),[2]}})})()},onError:function(){return g((0,i.t)([h,"workflow_deactivation_error"]))}}),N=C.mutate,A=C.isLoading;return{onActivateWorkflow:k,onDeactivateWorkflow:N,onChangeActiveStatus:function(){r?N():k({})},isLoading:P||A}}},28281:function(e,t,r){"use strict";r.d(t,{f:()=>a});var n=r(85893),i=r(96486),o=r(39905),a=function(e){var t,r,a=e.onClick,s=e.children,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","children"]);return(0,n.jsx)(o.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({large:!1,variant:"circle",type:"button",onClick:function(){(0,i.isFunction)(a)&&a()}},l),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},49366:function(e,t,r){"use strict";r.d(t,{g:()=>u});var n=r(85893),i=r(67294),o=r(41609),a=r.n(o),s=r(52293);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u=function(e){var t,r,o=e.workflow,u=e.children,d=!a()(null==o?void 0:o.actions),f=(0,i.useMemo)(function(){return d?o.actions:[]},[d,null==o?void 0:o.actions]),p=(null==o?void 0:o.workflow_type)==="bulk_action",m=(null==o?void 0:o.workflow_type)==="scheduled",b=null==o||null==(r=o.audience)||null==(t=r.rules)?void 0:t.rules,h=(0,i.useMemo)(function(){return(p||m)&&b?o.audience:{rules:{rule_type:"custom_filters",rules:[]}}},[b,p,m,o.audience]),y=m?o.schedule:{},v=(0,i.useMemo)(function(){return c(l({},o),{actions:f,audience:h,schedule:y})},[o,f,h,y]),g=(0,s.cI)({mode:"onChange",reValidateMode:"onChange",defaultValues:v});return(0,n.jsx)(s.RV,c(l({},g),{children:u}))}},67933:function(e,t,r){"use strict";r.d(t,{a:()=>h});var n=r(96486),i=r(31695),o=r(82470),a=r(97346),s=r(14711),l=r(38998),c=r(44123),u=r(35476),d=r(39315),f=r(37401),p=r(34542),m=r(3178),b=r(2565),h=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=r.action_type,x=void 0===h?"":h,j=r.api_params,w=void 0===j?{}:j;return x===f.Cz.value?y(w):x===f.MK.value?v(w):x===f.Ah.value||x===f.TQ.value||x===f.KY.value||x===f.r1.value||x===c.m.value||x===l.c.value||(x===f.zW.value?g(null==w||null==(t=w.message)||null==(e=t.body)?void 0:e.content):x===m.l.value?(0,b.Y)(null==w?void 0:w.url):x===p.T.value?(0,b.Y)((0,n.omit)(w,"send_notification_subscription_created_by_admin")):x===d.I.value?(0,b.Y)((0,n.omit)(w,"time_delay")):x===o.s.value?(0,b.Y)(null==w?void 0:w.points):x===s.w.value||x===u.M.value?(0,n.isNumber)(null==w?void 0:w.community_bot_profile_id):x===a.o.value?_(i,w):(0,b.Y)(w))},y=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=r||{};return!(!o.internal_name||!o.subject||!o.broadcast_id||o.subject.length>i.gv||(null==(e=o.preview_text)?void 0:e.length)>i.b||(0,n.isEmpty)(o.email_content)&&(0,n.isEmpty)(o.visual_email_builder_content))&&(!(0,n.isEmpty)(null==o||null==(t=o.email_content)?void 0:t.body.content)||!(0,n.isEmpty)(null==o?void 0:o.visual_email_builder_content))},v=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!(0,n.isNumber)(null==r?void 0:r.from)||(0,n.isEmpty)(null==r?void 0:r.rich_text_body))&&g(null==r||null==(t=r.rich_text_body)||null==(e=t.body)?void 0:e.content)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(0,n.isEmpty)(e)&&e.some(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t,i=e.content,o=e.text;return"text"===r?!(0,n.isEmpty)(void 0===o?"":o):"paragraph"===r?(void 0===i?[]:i).some(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!(0,n.isEmpty)(void 0===t?"":t)}):void 0})},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(null==t?void 0:t.hide_post_from_featured_areas)||(null==t?void 0:t.close_comments)||(null==t?void 0:t.hide_metadata):(0,n.isNumber)(null==t?void 0:t.community_bot_profile_id)}},85637:function(e,t,r){"use strict";r.d(t,{$:()=>o});var n=r(96486),i=r(48224),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rules,r=(0,i.k)(void 0===t?{}:t);return!(0,n.isEmpty)({filters:r})}},23527:function(e,t,r){"use strict";r.d(t,{p:()=>i});var n=r(96486),i=function(e){return(0,n.isObject)(e)?Object.values(e).some(function(e){return i(e)}):!!e}},2565:function(e,t,r){"use strict";r.d(t,{Y:()=>i});var n=r(96486),i=function(e){return(0,n.isObject)(e)?!(0,n.isEmpty)(e)&&Object.values(e).every(function(e){return i(e)}):!!e}},39396:function(e,t,r){"use strict";r.d(t,{H:()=>eg});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(88767),l=r(60878),c=r(50362),u=r(52293),d=r(51630),f=r(4393),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,(0,u.Gc)().watch)("id");return(0,s.useMutation)(function(){return(0,f.Cp)(d.nH.activate({id:r,params:t}),500)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){console.error(e)}},e))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,u.Gc)().watch)("id");return(0,s.useMutation)(function(){return(0,f.Cp)(d.nH.createRun({workflowId:t}),500)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){console.error(e)}},e))};function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.D)().isBulkAction,r=(0,l.pm)(),n=p().mutateAsync,i=m().mutateAsync;return(0,s.useMutation)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,n()];case 1:if(e.sent(),!t)return[3,3];return[4,i()];case 2:e.sent(),e.label=3;case 3:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})})()},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){r.error(e.message)}},e))},y=r(96486),v=r(70216),g=r(6082),_=r(57105),x=r(12369),j=r(41342),w=r(79869),O=r(34519),S=r(84555),k=r(94644),P=r(49366),C=r(84326),N=r(69831),A=r(39905),I=r(57363),E=r(41553),T=r(47532),L=r(37401),D=r(17184),M=r(52634),R=function(){var e=((0,(0,u.Gc)().watch)("actions")||[]).map(function(e){return null==e?void 0:e.action_type}).filter(Boolean).map(function(e){return{title:(0,C.t)(["settings.workflows.view.actions",e,"title"],{defaultValue:(0,C.t)("settings.workflows.form.add_an_action")}),icon:(0,M.mR)(e)}});return(0,n.jsx)(n.Fragment,{children:e.map(function(e,t){var r=e.title,i=e.icon;return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)(I.JO,{type:"24-workflow-".concat(i),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"}),(0,n.jsx)(E.Z.BodySm,{children:r})]},t)})})},B=function(){var e=(0,D.Y)(),t=e.count,r=e.formattedCount,i=(0,C.t)("settings.workflows.confirm_modal.members_match_right_now",{count:t}),o=t>0?"".concat(r," ").concat(i):i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)(I.JO,{type:"24-workflow-audience",size:24,className:"!h-5 !w-5"}),(0,n.jsx)(E.Z.BodySm,{children:o})]}),(0,n.jsx)(R,{})]})},F=function(){var e=(0,D.Y)(),t=e.isLoading,r=e.hasFilters,i=(0,T.ol)().formActions.find(function(e){return e.action_type===L.Ah.value}),o=i?(0,C.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_title"):(0,C.t)("settings.workflows.confirm_modal.workflow_summary");return(0,n.jsxs)(O.u_.Body,{children:[(0,n.jsx)(E.Z.LabelMd,{weight:"semibold",children:o}),(0,n.jsx)("div",{className:"pt-5",children:(0,n.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:r&&(0,n.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[t&&(0,n.jsx)("div",{className:"flex flex-row items-center gap-3",children:(0,n.jsx)(I.JO,{type:"loader",size:16,className:"!h-4 !w-4"})}),(0,n.jsx)(B,{})]})})}),i&&(0,n.jsx)("div",{className:"pt-5",children:(0,n.jsx)(E.Z.LabelSm,{children:(0,C.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_description")})})]})},z=function(){return(0,n.jsx)(O.u_.Body,{children:(0,n.jsx)(E.Z.BodyMd,{children:(0,C.t)("settings.workflows.confirm_modal.are_you_sure_you_want_to_publish_your_workflow")})})},U=r(45697),Z=r.n(U),G=function(e){var t=e.rerunParams,r=(null==t?void 0:t.do_not_skip_tasks)=="true"?(0,C.t)("settings.workflows.rerun_modal.all_members"):(0,C.t)("settings.workflows.rerun_modal.only_new_members");return(0,n.jsxs)(O.u_.Body,{children:[(0,n.jsx)(E.Z.LabelMd,{weight:"semibold",children:(0,C.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,n.jsx)("div",{className:"pt-5",children:(0,n.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:(0,n.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[(0,n.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(I.JO,{type:"24-workflow-audience",size:24,className:"!h-6 !w-6"})}),(0,n.jsx)(E.Z.BodySm,{children:r})]}),(0,n.jsx)(R,{})]})})})]})};G.propTypes={rerunParams:Z().object};var q=function(e){var t=e.isBulkAction,r=e.isScheduled,i=e.isRerun,o=e.rerunParams;return t&&i?{title:(0,C.t)("settings.workflows.confirm_modal.rerun_summary"),body:(0,n.jsx)(G,{rerunParams:o}),successButtonLabel:(0,C.t)("settings.workflows.upgrade_modal.rerun_this_workflow")}:t?{title:(0,C.t)("settings.workflows.confirm_modal.run_this_workflow"),body:(0,n.jsx)(F,{}),successButtonLabel:(0,C.t)("settings.workflows.upgrade_modal.run_this_workflow")}:r?{title:(0,C.t)("settings.workflows.confirm_modal.schedule_this_workflow"),body:(0,n.jsx)(F,{}),successButtonLabel:(0,C.t)("settings.workflows.upgrade_modal.schedule_this_workflow")}:{title:(0,C.t)("settings.workflows.confirm_modal.publish_your_workflow"),body:(0,n.jsx)(z,{}),successButtonLabel:(0,C.t)("settings.workflows.upgrade_modal.activate_this_workflow")}},V=function(e){var t=e.onCancel,r=e.onPublish,i=e.isLoading,o=e.isRerun,a=e.rerunParams,s=e.onBack,l=(0,c.D)(),u=l.isBulkAction,d=l.isScheduled;if(void 0!==i&&i)return(0,n.jsx)(O.u_.Content,{children:(0,n.jsx)(O.u_.Body,{className:"w-full !px-10 !py-16",children:(0,n.jsx)(N.u,{title:(0,C.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,C.t)("settings.workflows.we_are_preparing")})})});var f=q({isBulkAction:u,isScheduled:d,isRerun:o,rerunParams:a}),p=f.title,m=f.body;return(0,n.jsxs)(O.u_.Content,{size:"md",children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{size:"md",children:p}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(O.u_.CloseButton,{onClick:t})}),(0,y.isFunction)(s)&&(0,n.jsx)(O.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(O.u_.BackButton,{onClick:s})})]}),m,(0,n.jsx)(O.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(A.z,{variant:u?"danger":"circle",onClick:r,children:u?(0,C.t)("settings.workflows.confirm_modal.confirm_and_run"):d?(0,C.t)("settings.workflows.confirm_modal.schedule"):(0,C.t)("settings.workflows.confirm_modal.publish_and_enable")})})]})},H=r(94281),W=r(4523),Q=r(80842),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(0,(0,u.Gc)().watch)("id"),n=(0,l.pm)();return(0,s.useMutation)(function(){return(0,f.Cp)(d.nH.createRun({workflowId:r,params:t}),500)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){n.error(e.message)}},e))},K=r(24804),$=r(51466),X=function(e){var t=e.onCancel,r=e.onPublish,i=e.rerunParams,o=e.onBack,a=(0,c.D)(),s=q({isBulkAction:a.isBulkAction,isScheduled:a.isScheduled,isRerun:!0,rerunParams:i}),l=s.title,u=s.body;return(0,n.jsxs)(O.u_.Content,{size:"md",children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{size:"md",children:l}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(O.u_.CloseButton,{onClick:t})}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(O.u_.BackButton,{onClick:o})})]}),u,(0,n.jsx)(O.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(A.z,{variant:"danger",onClick:r,children:(0,C.t)("settings.workflows.confirm_modal.confirm_and_run")})})]})},Y=r(33378),ee="settings.workflows.rerun_modal",et=function(e){var t=e.onCancel;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{size:"md",children:(0,C.t)([ee,"title"])}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(O.u_.CloseButton,{onClick:t})})]}),(0,n.jsx)(Y.n,{}),(0,n.jsx)(O.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(A.z,{variant:"circle",type:"submit",children:(0,C.t)([ee,"continue"])})})]})};function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ei=function(e){var t=e.hasRuns,r=e.onPublish,o=e.onCancel,a=e.additionalRerunParams,s=en((0,i.useState)(null),2),l=s[0],c=s[1],u=en((0,K.k)(!1===t),2),d=u[0],f=u[1],p=J({onError:y.noop},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l,a)),m=p.mutateAsync;return p.isLoading?(0,n.jsx)(O.u_.Content,{children:(0,n.jsx)(O.u_.Body,{className:"w-full !px-10 !py-16",children:(0,n.jsx)(N.u,{title:(0,C.t)("settings.workflows.rerunning_your_workflow"),subtitle:(0,C.t)("settings.workflows.we_are_preparing")})})}):d?(0,n.jsx)(X,{rerunParams:l,onBack:f,onCancel:o,onPublish:function(){return r(m)}}):(0,n.jsx)(O.u_.Content,{size:"md",children:(0,n.jsx)($.l,{defaultValues:{do_not_skip_tasks:(null==l?void 0:l.do_not_skip_tasks)||"false"},onSubmit:function(e){c(e),f()},children:(0,n.jsx)(et,{onCancel:o})})})};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ea(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function es(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ea(o,n,i,a,s,"next",e)}function s(e){ea(o,n,i,a,s,"throw",e)}a(void 0)})}}function el(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ec="dismissed",eu="error",ed=function(e){var t,r=e.isRerun,o=void 0!==r&&r,a=(0,_.dd)(),s=(0,x.yf)(),u=(0,c.D)(),d=u.saveWorkflowName,f=u.hasName,p=u.placeholderName,m=u.isBulkAction,b=u.isScheduled,P=u.schedule,C=u.hasRuns,N=u.id,A=u.actions,I=(t=(0,i.useState)(!(o||b)),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=I[0],T=I[1],L=h({onError:y.noop}),D=L.mutateAsync,M=L.isLoading,R=(0,j.wh)().currentCommunity,B=(null!=R?R:{}).current_plan_tier,F=(0,w.w)(),z=(0,l.pm)(),U=q({isBulkAction:m,isRerun:o}).successButtonLabel,Z=(0,k.Tc)(A),G=Z.disabledAgents,J=Z.isLoading,K=function(){a.resolve(ec),a.hide()},$=function(){F.hide(),a.show()},X=function(e){var t,r;return F.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,v.h)(e)&&{planTier:(0,g.gq)(B)}),r=r={subheading:e.body.message,isEmailHubRequired:(0,v.w)(e),onSuccess:$,successButtonLabel:U,usedForWorkflows:!0,showPlanDetails:!0,source:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Y=function(e){return es(function(){var t;return el(this,function(r){switch(r.label){case 0:if(r.trys.push([0,4,8,9]),!(G.length>0))return[3,2];return[4,(0,k.uj)(G)];case 1:r.sent(),r.label=2;case 2:return[4,e()];case 3:return r.sent(),a.resolve("closed_after_success"),[3,9];case 4:if(t=r.sent(),!((0,v.h)(t)||(0,v.w)(t)))return[3,6];return a.hide(),[4,X(t)];case 5:return r.sent(),[3,7];case 6:z.error(t.message),r.label=7;case 7:return a.resolve(eu),[3,9];case 8:return a.hide(),[7];case 9:return[2]}})})()};return(0,n.jsxs)(O.u_,{isOpen:a.visible,onClose:K,children:[(0,n.jsx)(O.u_.Overlay,{}),E?G.length>0&&!J?(0,n.jsx)(H.d,{disabledAgents:G,onCancel:K,onPublish:function(){return Y(function(){return es(function(){return el(this,function(e){switch(e.label){case 0:if(f)return[3,2];return[4,d(p)];case 1:e.sent(),e.label=2;case 2:return[4,D()];case 3:return e.sent(),[2]}})})()})}}):(0,n.jsx)(V,{isLoading:M,onPublish:function(){return Y(function(){return es(function(){return el(this,function(e){switch(e.label){case 0:if(f)return[3,2];return[4,d(p)];case 1:e.sent(),e.label=2;case 2:return[4,D()];case 3:return e.sent(),[2]}})})()})},onCancel:K}):b?function(){switch(null==P?void 0:P.schedule_type){case S.By.ONE_TIME:return(0,n.jsx)(W.C,{workflowId:N,setIsConfirmContent:T,onCancel:K,schedule:P,hasRuns:C});case S.By.RECURRING:return(0,n.jsx)(Q.L,{workflowId:N,onCancel:K,schedule:P,isLoading:M,onPublish:function(){return Y(function(){return es(function(){return el(this,function(e){switch(e.label){case 0:if(f)return[3,2];return[4,d(p)];case 1:e.sent(),e.label=2;case 2:return[4,D()];case 3:return e.sent(),[2]}})})()})}});case"run_now":return(0,n.jsx)(ei,{hasRuns:C,onCancel:K,onPublish:Y,additionalRerunParams:{schedule_run_now:!0}})}return null}():o?(0,n.jsx)(ei,{onPublish:Y,onCancel:K}):null]})},ef=function(e){var t=e.isRerun;return _.gk.create(function(e){var r=e.workflow;return(0,n.jsx)(P.g,{workflow:r,children:(0,n.jsx)(ed,{isRerun:t})})})},ep=function(e){var t=e.isRerun;return(0,_.dd)(ef({isRerun:t}))},em=r(70442),eb=r(13532);function eh(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ey=function(e){var t=e.isRerun,r=(0,em.k6)(),n=ep({isRerun:t}),i=(0,s.useQueryClient)(),o=(0,l.pm)(),a=(0,u.Gc)(),c=a.handleSubmit,d=a.getValues;return{submitWorkflow:c(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=function(){var e,o,a,s,l,c;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return[4,n.show({workflow:d()})];case 1:if((e=u.sent())===ec||e===eu)return[2];if(o=t.id,a=t.workflow_type,s=t.schedule,l=a===S.nQ.BULK_ACTION,c=(null==s?void 0:s.schedule_type)==="run_now",i.removeQueries(["workflows",o]),l||c)return r.push(eb.o0.runs({workflowId:o})),[2];return r.push(eb.o0.view({workflowId:o})),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eh(o,n,i,a,s,"next",e)}function s(e){eh(o,n,i,a,s,"throw",e)}a(void 0)})})()},function(){o.error((0,C.t)("settings.workflows.form.errors.fill_all_required_fields"))})}},ev=(0,i.forwardRef)(function(e,t){var r=e.children,i=e.className,o=ey({isRerun:e.isRerun}).submitWorkflow;return(0,n.jsx)("form",{ref:t,className:a()("flex h-full w-full flex-col",i),onSubmit:o,children:r})});ev.displayName="Form";var eg=function(e){var t=e.workflow,r=e.formRef,i=e.children,o=e.isRerun;return(0,n.jsx)(P.g,{workflow:t,children:(0,n.jsx)(ev,{ref:r,isRerun:o,className:"w-auto",children:i})})}},32309:function(e,t,r){"use strict";r.d(t,{l:()=>b});var n=r(52293),i=r(84326),o=r(96486),a=r(73753),s=r(67933),l=r(85637),c=r(65978),u=c.Ry({community_segment_id:c.Rx().nullable(),rules:c.IX().of(c.Ry({key:c.Z_().required(),filter_type:c.Z_().nullable(),value:c.nK().nullable(),profile_field_type:c.Z_().nullable(),profile_field_id:c.Rx().nullable()})).nullable(),resource_id:c.Rx().required(),resource_type:c.Z_().required(),contact_type:c.Z_().nullable(),trigger_type:c.Z_().required()}),d=r(23527),f=r(2565),p=function(e,t,r){if(e.startsWith("actions"))return(0,s.a)(t,r);if(e.startsWith("audience"))return(0,l.$)(t);if(e.startsWith("trigger"))return!!t&&u.isValidSync(t);return(0,f.Y)(t)},m=function(e){var t=(0,n.Gc)(),r=t.getFieldState,i=t.formState,s=t.watch,l=(0,a.Y)(),c=s(e),u=r(e,i).error,f=i.dirtyFields,m=i.touchedFields,b=(0,o.get)(f,e,null),h=(0,d.p)(b),y=(0,o.get)(m,e,null),v=(0,d.p)(y),g=s("community_segment_id"),_=e.startsWith("audience")&&!!g||!!(null==c?void 0:c.id);return{isDirty:h,isTouched:v,hasError:!!u,hasValue:p(e,c,l),hasId:_,value:c}},b=function(e){var t=(0,n.Gc)().trigger,r=m(e),o=r.isDirty,a=r.isTouched,s=r.hasError,l=r.hasValue,c=r.hasId,u=r.value,d=c&&l&&!o&&!a&&!s,f=s?(0,i.t)("settings.workflows.form.step_incomplete"):d?(0,i.t)("settings.workflows.form.step_complete"):"";return{hasError:s,hasValue:l,isCompleted:d,revalidate:function(){return t(e)},statusMessage:f,wasSaved:c,value:u}}},50362:function(e,t,r){"use strict";r.d(t,{D:()=>u});var n=r(67294),i=r(78139),o=r(52293),a=r(88767),s=r(84326);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var u=function(){var e,t,r=(0,a.useQueryClient)(),u=(0,i.D)(),d=u.mutate,f=u.mutateAsync,p=u.isLoading,m=u.isError,b=(0,o.Gc)(),h=b.watch,y=b.setValue,v=b.formState,g=h("id"),_=h("name"),x=h("schedule"),j=(e=(0,n.useState)(_),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=j[0],O=j[1],S=!!_,k=(0,s.t)("settings.workflows.form.untitled_workflow"),P=h("status"),C=v.defaultValues,N=null==C?void 0:C.workflow_type;return{id:g,hasRuns:(null==C?void 0:C.runs_count)>0,name:_,type:N,placeholderName:k,hasName:S,status:P,saveWorkflowName:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(e===w)return[2];if(""===e.trim())return y("name",w),[2];return[4,f({name:e})];case 1:return t.sent(),r.invalidateQueries({queryKey:["workflows",g]}),O(e),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})})()},updateWorkflow:d,updateWorkflowAsync:f,isBulkAction:"bulk_action"===N,isDynamic:"dynamic"===N,isScheduled:"scheduled"===N,schedule:x,isSavingWorkflow:p,isWorkflowError:m,triggerType:null==C||null==(t=C.trigger)?void 0:t.trigger_type,actions:null==C?void 0:C.actions}}},91980:function(e,t,r){"use strict";r.d(t,{y:()=>n});var n={title:"md:w-1/3 xl:w-1/4",steps:"hidden xl:table-cell min-w-[11rem]",user:"hidden md:table-cell min-w-[9rem] max-w-[16rem] truncate text-ellipsis",status:"min-w-[9rem]",workflowType:"min-w-[8rem]",scheduleType:"min-w-[8rem]",dateShort:"hidden 2xl:table-cell min-w-[8rem]",dateLong:"hidden 2xl:table-cell min-w-[12rem]",number:"hidden xl:table-cell min-w-[6rem]",toggleInput:"2xl:max-w-auto 2xl:min-w-[6rem]",uuid:"hidden 2xl:table-cell max-w-[12rem]"}},84516:function(e,t,r){"use strict";r.d(t,{h:()=>a});var n=r(85893),i=r(84326),o=r(41553),a=function(e){var t=e.category;return t?(0,n.jsx)("span",{className:"border-primary text-dark inline-flex items-center rounded-full border px-2 py-1",children:(0,n.jsx)(o.Z.LabelXxs,{weight:"medium",textTransform:"capitalize",children:(0,i.t)(["settings.workflows.templates.categories",t])})}):null}},38776:function(e,t,r){"use strict";r.d(t,{X:()=>l});var n=r(85893),i=r(84326),o=r(57363),a=r(41553),s={dynamic:"12-zap",bulk_action:"12-layers",scheduled:"12-layers"},l=function(e){var t=e.templateType;return t?(0,n.jsxs)("span",{className:"bg-tertiary inline-flex items-center gap-1 rounded-full px-2 py-1",children:[(0,n.jsx)(o.JO,{type:s[t],size:12,className:"text-dark !size-[12px]"}),(0,n.jsx)(a.Z.LabelXxs,{weight:"medium",textTransform:"capitalize",children:(0,i.t)(["settings.workflows.templates",t])})]}):null}},58269:function(e,t,r){"use strict";r.d(t,{h:()=>o});var n=r(67294),i=r(52293),o=function(e,t){var r=(0,i.Gc)(),o=r.getValues,a=r.setValue;(0,n.useEffect)(function(){null==o(e)&&a(e,t)},[e,a,o,t])}},84555:function(e,t,r){"use strict";r.d(t,{$m:()=>u,By:()=>l,Db:()=>b,Ep:()=>f,I3:()=>c,Ii:()=>d,PQ:()=>h,S7:()=>m,bI:()=>a,nQ:()=>s,qN:()=>o,uN:()=>p});var n=r(96486),i=r(6082),o={ALL:"all",ACTIVE:"active",INACTIVE:"inactive",DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived",IN_PROGRESS:"in_progress"},a={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",FAILED:"failed",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped"},s={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ALL:"all"},l={ONE_TIME:"one_time",RECURRING:"recurring"},c={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ARCHIVED:"archived"},u=[c.DYNAMIC,c.BULK_ACTION,c.SCHEDULED,c.ARCHIVED],d={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped",FAILED:"failed",CANCELLED:"cancelled"},f=function(e){return{action_type:null!=e?e:"",id:(0,n.uniqueId)("action_"),api_params:{}}},p={ACCESS_GROUP:"AccessGroup",SPACE:"Space",PAYWALL:"Paywall",EVENT:"Posts::Event",MEMBER_TAG:"MemberTag",SPACE_GROUP:"SpaceGroup",POST_BASIC:"Posts::Basic",COMMUNITY:"Community",COURSE:"Space",PROFILE_FIELD:"ProfileField",RECURRING_EVENT_SETTING:"RecurringEventSetting",LESSON:"Lesson",QUIZ:"Lesson",SECTION:"Section",GAMIFICATION_LEVEL:"Gamification::Level",FORM:"Form",COMMUNITY_MEMBER_ADMIN:"CommunityMember"},m={BASIC:"basic",EVENT:"event",MEMBERS:"members",COURSE:"course",CHAT:"chat"},b=[i.Gb.enterprise,i.Gb.plus],h={ALL:"all",MH_ONLY:"mh_only",MH_WITH_LOWER_OR_HIGHER_TIER_PLAN:"mh_with_lower_or_higher_tier_plan",HIGHER_TIER_PLAN_ONLY:"higher_tier_plan_only",ENTERPRISE_AND_PLUS_ONLY:"enterprise_and_plus_only"}},65088:function(e,t,r){"use strict";r.d(t,{C:()=>l,_:()=>s});var n=r(85893),i=r(67294),o=r(9163),a=(0,i.createContext)({pageSize:o.L8});a.displayName="WorkflowsData";var s=function(){return(0,i.useContext)(a)},l=function(e){var t=e.children,r=e.pageSize,i=void 0===r?o.L8:r,s=e.category,l=e.onClose,c=e.shouldAutoAdjust;return(0,n.jsx)(a.Provider,{value:{pageSize:i,category:s,onClose:l,shouldAutoAdjust:c},children:t})}},74052:function(e,t,r){"use strict";r.d(t,{z:()=>u});var n=r(96486),i=r(43445),o=r(48224),a=function(e){var t=e.rules,r=e.community_segment_id;return r?i.W.update({id:Number(r),rules:t}):i.W.create({rules:t,visible:!1})};function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u=function(e){var t;return(t=function(){var t,r,s,u,d,f;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:if(t=e.community_segment_id,r=e.rules,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["community_segment_id","rules"]),!((u=(0,o.k)(r))&&!(0,n.isEmpty)(u)))return[3,2];return[4,a(c(l({},e),{rules:{rule_type:"custom_filters",rules:u}}))];case 1:return d=p.sent(),[2,c(l({},s),{rules:{rule_type:"custom_filters",rules:u},community_segment_id:null!=(f=d.id)?f:null})];case 2:if(!t)return[3,4];return[4,i.W.delete({id:t})];case 3:return p.sent(),[2,c(l({},s),{rules:{rule_type:"custom_filters",rules:[]},community_segment_id:null})];case 4:return[2,c(l({},s),{rules:{rule_type:"custom_filters",rules:[]},community_segment_id:null})]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()}},94346:function(e,t,r){"use strict";r.d(t,{f:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.ai_automations_enabled)}},18446:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(67294),i=["onboarding","engagement","administrative","paywalls","ai_workflows","moderation"];function o(e){var t=(0,n.useMemo)(function(){var t=!1,r=!1,n=e.filter(function(e){return t||"email_hub"!==e||(t=!0),r||"ai_agent"!==e||(r=!0),r||"ai_workflows"!==e||(r=!0),i.includes(e)});return{category:null==n?void 0:n[0],isEmailHub:t,isAiAgent:r}},[e]);return{category:t.category,isEmailHub:t.isEmailHub,isAiAgent:t.isAiAgent}}},91026:function(e,t,r){"use strict";r.d(t,{u:()=>a});var n=r(88767),i=r(13532),o=r(93199),a=function(e){var t=e.id,r=e.options;return(0,n.useQuery)(["member-tag",t.toString()],function(){return(0,o.UT)(i.av.memberTags.show({id:t}))},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:!!t},void 0===r?{}:r))}},36913:function(e,t,r){"use strict";r.d(t,{$c:()=>d,Cw:()=>u});var n=r(96486),i=r(88767),o=r(43445),a=r(71738);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l="workflow-segments-list",c=function(e){var t=e.workflowId,r=e.segmentIds,i=void 0===r?[]:r;return 0===i.length?[l,t]:[l,t,(0,n.sortBy)(i).join(",")]},u=function(e){var t,r=e.workflowId,n=e.segmentIds,i=void 0===n?[]:n;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,a.Eh.invalidateQueries(c({workflowId:r,segmentIds:i}))];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},d=function(e){var t=e.workflowId,r=e.segmentIds,n=void 0===r?[]:r,a=c({workflowId:t,segmentIds:n});return(0,i.useQuery)(a,function(){return o.W.list({params:{ids:n,per_page:100}})},{enabled:n.length>0,keepPreviousData:!1})}},54787:function(e,t,r){"use strict";r.d(t,{r:()=>s});var n=r(88767),i=r(84326),o=r(51630),a=r(60878),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{per_page:100},t=e.per_page,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["per_page"]),s=(0,a.pm)().error;return(0,n.useQuery)(["workflows","list","spaces"],function(){return o.rb.list({params:{per_page:t}})},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(){return s((0,i.t)(["settings.workflows.form","errors","spaces","fetch_failed"]))}},r))}},76453:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(88767),i=r(51714),o=function(e){var t=e.per_page,r=e.location_type,o=void 0===r?"":r,a=e.options;return(0,n.useQuery)(["workflows","list","upcomingEvents"],function(){return i.S.fetchUpcomingEvents({params:{per_page:t,location_type:o}})},void 0===a?{}:a)}},66964:function(e,t,r){"use strict";r.d(t,{m:()=>a});var n=r(88767),i=r(51630),o=r(4393),a=function(e){var t=e.workflowId,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["workflowId"]);return(0,n.useQuery)(["workflows",t],function(){return(0,o.Cp)(i.nH.fetch({id:t,params:{v2_2_enabled:!0}}))},r)}},30713:function(e,t,r){"use strict";r.d(t,{t:()=>o});var n=r(13532),i=r(8684),o=function(){var e=(0,i.U)({api:n.av.memberTags.index}),t=e.records;return{memberTags:void 0===t?[]:t,isLoading:e.isLoading}}},12369:function(e,t,r){"use strict";r.d(t,{Kg:()=>d,ko:()=>c,yf:()=>u});var n=r(67294),i=r(70442),o=r(24184),a=r(13532),s=r(94375),l="workflowSource",c=function(){var e=(0,i.TH)(),t=(0,o.U)();(0,n.useMemo)(function(){var r;if(e.pathname.includes(a.Lo.paywalls.index)?r=s.fe.PAYWALLS_WORKFLOWS_MODAL:e.pathname.includes(a.Lo.members.onboarding)?r=s.fe.ONBOARDING_WORKFLOWS_MODAL:t&&(r=s.fe.SPACE_WORKFLOWS_MODAL),r)try{sessionStorage.setItem(l,r)}catch(e){console.error("Failed to set workflow source in sessionStorage",e)}},[e,t])},u=function(){try{return sessionStorage.getItem(l)||s.fe.WORKFLOWS_UPGRADE_MODAL}catch(e){return console.error("Failed to get workflow source from sessionStorage",e),s.fe.WORKFLOWS_UPGRADE_MODAL}},d=function(){return{shouldGoBack:u()!==s.fe.WORKFLOWS_UPGRADE_MODAL}}},61676:function(e,t,r){"use strict";r.d(t,{RC:()=>p});var n=r(67294),i=r(85564),o=r.n(i),a=r(81763),s=r.n(a),l=r(88767),c=r(51630),u=r(84555);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var p=function(e){var t,r,i,a,p=(i=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(i,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(i,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1],h=e.query,y=void 0===h?"":h,v=e.workflowId,g=void 0===v?"":v,_=e.perPage,x=void 0===_?20:_,j=e.initialPage,w=void 0===j?1:j,O=e.shouldDisableRefetching,S=e.options,k=void 0===S?{refetchInterval:!(void 0!==O&&O)&&!m&&5e3,enabled:!!g}:S,P=["workflows",g,"runs",y,x],C=f({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},k),N=(0,l.useInfiniteQuery)(P,function(e){var t=e.pageParam,r=void 0===t?w:t,n=1;s()(r)&&r>0&&(n=r);var i={page:n,per_page:x};return y&&(i.query=y),c.nH.fetchRuns({workflowId:g,params:i})},C),A=(0,n.useMemo)(function(){var e;return(null==(e=N.data)?void 0:e.pages)||[]},[null==(a=N.data)?void 0:a.pages]),I=(0,n.useMemo)(function(){return o()(A.map(function(e){return e.records}))},[A]);return(0,n.useEffect)(function(){N.isLoading||b(I.every(function(e){return(null==e?void 0:e.status)!==u.bI.IN_PROGRESS}))},[I,N.isLoading]),t=f({},N),r=r={queryKey:P,runs:I,areAllRunsCompleted:m},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},72582:function(e,t,r){"use strict";r.d(t,{h:()=>a});var n=r(28998),i=r(13532),o=r(8684),a=function(){var e=(0,o.U)({api:i.av.segments.index,key:n.hE}),t=e.records,r=e.isLoading;return{segments:void 0===t?[]:t,isLoading:null!=r&&r}}},78139:function(e,t,r){"use strict";r.d(t,{D:()=>c,x:()=>l});var n=r(52293),i=r(88767),o=r(51630),a=r(60878);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.pm)();return(0,i.useMutation)(function(e){var t=e.id,r=e.body;return o.nH.update({id:t,body:r})},s({onError:function(e){console.error(e),t.error(e.message)}},e))},c=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.Gc)().watch,o=l(r),a=i("id");return e=s({},o),t=t={mutate:function(e){return o.mutate({id:a,body:e})},mutateAsync:function(e){return o.mutateAsync({id:a,body:e})}},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},41378:function(e,t,r){"use strict";r.d(t,{H:()=>s,p:()=>a});var n=r(52293),i=r(88767),o=r(51630),a=function(e,t){var r=t.id,n=t.action_type,i=t.api_params,a=t.position,s=void 0===a?1:a;return!r||r.startsWith("action")?o.nH.createAction({workflowId:e,body:{action_type:n,api_params:i,position:s}}):o.nH.updateAction({workflowId:e,id:r,body:{action_type:n,api_params:i,position:s}})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,n.Gc)().watch)("id");return(0,i.useMutation)(function(e){return a(t,e)},e)}},17435:function(e,t,r){"use strict";r.d(t,{I:()=>d});var n=r(67294),i=r(88767),o=r(51630),a=r(60878),s=function(e){var t=e.setIsTestingWebhook,r=e.setIsWebhookTestSuccessful,n=e.setIsWebhookTested,s=e.setTestWebhookResult,l=e.setIsWebhookUrlChanged,c=e.options,u=(0,a.pm)();return(0,i.useMutation)(function(e){return o.nH.testWebhook({body:e})},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onSuccess:function(e){r(null==e?void 0:e.success),t(!1),n(!0),s(e),l(!1)},onError:function(e){console.error(e),u.error(e.message)}},void 0===c?{}:c))};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(e,t){var r,i=u((0,n.useState)(!1),2),o=i[0],a=i[1],l=u((0,n.useState)(!1),2),d=l[0],f=l[1],p=u((0,n.useState)(!1),2),m=p[0],b=p[1],h=u((0,n.useState)(!1),2),y=h[0],v=h[1],g=u((0,n.useState)(null),2),_=g[0],x=s({setIsTestingWebhook:a,setIsWebhookTestSuccessful:f,setIsWebhookTested:b,setTestWebhookResult:g[1],setIsWebhookUrlChanged:v}).mutate;return(0,n.useEffect)(function(){var t;v(m&&(null==e||null==(t=e.api_params)?void 0:t.url)!==(null==_?void 0:_.url))},[null==e||null==(r=e.api_params)?void 0:r.url]),{isTestingWebhook:o,isWebhookTestSuccessful:d,isWebhookTested:m,isWebhookUrlChanged:y,testWebhookResult:_,handleTestWebhook:function(e){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,t()];case 1:if(!r.sent())return[2];return a(!0),x(e),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})})()}}}},12535:function(e,t,r){"use strict";r.d(t,{k:()=>tr});var n=r(85893),i=r(67294),o=r(21835),a=r(51896),s=(0,i.createContext)(null);s.displayName="EmailHubStatusContext";var l=function(){var e=(0,i.useContext)(s);return(0,o.Z)(e,"useEmailHubStatus must be used within an EmailHubStatusProvider"),e},c=function(e){var t=e.children,r=(0,a.aH)();return(0,n.jsx)(s.Provider,{value:r,children:t})},u=r(33617),d=r(94184),f=r.n(d),p=r(52353),m=r.n(p),b=r(84326),h=r(84555),y=r(12369),v=r(51169),g=r(11944),_=r(65088),x=r(69024),j=r(70442),w=r(13532),O=r(24869),S=r(47463),k=r(57363);let P=r.p+"static/images/features/workflows-landing/feature-1-2x-8235b0e7d4eda31f.png",C=r.p+"static/images/features/workflows-landing/feature-1-4x-8fdc26a034bd2a29.png",N=r.p+"static/images/features/workflows-landing/feature-1-f7e1740788cbf186.jpg",A=r.p+"static/images/features/workflows-landing/feature-2-2x-cfea6b183702fe74.png",I=r.p+"static/images/features/workflows-landing/feature-2-4x-e2046c900f1142d7.png",E=r.p+"static/images/features/workflows-landing/feature-2-2d48d873dad5cf99.jpg",T=r.p+"static/images/features/workflows-landing/feature-3-2x-e2f9b9881c5bbbc3.png",L=r.p+"static/images/features/workflows-landing/feature-3-4x-df18c9d30a2973a2.png",D=r.p+"static/images/features/workflows-landing/feature-3-eb8f2333fe0abbe0.jpg";var M="settings.workflows.landing_page",R=function(){return(0,n.jsxs)(S.e.FeatureCards.Container,{children:[(0,n.jsx)(S.e.FeatureCards.Card,{srcSet:"".concat(N," 663w, ").concat(P," 812w, ").concat(C," 2000w"),src:N,bgColor:"#CFD8FE",imgClassName:"max-w-full max-h-full xl:max-w-[406px]",children:(0,n.jsx)(S.e.FeatureCards.CardDescription,{mainIconEl:(0,n.jsx)(k.JO,{type:"20-lightning",size:20}),title:(0,b.t)([M,"card_1.title"]),subtitle:(0,b.t)([M,"card_1.subtitle"]),checkedList:[(0,b.t)([M,"card_1.bullet_1"]),(0,b.t)([M,"card_1.bullet_2"]),(0,b.t)([M,"card_1.bullet_3"])],bgColor:"#F4F6FF",accentColor:"#CFD8FE"})}),(0,n.jsx)(S.e.FeatureCards.Card,{srcSet:"".concat(E," 663w, ").concat(A," 812w, ").concat(I," 2000w"),src:E,bgColor:"#B0EBD9",imgClassName:"max-w-full max-h-full xl:max-w-[423px]",children:(0,n.jsx)(S.e.FeatureCards.CardDescription,{mainIconEl:(0,n.jsx)(k.JO,{type:"20-rocket",size:20}),title:(0,b.t)([M,"card_2.title"]),subtitle:(0,b.t)([M,"card_2.subtitle"]),checkedList:[(0,b.t)([M,"card_2.bullet_1"]),(0,b.t)([M,"card_2.bullet_2"]),(0,b.t)([M,"card_2.bullet_3"])],bgColor:"#EBFAF5",accentColor:"#B0EBD9"})}),(0,n.jsx)(S.e.FeatureCards.Card,{srcSet:"".concat(D," 663w, ").concat(T," 812w, ").concat(L," 2000w"),src:D,bgColor:"#FFC9D3",imgClassName:"max-w-full max-h-full xl:max-w-[360px] self-end mb-[-7px]",children:(0,n.jsx)(S.e.FeatureCards.CardDescription,{mainIconEl:(0,n.jsx)(k.JO,{type:"20-clock",size:20}),title:(0,b.t)([M,"card_3.title"]),subtitle:(0,b.t)([M,"card_3.subtitle"]),checkedList:[(0,b.t)([M,"card_3.bullet_1"]),(0,b.t)([M,"card_3.bullet_2"]),(0,b.t)([M,"card_3.bullet_3"])],bgColor:"#FFF1F3",accentColor:"#FFC9D3"})})]})},B="settings.workflows.landing_page",F=function(){var e=(0,j.k6)(),t=(0,O.E)(),r=t.isCommunityOnTrial,i=t.isCommunityOnBasic,o=t.isCommunityOnProfessional,a=function(){e.push(w.o0.new())};return(0,n.jsxs)(n.Fragment,{children:[(r||i||o)&&(0,n.jsx)(S.e.HelloBar,{to:(0,w.xn)(),children:(0,b.t)([B,"upgrade_your_plan_to_start_using_workflows"])}),(0,n.jsx)(x.h,{title:(0,b.t)("settings.workflows.workflows")}),(0,n.jsx)(S.e.HeroSection,{title:(0,b.t)([B,"hero_title"]),subtitle:(0,b.t)([B,"hero_subtitle"]),buttonText:(0,b.t)([B,"action_button"]),onActionButtonClick:a,children:(0,b.t)([B,"hero_description"])}),(0,n.jsx)(R,{}),(0,n.jsx)(S.e.FooterAction,{title:(0,b.t)([B,"hero_title"]),buttonText:(0,b.t)([B,"action_button"]),onActionButtonClick:a,children:(0,b.t)([B,"footer_description"])})]})},z=r(1168),U=r(64981),Z=r(11294),G=r(34062),q=r(43544),V=function(e){var t=e.onClick;return(0,n.jsx)(q.Lt.ItemWithLink,{onClick:t,children:(0,b.t)("settings.workflows.table.actions.archive")})},H=function(e){var t=e.onClick;return(0,n.jsx)(q.Lt.ItemWithLink,{hasDanger:!0,onClick:t,children:(0,b.t)("settings.workflows.table.actions.delete")})},W=function(e){var t=e.onClick;return(0,n.jsx)(q.Lt.ItemWithLink,{onClick:t,children:(0,b.t)(["settings.workflows.table.actions","duplicate"])})},Q=r(5917),J=r(67930),K=function(e){var t=e.workflowId,r=e.isAutomation,i=e.isActive,o=e.isBulkOrScheduled,a=e.isInProgress,s=(0,J.PF)(),l=(0,Q.C)({workflowId:t,disableRefetching:!0}).areAllRunsCompleted,c=(0,j.k6)();return(0,n.jsx)(q.Lt.ItemWithLink,{onClick:function(){var e="";if(r&&i&&(e="settings.workflows.edit.continue_edit_automation_confirmation_modal"),o&&(a||!l)&&(e="settings.workflows.edit.continue_edit_running_workflow_confirmation_modal"),!e)return void c.push({pathname:w.o0.edit({workflowId:t}),state:{from:{path:c.location.pathname,query:c.location.search}}});s.show({title:(0,b.t)([e,"title"]),body:(0,b.t)([e,"body"]),onConfirm:function(){s.hide(),c.push({pathname:w.o0.edit({workflowId:t}),state:{from:{path:c.location.pathname,query:c.location.search}}})},onCancel:function(){s.hide()}})},children:(0,b.t)(["settings.workflows.table.actions","edit"])})},$=r(96486),X=r(88767),Y=r(51630),ee=r(39396),et=function(e){var t=e.workflowId,r=e.hideRerunModal,o=(0,i.useRef)(null),a=(0,X.useQuery)(["workflow-detail",t],function(){return Y.nH.fetch({id:t})},{onSuccess:function(){(0,$.defer)(function(){o.current&&o.current.dispatchEvent(new Event("submit",{cancelable:!0}))})}}),s=a.data,l=a.isLoading;return((0,i.useEffect)(function(){return function(){r()}},[r]),l)?null:(0,n.jsx)(ee.H,{formRef:o,workflow:s,isRerun:!0})},er=function(e){var t=e.showRerunConfirmation;return(0,n.jsx)(q.Lt.ItemWithLink,{onClick:t,children:(0,b.t)("settings.workflows.table.actions.rerun")})},en=function(e){var t=e.workflowId,r=(0,j.k6)();return(0,n.jsx)(q.Lt.ItemWithLink,{onClick:function(){r.push({pathname:w.o0.view({workflowId:t}),state:{from:{path:r.location.pathname,query:r.location.search}}})},children:(0,b.t)(["settings.workflows.table.actions","view"])})},ei=r(90069);function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ea=function(e){var t,r=e.workflow,o=e.refetch,a=r.id,s=r.name,l=r.workflow_type,c=r.status,u=r.steps,d=(0,ei.o)({workflowId:a,name:s,type:l,status:c,refetch:o}),f=d.onDuplicate,p=d.handleArchiveWithConfirmation,m=d.handleDeleteWithConfirmation,b=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=b[0],v=b[1];if(c===h.qN.ARCHIVED)return(0,n.jsx)("div",{className:"min-w-[2rem]",children:(0,n.jsx)(G.w.Actions,{children:(0,n.jsx)(W,{onClick:f})})});var g=l===h.nQ.BULK_ACTION||l===h.nQ.SCHEDULED,_=l===h.nQ.BULK_ACTION,x=l===h.nQ.DYNAMIC,j=c===h.qN.ACTIVE,w=c===h.qN.DRAFT,O=c===h.bI.IN_PROGRESS,S=(void 0===u?[]:u).length>0;return(0,n.jsxs)("div",{className:"min-w-[2rem]",children:[(0,n.jsxs)(G.w.Actions,{children:[(0,n.jsx)(en,{workflowId:a}),_&&!O&&S&&!w&&(0,n.jsx)(er,{showRerunConfirmation:function(){v(!0)}}),(0,n.jsx)(K,{workflowId:a,isAutomation:x,isActive:j,isBulkOrScheduled:g,isInProgress:O}),!w&&(0,n.jsx)(V,{onClick:p}),(0,n.jsx)(W,{onClick:f}),w&&(0,n.jsx)(H,{onClick:m})]}),y&&(0,n.jsx)(et,{workflowId:a,hideRerunModal:function(){return v(!1)}})]})},es=r(4501),el=r(41051),ec=r(85798),eu=r(27361),ed=r.n(eu),ef=r(26758),ep=r(9163),em=r(61089),eb=function(e){var t=e.workflowType,r=e.status,n=(0,em.Xt)().queryParams,i=(0,_._)(),o=i.pageSize,a=void 0===o?ep.L8:o,s=i.category,l=(0,ef.v)(1,!s),c=l.setPage,u=l.initialPage,d=String(ed()(n,"query","")),f=(0,ep.mA)({perPage:a,sort:ep.zw.LATEST,workflowType:t,status:r,initialPage:u,query:d,options:{keepPreviousData:!1}}),p=ed()(null==f?void 0:f.pages[0],"total_count",0),m=null==f?void 0:f.isLoading;return{infiniteQuery:f,totalWorkflows:p,isLoading:m,setPage:c,initialPage:u,defaultPageSize:a}},eh="settings.workflows.table",ey=function(e){var t=e.columns,r=e.colgroup,o=eb({workflowType:e.workflowType,status:e.status}),a=o.infiniteQuery,s=o.isLoading,l=o.totalWorkflows,c=o.initialPage,u=o.defaultPageSize,d=o.setPage,f=(0,j.k6)(),p=(0,i.useMemo)(function(){var e=a.isLoading,t=a.workflows,r=a.isError;return e||r?null:t.map(function(e){return e.created_by_community_member_id})},[a]);return(0,n.jsx)(U.I,{ids:p,children:(0,n.jsxs)(ec.J,{columns:t({refetch:a.refetch}),infiniteQuery:a,pageSize:u,initialPage:c,totalCountPath:"total_count",onChangePage:function(e){d(e)},onClickRow:function(e){var t=e.original||{},r=t.id,n=t.status;if(r){var i={pathname:n===h.qN.DRAFT?w.o0.edit({workflowId:r}):w.o0.view({workflowId:r}),state:{from:{path:f.location.pathname,query:f.location.search}}};f.push(i)}},children:[!s&&(0,n.jsx)(G.w.Headline,{children:(0,n.jsx)(G.w.Headline.Title,{children:(0,b.t)([eh,"workflows_count"],{count:l})})}),(0,n.jsxs)(G.w.TableWrapper,{children:[(0,n.jsxs)(G.w.Table,{children:[r&&(0,n.jsx)(n.Fragment,{children:r}),(0,n.jsx)(G.w.Header,{className:"z-10"}),(0,n.jsx)(G.w.Loader,{}),(0,n.jsx)(G.w.NoRecords,{text:(0,b.t)([eh,"no_workflows_found"])}),(0,n.jsx)(G.w.Body,{})]}),(0,n.jsx)(G.w.Pagination,{align:"left",direction:"reverse"})]})]})})},ev=r(91980),eg="settings.workflows.table",e_=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,b.t)([eg,"name"]),thClassName:ev.y.title,cellClassName:ev.y.title,cell:function(e){return(0,n.jsx)(el.W,{children:e.getValue()||(0,b.t)([eg,"untitled_workflow"])})}},{accessorKey:"workflow_type",header:(0,b.t)([eg,"type.title"]),thClassName:ev.y.workflowType,cellClassName:ev.y.workflowType,cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:(0,b.t)([eg,"type",e.getValue()||"unknown"])})}},{accessorKey:"steps",header:(0,b.t)([eg,"steps"]),thClassName:ev.y.steps,cellClassName:(0,z.A)("!py-0",ev.y.steps),cell:function(e){return(0,n.jsx)(Z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,b.t)([eg,"created_by"]),thClassName:ev.y.user,cellClassName:ev.y.user,cell:function(e){return(0,n.jsx)(U.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,b.t)([eg,"created_on"]),thClassName:ev.y.dateShort,cellClassName:ev.y.dateShort,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!1})}},{accessorKey:"last_run_at",header:(0,b.t)([eg,"last_run"]),thClassName:ev.y.dateLong,cellClassName:ev.y.dateLong,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,n.jsx)(ea,{workflow:r.original,refetch:t})}}]},ex=function(){var e,t=(0,_._)().category;return(0,n.jsx)(ey,{columns:(e=!!t,function(t){var r=e_({refetch:t.refetch});if(!e)return r;var n=["name","workflow_type","created_by_community_member_id"];return r.filter(function(e){return n.includes(e.accessorKey)})}),workflowType:h.nQ.ALL,status:h.qN.ARCHIVED})},ej=r(71923),ew=r(84870),eO=function(e){var t=e.workflow,r=t.id,i=t.status,o=t.steps,a=i===h.qN.ACTIVE,s=!!(null==o?void 0:o.length),l=i===h.qN.DRAFT,c=(0,ej.q)({workflowId:r,isActive:a}),u=c.isLoading,d=c.onChangeActiveStatus;return(0,n.jsx)(ew.N,{isActive:a,onToggle:d,steps:o,workflowId:r,isDisabled:!s||l,hasNoActions:!s,isDraft:l,isLoading:u})},eS="settings.workflows.table",ek=function(){var e,t=(0,_._)().category;return(0,n.jsx)(ey,{columns:(e=!!t,function(t){var r=t.refetch,i={name:{accessorKey:"name",header:(0,b.t)([eS,"name"]),thClassName:ev.y.title,cellClassName:ev.y.title,cell:function(e){return(0,n.jsx)(el.W,{children:e.getValue()||(0,b.t)([eS,"untitled_workflow"])})}},steps:{accessorKey:"steps",header:(0,b.t)([eS,"steps"]),thClassName:ev.y.steps,cellClassName:(0,z.A)("!py-0",ev.y.steps),cell:function(e){return(0,n.jsx)(Z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},createdBy:{accessorKey:"created_by_community_member_id",header:(0,b.t)([eS,"created_by"]),thClassName:ev.y.user,cellClassName:ev.y.user,cell:function(e){return(0,n.jsx)(U.Xg,{id:e.getValue(),isLastNameHidden:!0})}},createdAt:{accessorKey:"created_at",header:(0,b.t)([eS,"created_on"]),thClassName:ev.y.dateShort,cellClassName:ev.y.dateShort,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!1})}},lastRunAt:{accessorKey:"last_run_at",header:(0,b.t)([eS,"last_run"]),thClassName:ev.y.dateLong,cellClassName:ev.y.dateLong,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!0})}},tasksCount:{accessorKey:"tasks_count",header:(0,b.t)([eS,"total_runs"]),thClassName:ev.y.number,thInnerClassName:"justify-end",cellClassName:(0,z.A)("text-right",ev.y.number),cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},active:{header:(0,b.t)([eS,"active"]),thClassName:ev.y.toggleInput,thInnerClassName:"justify-center",cellClassName:(0,z.A)("!py-4 cursor-default",ev.y.toggleInput),onClick:function(e){return e.event.stopPropagation()},cell:function(e){return(0,n.jsx)(eO,{workflow:e.row.original})}},actions:{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var t=e.row;return(0,n.jsx)(ea,{workflow:t.original,refetch:r})}}};return(e?["name","createdBy","tasksCount","active"]:["name","steps","createdBy","createdAt","lastRunAt","tasksCount","active","actions"]).map(function(e){return i[e]})}),workflowType:h.nQ.DYNAMIC,status:h.qN.ALL})},eP=function(e){var t=e.status;return(0,n.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,n.jsx)("span",{className:"break-normal capitalize",children:(0,b.t)(["settings.workflows.table.status",t],{defaultValue:t||""})})})},eC="settings.workflows.table",eN=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,b.t)([eC,"name"]),thClassName:ev.y.title,cellClassName:ev.y.title,cell:function(e){return(0,n.jsx)(el.W,{children:e.getValue()||(0,b.t)([eC,"untitled_workflow"])})}},{accessorKey:"status",header:(0,b.t)([eC,"status.title"]),thClassName:ev.y.status,cellClassName:ev.y.status,cell:function(e){return(0,n.jsx)(eP,{status:e.getValue()})}},{accessorKey:"steps",header:(0,b.t)([eC,"steps"]),thClassName:ev.y.steps,cellClassName:(0,z.A)("!py-0",ev.y.steps),cell:function(e){return(0,n.jsx)(Z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,b.t)([eC,"created_by"]),thClassName:ev.y.user,cellClassName:ev.y.user,cell:function(e){return(0,n.jsx)(U.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,b.t)([eC,"created_on"]),thClassName:ev.y.dateShort,cellClassName:ev.y.dateShort,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!1})}},{accessorKey:"last_run_at",header:(0,b.t)([eC,"last_run"]),thClassName:ev.y.dateLong,cellClassName:ev.y.dateLong,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,b.t)([eC,"total_runs"]),thClassName:ev.y.number,thInnerClassName:"justify-end",cellClassName:(0,z.A)("text-right",ev.y.number),cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,n.jsx)(ea,{workflow:r.original,refetch:t})}}]},eA=function(){var e,t=(0,_._)().category;return(0,n.jsx)(ey,{columns:(e=!!t,function(t){var r=eN({refetch:t.refetch});if(!e)return r;var n=["name","status","created_by_community_member_id"];return r.filter(function(e){return n.includes(e.accessorKey)})}),workflowType:h.nQ.BULK_ACTION,status:h.qN.ALL})},eI=r(41553),eE=r(83769),eT=r(1790),eL=function(e){var t=e.category,r=e.onClose,i=e.shouldAutoAdjust;return(0,n.jsx)(eT.N,{category:t,children:(0,n.jsxs)("div",{className:"w-fit px-6",children:[(0,n.jsx)(eI.Z.TitleSm,{weight:"bold",children:(0,b.t)("settings.workflows.workflows")}),(0,n.jsx)(eE.i,{shouldIncludeCreateButton:!0,onClose:r,shouldAutoAdjust:i})]})})},eD=r(85122),eM=r(65739),eR="settings.workflows.table.notices.email_hub_access_ending_soon",eB=function(e){var t=e.accessEndDate;return(0,n.jsx)("div",{className:"bg-primary px-6 pt-5",children:(0,n.jsx)(eM.W,{iconEl:(0,n.jsx)(k.JO,{type:"20-info",size:20,className:"mt-0.5 !self-start"}),children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(eI.Z.LabelSm,{weight:"bold",children:(0,b.t)("".concat(eR,".title"))}),(0,n.jsx)(eI.Z.LabelSm,{children:(0,b.t)("".concat(eR,".description"),{accessEndDate:(0,eD.ie)(null!=t?t:"")})})]})})})};function eF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ez=function(e){var t,r=e.scheduleType,i="settings.workflows.schedule_types",o=(eF(t={},h.By.ONE_TIME,(0,b.t)("".concat(i,".one_time"))),eF(t,h.By.RECURRING,(0,b.t)("".concat(i,".recurring"))),t);return(0,n.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,n.jsx)("span",{className:"break-normal",children:o[r]})})},eU=r(80171),eZ=r(23855),eG=r(7069),eq=r(42699),eV=r(313),eH=r(41342),eW=function(){var e,t=l(),r=t.data,n=t.isLoading,i=(0,eH.wh)().currentCommunity;if(!r||!("plan"in r)||n)return{isLoading:n,accessEndDate:null};var o=r.enabled,a=r.trialing,s=r.plan;return o?a?{isLoading:n,accessEndDate:null!=(e=null==i?void 0:i.trial_ends_at)?e:null}:s.cancel_at_period_end&&s.current_period_end?{isLoading:n,accessEndDate:s.current_period_end}:{isLoading:n,accessEndDate:null}:{isLoading:n,accessEndDate:null}},eQ=function(){var e=eW(),t=e.isLoading,r=e.accessEndDate;return{isLoading:t,hasAccessToRunOnDate:function(e){return!r||new Date(r)>=new Date(e)},isMarketingHubAccessEndingSoon:function(){if(!r)return!1;var e=new Date,t=(0,eZ.default)(r),n=(0,eG.default)(t,7);return(0,eq.default)(e,n)&&(0,eV.default)(e,t)},accessEndDate:r}},eJ="settings.workflows.table",eK=function(e){var t=e.date,r=e.steps,i=eQ(),o=i.hasAccessToRunOnDate;return i.isLoading?(0,n.jsx)(v.a,{}):r.some(function(e){return"send_email"===e})&&t&&!o(t)?(0,n.jsx)(eU.T,{content:(0,b.t)([eJ,"requires_email_hub_tooltip"]),children:(0,b.t)([eJ,"requires_email_hub"])}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es.u,{date:t,shouldIncludeTime:!0}),t&&(0,n.jsx)(k.JO,{type:"16-clock",className:"ml-2 pt-1"})]})},e$="settings.workflows.table",eX=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,b.t)([e$,"name"]),thClassName:ev.y.title,cellClassName:ev.y.title,cell:function(e){return(0,n.jsx)(el.W,{children:e.getValue()||(0,b.t)([e$,"untitled_workflow"])})}},{accessorKey:"steps",header:(0,b.t)([e$,"steps"]),thClassName:ev.y.steps,cellClassName:(0,z.A)("!py-0",ev.y.steps),cell:function(e){return(0,n.jsx)(Z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"schedule_type",header:(0,b.t)([e$,"schedule_type"]),thClassName:ev.y.scheduleType,cellClassName:ev.y.scheduleType,cell:function(e){return(0,n.jsx)(ez,{scheduleType:e.getValue()})}},{accessorKey:"created_by_community_member_id",header:(0,b.t)([e$,"created_by"]),thClassName:ev.y.user,cellClassName:ev.y.user,cell:function(e){return(0,n.jsx)(U.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,b.t)([e$,"created_on"]),thClassName:ev.y.dateShort,cellClassName:ev.y.dateShort,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!1})}},{accessorKey:"next_run_at",header:(0,b.t)([e$,"next_run"]),thClassName:ev.y.dateLong,cellClassName:ev.y.dateLong,cell:function(e){return(0,n.jsx)(eK,{date:e.getValue(),steps:e.row.original.steps})}},{accessorKey:"last_run_at",header:(0,b.t)([e$,"last_run"]),thClassName:ev.y.dateLong,cellClassName:ev.y.dateLong,cell:function(e){return(0,n.jsx)(es.u,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,b.t)([e$,"total_runs"]),thClassName:ev.y.number,thInnerClassName:"justify-end",cellClassName:(0,z.A)("text-right",ev.y.number),cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,n.jsx)(ea,{workflow:r.original,refetch:t})}}]},eY=function(){var e,t=(0,_._)().category;return(0,n.jsx)(ey,{columns:(e=!!t,function(t){var r=eX({refetch:t.refetch});if(!e)return r;var n=["name","schedule_type","created_by_community_member_id"];return r.filter(function(e){return n.includes(e.accessorKey)})}),workflowType:h.nQ.SCHEDULED,status:h.qN.ALL})},e0=r(72040),e1=r(63676),e2=r(795),e3=function(){var e=(0,e0.y)(),t=e.shouldShowEmailNotices,r=e.isSendingMarketingEmailsAllowed,i=e.marketingHubData;if(!t||!i||r)return null;var o=i.trialing?"settings.workflows.table.notices.trialing_limit_exhausted":"settings.workflows.table.notices.email_hub_limit_exceeded";return(0,n.jsx)("div",{className:"bg-primary px-6 pt-6",children:(0,n.jsx)(eM.W,{iconEl:(0,n.jsx)(k.JO,{type:"20-info",size:20,className:"mt-0.5 !self-start"}),children:(0,n.jsx)(e2.w,{sanitizeProps:{ADD_ATTR:["target"]},content:(0,b.t)("".concat(o),{limit:(0,e1.HA)(i.limits.marketing_email_limit)})})})})},e6=r(96354),e4=r(14156),e5=function(){return Y.nH.list({params:{per_page:1}})};function e8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=function(){var e,t=(0,e4.K)(),r=(0,e6.t)(),n=(0,j.k6)(),o=e7((0,i.useState)(),2),a=o[0],s=o[1],l=e7((0,i.useState)(0),2),c=l[0],u=l[1],d=(0,X.useQuery)("totalWorkflows",e5),f=d.data,p=void 0===f?{meta:{}}:f,m=p.total_count,y=p.meta,v=void 0===y?{}:y,g=v.counts_by_workflow_type,_=void 0===g?{}:g,x=_.dynamic,O=_.bulk_action,S=_.scheduled,k=_.archived,P=v.has_active_marketing_hub_workflows,C=d.isLoading,N=(e9(e={},h.I3.DYNAMIC,x),e9(e,h.I3.BULK_ACTION,O),e9(e,h.I3.SCHEDULED,S),e9(e,h.I3.ARCHIVED,k),e),A=(0,i.useMemo)(function(){var e;return e9(e={},h.I3.DYNAMIC,(0,b.t)("settings.workflows.table.type.automations")),e9(e,h.I3.BULK_ACTION,(0,b.t)("settings.workflows.table.type.bulk_actions")),e9(e,h.I3.SCHEDULED,(0,b.t)("settings.workflows.table.type.scheduled")),e9(e,h.I3.ARCHIVED,(0,b.t)("settings.workflows.table.type.archived")),e},[]),I=r.status,E=r.workflow_type;return(0,i.useEffect)(function(){if(!C){var e=k>0,t=I===h.qN.ARCHIVED&&e?h.I3.ARCHIVED:E||h.I3.DYNAMIC,r=h.$m.findIndex(function(e){return e===t});s(e),u(r)}},[C,a,I,E,k,A]),{isWorkflowExecutionEnabled:t,hasArchivedWorkflows:a,isLoading:C,totalWorkflows:m,hasActiveMarketingHubWorkflows:P,tabsCountersMap:N,selectedTabIndex:c,handleTabChange:function(e){u(e);var t=e===h.$m.length-1,r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){e9(e,t,r[t])})}return e}({},t&&e9({},"status",h.qN.ARCHIVED),!t&&e9({},"workflow_type",h.$m[e]));n.push({search:(0,w.WB)(r)})},tabNames:h.$m,tabLabels:A}},tt=function(){var e=te(),t=e.isLoading,r=e.totalWorkflows,i=e.hasArchivedWorkflows,o=e.isWorkflowExecutionEnabled,s=e.tabsCountersMap,l=e.selectedTabIndex,c=e.handleTabChange,u=e.tabNames,d=e.tabLabels,p=e.hasActiveMarketingHubWorkflows,j=(0,_._)(),w=j.category,O=j.onClose,S=j.shouldAutoAdjust;(0,y.ko)();var k=eQ(),P=k.isLoading,C=k.isMarketingHubAccessEndingSoon,N=k.accessEndDate,A=(0,a.aH)(),I=A.isLoading,E=A.data;return t||P||I||m()(l)?(0,n.jsx)(v.a,{}):t||0!==r&&(o||(null==E?void 0:E.enabled))?(0,n.jsx)("div",{className:"bg-primary h-full",children:(0,n.jsxs)(g.O.Group,{selectedIndex:l,onChange:c,className:"!h-auto overflow-visible",children:[(0,n.jsxs)(x.h,{showBottomBorder:!1,title:(0,b.t)("settings.workflows.workflows"),children:[(0,n.jsx)(g.O.ListWrapper,{children:(0,n.jsx)(g.O.List,{children:u.map(function(e){return(0,n.jsxs)(g.O,{className:f()({hidden:e===h.I3.ARCHIVED&&!i}),children:[d[e],(0,n.jsx)(g.O.Counter,{children:s[e]})]},e)})})}),p&&C()&&(0,n.jsx)(eB,{accessEndDate:N})]}),(0,n.jsx)(e3,{}),(0,n.jsxs)(g.O.Panels,{children:[(0,n.jsx)(g.O.Panel,{children:(0,n.jsx)(ek,{})}),(0,n.jsx)(g.O.Panel,{children:(0,n.jsx)(eA,{})}),(0,n.jsx)(g.O.Panel,{children:(0,n.jsx)(eY,{})}),i&&(0,n.jsx)(g.O.Panel,{children:(0,n.jsx)(ex,{})})]})]})}):w?(0,n.jsx)(eL,{category:w,onClose:O,shouldAutoAdjust:S}):(0,n.jsx)(F,{})},tr=function(e){var t,r;return(0,n.jsx)(_.C,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:(0,n.jsx)(c,{children:(0,n.jsx)(u.W,{children:(0,n.jsx)(tt,{})})})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},70216:function(e,t,r){"use strict";r.d(t,{h:()=>n,w:()=>i});var n=function(e){var t,r;return!!(null==e||null==(r=e.body)||null==(t=r.data)?void 0:t.plan_limits_reached)},i=function(e){var t,r;return!!(null==e||null==(r=e.body)||null==(t=r.data)?void 0:t.marketing_hub_required)}},51775:function(e,t,r){"use strict";r.d(t,{L:()=>s,W:()=>l});var n=r(88767),i=r(93199),o=r(13532);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=["site","pages"],l=function(e){var t=e.id;return(0,n.useQuery)({queryKey:((function(e){if(Array.isArray(e))return a(e)})(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t]),queryFn:function(){var e;return t?(e=t,(0,i.UT)(o.av.site.pages.show(e))):null},enabled:!!t})}},39804:function(e,t,r){"use strict";r.d(t,{x:()=>v});var n=r(85893),i=r(23560),o=r.n(i),a=r(88767),s=r(84326),l=r(51630),c=r(38086),u=r(41342),d=r(40404),f=r(4403),p=r(95727),m=r(88741),b=r(60878),h=r(41553);function y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var v=function(e){var t=e.show,r=e.spaceGroupId,i=e.onClose,v=e.onSuccess,g=(0,b.pm)(),_=g.error,x=g.success,j=(0,d.C)().goToCommunityRootPath,w=(0,u.nT)(),O=w.records,S=w.actions.refresh,k=(0,u.e2)().actions.refresh,P=(0,a.useMutation)(function(){return l.iD.destroy(r)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return x((0,s.t)("space_groups.form.delete.success")),[4,Promise.all([S(),k()])];case 1:return e.sent(),j(),o()(i)&&i(),o()(v)&&v(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){_((0,s.t)("space_groups.form.delete.failed"))}}),C=P.mutate,N=P.isLoading,A=O.filter(function(e){return e.space_group_id===r}),I=A.length,E=[(0,s.t)("space_groups.delete.description")];I>0&&E.push((0,s.t)("space_groups.delete.this_includes"));var T=E.join(" ");return(0,n.jsx)(p.V,{title:(0,s.t)("space_groups.delete.title"),confirmUserPrompt:(0,s.t)("space_groups.delete.confirm_prompt"),isOpen:t,onClose:i,onCancel:i,onConfirm:C,confirmVariant:"danger",isDisabled:N,confirmText:N?(0,s.t)("deleting"):(0,s.t)("confirm"),children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,n.jsx)(h.Z.BodyMd,{children:T}),I>0&&(0,n.jsx)(m.g,{title:(0,s.t)("space_groups.delete.spaces_count",{count:A.length}),defaultExpanded:A.length<=5,children:(0,n.jsx)(m.g.BulletedList,{items:A.map(function(e){return e.name})})}),(0,n.jsx)(c.K,{contentSpecType:f.ry.SpaceGroup,contentSpecId:r})]})})}},18826:function(e,t,r){"use strict";r.d(t,{a:()=>m});var n=r(85893),i=r(84326),o=r(56338),a=r(41342),s=r(80171),l=r(24330),c=r(51466),u=r(41553);function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var p={translationRoot:"space_groups.form.create",hiddenField:!0,hideDescription:!0,className:"flex flex-row-reverse justify-end m-0",labelClassName:"ml-4 mb-0",labelWrapperClassName:"flex items-center",shouldToggleValueOnLabelClick:!0},m=function(){var e=(0,a.wh)().currentCommunitySettings;return(0,n.jsxs)("div",{className:"mt-8 space-y-5",children:[(0,n.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,i.t)("space_groups.form.create.permissions")}),(0,n.jsx)(c.l.Item,f(d({},p),{name:"hide_members_count",tooltipText:(0,i.t)("space_groups.form.create.hide_members_count_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},p),{name:"is_hidden_from_non_members",tooltipText:(0,i.t)("space_groups.form.create.is_hidden_from_non_members_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},p),{name:"hide_non_member_spaces_from_sidebar",tooltipText:(0,i.t)("space_groups.form.create.hide_non_member_spaces_from_sidebar_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},p),{name:"allow_members_to_create_spaces",tooltipText:(0,i.t)("space_groups.form.create.allow_members_to_create_spaces_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,o.Wk)(e)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,n.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,i.t)("settings.access_groups.admin.legacy_access.title")}),(0,n.jsx)("div",{children:(0,n.jsx)(s.T,{role:"tooltip",content:(0,i.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,n.jsx)(l.g,{square:!0,label:(0,i.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,n.jsx)(c.l.Item,f(d({},p),{name:"automatically_add_members_to_new_spaces",tooltipText:(0,i.t)("space_groups.form.create.automatically_add_members_to_new_spaces_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},p),{name:"add_members_to_space_group_on_space_join",tooltipText:(0,i.t)("space_groups.form.create.add_members_to_space_group_on_space_join_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})}))]})]})}},25885:function(e,t,r){"use strict";r.d(t,{K:()=>m});var n=r(85893),i=r(67294),o=r(52293),a=r(31304),s=r.n(a),l=r(84326),c=r(51466);function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var f={replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0},p={translationRoot:"space_groups.form.create",hideBorder:!0,hideDescription:!0,fullWidth:!1},m=function(){var e=(0,o.Gc)(),t=e.watch,r=e.setValue,a=e.formState,m=t("name"),b=!!a.dirtyFields.name,h=!!a.dirtyFields.slug;return(0,i.useEffect)(function(){m&&!h&&b&&r("slug",s()(m,f))},[r,m,h,b]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(c.l.Item,d(u({},p),{isFirstChild:!0,name:"name",rules:{required:(0,l.t)("space_groups.form.create.name_is_required"),maxLength:255},variant:"extra-bottom-margin",children:(0,n.jsx)(c.l.Input,{})}))}),(0,n.jsx)(c.l.Item,d(u({},p),{name:"slug",rules:{maxLength:255},variant:"extra-bottom-margin",transformValue:function(e){return s()(e,f)},tooltipText:(0,l.t)("space_groups.form.create.slug_tooltip",{host:window.location.origin}),children:(0,n.jsx)(c.l.Input,{})}))]})}},25606:function(e,t,r){"use strict";r.d(t,{X:()=>u});var n=r(85893),i=r(65978),o=r(84326),a=r(85388),s=r(5521),l=r(51466);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=function(e){var t=e.space,r=e.isEdit,u=e.bookmark,d=e.renderFooter,f=e.isFolder,p=void 0!==f&&f,m=e.folderId,b=e.onAfterCreateOrUpdate,h=(0,s.k)(),y=i.Ry().shape(c({name:i.Z_().required(o.Z.t("spaces.bookmarks.form.errors.name_required"))},!p&&{url:i.Z_().url(o.Z.t("spaces.bookmarks.form.errors.url_format")).required(o.Z.t("spaces.bookmarks.form.errors.url_required"))})),v=(0,a.S)({space:t,bookmark:u,onAfterCreateOrUpdate:b}),g=v.createBookmark,_=v.isCreatingBookmark,x=v.updateBookmark,j=v.isUpdatingBookmark;return(0,n.jsxs)(l.l,{id:"bookmark-form",onSubmit:function(e){return r?x(e):g(e)},validationSchema:y,autoComplete:"off",defaultValues:r?c({},u):c({display_type:p?"folder":"link",space_id:t.id,name:""},!p&&{url:"",emoji:"",folder_id:m},!p&&m&&{folder_id:m}),children:[(0,n.jsx)(l.l.Item,{name:"name",variant:"extra-bottom-margin",label:(0,o.t)("spaces.bookmarks.form.name"),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(l.l.Input,{ref:h,prefix:!p&&(0,n.jsx)(l.l.EmojiPickerV3Wrapper,{record:u})})}),!p&&(0,n.jsx)(l.l.Item,{variant:"extra-bottom-margin",name:"url",label:(0,o.t)("spaces.bookmarks.form.url"),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(l.l.Input,{})}),null==d?void 0:d({isSubmitting:_||j})]})}},85388:function(e,t,r){"use strict";r.d(t,{S:()=>l});var n=r(88767),i=r(14866),o=r(93199),a=r(13532);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l=function(e){var t=e.space,r=e.bookmark,l=e.onAfterCreateOrUpdate,c=(0,i.z)(),u=(0,n.useQuery)(a.av.spaces.bookmarks.index({spaceId:null==t?void 0:t.id,params:{per_page:40}}),{enabled:!!(null==t?void 0:t.id),refetchOnWindowFocus:!1}),d=u.data,f=u.isLoading,p=u.refetch,m=(null==d?void 0:d.records)||[],b=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return null==l||l(),[4,p()];case 1:return e.sent(),[4,c.hide()];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},h=(0,n.useMutation)(function(e){return(0,o.Cu)(a.av.spaces.bookmarks.create({spaceId:null==t?void 0:t.id}),{bookmark:e})},{onSuccess:b}),y=h.mutate,v=h.isLoading,g=(0,n.useMutation)(function(e){return(0,o.aU)(a.av.spaces.bookmarks.update({spaceId:null==t?void 0:t.id,id:null==r?void 0:r.id}),{bookmark:e})},{onSuccess:b}),_=g.mutate,x=g.isLoading,j=(0,n.useMutation)(function(e){var r=e.bookmarks_order;return(0,o.aU)(a.av.spaces.update({id:null==t?void 0:t.id}),{space:{bookmarks_order:r}})}).mutate,w=(0,n.useMutation)(function(){return(0,o.pC)(a.av.spaces.bookmarks.destroy({spaceId:null==t?void 0:t.id,id:null==r?void 0:r.id}))},{onSuccess:p}),O=w.mutate,S=w.isLoading,k=!!(null==m?void 0:m.length);return{records:m,isLoading:f,createBookmark:y,isCreatingBookmark:v,updateBookmark:_,isUpdatingBookmark:x,updateBookmarksOrder:j,deleteBookmark:O,isDeleting:S,shouldShowBookmarks:!!(t&&k)}}},75850:function(e,t,r){"use strict";r.d(t,{$:()=>o});var n=r(85893),i=r(84326),o=function(){return(0,n.jsx)("div",{className:"text-dark px-8 font-medium",children:(0,i.t)("chat_space.error_message")})}},37774:function(e,t,r){"use strict";r.d(t,{T:()=>k});var n=r(85893),i=r(67294),o=r(84326),a=r(41342),s=r(57363),l=r(39905),c=r(51169),u=r(41553),d=r(56450),f=r(85544),p=r(63549),m=r(44820),b=r(34519),h=r(60878),y=r(70973),v=r(51466),g="edit-course-type-form",_=function(e){var t=e.defaultValues,r=e.onSubmit;return(0,n.jsx)(v.l,{id:g,onSubmit:r,defaultValues:t,validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,n.jsx)(y.q,{hideLabel:!0})})};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t,r=e.space,s=e.isOpen,c=e.onClose,u=(null==(t=r.course_setting)?void 0:t.course_type)||d.t,y={course_setting:{course_type:u}},v=w((0,i.useState)(!1),2),x=v[0],O=v[1],S=w((0,i.useState)(!1),2),k=S[0],P=S[1],C=w((0,i.useState)(!0),2),N=C[0],A=C[1],I=w((0,i.useState)(y),2),E=I[0],T=I[1],L=(0,h.pm)(),D=L.error,M=L.success,R=function(){c(),setTimeout(function(){O(!1),A(!0),P(!1)},100)},B=(0,a.T4)({spaceId:r.id}).refetch,F=(0,f.$)({space:r,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,B()];case 1:return e.sent(),M((0,o.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),R(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){D((0,o.t)("spaces.form.create.course_types.save_error")),O(!1)}}}).mutate,z=E.course_setting.course_type,U=(0,o.t)("spaces.form.create.course_types.".concat(z,"_confirmation"));return(0,n.jsxs)(b.u_,{isOpen:s,onClose:c,contentPortalId:"course-type-picker-portal",children:[(0,n.jsx)(b.u_.Overlay,{}),(0,n.jsxs)(b.u_.Content,{size:"md",children:[(0,n.jsxs)(b.u_.Header,{children:[(0,n.jsx)(b.u_.Title,{size:"sm",children:(0,o.t)("spaces.form.create.course_types.label")}),(0,n.jsx)(b.u_.HeaderActions,{children:(0,n.jsx)(b.u_.CloseButton,{onClick:c})})]}),(0,n.jsxs)(b.u_.Body,{className:"px-2",children:[N&&(0,n.jsx)(_,{defaultValues:y,onSubmit:function(e){u===e.course_setting.course_type?(M((0,o.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),R()):(T(e),P(!0),A(!1))}}),(0,n.jsx)(p.c,{title:(0,o.t)("spaces.form.create.course_types.are_you_sure"),confirmText:(0,o.t)("save"),cancelText:(0,o.t)("cancel"),confirmVariant:"circle",disabled:x,isOpen:k,onCancel:function(){A(!0),P(!1)},onClose:function(){A(!0),P(!1)},onConfirm:function(){O(!0),F(E)},children:(0,n.jsx)("p",{children:U})})]}),(0,n.jsxs)(b.u_.Footer,{className:"flex justify-end",children:[!x&&(0,n.jsx)(l.z,{type:"button",variant:"secondary",className:"mr-2",onClick:c,children:(0,o.t)("cancel")}),(0,n.jsx)(m._,{type:"submit",variant:"circle",form:g,submitting:x,children:(0,o.t)("save")})]})]})]})};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r,f=e.space,p=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1],h=(0,a.T4)({spaceId:null==f?void 0:f.id}),y=h.data,v=h.isLoading,g=(0,a.wh)().isViewOnlyMasquerading;if(v)return(0,n.jsx)(c.a,{});if(!y)return null;var _=(null==(r=y.course_setting)?void 0:r.course_type)||d.t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O,{space:y,isOpen:m,onClose:function(){b(!1)}}),(0,n.jsxs)(u.Z.BodySm,{weight:"font-medium",children:[(0,n.jsx)(s.JO,{type:"16-book",size:16,className:"align-text-bottom"})," ",(0,o.t)("spaces.form.create.course_types.label"),":"," ",(0,n.jsx)(l.z,{variant:"plain",className:"hover:bg-tertiary !text-dark !px-1 !py-0.5 !font-semibold underline decoration-dashed decoration-1 underline-offset-2",onClick:function(){return b(!0)},disabled:g,children:(0,o.t)("spaces.form.create.course_types.".concat(_))})]})]})}},70973:function(e,t,r){"use strict";r.d(t,{q:()=>l});var n=r(85893),i=r(84326),o=r(57363),a=r(51466),s=[{label:(0,i.t)("spaces.form.create.course_types.self_paced"),value:"self_paced",description:(0,i.t)("spaces.form.create.course_types.self_paced_info")},{label:(0,i.t)("spaces.form.create.course_types.structured"),value:"structured",description:(0,i.t)("spaces.form.create.course_types.structured_info")},{label:(0,i.t)("spaces.form.create.course_types.scheduled"),value:"scheduled",description:(0,i.t)("spaces.form.create.course_types.scheduled_info")}],l=function(e){var t=e.hideLabel;return(0,n.jsx)(a.l.Item,{name:"course_setting[course_type]",hideDescription:!0,rules:{required:(0,i.t)("spaces.form.create.choose_course_type"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",label:(0,i.t)("spaces.form.create.course_types.label"),hideLabel:t,children:(0,n.jsx)(a.l.RadioGroup,{variant:"box",name:"visibility",options:s,optionAlignment:"left",checkedIcon:(0,n.jsx)(o.JO,{type:"20-checkmark-circle",size:16})})})}},56450:function(e,t,r){"use strict";r.d(t,{d:()=>n,t:()=>i});var n={self_paced:"self_paced",scheduled:"scheduled",structured:"structured"},i=n.self_paced},17075:function(e,t,r){"use strict";r.d(t,{a:()=>en});var n=r(85893),i=r(45697),o=r.n(i),a=r(27950),s=r(13532),l=r(94184),c=r.n(l),u=function(e){var t,r,i=e.href,o=e.children,a=e.className,s=e.rel,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["href","children","className","rel"]);return(0,n.jsx)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={href:i,rel:void 0===s?"noopener noreferrer":s,className:c()("focus-visible:!outline-secondary bg-brand text-brand-button inline-block rounded-md px-[18px] py-[6px] text-sm font-bold leading-5 transition-colors duration-150 hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",a),children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},d=function(e){var t=e.heading,r=void 0===t?"":t,i=e.description,o=void 0===i?"":i,l=e.button_label,c=void 0===l?"":l,d=e.button_link,f=e.background_image,p=void 0===f?"":f,m=e.overlay_color,b=e.heading_color,h=e.text_color,y=e.button_background_color,v=e.button_text_color,g=(0,a.Vi)(void 0===m?"#191B1F":m).alpha(.75).toRgbString(),_="";if(p)try{_=new URL(p).href}catch(e){_=(0,s.C9)({signed_id:p})}return(0,n.jsx)("div",{className:"flex w-full flex-col items-center bg-cover bg-center py-14 bg-blend-multiply",style:{backgroundImage:"url(".concat(_,")"),backgroundColor:g},children:(0,n.jsxs)("div",{className:"max-w-3xl px-5 text-center",children:[!!r&&(0,n.jsx)("h2",{className:"mb-3 text-4xl font-bold leading-10",style:{color:void 0===b?"#FFFFFF":b},children:r}),!!o&&(0,n.jsx)("p",{className:"mb-5 text-base leading-6 tracking-tighter",style:{color:void 0===h?"#FFFFFF":h},children:o}),!!c&&(0,n.jsx)(u,{href:void 0===d?"":d,style:{backgroundColor:void 0===y?"#2B2E33":y,color:void 0===v?"#FFFFFF":v},children:c})]})})};d.propTypes={heading:o().string,description:o().string,button_label:o().string,button_link:o().string,background_image:o().string,overlay_color:o().string,heading_color:o().string,text_color:o().string,button_background_color:o().string,button_text_color:o().string};var f=function(e){return(0,n.jsx)(d,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))};f.propTypes={};var p=r(67294),m=r(96486),b=r(23627);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r=e.description_tiptap,i=void 0===r?{}:r,o=e.sgids_to_object_map,a=e.inline_attachments,s=(t=(0,p.useState)((0,m.uniqueId)("description_block_")),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];return(0,p.useEffect)(function(){c((0,m.uniqueId)("description_block_"))},[i]),(0,n.jsx)("div",{className:"bg-primary flex w-full flex-col items-center",children:(0,n.jsx)("div",{className:"w-full max-w-[960px] px-6",children:(0,n.jsx)(b.R,{readOnly:!0,value:i,sgidToObjectMap:void 0===o?{}:o,inlineAttachments:void 0===a?[]:a,editorClassName:"break-words",disabledExtensions:["mention","poll","ai_copilot"]})})},l)};y.propTypes={description_tiptap:o().object,sgids_to_object_map:o().object,inline_attachments:o().array};var v=r(66007),g=r(84326),_=r(96354),x=r(41553),j=(r(42352),r(57363)),w=r(47075);o().object.isRequired;var O=function(e){var t=e.locked_page_heading,r=e.locked_page_description,i=e.locked_button_url,o=void 0===i?"":i,a=e.locked_button_label,s=void 0===a?"":a,l=!!(0,_.t)().invited,c=!!(s&&o),u=(void 0===r?{}:r).rendered_html_with_layout,d=void 0===u?"":u,f=!!d;return(0,n.jsx)("div",{className:"flex h-full w-full justify-center p-0 md:h-auto md:p-6","data-testid":"locked-space",children:(0,n.jsxs)("div",{className:"border-primary bg-primary h-full w-full max-w-5xl rounded-none border-0 px-10 py-20 text-center md:h-auto md:rounded-lg md:border",children:[(0,n.jsx)(j.JO,{type:"lock",className:"mb-5 !w-14"}),l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z.TitleSm,{weight:"semibold",children:(0,g.t)("please_check_your_email")}),(0,n.jsx)(x.Z.BodyMd,{children:(0,g.t)("please_check_your_email_description")})]}),!l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(x.Z.TitleSm,{weight:"semibold",children:(void 0===t?"":t)||(0,g.t)("this_space_is_private")})}),(0,n.jsxs)("div",{className:"mb-4",children:[f&&(0,n.jsx)("div",{className:"text-dark flex justify-center",children:(0,n.jsx)(v.Z,{html:d})}),!f&&(0,n.jsx)(x.Z.BodyMd,{children:(0,g.t)("this_space_is_private_description")})]}),c&&(0,n.jsx)(w.Q,{variant:"brand",href:o,children:s})]})]})})};O.propTypes={locked_page_heading:o().string,locked_page_description:o().shape({plain_text:o().string,trix_html:o().string,rendered_html_with_layout:o().string}),locked_button_url:o().string,locked_button_label:o().string,className:o().string};var S=function(e){var t=e.locked_page_heading,r=e.locked_page_description,i=e.locked_button_url,o=e.locked_button_label;return(0,n.jsx)("div",{className:"bg-secondary text-dark h-full",children:(0,n.jsx)(O,{locked_page_heading:void 0===t?"":t,locked_page_description:void 0===r?{}:r,locked_button_url:void 0===i?"":i,locked_button_label:void 0===o?"":o})})};S.propTypes={locked_page_heading:o().string,locked_page_description:o().shape({plain_text:o().string,trix_html:o().string,rendered_html_with_layout:o().string}),locked_button_url:o().string,locked_button_label:o().string};var k=r(94178),P=function(e){var t=e.isMember,r=e.sections;return(0,n.jsx)("div",{className:"bg-primary flex w-full flex-col items-center py-10",children:(0,n.jsx)("div",{className:"w-full max-w-[960px] px-6",children:(0,n.jsx)(k.V,{isMember:void 0!==t&&t,sections:void 0===r?[]:r})})})};P.propTypes={isMember:o().bool,sections:o().array};var C=r(82331),N=r(51943),A=r(46051),I=r(39905),E=Object.assign(function(){return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{children:(0,g.t)("paywalls.lock_screen.preview.empty_block.price")}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",children:"USD"})]}),(0,n.jsx)("div",{className:"invisible flex flex-col gap-y-2",children:(0,n.jsx)(x.Z.LabelXs,{children:(0,g.t)("paywalls.lock_screen.preview.price.today_payment",{once_payment_amount:"$0"})})})]})},{validateToRender:function(e){return!(null==e?void 0:e.id)}}),T=r(60221),L=r(2056),D="paywalls.lock_screen.preview.price.installment_payment",M="paywalls.lock_screen.preview.price.free_trial",R="paywalls.lock_screen.preview.price.once_payment",B={trial_then_upfront_then_value:{free_trial_label:M,once_payment:R,installment_payment:D},upfront_then_trial_then_value:{once_payment:R,free_trial_label:"paywalls.lock_screen.preview.price.trial",installment_payment:D},trial_then_value:{free_trial_label:M,installment_payment:D},upfront_then_value:{once_payment:"paywalls.lock_screen.preview.price.today_payment",installment_payment:D},value:{installment_payment:D}},F=Object.assign(function(e){var t=e.price,r=e.currency,i=B[null==t?void 0:t.scenario]||B.value,o=(0,L.I)(r,null==t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0});return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{size:"text-4xl",children:o||(null==t?void 0:t.amount_formatted)}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",children:r.code.toUpperCase()})]}),(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:Object.keys(i).length>0&&(0,n.jsx)(x.Z.LabelXs,{color:"text-default",children:(0,m.compact)(Object.keys(i).map(function(e){return i[e]})).map(function(e){return(0,g.t)(e,{once_payment_amount:(0,L.I)(r,null==t?void 0:t.upfront_payment_amount),installment_count:null==t?void 0:t.installments_count,installment_amount:(0,L.I)(r,null==t?void 0:t.installment_amount),interval_qualifier:(0,g.t)(["settings.paywall_prices.price_types","as_adverb",t.interval,t.interval_count]).toLowerCase(),count:null==t?void 0:t.trial_days})}).join((0,g.t)("paywalls.lock_screen.preview.price.separator"))})})]})},{validateToRender:function(e){return(0,T.t3)(e)}}),z=Object.assign(function(e){var t=e.price,r=e.currency,i=(0,L.I)(r,null==t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0});return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{size:"text-4xl",children:i}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",children:r.code.toUpperCase()})]}),(0,n.jsx)("div",{className:"invisible flex flex-col gap-y-2",children:(0,n.jsx)(x.Z.LabelXs,{children:(0,g.t)("paywalls.lock_screen.preview.price.today_payment",{once_payment_amount:i})})})]})},{validateToRender:function(e){return(0,T.ZN)(e)}}),U="paywalls.lock_screen.preview.price.recurring_payment",Z="settings.paywall_prices.price_types",G="paywalls.lock_screen.preview.price.free_trial",q="paywalls.lock_screen.preview.price.today_payment",V={web:{trial_then_upfront_then_value:{free_trial_label:G,once_payment:"paywalls.lock_screen.preview.price.once_payment",recurring_payment:U},upfront_then_trial_then_value:{once_payment:q,free_trial_label:"paywalls.lock_screen.preview.price.trial",recurring_payment:U},trial_then_value:{free_trial_label:G,recurring_payment:U},upfront_then_value:{once_payment:q,recurring_payment:U},value:{}},mobile:{trial_then_upfront_then_value:{free_trial_label:G},trial_then_value:{free_trial_label:G},value:{}}},H=[E,z,Object.assign(function(e){var t=e.price,r=e.currency,i=(0,C.B)().previewMode,o=(0,N.h)(i)?"web":"mobile",a=V[o][null==t?void 0:t.scenario]||V[o].value,s=(0,L.I)(r,null==t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0}),l=0===Object.keys(a).length;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{size:"text-4xl",children:s}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",textTransform:"lowercase",children:"/ ".concat((0,g.t)([Z,"when_advertising",t.interval,t.interval_count]))})]}),(0,n.jsx)("div",{className:c()("flex flex-col gap-y-2",{invisible:l}),children:(0,n.jsx)(x.Z.LabelXs,{color:"text-default",children:(0,m.compact)(Object.keys(a).map(function(e){return a[e]})).map(function(e){return(0,g.t)(e,{once_payment_amount:(0,L.I)(r,null==t?void 0:t.upfront_payment_amount),recurring_payment_amount:(0,L.I)(r,null==t?void 0:t.amount),interval_qualifier:(0,g.t)([Z,"as_adverb",t.interval,t.interval_count]).toLowerCase(),count:null==t?void 0:t.trial_days})}).join((0,g.t)("paywalls.lock_screen.preview.price.separator"))||"."})})]})},{validateToRender:function(e){return(0,T.QT)(e)}}),F],W=function(e){var t=e.price,r=e.currency,i=H.find(function(e){return e.validateToRender(t)});return i?(0,n.jsx)(i,{price:t,currency:r}):null},Q=r(52293),J=function(){var e=(0,Q.Gc)(),t=[];if(e){var r,n,i=e.formState.errors,o=null==i||null==(r=i.lock_screen_blocks)?void 0:r.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});(0,m.compact)((null==o||null==(n=o.data)?void 0:n.paywalls)||[]).forEach(function(e){var r,n,i,o,a;(null==e||null==(n=e.id)||null==(r=n.ref)?void 0:r.name)&&(t[parseInt(e.id.ref.name.match(/paywalls.(\d).id+/)[1])]=!0),(null==e||null==(a=e.web_paywall_price)||null==(o=a.id)||null==(i=o.ref)?void 0:i.name)&&(t[parseInt(e.web_paywall_price.id.ref.name.match(/paywalls.(\d).web_paywall_price+/)[1])]=!0)})}return{paywallWithErrorsByIndex:t,isEditing:!!e,isPreviewing:!e}},K=Object.assign(function(e){var t=e.children,r=e.desktopPreviewMode,i=p.Children.count(t);return(0,n.jsx)("div",{className:c()("grid w-full max-w-[960px] grid-cols-1 gap-y-4 px-6 md:mx-4",{"md:w-1/3 md:w-[332px]":1===i&&r,"md:w-[680px] md:grid-cols-2 md:gap-x-4":2===i&&r,"md:w-[960px] md:grid-cols-3 md:gap-x-4":i>2&&r}),children:t})},{Body:function(e){var t=e.children,r=e.isHighlighted,i=e.isError,o=e.isEmpty,a=e.hasFavorites;return(0,n.jsxs)("div",{className:c()("flex flex-col",{"opacity-40":o}),children:[a&&(0,n.jsx)("div",{className:c()("bg-brand flex flex-col items-center py-1",{"rounded-t-lg border-x border-t":r,"hidden md:invisible md:flex":!r,"border-feedback-error":i,"border-primary":!i}),children:(0,n.jsx)(x.Z.LabelXs,{weight:"bold",color:"text-brand-button",textTransform:"uppercase",children:(0,g.t)("paywalls.lock_screen.preview.featured")})}),(0,n.jsx)("div",{className:c()("bg-primary flex h-full flex-col gap-y-4 border p-5",{"rounded-b-lg":r,"rounded-lg":!r,"border-feedback-error":i,"border-primary":!i}),children:t})]})},Content:function(e){var t=e.paywall,r=e.description,i=J().isEditing,o=t.web_paywall_price,a=i?t.display_name||(0,g.t)("paywalls.lock_screen.preview.empty_block.name"):t.display_name,s=function(e){var t=new URL("".concat((0,A.Sr)()).concat(e.checkout_path));t.searchParams.set("price_id",o.id),window.open(t,"_blank")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:c()("flex flex-col gap-y-5 pb-5",{"border-primary border-b":!!r}),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(x.Z.LabelLg,{truncate:!0,children:a}),(0,n.jsx)(W,{price:o,currency:t.currency})]}),(0,n.jsx)("div",{children:(0,n.jsx)(I.z,{className:"h-[2.15rem] w-36",variant:"primary",type:"button",onClick:function(){return s(t)},children:(0,g.t)("join")})})]}),r&&(0,n.jsx)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:(0,n.jsx)(x.Z.BodySm,{color:c()({"text-lightest":i&&!t.description}),children:(0,n.jsx)("span",{className:"whitespace-pre-wrap",children:r})})})]})},MobileContent:function(e){var t=e.paywall,r=e.description,i=J().isEditing,o=t.mobile_paywall_price,a=i?t.display_name||(0,g.t)("paywalls.lock_screen.preview.empty_block.name"):t.display_name,s=function(e){var t=new URL("".concat((0,A.Sr)()).concat(e.checkout_path));t.searchParams.set("price_id",o.id),window.open(t,"_blank")};return(0,n.jsxs)("div",{className:c()("flex flex-col gap-y-5"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(x.Z.LabelLg,{truncate:!0,children:a}),(0,n.jsx)(W,{price:o,currency:t.currency})]}),r&&(0,n.jsx)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:(0,n.jsx)(x.Z.BodySm,{color:c()({"text-lightest":i&&!t.description}),children:(0,n.jsx)("span",{className:"whitespace-pre-wrap",children:r})})}),(0,n.jsx)("div",{children:(0,n.jsx)(I.z,{className:"h-[2.15rem] w-36",variant:"primary",type:"button",onClick:function(){return s(t)},children:(0,g.t)("join")})})]})},ContentResolver:function(e){var t=(0,C.B)().previewMode,r=(0,N.h)(t)?K.Content:K.MobileContent;return(0,n.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}}),$=function(e){var t=e.desktopPreviewMode;return(0,n.jsx)(K,{desktopPreviewMode:t,children:(0,n.jsxs)(K.Body,{isHighlighted:!1,isError:!1,isEmpty:!0,children:[(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-y-2 border-b pb-4",children:[(0,n.jsx)(x.Z.LabelLg,{truncate:!0,children:(0,g.t)("paywalls.lock_screen.preview.empty_block.name")}),(0,n.jsx)(W,{price:null,currency:null})]}),(0,n.jsxs)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:[(0,n.jsx)(x.Z.BodySm,{color:"text-lightest",children:(0,g.t)("paywalls.lock_screen.preview.empty_block.description")}),(0,n.jsx)(I.z,{variant:"primary",type:"button",children:(0,g.t)("join")})]})]})})},X=function(){var e=(0,g.t)("terms_of_service"),t=(0,g.t)("privacy_policy"),r=(0,g.t)("separator_dot");return(0,n.jsx)(x.Z.LabelSm,{weight:"medium",children:[e,r,t].join(" ")})},Y=r(69288),ee=function(e){var t;return e.id&&(null==e||null==(t=e.web_paywall_price)?void 0:t.id)},et=function(e){var t;return e.id&&(null==e||null==(t=e.mobile_paywall_price)?void 0:t.id)},er={banner:d,description:y,call_to_action:f,lessons:P,legacy_lock_screen:S,paywalls:function(e){var t=e.paywalls,r=J(),i=r.paywallWithErrorsByIndex,o=r.isEditing,a=(0,C.B)().previewMode,s=(0,N.h)(a)?ee:et,l=t.some(function(e){return(0,Y.zh)(e)&&s(e)});if(!l&&!o)return null;if(!l&&o)return(0,n.jsx)("div",{className:c()("bg-primary flex w-full flex-col items-center"),children:(0,n.jsx)($,{desktopPreviewMode:(0,N.h)(a)})});var u=t.some(function(e){return e.paywall_highlighted});return(0,n.jsxs)("div",{className:c()("bg-primary flex w-full flex-col items-center gap-y-3"),children:[(0,n.jsx)(K,{desktopPreviewMode:(0,N.h)(a),children:t.filter(function(e){return s(e)||o}).map(function(e,t){return(0,n.jsx)(K.Body,{isHighlighted:e.paywall_highlighted,isError:!!i[t],isEmpty:!s(e),hasFavorites:u,children:(0,n.jsx)(K.ContentResolver,{paywall:e,description:o&&(0,N.h)(a)?e.description||(0,g.t)("paywalls.lock_screen.preview.empty_block.description"):e.description})},e.id)})}),(0,N.h)(a)?null:(0,n.jsx)(X,{})]})}},en=function(e){var t=e.block,r=void 0===t?{}:t,i=r.type,o=r.data,a=er[i];return(0,n.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o))};en.propTypes={block:o().shape({type:o().string,id:o().string,hidden:o().bool,data:o().object})}},80311:function(e,t,r){"use strict";r.d(t,{Z:()=>d});var n=r(85893),i=r(84326),o=r(64529),a=r(78931),s=r(50594),l=r(17075),c=r(86470),u=r(51943),d=function(e){var t=e.blocks,r=void 0===t?[]:t,d=e.previewMode,f=void 0===d?c.oF.DESKTOP:d;return Array.isArray(r)&&r.some(function(e){return!(null==e?void 0:e.hidden)})?(0,n.jsx)("div",{className:"bg-primary text-dark flex h-full flex-col gap-y-10",children:r.filter(function(e){return!e.hidden}).map(function(e){return(0,n.jsx)("div",{className:"pointer-events-none select-none",children:(0,n.jsx)(l.a,{block:e})},e.id)})}):(0,u.h)(f)?(0,n.jsx)(o.F.Body,{hasPaddingTopMobile:!1,children:(0,n.jsx)(a.R,{})}):(0,n.jsx)(s._.Page,{title:(0,i.t)(["spaces_directory","card","private"]),subtitle:(0,i.t)(["this_space_is_private_description"])})}},59849:function(e,t,r){"use strict";r.d(t,{i4:()=>f,oF:()=>c,sE:()=>d});var n=r(85893),i=r(67294),o=r(52293);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=Object.freeze({DESKTOP:"desktop",MOBILE:"mobile"}),u=(0,i.createContext)(null);u.displayName="FormBlocksContext";var d=function(){var e=(0,i.useContext)(u);if(!e)throw Error("useFormBlocks must be used within a FormBlocksProvider");return e},f=function(e){var t=e.children,r=e.name,a=void 0===r?"blocks":r,d=l((0,i.useState)(null),2),f=d[0],p=d[1],m=(0,o.Gc)().watch,b=(0,o.Dq)({name:a}),h=b.fields,y=b.update,v=b.replace,g=l((0,i.useState)(c.DESKTOP),2),_=g[0],x=g[1],j=m(a),w=h.map(function(e,t){return s({},e,j[t])}),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return -1;var t=w.find(function(t){return t.id===e});return t?w.indexOf(t):-1};return(0,n.jsx)(u.Provider,{value:{blocks:w,isEditingBlock:!!f,blockBeingEdited:f,getBlockIndex:O,removeBlockBeingEdited:function(){x("desktop"),p(null)},setBlockBeingEdited:p,toggleBlockHidden:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(r){var n=w.find(function(e){return e.id===r});if(n){var i=w.indexOf(n);-1!==i&&y(i,(e=s({},n),t=t={hidden:!n.hidden},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))}}},getBlockDataPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=O(e);return -1===t?"":"".concat(a,".").concat(t,".data")},replaceBlocks:function(e){return v(e)},previewMode:_,setPreviewMode:x},children:t})}},82331:function(e,t,r){"use strict";r.d(t,{B:()=>f,_:()=>p});var n=r(85893),i=r(67294),o=r(96486),a=r(55158),s=r(24869),l=r(59849),c=r(51943);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,i.createContext)({previewMode:"desktop",setPreviewMode:o.noop,isPreviewWindowOpen:!1,setPreviewWindowOpen:o.noop,isInAppEnabled:!1,isCommunityOnPlus:!1,shouldShowBrandedAppBanner:!0});d.displayName="PaywallBlockContext";var f=function(){return(0,i.useContext)(d)},p=function(e){var t,r=e.children,o=(0,s.E)().isCommunityOnPlus,f=(0,l.sE)(),p=f.previewMode,m=f.setPreviewMode,b=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,a.g)(),g=(0,i.useMemo)(function(){return(0,c.g)(p)&&o&&!v||(0,c.g)(p)&&!o},[c.g,p,o,v]);return(0,n.jsx)(d.Provider,{value:{previewMode:p,setPreviewMode:m,isPreviewWindowOpen:h,setPreviewWindowOpen:y,isInAppEnabled:v,isCommunityOnPlus:o,shouldShowBrandedAppBanner:g},children:r})}},51943:function(e,t,r){"use strict";r.d(t,{g:()=>o,h:()=>i});var n=r(59849),i=function(e){return e===n.oF.DESKTOP},o=function(e){return e===n.oF.MOBILE}},86470:function(e,t,r){"use strict";r.d(t,{Tw:()=>u,oF:()=>n.oF,sE:()=>n.sE});var n=r(59849),i=r(85893),o=r(45697),a=r.n(o),s=r(52293),l=r(59446),c=r(82331),u=function(e){var t,r,o=e.children,a=e.space,u=(0,l.z)(void 0===a?{}:a),d=(0,s.cI)({defaultValues:{lock_screen_blocks:u}});return(0,i.jsx)(s.RV,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={children:(0,i.jsx)(n.i4,{name:"lock_screen_blocks",children:(0,i.jsx)(c._,{children:o})})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};u.propTypes={children:a().node,space:a().object}},59446:function(e,t,r){"use strict";r.d(t,{z:()=>C,U:()=>P});var n,i,o=r(67294),a=r(96486),s=r(84326),l={type:"banner",hidden:!1,data:{heading:(0,s.t)("courses.lockscreen.default.banner_heading"),description:(0,s.t)("courses.lockscreen.default.banner_description"),button_label:(0,s.t)("courses.lockscreen.default.buy_now"),button_link:"",background_image:"",overlay_color:"#191B1F",heading_color:"#FFFFFF",text_color:"#FFFFFF",button_background_color:"#2B2E33",button_text_color:"#FFFFFF"}},c={type:"description",hidden:!1,data:{description_tiptap:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:(0,s.t)("courses.lockscreen.default.description")}]}]},sgids_to_object_map:{},inline_attachments:[]}},u={type:"lessons",hidden:!0,data:{sections:[]}},d={type:"call_to_action",hidden:!1,data:(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l.data),i=i={overlay_color:"#2C3341",heading:(0,s.t)("courses.lockscreen.default.call_to_action_heading"),description:(0,s.t)("courses.lockscreen.default.call_to_action_description")},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)},f={type:"paywalls",hidden:!1,data:{paywalls:[]}},p=[l,c,u,f,d];function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function h(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(){var e=["banner","description","paywalls","call_to_action"];return{event:y(e).concat(["legacy_lock_screen"]),basic:y(e).concat(["legacy_lock_screen"]),chat:y(e).concat(["legacy_lock_screen"]),course:y(e).concat(["lessons"])}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.post_type,i=e[void 0===n?"basic":n]||e.basic;return t.filter(function(e){return i.includes(e.type)})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.post_type,o=y(r);return(e[void 0===i?"basic":i]||e.basic).forEach(function(e,r){"legacy_lock_screen"!==e&&(o.some(function(t){return t.type===e})||(o=y(o.slice(0,r)).concat([t[e]],y(o.slice(r)))))}),o},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return e.some(function(e){return e.type===t.type})||e.push(t),e},[])},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=y(e),n=t.locked_page_heading,i=void 0===n?"":n,o=t.locked_page_description,a=void 0===o?{}:o,s=t.locked_button_label,l=void 0===s?"":s,c=t.locked_button_url,u=void 0===c?"":c,d=t.post_type,f=a.rendered_html_with_layout;return(i||l||u||(void 0===f?"":f))&&"course"!==(void 0===d?"basic":d)?r.some(function(e){return"legacy_lock_screen"===e.type})?r.map(function(e){return"legacy_lock_screen"===e.type?h(b({},e),{data:{locked_page_heading:i,locked_page_description:a,locked_button_url:u,locked_button_label:l}}):e}):(r.unshift({type:"legacy_lock_screen",hidden:!1,data:{locked_page_heading:i,locked_page_description:a,locked_button_url:u,locked_button_label:l}}),r.map(function(e){return"legacy_lock_screen"===e.type?e:h(b({},e),{hidden:!0})})):r},w=function(e){return e.map(function(e){return h(b({},e),{id:(0,a.uniqueId)("block_")})})},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.course_sections,n=void 0===r?[]:r,i=Array.isArray(n)?n:[];return e.map(function(e){return"lessons"!==e.type?e:h(b({},e),{data:h(b({},e.data),{sections:i})})})},S=function(e){var t=e.space,r=void 0===t?{}:t,n=r.lock_screen_blocks,i=void 0===n?[]:n,o=Array.isArray(i)&&i.length>0?i:[];return O(w(j(x(g(v(),o,r)),r)),r)},k=function(e){var t=e.space,r=void 0===t?{}:t,n=r.lock_screen_blocks,i=void 0===n?[]:n,o=Array.isArray(i)&&i.length>0?i:p,a=v(),s=g(a,o,r);return O(w(j(x(_(a,{banner:l,description:c,call_to_action:d,lessons:u,paywalls:f},s,r)),r)),r)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMemo)(function(){return S({space:e})},[e])},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMemo)(function(){return k({space:e})},[e])}},60060:function(e,t,r){"use strict";r.d(t,{v:()=>a});var n=r(85893),i=r(84326),o=r(57363),a=function(e){var t=e.isSpaceMember,r=e.isDripped,a=e.isCompleted,s="lock",l="lesson_locked";return t&&r&&(s=a?"16-checked-green":"16-unchecked",l=a?"lesson_completed":"lesson_incomplete"),(0,n.jsx)(o.JO,{className:"text-default flex-none",size:16,type:s,"aria-label":(0,i.t)(["courses.lessons",l])})}},94178:function(e,t,r){"use strict";r.d(t,{V:()=>C});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(24512);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.reduce(function(e,t){var r,n=(r=t.split(":").reverse(),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(r,3)||function(e,t){if(e){if("string"==typeof e)return l(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(r,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=n[2];return e+(parseInt(i)+60*parseInt(o)+3600*parseInt(null!=a?a:0))},0);return{hours:Math.floor(t/3600),minutes:Math.floor(t%3600/60),seconds:t%60}},u=function(e){var t=e.hours,r=e.minutes;return t>0?(0,a.t)("courses.summary.content.hr_min_duration",{hours:t,minutes:r}):(0,a.t)("courses.summary.content.min_duration",{minutes:r})},d=r(39905),f=r(41553),p=r(94184),m=r.n(p),b=r(57363),h=r(70442),y=r(52928),v=r(60060),g=r(65119),_=r(13532),x=r(80171),j=function(e){var t,r=e.lesson,i=void 0===r?{}:r,o=e.isMember,a=e.section,l=(0,h.UO)(),c=null==l?void 0:l.spaceSlug,u=(0,s.d)(),d=u.lessonLabel,p=u.sectionLabel;return(0,n.jsx)(y.OL,{onClick:function(e){o||e.preventDefault()},to:_.H4.showLesson({spaceSlug:c,lessonId:i.id,sectionId:a.id}),className:m()("flex w-full items-center space-x-2 p-4",o?"cursor-pointer":"cursor-default"),children:(0,n.jsxs)(x.T,{content:(0,g.t)({drippedAt:a.dripped_at,dripDelay:a.drip_delay,needsToCompletePreviousLesson:i.needs_to_complete_previous_lesson,lessonLabel:d,sectionLabel:p}),placement:"bottom-start",disabled:i.is_dripped,arrow:!1,className:"flex w-full items-center",dataTestId:"lesson-content-tittle",children:[(0,n.jsx)(v.v,{isDripped:i.is_dripped,isSpaceMember:o,isCompleted:i.completed}),(0,n.jsx)("div",{className:"ml-3 flex-1",children:(0,n.jsx)(f.Z.BodySm,{children:i.name})}),(null==(t=i.featured_media)?void 0:t.duration)&&(0,n.jsx)(f.Z.BodySm,{children:i.featured_media.duration})]})},i.id)};j.propTypes={lesson:o().object,isMember:o().bool,section:o().object};var w=function(e){var t=e.section,r=void 0===t?{}:t,i=e.isMember,o=e.hasBorder,l=e.open,d=e.onToggle,p=(0,s.d)().lessonLabel,h=c(r.lessons.map(function(e){var t;return null==(t=e.featured_media)?void 0:t.duration}).filter(Boolean)),y=(0!==h.hours||0!==h.minutes)&&" ".concat((0,a.t)("separator_dot")," ").concat(u(h)),v=r.lessons.length;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{type:"button",onClick:d,className:m()("bg-secondary flex w-full justify-between p-4 text-left",{"border-primary border-b":l||void 0!==o&&o}),children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(b.JO,{type:l?"16-chevron-down":"16-chevron-right",className:"mr-2",size:16}),(0,n.jsx)(f.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:r.name})]}),(0,n.jsxs)(f.Z.LabelSm,{children:[(0,a.t)("courses.labels.".concat(p),{count:v}),y]})]}),l&&(0,n.jsx)("div",{className:"divide-primary divide-y",children:r.lessons.map(function(e){return(0,n.jsx)(j,{lesson:e,isMember:i,section:r},e.id)})})]},r.id)};w.propTypes={section:o().object,isMember:o().bool,hasBorder:o().bool,areSectionsOpened:o().bool};var O=r(67294);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){var t,r=e.sections,n=(t=(0,O.useState)(Object.fromEntries(r.map(function(e){return[e.id,!0]}))),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1];return{hasExpandedSections:function(){return Object.values(i).some(Boolean)},isSectionExpanded:function(e){return i[e.id]},toggleSectionExpanded:function(e){o(function(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){k(e,t,r[t])})}return e}({},t),n=null!=(n=k({},e.id,!t[e.id]))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r})},expandAllSections:function(){o(Object.fromEntries(r.map(function(e){return[e.id,!0]})))},collapseAllSections:function(){o(Object.fromEntries(r.map(function(e){return[e.id,!1]})))}}},C=function(e){var t=e.isMember,r=void 0!==t&&t,i=e.sections,o=void 0===i?[]:i,l=(0,s.d)(),p=l.lessonLabel,m=l.sectionLabel,b=P({sections:o}),h=b.hasExpandedSections,y=b.isSectionExpanded,v=b.toggleSectionExpanded,g=b.expandAllSections,_=b.collapseAllSections;if((null==o?void 0:o.length)===0)return null;var x=o.length,j=o.reduce(function(e,t){return e+t.lessons.length},0),O=c(o.map(function(e){return e.lessons}).flat().map(function(e){var t;return null==(t=e.featured_media)?void 0:t.duration}).filter(Boolean)),S=(0!==O.hours||0!==O.minutes)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)("separator_dot")}),(0,n.jsx)(f.Z.LabelSm,{children:u(O)})]});return(0,n.jsxs)("div",{className:"flex w-full flex-col","data-testid":"summary-course-content",children:[(0,n.jsx)(f.Z.TitleSm,{as:"h2",weight:"semibold",color:"text-darkest",children:(0,a.t)("courses.summary.content.title")}),(0,n.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,n.jsxs)("div",{className:"text-dark flex items-center space-x-1",children:[(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)("courses.labels.".concat(m),{count:x})}),(0,n.jsx)("span",{children:(0,a.t)("separator_dot")}),(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)("courses.labels.".concat(p),{count:j})}),S]}),(0,n.jsx)(d.z,{className:"!p-0",variant:"plain",onClick:function(){h()?_():g()},children:(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)(["courses.summary.content",h()?"collapse":"expand"],{all_sections:(0,a.t)(["courses.summary.content.all_sections",m])})})})]}),(0,n.jsx)("div",{className:"border-primary overflow-hidden rounded-md border",children:o.map(function(e,t){var i=t===x-1;return(0,n.jsx)(w,{section:e,isMember:r,hasBorder:!i,open:y(e),onToggle:function(){return v(e)},lessonLabel:p},e.id)})})]})};C.propTypes={isMember:o().bool,sections:o().arrayOf(o().object)}},85544:function(e,t,r){"use strict";r.d(t,{$:()=>a});var n=r(88767),i=r(93199),o=r(13532),a=function(e){var t=e.space,r=e.options,a=o.av.courses.settings({courseId:t.id});return(0,n.useMutation)(function(e){return(0,i.aU)(a,e)},void 0===r?{}:r)};r(60589)},25878:function(e,t,r){"use strict";r.d(t,{l:()=>j});var n=r(85893),i=r(67294),o=r(45697),a=r.n(o),s=r(94184),l=r.n(s),c=r(96486),u=r(84326),d=r(88466),f=r(28120),p=r(17617),m=r(70434),b=r(28892),h=r(26950),y=r(57363),v=function(e){var t=e.onClick;return(0,n.jsx)("a",{href:"#create-space",className:"block-header__action action--add-space","data-testid":"create-space",onClick:t,children:(0,n.jsx)(y.JO,{type:"circle-add"})})};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function x(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var j=function(e){var t,r=e.spaceGroupId,o=e.type,a=e.size,s=void 0===a?"md":a,y=e.useDrawerFlow,j=e.children,w=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["spaceGroupId","type","size","useDrawerFlow","children"]),O=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=O[0],k=O[1],P=(0,p.a7)(),C=function(){k(!1)},N=function(e){e.preventDefault(),k(!0)};return(0,n.jsxs)(n.Fragment,{children:[!o&&(0,n.jsx)("a",x(_({href:"#create-space",onClick:N},w),{children:j})),"icon"===o&&(P?(0,n.jsx)(m.Y,{content:(0,u.t)("create_a_space"),delay:0,arrow:!0,size:"regular",animation:"fade",children:(0,n.jsx)(v,{onClick:N})}):(0,n.jsx)(v,{onClick:N})),"link"===o&&(0,n.jsx)("button",x(_({type:"submit",className:l()({"create-space-btn--md":"md"===s,"create-space-btn--lg":"lg"===s}),onClick:N},w),{children:(0,u.t)("create_a_space")})),y?(0,n.jsx)(b.d,{hideHeader:!0,open:S,noWrapperPadding:!0,children:(0,n.jsx)(f._,{open:S,onClose:C,currentSpaceGroupId:r})}):(0,n.jsx)(h.u,{variant:"fullscreen",title:(0,u.t)("create_a_space"),show:S,onClose:c.noop,hideCloseButton:!0,hideTitle:!0,children:(0,n.jsx)(d.J,{space_group_id:r,onModalClose:C})})]})};j.propTypes={spaceGroupId:a().number.isRequired,type:a().oneOf(["link","icon"]),size:a().oneOf(["md","lg"]),useDrawerFlow:a().bool,children:a().node}},44191:function(e,t,r){"use strict";r.d(t,{F:()=>i});var n=r(34397),i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.shouldFilterRestrictedPages,i=(0,n.i)({initialPage:1,perPage:1e3,query:"",status:"published"}),o=i.data,a=i.isLoading,s=i.error,l=null!=(e=null==o?void 0:o.pages.flatMap(function(e){return e.records}))?e:[];return{pages:void 0!==r&&r?l.filter(function(e){var t,r;return!(null==(t=e.setting)?void 0:t.password_protection_enabled)&&(null==(r=e.setting)?void 0:r.access_type)==="open_access"}):l,isLoading:a,error:s}}},60484:function(e,t,r){"use strict";r.d(t,{Jr:()=>f,Nn:()=>d});var n=r(84326);r(60589);var i="!h-6 !w-6 !text-dark",o="spaces.form.edit.customize.layout",a=[{label:(0,n.t)([o,"feed"]),icon:{type:"feed-thumbnail",viewBox:"0 0 75 78"},value:"posts"},{label:(0,n.t)([o,"list"]),icon:{type:"list-thumbnail",viewBox:"0 0 75 77"},value:"list"},{label:(0,n.t)([o,"card"]),icon:{type:"card-thumbnail",viewBox:"0 0 75 77"},value:"cards"}],s=[{label:(0,n.t)([o,"feed"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:i},value:"posts"},{label:(0,n.t)([o,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:i},value:"list"},{label:(0,n.t)([o,"card"]),icon:{type:"20-card-view-mobile",viewBox:"0 0 25 24",className:i},value:"cards"}],l=[{label:(0,n.t)([o,"thumbnail"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:i},value:"thumbnail"},{label:(0,n.t)([o,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:i},value:"posts"},{label:(0,n.t)([o,"calendar"]),icon:{type:"support-widget-calendar",viewBox:"0 0 24 24",className:i},value:"calendar"}],c=[{label:(0,n.t)([o,"thumbnail"]),icon:{type:"event-layout-thumbnail",viewBox:"0 0 118 84"},value:"thumbnail"},{label:(0,n.t)([o,"list"]),icon:{type:"event-layout-list",viewBox:"0 0 118 90"},value:"posts"},{label:(0,n.t)([o,"calendar"]),icon:{type:"event-layout-calendar",viewBox:"0 0 120 90"},value:"calendar"}],u=[{label:(0,n.t)([o,"feed"]),icon:{type:"20-feed",viewBox:"-2 -1 25 24",className:i},value:"feed"},{label:(0,n.t)([o,"masonry"]),icon:{type:"20-masonry",viewBox:"-2 -1 25 24",className:i},value:"masonry"},{label:(0,n.t)([o,"grid"]),icon:{type:"20-grid",viewBox:"-2 -1 25 24",className:i},value:"grid"}],d=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?c:"image"===n?u:a).filter(function(e){return!r.includes(e.value)})},f=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?l:"image"===n?u:s).filter(function(e){return!r.includes(e.value)})}},99145:function(e,t,r){"use strict";r.d(t,{$o:()=>d,Hr:()=>l,fj:()=>c});var n=r(96486);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(e){var t=e.visible_tabs;return Object.keys(t).filter(function(e){return t[e]})},c=function(e){var t;return a(o({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","moderator_ids"])),{notification_type:"chat"===e.post_type?e.all_notifications_enabled?"all":e.mention_notifications_enabled?"mentions":e.notifications_off?"never":void 0:s("all"==e.default_notification_setting?["default_notification_setting"]:[]).concat(s("all"==e.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),s("all"==e.default_mobile_notification_setting?["default_mobile_notification_setting"]:[])),show_right_sidebar:!e.hide_right_sidebar,allow_members_to_create_posts:!e.is_post_disabled,allow_members_to_add_others:!e.prevent_members_from_adding_others,allow_post_title:!e.hide_post_settings,allow_cover_images:!e.disable_member_post_covers,show_sorting:!e.hide_sorting,show_to_logged_out_visitors:!e.is_hidden,visible_tabs:l(e),locked_page_description:null==(t=e.locked_page_description)?void 0:t.trix_html})},u=function(e){var t={};return e.forEach(function(e){return t[e]=!0}),t},d=function(e){var t,r=e.show_right_sidebar,i=e.allow_members_to_create_posts,s=e.allow_members_to_add_others,l=e.allow_post_title,c=e.allow_cover_images,d=e.show_to_logged_out_visitors,f=e.meta_tag_attributes,p=e.notification_type,m=e.visible_tabs,b=e.show_sorting;return a(o(a(o({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","show_right_sidebar","allow_members_to_create_posts","allow_members_to_add_others","allow_post_title","allow_cover_images","show_to_logged_out_visitors","customize_lock_screen","policies","is_space_owner","is_space_member","meta_tag_attributes","show_sorting","moderator_ids"])),{hide_right_sidebar:!r,is_post_disabled:!i,prevent_members_from_adding_others:!s,hide_post_settings:!l,disable_member_post_covers:!c,is_hidden:!d,hide_sorting:!b,visible_tabs:u(m)}),{default_notification_setting:(t="chat"===e.post_type?p.includes("all")?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:p.includes("mentions")?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:p).includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:t.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:t.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:t.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:t.includes("default_mention_in_app_notification_setting")?"all":"never"}),{meta_tag_attributes:o({},(0,n.omit)(f,"opengraph_image_id"))})}},27400:function(e,t,r){"use strict";r.d(t,{c:()=>er});var n=r(85893),i=r(67294),o=r(84326),a=r(41342),s=r(60878),l=r(45697),c=r.n(l),u=r(70442),d=r(51630),f=r(57363),p=r(28892),m=r(60589),b=r(22270),h=r(39905),y=r(51466),v=r(94184),g=r.n(v),_=r(52293),x=r(61641),j=r(5116),w=r(60484),O=function(e){var t,r,a,s=e.space,l=e.isShownInRailBar,c=(0,_.Gc)(),u=c.watch,d=c.setValue,f="open"!==u("visibility"),p=u("visible_tabs"),b=u("default_tab"),h=u("show_tab_bar"),v=u("display_view"),O=u("locked_page_description"),S=(0,m.H3)(s),k=u("hide_member_sidebar"),P=null==p?void 0:p.includes("posts");return p.includes(b)||d("default_tab",p[0]),p.length>1&&!h&&d("show_tab_bar",!0),f&&(null==s||null==(t=s.locked_page_description)?void 0:t.trix_html)&&!O&&d("locked_page_description",null==s||null==(a=s.locked_page_description)?void 0:a.trix_html),(0,i.useEffect)(function(){p.includes("members")?d("hide_member_sidebar",!0):d("hide_member_sidebar",!1)},[s]),(0,i.useEffect)(function(){S&&(k?d("visible_tabs",["posts","members"]):d("visible_tabs",["posts"]))},[k,S]),(0,n.jsxs)("div",{className:g()({"edit-space__container":!(void 0!==l&&l)}),children:[(0,m.H3)(s)&&(0,n.jsxs)(n.Fragment,{children:[P&&(0,n.jsx)(y.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,n.jsx)(y.l.RadioGroup,{fullWidth:!1,labelOutside:!0,options:(0,w.Nn)({postType:s.post_type})})}),"cards"!==v&&(0,n.jsx)(y.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.right_sidebar"),name:"show_right_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(y.l.ToggleSwitch,{variant:"small"})})]}),!(0,m.Ug)(s)&&(0,n.jsx)(y.l.Item,{inline:!0,hideBorder:!0,label:(0,o.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:(0,o.t)("spaces.form.edit.customize.cover_image_description"),children:(0,n.jsx)(x.a,{name:"cover_image",aspectRatio:43/9})}),(0,m.Ug)(s)&&(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(y.l.Item,{name:"chat_room_description",hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.add_description"),placeholder:(0,o.t)("spaces.form.edit.customize.description_placeholder"),variant:"extra-bottom-margin",children:(0,n.jsx)(y.l.TextArea,{})})}),!(0,m.Ug)(s)&&!(0,m.qy)(s)&&(0,n.jsx)(y.l.Item,{inline:!0,hideBorder:!0,label:(0,o.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,o.t)("spaces.form.edit.customize.thumbnail_image_description"),children:(0,n.jsx)(x.a,{name:"thumbnail_image",aspectRatio:16/9})}),S&&(0,n.jsx)(y.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.show_sidebar_members_block"),name:"hide_member_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(y.l.ToggleSwitch,{variant:"small"})}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.l.Item,{name:"customize_lock_screen",inline:!0,hideBorder:!0,hideDescription:!0,tooltipText:(0,o.t)("spaces.form.edit.customize.customize_lock_screen.description"),label:(0,o.t)("spaces.form.edit.customize.customize_lock_screen.label")}),(0,n.jsxs)("div",{className:"customize-lock-screen",children:[(0,n.jsx)(y.l.Input,{name:"locked_page_heading",placeholder:(0,o.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.title")}),(0,n.jsx)("div",{className:"trix-v2",children:(0,n.jsx)(j.O,{value:O,className:"locked-page-description",id:"locked_page_description",name:"locked_page_description",placeholder:(0,o.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.description")},null==s||null==(r=s.locked_page_description)?void 0:r.trix_html)}),(0,n.jsx)(y.l.Input,{name:"locked_button_label",placeholder:(0,o.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.button_text")}),(0,n.jsx)(y.l.Input,{name:"locked_button_url",placeholder:(0,o.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.button_link")})]})]})]})};O.propTypes={space:c().object.isRequired,isShownInRailBar:c().bool};var S=r(7998),k=r(90477),P=r(28865),C=r(42236),N=function(){return(0,n.jsxs)("div",{className:"edit-space__container",children:[(0,n.jsx)(S.Z,{}),(0,n.jsx)(C.Z,{}),(0,n.jsx)(P.V,{}),(0,n.jsx)(k.Z,{})]})},A=r(40432),I={DETAILS:"Details",CUSTOMIZE:"Customize",OPTIONS:"Options"};let E=function(e){var t=e.activeTab,r=e.setActiveTab,i=(0,_.Gc)(),o=i.reset,a=!!Object.keys(i.formState.dirtyFields).length;return(0,n.jsx)(A.m,{wrapperClassName:"px-6",controlled:!0,activeTab:t,onClick:function(e){a?confirm("Are you sure you want to navigate away from this page?\nAll your unsaved changes will be lost.")&&(o(),r(e)):r(e)},options:Object.values(I).map(function(e){return{label:e}}),variant:"underline"})};var T=r(67288),L=function(){return(0,n.jsx)(T.z,{title:(0,o.t)("spaces.form.edit.options.labels.label"),children:(0,n.jsx)("div",{className:"edit-space__container",children:(0,n.jsx)(y.l.Item,{hideBorder:!0,label:(0,o.t)("spaces.form.edit.options.labels.pinned_posts.label"),description:(0,o.t)("spaces.form.edit.options.labels.pinned_posts.description"),name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,n.jsx)(y.l.Input,{placeholder:(0,o.t)("spaces.form.pinned_posts")})})})})};let D=function(){return(0,n.jsx)(T.z,{title:o.Z.t("spaces.form.edit.options.moderators.label"),children:(0,n.jsx)("div",{className:"edit-space__container",children:(0,n.jsx)(y.l.Item,{variant:"extra-bottom-margin",label:o.Z.t("spaces.form.edit.options.moderators.space_moderators.label"),description:o.Z.t("spaces.form.edit.options.moderators.space_moderators.description"),name:"moderator_ids",hideBorder:!0,children:(0,n.jsx)(y.l.CommunityMemberSelect,{placeholder:o.Z.t("spaces.form.edit.options.moderators.space_moderators.placeholder"),variant:"tags",direction:"down",valueField:"id",excludeAdmins:!0})})})})};var M=r(29378);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t,r=e.space,i=[];(0,m.V5)(r)&&(i=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,m.Ug)(r)&&(i=["chat_room_show_history"]),(0,m.H3)(r)&&(i=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]);var s=(0,a.wh)().currentCommunity;return(0,M.v)(s)||(0,m.Ug)(r)||(i=((function(e){if(Array.isArray(e))return R(e)})(t=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["show_to_logged_out_visitors"])),(0,n.jsx)(T.z,{title:o.Z.t("spaces.form.edit.options.permissions.label"),children:(0,n.jsx)("div",{className:"edit-space__container",children:i.map(function(e){return(0,n.jsx)(y.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:o.Z.t("spaces.form.edit.options.permissions.".concat("allow_members_to_create_posts"!==e?(0,m.V5)(r)?"allow_members_to_create_events":"allow_members_to_create_posts":e)),name:e,children:(0,n.jsx)(y.l.ToggleSwitch,{variant:"small"})},e)})})})};B.propTypes={space:c().object};var F=r(31304),z=r.n(F),U=r(3697),Z=r(57462),G=r(6394);let q=function(e){var t=e.setImageToDelete,r=[{name:"slug",label:o.Z.t("spaces.form.edit.options.seo.slug"),description:o.Z.t("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return z()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:o.Z.t("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:o.Z.t("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:o.Z.t("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:o.Z.t("spaces.form.edit.options.seo.opengraph_description")}],i=(0,_.Gc)().getValues;return(0,n.jsx)(T.z,{title:o.Z.t("spaces.form.edit.options.seo.label"),children:(0,n.jsxs)("div",{className:"edit-space__container",children:[r.map(function(e){var t=e.name,r=e.label,i=e.description,o=e.transformValue;return(0,n.jsx)(y.l.Item,{hideBorder:!0,hideDescription:!i,label:r,name:t,transformValue:o,description:i,variant:"extra-bottom-margin",children:(0,n.jsx)(y.l.Input,{})},t)}),(0,n.jsxs)("div",{className:"edit-space__image-upload",children:[(0,n.jsx)(y.l.Label,{hideBorder:!0,label:o.Z.t("spaces.form.edit.options.seo.opengraph_image.label")}),(0,n.jsx)(G.D,{name:"meta_tag_attributes[opengraph_image]",alt:"",className:"relative",showAddCoverBtn:!0,aspectRatio:U.pI.OPEN_GRAPH,changeImageText:o.Z.t("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){return t(i("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,n.jsx)(Z.Z,{title:o.Z.t("spaces.form.edit.options.seo.opengraph_image.add"),description:o.Z.t("spaces.form.edit.options.seo.opengraph_image.description")})})]})]})})};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let H=function(e){var t,r=e.space,i={LATEST:{label:(0,o.t)("latest"),value:"latest"},OLDEST:{label:(0,o.t)("oldest"),value:"oldest"},POPULAR:{label:(0,o.t)("popular"),value:"popular"},LIKES:{label:(0,o.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,o.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,o.t)("alphabetical"),value:"alphabetical"}},a=[{name:"default_comment_sort",options:[i.LATEST,i.OLDEST]}];return(0,m.V5)(r)||(a=((function(e){if(Array.isArray(e))return V(e)})(t=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return V(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{name:"default_sort",options:Object.values(i)},{name:"default_member_sort",options:[i.LATEST,i.OLDEST]}])),(0,n.jsx)(T.z,{title:(0,o.t)("spaces.form.edit.options.sort.label"),children:(0,n.jsxs)("div",{className:"edit-space__container",children:[(0,n.jsx)(y.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",children:(0,n.jsx)(y.l.ToggleSwitch,{variant:"small"})}),a.map(function(e){var t=e.name,r=e.options;return(0,n.jsx)(y.l.Item,{hideBorder:!0,label:(0,o.t)("spaces.form.edit.options.sort.".concat(t,".label")),description:(0,o.t)("spaces.form.edit.options.sort.".concat(t,".description")),name:t,variant:"extra-bottom-margin",children:(0,n.jsx)(y.l.SelectNative,{options:r})},t)})]})})};var W=function(e){var t=e.setImageToDelete,r=e.space;return(0,n.jsxs)("div",{className:"edit-space__container edit-space__container--no-padding",children:[!(0,m.Ug)(r)&&(0,n.jsx)(D,{}),(0,n.jsx)(B,{space:r}),(0,m.H3)(r)&&(0,n.jsx)(L,{}),(0,n.jsx)(q,{setImageToDelete:t}),!(0,m.Ug)(r)&&(0,n.jsx)(H,{space:r})]})};W.propTypes={space:c().object,setImageToDelete:c().func};var Q=r(99145);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(e){var t=e.spaceId,r=e.spaceGroupId,l=e.refetch,c=e.refreshSidebarSpaces,v=(0,b.m)(),g=v.fetchSpace,_=v.space,x=(0,m.fO)(),j=$((0,i.useState)(!1),2),w=j[0],S=j[1],k=$((0,i.useState)(I.DETAILS),2),P=k[0],C=k[1],A=$((0,i.useState)(null),2),T=A[0],L=A[1],D=(0,a.wh)().currentCommunityMember;(0,i.useEffect)(function(){g(t)},[]);var M=(0,b.m)().updateSpace,R=(0,s.pm)(),B=(0,u.k6)(),F=(0,i.useMemo)(function(){return _&&(0,Q.fj)(_)},[_]);return _&&F?(0,n.jsxs)(y.l,{onSubmit:function(e,r){var n,i=r.reset;return(n=function(){var r,n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),S(!0),r=(0,Q.$o)(e),!T)return[3,2];return[4,d.UK.deleteOpenGraphImage(T)];case 1:a.sent(),L(!1),a.label=2;case 2:return[4,M(r,t)];case 3:return n=a.sent(),[4,Promise.all([l(),c()])];case 4:return a.sent(),i((0,Q.fj)(n)),B.push(x(n,D)),R.success(o.Z.t("spaces.form.edit.success")),[3,7];case 5:return a.sent(),R.error(o.Z.t("spaces.form.edit.error")),[3,7];case 6:return S(!1),[7];case 7:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){K(o,r,i,a,s,"next",e)}function s(e){K(o,r,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:F,className:"form__wrapper edit-space edit-space__form",children:[(0,n.jsx)(E,{activeTab:P,setActiveTab:C,space:_}),function(){switch(P){case I.DETAILS:return(0,n.jsx)(N,{currentSpaceGroup:r});case I.CUSTOMIZE:return(0,n.jsx)(O,{space:_});case I.OPTIONS:return(0,n.jsx)(W,{space:_,setImageToDelete:L})}}(),(0,n.jsx)(p.d.Footer,{sticky:!0,children:(0,n.jsx)(h.z,{disabled:w,type:"submit",full:!0,variant:"primary",children:w?o.Z.t("spaces.form.edit.apply_changes_button_saving"):o.Z.t("spaces.form.edit.apply_changes_button")})})]}):(0,n.jsx)("div",{className:"edit-space__loader",children:(0,n.jsx)(f.JO,{type:"loader"})})};X.propTypes={spaceId:c().string.isRequired,spaceGroupId:c().string.isRequired,refetch:c().func.isRequired,refreshSidebarSpaces:c().func.isRequired};var Y=function(e){return(0,n.jsx)(s.VW,{children:(0,n.jsx)(a.Br,{children:(0,n.jsx)(a.CM,{children:(0,n.jsx)(a.BD,{children:(0,n.jsx)(X,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})})})};function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var er=function(e){var t,r,a=et((0,i.useState)(!1),2),s=a[0],l=a[1],c=et((0,i.useState)(!1),2),u=c[0],d=c[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{type:"submit",onClick:function(){return l(!0)},className:"edit-space-button",children:o.Z.t("spaces.form.edit.edit_button_label")}),(0,n.jsx)(p.d,{noWrapperPadding:!0,fixedHeader:!0,maskClosable:!1,title:o.Z.t("spaces.form.edit.edit_drawer_header"),open:s,onClose:function(){l(!1),u&&window.location.reload()},children:(0,n.jsx)(Y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={open:s,setSubmitted:d},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})]})}},94612:function(e,t,r){"use strict";r.d(t,{r:()=>D});var n=r(85893),i=r(45697),o=r.n(i),a=r(58533),s=r(84326),l=r(20624),c=r(56060),u=r(41553),d=r(57363),f=function(e){var t=e.onAdd;return(0,n.jsxs)("button",{type:"button",className:"hover:bg-secondary flex h-12 w-full flex-row items-center rounded-lg",onClick:t,children:[(0,n.jsx)("div",{className:"bg-secondary ml-4 mr-3 inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-600",children:(0,n.jsx)(d.JO,{type:"16-account",size:16})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)("spaces.form.edit.members.add_members")})]})},p=r(17617),m=r(41342),b=r(78456),h=r(43544),y=function(e){var t=e.member,r=e.cellVariant,i=e.onEdit,o=e.onRemove,a=e.tableVariant,l=t.id,u=(0,m.wh)().currentCommunityMember,f=(0,b.vb)(u);return(0,n.jsx)(c.pj,{variant:r,className:"w-12 pr-4 text-right",children:(0,n.jsxs)(h.Lt,{direction:"bottom-end",button:(0,n.jsx)(h.Lt.MenuButton,{className:"invisible group-hover:visible",children:(0,n.jsx)(d.JO,{type:"20-menu-dots-horizontal",size:20,className:"text-dark"})}),children:[f&&(0,n.jsx)(h.Lt.Item,{children:(0,n.jsx)(h.Lt.ItemLink,{type:"button",onClick:function(){return i(t)},children:(0,s.t)("spaces.form.edit.members.edit_member")})}),(0,n.jsx)(h.Lt.Item,{onClick:function(){return o(l)},children:(0,n.jsx)(h.Lt.ItemLink,{type:"button",children:"space-group-members"==a?(0,s.t)("space_groups.form.edit.members.remove_from_space_group"):(0,s.t)("spaces.form.edit.members.remove_from_space")})})]})})},v=r(34870),g=function(e){var t,r=e.member,i=e.cellVariant;if(e.hideColumn)return null;var o=(null==r||null==(t=r.currentSpaceMember)?void 0:t.created_at)?(0,v.w)({dateTime:new Date(r.currentSpaceMember.created_at),format:"long_date"}):"";return(0,n.jsx)(c.pj,{variant:i,className:"",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-selector-active",children:o})})},_=function(e){var t=e.member,r=e.cellVariant;if(e.hideColumn)return null;var i=(null==t?void 0:t.lastActive)?(0,v.w)({dateTime:new Date(t.lastActive),format:"long_date"}):"";return(0,n.jsx)(c.pj,{variant:r,className:"",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-selector-active",children:i})})},x=r(60589),j=r(60983),w=r(98363),O=r(24330),S=function(e){var t=e.member,r=t.id,i=t.name,o=t.email,a=t.avatarUrl,l=t.role,d=t.publicUid,f=e.cellVariant,p=(0,m.L2)();return(0,n.jsx)(c.pj,{variant:f,className:"w-80",children:(0,n.jsxs)("div",{className:"inline-flex items-center",children:[(0,n.jsx)(j.C,{communityMemberId:r,name:i,publicUid:d,avatarURL:a,children:(0,n.jsx)(w.s,{name:i,src:a,size:"10"})}),(0,n.jsxs)("div",{className:"w-60 pl-3",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(u.Z.LabelSm,{truncate:!0,weight:"semibold",color:"text-selector-active",children:i}),(0,x.H)(null==p?void 0:p.data)&&(0,b.RN)(l)&&(0,n.jsx)(O.g,{label:(0,s.t)("spaces.form.edit.members.waitlist"),square:!0})]}),(0,n.jsx)("div",{className:"w-60 truncate",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-default",children:o})})]})]})})},k=r(78793),P=function(e){var t=e.cellVariant,r=e.member,i=e.onRoleChange,o=r.role,a=r.id;return(0,n.jsx)(c.pj,{variant:t,className:"w-32",children:(0,n.jsx)(k.D,{id:a,role:o,onRoleChange:i})})},C=function(e){var t,r,i,o=e.member,a=e.cellVariant,s=e.hideColumn,l=null==o||null==(t=o.currentSpaceMember)?void 0:t.community_member_paywall_content_granted;if(s)return null;var f=(null==l||null==(r=l.paywall)?void 0:r.name)||(null==l||null==(i=l.paywall)?void 0:i.display_name),p=!!f,m=(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(d.JO,{type:"20-payments",className:"text-selector-active !w-4",size:20}),(0,n.jsx)("div",{className:"w-36 truncate",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-selector-active",children:f})})]});return(0,n.jsx)(c.pj,{variant:a,className:"",children:p?m:"-"})},N=function(e){var t=e.member,r=e.onRemove,i=e.onEdit,o=e.onRoleChange,a=e.cellVariant,s=void 0===a?"no-padding":a,l=e.tableVariant,u=e.columns,d=(0,p.kK)();return(0,n.jsxs)(c.SC,{className:"border-primary hover:bg-secondary group h-14 border-b",children:[(0,n.jsx)(S,{member:t,cellVariant:s}),(0,n.jsx)(P,{member:t,cellVariant:s,onRoleChange:o}),(0,n.jsx)(g,{member:t,cellVariant:s,hideColumn:!u.joinedAt||d}),(0,n.jsx)(C,{member:t,cellVariant:s,hideColumn:!u.paywall}),(0,n.jsx)(_,{member:t,cellVariant:s,hideColumn:!u.lastActive||d}),(0,n.jsx)(y,{member:t,cellVariant:s,onEdit:i,onRemove:r,tableVariant:l})]})},A=function(e){var t=e.columnsToRender,r=e.shouldShowHeader;return void 0!==r&&r?(0,n.jsx)(c.FE,{children:Object.keys(t).map(function(e){var r,i=t[e];return i&&(0,n.jsx)(c.dc,{className:"!px-0 ".concat(null!=(r=i.className)?r:""),children:(0,n.jsx)(u.Z.LabelXs,{leading:"leading-tight",color:"text-default",weight:"semibold",children:i.title.toUpperCase()})},i.key)})}):null},I=r(39905),E=function(e){var t=e.onAddMember;return(0,n.jsxs)("div",{className:"flex min-h-[600px] flex-col items-center pt-44",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,s.t)("spaces.form.edit.members.no_members")})}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(u.Z.BodySm,{children:(0,s.t)("spaces.form.edit.members.there_are_no_members")})}),(0,n.jsx)(I.z,{type:"button",variant:"secondary",large:!0,onClick:t,children:(0,s.t)("spaces.form.edit.members.add_members")})]})},T=r(67294),L=function(e){var t=e.dataLength,r=e.searchTerm,n=e.members,i=e.shouldHideAddMemberButton,o=0===n.length&&!r,a=0===n.length&&r,l=(0,p.kK)(),c=n[0];return{isSpaceMembersEmpty:0===t,isResultEmpty:o,isResultEmptyWithSearch:a,shouldShowAddMember:!r&&!i,columnsToRender:(0,T.useMemo)(function(){var e=null==c?void 0:c.currentSpaceMember,t=(null==c?void 0:c.currentSpaceMember)&&!l,r=(null==c?void 0:c.lastActive)&&!l;return{member:{title:(0,s.t)("spaces.form.edit.members.columns.name"),key:"name",className:"w-80"},memberRole:{title:(0,s.t)("spaces.form.edit.members.columns.role"),key:"memberRole"},joinedAt:t?{title:(0,s.t)("spaces.form.edit.members.columns.joined"),key:"joinedAt"}:null,paywall:e?{title:(0,s.t)("spaces.form.edit.members.columns.paywall"),key:"paywall"}:null,lastActive:r?{title:(0,s.t)("spaces.form.edit.members.columns.last_active"),key:"lastActive"}:null,dropdown:{title:"",key:"dropdown",className:"w-12"}}},[c,l])}},D=function(e){var t,r,i=e.dataLength,o=e.members,d=e.onAdd,p=e.onEdit,m=e.onRemove,b=e.onRoleChange,h=e.searchTerm,y=void 0===h?"":h,v=e.shouldHideAddMemberButton,g=e.shouldShowHeader,_=e.cellVariant,x=void 0===_?"no-border":_,j=e.variant,w=void 0===j?"space-members":j,O=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["dataLength","members","onAdd","onEdit","onRemove","onRoleChange","searchTerm","shouldHideAddMemberButton","shouldShowHeader","cellVariant","variant"]),S=L({dataLength:i,members:o,searchTerm:y,shouldHideAddMemberButton:void 0!==v&&v}),k=S.isSpaceMembersEmpty,P=S.isResultEmpty,C=S.isResultEmptyWithSearch,I=S.shouldShowAddMember,T=S.columnsToRender;return k||P?(0,n.jsx)(E,{onAddMember:d}):C?(0,n.jsx)(u.Z.BodyMd,{children:(0,s.t)("spaces.form.edit.members.no_members_found_for_term",{member_search_term:y})}):(0,n.jsxs)(a.Z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({loader:(0,n.jsx)(l.m,{}),dataLength:i,style:{overflow:"initial"},scrollThreshold:.5},O),r=r={children:[I&&(0,n.jsx)(f,{onAdd:d}),(0,n.jsxs)(c.iA,{variant:"no-border",className:"w-full min-w-[600px]",tableClassName:"w-full table-fixed",children:[(0,n.jsx)(A,{columnsToRender:T,shouldShowHeader:void 0!==g&&g}),(0,n.jsx)(c.RM,{variant:"no-divider",children:o.map(function(e){return(0,n.jsx)(N,{cellVariant:x,member:e,onEdit:p,onRemove:m,onRoleChange:b,columns:T,tableVariant:w},e.id)})})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};D.propTypes={dataLength:o().number.isRequired,members:o().arrayOf(o().shape({id:o().number,avatarUrl:o().string,name:o().string,email:o().string,role:o().string})).isRequired,onAdd:o().func,onEdit:o().func,onRemove:o().func,onRoleChange:o().func,searchTerm:o().string,shouldHideAddMemberButton:o().bool,variant:o().oneOf(["space-members","space-group-members"])}},24626:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(85893),i=function(){return(0,n.jsx)("div",{className:"border-primary my-1 border-t"})}},3743:function(e,t,r){"use strict";r.d(t,{X:()=>D});var n=r(85893),i=r(96486),o=r(84326),a=r(57105),s=r(17617),l=r(34519),c=r(41342),u=r(78456),d=r(60589),f=r(57363),p=r(41553),m=r(84195),b=r(71442),h=r(38580),y=r(90926),v=r(51169),g=function(e){var t=e.space,r=(0,y.uk)(t.chat_room_uuid),s=r.chatParticipants,c=r.isLoading,u=r.refetchChatParticipants,d=r.hasNextPage,f=r.fetchNextPage,m=r.totalCount,b=(0,a.dd)(),g=t.chat_room_description;return(0,n.jsxs)(l.u_,{isOpen:b.visible,onClose:b.visible?b.hide:i.noop,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsxs)(l.u_.Header,{children:[(0,n.jsxs)(l.u_.Title,{size:"sm",children:[(0,o.t)("chat_space.details")," (",!c&&m,")"]}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:b.visible?b.hide:i.noop})})]}),(0,n.jsxs)(l.u_.Body,{className:"flex flex-col gap-4 !px-5 !py-2",children:[g&&(0,n.jsx)(p.Z.BodySm,{children:g}),c?(0,n.jsx)(v.a,{center:!0}):(0,n.jsx)(h.V,{spaceMembers:s,hasMoreSpaceMembers:d,space:t,refetchSpaceMembers:u,fetchNextPage:f})]})]})]})},_=a.gk.create(function(e){var t=e.space;return(0,n.jsx)(g,{space:t})}),x=r(24626),j=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.isAdmin,s=(0,d.Y_)(t),l=(0,d.J$)(t),c=(0,a.dd)(_);return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return c.show({space:t})},children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(f.JO,{type:"16-info",size:16,className:"text-default"}),(0,n.jsx)(p.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,o.t)("chat_space.details")})]}),(0,n.jsx)(f.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}),(0,n.jsx)(x.Z,{})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.j,{space:t,onInviteMember:function(){return r(!0)}}),(0,n.jsx)(x.Z,{})]}),(0,n.jsx)(m.B,{space:t,isAdmin:i})]})},w=function(e){var t=e.space,r=e.isAdmin,i=e.setIsAddMemberOpen,o=(0,d.Y_)(t);return(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.j,{space:t,onInviteMember:function(){return i(!0)}}),(0,n.jsx)(x.Z,{})]}),(0,n.jsx)(m.B,{space:t,isAdmin:r})]})},O=r(63510),S=r(23122),k=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.onClickAddCoverImage,o=e.isAdmin,a=(0,d.Y_)(t),s=(0,d.J$)(t);return(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)(O.v,{space:t})}),(0,n.jsx)(x.Z,{}),a&&(0,n.jsx)(b.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:i}),!o&&s&&(0,d.P8)(t)&&(0,n.jsx)(S.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,n.jsx)(x.Z,{}),(0,n.jsx)(m.B,{space:t,isAdmin:o})]})},P=r(21326),C=function(e){var t=e.space,r=e.isAdmin,i=e.setIsAddMemberOpen,o=(0,d.J$)(t);return(0,n.jsxs)(n.Fragment,{children:[o&&(0,d.JW)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.t,{space:t}),(0,n.jsx)(x.Z,{})]}),(0,d.Y_)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.j,{space:t,onInviteMember:function(){return i(!0)}}),(0,n.jsx)(x.Z,{})]}),!r&&o&&(0,d.P8)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.B,{space:t,onInviteMember:function(){return i(!0)}}),(0,n.jsx)(x.Z,{})]}),(0,n.jsx)(m.B,{space:t,isAdmin:r})]})},N=r(83486),A=r(86973),I=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.onClickAddCoverImage,o=e.isAdmin,a=(0,d.JW)(t),s=(0,d.Y_)(t),l=(0,d.J$)(t);return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(N.m,{space:t}),(0,n.jsx)(x.Z,{}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.J,{space:t}),(0,n.jsx)(x.Z,{})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:i}),(0,n.jsx)(x.Z,{})]}),!o&&l&&(0,d.P8)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,n.jsx)(x.Z,{})]}),(0,n.jsx)(m.B,{space:t,isAdmin:o})]})},E=function(e){var t=e.space,r=e.onClickAddCoverImage,i=e.setIsAddMemberOpen,o=(0,c.wh)().currentCommunityMember,a=(0,u.vb)(o);return t?(0,d.H3)(t)||(0,d.Ds)(t)?(0,n.jsx)(I,{space:t,setIsAddMemberOpen:i,onClickAddCoverImage:r,isAdmin:a}):(0,d.Ug)(t)?(0,n.jsx)(j,{space:t,setIsAddMemberOpen:i,isAdmin:a}):(0,d.V5)(t)?(0,n.jsx)(k,{space:t,setIsAddMemberOpen:i,onClickAddCoverImage:r,isAdmin:a}):(0,d.qy)(t)?(0,n.jsx)(C,{space:t,setIsAddMemberOpen:i,isAdmin:a}):(0,d.EG)(t)?(0,n.jsx)(w,{space:t,isAdmin:a,setIsAddMemberOpen:i}):null:null},T=function(e){var t=e.space,r=e.setIsAddMemberOpen,c=e.onClickAddCoverImage,u=(0,a.dd)();return!(0,s.kK)()&&u.visible&&u.hide(),(0,n.jsxs)(l.u_,{isOpen:u.visible,onClose:u.visible?u.hide:i.noop,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{size:"lg",children:[(0,n.jsxs)(l.u_.Header,{className:"!px-5 !py-4",children:[(0,n.jsx)(l.u_.Title,{size:"sm",children:(0,o.t)("space_settings")}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:u.visible?u.hide:i.noop})})]}),(0,n.jsx)(l.u_.Body,{className:"!px-0 !py-1",children:(0,n.jsx)(E,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:c})})]})]})},L=a.gk.create(function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.onClickAddCoverImage;return(0,n.jsx)(T,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:i})}),D=function(){return(0,a.dd)(L)}},20246:function(e,t,r){"use strict";r.d(t,{$:()=>b});var n=r(85893),i=r(70442),o=r(84326),a=r(59043),s=r(29875),l=r(17679),c=r(60589),u=r(80171),d=r(43544),f=r(10689),p=r(76896),m=r(64024),b=function(e){var t=e.space,r=(0,i.k6)(),b=(0,a.g)({spaces:t.slug}),h=b.members,y=b.isLoading,v=b.canSeeMembersDirectory,g=(0,s.u)().show,_=(0,m.m)(t),x=(0,l.I)({spaceId:t.id,enabled:!_}),j=x.count,w=x.isLoading;return _?null:w||y?(0,n.jsx)(p.gi,{variant:"members-avatar-row"}):(0,n.jsx)(u.T,{content:(0,o.t)("see_all_members"),disabled:!v,children:(0,n.jsxs)("button",{type:"button",disabled:!v,onClick:function(){if((0,c.Y_)(t))return g({spaceId:t.id,initialSection:(0,o.t)("customize_space.members")});v&&r.push("/members?filter[spaces]=".concat(t.slug))},className:"focus-visible:outline-secondary rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:[(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)(d.Lt.Header,{children:(0,o.t)("members")})}),(0,n.jsx)(f.n,{members:h,amountToShow:3,totalCount:j})]})})}},64024:function(e,t,r){"use strict";r.d(t,{m:()=>o});var n=r(41342),i=r(59043),o=function(e){var t=(0,i.g)({spaces:e.slug}).canSeeMembersAvatarRow,r=(0,n.T4)({spaceId:e.id}),o=r.data;return r.isLoading||!!(null==o?void 0:o.hide_members_count)||!t}},63510:function(e,t,r){"use strict";r.d(t,{v:()=>s});var n=r(85893),i=r(45697),o=r.n(i),a=r(20246),s=function(e){var t=e.space;return(0,n.jsx)(a.$,{space:t})};s.propTypes={space:o().object.isRequired}},61441:function(e,t,r){"use strict";r.d(t,{c:()=>a});var n=r(54763),i=r(60589),o=r(41342),a=function(e){var t=e.space,r=(0,o.wh)().currentCommunity,a=r.ios_app_enabled||r.has_branded_app,s=!(0,i.Ug)(t)||a,l=(0,n.N)({space:t});return{updateSpaceMemberNotificationPreferences:l.updateSpaceMemberNotificationPreferences,updateChatSpaceMemberNotificationPreferences:l.updateChatSpaceMemberNotificationPreferences,notificationState:l.notificationState,shouldShowNotificationsSection:!(0,i.qy)(t)&&(0,i.J$)(t)&&s}}},83486:function(e,t,r){"use strict";r.d(t,{m:()=>s});var n=r(85893),i=r(45697),o=r.n(i),a=r(20246),s=function(e){var t=e.space;return(0,n.jsx)(a.$,{space:t})};s.propTypes={space:o().object.isRequired}},61312:function(e,t,r){"use strict";r.d(t,{X:()=>v,p:()=>g});var n=r(85893),i=r(43544),o=r(70442),a=r(52928),s=r(30133),l=r(98321),c=r(3743),u=r(67294),d=r(91966),f=r.n(d),p=r(84326),m=r(13532),b=r(96354),h=["latest","new_activity","oldest","popular","likes","alphabetical"],y=function(e){var t=e.defaultSort,r=void 0===t?"latest":t,n=e.include,i=void 0===n?h:n,o=e.exclude,a=void 0===o?[]:o,s=h.includes(r)?r:i[0],l=(0,b.t)(),c=l.sort,d=void 0===c?s:c,y=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(l,["sort"]),v=(0,u.useMemo)(function(){var e=f()(i,a);return r=r||e[0],e.map(function(e){var t,r;return{value:e,label:(0,p.t)("sorting_options.".concat(e)),pathTo:"?".concat((0,m.UK)((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},y),r=r={sort:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)))}})},[r,i,a,y,d]);return{sort:d,sortingOptions:v}},v=function(e){var t=e.defaultSort,r=e.include,o=e.exclude,a=e.shouldOpenToLeft,s=e.onChange,l=e.button,c=y({defaultSort:t,exclude:o,include:r}),u=c.sort,d=c.sortingOptions,f=u?String(u):void 0;return(0,n.jsx)(i.Lt,{direction:void 0!==a&&a?"bottom-start":"bottom-end",options:d,activeOptionValue:f,onChange:s,button:l})},g=function(e){var t=e.defaultSort,r=y({defaultSort:t,include:e.include,exclude:e.exclude}).sortingOptions,i=(0,s.v)().isMobileWebNewSpaceCustomizationUIEnabled,u=(0,c.X)(),d=new URLSearchParams((0,o.TH)().search).get("sort")||t;return i?(0,n.jsx)("div",{children:r.map(function(e){var t=e.value,r=e.label,i=e.pathTo;return(0,n.jsx)(a.OL,{className:"text-light block px-5 py-2 text-sm font-medium",to:i,onClick:u.hide,isActive:function(){return d===t},activeClassName:"!text-dark",children:r},t)})}):(0,n.jsx)(n.Fragment,{children:r.map(function(e){var t=e.value,r=e.label,i=e.pathTo;return(0,n.jsx)(l.F,{forceClose:!0,to:i,children:r},t)})})}},72171:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(85893),i=r(41553),o=function(e){var t=e.children,r=e.truncate;return(0,n.jsx)(i.Z.TitleSm,{as:"h1","data-testid":"space-title-name",weight:"semibold",truncate:void 0!==r&&r,children:t})}},94902:function(e,t,r){"use strict";r.d(t,{M:()=>h});var n=r(85893),i=r(94184),o=r.n(i),a=r(85924),s=r(41342),l=r(78456),c=r(80219),u=r(57363),d=r(51433),f=function(e){var t=e.space,r=e.className,i=(0,a.TC)().currentAppearance,f=(0,s.wh)().currentCommunityMember,p=(0,l.vb)(f),m=(0,d.$)({shouldShowLockIconForNonMembers:t.show_lock_icon_for_non_members&&!t.is_space_member,isPrivate:t.is_private,isAdmin:p});return(0,n.jsx)(c.S,{className:o()("title-emoji w-5",r),emoji:t.emoji,appearance:i,customEmojiUrl:t.custom_emoji_url,customEmojiDarkUrl:t.custom_emoji_dark_url,shouldUseLockIcon:m,lockIcon:(0,n.jsx)(u.JO,{type:"lock",className:"text-dark"}),dataTestId:"title-emoji"})},p=r(41553),m=r(17679),b=r(72171),h=function(e){var t=e.space,r=e.shouldShowMembersCount,i=void 0!==r&&r,o=(0,m.I)({spaceId:t.id,enabled:i}),a=o.count,s=o.isLoading;return(0,n.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,n.jsx)(f,{className:"justify-center text-sm",space:t}),(0,n.jsxs)("div",{className:"flex truncate",children:[(0,n.jsx)(b.y,{truncate:!0,children:t.name}),i&&(0,n.jsx)("div",{className:"ml-1",children:(0,n.jsx)(p.Z.BodyLg,{weight:"semibold",tracking:"tracking-normal",children:!s&&"(".concat(a,")")})})]})]})}},23122:function(e,t,r){"use strict";r.d(t,{B:()=>p});var n=r(85893),i=r(96486),o=r(84326),a=r(41342),s=r(60589),l=r(30133),c=r(57363),u=r(43544),d=r(41553),f=r(16593),p=function(e){var t=e.space,r=e.onInviteMember,p=(0,a.wh)().isViewOnlyMasquerading,m=(0,l.v)().isMobileWebNewSpaceCustomizationUIEnabled,b=(0,s.H)(t)?(0,o.t)("customize_space.add_waitlist"):(0,o.t)("space_header.invite_member"),h=f.S.inviteMemberIcon;return m?(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:r,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(c.JO,{type:h,size:20,className:"text-default"}),(0,n.jsx)(d.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,o.t)("space_header.invite_member")})]}),(0,n.jsx)(c.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}):(0,n.jsx)(u.Lt.IconWithBadgeList,{options:[{value:(0,o.t)("space_header.invite_member"),label:b,onClick:p?i.noop:r,icon:h,iconSize:20}]})}},84195:function(e,t,r){"use strict";r.d(t,{B:()=>S});var n=r(85893),i=r(84326),o=r(71408),a=r(34085),s=r(24184),l=r(41342),c=function(){var e=(0,s.U)();return{space:(0,l.nT)().helpers.findBy({slug:e})}},u=r(57105),d=function(){var e=c().space,t=(0,u.dd)();return(0,n.jsx)(l.mE,{spaceId:null==e?void 0:e.id,children:(0,n.jsx)(a.k,{show:t.visible,space:e,onClose:t.hide})})},f=u.gk.create(function(){return(0,n.jsx)(d,{})}),p=function(){return(0,u.dd)(f)},m=r(60589),b=r(30133),h=r(57363),y=r(43544),v=r(41553),g=r(61441),_=r(16593),x=function(){var e=(0,o.Y)(),t=c().space,r=_.S.deleteSpaceIcon;return(0,n.jsx)(y.Lt.ItemWithLink,{onClick:function(){return e.show({space:t,onSuccess:function(){window.location.href="/"}})},children:(0,n.jsxs)(y.Lt.IconContainer,{children:[(0,n.jsx)("span",{className:"h-5 w-5",children:(0,n.jsx)(h.JO,{type:r,className:"text-v2-danger",size:20})}),(0,n.jsx)(v.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,i.t)("space_header.delete_space")})]})},(0,i.t)("space_header.delete_space"))},j=r(23122),w=r(96486),O=function(){var e=p(),t=(0,l.wh)().isViewOnlyMasquerading,r=_.S.leaveSpaceIcon;return(0,n.jsx)(y.Lt.ItemWithLink,{onClick:t?w.noop:e.show,children:(0,n.jsxs)(y.Lt.IconContainer,{children:[(0,n.jsx)("span",{className:"h-5 w-5",children:(0,n.jsx)(h.JO,{type:r,className:"text-v2-danger",size:20})}),(0,n.jsx)(v.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,i.t)("space_header.leave_space")})]})},(0,i.t)("space_header.leave_space"))},S=function(e){var t,r=e.space,a=e.isAdmin,s=e.onInviteMember,l=(0,b.v)().isMobileWebNewSpaceCustomizationUIEnabled,c=(0,o.Y)(),u=p(),d=_.S.leaveSpaceIcon,f=_.S.deleteSpaceIcon,w=(0,m.EG)(r),S=(0,m.P8)(r)&&!!s,k=!!(null==(t=r.policies)?void 0:t.can_leave_space),P=(0,g.c)({space:r}).shouldShowNotificationsSection,C=a||S||P&&!w;return l?(0,n.jsxs)(n.Fragment,{children:[k&&(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return u.show()},children:[(0,n.jsx)(h.JO,{type:d,className:"text-v2-danger",size:20}),(0,n.jsx)(v.Z.LabelSm,{color:"text-v2-danger",children:(0,i.t)("space_header.leave_space")})]}),a&&(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return c.show({space:r,onSuccess:function(){window.location.href="/"}})},children:[(0,n.jsx)(h.JO,{type:f,className:"text-v2-danger",size:20}),(0,n.jsx)(v.Z.LabelSm,{color:"text-v2-danger",children:(0,i.t)("space_header.delete_space")})]})]}):(0,n.jsxs)(n.Fragment,{children:[C&&(0,n.jsx)(y.Lt.Separator,{}),S&&(0,n.jsx)(j.B,{space:r,onInviteMember:s}),k&&(0,n.jsx)(O,{}),a&&(0,n.jsx)(x,{})]})}},71442:function(e,t,r){"use strict";r.d(t,{j:()=>H});var n=r(85893),i=r(84326),o=r(29875),a=r(57105),s=r(67294),l=r(25362),c=r(25606),u=r(79522),d=r(39905),f=r(34519),p=r(44820),m=function(e){var t=e.isSubmitting,r=e.onClickCancel;return(0,n.jsxs)(f.u_.Footer,{className:"flex justify-end gap-2 !px-0",children:[(0,n.jsx)(d.z,{type:"button",variant:"secondary",large:!0,onClick:void 0===r?function(){}:r,children:(0,i.t)("back")}),(0,n.jsx)(p._,{type:"submit",form:"bookmark-form",variant:"circle",large:!0,submitting:void 0!==t&&t,children:(0,i.t)("save")})]})};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=[{label:(0,i.t)("add_a_link"),value:"link",icon:"16-link",iconSize:16},{label:(0,i.t)("add_a_folder"),value:"folder",icon:"16-folder",iconSize:16}],v=function(e){var t=e.space,r=(0,l.dd)(),o=h((0,s.useState)("link"),2),a=o[0],p=o[1],b=h((0,s.useState)(!1),2),v=b[0],g=b[1];return(0,s.useEffect)(function(){r.visible||(p("link"),g(!1))},[r.visible]),(0,n.jsxs)(f.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,n.jsx)(f.u_.Overlay,{}),(0,n.jsxs)(f.u_.Content,{children:[(0,n.jsxs)(f.u_.Header,{children:[(0,n.jsx)(f.u_.Title,{size:"md",children:(0,i.t)("add_space_links")}),(0,n.jsx)(f.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(f.u_.CloseButton,{onClick:r.hide})})]}),(0,n.jsx)(f.u_.Body,{children:v?(0,n.jsx)(c.X,{space:t,isEdit:!1,isFolder:"folder"===a,renderFooter:function(e){var t=e.isSubmitting;return(0,n.jsx)(m,{isSubmitting:t,onClickCancel:function(){return g(!1)}})},onAfterCreateOrUpdate:r.hide},a):(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(u.S,{name:"spaceLinkType",defaultChecked:a,options:y,size:"sm",onChange:function(e){p(e)},hasRadioCheckmarks:!0}),(0,n.jsxs)(f.u_.Footer,{className:"flex justify-end gap-2 !px-0",children:[(0,n.jsx)(d.z,{type:"button",variant:"secondary",large:!0,onClick:r.hide,children:(0,i.t)("cancel")}),(0,n.jsx)(d.z,{type:"button",variant:"circle",large:!0,onClick:function(){return g(!0)},children:(0,i.t)("next")})]})]})})]})]})},g=a.gk.create(function(e){var t=e.space;return(0,n.jsx)(v,{space:t})}),_=r(41342),x=r(30133),j=r(57363),w=r(43544),O=r(41553),S=r(24626),k=r(23560),P=r.n(k),C=r(78456),N=r(60589),A=r(17617),I=function(e){var t=e.space,r=null!=t?t:{},n=r.cover_image_url,o=r.cover_image_visible;return n||o?(0,i.t)("update_cover"):(0,i.t)("add_cover")},E=r(17679),T=r(63676),L=function(e){var t=e.space,r=(0,E.I)({spaceId:null==t?void 0:t.id}),n=r.count;return{customizeMembersBadge:""+(r.isLoading?"":(0,T.HA)(n))}},D=r(16593),M=(0,i.t)("customize_space.customize"),R=(0,i.t)("customize_space.options"),B=(0,i.t)("customize_space.paywalls.title"),F=(0,i.t)("customize_space.members"),z=(0,i.t)("customize_space.lessons"),U=(0,i.t)("customize_space.lock_screen"),Z=(0,i.t)("customize_space.set_welcome_banner"),G=(0,i.t)("customize_space.workflows"),q=(0,i.t)("add_space_links"),V=function(e){var t=e.space,r=e.onInviteMemberClick,n=e.onAddCoverClick,o=e.openCustomizeModal,a=e.openAddSpaceLinksModal,s=(0,_.wh)(),l=s.currentCommunitySettings,c=s.currentCommunityMember,u=!!(null==l?void 0:l.space_description_enabled),d=!!(null==l?void 0:l.upgrade_flows_for_workflows_spaces_enabled),f=(0,N.EG)(t),p=P()(n),m=P()(r),b=(0,N.V5)(t),h=(0,A.a7)(),y=I({space:t}),v=L({space:t}).customizeMembersBadge,g=D.S.coverImageIcon,x=D.S.customizeLessonsIcon,j=D.S.welcomeBannerIcon,w=D.S.customizeIcon,O=D.S.creditCardIcon,S=D.S.customizeLockScreenIcon,k=D.S.customizeMembersIcon,E=D.S.inviteMemberIcon,T=D.S.customizeOptionsIcon,V=D.S.addSpaceLinksIcon,H=[];if(p&&H.push({value:(0,i.t)("add_cover_image"),label:y,onClick:n,icon:g,iconSize:20}),(0,N.Ds)(t)||(0,N.qy)(t)||H.push({value:q,label:q,onClick:function(){return a()},icon:V,iconSize:20}),f&&H.push({value:z,label:z,onClick:function(){return o({initialSection:z})},icon:x,iconSize:20}),u&&b&&H.push({value:M,label:Z,onClick:function(){return o({initialSection:M,scrollToId:"space-welcome-banner"})},icon:j,iconSize:20}),(0,C.vb)(c)&&H.push({value:B,label:B,onClick:function(){return o({initialSection:B})},icon:O,iconSize:20}),H.push({value:M,label:M,onClick:function(){return o({initialSection:M})},icon:w,iconSize:20},{value:U,label:U,onClick:function(){return o({initialSection:U})},icon:S,iconSize:20},{value:F,label:F,badge:v,onClick:function(){return o({initialSection:F})},icon:k,iconSize:20}),m&&!h){var W=(0,N.H)(t)?(0,i.t)("customize_space.add_waitlist"):(0,i.t)("space_header.invite_member");H.push({value:(0,i.t)("space_header.invite_member"),label:W,onClick:r,icon:E,iconSize:20})}return H.push({value:R,label:R,onClick:function(){return o({initialSection:R})},icon:T,iconSize:20}),d&&H.push({value:G,label:G,onClick:function(){return o({initialSection:G})},icon:"lightning"}),H},H=function(e){var t=e.space,r=e.onInviteMember,s=e.onAddCoverImage,l=t.id,c=(0,o.u)().show,u=(0,_.L2)().refetch,d=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled,f=(0,a.dd)(g),p=function(e){c({spaceId:l,refetch:function(){u()},initialSection:e.initialSection,scrollToId:e.scrollToId})},m=[{value:(0,i.t)("customize_space.access"),label:(0,i.t)("customize_space.access"),icon:"20-locker-open-v3",iconSize:20,badge:(0,i.t)("spaces.form.create.visibility_types.".concat(t.visibility)),badgeVariant:"plain",onClick:function(){return p({initialSection:(0,i.t)("customize_space.customize")})}}],b=V({space:t,onInviteMemberClick:r,onAddCoverClick:s,openCustomizeModal:p,openAddSpaceLinksModal:function(){f.show({space:t})}});return d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return p({initialSection:(0,i.t)("customize_space.customize")})},children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(j.JO,{type:"16-lock-unlocked",size:16,className:"text-default"}),(0,n.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,i.t)("customize_space.access")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(O.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,i.t)("spaces.form.create.visibility_types.".concat(t.visibility))}),(0,n.jsx)(j.JO,{type:"16-chevron-right",size:16,className:"text-default"})]})]}),(0,n.jsx)(S.Z,{}),b.map(function(e){return(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:e.onClick,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[e.icon&&(0,n.jsx)(j.JO,{type:e.icon,size:20,className:"text-default"}),(0,n.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:e.label})]}),(0,n.jsx)(j.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},e.value)})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.Lt.IconWithBadgeList,{options:m}),(0,n.jsx)(w.Lt.Separator,{}),(0,n.jsx)(w.Lt.Header,{children:(0,i.t)("space")}),(0,n.jsx)(w.Lt.IconWithBadgeList,{options:b})]})}},21326:function(e,t,r){"use strict";r.d(t,{t:()=>c});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(61312),l=r(43544),c=function(e){var t=e.space;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Lt.Header,{children:(0,a.t)("space_header.sort_order")}),(0,n.jsx)(s.p,{defaultSort:t.default_member_sort||"latest",showDescription:!1,include:["latest","oldest","alphabetical"]})]})};c.propTypes={space:o().object.isRequired}},86973:function(e,t,r){"use strict";r.d(t,{J:()=>c});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(61312),l=r(43544),c=function(e){var t=e.space;return(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Lt.Header,{children:(0,a.t)("space_header.sort_order")}),(0,n.jsx)(s.p,{defaultSort:(null==t?void 0:t.default_sort)||"latest",showDescription:!1})]})};c.propTypes={space:o().object.isRequired}},16593:function(e,t,r){"use strict";r.d(t,{S:()=>n});var n={coverImageIcon:"20-image-v3",customizeLessonsIcon:"20-doc-v3",welcomeBannerIcon:"20-welcome-banner-v3",customizeIcon:"20-customize-v3",creditCardIcon:"20-card-v3",customizeLockScreenIcon:"20-locker-closed-v3",customizeMembersIcon:"20-users-v3",inviteMemberIcon:"20-user-plus-v3",customizeOptionsIcon:"20-info-v3",leaveSpaceIcon:"20-sign-out-v3",deleteSpaceIcon:"20-bin-v3",addSpaceLinksIcon:"20-book-v3"}},54763:function(e,t,r){"use strict";r.d(t,{N:()=>m});var n=r(67294),i=r(88767),o=r(93199),a=r(13532);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l="space-members",c=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(function(e){var t=e.spaceMember,r=e.updates;return(0,o.aU)(a.av.spaceMembers.update({spaceId:t.space_id,memberId:t.community_member_id}),{space_member:r})},{onMutate:function(t){var r,n=t.spaceMember;return(r=function(){var t,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return t=[l,n.community_member_id],[4,e.cancelQueries(t)];case 1:return i.sent(),r=e.getQueryData(t),e.setQueryData(t,n),[2,{previousData:r,spaceMember:n}]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},onSuccess:function(t){e.setQueryData([l,t.community_member_id],t)}})},u=function(e){var t=e.spaceId,r=e.memberId;return(0,i.useQuery)([l,r],function(){return(0,o.UT)(a.av.spaceMembers.show({spaceId:t,memberId:r}))})},d=r(41342);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p="never",m=function(e){var t,r=e.space,i=c().mutate,o=(t=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],l=(0,d.wh)().currentCommunityMember,m=u({spaceId:r.id,memberId:null==l?void 0:l.id}),b=m.data,h=m.isLoading,y=(0,n.useCallback)(function(e){return"all"===e},[]);(0,n.useEffect)(function(){b&&s({notification_type:y(null==b?void 0:b.notification_type),in_app_notification_setting:y(null==b?void 0:b.in_app_notification_setting),mobile_notification_setting:y(null==b?void 0:b.mobile_notification_setting),all:null==b?void 0:b.all_notifications_enabled,mentions:null==b?void 0:b.mention_notifications_enabled,never:null==b?void 0:b.notifications_off})},[b,h,y]);var v=(0,n.useCallback)(function(e){var t,r,n=e.fieldKey;return i({spaceMember:b,updates:(t={},r=e.shouldEnable?"all":p,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)})},[b,h]),g=(0,n.useCallback)(function(e){return i({spaceMember:b,updates:_(e.fieldKey)})},[b,i]),_=function(e){return"all"==e?{mobile_notification_setting:"all",mention_mobile_notification_setting:"all",mention_in_app_notification_setting:"all"}:"mentions"==e?{mobile_notification_setting:p,mention_mobile_notification_setting:"all",mention_in_app_notification_setting:"all"}:"never"==e?{mobile_notification_setting:p,mention_mobile_notification_setting:p,mention_in_app_notification_setting:p}:void 0};return{updateSpaceMemberNotificationPreferences:v,updateChatSpaceMemberNotificationPreferences:g,isNotificationTypeEnabled:y,notificationState:a,isLoading:h}}},34085:function(e,t,r){"use strict";r.d(t,{k:()=>y});var n=r(85893),i=r(88767),o=r(84326),a=r(93199),s=r(13532),l=r(99385),c=r(795),u=r(41342),d=r(60589),f=r(40404),p=r(95727),m=r(60878);function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var h="spaces.leave",y=function(e){var t=e.show,r=e.onClose,y=e.space,v=(0,f.C)().goToCommunityRootPath,g=(0,u.wh)().currentCommunityMember,_=(0,u.e2)().actions.refresh,x=(0,u.nT)().actions.refresh,j=(0,u.T4)({spaceId:null==y?void 0:y.id}),w=j.space,O=j.refetch,S=(0,m.pm)(),k=S.error,P=S.success,C=(0,l.m)(null==w?void 0:w.chat_room_uuid).refetchChatRoom,N=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return _(),[4,x()];case 1:if(e.sent(),(0,d.$n)(y))return[3,3];return[4,O()];case 2:e.sent(),e.label=3;case 3:return(0,d.Ug)(y)&&C(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})})()},A=(0,i.useMutation)(function(){return(0,a.pC)(s.av.spaceMembers.leaveSpace({spaceId:null==y?void 0:y.id,memberId:null==g?void 0:g.id}))},{onSuccess:function(){P((0,o.t)("leave_space_success",{name:null==y?void 0:y.name}),{duration:"short",shouldUseProgress:!1}),N(),r(),(0,d.$n)(y)&&v()},onError:function(){k((0,o.t)("leave_space_error"))}}),I=A.mutate,E=A.isLoading;return(0,n.jsxs)(p.V,{title:(0,o.t)([h,"title"]),confirmUserPrompt:(0,o.t)([h,"confirm_prompt"]),isOpen:t,onClose:r,onCancel:r,onConfirm:I,confirmVariant:"danger",isDisabled:E,confirmText:E?(0,o.t)("leaving"):(0,o.t)("confirm"),children:[(0,n.jsx)(c.w,{content:(0,o.t)([h,"description"],{space_name:(null==y?void 0:y.name)||""})})," ",!(0,d.Y_)(y)&&((0,d.$n)(y)||(0,d.WB)(y))&&(0,o.t)([h,"private_space"])]})}},78931:function(e,t,r){"use strict";r.d(t,{R:()=>d});var n=r(85893),i=r(45697),o=r.n(i),a=r(84326),s=r(41553),l=r(57363),c=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z.TitleSm,{weight:"semibold",children:(0,a.t)("please_check_your_email")}),(0,n.jsx)(s.Z.BodyMd,{children:(0,a.t)("please_check_your_email_description")})]})},u=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(s.Z.TitleSm,{weight:"semibold",children:(0,a.t)("this_space_is_private")})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(s.Z.BodyMd,{children:(0,a.t)("this_space_is_private_description")})})]})},d=function(e){var t=e.isInvited;return(0,n.jsxs)("div",{className:"border-primary bg-primary h-full rounded-none border-0 px-10 py-20 text-center sm:h-auto sm:rounded-lg sm:border","data-testid":"locked-space",children:[(0,n.jsx)(l.JO,{type:"lock",className:"mb-5 !w-14"}),t?(0,n.jsx)(c,{}):(0,n.jsx)(u,{})]})};d.propTypes={isInvited:o().bool}},88466:function(e,t,r){"use strict";r.d(t,{J:()=>R});var n=r(85893),i=r(41342),o=r(67294),a=r(45697),s=r.n(a),l=r(50312),c=r(22270),u=r(51466),d=r(60878),f=r(52293),p=r(84326),m=r(48144),b=r(10074),h=r(15882),y=r(17617),v=r(31954),g=function(){var e=(0,i.e2)().records,t=(0,y.Be)(),r=[{label:(0,p.t)("spaces.form.create.space_type_basic_post_label"),name:"basic",description:(0,p.t)("spaces.form.create.space_type_basic_post_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},multi:!1},{label:(0,p.t)("spaces.form.create.space_type_event_post_label"),name:"event",description:(0,p.t)("spaces.form.create.space_type_event_post_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},multi:!1}],o=[{label:(0,p.t)("spaces.form.create.visibility_open_label"),name:"open",description:(0,p.t)("spaces.form.create.visibility_open_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},alertTitle:(0,p.t)("spaces.form.create.visibility_open_alert_title"),multi:!1},{label:(0,p.t)("spaces.form.create.visibility_private_label"),name:"private",description:(0,p.t)("spaces.form.create.visibility_private_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},alertTitle:(0,p.t)("spaces.form.create.visibility_private_alert_title"),multi:!1},{label:(0,p.t)("spaces.form.create.visibility_secret_label"),name:"secret",description:(0,p.t)("spaces.form.create.visibility_secret_description"),icon:{default:"space-members-only",selected:"space-members-only-active",viewBox:"0 0 80 80"},multi:!1}];return(0,n.jsxs)("div",{className:"new-space-form__step new-space-form__basic-info",children:[(0,n.jsxs)("div",{className:"new-space-form__space-group",children:[(0,n.jsxs)("h2",{className:"heading-h2",children:[1===e.length&&(0,p.t)("spaces.form.create.space_type_step_title_no_spaces"),e.length>1&&(0,p.t)("spaces.form.create.space_type_step_title")]}),e.length>1&&(0,n.jsx)(h.V,{variant:"large",name:"space_group_id",spaceGroups:e})]}),(0,n.jsxs)("div",{className:"new-space-form__name",children:[(0,n.jsx)(u.l.Item,{name:"emoji",hideBorder:!0,hideDescription:!0,label:(0,p.t)("spaces.form.create.icon"),children:(0,n.jsx)(u.l.EmojiPicker,{name:"emoji",placement:"bottom-start",emojiSize:23,defaultEmoji:"hash_prefix"})}),(0,n.jsx)(u.l.Item,{name:"name",hideBorder:!0,hideDescription:!0,translationRoot:"spaces.form",rules:{required:"Name is required!",maxLength:255},placeholder:(0,p.t)("spaces.form.create.name_your_space"),fullWidth:!0,children:(0,n.jsx)(u.l.Input,{label:(0,p.t)("spaces.form.create.space_name"),className:"form-control form-control--lg",autoFocus:!0})})]}),(0,n.jsxs)("div",{className:"new-space-form__type",children:[(0,n.jsx)("h3",{className:"heading-h3",children:(0,p.t)("spaces.form.create.space_type_label")}),(0,n.jsx)(v.X,{id:"post_type",name:"post_type",variant:"box",direction:t?"horizontal":"vertical",list:r})]}),(0,n.jsxs)("div",{className:"new-space-form__visibility",children:[(0,n.jsx)("label",{children:(0,p.t)("spaces.form.create.visibility_step_title")}),(0,n.jsx)(v.X,{id:"visibility",name:"visibility",variant:"box",direction:t?"horizontal":"vertical",list:o})]})]})};g.propTypes={spaceGroupId:s().number};var _=r(5521),x=r(5116),j=function(){var e=(0,_.k)(),t="spaces.form.create";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"heading-h2",children:I18n.t("".concat(t,".private_space_lock_screen_step_title"))}),(0,n.jsxs)("div",{className:"new-space-form__locked-screen",children:[(0,n.jsx)(u.l.Item,{name:"locked_page_heading",rules:{},hideBorder:!0,hideDescription:!0,translationRoot:t,fullWidth:!0,children:(0,n.jsx)(u.l.Input,{autoFocus:!0})}),(0,n.jsxs)("div",{className:"form-group form-group--column no-border trix-v2",children:[(0,n.jsx)("label",{children:I18n.t("spaces.form.create.locked_page_description")}),(0,n.jsx)(x.O,{ref:e,id:"locked_page_description",name:"locked_page_description",placeholder:I18n.t("".concat(t,".locked_page_content_placeholder")),preventAccidentalLeave:!1,tabIndex:0,className:"w-full"})]}),(0,n.jsx)(u.l.Item,{name:"locked_button_label",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(u.l.Input,{})}),(0,n.jsx)(u.l.Item,{name:"locked_button_url",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(u.l.Input,{})})]})]})};j.propTypes={isPrivateSpaceWithLockedScreen:s().func};var w=function(){var e=(0,y.a7)(),t=[{label:(0,p.t)("spaces.notification_email_label"),description:(0,p.t)("spaces.notification_email_description"),name:"default_notification_setting",icon:{default:"notifications-email",selected:"notifications-email-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,p.t)("spaces.notification_in_app_label"),description:(0,p.t)("spaces.notification_in_app_description"),name:"default_in_app_notification_setting",icon:{default:"notifications-app",selected:"notifications-app-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,p.t)("spaces.notification_mobile_label"),description:(0,p.t)("spaces.notification_mobile_description"),name:"default_mobile_notification_setting",icon:{default:"notifications-mobile",selected:"notifications-mobile-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,p.t)("spaces.no_notification_label"),description:(0,p.t)("spaces.no_notification_description"),name:"none",icon:{default:"notifications-none",selected:"notifications-none-active",viewBox:"0 0 88 88"},multi:!1}];return(0,n.jsxs)("div",{className:"new-space-form__notification",children:[(0,n.jsx)("h2",{className:"heading-h2 heading-max-width",children:I18n.t("spaces.form.create.notification_step_title")}),(0,n.jsx)("div",{className:"new-space-form__notification-options",children:(0,n.jsx)(v.X,{id:"notification_preferences",name:"notification_preferences",variant:"box",direction:e?"horizontal":"vertical",list:t,multi:!0})})]})},O=function(e){var t=e.currentSpaceGroupId,r=e.isPrivateSpaceWithLockedScreen,i=(0,f.Gc)().watch,a=(0,o.useContext)(m.l).steps,s=i("name"),l=i("visibility"),c=i("notification_preferences");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.h,{sequence:a.basicInformation.sequence,title:a.basicInformation.title,status:a.basicInformation.status,displayNext:!0,isNextStepDisabled:!s||!l,children:(0,n.jsx)(g,{spaceGroupId:t})}),(0,n.jsx)(b.h,{sequence:a.notificationPreferences.sequence,title:a.notificationPreferences.title,status:a.notificationPreferences.status,displaySubmit:!0,isNextStepDisabled:!c,children:(0,n.jsx)(w,{})}),(0,n.jsx)(b.h,{sequence:a.lockScreen.sequence,title:a.lockScreen.title,status:a.lockScreen.status,displayNext:!0,displaySkip:!0,children:(0,n.jsx)(j,{isPrivateSpaceWithLockedScreen:r})})]})};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}O.propTypes={currentSpaceGroupId:s().number,isPrivateSpaceWithLockedScreen:s().func};var N=function(e){var t,r=e.currentSpaceGroupId,i=e.onModalClose,a=(0,f.Gc)(),s=a.watch,l=a.trigger,c=s("visibility"),u={basicInformation:{sequence:1,title:(0,p.t)("name_and_type"),status:"active"},lockScreen:{sequence:2,title:(0,p.t)("lock_screen"),status:"upcoming"},notificationPreferences:{sequence:3,title:(0,p.t)("notification"),status:"upcoming"}},d=(t=(0,o.useState)(u),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=d[0],h=d[1],y=function(){return null==c?void 0:c.includes("private")};return b?(0,n.jsx)(m.O,{steps:b,onNextClick:function(e){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:switch(e){case b.basicInformation.sequence:return[3,1];case b.lockScreen.sequence:return[3,3]}return[3,5];case 1:return[4,l("name")];case 2:return r.sent()&&(t=C(P({},b),{basicInformation:C(P({},b.basicInformation),{status:"completed"})}),h(t=!0===y()?C(P({},t),{lockScreen:C(P({},b.lockScreen),{status:"active"})}):C(P({},t),{lockScreen:C(P({},b.lockScreen),{status:"inactive"}),notificationPreferences:C(P({},b.notificationPreferences),{status:"active"})}))),[3,5];case 3:return[4,l("locked_page_heading")];case 4:return r.sent()&&h(C(P({},b),{lockScreen:C(P({},b.lockScreen),{status:"completed"}),notificationPreferences:C(P({},b.notificationPreferences),{status:"active"})})),[3,5];case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){k(o,n,i,a,s,"next",e)}function s(e){k(o,n,i,a,s,"throw",e)}a(void 0)})})()},onPreviousClick:function(e){switch(e){case b.lockScreen.sequence:h(C(P({},b),{lockScreen:C(P({},b.lockScreen),{status:"upcoming"}),basicInformation:C(P({},b.basicInformation),{status:"active"})}));break;case b.notificationPreferences.sequence:var t=C(P({},b),{notificationPreferences:C(P({},b.notificationPreferences),{status:"upcoming"})});h(t=!0===y()?C(P({},t),{lockScreen:C(P({},b.lockScreen),{status:"active"})}):C(P({},t),{lockScreen:C(P({},b.lockScreen),{status:"upcoming"}),basicInformation:C(P({},b.basicInformation),{status:"active"})}))}},onClose:i,stepPanelContainer:(0,n.jsx)(O,{currentSpaceGroupId:r,isPrivateSpaceWithLockedScreen:y})}):null};N.propTypes={currentSpaceGroupId:s().number,onModalClose:s().func};var A=r(39905),I=r(26950),E=function(e){var t=e.show,r=e.onModalClose,i=e.spaceRootUrl;return(0,n.jsxs)(I.u,{show:t,onClose:r,showIcon:!1,children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:I18n.t("spaces.form.create.success_message")}),(0,n.jsx)(A.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(i,"/invite")},variant:"secondary",children:I18n.t("spaces.invite_members")}),(0,n.jsx)(A.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(i,"/new")},variant:"secondary",children:I18n.t("spaces.create_post")}),(0,n.jsx)(A.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(i,"/settings")},variant:"secondary",children:I18n.t("spaces.customize")})]})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}E.propTypes={show:s().bool,onModalClose:s().func,spaceRootUrl:s().string};var M=function(e){var t=e.space_group_id,r=e.onModalClose,a=(0,c.m)().createSpace,s=(0,i.c6)(),f=(0,i.e2)(),p=s.helpers.isDataLoaded()&&f.helpers.isDataLoaded(),m=D((0,o.useState)(!1),1)[0],b=D((0,o.useState)(""),1)[0],h=(0,d.pm)(),y=function(e){var t={};return Object.entries(e).forEach(function(e){var r=D(e,2),n=r[0],i=r[1];["visibility","post_type"].includes(n)?t[n]=i[0]:"notification_preferences"===n?["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"].forEach(function(e){i.includes("none")?t[e]="never":t[e]=i.includes(e)?"all":"never"}):t[n]=i}),t};return(0,n.jsx)(l.u.Root,{show:p,as:o.Fragment,children:(0,n.jsxs)("div",{className:"new-space-form",children:[(0,n.jsx)(u.l,{onSubmit:function(e){var t;return(t=function(){var t,r,n,i,o;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,a(y(e))];case 1:return(t=s.sent())&&t.root_url&&(window.location=t.root_url),[3,3];case 2:return console.error(r=s.sent()),n=r.firstErrorDetail,i=r.errorDetails,o=n||i,h.error(o),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:{space_group_id:t,emoji:"#"},children:(0,n.jsx)(N,{currentSpaceGroupId:t,onModalClose:function(){r.redirect_to?window.location=r.redirect_to:r()}})}),(0,n.jsx)(E,{show:m,onModalClose:function(){window.location="/"},spaceRootUrl:b})]})})};M.propTypes={space_group_id:s().number,onModalClose:s().func};var R=function(e){return(0,n.jsx)(i.Br,{children:(0,n.jsx)(i.CM,{children:(0,n.jsx)(M,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})}},7998:function(e,t,r){"use strict";r.d(t,{Z:()=>c});var n=r(85893),i=r(15882),o=r(41342),a=r(5521),s=r(51466),l=r(34519);let c=function(){var e=(0,a.k)(),t=(0,o.e2)().records,r=(0,l.UV)().contentPortalElement;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:"Name is required!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(s.l.Input,{ref:e,prefix:(0,n.jsx)(s.l.EmojiPickerV3Wrapper,{})})}),(0,n.jsx)(s.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:"Please choose a space group!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(i.V,{variant:"form-input",spaceGroups:t,name:"space_group_id",appendTo:r})})]})}},90477:function(e,t,r){"use strict";r.d(t,{Z:()=>s});var n=r(85893),i=r(52293),o=r(84326),a=r(51466);function s(){return"event"!==(0,(0,i.Gc)().watch)("post_type")?null:(0,n.jsx)(a.l.Item,{name:"event_auto_rsvp_enabled",label:o.Z.t("spaces.form.event_auto_rsvp_enabled"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(a.l.ToggleSwitch,{variant:"small"})})}},28865:function(e,t,r){"use strict";r.d(t,{V:()=>c});var n=r(85893),i=r(52293),o=r(84326),a=r(51099),s=r(41342),l=r(51466),c=function(){var e=(0,i.qo)({name:"post_type"}),t=(0,s.wh)().currentCommunity,r=!!((null==t?void 0:t.ios_app_enabled)||(null==t?void 0:t.has_branded_app));if("chat"==e&&!r||"course"==e||"members"==e)return null;var c=[{label:(0,o.t)("spaces.form.create.notification_types.email"),description:(0,o.t)("spaces.form.create.notification_by_space_type.".concat(e,".email_description")),value:"default_notification_setting"},{label:(0,o.t)("spaces.form.create.notification_types.inapp"),description:(0,o.t)("spaces.form.create.notification_by_space_type.".concat(e,".inapp_description")),value:"default_in_app_notification_setting"},{label:(0,o.t)("spaces.form.create.notification_types.mobile"),description:(0,o.t)("spaces.form.create.notification_by_space_type.".concat(e,".mobile_description")),value:"default_mobile_notification_setting"}],u="chat"==e?(0,o.t)("spaces.form.create.notification_types.chat_label"):(0,o.t)("spaces.form.create.notification_types.label");return(0,n.jsx)(l.l.Item,{name:"notification_type",label:u,hideDescription:!0,hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:"chat"==e?(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.l.RadioGroup,{variant:"radio",name:"notification_type",verticalSpacing:"normal",options:a.M})}):(0,n.jsx)(l.l.CheckboxGroup,{name:"notification_type",options:c})})}},3281:function(e,t,r){"use strict";r.d(t,{m:()=>a});var n=r(85893),i=r(84326),o=r(51466);function a(e){var t=e.disabled,r=e.isCoursesEnabled,a=e.hideLabel,s=[{label:(0,i.t)("spaces.form.create.space_types.post_label"),icon:{type:"post-2",viewBox:"0 0 20 20"},value:"basic"},{label:(0,i.t)("spaces.form.create.space_types.event_label"),icon:{type:"event",viewBox:"0 0 20 20"},value:"event"},{label:(0,i.t)("spaces.form.create.space_types.chat_label"),icon:{type:"chat-2",viewBox:"0 0 20 20"},value:"chat"}];return void 0!==r&&r&&s.push({label:(0,i.t)("spaces.form.create.space_types.course_label"),icon:{type:"book",viewBox:"0 0 20 20"},value:"course"}),s.push({label:(0,i.t)("spaces.form.create.space_types.members_label"),icon:{type:"20-space-picker-members",viewBox:"0 0 20 20"},value:"members"}),s.push({label:(0,i.t)("spaces.form.create.space_types.image_label"),icon:{type:"20-images",viewBox:"0 0 20 20"},value:"image"}),(0,n.jsx)(o.l.Item,{name:"post_type",hideLabel:void 0!==a&&a,label:(0,i.t)("spaces.form.create.space_types.label"),hideDescription:!0,rules:{required:"Please choose an access type!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(o.l.RadioGroup,{className:"create-space__form__grid-type",disabled:void 0!==t&&t,variant:"box",fullWidth:!1,name:"space_type",options:s})})}},42236:function(e,t,r){"use strict";r.d(t,{Z:()=>l});var n=r(85893),i=r(52293),o=r(84326),a=r(60589),s=r(51466);let l=function(){var e=[{label:o.Z.t("spaces.form.create.visibility_types.open"),value:"open",info:o.Z.t("spaces.form.create.visibility_types.open_info")},{label:o.Z.t("spaces.form.create.visibility_types.private"),value:"private",info:o.Z.t("spaces.form.create.visibility_types.private_info"),infoSubText:o.Z.t("spaces.form.create.visibility_types.private_info_subtext")},{label:o.Z.t("spaces.form.create.visibility_types.secret"),value:"secret",info:o.Z.t("spaces.form.create.visibility_types.secret_info"),infoSubText:o.Z.t("spaces.form.create.visibility_types.secret_info_subtext")}],t=(0,i.qo)({name:"post_type"}),r=(0,i.qo)({name:"visibility"}),l=(0,i.Gc)().setValue;return(0,a.EG)({post_type:t})?("draft"!=r&&l("visibility","draft"),(0,n.jsx)(s.l.Item,{hideBorder:!0,name:"visibility",label:o.Z.t("courses.access"),description:o.Z.t("courses.access_description")})):(0,n.jsx)(s.l.Item,{name:"visibility",hideDescription:!0,label:o.Z.t("spaces.form.create.visibility_types.label"),rules:{required:"Please choose a visibility!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(s.l.RadioGroup,{fullWidth:!1,variant:"box",name:"visibility",options:e})})}},165:function(e,t,r){"use strict";r.d(t,{F:()=>V,e:()=>q});var n=r(85893),i=r(67294),o=r(96486),a=r(70442),s=r(84326),l=r(56450),c=r(56338),u=r(52770),d=r(6082),f=r(41342),p=r(13532),m=r(22270),b=r(20624),h=r(79869),y=r(94375),v=r(51466),g=r(82772),_=r(60878),x=r(45697),j=r.n(x),w=r(52293),O=r(24330),S=r(80171),k=r(60589),P=r(41553),C=function(e){var t=e.spaceGroupMemberCount,r=e.chatSpaceMemberLimit,o=(0,f.e2)().helpers.findBy,a=(0,w.Gc)(),l=a.watch,c=a.setValue,u=l("space_group_id"),d=l("post_type"),p=o({id:u});(0,i.useEffect)(function(){p&&c("add_members_from_space_group",p.automatically_add_members_to_new_spaces)},[u]);var m=(0,k.Ug)({post_type:d})&&t>r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(P.Z.LabelSm,{weight:"semibold",children:(0,s.t)("settings.access_groups.admin.legacy_access.title")})}),(0,n.jsx)("div",{children:(0,n.jsx)(S.T,{role:"tooltip",content:(0,s.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,n.jsx)(O.g,{square:!0,label:(0,s.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,n.jsx)(S.T,{content:(0,s.t)("members_in_space_group_limit_reached"),disabled:!m,children:(0,n.jsx)(v.l.Item,{name:"add_members_from_space_group",label:I18n.t("spaces.form.add_members_from_space_this_group"),hideBorder:!0,hideDescription:!0,className:"!mt-1 !pt-1",inline:!0,shouldToggleValueOnLabelClick:!0,isDisabled:m,children:(0,n.jsx)(v.l.ToggleSwitch,{variant:"small",disabled:m})})})]})};C.propTypes={spaceGroupMemberCount:j().number,chatSpaceMemberLimit:j().number};var N=r(7998),A=r(39905),I=r(28892),E=function(e){var t=e.isLoading,r=void 0!==t&&t;return(0,n.jsx)(I.d.Footer,{sticky:!0,children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",full:!0,disabled:r,form:q,children:r?(0,s.t)("creating"):(0,s.t)("create_space")})})},T=r(57363),L=function(e){var t=e.onClose;return(0,n.jsx)(I.d.Header,{addHeaderPadding:!0,title:(0,s.t)("spaces.form.create.title"),fixed:!0,Actions:(0,n.jsxs)("button",{type:"submit",className:"close-button",onClick:t,children:[(0,n.jsx)(T.JO,{type:"close"}),(0,n.jsx)("span",{className:"sr-only",children:(0,s.t)("drawer.close_panel")})]})})},D=r(90477),M=r(28865),R=r(3281),B=r(42236),F=function(e){var t,r;return null==(r=e.body)||null==(t=r.error_details)?void 0:t.max_space_limit};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function Z(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){U(o,n,i,a,s,"next",e)}function s(e){U(o,n,i,a,s,"throw",e)}a(void 0)})}}function G(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var q="create-space-form",V=function(e){var t,r=e.onClose,x=e.currentSpaceGroupId,j=e.post_type,w=void 0===j?"basic":j,O=e.courseSetting,S=void 0===O?{course_type:l.t}:O,k=e.renderHeader,P=e.renderFooter,A=e.hideSpaceTypePicker,I=e.setExternalLoadingState,T=void 0===I?o.noop:I,U=(0,a.k6)(),V=(0,f.nT)().actions.refresh,H=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return z(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),W=H[0],Q=H[1],J=(0,m.m)(),K=J.createSpace,$=J.maxSpaceLimit,X=(0,f.wh)(),Y=X.currentCommunity,ee=X.currentCommunitySettings,et=X.currentCommunityMember,er=!!(null==et?void 0:et.is_admin),en=(0,_.pm)(),ei=(0,h.w)(),eo=(0,f.e2)().helpers,ea=eo.isDataLoading,es=eo.findBy,el=(null==Y?void 0:Y.current_plan_tier)||"",ec=es({id:x}),eu={space_group_id:x,post_type:er?w:"basic",visibility:"open",course_setting:S,emoji:"#",custom_emoji:g.j,notification_type:["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"],is_post_disabled:!0,add_members_from_space_group:null==ec?void 0:ec.automatically_add_members_to_new_spaces,default_comment_sort:"oldest",default_member_sort:"latest",default_sort:"latest",hide_right_sidebar:"basic"===w};if("chat"==w&&(eu.notification_type="never"),ea())return(0,n.jsx)(b.m,{});var ed=!(0,d.kw)(el)&&!(0,d.gR)(el)&&!!(null==et?void 0:et.is_admin)&&!!(null==ee?void 0:ee.upgrade_flows_for_space_creation_enabled),ef=function(){return Z(function(){return G(this,function(e){switch(e.label){case 0:return r(),U.push(p.Lo.content.spaces),[4,ei.hide()];case 1:return e.sent(),[2]}})})()},ep=function(e){var t,r,n,i;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,o.omit)(e,"notification_type","course_setting"),{default_notification_setting:(r="chat"===e.post_type?"all"==(t=e.notification_type)?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:"mentions"==t?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:e.notification_type).includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:r.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:r.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:r.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:r.includes("default_mention_in_app_notification_setting")?"all":"never"},"course"===e.post_type?{course_setting:e.course_setting}:{}),i=i={is_post_disabled:"event"===e.post_type&&e.is_post_disabled},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n};return(0,n.jsxs)(v.l,{id:q,onSubmit:function(e){return Z(function(){var t,n,i,o,a;return G(this,function(l){var c;switch(l.label){case 0:Q(!0),T(!0),l.label=1;case 1:return l.trys.push([1,5,9,10]),[4,(c=e.space_group_id,Z(function(){return G(this,function(e){switch(e.label){case 0:if(!ed)return[3,2];return[4,$(c)];case 1:e.sent(),e.label=2;case 2:return[2]}})})())];case 2:return l.sent(),[4,K(ep(e))];case 3:return t=l.sent(),[4,V()];case 4:return l.sent(),r(),U.push((0,p._v)({spaceSlug:t.slug})),[3,10];case 5:if(n=l.sent(),(0,u.d)(n),console.error(n),i=n.firstErrorDetail,o=n.errorDetails,a=i||o,!(F(n)&&ed))return[3,7];return[4,Z(function(){return G(this,function(e){switch(e.label){case 0:return Q(!1),T(!1),[4,ei.show({planTier:el&&(0,d.FZ)(el)||void 0,onSuccess:ef,subheading:n.body.message,successButtonLabel:(0,s.t)("pricing_plans.upgrade_modal.actions.go_to_spaces"),source:y.fe.SPACE_LIMIT_UPGRADE_MODAL,showPlanDetails:!0})];case 1:return e.sent(),[2]}})})()];case 6:return l.sent(),[3,8];case 7:en.error(a),l.label=8;case 8:return[3,10];case 9:return T(!1),[7];case 10:return[2]}})})()},defaultValues:eu,className:"create-space__form",children:[(void 0===k?L:k)({onClose:r}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N.Z,{}),(0,c.Wk)(ee)&&(0,n.jsx)(C,{spaceGroupMemberCount:(null==ec?void 0:ec.space_group_members_count)||0,chatSpaceMemberLimit:(null==Y?void 0:Y.chat_space_members_limit)||0}),er&&!(void 0!==A&&A)&&(0,n.jsx)(R.m,{isCoursesEnabled:null==Y?void 0:Y.courses_feature_flag_enabled}),(0,n.jsx)(B.Z,{}),(0,n.jsx)(M.V,{}),(0,n.jsx)(D.Z,{})]}),(void 0===P?E:P)({isLoading:W})]})}},28120:function(e,t,r){"use strict";r.d(t,{_:()=>a});var n=r(85893),i=r(41342),o=r(165),a=function(e){return(0,n.jsx)(i.Br,{children:(0,n.jsx)(i.CM,{children:(0,n.jsx)(o.F,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})}},79609:function(e,t,r){"use strict";r.d(t,{K:()=>k,i:()=>S});var n=r(85893),i=r(80129),o=r(88767),a=r(70442),s=r(84326),l=r(96533),c=r(13532),u=r(61193),d=r(29875),f=r(41342),p=r(93199),m=r(78456),b=r(43319),h=r(39905),y=r(76896),v=r(41553),g=r(60983),_=r(59459),x=r(80171),j=r(98363),w=function(e){var t,r,i=e.communityMember,o=e.moderator,a=e.showMemberProfileDrawer,l=i.first_name,c=i.public_uid,u=i.avatar_url,d=i.name,f=i.id,p=i.headline;if(!l)return null;var m=(0,_.H)({publicUid:null!=c?c:"",params:{show_back_link:!0},showMemberProfileDrawer:a,name:d});return(0,n.jsx)("li",{className:"mt-4",children:(0,n.jsx)(g.C,{communityMemberId:f,name:d,publicUid:c,headline:p,avatarURL:u,children:(0,n.jsxs)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"text-dark relative flex items-center"},m),r=r={children:[(0,n.jsx)("div",{className:"relative top-0 h-auto p-0",children:(0,n.jsx)("div",{className:"text-dark z-[1] mr-3 flex h-10 w-10 items-center rounded-lg object-cover text-sm leading-5",children:(0,n.jsx)(j.s,{name:null!=d?d:"",src:u,size:"10"})})}),(0,n.jsxs)("div",{className:"!text-dark inline-flex items-center justify-center text-sm",children:[d,o&&(0,n.jsx)(x.T,{className:"bg-brand text-brand-button ml-1 inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full text-center text-xs font-semibold leading-normal",content:(0,s.t)("moderator"),children:"M"})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})};function O(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var S="space-members-sidebar",k=function(){var e=(0,f.wh)(),t=e.currentCommunityMember,r=e.currentCommunitySettings,g=(0,l.r)().show,_=(0,f.L2)(),x=_.data,j=_.refetch,k=(0,m.vb)(t),P=(0,a.k6)(),C=(0,d.u)().show,N=(0,o.useQuery)([S,null==x?void 0:x.id],function(){return(0,p.UT)(c.av.spaceMembers.sidebar({spaceId:null==x?void 0:x.id}))},{staleTime:18e5}),A=N.data,I=N.isLoading,E=(0,u.D)();if(!(0,m.VP)(t,r))return null;if(I||E)return(0,n.jsx)(y.gi,{variant:"right-sidebar",count:2});var T=A.records,L=A.has_more_space_members;if(!x||!T||0===T.length)return null;var D=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(!k)return[3,2];return[4,C({spaceId:x.id,refetch:function(){j()},initialSection:(0,s.t)("customize_space.members")})];case 1:return e.sent(),[3,3];case 2:P.push("/members?".concat((0,i.stringify)({filters:(0,b.G9)({key:"spaces",value:x.slug})}))),e.label=3;case 3:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,s,"next",e)}function s(e){O(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsxs)("div",{className:"bg-primary text-dark border-primary rounded-2xl border p-5",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h.z,{type:"button",variant:"text",onClick:D,children:(0,n.jsx)(v.Z.LabelMd,{weight:"semibold",children:(0,s.t)("block_members_title")})})}),(0,n.jsx)("ul",{className:"m-0 list-none p-0","data-testid":"members-list",children:T.map(function(e){var t=e.id,r=e.community_member,i=e.moderator;return(0,n.jsx)(w,{communityMember:r,moderator:i,showMemberProfileDrawer:g},t)})}),L&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(h.z,{type:"button",variant:"text",onClick:D,children:(0,n.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,s.t)("see_members")})})})]})}},97869:function(e,t,r){"use strict";r.d(t,{t:()=>h});var n=r(85893),i=r(35756),o=r(60589),a=r(41342),s=r(76896),l=r(96486),c=r(84326),u=r(54348),d=r(23583),f=r(61193),p=r(41553),m=function(){var e,t=(0,a.L2)().data,r=(0,d.P)(5),i=r.isLoading,o=r.posts,m=r.hasNextPage,b=r.fetchNextPage,h=(0,f.D)();if(i||h)return(0,n.jsx)(s.gi,{variant:"right-sidebar",count:2});if(!(null==o?void 0:o.length))return null;var y=(0,l.reverse)((0,l.sortBy)(o,"pinned_at"));return(0,n.jsxs)("div",{className:"bg-primary text-dark border-primary rounded-2xl border p-5",children:[(0,n.jsx)("div",{children:(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",children:(null==t||null==(e=t.pinned_posts_label)?void 0:e.trim())||(0,c.t)("block_pinned_title")})}),(0,n.jsxs)("ul",{className:"m-0 list-none p-0","data-testid":"pinned-posts",children:[y.map(function(e){return(0,n.jsx)("li",{className:"mt-4",children:(0,n.jsx)(u.s,{post:e,className:"!text-dark overflow-anywhere block text-sm leading-5",children:(0,l.truncate)(e.display_title,{length:100})})},e.id)}),m&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{type:"button",onClick:function(){return b()},children:(0,n.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,c.t)("see_more")})})})]})]})},b=r(79609),h=function(){var e=(0,a.L2)(),t=e.data,r=e.isLoading,l=(0,a.wh)(),c=l.currentCommunityMember,u=l.isLoading;return r||u?null:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,o.K2)(t,c)&&(0,n.jsx)(i.S,{renderFunc:function(){return(0,n.jsx)(s.gi,{variant:"right-sidebar",count:6})},children:(0,n.jsx)(b.K,{})}),(0,o.k4)(t,c)&&(0,n.jsx)(i.S,{renderFunc:function(){return null},children:(0,n.jsx)(m,{})})]})};h.propTypes={}},752:function(e,t,r){"use strict";r.d(t,{d:()=>l});var n=r(85893),i=r(45697),o=r.n(i),a=r(94184),s=r.n(a),l=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:s()("react-page-space-show h-full w-full",r),children:t})};l.propTypes={children:o().node,className:o().string}},82453:function(e,t,r){"use strict";r.d(t,{K:()=>tv});var n=r(85893),i=r(67294),o=r(56685),a=r(61193),s=r(41342),l=r(93199),c=r(35686),u=r(60589),d=r(26801),f=r(3158),p=r(17617),m=r(94184),b=r.n(m),h=r(84326),y=r(57363),v=function(e){return e.type.toLowerCase().includes("touch")},g=r(96486),_=r(51279),x=r(78456),j=r(57105),w=r(88767),O=r(65978),S=r(34519),k=r(13532),P=r(39905),C=r(51466),N=O.Ry().shape({name:O.Z_().required(h.Z.t("link_name_required")),url:O.Vo(function(e){return e.startsWith("mailto:")?O.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,h.Z.t("link_url_invalid")).required(h.Z.t("link_url_required")):O.Z_().url(h.Z.t("link_url_invalid")).required(h.Z.t("link_url_required"))})}),A=function(e){var t=e.isEdit,r=e.link,i=(0,s.wh)().refetch,o=T(),a=function(){i(),o.hide()},c=(0,w.useMutation)(function(e){return(0,l.Cu)(k.av.communities.communityLinks.create(),e)},{onSuccess:a}),u=c.mutate,d=c.isLoading,f=(0,w.useMutation)(function(e){return(0,l.aU)(k.av.communities.communityLinks.update({communityLinkId:r.id}),e)},{onSuccess:a}),p=f.mutate,m=f.isLoading;return(0,n.jsxs)(C.l,{onSubmit:function(e){t?p(e):u(e)},validationSchema:N,defaultValues:t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r):{name:"",url:""},children:[(0,n.jsxs)(S.u_.Body,{children:[(0,n.jsx)(C.l.Item,{name:"name",variant:"extra-bottom-margin",label:h.Z.t("link_name"),description:h.Z.t("link_name_description"),hideBorder:!0,children:(0,n.jsx)(C.l.Input,{})}),(0,n.jsx)(C.l.Item,{variant:"extra-bottom-margin",name:"url",label:h.Z.t("link_url"),description:h.Z.t("link_url_description"),hideBorder:!0,children:(0,n.jsx)(C.l.Input,{})})]}),(0,n.jsx)(S.u_.Footer,{children:t?(0,n.jsx)(P.z,{full:!0,disabled:m,type:"submit",variant:"primary",children:m?h.Z.t("link_updating"):h.Z.t("link_update")}):(0,n.jsx)(P.z,{full:!0,disabled:d,type:"submit",variant:"primary",children:d?h.Z.t("link_creating"):h.Z.t("link_create")})})]})},I=function(e){var t=e.isEdit,r=e.link,i=(0,j.dd)();return(0,n.jsxs)(S.u_,{title:(0,h.t)("add_link"),isOpen:i.visible,onClose:i.hide,children:[(0,n.jsx)(S.u_.Overlay,{}),(0,n.jsxs)(S.u_.Content,{children:[(0,n.jsxs)(S.u_.Header,{children:[(0,n.jsx)(S.u_.Title,{className:"text-center",size:"md",children:(0,h.t)("add_link")}),(0,n.jsx)(S.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(S.u_.CloseButton,{onClick:i.hide})})]}),(0,n.jsx)(A,{isEdit:void 0!==t&&t,link:r})]})]})},E=j.gk.create(function(e){var t=e.isEdit,r=e.link;return(0,n.jsx)(I,{isEdit:t,link:r})}),T=function(){return(0,j.dd)(E)},L=r(60622),D=function(){var e=T();return(0,n.jsx)(L.T,{children:(0,n.jsxs)("button",{type:"button",className:"text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-xs-plus h-8.5 flex w-full items-center rounded-lg px-4 font-medium transition-colors duration-200",onClick:function(){return e.show()},children:[(0,n.jsx)(y.JO,{type:"16-add-new",size:16}),(0,n.jsx)("span",{className:"ml-2",children:(0,h.t)("add_link")})]})})},M=r(43544),R=r(24804),B=r(63549),F=function(e){var t=e.isOpen,r=e.onClose,i=e.link,o=(0,s.wh)().refetch,a=(0,w.useMutation)(function(e){return(0,l.pC)(k.av.communities.communityLinks.delete({communityLinkId:i.id}),e)},{onSuccess:function(){o(),r()}}),c=a.mutate,u=a.isLoading;return(0,n.jsx)(B.c,{isOpen:t,title:(0,h.t)("delete_link"),onClose:r,onCancel:r,onConfirm:function(){return c(void 0)},cancelText:(0,h.t)("cancel"),confirmText:u?(0,h.t)("deleting"):(0,h.t)("delete"),disabled:u,confirmVariant:"danger",children:(0,h.t)("delete_link_confirmation",{name:i.name})})};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=(0,_.W8)(function(e){var t=e.link,r=e.isAdmin,i=U((0,R.k)(!1),2),o=i[0],a=i[1],s=U((0,R.k)(!1),2),l=s[0],c=s[1],u=(0,p.en)(),d=T();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",draggable:"false",title:t.name,className:"text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar active:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-xs-plus h-8.5 group !m-0 flex w-full items-center gap-2 rounded-lg px-4 font-medium transition-colors duration-200",children:[(0,n.jsx)("span",{className:"flex !h-5 !w-5 items-center justify-center",children:(0,n.jsx)(y.JO,{type:"16-external-link",className:"!h-4 !w-4",size:16})}),(0,n.jsx)("h4",{className:"text-xs-plus flex-1 truncate font-medium text-current",children:t.name}),(0,n.jsx)("button",{type:"button",className:b()("flex gap-0.5",{"hidden group-hover:flex":u&&l}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"aria-label":(0,h.t)("community_sidebar.view_sidebar_link_options"),children:r&&(0,n.jsxs)(M.Lt,{buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 transition-colors",button:(0,n.jsx)(y.JO,{type:"16-menu-dots-horizontal",size:16}),onToggle:c,appendTo:document.body,children:[(0,n.jsx)(M.Lt.ItemWithLink,{onClick:function(){d.show({isEdit:!0,link:t})},children:(0,h.t)("edit")}),(0,n.jsx)(M.Lt.ItemWithLink,{onClick:a,children:(0,h.t)("delete")})]})})]},t.url),(0,n.jsx)(F,{link:t,isOpen:o,onClose:a})]})}),G=(0,_.JN)(function(e){var t=e.links,r=(0,s.wh)().currentCommunityMember,i=(0,x.vb)(r),o=(0,p.a7)(),a=!i||!o;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[t.map(function(e,t){return(0,n.jsx)(Z,{index:t,disabled:a,isAdmin:i,link:e},(0,g.uniqueId)(String(t)))}),i&&(0,n.jsx)(D,{})]})});function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||H(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}}var W=function(){var e=(0,s.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,n=V((0,R.k)(!0),2),o=n[0],a=n[1],c=V((0,i.useState)((null==t?void 0:t.links)||[]),2),u=c[0],d=c[1],f=(0,x.vb)(r),p=(0,w.useMutation)(function(e){var t=e.links_order_array;return(0,l.aU)(k.av.communities.communityLinks.reorder(),{links_order_array:t})}).mutate;(0,i.useEffect)(function(){var e=(null==t?void 0:t.links)||[];if((null==e?void 0:e.length)!==u.length)return void d((null==t?void 0:t.links)||[]);(e.some(function(e){return e.name!==u.find(function(t){return t.id===e.id}).name})||e.some(function(e){return e.url!==u.find(function(t){return t.id===e.id}).url}))&&d((null==t?void 0:t.links)||[])},[null==t?void 0:t.links,u]);var m=(null==t?void 0:t.links)||[];return{canSeeLinks:f||m.length>0,shouldShowLinks:o,toggleLinks:a,orderedList:u,onSortEnd:function(e){var t,r=e.oldIndex,n=e.newIndex,i=function(e){if(Array.isArray(e))return q(e)}(t=(0,_.Rp)(u,r,n))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||H(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i.map(function(e){return e.id.toString()});d(i),p({links_order_array:o})}}},Q=function(){var e=W(),t=e.canSeeLinks,r=e.shouldShowLinks,i=e.toggleLinks,o=e.orderedList,a=e.onSortEnd,s=(0,p.en)();return t?(0,n.jsxs)("div",{id:"links-section",className:"mb-8 mt-6 flex flex-col gap-1 px-3 lg:px-6",children:[(0,n.jsxs)("button",{type:"button",className:"text-c-sidebar hover:bg-c-sidebar-hover focus-visible:bg-c-sidebar-hover group flex w-full items-center space-x-px rounded-lg px-4 py-1.5 text-sm font-semibold transition-colors duration-200",onClick:i,children:[(0,n.jsx)("span",{children:(0,h.t)("links")}),(0,n.jsx)("div",{className:b()("flex rounded py-0.5 transition-transform",{"hidden group-hover:flex":s,"rotate-0":!r,"rotate-90":r}),"aria-label":r?(0,h.t)("community_sidebar.expand_group",{group_name:"links"}):(0,h.t)("community_sidebar.collapse_group",{group_name:"links"}),children:(0,n.jsx)(y.JO,{type:"cheveron-right",size:16})})]}),r&&(0,n.jsx)(G,{links:o,distance:5,lockAxis:"y",onSortEnd:a,shouldCancelStart:function(e){return v(e)}})]}):null},J=r(2703),K=r(23628),$=r(79414),X=function(e){var t,r,i=e.children,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,n.jsx)("button",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"button",className:"text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex cursor-pointer items-center justify-start rounded-md px-2 py-1.5 text-sm"},o),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Y=function(e){var t,r;return(0,n.jsxs)(X,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:[(0,n.jsx)(y.JO,{size:16,type:"16-add-new"}),(0,n.jsx)("span",{"data-testid":"add-space",className:"mx-2",children:(0,h.t)("add_space")})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ee=function(e){var t=e.spaceGroupId,r=(0,J.G)();return(0,n.jsx)(Y,{onClick:function(){r.show({spaceGroupId:t})}})},et=r(70442);function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var en=function(e){var t,r,i=er({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e));return(0,n.jsxs)(X,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={children:[(0,n.jsx)(y.JO,{size:16,type:"16-add-new"}),(0,n.jsx)("span",{className:"mx-2",children:(0,h.t)("join_a_space")})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ei=function(e){var t=e.spaceGroupSlug,r=(0,et.k6)();return(0,n.jsx)(en,{onClick:function(){r.push("/s/".concat(t))}})},eo=function(e){var t=e.spaceGroup;return(0,c.yG)({spaceGroup:t})?(0,n.jsx)(ee,{spaceGroupId:t.id}):t.hide_non_member_spaces_from_sidebar?(0,n.jsx)(ei,{spaceGroupSlug:t.slug}):null},ea=r(18059),es=r(60155),el=(0,_.W8)(function(e){var t=e.space,r=(0,u.fO)()(t),i=(0,ea.h4)().spaces.find(function(e){return e.id===t.id});return(0,n.jsx)(es.z,{space:t,buttonLink:r,spaceNotificationDetail:i})}),ec=r(45238),eu=(0,_.JN)(function(e){var t=e.spaceGroup,r=e.listId,i=(0,s.wh)().currentCommunityMember,o=t.spaces,a=o.length>0,l=(0,p.a7)(),c=!(0,x.vb)(i)||!l;return(0,n.jsx)(ec.I,{id:r,children:a?o.map(function(e,t){return(0,n.jsx)(el,{index:t,space:e,disabled:c},e.id)}):(0,n.jsx)(eo,{spaceGroup:t})})});eu.displayName="SpaceList";var ed=r(73029);function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ep=(0,_.W8)(function(e){var t,r=e.spaceGroup,i=e.onSpaceSortEnd,o=e.position,a=e.spaceGroupDragProperties,u=(0,s.wh)().currentCommunityMember,d=(t=(0,R.k)(r.collapsed),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ef(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ef(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],p=d[1],m=(0,K.a)(),b=(0,J.G)(),h=(0,$.I)().toggleSpaceGroupDrawer,y=(0,w.useMutation)(function(){return(0,l.Cu)(k.Ts.toggleVisibility({spaceGroupId:String(r.id)}))}).mutate,g=(0,x.vb)(u),_=(0,c.wh)({spaceGroup:r}),j=r.slug,O="".concat(r.slug,"-list");return(0,n.jsx)(ed.I,{id:j,listId:O,position:o,isCollapsed:o===(null==a?void 0:a.index)&&null!=a&&!!a.isDragging||f,isDragging:null==a?void 0:a.isDragging,canManage:_,onCollapseToggle:function(){p(),y()},spaceGroup:r,onEditSpaceGroupClick:function(){return m.show({spaceGroup:r,tab:"Details"})},onCreateSpaceClick:function(){return b.show({spaceGroupId:r.id})},onCreateSpaceGroupClick:h,isAdmin:g,onAddMembersClick:function(){return m.show({spaceGroup:r,tab:"Members"})},children:(0,n.jsx)(eu,{listId:O,distance:10,lockAxis:"y",shouldCancelStart:function(e){return v(e)},onSortEnd:function(e){return i({oldIndex:e.oldIndex,newIndex:e.newIndex,spaceGroup:r})},spaceGroup:r})})}),em=r(62670),eb=(0,_.JN)(function(e){var t=e.spaceGroupWithSpaces,r=e.onSpaceSortEnd,i=e.spaceGroupDragProperties,o=(0,s.wh)().currentCommunityMember,a=(0,x.vb)(o),l=(0,p.a7)(),c=!a||!l;return(0,n.jsx)(em.E,{children:t.map(function(e,t){return(0,n.jsx)(ep,{index:t,disabled:c,position:t,spaceGroup:e,spaceGroupDragProperties:i,onSpaceSortEnd:r},e.id)})})}),eh=r(61457),ey=r(79369),ev=r(25032),eg=r(86976),e_=r(49882),ex=r(90926),ej=r(32701),ew=r(12845),eO=r(70434),eS=r(41553),ek=r(22663),eP=r(35756),eC=r(58533),eN=r(52928),eA=r(3697),eI=r(63271),eE=r(82859),eT=r(8683),eL=r(55757),eD=r(16089),eM=r(51169),eR=r(86463),eB=r(67142),eF=r(1168),ez=function(e){var t=e.user1,r=e.user2,i=e.className,o=[{name:(null==t?void 0:t.name)||"",src:(null==t?void 0:t.avatar_url)||""},{name:(null==r?void 0:r.name)||"",src:(null==r?void 0:r.avatar_url)||""}];return(0,n.jsx)("div",{className:(0,eF.A)("border-tertiary group-hover:border-hover mr-2.5",void 0===i?"":i),children:(0,n.jsx)(eB.Lt,{users:o,isFullRounded:!0})})},eU=function(){return(0,n.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"text-darkest mb-2 text-xl font-semibold",children:(0,h.t)("messaging.no_messages")}),(0,n.jsx)("div",{className:"text-default text-sm",children:(0,h.t)("messaging.type_name")})]})},eZ=function(){var e=(0,et.UO)().uuid,t=(0,eR.wO)().onClose,r=(0,s.wh)(),o=r.currentCommunityMember,a=r.isLoading,l=(0,eL.T)({openChatRoomUuid:e&&"new"!==e?e:null}),c=l.chatRooms,u=l.hasNextPage,d=l.isLoading,f=l.onEventReceive,p=l.fetchNextPage;(0,eI.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){f(e,null==o?void 0:o.id)},community_member_id:null==o?void 0:o.id,canCreateConnection:!0},[c]);var m=(0,i.useMemo)(function(){return c.filter(function(e){return e.last_message})},[c]);return a||d?(0,n.jsx)(eM.a,{center:!0}):m.length?(0,n.jsx)("div",{id:"scrollableDmsDiv",className:"h-[532px] overflow-auto 2xl:h-[592px]",children:(0,n.jsx)(eC.Z,{style:{height:"100%",overflow:"hidden"},scrollThreshold:.8,next:p,hasMore:u,dataLength:m.length,scrollableTarget:"scrollableDmsDiv",loader:(0,n.jsx)(eM.a,{center:!0}),children:m.map(function(e){var r,i,a,s,l=e.chat_room_name,c=e.chat_room_kind,u=e.last_message,d=e.current_participant,f=e.other_participants_preview,p=void 0===f?[]:f,m=e.id,b=e.has_unread_messages,v=e.uuid,g=c===eA.g8;return(0,n.jsx)(eN.rU,{className:"chat-room-item hover:bg-tertiary block cursor-pointer px-5 py-2.5",onClick:function(e){(0,eE.n2)(e)||t()},to:(0,k.so)({uuid:v}),"data-testid":"chat-room-dm-list",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[g?(0,n.jsx)("div",{className:"isolate mr-4 mt-1",children:(0,n.jsx)(eD.g,{src:null==(r=p[0])?void 0:r.avatar_url,name:null==(i=p[0])?void 0:i.name,status:null==(a=p[0])?void 0:a.status,size:"8"})}):(0,n.jsx)(ez,{user1:p[0],user2:p[1]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("p",{className:"text-darkest truncate text-sm font-medium",children:l})}),(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsxs)("p",{className:"message-body chat-message-word-wrap",children:[u.sender.community_member_id===(null==o?void 0:o.id)?(0,h.t)("messaging.you"):u.sender.name,": ",u.body||(null==(s=u.rich_text_body)?void 0:s.circle_ios_fallback_text)]})})]})]}),(0,n.jsxs)("div",{className:"flex h-full flex-col items-end justify-start",children:[(0,n.jsx)("p",{className:"text-default flex min-w-[86px] items-end justify-end text-xs",children:(0,eT.TF)(u.sent_at)}),(0,n.jsx)("div",{className:"mr-1 flex",children:(void 0===d?{muted:!1}:d).muted?(0,n.jsx)(y.JO,{type:"16-bell-snooze",size:16,className:"text-timestamp"}):b&&(0,n.jsx)("span",{className:"rounded font-semibold leading-none text-white text-xxs bg-v2-danger p-[3px] min-w-[20px] text-center mt-1 mr-0.5"})})]})]})},m)})})}):(0,n.jsx)("div",{className:"h-[532px] 2xl:h-[592px]",children:(0,n.jsx)(eU,{})})},eG=function(){return(0,n.jsx)(eP.S,{renderFunc:ek.$,children:(0,n.jsx)(eZ,{})})},eq=function(){var e=(0,ej.z1)(),t=(0,et.k6)();return(0,n.jsxs)("div",{className:"h-full w-full","data-testid":"chat-dropdown",children:[(0,n.jsxs)("div",{className:"border-primary flex h-16 items-center justify-between border-b px-6",children:[(0,n.jsx)(eS.Z.TitleSm,{weight:"bold",children:(0,h.t)("sidebar_all_dms")}),e&&(0,n.jsx)(eO.Y,{content:(0,h.t)("new_message"),children:(0,n.jsx)("button",{type:"submit",onClick:function(){t.push("/messages/new")},children:(0,n.jsx)(y.JO,{type:"plus-big",className:"cursor-pointer","data-testid":"new-message"})})})]}),(0,n.jsx)(eG,{})]})},eV=r(58361),eH=r(76017),eW=r(8610),eQ=r(98977),eJ=function(e){var t=e.badgeText,r=e.dataTestId,i=e.iconName,o=e.isActive,a=e.label,s=e.onClick,l=e.rightSideContent,c=e.isGray,u=e.shouldBold,d=void 0!==u&&u,f=e.ariaLabel,p=(0,eW.i)().getActiveInactiveClasses,m=!(0,g.isUndefined)(t)&&Number(t)>0&&!l;return(0,n.jsxs)("button",{type:"button","data-testid":r,onClick:s,className:b()("my-px flex w-full items-center px-2 py-1.5 text-sm",p(void 0!==o&&o)),"aria-labelledby":a,children:[(0,n.jsx)(y.JO,{type:i,size:16,"aria-hidden":!0}),(0,n.jsx)("div",{className:"ml-2 flex-1 text-left",children:(0,n.jsx)("h3",{className:b()("max-w-full truncate text-sm text-current",{"font-normal":!d,"font-bold":d}),children:a})}),m&&(0,n.jsx)(eQ.l,{ariaLabel:f,isGray:void 0!==c&&c,children:t}),!t&&l&&l]})},eK=function(e){var t=e.allDMsBadgeText,r=e.disabled,i=e.isMessagingEnabled,o=e.notificationBadgeText,a=e.onNotificationClick,s=e.resetNewNotificationsCount,l=e.shouldShowChatThreadsTab,c=e.unreadThreadsCount,u=(0,et.k6)(),d=u.location.pathname,f=(0,p.Fs)(),m=(0,p.j)(),b=(0,p.BT)(),y=(0,p.HE)(),v=d.includes((0,k.yg)()),_=d.includes((0,k.Ng)()),x=d.includes((0,k.Rj)()),j=d.includes((0,k.AM)());return(0,n.jsxs)(n.Fragment,{children:[!m&&(y?(0,n.jsx)(eJ,{dataTestId:"notifications-menu",label:(0,h.t)("notifications.page_title"),iconName:"sidebar-bell",badgeText:o,ariaLabel:(0,h.t)("community_sidebar.unread_notifications",{count:Number(o)}),onClick:function(){null==s||s(),u.push((0,k.aK)())},isActive:x}):(0,n.jsx)(eR.i9,{button:(0,n.jsx)(eJ,{dataTestId:"notifications-menu",label:(0,h.t)("notifications.page_title"),iconName:"sidebar-bell",badgeText:o,ariaLabel:(0,h.t)("community_sidebar.unread_notifications",{count:Number(o)}),onClick:function(){f&&(0,g.isFunction)(a)&&!r&&a()},isActive:x}),onOpen:s,disabled:r||!(0,g.isFunction)(a),children:(0,n.jsx)("div",{className:"flex h-full w-full flex-col","data-testid":"notifications-drawer",children:(0,n.jsx)(eV.u,{})})})),i&&!m&&(b?(0,n.jsx)(eR.i9,{button:(0,n.jsx)(eJ,{dataTestId:"chat-menu",label:(0,h.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:t,ariaLabel:(0,h.t)("community_sidebar.unread_messages",{count:Number(t)}),onClick:function(){return f&&u.push((0,k.yg)())},isActive:v}),disabled:r,children:(0,n.jsx)(eq,{})}):(0,n.jsx)(eJ,{dataTestId:"chat-menu",label:(0,h.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:t,ariaLabel:(0,h.t)("community_sidebar.unread_messages",{count:Number(t)}),onClick:function(){return u.push((0,k.co)({url:(0,k.yg)()}))},isActive:v})),l&&!m&&(0,n.jsx)(eJ,{dataTestId:"chat-threads-menu",label:(0,h.t)("chat_threads"),iconName:"16-chat-threads",onClick:function(){return u.push((0,k.Ng)())},isActive:_,badgeText:String(c),ariaLabel:(0,h.t)("community_sidebar.unread_messages",{count:Number(c)})}),f&&(0,n.jsx)(eR.i9,{button:(0,n.jsx)(eJ,{dataTestId:"bookmarks-menu",label:(0,h.t)("header_v3.bookmarks"),iconName:"16-bookmark",onClick:function(){return u.push((0,k.AM)())},isActive:j}),disabled:r,children:(0,n.jsx)(eH.BookmarksList,{})})]})},e$=function(e){var t=e.dataTestId,r=e.disabled,i=void 0!==r&&r,o=e.iconName,a=e.label,s=e.linkTo,l=e.show;return void 0===l||l?(0,n.jsxs)("a",{"data-testid":t,href:s,className:"text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex w-full cursor-pointer items-center rounded-md bg-transparent px-2 py-1.5 text-sm",onClick:function(e){i&&e.preventDefault()},title:a,children:[(0,n.jsx)(y.JO,{type:o,size:16,"aria-hidden":!0}),(0,n.jsx)("div",{className:"ml-2 flex-1",children:(0,n.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:a})})]}):null},eX=function(e){var t=e.badgeText,r=e.isGrayBadge,i=e.show,o=e.dataTestId,a=e.iconName,l=e.label,c=e.linkTo,u=e.disabled,d=void 0!==u&&u,f=e.isActive,p=void 0!==f&&f,m=(0,eW.i)().getActiveInactiveClasses,h=(0,s.wh)(),v=h.currentCommunity,g=h.currentCommunityMember;return void 0===i||i?(0,n.jsxs)(eN.OL,{"data-testid":o,to:c,className:function(e){return b()("my-px flex w-full cursor-pointer items-center px-2 py-1.5 text-sm",m(e||p))},onClick:function(e){if(d)return void e.preventDefault();!g&&(null==v?void 0:v.is_private)&&(e.preventDefault(),window.location.assign(c))},title:l,children:[(0,n.jsx)(y.JO,{type:a,size:16,"aria-hidden":!0}),(0,n.jsx)("div",{className:"ml-2 flex-1",children:(0,n.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:l})}),t&&(0,n.jsx)(eQ.l,{isGray:void 0!==r&&r,children:t})]}):null},eY=function(e){var t=e.link,r=e.disabled,i=e.isHomePageEnabled,o=e.shouldShowActiveHomeLink,a=e.shouldShowMemberDirectory,s=e.shouldShowAllEventsPage,l=e.shouldShowCoursesDirectory,c=e.shouldShowLeaderboard;return"home"===t.kind?(0,n.jsx)(eX,{label:(0,h.t)("feed"),linkTo:"/feed",iconName:"home-v2",disabled:r,isActive:o,show:i}):"members"===t.kind?(0,n.jsx)(eX,{label:t.label||(0,h.t)("members_directory.menu.title"),linkTo:(0,e_.UI)(),iconName:"members-v2",disabled:r,show:a}):"events"===t.kind?(0,n.jsx)(eX,{label:t.label||(0,h.t)("events.title"),linkTo:"/events",iconName:"16-calendar",disabled:r,show:s}):"courses"===t.kind?(0,n.jsx)(eX,{label:t.label||(0,h.t)("courses.directory.title"),linkTo:"/courses",iconName:"16-book",disabled:r,isGrayBadge:!0,show:l}):"leaderboard"===t.kind?(0,n.jsx)(eX,{label:t.label||(0,h.t)("leaderboard.title"),linkTo:"/leaderboard?period=7_days",iconName:"16-analytics",disabled:r,isGrayBadge:!0,show:c}):"custom"===t.kind?(0,n.jsx)(e$,{disabled:r,iconName:"16-site-link",label:t.label,linkTo:t.linkTo,show:!t.isDisabled}):null},e0=function(e){var t=e.allDMsBadgeText,r=e.disabled,i=void 0!==r&&r,o=e.hasCurrentCommunityMember,a=e.isHomePageEnabled,l=void 0!==a&&a,c=e.isMessagingEnabled,u=e.isOnboardingActive,d=e.notificationBadgeText,f=e.onGettingStartedClick,m=e.onGettingStartedClose,b=e.onNotificationClick,v=e.onSearchClick,_=e.resetNewNotificationsCount,x=e.shouldShowActiveHomeLink,j=void 0!==x&&x,w=e.shouldShowAllEventsPage,O=void 0!==w&&w,S=e.shouldShowChatThreadsTab,k=e.shouldShowCoursesDirectory,P=void 0!==k&&k,C=e.shouldShowLeaderboard,N=void 0!==C&&C,A=e.shouldShowMemberDirectory,I=void 0!==A&&A,E=e.shouldShowOnboarding,T=e.unreadThreadsCount,L=e.links,D=(0,p.j)(),M=(0,s.wh)(),R=M.currentCommunity,B=!!(!M.currentCommunityMember&&(null==R?void 0:R.is_private));return(0,n.jsxs)("div",{className:"mt-2.5 px-3",children:[!D&&!B&&(0,n.jsx)(eJ,{label:(0,h.t)("search_item"),onClick:function(){return(0,g.isFunction)(v)&&v()},iconName:"16-search"}),void 0!==E&&E&&(0,n.jsx)(eJ,{label:(0,h.t)("getting_started"),iconName:"lightning",isActive:void 0!==u&&u,onClick:function(){(0,g.isFunction)(f)&&!i&&f()},rightSideContent:(0,n.jsx)("button",{type:"button",className:"flex h-5 w-5 rounded py-0.5 transition-colors hover:bg-black/10 focus:bg-black/10",onClick:function(){(0,g.isFunction)(m)&&!i&&m()},"aria-label":(0,h.t)("close"),children:(0,n.jsx)(y.JO,{type:"16-close",size:16})})}),void 0!==o&&o&&(0,n.jsx)(eK,{notificationBadgeText:void 0===d?"":d,onNotificationClick:b,disabled:i,resetNewNotificationsCount:_,allDMsBadgeText:void 0===t?"":t,isMessagingEnabled:void 0!==c&&c,unreadThreadsCount:T,shouldShowChatThreadsTab:void 0!==S&&S}),L.map(function(e){return(0,n.jsx)(eY,{link:e,disabled:i,isHomePageEnabled:l,shouldShowActiveHomeLink:j,shouldShowMemberDirectory:I,shouldShowAllEventsPage:O,shouldShowCoursesDirectory:P,shouldShowLeaderboard:N},e.linkTo)})]})},e1=r(44994),e2=function(){var e,t,r=(0,et.k6)(),i=(0,ew.d)(),o=i.links,a=i.adminVisiblePlatformLinks,s=i.memberVisiblePlatformLinks,l=(0,$.I)(),c=l.shouldShowOnboarding,u=l.isOnboardingActive,d=l.hideOnboardingConfirmationModal,f=l.currentCommunity,p=l.currentCommunitySettings,m=l.currentCommunityMember,b=l.showSpotlightSearch,h=l.shouldShowAllEventsPage,y=(0,e1.R)(),v=y.newNotificationCount,g=y.toggleNotificationDrawer,_=y.resetNewNotificationsCount,j=(0,ex.rZ)().unreadThreadsCount,w=(0,ex.K$)().unreadChatCount,O=(0,eg.c8)().data,S=(0,x.vb)(m),k=(0,ej.gq)().shouldShowMessagingRoutes,P=(null==m||null==(e=m.policies)?void 0:e.can_access_threads_tab)||j>0,C=S?a:s,N=function(e){return C.some(function(t){return t.kind===e})},A=(0,x.VP)(m,p)&&N("members"),I=(null==f||null==(t=f.policies)?void 0:t.can_view_courses_directory)&&N("courses"),E=h&&N("events"),T=((null==O?void 0:O.enabled)||S)&&N("leaderboard");return(0,n.jsx)(e0,{allDMsBadgeText:String(w),hasCurrentCommunityMember:!!m,isHomePageEnabled:null==f?void 0:f.home_page_enabled,isMessagingEnabled:k,isOnboardingActive:u,notificationBadgeText:String(v),onGettingStartedClick:function(){return r.push(e_.Fy.onboarding())},onGettingStartedClose:d.show,onNotificationClick:function(){g(),_()},onSearchClick:b,shouldShowMemberDirectory:A,shouldShowOnboarding:c,shouldShowCoursesDirectory:I,shouldShowChatThreadsTab:P,resetNewNotificationsCount:_,unreadThreadsCount:j,shouldShowAllEventsPage:E,shouldShowLeaderboard:T,links:o})},e3=r(30940),e6=r(98329),e4=function(e){var t=e.variant,r=e.small,i=(0,s.wh)(),o=i.currentCommunityMember,a=i.isLoading,l=(0,e6.t)();return a||!(0,x.vb)(o)?null:(0,n.jsx)(P.z,{variant:void 0===t?"primary":t,onClick:function(){l.show()},small:void 0===r||r,children:(0,n.jsx)("span",{children:(0,h.t)("live_streams.now_live.go_live")})})},e5=r(59361),e8=r(96533),e9=function(e){var t=e.headline,r=e.name;return(0,n.jsxs)("div",{className:"flex max-w-[128px] flex-col text-left",children:[(0,n.jsx)("span",{className:"text-c-sidebar truncate text-sm font-medium",children:void 0===r?"":r}),(0,n.jsx)("span",{className:"text-c-sidebar truncate text-sm font-normal",children:void 0===t?"":t})]})},e7=r(98363),te={strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,8]}}]},tt=function(e){var t=e.imageUrl,r=e.name,i=void 0===r?"":r,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=void 0===s?"":s,c=e.headline,u=e.showMemberBilling,d=e.canAccessAuthenticationPage,f=e.canShowPaywallsAffiliate,p=(0,et.TH)(),m=(0,e8.r)().show,b=[];return b.push({value:(0,h.t)("view_profile"),label:(0,h.t)("view_profile"),onClick:function(){return m({memberPublicId:l})},icon:"16-account",dataTestId:"profile-link"},{value:(0,h.t)("edit_profile"),label:(0,h.t)("edit_profile"),onClick:function(){return(0,g.isFunction)(o)&&o()},icon:"16-edit",dataTestId:"edit-profile-link"},{value:(0,h.t)("notification"),label:(0,h.t)("notification"),pathTo:k.du.notifications(p),icon:"sidebar-bell",dataTestId:"notification-link"}),void 0!==d&&d&&b.push({value:(0,h.t)("authentication"),label:(0,h.t)("authentication"),pathTo:k.du.authentication(p),icon:"16-lock-unlocked",dataTestId:"authentication-link"}),void 0!==u&&u&&b.push({value:(0,h.t)("billing"),label:(0,h.t)("billing"),pathTo:k.du.billing(p),icon:"credit-card",dataTestId:"member-billing-link"}),void 0!==f&&f&&b.push({value:(0,h.t)("member_profile_modal.affiliate_dashboard.title"),label:(0,h.t)("member_profile_modal.affiliate_dashboard.title"),pathTo:k.du.affiliate(p),icon:"16-paywalls-affiliates",dataTestId:"member-affiliate-link"}),b.push({value:"separator"},{value:(0,h.t)("sign_out"),label:(0,h.t)("sign_out"),onClick:function(){return(0,g.isFunction)(a)&&a()},icon:"16-sign-out"}),(0,n.jsx)(M.Lt,{size:"full",direction:"top-start",dataTestId:"user-profile-dropdown",className:"inline-flex",buttonWrapperClassName:"inline-flex",button:(0,n.jsxs)("div",{className:"flex items-center gap-[14px]","data-testid":"user-profile-button",children:[(0,n.jsx)(e7.s,{name:i,src:void 0===t?"":t,size:"10"}),(0,n.jsx)(e9,{headline:void 0===c?"":c,name:i})]}),popperOptions:te,children:(0,n.jsxs)("div",{"data-testid":"user-profile-menu",children:[(0,n.jsx)(M.Lt.Header,{children:(0,h.t)("sidebar_account")}),(0,n.jsx)(M.Lt.IconWithBadgeList,{options:b})]})})},tr=function(e){var t=e.headline,r=e.imageUrl,i=e.name,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=e.showMemberBilling,c=e.canAccessAuthenticationPage,u=e.canShowPaywallsAffiliate;return(0,n.jsx)(tt,{imageUrl:void 0===r?"":r,headline:void 0===t?"":t,name:void 0===i?"":i,onEditProfileClick:o,onSignOutClick:a,publicUid:void 0===s?"":s,showMemberBilling:void 0!==l&&l,canAccessAuthenticationPage:void 0!==c&&c,canShowPaywallsAffiliate:void 0!==u&&u})},tn=r(35904),ti=function(e){var t=e.children,r=e.className,i=(0,tn.RE)();return(0,n.jsx)("div",{className:b()("border-c-sidebar bg-c-sidebar bottom-0 w-[inherit] border-t px-4 py-3",r),"data-testid":"profile-section",style:i,children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:t})})},to=function(e){var t=e.headline,r=e.imageUrl,i=e.name,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=e.showMemberBilling,c=e.canAccessAuthenticationPage,u=e.canShowPaywallsAffiliate,d=e.children,f=e.className;return(0,n.jsxs)(ti,{className:f,children:[(0,n.jsx)(tr,{headline:void 0===t?"":t,imageUrl:void 0===r?"":r,name:void 0===i?"":i,onEditProfileClick:o,onSignOutClick:a,publicUid:void 0===s?"":s,showMemberBilling:void 0!==l&&l,canAccessAuthenticationPage:void 0!==c&&c,canShowPaywallsAffiliate:void 0!==u&&u}),d]})},ta=function(){var e=(0,et.k6)(),t=(0,et.TH)(),r=(0,s.wh)().currentCommunityMember,i=null==r?void 0:r.policies,o=(0,e5.W)().room;return r?(0,n.jsx)(to,{headline:r.headline,imageUrl:r.avatar_url,name:r.name,onEditProfileClick:function(){return e.push(k.du.profile(t))},onSignOutClick:function(){window.location.href=(0,k.jE)()},publicUid:null==r?void 0:r.public_uid,showMemberBilling:null==i?void 0:i.can_access_billing,canAccessAuthenticationPage:null==i?void 0:i.can_access_authentication_page,canShowPaywallsAffiliate:null==i?void 0:i.can_show_paywalls_affiliate,children:!o&&(0,n.jsx)("div",{className:"ml-5",children:(0,n.jsx)(e4,{})})}):null},ts=r(21381),tl=r(73928),tc=r(99714),tu=function(e){var t=e.onSortEnd,r=e.spaceGroupWithSpaces,o=e.onSpaceSortEnd,a=e.updateBeforeSortStart,l=e.spaceGroupDragProperties,c=(0,s.wh)(),u=c.currentCommunity,f=c.currentCommunityMember,m=(0,p.j)(),b=(0,p.ac)("(max-width: 1023px)"),h=(0,d.L)().refetchSpaceNotifications;(0,i.useEffect)(function(){f&&h()},[f,h]);var y=f||!(null==u?void 0:u.is_private);return(0,n.jsxs)(tc.F,{children:[!m&&(0,n.jsx)(ev.J,{}),(0,n.jsxs)(ey.S,{children:[b&&(0,n.jsx)(e2,{}),m&&(0,n.jsx)(e3.C,{}),y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eb,{distance:25,lockAxis:"y",onSortEnd:t,spaceGroupWithSpaces:r,onSpaceSortEnd:o,updateBeforeSortStart:a,spaceGroupDragProperties:l,shouldCancelStart:function(e){return v(e)},helperClass:"!pointer-events-auto"}),(0,n.jsx)(Q,{})]})]}),y&&(0,n.jsxs)(ts.G,{children:[(0,n.jsx)(tl.g,{}),!m&&(0,n.jsx)(ta,{}),(0,n.jsx)(eh.Q,{})]})]})};function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tf(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tp(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tf(o,n,i,a,s,"next",e)}function s(e){tf(o,n,i,a,s,"throw",e)}a(void 0)})}}function tm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function th(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return td(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return td(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tv=function(){var e=th((0,i.useState)({index:null,isDragging:!1}),2),t=e[0],r=e[1],p=(0,s.e2)(),m=p.helpers.isDataLoading,b=p.records,h=p.actions.refresh,y=(0,s.nT)(),v=y.helpers,g=v.isDataLoading,_=v.spaceVisibleOnSidebar,x=y.actions.refresh,j=(0,s.wh)(),w=j.currentCommunityMember,O=j.isLoading,S=th((0,i.useState)([]),2),k=S[0],P=S[1],C=_(),N=g()||m()||O,A=(0,d.L)().refetchSpaceNotifications;(0,i.useEffect)(function(){w&&A()},[w,A]),(0,i.useEffect)(function(){N||P(b.map(function(e){var t=C.filter(function(t){return t.space_group_id===e.id&&(0,u.l7)({space:t,spaceGroup:e})});return tb(tm({},e),{collapsed:(0,c.zb)({currentCommunityMember:w,spaceGroupId:e.id}),spaces:t})}).filter(function(e){return e.spaces.length>0||e.hide_non_member_spaces_from_sidebar||(0,c.yG)({spaceGroup:e})}))},[N,C,b,w]);var I=function(e){var t=e.spaceGroupId,r=e.orderedSpaceIds;return tp(function(){return ty(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,(0,l.t5)("/space_groups/".concat(t,"/reorder_spaces"),{method:"POST",body:JSON.stringify({order_array:r})})];case 1:return e.sent(),[4,x()];case 2:return e.sent(),[3,4];case 3:return console.error("Error while reordering space: ",e.sent()),[3,4];case 4:return[2]}})})()},E=(0,a.D)();return N||E?(0,n.jsx)(f.H,{}):(0,n.jsx)(tu,{onSortEnd:function(e){var t,n=e.oldIndex,i=e.newIndex,a=(0,o.q)(k,n,i);P(a),t=a.map(function(e){return e.id.toString()}),tp(function(){return ty(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,l.t5)("/space_groups/reorder",{method:"POST",body:JSON.stringify({order_array:t})})];case 1:return e.sent(),r({index:null,isDragging:!1}),h(),[3,3];case 2:return console.error("Error while reordering space groups: ",e.sent()),[3,3];case 3:return[2]}})})()},spaceGroupWithSpaces:k,onSpaceSortEnd:function(e){var t,r=e.oldIndex,n=e.newIndex,i=e.spaceGroup,a=k.map(function(e){if(e.id==i.id){var t=(0,o.q)(i.spaces,r,n);return tb(tm({},e),{spaces:t})}return e});P(a);var s=null==(t=a.find(function(e){return e.id===i.id}))?void 0:t.spaces.map(function(e){return e.id});I({spaceGroupId:i.id,orderedSpaceIds:s})},spaceGroupDragProperties:t,updateBeforeSortStart:function(e){r(function(t){return tb(tm({},t),{index:e.index,isDragging:!0})})}})}},62670:function(e,t,r){"use strict";r.d(t,{E:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-c-sidebar mt-4 flex flex-col gap-y-6 px-3 lg:mt-6 lg:px-6",children:t})}},73029:function(e,t,r){"use strict";r.d(t,{I:()=>S});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(35686),l=r(13532),c=r(17617),u=r(84326),d=r(60622),f=r(57363),p=r(43544),m=function(e){var t=e.position,r=e.isAdmin,i=e.canCreateSpaces,o=e.onCreateSpace,a=e.onCreateSpaceGroup,s=e.onToggle;return r||i?(0,n.jsx)(d.T,{children:(0,n.jsxs)(p.Lt,{className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,u.t)("community_sidebar.add_space_or_space_group"),button:(0,n.jsx)(f.JO,{type:"16-add-new",size:16,"aria-hidden":"true",useWithFillCurrentColor:!0}),onToggle:s,appendTo:document.body,direction:"bottom-start","data-testid":"spacegroup-add-wrapper",children:[i&&(0,n.jsx)(p.Lt.ItemWithLink,{onClick:o,children:(0,u.t)("add_space")}),r&&(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){a(t)},children:(0,u.t)("add_space_group")})]})}):null},b=function(e){var t=e.isActive,r=e.isCollapsed,i=void 0!==r&&r,o=(0,c.en)();return(0,n.jsx)("div",{className:a()("ml-1 mr-auto flex h-5 w-5 rounded py-0.5 transition-transform",{"hidden group-hover:flex":o,"hover:bg-c-sidebar-hover":!(void 0!==t&&t),"rotate-0":i,"rotate-90":!i}),"aria-label":i?(0,u.t)("community_sidebar.expand_group",{group_name:"space"}):(0,u.t)("community_sidebar.collapse_group",{group_name:"space"}),children:(0,n.jsx)(f.JO,{type:"cheveron-right",size:16,"aria-hidden":!0})})};function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){var t,r=e.isDropdownOpen,i=e.canManage,o=e.children,s=(0,c.en)();return(0,n.jsx)("div",{className:a()("flex w-full space-x-px",(h(t={},i?"group-hover:max-w-[calc(100%-56px)]":"group-hover:max-w-[calc(100%-32px)]",!r),h(t,i?"max-w-[calc(100%-56px)]":"max-w-[calc(100%-32px)]",r||!s),t)),children:o})},v=function(e){var t=e.isDropdownOpen,r=e.spaceGroup,i=e.isCollapsed,o=e.canManage;return(0,n.jsxs)(y,{isDropdownOpen:t,canManage:o,children:[(0,n.jsx)("h3",{className:"truncate text-sm font-semibold leading-5 text-current","data-id":r.id,"data-testid":"spaces-left-sidebar",title:r.name,children:r.name}),(0,n.jsx)(b,{isCollapsed:i})]})},g=r(96486),_=r(41342),x=function(e){var t,r,i=e.onAddMembersClick,o=e.onEditSpaceGroupClick,a=e.seeMembersLink,s=e.seeSpacesLink,l=e.onToggle,c=e.canManage,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onAddMembersClick","onEditSpaceGroupClick","seeMembersLink","seeSpacesLink","onToggle","canManage"]),m=(0,_.wh)().isViewOnlyMasquerading;return(0,n.jsxs)(p.Lt,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,u.t)("space_groups.view_space_group_options"),button:(0,n.jsx)(f.JO,{type:"16-menu-dots-horizontal",size:16,useWithFillCurrentColor:!0}),onToggle:l,popperOptions:{modifiers:[{name:"offset",options:{offset:[4,0]}}]},appendTo:document.body,direction:"bottom-start","data-testid":"spacegroup-options-wrapper",buttonDataTestId:"spacegroup-options-button"},d),r=r={children:[(0,n.jsx)(p.Lt.ItemWithLink,{to:s,role:"menuitem",children:(0,u.t)("space_groups.see_spaces")}),void 0!==c&&c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Lt.ItemWithLink,{to:a,role:"menuitem",children:(0,u.t)("space_groups.see_members")}),!m&&(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return(0,g.isFunction)(i)&&i()},role:"menuitem",children:(0,u.t)("space_groups.add_members")}),!m&&(0,n.jsx)(p.Lt.ItemWithLink,{role:"menuitem",onClick:function(){return(0,g.isFunction)(o)&&o()},children:(0,u.t)("space_groups.edit_space_group")})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},j=r(78456),w=function(e){var t=e.listId,r=e.isCollapsed,i=e.children,o=e.onCollapseToggle,s=e.isDragging,l=(0,_.wh)().currentCommunityMember;return(0,n.jsx)("button",{type:"button",className:a()("text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus-visible:text-c-sidebar focus-visible:bg-c-sidebar-hover focus-visible:outline-secondary mb-1 flex w-full select-none items-center justify-between rounded-lg px-4 py-1.5 text-sm font-semibold transition-colors duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"cursor-grab":!s&&(0,j.vb)(l),"cursor-grabbing":s}),"data-testid":"space-group",onClick:o,"aria-expanded":!(void 0!==r&&r),"aria-controls":void 0===t?"":t,children:i})};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t,r=e.canManage,o=void 0!==r&&r,u=e.children,d=e.id,f=e.isAdmin,p=void 0!==f&&f,b=e.isCollapsed,h=void 0!==b&&b,y=e.isDragging,g=e.listId,_=e.onAddMembersClick,j=e.onCollapseToggle,S=e.onCreateSpaceClick,k=e.onCreateSpaceGroupClick,P=e.onEditSpaceGroupClick,C=e.position,N=e.shouldDisplayOptions,A=e.spaceGroup,I=(0,c.en)(),E=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=E[0],L=E[1];return(0,n.jsxs)("div",{draggable:"false",id:d,className:"group relative",children:[(0,n.jsx)(w,{onCollapseToggle:void 0===j?function(){}:j,isDragging:void 0!==y&&y,isCollapsed:h,listId:g,children:(0,n.jsx)(v,{isDropdownOpen:T,canManage:o,spaceGroup:A,isCollapsed:h})}),(void 0===N||N)&&(0,n.jsxs)("div",{className:a()("text-c-sidebar absolute right-[1rem] top-[0.375rem] ml-1 flex gap-1",{"invisible group-focus-within:visible group-hover:visible":I&&!T}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"data-testid":"space-group-actions",children:[(0,n.jsx)(x,{onAddMembersClick:void 0===_?function(){}:_,onEditSpaceGroupClick:void 0===P?function(){}:P,seeMembersLink:l.Ts.members({spaceGroupSlug:A.slug}),seeSpacesLink:l.Ts.show({spaceGroupSlug:A.slug}),onToggle:L,canManage:o}),((0,s.yG)({spaceGroup:A})||p)&&(0,n.jsx)(m,{position:C,isAdmin:p,onCreateSpace:void 0===S?function(){}:S,onCreateSpaceGroup:void 0===k?function(){}:k,canCreateSpaces:(0,s.yG)({spaceGroup:A}),onToggle:L})]}),!h&&u]})}},45238:function(e,t,r){"use strict";r.d(t,{I:()=>i});var n=r(85893),i=function(e){var t,r,i=e.children,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"flex flex-col gap-y-1"},o),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},60155:function(e,t,r){"use strict";r.d(t,{z:()=>v});var n=r(85893),i=r(94184),o=r.n(i),a=r(70442),s=r(52928),l=r(85924),c=r(98977),u=r(51433),d=r(57363),f=r(41342),p=r(82859),m=r(78456),b=r(26801),h=r(80219),y=r(8610),v=function(e){var t,r=e.space,i=e.buttonLink,v=e.spaceNotificationDetail,g=void 0===v?{unread_content_count:0,unread_notifications_count:0}:v,_=(0,y.i)(),x=_.getActiveInactiveClasses,j=_.getUnreadClasses,w=(0,f.wh)().currentCommunityMember,O=(0,m.vb)(w),S=(0,l.TC)().currentAppearance,k=(0,a.TH)().state,P=(null!=k?k:{}).prevLocation,C=!!P&&!(null==P||null==(t=P.pathname)?void 0:t.startsWith("/c")),N=null!=g?g:{},A=N.unread_content_count,I=N.unread_notifications_count,E=void 0===I?0:I,T=A>0,L=E>0,D=(0,u.$)({shouldShowLockIconForNonMembers:r.show_lock_icon_for_non_members&&!r.is_space_member,isPrivate:r.is_private,isAdmin:O}),M=(0,b.d)([r.id]).resetUnreadCount;return(0,n.jsx)("div",{draggable:"false",children:(0,n.jsxs)(s.OL,{className:function(e){return o()("focus-visible:outline-secondary h-8.5 group flex items-center gap-2 !rounded-lg px-4 py-1.5 transition-colors duration-75 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",x(e,C),j(T))},draggable:"false","data-id":r.id,to:(void 0===i?"/":i)||{},onClick:function(e){(0,p.n2)(e)&&M()},children:[(0,n.jsx)("span",{className:"flex",children:(0,n.jsx)(h.S,{className:"flex !h-5 !max-h-5 !w-5 max-w-none items-center leading-none",emojiClassName:"text-sm justify-center",emoji:r.emoji,appearance:S,customEmojiUrl:r.custom_emoji_url,customEmojiDarkUrl:r.custom_emoji_dark_url,shouldUseLockIcon:D,lockIcon:(0,n.jsx)(d.JO,{size:16,type:"lock-v2"})})}),(0,n.jsx)("span",{className:"truncate",children:(0,n.jsx)("h4",{className:o()("text-xs-plus truncate",{"font-medium":!T,"font-semibold":T}),"data-testid":"space-name",children:r.name})}),(T||L)&&(0,n.jsx)(c.l,{isGray:!L,children:E>0?E:A>99?"99+":A})]})})}},8610:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(98250),i=r(85924),o=function(){var e=(0,n.q1)(),t=(0,i.TC)().currentTheme,r=e&&"custom"===t;return{getActiveInactiveClasses:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&t||e&&!t?r?"bg-c-active-item-color rounded-md text-c-active-item-text-color focus:text-c-active-item-text-color hover:text-c-active-item-text-color cursor-default":"bg-brand rounded-md text-brand-button focus:text-brand-button hover:text-brand-button cursor-default":"bg-transparent text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar cursor-pointer hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover rounded-md"},getUnreadClasses:function(e){return e?"rounded-md font-semibold":""}}}},61457:function(e,t,r){"use strict";r.d(t,{Q:()=>f});var n=r(85893),i=r(41342),o=r(17617),a=r(13542),s=r(73928),l=r(46654),c=r(38583),u=r(35904),d=function(e){var t=e.communitySlug,r=(0,u.RE)();return(0,n.jsx)(c.t,{className:"bg-c-sidebar justify-center !p-0",communitySlug:t,styles:r})},f=function(e){var t=e.isPreviewMode,r=(0,u.RE)(),c=(0,l.F)(),f=(0,a.K)().shouldShowBranding,p=(0,o.BT)(),m=(0,i.wh)().currentCommunity,b=(null!=m?m:{}).slug;return c||f?(0,n.jsxs)("div",{style:r,className:"border-c-sidebar bg-c-sidebar flex w-full flex-col gap-2 border-t px-6 pb-3.5 pt-4",children:[!p&&(0,n.jsx)(s.G,{isPreviewMode:void 0!==t&&t}),f&&(0,n.jsx)(d,{communitySlug:null!=b?b:""})]}):null}},79369:function(e,t,r){"use strict";r.d(t,{S:()=>b});var n=r(85893),i=r(94184),o=r.n(i),a=r(97858),s=r(1364),l=r(80926),c=r(504),u=r(17617),d=r(13542),f=r(46654),p=function(){var e=(0,f.F)(),t=(0,d.K)().shouldShowBranding;return{goLiveButtonHeight:39,poweredByHeight:16,extraContainerSpacing:(t||e?31:0)+(t&&e?8:0)}},m=function(){var e=(0,u.j)(),t=(0,s.k)().shouldShowTrialBanner,r=(0,l.Wk)().room,n=(0,d.K)().shouldShowBranding,i=(0,f.F)(),o=(0,c.f)(),a=p(),m=a.goLiveButtonHeight,b=a.poweredByHeight;return{paddingBottom:[48*!!o,63*!!e,63*!e,e&&t?48:0,e&&i?m:0,168*!!r,65*!e,n?b:0,a.extraContainerSpacing].reduce(function(e,t){return e+t},0)}},b=function(e){var t=e.children,r=m();return(0,n.jsx)("div",{className:o()("h-full"),style:r,children:(0,n.jsx)(a.E,{className:"h-full",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:t})})}},41009:function(e,t,r){"use strict";r.d(t,{v:()=>c});var n=r(85893),i=r(96486),o=r(94184),a=r.n(o),s=r(84326),l=function(e){var t=e.name,r=e.src,i=e.className;return(0,n.jsx)("img",{loading:"eager",id:"community-logo",alt:(0,s.t)("community_logo_alt",{community_name:t}),className:a()("max-h-9 max-w-[14.375rem]",i),src:r})},c=function(e){var t,r,o=e.communityName,a=e.logoType,s=e.logoUrl,c=e.as,u=void 0===c?"button":c,d=e.onLogoClick;return(0,n.jsx)(u,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"w-full min-w-0",id:"community-logo-wrapper",onClick:function(){return(0,i.isFunction)(d)&&d()}},"button"===u&&{buttonProps:{type:"button"}}),r=r={children:"logo"===a&&s?(0,n.jsx)(l,{name:o,src:s}):(0,n.jsxs)("div",{className:"text-c-header flex items-center gap-2",children:[s&&(0,n.jsx)("div",{children:(0,n.jsx)(l,{name:o,src:s})}),(0,n.jsx)("div",{className:"w-full min-w-0",children:(0,n.jsx)("h1",{"data-testid":"title-name",className:"text-c-header truncate text-left text-xl font-semibold normal-case leading-7 tracking-normal",children:o})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},26570:function(e,t,r){"use strict";r.d(t,{e:()=>X});var n=r(85893),i=r(96486),o=r(84326),a=r(35904),s=r(1168),l=r(41553),c=function(e){var t,r=e.logoUrl,i=e.iconUrl,o=e.bgColor,c=e.name,u=void 0===c?"":c,d=e.rootUrl,f=e.isActive,p=e.notificationCount,m=void 0===p?0:p,b=(0,a.Gf)().backgroundColor,h=!!r,y=!!i;return(0,n.jsx)("a",{href:d,children:(0,n.jsxs)("div",{className:(0,s.A)("relative flex items-center justify-center p-3",{"bg-tertiary rounded":void 0!==f&&f}),children:[(0,n.jsxs)("div",{className:"flex w-full items-center gap-6",children:[(0,n.jsx)("div",{className:"text-badge flex h-[40px] w-[40px] min-w-[40px] cursor-pointer items-center justify-center rounded uppercase",style:h||y?{}:{backgroundColor:o},children:(t=u.charAt(0),h?(0,n.jsx)("img",{loading:"lazy",src:r,alt:""}):y?(0,n.jsx)("img",{loading:"lazy",src:i,style:{width:"40",height:"40"},alt:""}):t)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:u})}),(0,n.jsx)(l.Z.LabelSm,{color:"text-light",children:d})]})]}),m>0&&(0,n.jsx)("span",{className:"text-badge flex h-[20px] min-w-[20px] items-center justify-center rounded-full bg-red-500 font-bold",style:{borderColor:b},children:(0,n.jsx)(l.Z.LabelSm,{color:"#fff",children:m})})]})})},u=r(6216),d=function(e){var t=e.onClickDone,r=(0,u.U)().communities;return(0,n.jsxs)("div",{className:"relative flex h-full w-full flex-col gap-1 py-1.5",children:[(0,n.jsxs)("div",{className:"mb-3.5 flex w-full cursor-pointer items-center justify-end px-3",children:[(0,n.jsx)("div",{className:"w-full flex-1",children:(0,n.jsx)(l.Z.LabelLg,{weight:"semibold",children:(0,o.t)("mobile_community_switcher.my_communities")})}),(0,n.jsx)("button",{type:"submit",onClick:t,children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)("mobile_community_switcher.done")})})]}),r.map(function(e){return(0,n.jsx)(c,{isActive:e.is_current_community,rootUrl:e.root_url,logoUrl:e.logo_attachment_url||"",iconUrl:e.icon_attachment_url||"",bgColor:e.brand_color,name:e.name},e.id)})]})},f=r(57105),p=r(34519),m=function(){var e=(0,f.dd)();return(0,n.jsxs)(p.u_,{isOpen:e.visible,onClose:e.hide,contentPortalId:"mobile-community-switcher-modal",title:(0,o.t)("community_switcher_title"),children:[(0,n.jsx)(p.u_.Overlay,{}),(0,n.jsx)(p.u_.Content,{size:"xl",children:(0,n.jsx)(p.u_.Body,{className:"!px-3",children:(0,n.jsx)(d,{onClickDone:e.hide})})})]})},b=f.gk.create(function(){return(0,n.jsx)(m,{})}),h=r(17617),y=r(85924),v=r(82684),g=r(94184),_=r.n(g),x=r(57363),j=r(43544),w=function(e){var t=e.children,r=e.hasFullWidth,i=e.dropDownOptions;return(0,n.jsx)(j.Lt,{direction:"bottom-start",transitionWrapperClassName:"mt-1 lg:-mt-2 !w-[16.25rem] !left-[1.65rem] lg:!-left-2.5",menuWrapperClassName:"!px-0 !mt-0",size:"full",popperOptions:{strategy:"absolute"},className:_()("h-full",{"w-full":void 0===r||r}),buttonWrapperClassName:"flex w-full h-full px-4 py-3",buttonClassName:"w-full focus-visible:outline-secondary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 rounded-md group",menuItemsClassName:"overflow-y-auto max-h-[calc(100vh-4rem)]",button:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[t,(0,n.jsx)("div",{className:"group-hover:bg-c-header-active text-c-header group-hover:text-c-header-active ml-1.5 flex h-5 w-5 flex-col items-center justify-center rounded-full transition-colors duration-150",children:(0,n.jsx)(x.JO,{size:12,type:"12-chevron-down",className:"!transition-none"})})]}),buttonDataTestId:"community-menu",children:(0,n.jsx)("div",{"data-testid":"community-dropdown-menu",children:(0,n.jsx)(j.Lt.IconWithBadgeList,{options:void 0===i?[]:i})})})},O=r(41009),S=r(78456),k=r(13532),P=r(41342),C=function(){var e=(0,P.wh)().currentCommunityMember,t=!!(!(0,h.ef)()&&((0,S.vb)(e)||(0,S.I$)(e))),r=(0,o.t)("settings_nav_v3.content.label");return{isVisible:t,link:k.qk.postsDashboard.index(),icon:"20-doc-v3",iconSize:20,title:r}},N=r(24869),A=r(76012),I=r(70442),E=r(58698),T=r(6439),L=r(81097),D=r(31220),M={value:"separator"};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(e){var t=e.memberCount,r=e.showCustomizeTheme,n=e.toggleTheme,i=e.viewAs,a=e.content,s=e.isCommunityOnPlus,l=e.isWorkflowsEnabled,c=e.isAffiliatesEnabled,u=e.isBannerVisible,d=e.shortcutsModalButton,f=e.hasAIAgentsAccess,p="16-20-mobile",m=(0,D.z)().isOverviewTabEnabled,b=(0,T.s)(),h=(0,E.Z)().isBrandedAppsBuilderUIEnabled,y=(0,I.TH)().pathname,v=[],g={value:"members",label:(0,o.t)("section_audience"),pathTo:k.Gp.index(),icon:"20-users-v3",iconSize:20};t&&(g.badge=String(t)),v.push(g),v.push.apply(v,B(a)),v.push({value:(0,o.t)("sidebar_email"),label:(0,o.t)("sidebar_email"),pathTo:L.L.email.overview,icon:"16-send",iconSize:20}),l&&v.push({value:(0,o.t)("sidebar_workflows"),label:(0,o.t)("sidebar_workflows"),pathTo:"/settings/workflows",icon:"20-flash-v3",iconSize:20}),v.push({value:(0,o.t)("analytics.analytics"),label:(0,o.t)("analytics.analytics"),pathTo:"/settings/analytics",icon:"20-analytics-v3",iconSize:20}),v.push({value:(0,o.t)("sidebar_ai_agents"),label:(0,o.t)("sidebar_ai_agents"),pathTo:"/settings/ai-agents/agents",icon:"20-community-bot",iconSize:20}),(void 0===f||f)&&v.push({value:(0,o.t)("sidebar_ai_inbox"),label:(0,o.t)("sidebar_ai_inbox"),pathTo:"/settings/ai-inbox",icon:"20-community-inbox",iconSize:20}),v.push({value:(0,o.t)("sidebar_paywalls"),label:(0,o.t)("sidebar_paywalls"),pathTo:"/settings/paywalls",icon:"20-currency-v3",iconSize:20}),c&&v.push({value:(0,o.t)("sidebar_paywalls_affiliates"),label:(0,o.t)("sidebar_paywalls_affiliates"),pathTo:"/settings/affiliates_settings",icon:"20-affiliates-v3",iconSize:20});var _=!!h;return v.push(function(){var e,t;if(!s)return{value:(0,o.t)("pricing_plans.title"),label:(0,o.t)("settings.billing.plans.title"),pathTo:(0,k.xn)(),icon:"20-card-v3",iconSize:20};return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},{value:(0,o.t)("pricing_plans.title"),label:(0,o.t)("settings_nav_v3.branded_apps_dashboard.title"),icon:p,iconSize:20}),t=t={pathTo:_?"/settings/plus":"/settings/plus/lite"},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}()),s||v.push({value:(0,o.t)("settings_nav_v3.settings.branded_app"),label:(0,o.t)("settings_nav_v3.settings.branded_app"),pathTo:"/settings/plus",icon:p,iconSize:20}),v.push({label:(0,o.t)("settings_nav_v3.site.label"),value:(0,o.t)("settings_nav_v3.site.label"),icon:"20-display",pathTo:L.L.site.index,iconSize:20}),v.push({label:(0,o.t)("settings_nav_v3.developers.title"),value:(0,o.t)("settings_nav_v3.developers.title"),icon:"20-code-tag",pathTo:m?L.L.developers.overview:L.L.developers.api,iconSize:20}),v.push({value:(0,o.t)("sidebar_settings"),label:(0,o.t)("sidebar_settings"),pathTo:"/settings",icon:"20-settings-v3",iconSize:20}),v.push(M),b&&v.push({value:(0,o.t)("settings_nav_v3.site_builder.label"),label:(0,o.t)("settings_nav_v3.site_builder.label"),pathTo:L.L.content.pages,icon:"20-display",iconSize:20}),r&&v.push({value:(0,o.t)("customize_theme.title"),label:(0,o.t)("customize_theme.title"),pathTo:"/settings/theme",icon:"20-color-palette-v3",iconSize:20}),v.push.apply(v,B(n)),d&&v.push(d),v.push(M),u||v.push(i),v.push({value:(0,o.t)("sidebar_invite_member"),label:(0,o.t)("sidebar_invite_member"),pathTo:"".concat(L.L.members.invite,"?from=").concat(y),icon:"20-user-plus-v3",iconSize:20}),v},z=function(e){var t=e.isVisible,r=e.link,n=e.icon,i=e.iconSize,o=e.title;return t?[{value:o,label:o,pathTo:r,icon:n,iconSize:i}]:[]};function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){var t=e.moderation,r=e.showToggleTheme,n=e.toggleTheme,i=e.content,o=e.shortcutsModalButton;return Z(i).concat([t],Z(r?[M]:[]),Z(n),Z(o?[o]:[]))},q=function(e){var t={value:(0,o.t)("sidebar_moderation"),label:(0,o.t)("sidebar_moderation"),pathTo:"/settings/moderation",icon:"20-shield-v3",iconSize:20};return e&&(t.badge=String(e)),t},V=r(63729),H=function(){var e=(0,V.v)();return{value:(0,o.t)("header_v3.keyboard_shortcuts"),label:(0,o.t)("header_v3.keyboard_shortcuts"),onClick:function(){e.show()},icon:"20-keyboard-shortcuts",iconSize:20}},W=function(e){var t=e.showToggleTheme,r=e.currentAppearance,n=e.toggleAppearance,a=void 0===n?i.noop:n;return t?[{value:r,label:r===y.OR.LIGHT?(0,o.t)("sidebar_switch_to_dark_mode"):(0,o.t)("sidebar_switch_to_light_mode"),onClick:a,icon:(y.OR.LIGHT,"20-moon-v3"),iconSize:20}]:[]},Q=function(e){var t=e.showBanner;return{icon:"20-open-eye-v3",iconSize:20,label:(0,o.t)("view_as"),onClick:function(){setTimeout(function(){t()},0)},value:"viewAs"}};function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function K(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return J(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(e){var t=e.isAdmin,r=e.isModerator,n=e.memberCount,i=e.moderationCount,o=e.showToggleTheme,a=e.showCustomizeTheme,s=e.isWorkflowsEnabled,l=(0,y.TC)(),c=l.currentAppearance,u=l.toggleAppearance,d=H(),f=W({currentAppearance:c,toggleAppearance:u,showToggleTheme:o}),p=(0,A.Vu)(),m=p.isBannerVisible,b=Q({showBanner:p.showBanner}),h=q(i),v=z(C()),g=(0,N.E)().isCommunityOnPlus,_=(0,P.wh)().currentCommunity,x=F({memberCount:n,showCustomizeTheme:a,toggleTheme:f,viewAs:b,content:v,isCommunityOnPlus:g,isWorkflowsEnabled:s,isAffiliatesEnabled:!!(null==_?void 0:_.affiliates_feature_flag_enabled),isBannerVisible:m,shortcutsModalButton:d,hasAIAgentsAccess:!!(null==_?void 0:_.ai_agents_feature_flag_enabled)});return t?x:r?G({moderation:h,showToggleTheme:o,toggleTheme:f,content:v,shortcutsModalButton:d}):K(d?[d]:[]).concat(K(f))},X=function(e){var t=e.communityName,r=void 0===t?"":t,o=e.isAdmin,a=e.isModerator,s=e.logoType,l=void 0===s?"icon":s,c=e.logoUrl,u=e.onLogoClick,d=e.showToggleTheme,p=e.showCustomizeTheme,m=e.memberCount,g=e.moderationCount,_=(0,h.ac)("(max-width: 1023px)"),x=(0,f.dd)(b),j=(0,y.wC)().display_community_switcher,S=$({isAdmin:void 0!==o&&o,isModerator:void 0!==a&&a,memberCount:m,moderationCount:g,showToggleTheme:void 0!==d&&d,showCustomizeTheme:void 0!==p&&p,isWorkflowsEnabled:(0,v.I)()}),k=_&&j;return k?(0,n.jsxs)("div",{className:"flex w-full items-center px-4",id:"community-logo-mobile-community-switcher",children:[(0,n.jsx)(O.v,{communityName:r,logoType:l,logoUrl:c,onLogoClick:function(){x.show()}}),(0,n.jsx)(w,{hasFullWidth:!1,dropDownOptions:S})]}):(0,i.isEmpty)(S)?(0,n.jsx)("div",{className:"px-4",id:"community-logo-no-dropdown",children:(0,n.jsx)(O.v,{communityName:r,logoType:l,logoUrl:c,onLogoClick:function(){if(k)return x.show();u&&u()}})}):(0,n.jsx)(w,{dropDownOptions:S,children:(0,n.jsx)(O.v,{communityName:r,logoType:l,logoUrl:c,as:"div"})})}},59649:function(e,t,r){"use strict";r.d(t,{F:()=>l});var n=r(85893),i=r(94184),o=r.n(i),a=r(60622),s=r(35904),l=function(e){var t=e.hasPadding,r=e.isSticky,i=e.children,l=e.className,c=(0,s.RE)();return(0,n.jsx)(a.T,{children:(0,n.jsx)("div",{className:o()(l,"top-0 z-30 flex h-16 min-h-[4rem] items-center justify-between gap-2",{"px-4":void 0===t||t,sticky:void 0===r||r}),"data-testid":"top_section_container",style:c,children:i})})}},25032:function(e,t,r){"use strict";r.d(t,{J:()=>p});var n=r(85893),i=r(29378),o=r(41342),a=r(78456),s=r(98250),l=r(40404),c=r(17617),u=r(85924),d=r(26570),f=r(59649),p=function(){var e=(0,o.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,p=e.currentCommunitySettings,m=(0,l.C)().goToCommunityRootPath,b=(0,u.TC)(),h=b.currentAppearance,y=b.isDarkAppearance,v=(0,s.q1)(),g=(0,a.vb)(r),_=(0,a.I$)(r),x=(0,i._v)(t,y),j=x.url,w=x.type,O=!!(null==p?void 0:p.dark_mode_enabled),S=(0,c.ef)(),k=(0,s.PN)(),P=null!=t?t:{},C=P.member_count,N=P.moderation_count,A=P.dark_icon_url,I=P.dark_logo_url,E=j;return h===u.OR.DARK&&k&&("logo"===w&&I?E=I:"icon"===w&&A&&(E=A)),(0,n.jsx)(f.F,{hasPadding:!1,children:(0,n.jsx)(d.e,{communityName:null==t?void 0:t.name,isAdmin:g,isModerator:_,logoType:w,logoUrl:E,showToggleTheme:O,showCustomizeTheme:v&&!S,onLogoClick:m,memberCount:C,moderationCount:N})})}},98977:function(e,t,r){"use strict";r.d(t,{l:()=>a});var n=r(85893),i=r(94184),o=r.n(i),a=function(e){var t=e.children,r=e.isGray,i=void 0!==r&&r,a=e.ariaLabel;return(0,n.jsx)("div",{className:o()("ml-auto min-w-[1.75rem] rounded px-1.5 py-1 text-center text-[11px] font-semibold leading-[11px]",{"bg-c-sidebar-badge text-c-sidebar-badge-text":!i,"border-primary bg-primary group-hover:bg-primary text-dark my-[-1px] border":i}),"data-testid":"unread-count","aria-label":a,children:t})}},44994:function(e,t,r){"use strict";r.d(t,{R:()=>g});var n=r(67294),i=r(96486),o=r(85893),a=r(84326),s=r(57105),l=r(28892),c=r(13532),u=r(39964),d=r(84579),f=r(84057),p=r(83485),m=r(34860),b=r(58361),h=function(e){var t=e.containerElement,r=e.communityMemberId,i=e.newNotificationCount,h=(0,s.dd)(),y=(0,f.f)(m.dL),v=y.newNotificationCount,g=y.setNewNotificationCount,_=y.onNotificationEventReceive,x=y.resizeNotificationWindow,j=(0,u.j)(),w=j.prependTitle,O=j.resetTitleToOriginal;return(0,n.useEffect)(function(){g(i)},[i]),(0,d.I)(r,_),(0,p.w)(x),(0,n.useEffect)(function(){v?document.title=w("(".concat(v,") ")):document.title=O()},[v]),(0,o.jsx)(l.d,{maskClosable:!0,hideHeader:!0,noWrapperPadding:!0,open:h.visible,onClose:h.hide,children:(0,o.jsxs)("div",{className:"notifications__wrapper--drawer",id:t+"NotificationWrapperOuter","data-testid":"notifications-drawer",children:[(0,o.jsx)(b.u,{handleClose:h.hide},"notification-".concat(h.visible)),(0,o.jsx)("div",{className:"notifications__footer",children:(0,o.jsx)("span",{children:(0,o.jsx)("a",{href:(0,c.Rj)(),children:(0,o.jsx)("div",{children:(0,a.t)("view_all_notifications")})})})})]})})},y=s.gk.create(function(e){var t=e.containerElement,r=e.communityMemberId,n=e.newNotificationCount;return(0,o.jsx)(h,{containerElement:t,communityMemberId:r,newNotificationCount:n})}),v=r(41342),g=function(){var e=(0,v.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,o=(0,f.f)(),a=o.newNotificationCount,l=o.fetchNewNotificationsCount,c=o.resetNewNotificationsCount,u=o.onNotificationEventReceive;(0,d.I)(null==r?void 0:r.id,u),(0,n.useEffect)(function(){r&&l(null==t?void 0:t.id)},[null==t?void 0:t.id,r]);var p=(0,s.dd)(y),m=(0,n.useCallback)(function(){if(!(0,i.isEmpty)(r)&&!(0,i.isEmpty)(t)){var e;p.show({communityMemberId:null!=(e=null==r?void 0:r.id)?e:0,newNotificationCount:a})}},[r,t,p]);return{newNotificationCount:a,toggleNotificationDrawer:m,resetNewNotificationsCount:c}}},79414:function(e,t,r){"use strict";r.d(t,{I:()=>d});var n=r(70442),i=r(31136),o=r(37091),a=r(78456),s=r(82610),l=r(42045),c=r(41342),u=r(49882),d=function(){var e=(0,s.u)().isChecklistAvailable,t=(0,c.wh)(),r=t.currentCommunity,d=t.currentCommunityMember,f=t.currentCommunitySettings,p=(0,l.m)(),m=!!(0,n.$B)(u.Fy.onboarding()),b=(0,i.S)(),h=!!(0,a.vb)(d),y=(0,o.D)(),v=!!(h||(null==f?void 0:f.public_events_page));return{shouldShowOnboarding:e,isOnboardingActive:m,hideOnboardingConfirmationModal:b,currentCommunity:r,currentCommunitySettings:f,currentCommunityMember:d,isAdmin:h,spotlightSearch:y,toggleSpaceGroupDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;p.show({position:e})},showSpotlightSearch:function(){y.show()},shouldShowAllEventsPage:v}}},30940:function(e,t,r){"use strict";r.d(t,{C:()=>y});var n=r(85893),i=r(84326),o=r(41342),a=r(49882),s=r(94184),l=r.n(s),c=r(70442),u=r(52928),d=r(8610),f=r(57363),p=function(e){var t=e.text,r=e.linkTo,i=e.icon,o=e.isActive,s=e.isDisabled,p=void 0!==s&&s,m=e.onClose,b=(0,d.i)().getActiveInactiveClasses,h=(0,c.TH)(),y=(0,c.$B)({path:r,exact:!0}),v=h.state,g=(null!=v?v:{}).prevLocation,_=b(!!y||void 0!==o&&o,!!g&&!g.pathname.startsWith("/c"),r.includes(a.Fy.feed()));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.OL,{to:r,title:t,className:l()("h-8.5 flex w-full items-center gap-2 !rounded-lg px-4 py-1.5 transition-colors duration-200",_),onClick:function(e){p&&e.preventDefault()},"aria-disabled":p,children:[(0,n.jsx)(f.JO,{type:i,size:20}),(0,n.jsx)("h4",{className:"text-xs-plus max-w-full truncate font-medium text-current",children:t})]}),m&&(0,n.jsx)("button",{className:l()("focus-visible:outline-secondary absolute right-2 top-1/2 flex h-5 w-5 -translate-y-1/2 rounded focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",_),type:"button",onClick:m,children:(0,n.jsx)(f.JO,{type:"16-close",size:16})})]})},m=r(31136),b=r(82610);function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var y=function(e){var t=e.isDisabled,r=void 0!==t&&t,s=e.isFeedLinkActive,l={shouldShowOnboarding:(0,b.u)().isChecklistAvailable,hideOnboardingModal:(0,m.S)()},c=l.shouldShowOnboarding,u=l.hideOnboardingModal,d=(0,o.wh)().currentCommunity,f=(null!=d?d:{}).home_page_enabled;return c||f?(0,n.jsx)("nav",{"aria-label":(0,i.t)("secondary_navigation_bar"),children:(0,n.jsxs)("ul",{className:"bg-c-sidebar mt-4 flex list-none flex-col gap-y-1 px-3 lg:mt-6 lg:px-6",children:[c&&(0,n.jsx)("li",{className:"relative",children:(0,n.jsx)(p,{text:(0,i.t)("getting_started"),linkTo:a.Fy.onboarding(),icon:"20-todo-list-v3",isDisabled:r,onClose:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,u.show()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)})})()}})}),f&&(0,n.jsx)("li",{className:"relative",children:(0,n.jsx)(p,{text:(0,i.t)("feed"),linkTo:a.Fy.feed(),icon:"20-feed-v3",isDisabled:r,isActive:void 0!==s&&s})})]})}):null}},21381:function(e,t,r){"use strict";r.d(t,{G:()=>a});var n=r(85893),i=r(94184),o=r.n(i),a=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:o()("fixed bottom-0 flex w-[inherit] flex-col items-center bg-transparent sm:max-w-[21.25rem] md:max-w-[18.5rem]",r),children:t})}},73928:function(e,t,r){"use strict";r.d(t,{g:()=>_,G:()=>b});var n=r(85893),i=r(94184),o=r.n(i),a=r(84326),s=r(80926),l=r(98329),c=r(41342),u=r(78456),d=r(57363),f=r(39905),p=r(35904),m=r(46654),b=function(e){var t=e.isPreviewMode,r=e.inSettings,i=void 0!==r&&r,b=(0,s.IO)(),h=b.isLoading,y=b.isMonthlyHourLimitReached,v=b.isStorageLimitReached,g=(0,l.t)(),_=(0,p.RE)(),x=(0,m.F)(),j=(0,c.wh)(),w=j.currentCommunityMember,O=j.isViewOnlyMasquerading,S=!(0,u.vb)(w)&&(h||y||v);return x?(0,n.jsx)("div",{className:o()("flex w-full items-center justify-between",{"pl-4 pr-0":i,"bg-c-sidebar":!i,"cursor-not-allowed":O}),style:_,children:(0,n.jsx)(f.z,{full:!0,onClick:function(){g.show()},variant:"secondary-light",disabled:S,className:o()("!border-dark hover:bg-secondary px-4 py-[8.5px] font-medium transition-colors duration-150 ease-in-out",{"pointer-events-none":void 0!==t&&t||O}),children:(0,n.jsxs)("div",{className:"text-selector-active flex items-center justify-center",children:[(0,n.jsx)(d.JO,{type:"16-go-live",size:16,className:"text-default mr-2"}),(0,a.t)("sidebar_footer_v3.go_live")]})})}):null},h=r(71458),y=r(37588),v=r(98363),g=r(41553),_=function(){var e,t,r,i=(0,s.Wk)(),o=i.room,l=i.canManage,c=i.handleNavigateToRoom,u=i.handleEndStream,p=(0,h.tv)({title:(0,a.t)("live_streams.".concat((0,y.vX)(o),"_ended.confirm")),onConfirm:u}),m=p.confirmModal,b=p.onConfirmButtonClick;return o?(0,n.jsxs)("div",{className:"bg-sidebar-footer-live-indicator mb-1 w-full max-w-[256px] rounded-xl p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(v.s,{size:"6",src:null==o||null==(e=o.creator)?void 0:e.avatar_url,name:null==o||null==(t=o.creator)?void 0:t.name}),(0,n.jsx)(g.Z.BodySm,{color:"text-white max-w-[15ch]",truncate:!0,children:null==o||null==(r=o.creator)?void 0:r.name}),(0,n.jsx)(d.JO,{type:"24-live-waveform",size:24})]}),(0,n.jsx)("div",{className:"bg-c-sidebar-badge flex items-center justify-center rounded-[4px] px-2 py-1",children:(0,n.jsx)("span",{className:"text-xxs font-bold uppercase leading-3 text-white",children:(0,a.t)("sidebar_footer_v3.live")})})]}),(0,n.jsx)(g.Z.BodyMd,{color:"text-white line-clamp-2",weight:"font-semibold",children:null==o?void 0:o.name}),(0,n.jsx)(f.z,{full:!0,className:"!bg-circle mt-4",onClick:c,children:(0,a.t)("sidebar_footer_v3.join")}),l&&(0,n.jsxs)(g.Z.BodyXs,{color:"text-white mt-2",children:[(0,a.t)("live_streams.room.cant_join"),(0,n.jsx)("button",{type:"button",className:"ml-1 cursor-pointer text-xs font-semibold text-white",onClick:b,children:(0,a.t)("live_streams.room.".concat((0,y.vX)(o),".end"))})]}),m]}):null}},46654:function(e,t,r){"use strict";r.d(t,{F:()=>a});var n=r(80926),i=r(41342),o=r(78456),a=function(){var e=(0,i.wh)(),t=e.isLoading,r=e.currentCommunityMember,a=(0,n.Wk)().room;return!t&&(0,o.U8)(r)&&!a}},99714:function(e,t,r){"use strict";r.d(t,{F:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-c-sidebar w-sidebar-v3 fixed flex h-full max-h-full flex-col",children:t})}},35904:function(e,t,r){"use strict";r.d(t,{Gf:()=>l,RE:()=>c});var n=r(27950),i=r(48266),o=r(85924),a=function(){var e=(0,o.TC)(),t=e.customColors,r=e.isCustomTheme,i=e.currentTheme,a=e.currentAppearance,s=(null==(c=t[a])?void 0:c.sidebar_background_color)||"#fff",l="#fff";if("custom"!==i){var c,u,d,f=null===o.v||void 0===o.v||null==(d=o.v[i])||null==(u=d[a])?void 0:u["--color-community-sidebar-background"];f&&(l=f)}return r?(0,n.Vi)(s):(0,n.Vi)(l)},s=function(){var e=a();return e.isDark()?e.lighten(.1).toHex():e.darken(.1).toHex()},l=function(){var e=a().toHex();return(0,i.W)()?{backgroundColor:e}:{}},c=function(){var e=s();return(0,i.W)()?{borderColor:e}:{}}},10060:function(e,t,r){"use strict";r.d(t,{Bb:()=>s,lV:()=>a,zo:()=>l});var n=r(84326),i=r(41342),o="space_access_management",a=function(e){var t,r,i,a;return{id:e.id,name:e.name,icon:(t=e.visibility,(r=e.is_private)&&"private"===t?"16-lock":r&&"secret"===t?"16-eye-closed":"16-members-bis"),tooltipText:(i=e.visibility,(a=e.is_private)&&"private"===i?(0,n.t)([o,"tooltip_icon.private"]):a&&"secret"===i?(0,n.t)([o,"tooltip_icon.secret"]):(0,n.t)([o,"tooltip_icon.open"]))}},s=function(e){return{id:e.id,name:e.name,spaces:[]}},l=function(e){var t=e.serializeSpaceGroup,r=e.serializeSpace,n=(0,i.nT)(),o=n.records,a=n.isLoading,s=(0,i.e2)(),l=s.records,c=s.isLoading,u=[],d={},f={};return l.forEach(function(e){var r=t(e);u.push(r),d[e.id]=r}),o.forEach(function(e){var t,n=r(e);null==(t=d[e.space_group_id])||t.spaces.push(n),f[n.id]=n}),{options:u,spaceGroupIndex:d,spaceIndex:f,spaceRecords:o,spaceGroupRecords:l,isLoading:a||c}}},22294:function(e,t,r){"use strict";r.d(t,{i:()=>G});var n=r(85893),i=r(67294),o=r(84326),a=r(76987);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(94184),c=r.n(l),u=r(52293),d="space_access_management",f=function(e){e()};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=(0,i.createContext)(null);m.displayName="SpaceAccessManagementContext";var b=function(e){var t,r=e.options,o=e.children,a=e.parentFieldName,s=void 0===a?"space_group_ids":a,l=e.childFieldName,c=void 0===l?"space_ids":l,d=e.notRemovableParentItemTooltip,f=e.notRemovableParentIds,b=e.notRemovableChildItemTooltip,h=e.notRemovableChildIds,y=(0,u.Gc)(),v=y.watch,g=y.setValue,_={spaceGroups:(0,u.Dq)({name:s,shouldUnregister:!1}),spaces:(0,u.Dq)({name:c,shouldUnregister:!1})},x=(t=(0,i.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return p(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=x[0],w=x[1],O=v(s),S=v(c),k=function(e){return -1!==e.trim().toLowerCase().search(j.trim().toLowerCase())},P=function(e){return!h||-1===h.indexOf(e)};return(0,n.jsx)(m.Provider,{value:{options:r,parentFieldName:s,childFieldName:c,fieldArrayFields:_,spaceGroupsSelected:O,spacesSelected:S,addSpaceGroups:function(e){_.spaceGroups.append(e)},addSpaces:function(e){_.spaces.append(e)},removeSpaceGroup:function(e){var t=O.findIndex(function(t){return t===e});-1!==t&&_.spaceGroups.remove(t)},removeSpaces:function(e){var t=e.filter(P);g(c,S.filter(function(e){return!t.includes(e)}),{shouldDirty:!0})},isSpaceGroupSelected:function(e){return O.includes(e)},isSpaceSelected:function(e){return S.includes(e)},searchText:j,setSearchText:w,getIsFromSearch:k,getHasAnySearchResults:function(){return r.some(function(e){return k(e.name)||e.spaces.some(function(e){return k(e.name)})})},hasSpaceGroupUnselectedSpaces:function(e){return e.spaces.some(function(e){return!S.includes(e.id)})},notRemovableParentItemTooltip:d,notRemovableParentIds:f,notRemovableChildItemTooltip:b,notRemovableChildIds:h,isSpaceGroupRemovable:function(e){return!f||-1===f.indexOf(e)},isSpaceRemovable:P,areAllSpacesAndSpaceGroupsRemovable:function(){return!f&&!h||(null==f?void 0:f.length)===0&&(null==h?void 0:h.length)===0}},children:o})},h=function(){var e=(0,i.useContext)(m);if(!e)throw Error("useSpaceManagementContext must be used within a SpaceManagementContextProvider");return e},y=r(41553),v=function(){return(0,n.jsxs)("div",{className:"flex w-full flex-auto flex-col justify-center gap-y-3 px-6 py-12 text-center",children:[(0,n.jsx)(y.Z.TitleSm,{weight:"semibold",color:"text-selector-active",children:(0,o.t)([d,"empty_result.title"])}),(0,n.jsx)(y.Z.LabelSm,{color:"text-selector-active",children:(0,o.t)([d,"empty_result.subtitle"])})]})},g=function(e){var t=e.children,r=e.isDisabled,i=void 0!==r&&r,o=e.onClick,a=e.className;return(0,n.jsx)("li",{className:c()("group",void 0===a?"":a),children:(0,n.jsx)("button",{type:"button",className:c()("flex w-full list-none items-center justify-between rounded-md p-2 text-sm transition-colors md:px-4",{"hover:bg-tertiary group-focus-within:bg-tertiary cursor-pointer":!i&&!!o,"cursor-default opacity-50":i}),onClick:function(){i||null==o||o()},children:t})})},_=r(39905),x=function(e){var t=e.actionText,r=void 0===t?(0,o.t)("add"):t,i=e.isDisabled;return(0,n.jsx)(_.z,{type:"button",small:!0,variant:"text",className:c()("hidden opacity-0 transition-opacity",{"focus:opacity-100 group-hover:opacity-100 md:block":!(void 0!==i&&i)}),children:r})},j=r(57363),w=r(80171),O=function(e){var t=e.children;return(0,n.jsx)("span",{className:"flex items-center gap-2 text-left","data-testid":"space-list-title",children:t})},S=function(e){var t=e.icon,r=void 0===t?void 0:t,i=e.tooltipText,o=void 0===i?void 0:i,a=e.children;return(0,n.jsxs)(O,{children:[(0,n.jsxs)("span",{className:"flex h-4 w-4",children:[r&&o&&(0,n.jsx)(w.T,{className:"flex",placement:"top",delay:300,content:o,interactive:!1,children:(0,n.jsx)(j.JO,{type:r,size:16,className:"text-default"})}),r&&!o&&(0,n.jsx)(j.JO,{type:r,size:16,className:"text-default"})]}),a]})},k=function(e){var t=e.isRemovable,r=e.isNotRemovableTooltip,i=e.children;return t?(0,n.jsx)(n.Fragment,{children:i}):(0,n.jsx)(w.T,{className:"flex",placement:"top",delay:300,content:r,interactive:!1,children:i})},P=function(e){var t=e.space,r=e.spaceGroupId,n=e.onAddChild,i=void 0===n?function(e){e()}:n,o=e.onRemoveChild,a=void 0===o?function(e){e()}:o,s=t.id,l=t.name,c=h(),u=c.isSpaceSelected,d=c.addSpaces,f=c.getIsFromSearch,p=c.removeSpaceGroup,m=c.removeSpaces,b=c.notRemovableChildItemTooltip,y=c.isSpaceRemovable,v=u(s),g=function(){d(s)},_=f(l),x=y(s),j=function(){p(r),m([s])};return{isChecked:v,isSpaceFound:_,onAddClick:function(){i(g,t)},isRemovable:x,isNotRemovableTooltip:b,onRemoveClick:function(){a(j,t)}}},C=function(e){var t=e.spaceGroupId,r=e.onRemoveChild,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["spaceGroupId","onRemoveChild"]),a=i.name,s=i.icon,l=i.tooltipText,u=P({space:i,spaceGroupId:t,onRemoveChild:void 0===r?function(e){e()}:r}),f=u.isChecked,p=u.isSpaceFound,m=u.isRemovable,b=u.isNotRemovableTooltip,h=u.onRemoveClick;return(0,n.jsxs)(g,{className:c()({hidden:!f||!p}),isDisabled:!f||!m,onClick:f&&m?h:void 0,children:[(0,n.jsx)(k,{isRemovable:m,isNotRemovableTooltip:b,children:(0,n.jsx)(S,{icon:s,tooltipText:l,children:(0,n.jsx)(y.Z.LabelSm,{children:a})})}),f&&m&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"remove"])})]})},N=function(e){var t=e.spaceGroup,r=e.onAddParent,n=void 0===r?function(e){e()}:r,i=e.onRemoveParent,o=void 0===i?function(e){e()}:i,a=t.id,s=t.name,l=t.spaces,c=h(),u=c.isSpaceGroupSelected,d=c.isSpaceSelected,f=c.addSpaceGroups,p=c.addSpaces,m=c.getIsFromSearch,b=c.removeSpaceGroup,y=c.removeSpaces,v=c.notRemovableParentItemTooltip,g=c.isSpaceGroupRemovable,_=c.isSpaceRemovable,x=m(s)||l.some(function(e){return m(e.name)}),j=l.map(function(e){return e.id}),w=function(){f(a),p(j.filter(function(e){return!d(e)}))},O=(l||[]).filter(function(e){return d(e.id)}),S=u(a),k=S&&O.length===l.length,P=O.filter(function(e){return _(e.id)}),C=S&&P.length===l.length,N=function(){b(a),y(j)};return{isChecked:S,isFromSearch:x,isAllSpacesSelected:k,areAllSpacesSelectedAndRemovable:C,spacesAlreadySelected:O,selectedAndRemovableSpaces:P,onAddClick:function(){return n(w,t)},isRemovable:g(a),isNotRemovableTooltip:v,onRemoveClick:function(){o(N,t)}}},A=function(e){var t=e.onRemoveParent,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onRemoveParent"]),i=r.name,a=N({spaceGroup:r,onRemoveParent:void 0===t?function(e){e()}:t}),s=a.isChecked,l=a.isFromSearch,u=a.areAllSpacesSelectedAndRemovable,f=a.spacesAlreadySelected,p=a.selectedAndRemovableSpaces,m=a.isRemovable,b=a.isNotRemovableTooltip,h=a.onRemoveClick,v=!s&&0===f.length||!l,_=s&&u?(0,o.t)("space_access_management.list.spaces_counter.all_spaces"):(0,o.t)("space_access_management.list.spaces_counter",{count:p.length});return(0,n.jsxs)(g,{className:c()({hidden:v}),isDisabled:!s||!m,onClick:s&&m?h:void 0,children:[(0,n.jsx)(k,{isRemovable:m,isNotRemovableTooltip:b,children:(0,n.jsx)(O,{children:(0,n.jsxs)(y.Z.LabelSm,{weight:"semibold",children:[i,(0,n.jsx)("span",{className:"font-normal",children:_})]})})}),s&&m&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"remove"])})]})};function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function E(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var T=r(17617),L=function(e){var t=e.spaceGroupId,r=e.space,i=e.onAddChild,o=e.onRemoveChild,s=r.name,l=r.icon,u=r.tooltipText,d=P({space:r,spaceGroupId:t,onAddChild:void 0===i?function(e){e()}:i,onRemoveChild:void 0===o?function(e){e()}:o}),f=d.onRemoveClick,p=d.onAddClick,m=d.isChecked,b=d.isSpaceFound,h=d.isRemovable,v=d.isNotRemovableTooltip,_=m?h?f:void 0:p,x=m&&!h;return(0,n.jsxs)(g,{className:c()({hidden:!b}),isDisabled:x,onClick:_,children:[(0,n.jsx)(k,{isRemovable:h,isNotRemovableTooltip:v,children:(0,n.jsx)(S,{icon:l,tooltipText:u,children:(0,n.jsx)(y.Z.LabelSm,{children:s})})}),(0,n.jsx)(a.r,{as:"span",checked:m})]})},D=function(e){var t=e.isToggleEnabled,r=void 0===t||t,i=e.spaceGroup,o=e.onAddParent,s=e.onRemoveParent,l=i.name,u=N({spaceGroup:i,onAddParent:void 0===o?function(e){e()}:o,onRemoveParent:void 0===s?function(e){e()}:s}),d=u.isChecked,f=u.onAddClick,p=u.onRemoveClick,m=u.isFromSearch,b=u.isRemovable,h=u.isNotRemovableTooltip,v=d?b?p:void 0:f,_=r||d&&!b;return(0,n.jsxs)(g,{className:c()({hidden:!m}),isDisabled:_,onClick:v,children:[(0,n.jsx)(k,{isRemovable:b,isNotRemovableTooltip:h,children:(0,n.jsx)(O,{children:(0,n.jsx)(y.Z.LabelSm,{weight:"semibold",children:l})})}),r&&(0,n.jsx)(a.r,{as:"span",checked:d})]})},M=r(93989),R=function(e){var t=e.topicsCountEnabled,r=e.onAddChild,i=e.spaceGroupId,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["topicsCountEnabled","onAddChild","spaceGroupId"]),s=a.name,l=a.icon,u=a.topicsCount,f=a.tooltipText,p=P({onAddChild:void 0===r?function(e){e()}:r,space:a,spaceGroupId:i}),m=p.isChecked,b=p.isSpaceFound,h=p.onAddClick;return(0,n.jsx)(n.Fragment,{children:void 0!==t&&t&&u&&u>=M.tt?(0,n.jsx)(w.T,{content:(0,o.t)("settings.topics.space_management.topics_limit_reached"),interactive:!1,children:(0,n.jsx)(g,{isDisabled:!0,className:c()({hidden:m||!b}),children:(0,n.jsx)(S,{icon:l,tooltipText:f,children:(0,n.jsx)(y.Z.LabelSm,{children:s})})})}):(0,n.jsxs)(g,{isDisabled:m,onClick:h,className:c()({hidden:m||!b}),children:[(0,n.jsx)(S,{icon:l,tooltipText:f,children:(0,n.jsx)(y.Z.LabelSm,{children:s})}),!m&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"add"])})]})})},B=function(e){var t=e.isButtonEnabled,r=void 0===t||t,i=e.onAddParent,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isButtonEnabled","onAddParent"]),s=a.name,l=N({spaceGroup:a,onAddParent:void 0===i?function(e){e()}:i}),u=l.isChecked,f=l.onAddClick,p=l.isFromSearch,m=l.isAllSpacesSelected;return(0,n.jsxs)(g,{isDisabled:u||!r,onClick:f,className:c()({hidden:u&&m||!p}),children:[(0,n.jsx)(O,{children:(0,n.jsx)(y.Z.LabelSm,{weight:"semibold",children:s})}),!u&&r&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"add"])})]})};function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var z="space_access_management",U=function(e){var t=e.title,r=void 0===t?(0,o.t)([z,"no_access"]):t,i=e.actionText,a=void 0===i?(0,o.t)([z,"add_all"]):i,s=e.shouldShowButton,l=e.onClick;return(0,n.jsxs)("div",{className:"flex w-full items-center justify-between px-6 py-5",children:[(0,n.jsx)(y.Z.LabelXxs,{weight:"semibold",color:"text-light",children:r}),(void 0===s||s)&&(0,n.jsx)(_.z,{type:"button",variant:"text",small:!0,onClick:function(){null==l||l()},className:"ring-secondary focus:ring-1",children:a})]})},Z=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:c()("md:bg-primary md:divide-primary h-[60vh] md:divide-y",r),children:t})},G=Object.assign(function(e){var t,r,i=e.children,o=e.className,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)(b,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={children:(0,n.jsx)(Z,{className:c()("border-primary flex flex-col overflow-hidden md:rounded-lg md:border",o),children:i})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{Header:function(e){var t=e.children;return(0,n.jsx)("div",{className:"focus-within:ring-secondary bg-primary border-primary mb-4 flex justify-between rounded-lg border px-3 py-2 focus-within:ring-1 focus-within:ring-inset md:mb-0 md:rounded-none md:rounded-t-lg md:border-0 md:px-6 md:py-3.5",children:t})},SearchBar:function(){var e=h(),t=e.setSearchText,r=e.searchText;return(0,n.jsxs)("div",{className:"text-default flex w-full items-center gap-3",children:[(0,n.jsx)("span",{className:"flex h-4 w-4",children:(0,n.jsx)(j.JO,{type:"16-search",size:16,className:"text-default"})}),(0,n.jsx)("input",{className:"md:bg-primary placeholder:text-light w-full border-0 bg-inherit p-0 text-sm leading-none outline-none placeholder:opacity-100 focus:ring-0",type:"text",placeholder:(0,o.t)([d,"search"]),onChange:function(e){t(e.target.value)},value:r,autoFocus:!0}),r.length>0&&(0,n.jsx)("span",{className:"flex h-4 w-4",children:(0,n.jsx)(j.JO,{type:"16-close",size:16,className:"text-default cursor-pointer",onClick:function(){t("")}})})]})},AllAccessToggle:function(){var e,t="all_access_enabled",r=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=r[0],c=r[1],u=function(){c(function(e){return!e})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",name:t,id:"checkbox-".concat(t),checked:l,onChange:u,className:"hidden"}),(0,n.jsxs)("label",{className:"m-0 flex cursor-pointer select-none items-center gap-3",htmlFor:"checkbox-".concat(t),children:[(0,n.jsx)("span",{className:"text-default text-sm tracking-tighter",children:(0,o.t)(["space_access_management","all_access"])}),(0,n.jsx)(a.r,{as:"span",checked:l,onChange:u})]})]})},Body:function(e){var t=e.children,r=e.className;return(0,h().getHasAnySearchResults)()?(0,n.jsx)("div",{className:c()("flex w-full flex-auto flex-col overflow-hidden",r),children:t}):(0,n.jsx)(v,{})},ListHeader:function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:c()("divide-primary border-primary bg-primary sticky top-0 z-10 hidden divide-x md:flex md:border-b",r),children:t})},ListHeaderColumn:U,ListHeaderColumnNoAccess:function(e){var t=e.title,r=void 0===t?(0,o.t)([d,"no_access"]):t,i=e.shouldShowAddAllButton,a=e.onAddAll,s=h(),l=s.options,c=s.parentFieldName,p=s.childFieldName,m=(0,u.Gc)().setValue,b=[],y=[];l.forEach(function(e){b.push(e.id),e.spaces.forEach(function(e){y.push(e.id)})});var v=function(){m(c,b),m(p,y)};return(0,n.jsx)(U,{title:r,actionText:(0,o.t)([d,"add_all"]),onClick:function(){(a||f)(v)},shouldShowButton:void 0===i||i})},ListHeaderColumnAccessGranted:function(e){var t=e.title,r=void 0===t?(0,o.t)([d,"access"]):t,i=e.onRemoveAll,a=void 0===i?function(e){e()}:i,s=h(),l=s.parentFieldName,c=s.childFieldName,p=s.areAllSpacesAndSpaceGroupsRemovable,m=(0,u.Gc)().setValue,b=function(){m(l,[]),m(c,[])},y=p();return(0,n.jsx)(U,{title:r,actionText:(0,o.t)([d,"remove_all"]),shouldShowButton:y,onClick:y?function(){(a||f)(b)}:void 0})},List:function(e){var t=e.children,r=e.className,i=e.dataTestId;return(0,n.jsx)("ul",{className:c()("list-none py-2 md:p-2",r),"data-testid":i,children:t})},ListContainer:function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:c()("md:divide-primary md:grid md:flex-auto md:grid-cols-2 md:divide-x",r),children:t})},ListNoAccess:function(e){var t=e.shouldShowAddParentButton,r=void 0===t||t,i=e.shouldShowEmptySpaceGroups,o=e.onAddParent,a=e.onAddChild,s=e.className,l=h(),u=l.options,d=l.hasSpaceGroupUnselectedSpaces;return(0,n.jsx)(G.List,{className:c()("hidden md:block",s),dataTestId:"list-space-access-denied",children:u.map(function(e){return d(e)||i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B,F({onAddParent:null!=o?o:f,isButtonEnabled:r},e),"list-no-access-".concat(e.id)),e.spaces.map(function(t){return(0,n.jsx)(R,F({onAddChild:null!=a?a:f,spaceGroupId:e.id,topicsCountEnabled:!0},t),"list-no-access-".concat(e.id,"-").concat(t.id))})]}):null})})},ListAccessGranted:function(e){var t=e.onRemoveParent,r=e.onRemoveChild,i=e.className,o=h().options;return(0,n.jsx)(G.List,{className:c()("hidden md:block",i),dataTestId:"list-space-access-granted",children:o.map(function(e){var i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,E(I({},e),{onRemoveParent:t||f}),"list-access-granted_".concat(e.id)),null==(i=e.spaces)?void 0:i.map(function(t){return(0,n.jsx)(C,E(I({},t),{spaceGroupId:e.id,onRemoveChild:r||f}),"list-access-granted_".concat(e.id,"-").concat(t.id))})]})})})},ListMobile:function(e){var t=e.shouldShowAddParentToggle,r=void 0===t||t,o=e.onAddParent,a=e.onAddChild,s=e.onRemoveParent,l=e.onRemoveChild,c=h().options;return(0,T.Be)()?null:(0,n.jsx)(G.List,{className:"md:hidden",children:c.map(function(e){return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(D,{isToggleEnabled:r,spaceGroup:e,onAddParent:o,onRemoveParent:s},"list-mobile-".concat(e.id)),e.spaces.map(function(t){return(0,n.jsx)(L,{spaceGroupId:e.id,space:t,onAddChild:a,onRemoveChild:l},"list-mobile-".concat(e.id,"-").concat(t.id))})]},e.id)})})},EmptyResult:v})},9105:function(e,t,r){"use strict";r.d(t,{m:()=>a});var n=r(70442),i=r(13532),o="topics",a=function(){var e,t=(0,n.k6)(),r=new Set(null==(e=(0,i.Ph)(o))?void 0:e.split(",").filter(function(e){return""!==e}));return{currentFilters:r,AddOrRemoveFilter:function(e){r.has(e)?r.delete(e):(r.clear(),r.add(e));var n=(0,i.m_)(o,Array.from(r).join(","));t.push("?".concat(n))},clearFilters:function(){var e=(0,i.iO)(o);t.push("?".concat(e))},isFilterSelected:function(e){return r.has(e)}}}},68538:function(e,t,r){"use strict";r.d(t,{h:()=>k});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),s=r(96486),l=r(67579),c=r(84326),u=r(38644),d=function(e){var t=e.text,r=e.className;return(0,n.jsx)("div",{className:a()("bg-tertiary border-primary max-w-[200px] animate-pulse truncate rounded-full border px-4 py-2 text-sm font-medium text-transparent duration-300",r),children:t||Math.random().toString(36).substring(7,20)})},f=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{text:(0,c.t)("topics.filters.all_topics")}),(0,n.jsx)(d,{className:"delay-500"}),(0,n.jsx)(d,{className:"delay-[1000ms]"}),(0,n.jsx)(d,{className:"delay-[1500ms]"}),(0,n.jsx)(d,{className:"delay-[2000ms]"}),(0,n.jsx)(d,{className:"delay-[2500ms]"})]})},p=r(41342),m=r(17617),b=r(57363),h=r(41553),y=(0,i.forwardRef)(function(e,t){var r=e.isActive,i=e.onClick,o=e.label,s=e.icon,l=e.className;return(0,n.jsxs)("button",{onClick:i,type:"button",ref:t,className:a()("bg-primary border-primary hover:bg-overlay-dark focus-visible:outline-secondary text-darkest max-w-[200px] shrink-0 truncate rounded-full border px-4 py-2 text-sm transition-colors duration-75 focus-visible:rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"border-secondary":void 0!==r&&r},l),children:[(0,n.jsx)(h.Z.LabelSm,{weight:"medium",color:"text-primary",children:o}),s&&(0,n.jsx)(b.JO,{type:s,size:16,color:"text-primary",className:"hover:bg-overlay-dark -mt-0.5 ml-0.5 h-4 w-4"})]})});y.displayName="FilterButton";var v=r(9105);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,v.m)(),o=n.currentFilters,a=n.AddOrRemoveFilter,l=n.clearFilters,c=n.isFilterSelected,u=(t=(0,i.useState)(o),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1];return{topics:(0,i.useMemo)(function(){if(r.sortTopics&&d.size>0){var t=new Map(Array.from(d).map(function(e,t){return[e,t]}));return(0,s.sortBy)(e,function(e){return void 0!==t.get(e.id.toString())?t.get(e.id.toString()):1/0})}return e},[e,d,r.sortTopics]),currentFilters:o,toggleFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(e),t&&c(e)&&f(new Set([e]))},clearFiltersAndHistory:function(){l(),f(new Set)},isFilterSelected:c}};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t,r=e.containerRef,n=e.moreButtonRef,o=e.topics,a=(t=(0,i.useState)(o),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=o.map(function(e){return e.name}).join(", ");(0,i.useEffect)(function(){return(null==r?void 0:r.current)&&o.length&&(u(),window.addEventListener("resize",u)),function(){window.removeEventListener("resize",u)}},[c,r,n]);var u=function(){var e,t,i,a=(null==(e=r.current)?void 0:e.getBoundingClientRect().width)||0,s=(null==(i=n.current)||null==(t=i.getBoundingClientRect())?void 0:t.width)||d("More")+20,c=a-50-12,u=[];o.forEach(function(e,t){var r=d(e.name);c>r&&r+s+24<c?(u.push(e),c-=r+12):t===o.length-1&&u.length===o.length-1&&r<c+24&&u.push(e)}),l(u)},d=function(e){if(!document)return 0;var t=document.createElement("div");t.className="max-w-[200px] border truncate px-4 py-2 text-sm font-medium truncate",t.style.visibility="hidden",t.style.position="absolute",t.textContent=e;try{var r=document.body.appendChild(t),n=r.getBoundingClientRect().width||0;return document.body.removeChild(r),n}catch(e){return console.error("Error estimating pill width",e),0}};return{visibleTopics:s}},w=r(66249);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(e){var t=e.inline,r=e.isCourseDirectory,o=(0,i.useRef)(null),d=(0,i.useRef)(null),b=S((0,l.Z)(!1),2),h=b[0],v=b[1],g=S((0,l.Z)(!0),2),x=g[0],O=g[1],k=(0,p.L2)().data,P=(0,w.X2)({spaceId:null==k?void 0:k.id,isCourseDirectory:void 0!==r&&r}),C=P.topics,N=P.isLoading,A=(0,m.Be)(),I=_(C,{sortTopics:A}),E=I.topics,T=I.currentFilters,L=I.toggleFilter,D=I.clearFiltersAndHistory,M=I.isFilterSelected,R=j({containerRef:o,moreButtonRef:d,topics:E}).visibleTopics;if(!N&&0===E.length)return null;var B=(0,s.debounce)(function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;v(t>0),O(t+n<r)},50),F=R.map(function(e){return e.id}),z=E.filter(function(e){return!F.includes(e.id)});return(0,n.jsxs)("div",{className:a()("relative",{"w-full":t,"-mb-2 mt-2 w-full p-2 sm:-mb-0 sm:mt-6 sm:p-0 md:mb-6 md:mt-0":!t,"scrollbar-hide overflow-x-auto":!A}),ref:o,children:[h&&!A&&(0,n.jsx)("button",{type:"button",className:"from-secondary absolute left-0 top-0 h-full w-16 bg-gradient-to-r to-transparent"}),(0,n.jsx)("div",{onScroll:function(e){var t=e.currentTarget;B({scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth})},className:a()("flex w-full gap-x-3 gap-y-2 md:flex-wrap",{"scrollbar-hide overflow-x-auto":!A}),"data-testid":"topic-filters",children:N?(0,n.jsx)(f,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{onClick:D,isActive:0===T.size,label:(0,c.t)("topics.filters.all_topics")}),(A?R:E).map(function(e){return(0,n.jsx)(y,{onClick:function(){return L(e.id.toString())},isActive:M(e.id.toString()),label:e.name},e.id)}),A&&z.length>0&&(0,n.jsx)(u.i,{label:(0,c.t)("topics.filters.more"),active:z.some(function(e){return M(e.id.toString())}),buttonRef:d,children:z.map(function(e){return(0,n.jsx)(u.i.Button,{label:e.name,onClick:function(){return L(e.id.toString(),!0)},active:M(e.id.toString())},e.id)})})]})}),x&&!A&&(0,n.jsx)("button",{type:"button",className:"from-secondary absolute right-0 top-0 h-full w-16 bg-gradient-to-l to-transparent"})]})}},51099:function(e,t,r){"use strict";r.d(t,{M:()=>i,n:()=>o});var n=r(84326),i=[{value:"all",label:(0,n.t)("notification_settings.all.label"),description:(0,n.t)("notification_settings.all.description")},{value:"mentions",label:(0,n.t)("notification_settings.mentions.label"),description:(0,n.t)("notification_settings.mentions.description")},{value:"never",label:(0,n.t)("notification_settings.never.label"),description:(0,n.t)("notification_settings.never.description")}],o=[{value:"all",label:(0,n.t)("member_notification_settings.all.label"),description:(0,n.t)("member_notification_settings.all.description")},{value:"mentions",label:(0,n.t)("member_notification_settings.mentions.label"),description:(0,n.t)("member_notification_settings.mentions.description")},{value:"never",label:(0,n.t)("member_notification_settings.never.label"),description:(0,n.t)("member_notification_settings.never.description")}]},46410:function(e,t,r){"use strict";r.d(t,{z1:()=>a,_$:()=>x,B_:()=>g});var n=r(88767),i=r(93199),o=r(13532),a=function(e){var t=e.space,r=e.options,a=o.av.spaces.update({id:(void 0===t?{}:t).id});return(0,n.useMutation)(function(e){return(0,i.aU)(a,{space:e})},void 0===r?{}:r)},s=r(96486),l=r(84326),c=r(99385),u=r(41342),d=r(60589),f=r(61853),p=r(21368),m=r(44428),b=r(60878);function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)})}}function v(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){var t=e.space,r=e.setOpenNotificationsDropdown,a=void 0===r?function(){}:r,h=t.name,g=t.id,_=(0,n.useQueryClient)(),x=(0,u.wh)(),j=x.currentUser,w=x.currentCommunityMember,O=(0,u.T4)({spaceId:g}).refetch,S=(0,p.a)(f.yf).updateChatRoom,k=(0,u.e2)().actions.refresh,P=(0,u.nT)().actions.refresh,C=(0,c.m)(t.chat_room_uuid).refetchChatRoom,N=(0,m.u)(t.chat_room_uuid).refetchChatParticipants,A=(0,b.pm)(),I=A.success,E=A.error,T=(0,n.useMutation)(function(){return(0,i.Cu)(o.av.spaceMembers.joinSpace({spaceId:g}))},{onSuccess:function(){return y(function(){var e;return v(this,function(r){switch(r.label){case 0:return[4,O()];case 1:if(r.sent(),k(),P(),_.invalidateQueries(["spaces"]),!(0,d.Ug)(t))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,C()];case 3:return(e=(r.sent().data||{chat_room:null}).chat_room)&&S(e),[3,5];case 4:return console.error("Error refetching chat room",r.sent()),[3,5];case 5:N(),r.label=6;case 6:return I((0,l.t)("joined_space",{space_name:t.name})),(null==w?void 0:w.profile_confirmed_at)?(0,s.isFunction)(a)&&a(!0):window.location.href=(0,o.lk)({params:{return_to:window.location.href,new_state:!0}}),[2]}})})()},onError:function(e){E(e.message||(0,l.t)("join_space_failed",{space_name:h}))}});return{joinSpace:function(){return y(function(){return v(this,function(e){return j?[2,T.mutateAsync()]:(window.location.href=(0,o.j)(),[2])})})()},isSubmitting:T.isLoading}},_=r(38434),x=function(){return(0,_.p)()}},71948:function(e,t,r){"use strict";r.d(t,{p:()=>d});var n=r(67294),i=r(60589),o=r(23583),a=r(41342),s=r(17679),l=r(78456),c=r(38434);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(){var e,t=(e=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],d=t[1],f=(0,c.p)(),p=(0,a.L2)().data,m=(0,a.wh)(),b=m.currentCommunityMember,h=m.currentCommunitySettings,y=(0,i.K2)(p,b),v=(0,s.I)({spaceId:null==p?void 0:p.id,enabled:y}),g=v.count,_=v.isLoading,x=(0,o.P)(),j=x.posts,w=void 0===j?[]:j,O=x.isLoading;return(0,n.useEffect)(function(){if(f)return void d(!1);if(p&&!O&&!_){var e=p.hide_right_sidebar;if((0,i.V5)(p)||(0,i.qy)(p)||(0,i.Ds)(p)||(0,i.AU)(p)||e)return void d(!1);var t=(0,i.K2)(p,b),r=(0,i.k4)(p,b),n=!!(t&&(0,l.VP)(b,h)&&g>0),o=!!(r&&w.length>0);d(n||o)}},[f,O,w.length,_,g,p,b,l.VP,y]),r}},84690:function(e,t,r){"use strict";r.d(t,{S:()=>a});var n=r(85893),i=r(85924),o=r(80219),a=function(e){var t=e.spaces,r=e.valueKey,a=void 0===r?"slug":r,s=(0,i.TC)().currentAppearance;return t.map(function(e){var t,r,i=e.name;return{richLabel:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.S,{className:"mr-1 inline !h-5 !w-5 align-text-top",emoji:e.emoji,appearance:s,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url}),(0,n.jsx)("span",{children:e.name})]}),label:i,value:null!=(r=null==(t=e[a])?void 0:t.toString())?r:""}})}},184:function(e,t,r){"use strict";r.d(t,{rp:()=>n});var n={disabledExtensions:["file","image","embeds","poll","cta","ai_copilot","horizontal_rule","code_block","mention","entities"],disabledSlashMenuCategories:["Upload","Embed"],disabledSlashMenuCommands:["image","giphy","audio","video","pdf","file","poll","code"]}},24094:function(e,t,r){"use strict";r.d(t,{y4:()=>S,AO:()=>j,cy:()=>O,NA:()=>w});var n=r(67294),i=r(88767),o=r(84326),a=r(51630),s=r(93199),l=r(37588),c=r(13532),u=r(60878);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(e){var t=(0,u.pm)(),r=t.error,d=t.success,p=f((0,n.useState)(null),2),m=p[0],b=p[1],h=f((0,n.useState)(null),2),y=h[0],v=h[1],g=(0,i.useQuery)(c.av.liveStreams.show({id:e}),{refetchInterval:!m&&1e4,refetchIntervalInBackground:!m}),_=g.data,x=g.isLoading,j=g.isError,w=g.error,O=g.refetch,S=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(g,["data","isLoading","isError","error","refetch"]),k=f((0,n.useState)(!1),2),P=k[0],C=k[1],N=(0,i.useMutation)(function(e){return a.Qk.join({id:null==_?void 0:_.id,role:e,forReactQuery:!0})},{onSuccess:function(e){b(e)},onError:function(e){r(e.firstErrorDetail?"".concat((0,o.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,o.t)("live_streams.room.join_error"),"."))}}),A=(0,n.useCallback)(function(){return N.mutate(l.VM.HOST)},[N]),I=(0,n.useCallback)(function(){return N.mutate(l.VM.HLS_SPECTATOR)},[N]),E=(0,i.useMutation)(function(e){return a.Qk.leave({id:null==_?void 0:_.id,participantId:null==m?void 0:m.id,reason:e})},{onSuccess:function(e){return b(e)},onError:function(e){(0,s.eE)(e)?b(null):r((0,o.t)("live_streams.room.leave_error"))}}),T=(0,i.useMutation)(function(){return a.Qk.goLive({id:null==_?void 0:_.id,forReactQuery:!0})},{onSuccess:function(){return O()},onError:function(){return r((0,o.t)("live_streams.room.go_live_error"))}}),L={onSuccess:function(){d((0,o.t)("live_streams.room.".concat((0,l.vX)(_),".end_success"))),C(!0),O()},onError:function(){return r((0,o.t)("live_streams.room.".concat((0,l.vX)(_),".end_error")))}},D=(0,i.useMutation)(function(){return a.Qk.endStream({id:null==_?void 0:_.id})},L),M=(0,i.useMutation)(function(){return a.Qk.endStreamDelayed({id:null==_?void 0:_.id})},L),R=(0,i.useMutation)(function(e){return a.Qk.update({id:null==_?void 0:_.id,formData:e})},{onSuccess:function(){O(),d((0,o.t)("live_streams.room.".concat((0,l.vX)(_),".update_success")),{duration:"short",shouldUseProgress:!1})},onError:function(){return r((0,o.t)("live_streams.room.".concat((0,l.vX)(_),".update_error")))}}),B=(0,i.useMutation)(function(e){return a.Qk.update({id:null==_?void 0:_.id,formData:e})},{onSuccess:function(){return O()}});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({room:_,isLoading:x,isError:j,apiError:w,joinAsHost:A,joinAsParticipant:I,isJoining:N.isLoading,currentParticipant:m,updateRoom:R.mutate,updateRoomAsync:R.mutateAsync,updateRoomSilentlyAsync:B.mutateAsync,goLive:T.mutate,goLiveAsync:T.mutateAsync,leave:E.mutate,leaveAsync:E.mutateAsync,endStream:D.mutate,endStreamDelayed:M.mutate,endStreamDelayedAsync:M.mutateAsync,onEndStream:function(e){d(e||""),C(!0),O()},isLeaving:E.isLoading,refetchRoom:O,isStreamEnded:(0,l.UT)(_)||P,viewTypeOverride:y,setViewTypeOverride:v},S)},m=r(85893),b=r(96486),h=r(70442),y=function(e,t,r){var o={status:l.wA.ACTIVE,per_page:2e3};(null==r?void 0:r.recording_key)&&(o.recording_key=r.recording_key);var a=(0,i.useQuery)(["participants",null==e?void 0:e.id,null==t?void 0:t.id,null==r?void 0:r.recording_key],function(){return e?(0,s.UT)(c.av.liveStreams.participants({roomId:e.id,params:o})):Promise.resolve({records:[],count:0})},{enabled:!!(null==e?void 0:e.id)&&(!!t||!!r)}),u=a.data,d=a.isLoading,f=a.refetch,p=null==u?void 0:u.records;return{participants:(0,n.useMemo)(function(){return(null==p?void 0:p.reduce(function(e,t){return e[t.id]=t,e},{}))||{}},[p]),isLoadingParticipants:d,refetchParticipants:f,roles:{host:(null==e?void 0:e.creator.id)?[e.creator.id]:null,moderator:(null==p?void 0:p.filter(function(e){return"moderator"===e.role}).map(function(e){return e.community_member_id}))||null}}};function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(e){var t,r,s=(0,u.pm)().error,l=g((0,n.useState)(null),2),c=l[0],d=l[1],f=g((0,n.useState)(null),2),p=f[0],m=f[1],b=(0,i.useMutation)(function(t){return m(t),a.Qk.createRecorder({id:null==e?void 0:e.id,recording_key:t})},{onSuccess:function(e){return d(e)},onError:function(e){s(e.firstErrorDetail?"".concat((0,o.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,o.t)("live_streams.room.join_error"),"."))}});return{createRecorder:b.mutate,isCreatingRecorder:b.isLoading,recorder:c&&(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),r=r={recording_key:p},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)}},x=(0,n.createContext)({status:{isLoadingRoom:!1,isLoadingParticipants:!1,isRoomError:!1,apiError:null,isJoining:!1,isCreatingRecorder:!1,isLeaving:!1,isStreamEnded:!1},data:{room:void 0,recorder:null,participants:{},roles:{host:[],moderator:[]},canHost:!1,currentParticipant:null,viewTypeOverride:null,isConferenceRoom:!1},actions:{joinAsHost:b.noop,joinAsParticipant:b.noop,createRecorder:null,updateRoom:b.noop,updateRoomAsync:function(){return Promise.resolve()},updateRoomSilentlyAsync:function(){return Promise.resolve()},goLive:b.noop,goLiveAsync:function(){return Promise.resolve()},leave:b.noop,leaveAsync:function(){return Promise.resolve()},endStream:b.noop,endStreamDelayed:b.noop,endStreamDelayedAsync:function(){return Promise.resolve()},onEndStream:b.noop,refetchRoom:b.noop,refetchParticipants:b.noop,setViewTypeOverride:b.noop}});x.displayName="LiveStreamContext";var j=function(e){var t=e.children,r=p((0,h.UO)().roomSlug),n=r.room,i=r.isLoading,o=r.isError,a=r.apiError,s=r.joinAsHost,c=r.joinAsParticipant,u=r.isJoining,d=r.currentParticipant,f=r.updateRoom,v=r.updateRoomAsync,g=r.updateRoomSilentlyAsync,j=r.goLive,w=r.goLiveAsync,O=r.leave,S=r.leaveAsync,k=r.endStream,P=r.endStreamDelayed,C=r.endStreamDelayedAsync,N=r.onEndStream,A=r.isLeaving,I=r.refetchRoom,E=r.isStreamEnded,T=r.viewTypeOverride,L=r.setViewTypeOverride,D=_(n),M=D.recorder,R=D.createRecorder,B=D.isCreatingRecorder,F=y(n,d,M),z=F.participants,U=F.isLoadingParticipants,Z=F.refetchParticipants,G={status:{isLoadingRoom:i,isLoadingParticipants:U,isRoomError:o,apiError:a,isJoining:u,isCreatingRecorder:B,isLeaving:A,isStreamEnded:E},data:{room:n,recorder:M,participants:z,roles:F.roles,canHost:!!n&&n.can_host,currentParticipant:d,viewTypeOverride:T,isConferenceRoom:(0,l.$e)(n)},actions:{joinAsHost:s,joinAsParticipant:c,createRecorder:R,updateRoom:f,updateRoomAsync:v,updateRoomSilentlyAsync:g,goLive:j,goLiveAsync:w,leave:O,leaveAsync:S,endStream:k,endStreamDelayed:P,endStreamDelayedAsync:C,onEndStream:N,refetchRoom:I,refetchParticipants:Z,setViewTypeOverride:L}};return(0,m.jsx)(x.Provider,{value:G,children:(0,b.isFunction)(t)?t(G):t})},w=function(){return(0,n.useContext)(x)},O=function(){return w().data},S=function(){return w().actions}},56338:function(e,t,r){"use strict";r.d(t,{Sg:()=>o,Wk:()=>a,kk:()=>s,un:()=>n});var n={communitySetting:"CommunitySetting",paywall:"Paywall",invitationLink:"InvitationLink",memberBulkImport:"AsyncTasks::BulkCommunityMemberImportTask"},i=Object.freeze({ARCHIVED:"archived",ACTIVE:"active"}),o=function(e){return(null==e?void 0:e.status)===i.ARCHIVED},a=function(e){return!(null==e?void 0:e.block_access_groups_for_trials_enabled)},s=function(e){return e===n.paywall}},51019:function(e,t,r){"use strict";r.d(t,{HY:()=>s,O6:()=>l,WD:()=>c,gV:()=>d,nb:()=>u,uX:()=>a});var n=Object.freeze({BULK_IMPORT_COMMUNITY_MEMBER:"AsyncTasks::BulkCommunityMemberImportTask",EXPORT_CSV_COMMUNITY_MEMBER_CHARGE:"AsyncTasks::ExportCsv::Paywalls::CommunityMemberCharge",EXPORT_CSV_COMMUNITY_MEMBER_SUBSCRIPTION:"AsyncTasks::ExportCsv::Paywalls::CommunityMemberSubscription",ACCESS_GROUP_MANAGE_MEMBERS:"AsyncTasks::AccessGroups::ManageMembersTask",PAYWALL_MEMBERS_MIGRATION:"AsyncTasks::AccessGroups::PaywallMembersMigrationTask"}),i=Object.freeze({PENDING:"pending",PROCESSING:"processing",COMPLETED:"completed",PARTIAL_SUCCESS:"partial_success",FAILED:"failed"}),o=Object.freeze({FINISHED:"asyncTaskFinished",UPDATED:"asyncTaskUpdated"}),a="AsyncTaskChannel",s=function(e){return e===o.FINISHED},l=function(e){return e===o.UPDATED},c=function(e){return e===i.FAILED},u=function(e){return e===n.ACCESS_GROUP_MANAGE_MEMBERS},d=function(e){return e===n.PAYWALL_MEMBERS_MIGRATION}},65672:function(e,t,r){"use strict";r.d(t,{EW:()=>l,KN:()=>c,Kz:()=>m,Q_:()=>o,dd:()=>u,mB:()=>d,pN:()=>s,vC:()=>f,zi:()=>p});var n=r(77349),i=r(29378),o=Object.freeze({INCOMPLETE:"incomplete",ACTIVE:"active",TRIAL:"trial",PAST_DUE:"past_due",CANCELED:"canceled"}),a=Object.freeze({SUBSCRIPTION:"active",ONETIME:"onetime",INSTALLMENTS:"installments"}),s=function(e){return(null==e?void 0:e.status)===o.TRIAL},l=function(e){return(null==e?void 0:e.status)===o.PAST_DUE},c=function(e){var t;return(null==e||null==(t=e.paywall_price)?void 0:t.price_type)===a.INSTALLMENTS},u=function(e){return(null==e?void 0:e.status)===o.CANCELED},d=[o.ACTIVE,o.TRIAL,o.PAST_DUE,o.CANCELED],f=[o.ACTIVE,o.TRIAL,o.PAST_DUE],p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=Number(e)>0?Number(e):0;return(0,n.default)(t,r)},m=function(e){return[i.VT.APP_STORE,i.VT.PLAY_STORE].includes(null==e?void 0:e.platform)}},12783:function(e,t,r){"use strict";r.d(t,{D:()=>i});var n=Object.freeze({NOT_STARTED:"not_started",ACTIVE:"active",COMPLETED:"completed",RELEASED:"released",CANCELED:"canceled"}),i=function(e){return e.status===n.COMPLETED}},65119:function(e,t,r){"use strict";r.d(t,{B$:()=>a,Cc:()=>p,Hv:()=>m,MS:()=>l,O4:()=>d,XG:()=>c,nl:()=>f,t:()=>u,vv:()=>s});var n=r(84326),i=r(56450),o=r(34870),a=function(e){var t;return(null==e?void 0:e.post_type)==="course"&&(null==e||null==(t=e.course_setting)?void 0:t.course_type)===i.d.self_paced},s=function(e){var t;return(null==e?void 0:e.post_type)==="course"&&(null==e||null==(t=e.course_setting)?void 0:t.course_type)===i.d.structured},l=function(e){var t;return(null==e?void 0:e.post_type)==="course"&&(null==e||null==(t=e.course_setting)?void 0:t.course_type)===i.d.scheduled},c=function(e){return l(e)||s(e)},u=function(e){var t=e.drippedAt,r=e.dripDelay,i=e.needsToCompletePreviousLesson,o=e.lessonLabel,a=e.sectionLabel;if(i)return(0,n.t)("courses.edit.lesson.unlock_by_completing",{this_lesson:(0,n.t)(["courses.edit.lesson.unlock_by_completing_variables","this_lesson",o]),all_previous_lessons:(0,n.t)(["courses.edit.lesson.unlock_by_completing_variables","all_previous_lessons",o])});if(t){var s=d(t);return"".concat((0,n.t)("courses.edit.lesson.available_on_tooltip")," ").concat(s)}var l=f(r),c=m(p(r),l);return(0,n.t)("courses.edit.lesson.available_after_drip_delay",{drip_delay:c,the_lesson:(0,n.t)(["courses.edit.lesson.available_after_drip_delay_variables","the_lesson",o]),in_this_section:(0,n.t)(["courses.edit.lesson.available_after_drip_delay_variables","in_this_section",a])})},d=function(e){return(0,o.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},f=function(e){return e%7!=0||0===e?"days":"weeks"},p=function(e){return e%7==0?e/7:e},m=function(e,t){return 0===e?(0,n.t)("courses.edit.sections.drip_schedule.form.immediately"):"".concat(e," ").concat(b(e,t))},b=function(e,t){return(0,n.t)("courses.edit.sections.drip_schedule.form.".concat(t),{count:e})}},33864:function(e,t,r){"use strict";r.d(t,{U:()=>i});var n=r(13532),i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r?{post_login_redirect:window.location.href}:{post_login_redirect:window.location.href,signup:!0};return e?t:n.$T.signIn({params:i})}},12979:function(e,t,r){"use strict";r.d(t,{U:()=>n});var n=function(e){return e.memberTags.filter(function(e){var t=e.display_locations;return(null==t?void 0:t.member_directory)&&e.is_public})}},38649:function(e,t,r){"use strict";r.d(t,{o:()=>n});var n=function(e){return e>99?"99+":e}},9981:function(e,t,r){"use strict";r.d(t,{E0:()=>c,G2:()=>a,eF:()=>l});var n=r(84326),i="great",o="none",a=function(e){return e.status===i},s=function(e,t){var r=0,a=o,s="",l="bg-neutral-200",c=t.length,u=[t.uppercase,t.number,t.symbol].filter(Boolean).length,d="paywalls.checkout.password_strength";return e?c&&3===u?(a=i,r=100,s=(0,n.t)("".concat(d,".great")),l="bg-green-600"):c&&u>=1?(a="better",r=20,s=(0,n.t)("".concat(d,".better")),l="bg-amber-400"):(a="weak",r=10,s=(0,n.t)("".concat(d,".weak")),l="bg-red-500"):(a=o,r=0,s="",l="bg-neutral-200"),{status:a,percentage:r,strengthMessage:s,progressBarColor:l}},l=function(e){var t,r,n={uppercase:/[A-Z]/.test(e),number:/\d/.test(e),symbol:/\W/.test(e),length:e.length>=6};return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s(e,n)),r=r={requirementsMet:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="paywalls.checkout.password_requirement";if(a(e))return r?"":(0,n.t)("".concat(i,".success_message"));var o=[];return e.requirementsMet.length&&t||o.push((0,n.t)("".concat(i,".min_length"),{count:6})),t?(e.requirementsMet.uppercase||o.push((0,n.t)("".concat(i,".uppercase"))),e.requirementsMet.number||o.push((0,n.t)("".concat(i,".number"))),e.requirementsMet.symbol||o.push((0,n.t)("".concat(i,".symbol")))):(o.push((0,n.t)("".concat(i,".uppercase"))),o.push((0,n.t)("".concat(i,".number"))),o.push((0,n.t)("".concat(i,".symbol")))),(0,n.t)("".concat(i,".prefix"),{requirements:o.join(", ")})}},14899:function(e,t,r){"use strict";r.d(t,{$1:()=>a,Q_:()=>i,_k:()=>l,yK:()=>s});var n=r(43032),i=Object.freeze({RESTRICTED:"restricted",PENDING:"pending",REJECTED:"rejected",ENABLED:"enabled"}),o=Object.freeze({STRIPE_US:"CommunityPaymentProcessors::StripeUnitedStates",STRIPE_BR:"CommunityPaymentProcessors::StripeBrazil",REVENUE_CAT:"CommunityPaymentProcessors::RevenueCat"}),a=function(e){return[function(){return e?void 0:n.J6.NOT_EXIST},function(){return(null==e?void 0:e.status)===i.RESTRICTED?n.J6.RESTRICTED:void 0},function(){return(null==e?void 0:e.is_restricted_for_application_fees)?n.J6.RESTRICTED_FOR_APPLICATION_FEES:void 0},function(){return(null==e?void 0:e.status)===i.PENDING?n.J6.PENDING:void 0},function(){return(null==e?void 0:e.status)===i.REJECTED?n.J6.REJECTED:void 0}]},s=function(e){var t;return null!=(t=null==e?void 0:e.includes(o.REVENUE_CAT))&&t},l=function(e){return e===n.J6.ENABLED}},46705:function(e,t,r){"use strict";r.d(t,{$Z:()=>i,V5:()=>s,WI:()=>l,d0:()=>a,jS:()=>o});var n=r(23125),i=function(e){return e===n.sI.REMAINING_TIME},o=function(e){return e===n.sI.FINISH_AT},a=function(e){return e===n.KW.REDIRECT_TO},s=10,l="skip_redirect"},94026:function(e,t,r){"use strict";r.d(t,{FD:()=>a,ho:()=>o,ju:()=>s});var n=r(96486),i=r(38325),o=function(e){return!(0,n.isNil)(e.paywalls_affiliates_attribution_info)},a=function(e){return o(e)?"manage_attribute_sale":"add_attribute_sale"},s=function(e){return e.status===i._.invited}},49882:function(e,t,r){"use strict";r.d(t,{Fy:()=>n,UI:()=>i,Ui:()=>s,a8:()=>l,xn:()=>o,zA:()=>a}),r(13532);var n={onboarding:function(){return"/getting-started"},templates:function(e){return"/communities/".concat(e,"/templates")},questions:function(e){return"/communities/".concat(e,"/questions")},questionsWithVariant:function(e,t){return"".concat(n.questions(e),"?variant=").concat(t)},feed:function(){return"/feed"}},i=function(){return"/members"},o=function(e){return n.questionsWithVariant(e,"goals")},a=function(e){return e.endsWith("/templates")},s=function(e,t){return e.endsWith("/questions")&&t.includes("variant=goals")},l=function(e){return n.questions(e)}},35686:function(e,t,r){"use strict";r.d(t,{TO:()=>c,iQ:()=>l,wh:()=>a,yG:()=>s,zb:()=>o});var n=r(96486);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var o=function(e){var t,r=e.spaceGroupId,n=e.currentCommunityMember;return null==n||null==(t=n.hidden_space_group_ids)?void 0:t.includes(r)},a=function(e){var t,r=e.spaceGroup;return null==r||null==(t=r.policies)?void 0:t.can_manage_space_group},s=function(e){var t;return null==(t=e.spaceGroup.policies)?void 0:t.can_create_space},l=function(e){var t,r,o=e.spaceGroup,a=e.spaces,s=e.spacesWithDetails,l=void 0===s?[]:s;return a=(a=a.filter(function(e){return e.space_group_id==o.id})).map(function(e){return i({},e,(0,n.find)(l,{id:e.id})||{})}),t=i({},o),r=r={spaces:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},c=function(e){return"paywall"===e}},87009:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}r.d(t,{w:()=>o});var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!0,s=!1,l=void 0;try{for(var c,u=Object.entries(e)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)!function(){var e,a=(e=c.value,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return n(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],u=r?"".concat(r,"[").concat(s,"]"):s;i(l,File)?t.set(u,l):i(l,Array)?l.forEach(function(e){t.append("".concat(u,"[]"),e)}):i(l,Object)?o(l,t,u):t.set(u,l)}()}catch(e){s=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}return t}},22301:function(e,t,r){"use strict";r.d(t,{X:()=>n});var n={edit:function(e){var t=e.accessGroupId;return"/settings/access_groups/".concat(t)}}},82705:function(e,t,r){"use strict";r.d(t,{X:()=>n});var n={customize:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/customize")},audience:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/audience")},behavior:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/behavior")},knowledge:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/knowledge")},automations:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/automations")}}},89504:function(e,t,r){"use strict";r.d(t,{J:()=>n});var n=function(e){switch(e){case"alphabetical":return{name:"asc"};case"oldest":return{created_at:"asc"};case"latest":default:return{created_at:"desc"};case"role":return{role:"asc"}}}},55717:function(e,t,r){"use strict";r.d(t,{K:()=>f,w:()=>u});var n=r(96486),i=r(88767),o=r(93199),a=r(13532),s=r(41342);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c=["community-setting","show"],u=function(){return(0,i.useQuery)(c,function(){var e=a.av.communities.communitySettings.index();return(0,o.UT)(e)})},d=function(e){var t=e.data,r=e.updates,n=a.av.communities.communitySettings.update({communitySettingId:t.community_settings.id});return(0,o.gN)(n,{community_setting:r})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMutate,r=void 0===t?n.noop:t,o=e.onSuccess,a=void 0===o?n.noop:o,u=e.onError,f=void 0===u?n.noop:u,p=e.onSettled,m=void 0===p?n.noop:p,b=(0,s.wh)().refetch,h=(0,i.useQueryClient)();return(0,i.useMutation)(d,{onMutate:function(e){var t=e.data,n=h.getQueryData(c);return h.setQueryData(c,t),r&&r(),{previousData:n,data:t}},onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,b()];case 1:return t.sent(),h.setQueryData(c,e),a&&a(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:f,onSettled:m})}},35975:function(e,t,r){"use strict";r.d(t,{L:()=>l,M:()=>c});var n=r(67294),i=r(88767),o=r(3176);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var l=10,c=function(){var e,t,r,c,u,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=d.query,p=void 0===f?"":f,m=d.filters,b=void 0===m?{}:m,h=d.perPage,y=void 0===h?l:h,v=d.initialPage,g=void 0===v?1:v,_=d.options,x=(0,o.L)().listAccessGroups,j=["access_groups_list",p,b,y],w=a({getNextPageParam:function(e){return e.has_next_page?parseInt(e.page)+1:void 0},getPreviousPageParam:function(e){return e.page>1?parseInt(e.page)-1:void 0},keepPreviousData:!0},void 0===_?{}:_),O=(0,i.useInfiniteQuery)(j,function(e){var t=e.pageParam,r=void 0===t?g:t;return x({params:s(a({page:Number(r)>0?Number(r):1},b),{per_page:y,query:p})})},w),S=(0,n.useMemo)(function(){var e;return(null==(e=O.data)?void 0:e.pages)||[]},[null==(e=O.data)?void 0:e.pages]),k=(null==(r=S[0])||null==(t=r.meta)?void 0:t.total_count)||0,P=(null==(c=S[0])?void 0:c.count)||0,C=(null==(u=S[0])?void 0:u.per_page)||y;return s(a({},O),{queryKey:j,totalAccessGroups:k,totalQueryAccessGroups:P,pageSize:C,pages:S})}},17990:function(e,t,r){"use strict";r.d(t,{l:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!((null==e?void 0:e.access_groups_enabled)&&(null==e?void 0:e.access_groups_workflows_enabled))}},46731:function(e,t,r){"use strict";r.d(t,{$:()=>a,d:()=>s});var n=r(88767),i=r(93199),o=r(13532),a="access-group-sources-by-record",s=function(e){var t=e.recordType,r=e.recordId,s=(0,n.useQuery)([a,t,r],function(){return(0,i.UT)(o.av.admin.accessGroupSources.index({record_type:t,record_id:r}))});return{accessGroupSources:s.data,isLoadingAccessGroupSources:s.isLoading}}},37140:function(e,t,r){"use strict";r.d(t,{t:()=>s});var n=r(88767),i=r(3176);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=["access_groups","show"],s=function(e){var t=(0,i.L)().showAccessGroup,r=((function(e){if(Array.isArray(e))return o(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]),s=(0,n.useQuery)(r,function(){return t(e)});return{queryKey:r,accessGroup:s.data,isLoadingAccessGroup:s.isLoading}}},76492:function(e,t,r){"use strict";r.d(t,{S:()=>c});var n=r(67294),i=r(96486),o=r(88767),a=r(93199),s=r(13532),l=["access_groups","index"],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,r=void 0===t?{}:t,c=e.enabled,u=(0,o.useInfiniteQuery)([l,r.ids],function(e){var t=e.pageParam;return(0,a.UT)(s.av.admin.accessGroups.index({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({page:void 0===t?1:t,per_page:100},r)}))},{enabled:void 0===c||c,getNextPageParam:function(e){return e.has_next_page?Number(e.page)+1:void 0}}),d=u.data,f=u.fetchNextPage,p=u.hasNextPage,m=u.isLoading,b=u.isError,h=u.refetch;return(0,n.useEffect)(function(){p&&f()},[d,f,p]),{data:(0,i.flatten)(null==d?void 0:d.pages.map(function(e){return e.records})),isError:b,refetch:h,isLoading:!!(m||p)}}},56368:function(e,t,r){"use strict";r.d(t,{b:()=>u});var n,i=r(88767),o=r(93199),a=r(95533),s=r(4403);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=(l(n={},s.ry.Space,a.a.accessRegistry.spaces),l(n,s.ry.SpaceGroup,a.a.accessRegistry.spaceGroups),l(n,s.ry.AccessGroup,a.a.accessRegistry.accessGroups),n),u=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=c[e];return(0,i.useQuery)(["access_registry_content_spec",e,t],function(){return(0,o.UT)(n.show(t))},{enabled:r})}},90978:function(e,t,r){"use strict";r.d(t,{o:()=>o});var n=r(41342),i=r(14899),o=function(){var e=(0,n.wh)(),t=e.currentCommunity,r=e.currentCommunitySettings,o=null==t?void 0:t.payment_processor;return{isPaymentProcessorEnabled:!!(o&&o.status===i.Q_.ENABLED&&(!o.is_restricted_for_application_fees||(null==r?void 0:r.paywalls_for_restricted_country_enabled)))}}},6216:function(e,t,r){"use strict";r.d(t,{U:()=>f});var n=r(88767),i=r(84326),o=r(93199),a=r(13532),s=r(60878);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c=function(){return(0,o.UT)((0,a.Nu)())},u=function(e){var t=e.map(function(e){return e.id});return(0,o.aU)((0,a.pW)(),{community_order:t})},d=["COMMUNITY_SWITCHER"],f=function(){var e=(0,n.useQuery)(d,c),t=e.data,r=e.isLoading,o=e.refetch,a=(0,s.pm)(),f=(0,n.useMutation)(u,{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){a.error((0,i.t)("community_switcher_reorder.reorder_error"))}}),p=f.mutate,m=f.isLoading,b=(null==t?void 0:t.token)||"";return{communities:(null==t?void 0:t.communities)||[],token:b,isLoadingCommunities:r,isReorderingCommunities:m,refetchCommunities:o,onSortCommunities:p}}},1777:function(e,t,r){"use strict";r.d(t,{_:()=>o});var n=r(88767),i=r(51630),o=function(e){return(0,n.useMutation)(function(e){return i.e5.withdrawConnection(e)},e)}},31220:function(e,t,r){"use strict";r.d(t,{z:()=>a});var n=r(67294),i=r(41342),o={isApiFeatureEnabled:!1,isAdminApiFeatureEnabled:!1,isHeadlessApiFeatureEnabled:!1,isOverviewTabEnabled:!1},a=function(){var e=(0,i.wh)(),t=e.currentCommunity,r=e.isLoading;return(0,n.useMemo)(function(){if(r||!t)return o;var e=t.api_access_feature_flag_enabled,n=t.admin_api_feature_flag_enabled,i=t.headless_api_feature_flag_enabled;return{isApiFeatureEnabled:e,isAdminApiFeatureEnabled:n,isHeadlessApiFeatureEnabled:i,isOverviewTabEnabled:n||i}},[t,r])}},16040:function(e,t,r){"use strict";r.d(t,{K:()=>c});var n=r(67294),i=r(88767),o=r(84326),a=r(51630),s=r(60878);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r=e.event,c=(t=(0,n.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=(0,s.pm)().error,p=function(e){return f((null==e?void 0:e.message)?null==e?void 0:e.message:(0,o.t)("something_went_wrong"))},m=(0,i.useMutation)(function(){return a.S1.fetchRecurring({event:r})},{onSuccess:function(e){return d(e)},onError:p}),b=m.mutate;return{isLoading:m.isLoading,events:u,fetchEvents:b,onRecurringRsvpSubmit:(0,i.useMutation)(function(e){return a.S1.recurringRsvp({event:r,params:e})},{onError:p}).mutateAsync,onRecurringUnRsvpSubmit:(0,i.useMutation)(function(e){return a.S1.recurringUnRsvp({event:r,params:e})},{onError:p}).mutateAsync}}},10773:function(e,t,r){"use strict";r.d(t,{R:()=>y});var n=r(67294),i=r(88767),o=r(84326),a=r(93199),s=r(13532),l=r(41342),c=r(60878);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}function h(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var y=function(){var e=(0,c.pm)(),t=(0,l.wh)(),r=t.data,u=t.refetch,d=p((0,n.useState)([]),2),b=d[0],y=d[1],v=p((0,n.useState)([]),2),g=v[0],_=v[1],x=p((0,n.useState)(!1),2),j=x[0],w=x[1],O=p((0,n.useState)(new Set),2),S=O[0],k=O[1],P=p((0,n.useState)({}),2),C=P[0],N=P[1],A=p((0,n.useState)([]),2),I=A[0],E=A[1],T=!!(null==r?void 0:r.display_welcome_banner),L=(0,i.useQuery)("BANNER_DATA",function(){return(0,a.UT)((0,s.dm)())},{onSuccess:function(e){N(e.banner),u()},onError:function(e){console.error(e)},enabled:!1}),D=L.refetch,M=L.isLoading,R={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},B=(0,i.useMutation)(function(e){var t=e.communityMemberId,r=e.display;return(0,a.gN)(s.av.communityMembers.preference({id:t}),{display_home_welcome_banner:r})},{onSuccess:function(){D()},onError:function(){e.error((0,o.t)("request_failure_message"))}}).mutateAsync;return{posts:b,spaces:g,bannerData:C,memberActivityData:I,spacesHasNextPage:j,participatingSpacesIds:S,fetchPosts:function(){return f(function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,(0,a.UT)((0,s.iL)())];case 1:return y(e=t.sent().posts),[2,e]}})})()},fetchSpaceSuggestions:function(e){var t=e.page,r=e.perPage;fetch((0,s.J7)()+"?page=".concat(t,"&per_page=").concat(void 0===r?9:r),R).then(function(e){return e.json()}).then(function(e){1===t?_(e.spaces):_(m(g).concat(m(e.spaces))),w(e.has_next_page),k(new Set(e.participating_space_ids))}).catch(function(e){console.error(e)})},fetchBannerData:D,fetchCommunityMemberActivityData:function(){fetch((0,s.j0)(),R).then(function(e){return e.json()}).then(function(e){E(e.activity)}).catch(function(e){console.error(e)})},fetchUpcomingEvents:function(){return f(function(){return h(this,function(e){switch(e.label){case 0:return[4,(0,a.UT)((0,s.lc)())];case 1:return[2,e.sent().events]}})})()},isWelcomeBannerVisible:T,setWelcomeBannerPreference:B,setParticipatingSpacesIds:k,isBannerDataLoading:M}}},85401:function(e,t,r){"use strict";r.d(t,{o:()=>h});var n=r(67294),i=r(84326),o=r(93199),a=r(87009),s=r(13532),l=r(10773),c=r(60878);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var b={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},h=function(){var e=p((0,n.useState)({community:{},community_setting:{}}),2),t=e[0],r=e[1],u=p((0,n.useState)(!1),2),d=u[0],h=u[1],y=p((0,n.useState)({postSortOptions:[],trendingPostWindowLimit:30,homePageOption:{}}),2),v=y[0],g=y[1],_=p((0,n.useState)([]),2),x=_[0],j=_[1],w=p((0,n.useState)([]),2),O=w[0],S=w[1],k=p((0,n.useState)(!1),2),P=k[0],C=k[1],N=(0,c.pm)(),A=N.error,I=N.success,E=(0,l.R)().fetchBannerData;return{dataLoaded:d,settings:t,metaData:v,loggedInUserSpaceOptions:x,loggedOutUserSpaceOptions:O,setSettings:r,fetchLandingPageSettings:function(){return f(function(){var e,t;return m(this,function(n){switch(n.label){case 0:h(!1),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,fetch((0,s.H5)(),b)];case 2:if(!(e=n.sent()).ok)throw Error("Failed to fetch landing page settings");return[4,e.json()];case 3:return r((t=n.sent()).settings),g({postSortOptions:t.post_sort_options,trendingPostWindowLimit:t.trending_post_window_limit,homePageOption:t.home_page_option}),j(t.logged_in_user_space_options),S(t.logged_out_user_space_options),[3,6];case 4:return console.error(n.sent()),[3,6];case 5:return h(!0),[7];case 6:return[2]}})})()},setLoggedInUserSpaceOptions:j,setLoggedOutUserSpaceOptions:S,reSetWelcomeBannerPreference:function(){return(0,o.gN)((0,s.HJ)())},updateLandingPageSettings:function(e){return f(function(){var t,r;return m(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,5,6]),C(!0),t=(0,a.w)({landing_page_settings:e}),[4,fetch((0,s.H5)(),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({method:"POST",body:t,mode:"no-cors"},b))];case 1:return[4,n.sent().json()];case 2:return n.sent(),I((0,i.t)("changes_saved")),[4,E()];case 3:return n.sent(),[3,6];case 4:return r=n.sent(),A((0,i.t)("something_went_wrong")),console.error(r),[3,6];case 5:return C(!1),[7];case 6:return[2]}})})()},isSaving:P}}},59043:function(e,t,r){"use strict";r.d(t,{g:()=>c});var n=r(67294),i=r(78456),o=r(41342),a=r(55717),s=r(61740),l=r(76937).aP["0"],c=function(e){var t=(0,o.wh)(),r=t.currentCommunityMember,c=t.currentUser,u=(0,a.w)(),d=u.data,f=u.isLoading,p=null==d?void 0:d.community_settings,m=(0,s.T)({defaultSort:l,scopeResults:e,per_page:3}),b=m.members,h=m.isLoading;return{members:b,isLoading:(0,n.useMemo)(function(){return f||h},[f,h]),canSeeMembersDirectory:(0,n.useMemo)(function(){var e=null==p?void 0:p.public_member_directory,t=(0,i.vb)(r);return e||t},[p,r,c]),canSeeMembersAvatarRow:(0,n.useMemo)(function(){return c},[c])}}},57670:function(e,t,r){"use strict";r.d(t,{p:()=>u});var n=r(23560),i=r.n(n),o=r(88767),a=r(84326),s=r(93199),l=r(41342),c=r(60878),u=function(e,t){var r=(0,l.wh)().currentCommunityMember,n=(0,c.pm)(),u=n.success,d=n.error;return{downloadMembersCSV:(0,o.useMutation)(function(e){var t=e.downloadURL;return(0,s.UT)(t)},{onSuccess:function(){u((0,a.t)("export_member_csv.message",{email:r.email})),i()(e)&&e()},onError:function(){d((0,a.t)("export_member_csv.error_message")),i()(t)&&t()}}).mutate}}},84057:function(e,t,r){"use strict";r.d(t,{f:()=>d});var n=r(67294),i=r(93199),o=r(13532);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||u(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=l((0,n.useState)([]),2),r=t[0],a=t[1],u=l((0,n.useState)(0),2),d=u[0],f=u[1],p=l((0,n.useState)(!1),2),m=p[0],b=p[1],h=l((0,n.useState)(!1),2),y=h[0],v=h[1],g=function(t,r){return(0,i.UT)("internal_api/notifications?page=".concat(t,"&per_page=").concat(e,"&notification_group=").concat(r)).then(function(e){1===t?a(c(e.records)):a(function(t){return c(t).concat(c(e.records))}),v(!0),b(e.has_next_page)})};return{dataLoaded:y,setDataLoaded:v,notifications:r,newNotificationCount:d,setNewNotificationCount:f,hasNextPage:m,setHasNextPage:b,fetchNotifications:g,fetchFirstPage:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,g(1,e)];case 1:return t.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},resetNewNotificationsCount:function(){d&&(0,i.Cu)(o.BT.resetNotificationCount()).then(function(e){f(e.new_notifications_count)}).catch(function(e){console.error(e)})},markAsRead:function(e){e.read_at||(0,i.gN)(o.BT.markAsRead({id:e.id})).then(function(t){a(r.map(function(r){return r.id===e.id?t.record:r}))}).catch(function(e){console.error(e)})},markAllAsRead:function(){(0,i.Cu)(o.BT.markAllAsRead()).then(function(){var e=new Date().toString();a(r.map(function(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),n=n={read_at:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}))}).catch(function(e){console.error(e)})},archiveNotification:function(e){(0,i.gN)("internal_api/notifications/".concat(e.id,"/archive")).then(function(){a(r.filter(function(t){return t.id!==e.id}))}).catch(function(e){console.error(e)})},fetchNewNotificationsCount:function(e){return(0,i.UT)((0,o.Rp)()+"?community_id=".concat(e)).then(function(e){f(e.new_notifications_count),e.new_notifications_count&&v(!1)})},resizeNotificationWindow:(0,n.useCallback)(function(){var e=document.getElementById("bottomBarNotificationWrapperOuter"),t=document.getElementById("bottomBarNotificationWrapperInner");if(e){var r=window.innerHeight-56;e.style.height=r+"px"}if(t){var n=window.innerHeight-215;t.style.height=n+"px"}},[]),onNotificationEventReceive:function(e){switch(e.event){case"resetNewNotificationCount":case"updateNewNotificationCount":f(e.new_notifications_count);break;case"newNotification":f(d+1)}},unfollowNotification:function(e){(0,i.pC)("internal_api/posts/".concat(e.post_id,"/post_followers/").concat(e.post_follower_id)).then(function(t){a(r.map(function(r){return r.id===e.id&&t.success&&(r.post_follower_id=null),r}))}).catch(function(e){console.error(e)})},followNotification:function(e){(0,i.Cu)("internal_api/posts/".concat(e.post_id,"/post_followers")).then(function(t){a(r.map(function(r){return r.id===e.id&&t.success&&(r.post_follower_id=t.post_follower_id),r}))}).catch(function(e){console.error(e)})}}}},22444:function(e,t,r){"use strict";r.d(t,{B:()=>s});var n=r(67294),i=r(88767),o=r(29980);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t,r,s,l=e.perPage,c=void 0===l?10:l,u=e.page,d=e.setPage,f=e.searchKeyParams,p=void 0===f?"":f,m=e.filters,b=void 0===m?{}:m,h=e.orderParam,y=e.enabled,v=(t=(0,n.useState)(void 0===h?{created_at:"desc"}:h),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],_=v[1],x=o.W.index({filters:b,order:g,page:u,perPage:c,searchKey:p}),j=(0,i.useQuery)({queryKey:["paywall-charges",{filters:b,order:g,page:u,perPage:c,searchKeyParams:p}],queryFn:x,enabled:void 0===y||y}),w=j.data,O=j.refetch,S=j.isLoading,k=j.remove;return{hasFilters:Object.keys(b).length>0,charges:null!=(r=null==w?void 0:w.records)?r:[],totalCharges:null!=(s=null==w?void 0:w.count)?s:0,refetchCharges:O,removeChargesFromCache:k,isLoadingCharges:S,order:g,setOrder:function(e){_(e),d(1)},perPage:c,page:u,setPage:d}}},79131:function(e,t,r){"use strict";r.d(t,{D:()=>s,p:()=>l});var n=r(67294),i=r(88767),o=r(30169);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s="paywall-subscriptions",l=function(e){var t,r,l,c=e.orderParam,u=e.perPage,d=void 0===u?10:u,f=e.searchKeyParams,p=void 0===f?"":f,m=e.filters,b=void 0===m?{}:m,h=e.enabled,y=e.page,v=e.setPage,g=(t=(0,n.useState)(void 0===c?{created_at:"desc"}:c),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=g[0],x=g[1],j=o.Y.index({filters:b,order:_,page:y,perPage:d,searchKey:p}),w=(0,i.useQuery)({queryKey:[s,{filters:b,order:_,page:y,perPage:d},p],queryFn:j,enabled:void 0===h||h}),O=w.data,S=w.refetch,k=w.isLoading,P=w.remove;return{hasFilters:Object.keys(b).length>0,subscriptions:null!=(r=null==O?void 0:O.records)?r:[],totalSubscriptions:null!=(l=null==O?void 0:O.count)?l:0,refetchSubscriptions:S,removeSubscriptionsFromCache:P,perPage:d,page:y,order:_,setOrder:function(e){x(e),v(1)},setPage:v,isLoadingSubscriptions:k}}},22273:function(e,t,r){"use strict";r.d(t,{_o:()=>a,pI:()=>s});var n=r(88767),i=r(3471),o=r(36047),a="paywall-coupons-list",s=function(e){var t=e.paywallId,r=e.couponStatuses,s=void 0===r?Object.values(o.U):r,l=e.skipDateValidations,c=void 0===l||l,u=e.queryParams,d=e.enabled,f=void 0!==d&&d||!!t;return{paywallCouponsListQuery:(0,n.useQuery)([a,t,{couponStatuses:s,skipDateValidations:c}],i.p.index({paywallId:t,skipDateValidations:c,couponStatuses:s}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:f},void 0===u?{}:u))}}},6948:function(e,t,r){"use strict";r.d(t,{B:()=>a});var n=r(88767),i=r(93199),o=r(13532),a=function(){return{createCsvExportMutation:(0,n.useMutation)(function(e){var t;return t=e,(0,i.Cu)(o.av.admin.paywalls.exports.create(),t)})}}},81779:function(e,t,r){"use strict";r.d(t,{k:()=>s});var n=r(88767),i=r(93199),o=r(13532),a=r(65766),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.useQuery)(e,function(){var e,r;return(0,i.UT)(o.av.paywalls.index({params:(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),r=r={status:t.status||a.dl},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e)}))}),s=r.data,l=r.isLoading;return{paywalls:(void 0===s?[]:s).map(function(e){return{label:e.display_name,value:e.id.toString()}}),isPaywallsLoading:l}}},19043:function(e,t,r){"use strict";r.d(t,{O:()=>s,o:()=>o});var n=r(88767),i=r(47373),o="paywalls-list",a=[],s=function(e){var t,r=e.communityMemberId,s=e.status,l=void 0===s?a:s,c=e.queryParams,u=e.spaceIds,d=void 0===u?[]:u;return{paywallsListQuery:(0,n.useQuery)([o,r,{status:l,spaceIds:d}],i.i.index({community_member_id:null!=(t=null==r?void 0:r.toString())?t:"",status:l.join(","),space_ids:d.filter(function(e){return null!=e}).map(function(e){return String(e)}).join(",")}),void 0===c?{}:c)}}},48996:function(e,t,r){"use strict";r.d(t,{y:()=>u});var n=r(67294),i=r(88767),o=r(93199),a=r(78456),s=r(13532),l=r(41342),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.UT)(s.av.paywalls.index({params:e}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.wh)().currentCommunityMember,r="PAYWALLS"+JSON.stringify(e),o=(0,i.useQuery)(r,function(){return c(e)},{enabled:!!(0,a.vb)(t)}),s=o.data,u=void 0===s?[]:s,d=o.isSuccess,f=o.isLoading,p=(0,n.useMemo)(function(){return u?u.filter(function(e){return"active"===e.status}):[]},[u]),m=(0,n.useMemo)(function(){return!!p&&(null==p?void 0:p.length)>0},[p]);return{activePaywalls:p,isSuccess:d,hasActivePaywalls:m,hasPaywalls:(0,n.useMemo)(function(){return!!u&&(null==u?void 0:u.length)>0},[u]),isLoading:f,allPaywalls:u}}},76289:function(e,t,r){"use strict";r.d(t,{C:()=>s,O:()=>a});var n=r(90220),i=r(41342),o={en:"en",pt:"pt-BR"},a=function(e){var t=e.stripeAccountId,r=e.stripePublicKey,i=e.locale;return(0,n.J)(r,{stripeAccount:t,locale:o[null!=i?i:"en"]})},s=function(){var e,t,r=(0,i.wh)().currentCommunity;return{stripePromise:a({stripeAccountId:null==r||null==(e=r.payment_processor)?void 0:e.id,stripePublicKey:(null==r||null==(t=r.payment_processor)?void 0:t.public_api_key)||window.STRIPE_PUBLIC_KEY,locale:window.locale||"en"})}}},8684:function(e,t,r){"use strict";r.d(t,{U:()=>s});var n=r(67294),i=r(96486),o=r(88767),a=r(93199),s=function(e){var t=e.api,r=e.key,s=e.useParamsWrapper,l=void 0===s||s,c=(0,o.useInfiniteQuery)(["un-paginate",void 0===r?"tags":r,t],function(e){var r=e.pageParam,n=void 0===r?1:r;return(0,a.UT)(t(l?{params:{page:n}}:{page:n}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),u=c.data,d=c.fetchNextPage,f=c.hasNextPage,p=c.isLoading;return(0,n.useEffect)(function(){f&&d()},[f,d,u]),{records:(0,i.flatten)(null==u?void 0:u.pages.map(function(e){return e.records}))||[],isLoading:p||f,hasNextPage:f}}},35410:function(e,t,r){"use strict";r.d(t,{K:()=>c});var n=r(88767),i=r(70442),o=r(84326),a=r(52187),s=r(13532),l=r(60878),c=function(){var e=(0,l.pm)(),t=e.success,r=e.error,c=(0,i.k6)(),u=(0,n.useMutation)(function(e){return a.b.renew(e)},{onSuccess:function(){c.push((0,s.f$)()),t((0,o.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,o.t)("pricing_plans.errors.renew_error"))}}),d=u.mutate,f=u.isLoading,p=(0,n.useMutation)(function(e){return a.b.update(Number(e),0,null)},{onSuccess:function(){c.push((0,s.f$)()),t((0,o.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,o.t)("pricing_plans.errors.update_subscription_error"))}}),m=p.mutate,b=p.isLoading,h=(0,n.useMutation)(function(){return a.b.reactivateEmailHubSubscription()},{onSuccess:function(){t((0,o.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,o.t)("pricing_plans.errors.update_subscription_error"))}});return{renewSubscription:d,isRenewLoading:f,updateSubscription:m,isUpdatingSubscription:b,reactivateEmailHubSubscription:h.mutate,isReactivatingEmailHubSubscription:h.isLoading}}},16235:function(e,t,r){"use strict";r.d(t,{A:()=>_});var n=r(67294),i=r(88767),o=r(15679),a=r(51630),s=r(85893),l=r(57105),c=r(34519),u=r(94281),d="dismissed",f="closed_after_success",p=function(e){var t=e.disabledAgents,r=e.variant,n=(0,l.dd)();return(0,s.jsxs)(c.u_,{isOpen:n.visible,onClose:function(){n.resolve(d),n.hide()},children:[(0,s.jsx)(c.u_.Overlay,{}),(0,s.jsx)(u.d,{variant:void 0===r?"edit":r,disabledAgents:t,onPublish:function(){n.resolve(f),n.hide()},onCancel:function(){n.resolve(d),n.hide()}})]})},m=l.gk.create(function(e){var t=e.disabledAgents,r=e.variant;return(0,s.jsx)(p,{disabledAgents:t,variant:r})}),b=function(){var e=(0,l.dd)(m);return{modal:e,isDisabledAgentsModalVisible:e.visible}},h=r(94644),y=r(23766),v=function(e,t,r){t&&(r.current=t),e.show().then(function(){r.current=null})},g=function(e,t,r){(0,h.N6)(t).then(function(t){var n=t.disabledAgents;n.length>0?e.show({disabledAgents:n,variant:"cancel"}).then(function(e){e===f&&(0,h.uj)(n).then(function(){r()})}):r()})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.actions,r=e.steps,s=e.workflowId,l=(0,o.d)(),c=b().modal,u=(0,y.E)(),d=(0,i.useQuery)({queryKey:["workflow",s],queryFn:function(){return a.nH.fetch({id:null!=s?s:""})},enabled:!t&&!!s}).data,f=(0,n.useMemo)(function(){var e;return null!=(e=null!=t?t:null==d?void 0:d.actions)?e:[]},[t,d]),p=(null==f?void 0:f.length)?f.some(function(e){var t;return null==(t=e.action_type)?void 0:t.startsWith("ai_")}):null!=r&&!!r.length&&r.some(function(e){return null==e?void 0:e.startsWith("ai_")}),m=(0,n.useRef)(null),h=u&&p,_=l.visible&&!!s&&m.current===s,x=(0,n.useCallback)(function(e){if(h)return void v(l,s,m);g(c,f,e)},[h,l,s,c,f]);return{shouldBlockActivation:h,handleActivationAttempt:x,showModal:(0,n.useCallback)(function(){return l.show()},[l]),isModalVisible:_}}},9163:function(e,t,r){"use strict";r.d(t,{L8:()=>u,mA:()=>d,zw:()=>c});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(56414);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var c={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest"},u=20,d=function(){var e,t,r,i,d,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=f.query,m=void 0===p?"":p,b=f.sort,h=void 0===b?c.ALPHABETICAL:b,y=f.filters,v=void 0===y?{}:y,g=f.perPage,_=void 0===g?u:g,x=f.status,j=f.workflowType,w=f.initialPage,O=void 0===w?1:w,S=f.options,k=["all-workflows",m,h,v,_,x,j,O],P=l({getNextPageParam:function(e){return e.has_next_page&&e.page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page&&e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===S?{}:S),C=(0,a.useInfiniteQuery)(k,function(e){var t=e.pageParam,r=void 0===t?O:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,sort:h,filters:v,status:x,workflow_type:j,per_page:_};return m&&(i.query=m),s.n.list({params:i})},P),N=(0,n.useMemo)(function(){var e;return(null==(e=C.data)?void 0:e.pages)||[]},[null==(r=C.data)?void 0:r.pages]),A=(null==(i=N[0])?void 0:i.total_count)||0,I=(null==(d=N[0])?void 0:d.per_page)||_,E=(0,n.useMemo)(function(){return o()(N.map(function(e){return e.records}))},[N]);return e=l({},C),t=t={queryKey:k,totalWorkflows:A,workflows:E,pageSize:I,pages:N},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},59705:function(e,t,r){"use strict";r.d(t,{L:()=>d,_:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(93199),l=r(13532);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=30,f=function(){var e,t,r,i,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=p.query,b=void 0===m?"":m,h=p.order,y=p.filters,v=void 0===y?[]:y,g=p.perPage,_=void 0===g?d:g,x=p.initialPage,j=void 0===x?1:x,w=p.options,O=p.scope,S=void 0===O?{}:O,k=p.isAdminScope,P=void 0!==k&&k,C=["audience",b,h,v,_,S,P],N=(0,a.useInfiniteQuery)(C,function(e){var t=e.pageParam,r=void 0===t?j:t,n=1;"number"==typeof r&&r>0&&(n=r);var i=c({page:n,filters:v.map(function(e){return"near_me"===e.key?u(c({},e),{key:"geo_location"}):e}),per_page:_},S);b&&(i.query=b),h&&(i.order=h);var o=P?l.av.admin.search.contacts.index:l.av.search.contacts.index;return(0,s.UT)(o({params:i}))},c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===w?{}:w)),A=(0,n.useMemo)(function(){var e;return(null==(e=N.data)?void 0:e.pages)||[]},[null==(e=N.data)?void 0:e.pages]),I=(null==(r=A[0])||null==(t=r.meta)?void 0:t.total_count)||0,E=(null==(i=A[0])?void 0:i.count)||0,T=(null==(f=A[0])?void 0:f.per_page)||_,L=(0,n.useMemo)(function(){return o()(A.map(function(e){return e.records}))},[A]);return u(c({},N),{queryKey:C,totalAudience:I,totalQueryAudience:E,audience:L,pageSize:T,pages:A})}},58698:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)(),t=e.currentCommunitySettings,r=e.currentCommunity;return{isBrandedAppsBuilderUIEnabled:!!((null==t?void 0:t.branded_apps_builder_ui_enabled)||(null==r?void 0:r.custom_app_builder_feature_flag_enabled)),isDesignConfigEnabled:!!(null==t?void 0:t.plus_design_config_enabled),isOrphanLinkConfigEnabled:!!(null==t?void 0:t.plus_orphan_link_config_enabled),isWelcomePagesHomeTabsEnabled:!!(null==t?void 0:t.welcome_page_home_tabs_enabled),isHomeTabsAccessGroupsEnabled:!!(null==t?void 0:t.branded_apps_builder_ui_home_tabs_access_groups_enabled),isPreviewInsideBuilderEnabled:!!(null==t?void 0:t.branded_mobile_app_builder_preview_enabled)}}},82610:function(e,t,r){"use strict";r.d(t,{u:()=>a});var n=r(67294),i=r(41342),o=r(78456),a=function(){var e=(0,i.wh)(),t=e.onboardingFlags,r=e.currentCommunityMember;return{isChecklistAvailable:(0,n.useMemo)(function(){return!!r&&!!(0,o.vb)(r)&&!(null==t?void 0:t.getting_started_checklist_hidden)},[t,r])}}},92339:function(e,t,r){"use strict";r.d(t,{$:()=>a});var n=r(88767),i=r(93199),o=r(13532),a=function(e){var t,r=e.memberId;return{communityMemberQuery:(0,n.useQuery)(["community-member-show",r],(t=r,function(){return(0,i.UT)(o.av.communityMember.show({memberId:t}))}),{enabled:!!r})}}},78940:function(e,t,r){"use strict";r.d(t,{fd:()=>d,zw:()=>u});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(93199),l=r(13532);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest",ROLE:"role"},d=function(){var e,t,r,i,d,f,p,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=m.query,h=void 0===b?"":b,y=m.sort,v=void 0===y?u.ALPHABETICAL:y,g=m.order,_=m.filters,x=void 0===_?{}:_,j=m.perPage,w=void 0===j?30:j,O=m.initialPage,S=void 0===O?1:O,k=m.options,P=m.adminScope,C=void 0!==P&&P,N=["community-members",h,v,g,x,w],A=c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===k?{}:k),I=(0,a.useInfiniteQuery)(N,function(e){var t=e.pageParam,r=void 0===t?S:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,sort:v,filters:x,per_page:w};h&&(i.query=h),g&&(i.order=g);var o=C?l.av.admin.search.communityMembers.index:l.av.search.communityMembers.index;return(0,s.UT)(o({params:i}))},A),E=(0,n.useMemo)(function(){var e;return(null==(e=I.data)?void 0:e.pages)||[]},[null==(r=I.data)?void 0:r.pages]),T=(null==(d=E[0])||null==(i=d.meta)?void 0:i.total_count)||0,L=(null==(f=E[0])?void 0:f.count)||0,D=(null==(p=E[0])?void 0:p.per_page)||w,M=(0,n.useMemo)(function(){return o()(E.map(function(e){return e.records}))},[E]);return e=c({},I),t=t={queryKey:N,totalMembers:T,totalQueryMembers:L,members:M,pageSize:D,pages:E},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},33975:function(e,t,r){"use strict";r.d(t,{b7:()=>u,fd:()=>d});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(93199),l=r(13532);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=function(){return window.innerHeight>=2160?120:window.innerHeight>=1440?70:window.innerHeight>=1080?50:window.innerHeight>=925?30:15},d=function(){var e,t,r,i,d,f,p,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=m.query,h=void 0===b?"":b,y=m.sort,v=void 0===y?"alphabetical":y,g=m.order,_=m.filters,x=void 0===_?{}:_,j=m.perPage,w=void 0===j?u():j,O=m.initialPage,S=void 0===O?1:O,k=m.options,P=m.scope,C=void 0===P?{}:P,N=m.isAdminScope,A=void 0!==N&&N,I=["community-members",h,v,g,x,w],E=c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===k?{}:k),T=(0,a.useInfiniteQuery)(I,function(e){var t=e.pageParam,r=void 0===t?S:t,n=1;"number"==typeof r&&r>0&&(n=r);var i=c({page:n,sort:v,filters:x,per_page:w},C);h&&(i.query=h),g&&(i.order=g);var o=A?l.av.admin.search.communityMembers.indexV2:l.av.search.communityMembers.indexV2;return(0,s.UT)(o({params:i}))},E),L=(0,n.useMemo)(function(){var e;return(null==(e=T.data)?void 0:e.pages)||[]},[null==(r=T.data)?void 0:r.pages]),D=(null==(d=L[0])||null==(i=d.meta)?void 0:i.total_count)||0,M=(null==(f=L[0])?void 0:f.count)||0,R=(null==(p=L[0])?void 0:p.per_page)||w,B=(0,n.useMemo)(function(){return o()(L.map(function(e){return e.records}))},[L]);return e=c({},T),t=t={queryKey:I,totalMembers:D,totalQueryMembers:M,members:B,pageSize:R,pages:L},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},78812:function(e,t,r){"use strict";r.d(t,{y:()=>a});var n=r(88767),i=r(51630),o=r(60878),a=function(e){var t=e.ids,r=e.withDeleted,a=e.enabled,s=(0,o.pm)();return(0,n.useQuery)(["COMMUNITY_MEMBERS_LIST",t,r],function(){return i.nH.fetchContacts({params:{ids:t,with_deleted:r}})},{enabled:a,onError:function(e){s.error(e.message)}})}},11376:function(e,t,r){"use strict";r.d(t,{p:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.contacts_search_enabled_for_members_and_spaces)}},10116:function(e,t,r){"use strict";r.d(t,{A:()=>u});var n=r(88767),i=r(70442),o=r(84326),a=r(51630),s=r(66570),l=r(60878),c=r(52382),u=function(e){var t=e.templateKey,r=e.isAutomationWorkflow,u=void 0!==r&&r,d=(0,l.pm)().error,f=(0,i.k6)(),p=(0,s.g0)(),m=(0,n.useMutation)(function(){return a.nH.createFromTemplateKey({templateKey:t})},{onSuccess:function(e){var t=e.id;f.push(c.o.edit({workflowId:t})),p(u?"trigger":"audience")},onError:function(){d((0,o.t)(["settings.workflows.template_summary","there_was_an_error_creating_your_workflow"]))}});return{createFromTemplate:m.mutate,isLoading:m.isLoading}}},9358:function(e,t,r){"use strict";r.d(t,{v:()=>d});var n=r(67294),i=r(88767),o=r(93199),a=r(90544),s=function(){return(0,o.UT)((0,a.E)("".concat("crm/filters","/configuration")))},l=r(65034),c=r(17022),u={near_me:l.E},d=function(){var e=(0,i.useQuery)({queryKey:["crmFilters"],queryFn:s}).data,t=(0,c.N)();return(0,n.useMemo)(function(){return(null==e?void 0:e.filter_configurations)&&t?e.filter_configurations.reduce(function(e,t){var r=u[t.input_type];return r&&e.push({name:t.key,component:r,label:t.label,configuration:t}),e},[]):[]},[e,t])}},62892:function(e,t,r){"use strict";r.d(t,{f:()=>o});var n=r(3189),i=r(41342),o=function(){var e,t=(0,n.D)(),r=t.currentPlan,o=t.isCurrentPlanLoading,a=(0,i.wh)(),s=a.isLoading,l=a.currentCommunity,c=null==r?void 0:r.email_hub_billing,u=null==c?void 0:c.billing_status,d=null==r||null==(e=r.email_hub_billing)?void 0:e.free_period,f=null==l?void 0:l.is_on_trial,p=!f&&"free_period"===u,m=!f&&"active"===u;return{emailHubBilling:c,emailHubBillingFreePeriod:d,isLoading:o||s,billingStatus:u,isTrialing:f,isInFreePeriod:p,isActive:m,isInactive:!(m||p||f)||"inactive"===u}}},76866:function(e,t,r){"use strict";r.d(t,{z:()=>a});var n=r(88767),i=r(93199),o=r(13532),a=function(e,t){var r=(0,n.useMutation)(function(e){var t,r,n=e.reason,a=e.reasonDescription;return t=n,r=a,(0,i.Cu)(o.av.emailHubSubscription.cancel(t,r))},{onSuccess:function(){null==e||e()},onError:function(){null==t||t()}});return{cancelEmailHubSubscription:r.mutate,isCancellingEmailHubSubscription:r.isLoading}}},88277:function(e,t,r){"use strict";r.d(t,{w:()=>i});var n=r(89424),i=function(){return(0,n.$)(".community__switcher")}},36372:function(e,t,r){"use strict";r.d(t,{M:()=>o,T:()=>i});var n=r(89424),i=function(){return(0,n.$)(".bottom-banner")},o=function(){return(0,n.$)("#mainHeader")}},93266:function(e,t,r){"use strict";r.d(t,{n:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.connect_core_enabled)}},48266:function(e,t,r){"use strict";r.d(t,{W:()=>o});var n=r(85924),i=r(98250),o=function(){var e=(0,i.q1)(),t=(0,n.TC)().currentTheme;return e&&"default"!==t}},55158:function(e,t,r){"use strict";r.d(t,{g:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.in_app_enabled)}},61193:function(e,t,r){"use strict";r.d(t,{D:()=>o});var n=r(67294),i=r(41342),o=function(){var e=(0,i.nT)(),t=(0,i.e2)(),r=(0,i.wh)(),o=!!e.helpers.isDataLoading(),a=!!t.isLoading,s=!!r.isLoading;return(0,n.useMemo)(function(){return o||a||s},[o,a,s])}},38434:function(e,t,r){"use strict";r.d(t,{p:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunityMember,t=(0,n.L2)().data,r=!!(null==t?void 0:t.is_private),i=!!(null==t?void 0:t.is_space_member),o=!!(null==e?void 0:e.is_admin);return r&&!i&&!o}},26359:function(e,t,r){"use strict";r.d(t,{W:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.paywalls_countdown_enabled)}},40404:function(e,t,r){"use strict";r.d(t,{C:()=>a});var n=r(70442),i=r(41342),o=r(17617),a=function(){var e=(0,i.wh)().currentCommunity,t=(0,o.ef)(),r=(0,n.k6)(),a=function(t){var n=null==e?void 0:e.home_page_enabled,i=t?"?post_login_redirect=".concat(t):"";if(n)return r.push("/home".concat(i));window.location.href="/".concat(i)};return{goToCommunityRootPath:a,goToMessagesRootPath:function(){if(t)return r.push("/messages");a()}}}},51922:function(e,t,r){"use strict";r.d(t,{R:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)(),t=e.currentCommunitySettings;return{isLoading:e.isLoading,isLiveStreamsLimitsEnabled:!!(null==t?void 0:t.live_streams_limits_enabled),isLivekitEnabled:!!(null==t?void 0:t.livekit_enabled),isLiveMobileWebRTCEnabled:!!(null==t?void 0:t.live_mobile_webrtc_enabled),isLimitUrlSharingEnabled:!!(null==t?void 0:t.limit_url_sharing_enabled),isLargeLiveStreamsEnabled:!!(null==t?void 0:t.large_live_streams_enabled)}}},71607:function(e,t,r){"use strict";r.d(t,{X:()=>x});var n=r(67294),i=r(86654),o=r(55748),a=r(96486),s=r(52293),l=r(91525),c=r(88767),u=r(93199),d=r(90544);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var y=new i.lE,v=function(e){return[e.name,e.place_formatted].filter(Boolean).join(", ")},g=function(e){return e.features[0].properties.full_address},_=["country","region","district","place","locality","neighborhood"],x=function(e){var t=e.initialValue,r=e.shouldSkipLocationDetailRetrieve,i=void 0!==r&&r,f=e.locationTypes,p=void 0===f?_:f,x=e.name,j=b((0,n.useState)([]),2),w=j[0],O=j[1],S=b((0,n.useState)(!1),2),k=S[0],P=S[1],C=b((0,n.useState)(null),2),N=C[0],A=C[1],I=b((0,n.useState)(null!=t?t:null),2),E=I[0],T=I[1],L=(0,l.N3)(),D=(null==L?void 0:L.locale)||"en",M=(0,s.Gc)(),R=M.setValue,B=M.getValues,F=(0,c.useQuery)({queryKey:["mapbox-token"],queryFn:function(){return(0,u.Cu)((0,d.E)("mapbox_v6/token"))},onError:function(e){return console.error(e)}}),z=F.data,U=F.refetch,Z=B(x),G=(0,o.Eh)({accessToken:null==z?void 0:z.token}),q=(0,n.useMemo)(function(){return(0,a.debounce)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return m(function(){var r;return h(this,function(n){switch(n.label){case 0:if(!e)return[3,10];n.label=1;case 1:return n.trys.push([1,3,,9]),[4,G.suggest(e,{sessionToken:y,language:D,types:p.join(",")})];case 2:return O(n.sent().suggestions),[3,9];case 3:var i,o;if(!((void 0===(r=n.sent())?"undefined":(i=r)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)=="object"&&null!==r&&"statusCode"in r&&401===r.statusCode&&t<3))return[3,7];return[4,(o=1e3*t,new Promise(function(e){return setTimeout(e,o)}))];case 4:return n.sent(),[4,U()];case 5:return n.sent(),[4,q(e,t+1)];case 6:return n.sent(),[3,8];case 7:throw r;case 8:return[3,9];case 9:return[3,11];case 10:O([]),n.label=11;case 11:return[2]}})})()},300)},[G,D,p,U]),V=null==w?void 0:w.map(function(e){return{type:"mapbox_v6",text:e.name,value:e.mapbox_id,data:e,description:v(e)}}),H=(0,n.useMemo)(function(){return N?{type:"mapbox_v6",text:g(N),data:N,value:N.features[0].properties.mapbox_id,description:g(N)}:E?{type:"mapbox_v6",text:E.text,data:E.data,value:E.value,description:E.description}:null},[N,E]);return(0,n.useEffect)(function(){if((null==H?void 0:H.text)!==(null==Z?void 0:Z.text)){var e;R(x,{type:"mapbox_v6",text:null!=(e=null==H?void 0:H.text)?e:"",data:null==H?void 0:H.data},{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})}},[H,x,R,null==Z?void 0:Z.text]),{handleClearLocation:function(){T(null),A(null),O([]),P(!0),R(x,{type:"mapbox_v6",text:"",data:{place_formatted:null,name:"",mapbox_id:null},value:""},{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},locationOptions:V,handleSuggestionSelect:function(e){return m(function(){var t;return h(this,function(r){switch(r.label){case 0:if(!e)return O([]),A(null),[2];r.label=1;case 1:var n;if(r.trys.push([1,3,,4]),i)return T(e),A(null),O([]),[2];if(n=e.value,!(t=null==w?void 0:w.find(function(e){return e.mapbox_id===n})))throw Error("Suggestion not found");return[4,G.retrieve(t,{sessionToken:y,language:D})];case 2:return A(r.sent()),T(null),O([]),[2];case 3:return console.error(r.sent()),A(null),T(null),O([]),[3,4];case 4:return[2]}})})()},value:H,debouncedSearch:q,hasNoSuggestions:(null==w?void 0:w.length)===0,displayValue:function(e){return(null==e?void 0:e.data)?"mapbox_id"in e.data?v(e.data):g(e.data):k?"":(null==t?void 0:t.text)||""}}}},33263:function(e,t,r){"use strict";r.d(t,{m:()=>l});var n=r(88767),i=r(93199),o=r(13532),a=function(e){return(0,i.gN)(o.av.communities.onboardingFlags.update({flag:e}),{flag:e})},s=r(91525),l=function(e){var t=e.onEnableFlagSuccess,r=(0,s.wh)(),i=r.onboardingFlags,o=r.refetch,l=r.isLoading,c=(0,n.useMutation)({mutationFn:a,onSuccess:function(){null==t||t(),o()}});return{onboardingFlags:i,enableFlag:c.mutate,isUpdating:c.isLoading,areFlagsLoading:l}}},62750:function(e,t,r){"use strict";r.d(t,{L8:()=>d,iW:()=>p,lP:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(93199),l=r(13532);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var d=30,f="paywalls",p=function(){var e,t,r,i,p,m,b,h,y,v,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=g.query,x=void 0===_?"":_,j=g.filters,w=void 0===j?{}:j,O=g.perPage,S=void 0===O?d:O,k=g.initialPage,P=void 0===k?1:k,C=g.options,N=g.sort,A=void 0===N?{}:N,I=[f,x,w,S,JSON.stringify(A)],E=u({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===C?{}:C),T=(0,a.useInfiniteQuery)(I,function(e){var t=e.pageParam,r=void 0===t?P:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,filters:function(e){var t={},r=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s,l=(s=o.value,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(s,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(s,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],d=l[1];t[u]=d}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}(w),per_page:S};return x&&(i.query=x),Object.keys(A).length>0&&(i.order=A),(0,s.UT)(l.av.search.paywalls.index({params:i}))},E),L=(0,n.useMemo)(function(){var e;return(null==(e=T.data)?void 0:e.pages)||[]},[null==(r=T.data)?void 0:r.pages]),D=null!=(h=null==(p=L[0])||null==(i=p.meta)?void 0:i.total_count)?h:0,M=null!=(y=null==(m=L[0])?void 0:m.count)?y:0,R=null!=(v=null==(b=L[0])?void 0:b.per_page)?v:S,B=(0,n.useMemo)(function(){return o()(L.map(function(e){return e.records}))},[L]);return e=u({},T),t=t={queryKey:I,totalPaywalls:D,totalQueryPaywalls:M,paywalls:B,pageSize:R,pages:L},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},18267:function(e,t,r){"use strict";r.d(t,{I:()=>i});var n=r(70442),i=function(){var e=(0,n.k6)(),t=(0,n.TH)();return function(r,n){var i=new URLSearchParams(t.search);i.set(r,n),e.replace({pathname:t.pathname,search:i.toString()})}}},21523:function(e,t,r){"use strict";r.d(t,{t:()=>o});var n=r(80129),i=r(70442),o=function(e){var t=(0,i.TH)().search,r=(0,n.parse)(t,{ignoreQueryPrefix:!0});try{return e.cast(r)}catch(e){return console.error("Error parsing query params",e),{}}}},23766:function(e,t,r){"use strict";r.d(t,{E:()=>o});var n=r(73849),i=r(24869),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isAiWorkflowCategoryRequired,r=e.categories,o=(0,i.E)(),a=o.isCommunityOnEnterprise,s=o.isCommunityOnPlus,l=(0,n.S)(),c=(void 0===r?[]:r).includes("ai_workflows");return l&&!a&&!s&&(!(void 0!==t&&t)||c)}},22270:function(e,t,r){"use strict";r.d(t,{m:()=>l});var n=r(67294),i=r(93199),o=r(13532);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){var e=s((0,n.useState)(!1),2),t=e[0],r=e[1],a=s((0,n.useState)(null),2),l=a[0],c=a[1],u=s((0,n.useState)(!1),2),d=u[0],f=u[1];return{isJoined:t,joinSpace:function(e){return fetch((0,o.J6)(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({space_id:e})}).then(function(e){return e.json()}).then(function(){r(!0)}).catch(function(e){console.error(e)})},space:l,fetchSpace:function(e){return(0,i.t5)((0,o.Ox)(String(e))).then(function(e){return null==e?void 0:e.json()}).then(function(e){c(e)})},updateSpace:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(!0);var a=(null!=(r=FormData)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)?e:JSON.stringify({space:e}),s=t||(null==l?void 0:l.id);if(!s)throw Error("Space ID is required");return(0,i.t5)((0,o.C1)(String(s)),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({method:"PATCH",body:a},n)).then(function(e){return null==e?void 0:e.json()}).then(function(e){return c(e),f(!1),e})},createSpace:function(e){var t=JSON.stringify({space:e});return(0,i.t5)(o.av.spaces.create(),{method:"POST",body:t,forReactQuery:!0})},maxSpaceLimit:function(e){return(0,i.t5)(o.av.spaces.maxSpaceLimit(e),{method:"GET",forReactQuery:!0})},isSubmitting:d,reSetWelcomeBannerPreference:function(e){return(0,i.gN)(o.av.spaces.resetSpaceWelcomeBannerPreferencePath(e))}}}},24184:function(e,t,r){"use strict";r.d(t,{U:()=>i});var n=r(70442),i=function(){var e,t=(0,n.$B)("/c/:spaceSlug");return null==t||null==(e=t.params)?void 0:e.spaceSlug}},13542:function(e,t,r){"use strict";r.d(t,{K:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunity,t=!!(null==e?void 0:e.white_label);return{whiteLabel:t,shouldShowBranding:!t}}},3425:function(e,t,r){"use strict";r.d(t,{x:()=>o});var n=r(67294),i=r(16235),o=function(e){var t=e.isActive,r=e.onToggle,o=e.actions,a=e.steps,s=e.workflowId,l=(0,i.A)({actions:o,steps:a,workflowId:s}),c=l.handleActivationAttempt,u=l.isModalVisible;return{isEffectivelyActive:t&&!u,handleToggleChange:(0,n.useCallback)(function(e){!t&&e?c(r):r()},[t,c,r]),isModalVisible:u,handleActivationAttempt:c}}},31113:function(e,t,r){"use strict";r.d(t,{Q:()=>a});var n=r(67294),i=r(31841);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t,r=e.defaultCommunityView,a=e.views,s=e.activeStorageKey,l=(0,i._)(void 0===s?"members-directory-view-v2":s),c=l.getValue,u=l.setValue,d=(0,n.useRef)(r),f=(0,n.useCallback)(function(){var e=c(),t=d.current;if(!e)return null!=t?t:a.LIST;var r=e.defaultCommunityView,n=e.defaultUserView;return r===t?n:null!=t?t:a.LIST},[c]),p=(t=(0,n.useState)(f),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],b=p[1];return(0,n.useEffect)(function(){u({defaultCommunityView:d.current,defaultUserView:m})},[m,u]),(0,n.useEffect)(function(){d.current=r,b(f())},[r,f]),[m,b]}},11870:function(e,t,r){"use strict";r.d(t,{L:()=>l});var n=r(67294),i=r(69158),o=r(50308),a=r.n(o);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t,r=e.onFocusWithin,o=void 0===r?a():r,l=e.onBlurWithin,c=void 0===l?a():l,u=e.onFocusWithinChange,d=void 0===u?a():u,f=(t=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],m=f[1];return{isFocusWithin:p,focusWithinProps:(0,i.L_)({onFocusWithin:o,onBlurWithin:c,onFocusWithinChange:function(e){m(e),d(e)}}).focusWithinProps}}},83485:function(e,t,r){"use strict";r.d(t,{w:()=>i});var n=r(67294),i=function(e){(0,n.useEffect)(function(){var t=function(t){e(t)};return window.addEventListener("resize",t),e(),function(){window.removeEventListener("resize",t)}},[e])}},99725:function(e,t,r){"use strict";r.d(t,{t:()=>l});var n=r(85893),i=r(52293),o=r(84326),a=r(51466),s=r(41553),l=function(e){var t=e.name,r=e.maxLength,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","maxLength"]),c=(0,(0,i.Gc)().watch)(t),u=(null==c?void 0:c.length)||0,d=r-u,f=new Intl.NumberFormat("en-US").format(d),p=new Intl.NumberFormat("en-US").format(r),m=u>r;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(a.l.Input,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:t,variant:"textarea",maxLength:r},l)),(0,n.jsx)("div",{className:"mt-2 text-left",children:(0,n.jsx)(s.Z.LabelXs,{color:m?"text-v2-danger":"text-default",children:(0,o.t)("community_bot.bot_builder.behavior_page.form.purpose.characters_left",{count:f,total:p})})})]})}},87545:function(e,t,r){"use strict";r.d(t,{J:()=>a});var n=r(85893),i=r(84326),o=r(57363),a=function(e){var t=e.onClick,r=e.variant,a=void 0===r?"default":r;return(0,n.jsxs)("button",{type:"button",className:"".concat("text-xs-plus flex items-center justify-center gap-2 rounded-full border px-3.5 py-1.5 font-semibold"," ").concat("light"===a?"border-white bg-white text-gray-900 hover:bg-gray-100":"dark"===a?"border-[#2b2e33] bg-[#2b2e33] text-[#f7f9fa] hover:border-[#3a3d42] hover:bg-[#3a3d42]":"bg-primary text-darkest border-primary hover:bg-circle-button hover:text-circle-button"),onClick:t,children:[(0,n.jsx)(o.JO,{type:"20-reload",size:20}),(0,i.t)("community_inbox.reset_preview")]})}},14596:function(e,t,r){"use strict";r.d(t,{g:()=>d});var n=r(85893),i=r(57105),o=r(25362),a=r(84326),s=r(93291),l=r(63549),c=function(e){var t=e.agent,r=(0,s.vQ)({id:t.id}).mutate,i=(0,o.dd)();return(0,n.jsx)(l.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",onConfirm:function(){r({enabled:!1}),i.hide()},title:(0,a.t)("community_bot.bot_builder.disable_modal.title",{name:t.name}),confirmText:(0,a.t)("community_bot.bot_builder.disable_modal.enable"),children:(0,a.t)("community_bot.bot_builder.disable_modal.description")})},u=i.gk.create(function(e){var t=e.agent;return(0,n.jsx)(c,{agent:t})}),d=function(e){return(0,i.dd)(u,{agent:e})}},85712:function(e,t,r){"use strict";r.d(t,{k:()=>d});var n=r(85893),i=r(57105),o=r(25362),a=r(84326),s=r(93291),l=r(63549),c=function(e){var t=e.agent,r=(0,s.vQ)({id:t.id}).mutate,i=(0,o.dd)();return(0,n.jsx)(l.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",onConfirm:function(){r({enabled:!0}),i.hide()},title:(0,a.t)("community_bot.bot_builder.enable_modal.title",{name:t.name}),confirmText:(0,a.t)("community_bot.bot_builder.enable_modal.enable"),children:(0,a.t)("community_bot.bot_builder.enable_modal.description")})},u=i.gk.create(function(e){var t=e.agent;return(0,n.jsx)(c,{agent:t})}),d=function(e){return(0,i.dd)(u,{agent:e})}},19573:function(e,t,r){"use strict";r.d(t,{y:()=>i});var n=r(85893),i=function(e){var t=e.type;return(0,n.jsx)("span",{className:"text-dark bg-secondary rounded-3xl px-2 py-1 text-center text-xs font-medium leading-[14px] tracking-normal",children:t})}},14294:function(e,t,r){"use strict";r.d(t,{L:()=>o});var n=r(85893),i=r(85924),o=function(e){var t=function(t){return(0,n.jsx)(i.e$,{children:(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t))})};return t.displayName="withMainAppProviders(".concat(e.displayName||e.name||"Component",")"),t}},45273:function(e,t,r){"use strict";r.d(t,{H:()=>o});var n=r(70442),i=r(75489),o=function(){var e,t,r,o,a,s=!!(0,n.$B)({path:"/feed"}),l=!!(0,n.$B)({path:"/c/:spaceSlug"}),c=!!(0,n.$B)({path:"/s/:spaceSlug"}),u=!!(null==(e=(0,n.$B)({path:"/feed"}))?void 0:e.isExact),d=!!(null==(t=(0,n.$B)({path:"/c/:spaceSlug"}))?void 0:t.isExact),f=!!(null==(r=(0,n.$B)({path:"/members"}))?void 0:r.isExact),p=!!(null==(o=(0,n.$B)({path:"/messages"}))?void 0:o.isExact),m=!!(null==(a=(0,n.$B)({path:"/getting-started"}))?void 0:a.isExact);return{isSpaceRoute:l,isSpaceGroupRoute:c,isFeedRoute:s,isHomePage:u,isSpaceShowPage:d,isMemberDirectoryPage:f,isMessagesPage:p,isSettingsPage:!!(0,n.$B)(i.s),isGettingStartedRoute:m,isLivePage:!!(0,n.$B)({path:"/live/:roomSlug"})}}},4403:function(e,t,r){"use strict";r.d(t,{jV:()=>n,ry:()=>i});var n={paywall:"paywall",access_group:"access_group",other:"other"},i={Space:"Space",SpaceGroup:"SpaceGroup",AccessGroup:"AccessGroup"}},72667:function(e,t,r){"use strict";r.d(t,{p:()=>n});var n="countries_iso3166"},23125:function(e,t,r){"use strict";r.d(t,{BG:()=>o,KW:()=>n,sI:()=>i});var n={DO_NOTHING:"do_nothing",REDIRECT_TO:"redirect_to"},i={REMAINING_TIME:"remaining_time",FINISH_AT:"finish_at"},o={EMOJI:"emoji",CUSTOM:"custom",SHAPES:"shapes",ICONS:"icons"}},38325:function(e,t,r){"use strict";r.d(t,{_:()=>i,s:()=>n});var n={paypal:"paypal",wise:"wise"},i={inactive:"inactive",invited:"invited",enrolled:"enrolled",disabled:"disabled"}},59335:function(e,t,r){"use strict";r.d(t,{R:()=>i,n:()=>n});var n={br:"BR",us:"US"},i=function(e,t){var r,n,i,o,a=null!=(i=null==e||null==(r=e.toUpperCase())?void 0:r.trim())?i:"",s=null!=(o=null==t||null==(n=t.toUpperCase())?void 0:n.trim())?o:"";return!!(a&&s&&a===s)}},77459:function(e,t,r){"use strict";r.d(t,{g:()=>u});var n=r(67294),i=r(52293),o=r(84326),a=r(59335),s=r(86812),l=r(97987);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=e.fieldNames,r=e.isBrazilianCommunity,u=e.isTaxCollectionEnabled,d=e.selectedCountry,f=t.taxIdType,p=t.taxIdTypeLabel,m=t.taxIdValue,b=(0,i.Gc)(),h=b.setValue,y=(0,b.watch)(p),v=(0,s.SU)(y),g=(0,a.R)(d,a.n.br),_=(0,n.useMemo)(function(){return d?l.A.filter(function(e){return(0,a.R)(e.countryCode,d)}):l.A},[d]),x=(0,n.useMemo)(function(){return _.map(s.xG)},[_]),j=(0,n.useMemo)(function(){return(r||u)&&_.length>0},[r,u,_]),w=(0,n.useMemo)(function(){var e=function(e){if(Array.isArray(e))return c(e)}(x)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(x)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(x)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return g||e.unshift({value:"",text:(0,o.t)("not_applicable")}),e},[x,g]);(0,n.useEffect)(function(){v?h(f,v.enum):(h(f,""),h(m,""))},[v,h,f,m]),(0,n.useEffect)(function(){d&&v&&!(0,a.R)(v.countryCode,d)&&h(p,"")},[d,v,h,p]),(0,n.useEffect)(function(){if(r&&g&&!y){var e=(0,s.Re)();e&&h(p,e.label,{shouldDirty:!0})}},[r,h,g,p,y]);var O=(0,n.useCallback)(function(e){h(p,e.value,{shouldDirty:!0})},[h,p]),S=g||!!v;return{handleTaxIdTypeChange:O,isRequired:g,isTaxIdValueRequired:S,isVisible:j,selectedTaxIdType:v,selectOptions:w,taxIdTypeLabel:y}}},7095:function(e,t,r){"use strict";r.d(t,{R:()=>d});var n=r(85893),i=r(88767),o=r(52928),a=r(3241),s=r(91149),l=r(60878),c=r(94620),u=r(52478),d=function(){return(0,n.jsx)(i.QueryClientProvider,{client:u.E,children:(0,n.jsx)(a.Q,{children:(0,n.jsx)(s.H,{includeSidebar:!0,children:(0,n.jsx)(l.VW,{children:(0,n.jsx)(o.VK,{children:(0,n.jsx)(c.x,{})})})})})})}},72453:function(e,t,r){"use strict";function n(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()}r.d(t,{L:()=>n})},65052:function(e,t,r){"use strict";r.d(t,{y:()=>s});var n=r(36808),i=r.n(n),o=r(44140),a=r.n(o);function s(){var e=window.Intl;try{window.Intl=void 0;var t=a().determine().name();return window.Intl=e,t}catch(e){return a().determine().name()}}document.addEventListener("turbolinks:load",function(){i().set("browser_time_zone",s(),{expires:365,path:"/"})})}}]);
//# sourceMappingURL=/packs/js/9415-4a68e2dad5af5b74.js.map
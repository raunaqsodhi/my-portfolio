"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["5154"],{5765:function(e,t,r){r.d(t,{F:()=>f});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(23560),s=r.n(l),c=r(57363),u=r(39905),d=r(43544),f=function(e){var t=e.variant,r=e.options,o=e.selectedAction,l=e.setSelectedAction,f=e.onChange,p=e.disabled,m=e.type,b=e.large,h=void 0!==b&&b,y=o||r[0],v=(0,i.useMemo)(function(){return r.filter(function(e){return e.value!==y.value})},[r,y]);return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(u.z,{type:void 0===m?"button":m,variant:t,className:"truncate rounded-r-sm",disabled:p,"data-testid":"perform-action-button",large:h,tabIndex:0,onClick:function(){s()(y.onClick)&&y.onClick()},children:y.label}),(0,n.jsx)(d.Lt,{direction:"top-end",buttonType:"button",linkType:"button",buttonWrapperClassName:a()({"pointer-events-none":p}),popperOptions:{modifiers:[{name:"offset",options:{offset:[0,8]}}]},button:(0,n.jsx)("div",{className:"ml-0.5",children:(0,n.jsx)(u.z,{type:"button",variant:t,className:"rounded-l-sm !px-2.5",disabled:p,"data-testid":"select-action-button",large:h,children:(0,n.jsx)(c.JO,{type:"16-chevron-down",size:16,className:"mb-[1px]"})})}),options:v,onChange:function(e){var t=r.find(function(t){return t.value===e});l(t),s()(f)&&f(t)}})]})}},34842:function(e,t,r){r.d(t,{c:()=>a});var n=r(85893),i=r(84326),o=r(57363),a=function(){return(0,n.jsxs)("span",{className:"text-default border-dark bg-primary inline-flex h-5 items-center gap-1 rounded-2xl border px-1.5 py-[3px] pr-2",children:[(0,n.jsx)(o.JO,{type:"12-ai-agent-badge",size:12,className:"!w-3"}),(0,n.jsx)("span",{className:"text-[0.6rem] font-medium",children:(0,i.t)("community_bot.profile_tag")})]})}},32050:function(e,t,r){r.d(t,{b:()=>u});var n=r(85893),i=r(94184),o=r.n(i),a=r(57363),l=r(41553),s={info:"20-info",success:"20-checkmark-circle-fill",alert:"20-alert",warning:"20-alert"},c={info:"border-v2-info text-v2-info",success:"border-v2-success text-v2-success",alert:"border-v2-danger text-v2-danger",warning:"border-v2-warning text-v2-warning"},u=function(e){var t=e.type,r=void 0===t?"info":t,i=e.icon,u=e.title,d=e.showIcon,f=e.description,p=e.className,m=e.children;return(0,n.jsx)("div",{className:o()("rounded-lg border border-l-8 px-6 py-4",c[r],void 0===p?"":p),role:"alert",children:(0,n.jsxs)("div",{className:"flex w-full gap-x-3",children:[(void 0===d||d)&&(i||(0,n.jsx)(a.JO,{type:s[r],size:20,className:"mt-1 !self-start"})),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[u&&(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:u}),f&&(0,n.jsx)(l.Z.LabelSm,{children:f}),m&&(0,n.jsx)(n.Fragment,{children:m})]})]})})}},37919:function(e,t,r){r.d(t,{D:()=>c});var n=r(85893),i=r(67294),o=r(12621),a=r(52293);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var c=(0,i.forwardRef)(function(e,t){var r=e.name,c=e.style,u=void 0===c?{}:c,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","style"]),f=(0,i.useRef)(null),p=(0,a.Gc)(),m=p.watch,b=p.control,h=m(r);return(0,i.useEffect)(function(){f.current&&(f.current.style.height="inherit",f.current.style.height="".concat(f.current.scrollHeight,"px"))},[h]),(0,n.jsx)("div",{className:"react-auto-expanding-text-input form-input",children:(0,n.jsx)(a.Qr,{name:r,control:b,render:function(e){var r=e.field,i=r.onChange,a=r.value,c=r.ref;return(0,n.jsx)("textarea",s(l({},d),{value:a,onChange:function(e){e.preventDefault(),i(e.target.value.replaceAll("\n",""))},ref:(0,o.Z)(f,t,c),className:"form-control placeholder:text-light placeholder:opacity-100",rows:1,style:s(l({},u),{resize:"none"})}))}})})});c.displayName="AutoExpandingTextInput"},80132:function(e,t,r){r.d(t,{I:()=>a});var n=r(85893),i=r(1168),o=r(57363),a=function(e){var t=e.label,r=e.isAdmin,a=void 0!==r&&r;return(0,n.jsxs)("div",{className:(0,i.A)("text-tertiary flex h-[22px] max-w-fit items-center rounded-xl px-2 text-[10px] font-bold uppercase tracking-wide",a?"group-hover:bg-overlay-dark bg-[#ECF5FF] dark:bg-[#34373D] dark:group-hover:bg-[#202226]":"bg-tertiary group-hover:bg-overlay-dark dark:group-hover:bg-[#202226]"),"aria-label":t,children:[(0,n.jsx)(o.JO,{type:"14-moderator-icon",size:14,className:(0,i.A)("mr-0.5 !w-4",a?"text-[#2563EB]":"text-tertiary")}),t]})}},44820:function(e,t,r){r.d(t,{_:()=>a});var n=r(85893),i=r(84326),o=r(39905),a=function(e){var t,r,a=e.type,l=e.classNames,s=e.children,c=e.submitting,u=void 0!==c&&c,d=e.submittingText,f=void 0===d?(0,i.t)("submitting"):d,p=e.isDisabled,m=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["type","classNames","children","submitting","submittingText","isDisabled"]);return(0,n.jsxs)(o.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:void 0===a?"button":a,disabled:u||void 0!==p&&p},m),r=r={className:void 0===l?"":l,children:[u&&f,!u&&s]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},20220:function(e,t,r){r.d(t,{C:()=>c});var n=r(85893),i=r(94184),o=r.n(i),a=r(84326),l=r(57363),s=r(39905),c=function(e){var t=e.children,r=e.onClick,i=e.onButtonClick;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(s.z,{variant:"secondary",type:"button",className:o()("rounded-r-none border-r-0 !pl-3 !pr-2 !font-light",{"pointer-events-none":!i}),onClick:i,children:t}),(0,n.jsx)("div",{className:"ml-[-1px]",children:(0,n.jsx)(s.z,{type:"button",onClick:r,variant:"secondary",className:"rounded-l-none border-l-0 !px-1.5","data-testid":"clear-action-button","aria-label":(0,a.t)("clear"),title:(0,a.t)("clear"),children:(0,n.jsx)(l.JO,{"aria-hidden":!0,type:"16-close",size:16,className:"mb-[1px]"})})})]})}},22636:function(e,t,r){r.d(t,{T:()=>l});var n=r(85893),i=r(50312),o=r(84326),a=r(57363),l=function(e){var t=e.handleChangeCoverClick,r=e.showAddCoverBtn,l=e.customAddCoverBtn;return(0,n.jsx)(i.u,{show:!!r,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-75",leave:"transition-opacity duration-300",leaveFrom:"opacity-75",leaveTo:"opacity-0",children:(0,n.jsx)("div",{role:"button",onClick:t,onKeyDown:t,tabIndex:0,children:l||(0,n.jsxs)("button",{type:"button",className:"form-section__add-cover",children:[(0,n.jsx)(a.JO,{type:"toolbar-image",className:"no-fill"}),(0,o.t)("add_cover")]})})})}},25958:function(e,t,r){r.d(t,{B:()=>a});var n=r(85893),i=r(41342),o=r(39905),a=function(e){var t=e.onChange,r=e.onDelete,a=e.changeButtonText,l=e.removeButtonText,s=(0,i.wh)().isViewOnlyMasquerading;return(0,n.jsxs)("div",{className:"cover-image-overlay hover:opacity-100","data-testid":"cover-image-overlay",children:[(0,n.jsx)(o.z,{variant:"secondary",onClick:t,disabled:s,children:a}),(0,n.jsx)(o.z,{variant:"secondary",onClick:r,type:"button",disabled:s,children:l})]})}},57462:function(e,t,r){r.d(t,{Z:()=>o});var n=r(85893),i=r(57363),o=function(e){var t=e.title,r=e.description;return(0,n.jsxs)("div",{className:"image-input-banner__add",children:[(0,n.jsx)("div",{className:"image-input-banner__add__icon-wrapper",children:(0,n.jsx)(i.JO,{type:"plus-big",viewBox:"0 0 20 20"})}),t&&(0,n.jsx)("span",{className:"image-input-banner__label",children:t}),r&&(0,n.jsx)("span",{className:"image-input-banner__description !text-dark",children:r})]})}},6394:function(e,t,r){r.d(t,{D:()=>f});var n=r(85893),i=r(84326),o=r(61641),a=r(22636),l=r(20624),s=r(25958),c=function(e){var t=e.changeImageText,r=void 0===t?(0,i.t)("edit_cover_image"):t,o=e.handleChangeCoverClick,a=e.handleDelete,c=e.imageUrl,u=e.processing,d=e.value,f=!!u;return(0,n.jsxs)("div",{className:"cover-image-input__preview",children:[f&&(0,n.jsx)("div",{className:"quickpost-progress",children:(0,n.jsx)(l.m,{})}),!!d&&!f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{loading:"lazy",src:c,alt:""}),(0,n.jsx)(s.B,{onDelete:a,onChange:o,removeButtonText:(0,i.t)("remove_cover_image"),changeButtonText:r})]})]})};function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var d=function(e){var t=e.value,r=e.processing;return t||r?(0,n.jsx)(c,u({},e)):(0,n.jsx)(a.T,u({},e))},f=function(e){var t=e.renderer,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["renderer"]);return(0,n.jsx)(o.a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({renderer:void 0===t?d:t,title:(0,i.t)("quick_post_v2.choose_cover_image")},r))}},73262:function(e,t,r){r.d(t,{W:()=>f});var n=r(85893),i=r(52293),o=r(94184),a=r.n(o),l=r(96486),s=r(15953),c=r(84326),u=r(57363),d=function(e){var t=e.onChange,r=e.value,i=e.fullWidth,o=e.disabled,d=e.minDate,f=e.maxDate,p=e.required,m=e.withIcon,b=e.minuteIncrement,h=e.isStatic,y=e.dateInputOptions,v=e.dataTestId,g=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enableTime:!0,dateFormat:"F d, Y G:i K",minDate:d,maxDate:f,disableMobile:!0,minuteIncrement:b,static:h},void 0===y?{}:y);return(0,n.jsx)("div",{className:"form-input","data-testid":v,children:(0,n.jsxs)("div",{className:a()("flex",{"flatpickr--static":h}),children:[(0,n.jsx)(s.default,{className:a()("flatpickr bg-primary border-primary text-dark h-[46px] px-4 text-left text-base font-normal",{"w-full":void 0!==i&&i,"!cursor-not-allowed opacity-40":o,"!rounded-r-none !border-r-0":m}),"data-enable-time":!0,options:g,value:r,onValueUpdate:function(e){(0,l.first)(e)&&t(e[0].toISOString())},disabled:o,placeholder:(0,c.t)("select_a_date"),required:p}),!!m&&(0,n.jsx)("div",{className:a()("bg-primary border-primary relative -ml-px inline-flex items-center space-x-2 rounded-r-lg border border-l-0 px-4 py-2",{"cursor-not-allowed opacity-40":o}),children:(0,n.jsx)(u.JO,{type:"16-calendar",useWithFillCurrentColor:!0,size:16,className:"text-light"})})]})})},f=function(e){var t=e.name,r=e.rules,o=e.disabled,a=void 0!==o&&o,l=e.fullWidth,s=void 0!==l&&l,c=e.minDate,u=void 0===c?"":c,f=e.maxDate,p=void 0===f?"":f,m=e.minuteIncrement,b=void 0===m?15:m,h=e.required,y=void 0!==h&&h,v=e.withIcon,g=void 0!==v&&v,x=e.isStatic,j=void 0!==x&&x,O=e.dataTestId,w=void 0===O?"":O,S=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","rules","disabled","fullWidth","minDate","maxDate","minuteIncrement","required","withIcon","isStatic","dataTestId"]),_=(0,i.Gc)().control;return(0,n.jsx)(i.Qr,{control:_,name:t,rules:void 0===r?{}:r,render:function(e){var t=e.field,r=t.onChange,i=t.value;return(0,n.jsx)(d,{onChange:r,value:i,fullWidth:s,disabled:a,minDate:u,maxDate:p,withIcon:g,required:y,minuteIncrement:b,isStatic:j,dateInputOptions:S,dataTestId:w})}})}},6685:function(e,t,r){r.d(t,{D:()=>u});var n=r(85893),i=r(61973),o=r(11699),a=r(52293),l=r(84326),s=r(4393),c=r(64608),u=function(e){var t=e.startsAtConfig,r=e.endsAtConfig,u=e.durationConfig,d=e.disabled,f=void 0!==d&&d,p=(0,a.Gc)(),m=p.register,b=p.setValue,h=p.getValues,y=h(t.name),v=(0,s.bl)(y);return(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2 md:flex-row md:items-center",children:[(0,n.jsx)(c.x,{name:t.name,onChange:function(e){var t=h(u.name),n=(0,i.Z)(e,t);b(r.name,n)},minDate:t.minDate,dataTestId:"event_starts_at",disabled:f}),(0,n.jsx)("div",{className:"mx-2",children:(0,l.t)("to")}),(0,n.jsx)(c.x,{name:r.name,onChange:function(){var e=h(t.name),n=(0,s.bl)(e),i=h(r.name),a=(0,s.bl)(i),l=(0,o.Z)(a,n);l<0||b(u.name,l,{shouldDirty:!0})},minDate:v,dataTestId:"event_ends_at",disabled:f}),(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},m(u.name)))})]})}},64608:function(e,t,r){r.d(t,{x:()=>v});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(3151),s=r(96486),c=r(9198),u=r.n(c),d=r(52293),f=r(4393),p=r(57363),m=r(41553),b=r(83894),h=r(69119);function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var v=function(e){var t=e.className,r=void 0===t?"":t,o=e.classNameDate,c=void 0===o?"":o,v=e.classNameTime,g=void 0===v?"":v,x=e.dataTestId,j=e.datePlaceholder,O=void 0===j?"":j,w=e.disabled,S=void 0!==w&&w,_=e.labelDate,N=void 0===_?"":_,P=e.labelTime,k=void 0===P?"":P,D=e.maxDate,E=e.minDate,A=e.name,T=e.onChange,C=void 0===T?s.noop:T,I=e.timePlaceholder,M=void 0===I?"":I,L=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","classNameDate","classNameTime","dataTestId","datePlaceholder","disabled","labelDate","labelTime","maxDate","minDate","name","onChange","timePlaceholder"]),R=(0,d.Gc)().control,F=(0,i.useRef)(),$=(0,i.useRef)(),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.noop;return function(t){var r;if(null!=(r=Date)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r){var n=t;E&&(0,l.default)(n,E)&&(0,f.qB)(n)&&(n=(0,f.qe)(E)),e(n.toUTCString()),C(n)}}};return(0,n.jsx)(d.Qr,{control:R,name:A,render:function(e){var t=e.field,i=t.onChange,o=t.value,s=o&&new Date(o),d=s&&E&&D&&(0,l.default)(s,E)&&(0,l.default)(s,D)?{minTime:E,maxTime:D}:s&&E&&(0,l.default)(s,E)?{minTime:E,maxTime:(0,b.default)(E)}:s&&D&&(0,l.default)(s,D)?{minTime:(0,h.default)(D),maxTime:D}:{minTime:void 0,maxTime:void 0},f=d.minTime,v=d.maxTime;return(0,n.jsxs)("div",{className:a()("flex",r),"data-testid":x,children:[(0,n.jsxs)("div",{className:c,children:[N&&(0,n.jsx)("label",{htmlFor:A,className:"mb-2",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:N})}),(0,n.jsxs)("div",{className:"relative mr-1","data-testid":"event_date",children:[(0,n.jsx)(u(),y({ref:F,selected:s,dateFormat:"MMM d, yyyy",onChange:U(i),minDate:E,maxDate:D,name:A,disabled:S,placeholderText:O,className:"relative"},L)),(0,n.jsx)(p.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null==(t=F.current)||null==(e=t.input)||e.focus()}})]})]}),(0,n.jsxs)("div",{className:g,children:[k&&(0,n.jsx)("label",{htmlFor:A,className:"mb-2",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:k})}),(0,n.jsxs)("div",{className:"relative ml-1","data-testid":"event_hour",children:[(0,n.jsx)(u(),y({ref:$,selected:s,onChange:U(i),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa",disabled:S,placeholderText:M,minTime:f,maxTime:v,className:"relative"},L)),(0,n.jsx)(p.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null==(t=$.current)||null==(e=t.input)||e.focus()}})]})]})]})}})}},91704:function(e,t,r){r.d(t,{P:()=>h});var n=r(85893),i=r(67294),o=r(45697),a=r.n(o),l=r(94184),s=r.n(l),c=r(66007),u=r(70442),d=r(29504),f=r(10958),p=r(15731),m=r(30380);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t,r,o,a=e.content,l=e.disableFullScreenPreview,h=void 0!==l&&l,y=e.contentParentPath,v=e.transformLinks,g=void 0===v?f.G5:v,x=(0,u.k6)(),j=(0,i.useRef)(null),O=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1],_=(0,i.useRef)(null),N=(0,p.I)();(0,i.useEffect)(function(){if(j.current){var e=j.current.querySelector(".trix-content");(0,f.GL)(e),g({containerElement:e,shouldIncludeInternalLinks:N}),(0,f.BU)(e),(0,f.el)(e),new d.W(j.current).addAttachmentClickEventHandler(function(e){var t=e.attachments,r=e.currentIndex;h?x.push(y):(_.current={attachments:t,currentIndex:r},S(!0))})}},[j,N,y,h,x]);var P=(0,i.useMemo)(function(){return(0,f.ND)(a)},[a]);return(0,n.jsxs)("div",{className:s()("react-trix-content text-dark",{"fullscreen-preview-enabled":!h}),ref:j,children:[w&&(0,n.jsx)(m._,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},_.current),o=o={onClose:function(){_.current=null,S(!1)},show:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r)),(0,n.jsx)(c.Z,{html:P})]})};h.propTypes={content:a().string.isRequired,disableFullScreenPreview:a().bool,contentParentPath:a().string,transformLinks:a().func}},96619:function(e,t,r){r.d(t,{n:()=>c});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(52293),s=r(50815),c=(0,i.forwardRef)(function(e,t){var r=e.name,i=e.className,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","className"]),c=(0,l.Gc)().control;return(0,n.jsx)(l.Qr,{control:c,name:r,render:function(e){var r,l,c=e.field,u=c.onChange,d=c.value,f=c.name;return(0,n.jsx)(s.Z,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),l=l={className:a()("placeholder:text-light placeholder:opacity-100",i),name:f,onChange:function(e){return u(e.target.value)},value:d,ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(l,e))}),r))}})});c.displayName="FormTextAreaAutosize"},59892:function(e,t,r){r.d(t,{$:()=>l});var n=r(85893),i=r(96486),o=r(52293),a=r(23627),l=function(e){var t=e.name,r=e.onChangeCallback,l=void 0===r?i.noop:r,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","onChangeCallback"]),c=(0,o.Gc)().control;return(0,n.jsx)(o.Qr,{control:c,name:t,render:function(e){var t=e.field,r=t.onChange,o=t.value;return(0,n.jsx)(a.R,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({value:o,onChange:function(e){(0,i.isFunction)(l)&&l(e),r(e)}},s))}})}},27753:function(e,t,r){r.d(t,{q:()=>b,m:()=>y});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(50308),s=r.n(l),c=r(84326),u=r(41363),d=r(80171),f=function(e){var t=e.editor,r=e.inputRef,n=(0,i.useRef)(null);if(t)n.current={getText:function(){return t.getText()},insertText:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.selection.anchor;t.chain().focus().insertContentAt(r,e).run()},insertLink:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r?t.state.selection.anchor-2:t.state.selection.anchor,i=t.chain().focus();r&&i.deleteRange({from:n,to:n+2}),i.insertContentAt(n,'<a href="'.concat(e,'">').concat(e,"</a>")).run()},getCursorPosition:function(){return t.state.selection.anchor},textUpToAnchor:function(){return t.state.doc.textBetween(0,t.state.selection.anchor," ")}};else if(null==r?void 0:r.current){var o=r.current;n.current={getText:function(){return o.value},insertText:function(e){var t,r,n=null!=(t=o.selectionStart)?t:0,i=null!=(r=o.selectionEnd)?r:0,a=o.value.substring(0,n),l=o.value.substring(i);o.value=a+e+l,o.setSelectionRange(n+e.length,n+e.length),o.focus()},insertLink:function(){},getCursorPosition:function(){var e,t;return(null!=(t=null==r||null==(e=r.current)?void 0:e.selectionStart)?t:0)+1},textUpToAnchor:function(){var e,t;return o.value.substring(0,(null!=(t=null==r||null==(e=r.current)?void 0:e.selectionStart)?t:0)+1)}}}return n.current},p=r(75148),m=(0,c.t)("dynamic_vars_groups.member"),b=[{group:m,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:m,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:m,label:"{{member.name}}",value:"{{member.name}}"},{group:m,label:"{{member.email}}",value:"{{member.email}}"},{group:m,label:"{{member.public_uid}}",value:"{{member.public_uid}}"}],h=["{{community.url}}","{{trigger.event.url}}","{{trigger.event.space.url}}","{{trigger.event.space.space_group.url}}","{{trigger.comment.url}}","{{trigger.comment.post.url}}","{{trigger.comment.post.space.url}}","{{trigger.comment.post.space.space_group.url}}","{{trigger.post.url}}","{{trigger.post.space.url}}","{{trigger.post.space.space_group.url}}"],y=function(e){var t=e.className,r=e.editor,o=e.inputRef,l=e.setInputChangeHandler,m=void 0===l?s():l,y=e.variables,v=e.tooltipPlacement,g=e.wrapperClassName,x=e.optionsClassName,j=e.enableLinkInsertion,O=f({editor:r,inputRef:o}),w=!!r&&!!(void 0!==j&&j),S=function(){if(!O)return"";var e=O.textUpToAnchor();return e.length>=2?e.slice(-2):e},_=function(e){var t="{{"===S(),r=t?e.slice(2):e,n=h.includes(e);w&&n?null==O||O.insertLink(e,t):null==O||O.insertText(r)},N=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=function(){"{{"===S()&&N.current&&N.current.click()};return r?r.on("update",e):m(e),function(){r?r.off("update",e):m(s())}},[O]),(0,n.jsx)("div",{className:void 0===g?"max-w-sm pt-3":g,children:(0,n.jsx)(u.l,{options:void 0===y?b:y,groupBy:function(e){return e.group},onSelect:function(e){return _(e)},buttonRef:N,optionsClassName:x,children:(0,n.jsx)(d.T,{placement:void 0===v?"bottom":v,delay:300,content:(0,c.t)("tiptap.add_variable"),interactive:!1,children:(0,n.jsx)(p.h,{iconSize:20,buttonSize:32,name:"20-variables",className:a()("disabled:cursor-not-allowed disabled:opacity-40",t),ariaLabel:(0,c.t)("tiptap.add_variable")})})})})}},47075:function(e,t,r){r.d(t,{Q:()=>a});var n=r(85893),i=r(94184),o=r.n(i),a=function(e){var t,r,i=e.href,a=e.variant,l=void 0===a?"primary":a,s=e.children,c=e.full,u=e.small,d=e.extraLarge,f=e.large,p=e.className,m=e.forwardedRef,b=e.rel,h=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["href","variant","children","full","small","extraLarge","large","className","forwardedRef","rel"]);return(0,n.jsx)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},h),r=r={href:i,rel:void 0===b?"noopener noreferrer":b,ref:m,className:o()("focus-visible:!outline-secondary inline-block rounded-md font-bold leading-5 transition-colors duration-150 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"px-8 py-3 leading-normal":d,"px-6 py-2 leading-normal":f,"px-[18px] py-[6px] text-sm":!f&&!u&&!d,"px-2 py-1 text-xs":u,"w-full":c,"bg-brand !text-brand-button hover:opacity-90":"primary"===l,"border-secondary bg-primary !text-darkest hover:bg-tertiary border !font-medium":"secondary"===l,"border-hover bg-primary !text-darkest hover:bg-primary border":"secondary-light"===l,"!text-link bg-transparent":"plain"===l,"border-v2-danger bg-v2-danger border !text-white hover:opacity-90":"danger"===l,"border-v2-danger bg-primary !text-v2-danger border !font-medium hover:opacity-90":"danger-outline"===l,"border-circle-button bg-circle-button !text-circle-button hover:border-circle-button-hover hover:bg-circle-button-hover border":"circle"===l,"!text-default hover:!text-darkest bg-transparent !p-0 font-medium transition-colors":"text"===l,"!text-darkest hover:bg-tertiary !font-semibold":"circle-plain"===l,"!text-circle !p-0 !font-semibold":"circle-text"===l},p),children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},23386:function(e,t,r){r.d(t,{m:()=>v});var n=r(85893),i=r(84326),o=r(56918),a=r(1168),l=r(35565),s=r(24330),c=r(94184),u=r.n(c),d=r(27950),f=r(85924),p=r(80219);function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var b=function(e){var t=e.memberTag,r=e.className,i=(0,f.TC)().currentAppearance,o=t||{},a=o.name,l=o.emoji,c=o.color,b=o.display_format,h=o.custom_emoji_url,y=o.custom_emoji_dark_url,v=o.is_public,g=o.is_background_enabled;if(!v)return null;var x={};return g&&(x.borderColor=c,x.backgroundColor=c,x.color=c&&(0,d.Vi)(c).isDark()?"#ffffff":"#000000"),(0,n.jsx)(s.g,m({className:u()(r,{"cursor-pointer":"icon"===b,"font-medium":!0,"px-2":!0})},(l||h||y)&&{emoji:(0,n.jsx)(p.S,{emoji:l,className:"!h-3",appearance:i,customEmojiUrl:h,customEmojiDarkUrl:y})},"icon"===b?{tooltipText:a}:{label:a},c&&{styles:m({},x)}))},h=r(80171),y=function(e){var t=e.memberTags,r=e.labelVariant,o=(0,f.TC)().currentAppearance,a=(0,n.jsx)("ul",{className:"flex !list-none flex-col gap-1 py-1",children:t.map(function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(b,{memberTag:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),className:"border-secondary"})},e.id)})}),l="words"===(void 0===r?"words":r)?(0,i.t)("member_tags.show_more",{count:t.length}):"+".concat(t.length);return(0,n.jsx)("div",{children:(0,n.jsx)(h.T,{content:a,className:"flex",theme:o,children:(0,n.jsx)(s.g,{label:l})})})},v=function(e){var t=e.isAdmin,r=void 0!==t&&t,c=e.limit,u=void 0===c?3:c,d=e.memberTags,f=e.showMoreTag,p=e.memberId,m=e.shouldShowActivityScore,h=void 0!==m&&m,v=e.showMoreLabelVariant,g=e.className,x=(void 0===d?[]:d).filter(function(e){return e.is_public});if(!x.length&&!r&&!h)return null;var j=x.slice(0,u),O=x.slice(u,x.length);return(0,n.jsxs)("div",{className:(0,a.A)("flex flex-wrap gap-2",g),children:[h&&p&&(0,n.jsx)(l.XR,{ids:[p],children:(0,n.jsx)(o.z,{memberId:p,shouldHideIfNoScore:!0})}),r&&(0,n.jsx)(s.g,{className:"!bg-brand !text-brand-button !border-none",label:(0,i.t)("admin"),dataTestId:"admin-badge"}),j.map(function(e){return(0,n.jsx)(b,{memberTag:e},e.id)}),(void 0===f||f)&&O.length>0&&(0,n.jsx)(y,{memberTags:O,labelVariant:v})]})}},26950:function(e,t,r){r.d(t,{u:()=>b});var n=r(85893),i=r(67294),o=r(50312),a=r(75457),l=r(76571),s=r(94184),c=r.n(s),u=r(84326),d=function(e){var t=e.id,r=e.children,s=e.show,d=e.onClose,f=e.title,p=e.className,m=e.hideCloseButton,b=e.overflowVisible,h=e.containerClassName;return(0,n.jsx)(o.u.Root,{show:s,as:i.Fragment,children:(0,n.jsx)(a.V,{as:"div",static:!0,className:"react-modal react-modal--default ".concat(void 0===h?"default":h),open:s,onClose:d,children:(0,n.jsxs)("div",{className:"react-modal__wrapper",children:[(0,n.jsx)(o.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,n.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)(o.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsxs)("div",{id:t,className:c()("react-modal__container",{"overflow-hidden":!(void 0!==b&&b)},void 0===p?"px-6 py-6":p),children:[(0,n.jsx)("div",{className:"react-modal__close-button-container",children:!m&&(0,n.jsxs)("button",{type:"button",className:"react-modal__close-button",onClick:d,children:[(0,n.jsx)("span",{className:"sr-only",children:(0,u.t)("close")}),(0,n.jsx)(l.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(a.V.Title,{as:"h3",className:"text-darkest text-lg font-medium leading-6",children:f}),(0,n.jsx)("div",{className:"h-full",children:r})]})]})})]})})})},f=r(57363),p=function(e){var t,r,l=e.show,s=e.onClose,c=e.className,u=e.title,d=e.passThroughProps,p=e.hideCloseButton,m=e.hideTitle,b=e.children,h=(0,i.useRef)(null),y=(0,i.useRef)(null);return(0,n.jsx)(o.u.Root,{show:l,as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",static:!0,className:"fullscreen-modal ".concat(c),initialFocus:p?y:h,open:l,onClose:s},d),r=r={children:(0,n.jsxs)("div",{className:"fullscreen-modal__body-outer",children:[(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"}),(0,n.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)("div",{className:"fullscreen-modal__body-wrap",children:(0,n.jsxs)("div",{className:"fullscreen-modal__body",ref:y,children:[!p&&(0,n.jsx)("button",{type:"submit",className:"fullscreen-modal__close-icon",onClick:s,ref:h,children:(0,n.jsx)(f.JO,{type:"close"})}),!m&&(0,n.jsx)("h2",{className:"fullscreen-modal__title",children:u}),b]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},m=function(e){var t,r,l=e.show,s=e.title,c=e.onClose,u=e.hideCloseButton,d=e.className,p=e.passThroughProps,m=e.children,b=(0,i.useRef)(null);return(0,n.jsx)(o.u.Root,{show:l,as:i.Fragment,children:(0,n.jsx)(a.V,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",static:!0,className:"fullpage-modal fixed inset-0 z-10 overflow-y-auto ".concat(d),initialFocus:b,open:l,onClose:c},p),r=r={children:(0,n.jsxs)("div",{className:"fullpage-modal__body-outer h-full w-full",children:[(0,n.jsx)(o.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,n.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)(o.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsx)("div",{className:"z-1 fullpage-modal__body-wrap relative m-0 h-full w-full",children:(0,n.jsxs)("div",{className:"bg-primary fullpage-modal__body h-full rounded-none md:rounded-lg","data-testid":"modal",children:[(0,n.jsx)("h2",{className:"fullpage-modal__title sticky",children:s}),!u&&(0,n.jsx)("button",{type:"submit",className:"fullpage-modal__close-icon z-10",onClick:c,ref:b,children:(0,n.jsx)(f.JO,{type:"close",useWithFillCurrentColor:!0})}),m]})})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},b=function(e){var t,r=e.variant,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["variant"]);switch(r){case"fullscreen":t=p;break;case"large":t=m;break;default:t=d}return(0,n.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i))}},10989:function(e,t,r){r.d(t,{q:()=>l});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=(0,i.forwardRef)(function(e,t){var r=e.children,i=e.iconEl,o=e.actionButtonEl,l=e.className;return(0,n.jsxs)("div",{ref:t,className:a()("flex gap-3 rounded-lg px-4 py-3",l),children:[i,(0,n.jsx)("div",{className:"flex-1",children:r}),o]})})},92768:function(e,t,r){r.d(t,{a:()=>c});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(41553),s=r(10989),c=(0,i.forwardRef)(function(e,t){var r,i,o=e.children,c=e.className,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)(s.q,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:a()("bg-v2-warning/5 border-v2-warning border",c),ref:t},u),i=i={children:(0,n.jsx)(l.Z.LabelSm,{color:"text-stroke-foreground",as:"span",children:o})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))})},29576:function(e,t,r){r.d(t,{R:()=>l});var n=r(85893),i=r(13411),o=r(94184),a=r.n(o),l=function(e){var t=e.children,r=e.value,o=e.className,l=void 0===o?"":o;return(0,n.jsx)(i.E.Option,{value:r,className:function(e){var t=e.checked;return a()("bg-primary hover:border-secondary relative flex cursor-pointer rounded-lg border p-6 shadow-sm transition-colors focus:outline-none",{"border-secondary":t,"border-primary":!t},l)},children:function(e){var r=e.checked;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"flex flex-1",children:(0,n.jsx)("span",{className:"flex flex-col",children:t})}),(0,n.jsx)("span",{className:a()("mt-1.5 flex h-4 w-4 shrink-0 items-center justify-center rounded-full border border-transparent",{"bg-toggle-active":r,"bg-primary":!r}),"aria-hidden":"true",children:(0,n.jsx)("span",{className:"bg-primary h-1.5 w-1.5 rounded-full"})})]})}})}},19347:function(e,t,r){r.d(t,{Mz:()=>x,Q_:()=>O,l3:()=>j,S0:()=>w});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(96486),s=r(1364),c=r(17617),u=r(72727),d=r(90926),f=r(64743),p=r(504),m=r(31841),b=r(76896),h=r(59413),y=function(e){var t=e.startResizing,r=e.isMessagingModalOpen,i=e.isTrialBannerExists,o=(0,p.f)();return(0,n.jsx)("div",{className:a()("border-primary hover:bg-circle invisible z-[21] shrink-0 grow-0 basis-0.5 cursor-col-resize resize-x justify-self-end hover:w-0.5 md:visible",{"h-[calc(100vh-40px)]":r,"h-[calc(100vh-64px)]":!r&&!i,"h-[calc(100vh-64px-48px)]":!r&&!i&&o,"h-[calc(100vh-112px)]":!r&&i,"h-[calc(100vh-144px-48px)]":!r&&i&&o}),onMouseDown:t})};function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=64,j=48,O=64,w=function(e){var t,r=e.isBelowHeader,o=e.noBorderLeft,h=e.isLoading,v=e.loaderVariant,x=e.children,j=e.className,O=e.shouldHideRailbarDragger,w=void 0!==O&&O,S=e.isFullWidth,_=void 0!==S&&S,N=(0,s.k)().isTrialBannerExists,P=(0,c.BT)(),k=(0,f.U)().isMessagingModalOpen,D=(0,d.xX)(),E=D.isLiveStream,A=D.isCourseSpace,T=D.isDrawer,C=(0,p.f)(),I=(0,u.L)().isElectron,M=(0,i.useRef)(null),L=g((0,i.useState)(!1),2),R=L[0],F=L[1],$=(0,m._)("circle-railbar-width"),U=$.setValue,X=$.getValue,B=g((0,i.useState)(X()||360),2),z=B[0],q=B[1],Z=(0,i.useCallback)(function(){F(!0)},[]),H=(0,i.useCallback)(function(){F(!1)},[]),V=(0,i.useCallback)(function(e){if(R){var t,r=(null==(t=M.current)?void 0:t.getBoundingClientRect().right)||0,n=Math.abs(e.clientX-r);n>332&&n<720&&(q(n),U(n))}},[R]);(0,i.useEffect)(function(){return window.addEventListener("mousemove",V),window.addEventListener("mouseup",H),function(){window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",H)}},[V,H]);var W=w||E||A;if(h)return(0,n.jsx)(b.gi,{variant:void 0===v?"rail-bar":v});var J=w?360:z;return(0,n.jsxs)("div",{className:a()("flex h-full flex-row",void 0===j?"":j),style:{width:J},children:[!W&&(0,n.jsx)(y,{startResizing:Z,isMessagingModalOpen:k,isTrialBannerExists:N}),(0,n.jsx)("div",{ref:M,id:"rail-content",className:a()("bg-primary border-primary fixed right-[inherit] top-0 z-20 h-full border-l opacity-100 md:top-16",{"lg:!top-0":k||E||T||(t=document.getElementById("lesson-hello-bar"),A&&(0,l.isEmpty)(t)),"lg:top-28":N&&!A||C,"lg:top-40":N&&!A&&C,"lg:top-20":void 0!==r&&r,"border-l-0":void 0!==o&&o,"z-50 !h-full !w-full":P,"absolute !h-[calc(100vh-32px)] rounded-lg":E,"!w-96":E&&!_,"!w-full":T||_,"!top-[6.325rem]":I}),style:{width:J},children:x})]})};w.Header=function(e){var t=e.hasNoBorder,r=e.children,i=e.className,o=(0,f.U)().isMessagingModalOpen,l=(0,h.x)(),s=l.isChatSpace,c=l.isCourseSpace,u="min-h-[64px]";return t?u="min-h-[48px]":o?u="min-h-[56px]":(s||c)&&(u="min-h-[72px]"),(0,n.jsx)("div",{className:a()("text-darkest flex items-center px-6 font-medium",u,{"border-primary border-b py-3":!t},i),children:r})},w.Content=function(e){var t=e.children,r=e.heightGap,o=e.noPadding,l=e.isBelowHeader,u=void 0!==l&&l,d=e.isCourseSpace,p=void 0!==d&&d,m=e.className,b=e.id,h=(0,s.k)().isTrialBannerExists,y=(0,f.U)().isMessagingModalOpen,v=(0,c.j)(),g=(0,i.useMemo)(function(){var e=x;return r?e=r:u&&(e=x+j),y?e+=40:(h&&!p&&(e+=48),v&&(e+=48)),e},[r,u,h,y,v,p]);return(0,n.jsx)("div",{id:void 0===b?"":b,className:a()("scrollbar-hide overflow-auto",{"px-6 py-4":!(void 0!==o&&o)},void 0===m?"":m),style:{height:"calc(100dvh - ".concat(g,"px)")},children:t})}},5116:function(e,t,r){r.d(t,{O:()=>c});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(52293),s=r(92640),c=(0,i.forwardRef)(function(e,t){var r=e.name,i=e.className,o=e.textboxClassName,c=void 0===o?"":o,u=(0,l.Gc)().control;return(0,n.jsx)("div",{className:a()("react-rich-text-input",void 0===i?"":i),children:(0,n.jsx)(l.Qr,{control:u,name:r,render:function(r){var i,o,a=r.field,l=a.onChange,u=a.value;return(0,n.jsx)(s.y,(i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),o=o={className:c,onChange:function(e){return l(e.target.innerHTML)},value:u,ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}),i))}})})});c.displayName="RichTextInputControlledInput"},72851:function(e,t,r){r.d(t,{X:()=>b});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(96486),s=r(52028),c=r(84326),u=r(82859),d={1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6",7:"line-clamp-7",8:"line-clamp-8"},f={1:"overflow-hidden max-h-6 h-6",2:"overflow-hidden max-h-12 h-12",3:"overflow-hidden max-h-18 h-18",4:"overflow-hidden max-h-24 h-24",5:"overflow-hidden max-h-30 h-30",6:"overflow-hidden max-h-36 h-36",7:"overflow-hidden max-h-42 h-42",8:"overflow-hidden max-h-48 h-48"};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e){var t,r,o=e.children,p=e.disabled,b=void 0!==p&&p,h=e.hideToggle,y=e.lines,v=void 0===y?2:y,g=e.onToggle,x=e.seeMoreClassName,j=(0,i.useRef)(null),O=(0,i.useRef)(null),w=m((0,i.useState)(!1),2),S=w[0],_=w[1],N=m((0,i.useState)(!b),2),P=N[0],k=N[1],D=m((0,i.useState)(!1),2),E=D[0],A=D[1],T=(0,u.G6)()||(0,u.qx)()?f[v]:d[v];(0,i.useEffect)(function(){!b&&P&&g&&g(S)},[b,S,P,g]),(0,i.useEffect)(function(){if(!S&&j.current&&P&&E){var e=j.current,t=setTimeout(function(){(0,s.Z)(e,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"})},100);return function(){return clearTimeout(t)}}},[j,E,S,P]),(0,i.useLayoutEffect)(function(){var e=(0,l.defer)(function(){if(O.current&&!b){var e=O.current;requestAnimationFrame(function(){k(e.scrollHeight>e.offsetHeight)})}});return function(){return clearTimeout(e)}},[b,O]);var C=!P||b||void 0!==h&&h,I=S||b||!P;return(0,n.jsxs)("div",{className:"flex flex-col","data-testid":"see-more-less",children:[(0,n.jsx)("div",{ref:O,className:a()((t={"line-clamp-none h-auto":I},r=!I,T in t?Object.defineProperty(t,T,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[T]=r,t)),"data-testid":"see-more-less-content",children:o}),(0,n.jsx)("button",{type:"button",ref:j,"data-testid":"show-expand",onClick:function(){b||(A(!0),_(function(e){return!e}))},className:a()("text-light hover:text-dark focus-visible:text-dark inline-flex text-base",{hidden:C},x),children:S?(0,c.t)("show_less"):(0,c.t)("show_more")})]})}},24304:function(e,t,r){r.d(t,{S:()=>u});var n=r(85893),i=r(13411),o=r(80171),a=r(1168),l=r(41553);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={sm:"px-2 py-1.5",md:"px-3 py-2"},u=function(e){var t,r=e.value,u=e.onChange,d=e.options,f=e.size,p=e.className,m=e.checkedClassName,b=void 0===m?"bg-tertiary":m,h=e.optionClassName,y=void 0===h?"":h,v=null!=(t=c[void 0===f?"md":f])?t:c.md;return(0,n.jsx)(i.E,{value:r,onChange:u,children:(0,n.jsx)("div",{className:(0,a.A)("flex items-center gap-6",void 0===p?"":p),children:d.map(function(e){var t=e.label,r=e.value,c=e.tooltipText;return(0,n.jsx)(i.E.Option,{value:r,className:function(e){var t=e.checked;return(0,a.A)("hover:bg-tertiary","focus:bg-tertiary focus:ring-primary focus:ring-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2","flex cursor-pointer select-none rounded-lg leading-none transition-colors",v,s({},b,t),y)},children:function(e){var r,u,d=e.checked,f="string"==typeof t?(0,n.jsx)(l.Z.LabelSm,{weight:d?"medium":"normal",children:t}):t;return(0,n.jsx)(i.E.Label,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}({as:"span",className:(0,a.A)("flex whitespace-nowrap",{"text-light":!d,"text-dark":d})},d&&{"aria-checked":d}),u=u={children:c?(0,n.jsx)(o.T,{content:c,arrow:!1,delay:100,duration:100,children:f}):f},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(u)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(u,e))}),r))}},r)})})})}},4568:function(e,t,r){r.d(t,{X:()=>l});var n=r(85893),i=r(94184),o=r.n(i),a=r(4870),l=function(e){var t=e.className,r=e.isDark,i=void 0!==r&&r,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","isDark"]),s=o()("skeleton-loader__row",void 0===t?"":t),c=(0,a.m)(s,l).modifiers;return(0,n.jsx)("div",{className:o()(s,c,{"!bg-tertiary":!i,"!bg-overlay-dark":i})})}},64470:function(e,t,r){r.d(t,{RN:()=>u,qE:()=>l,X2:()=>c.X,mw:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a=r(4870),l=function(e){var t="skeleton-loader__avatar",r=(0,a.m)(t,e).modifiers,i=e.isFullRounded;return(0,n.jsx)("div",{className:o()(t,r),children:(0,n.jsx)("div",{className:o()("skeleton-loader__avatar-content !bg-tertiary",void 0===i||i?"!rounded-full":"!rounded-md")})})},s=function(e){var t=e.children,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]),i="skeleton-loader__avatar-container",l=(0,a.m)(i,r).modifiers;return(0,n.jsx)("div",{className:o()(i,l),children:t})},c=r(4568),u=function(e){var t=e.children,r=e.className,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]),l="skeleton-loader__row-container",s=(0,a.m)(l,i).modifiers;return(0,n.jsx)("div",{className:o()(l,s,void 0===r?"":r),children:t})}},76896:function(e,t,r){r.d(t,{gi:()=>R,RN:()=>o.RN,qE:()=>o.qE,X2:()=>o.X2,mw:()=>o.mw});var n=r(85893),i=r(4568),o=r(64470),a=r(84326),l=r(41553),s=function(){return(0,n.jsx)(l.Z.LabelXs,{weight:"medium",children:(0,a.t)("separator_dot")})},c=function(e){var t=e.index,r=e.highlight;return(0,n.jsxs)(n.Fragment,{children:[t>0&&(0,n.jsx)(s,{}),(0,n.jsx)(o.X2,{sm:!0,short:!0},r)]})},u=function(e){var t=e.badge,r=e.highlights,i=e.children;return(0,n.jsxs)("div",{className:"skeleton-loader skeleton-loader--access-registry-card bg-primary border-primary flex flex-col gap-y-2 rounded-lg border p-6",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,n.jsx)(o.X2,{lg:!0,extraLong:!0}),t&&(0,n.jsx)(o.X2,{lg:!0,badge:!0})]}),(0,n.jsx)("div",{className:"flex flex-row items-center gap-x-2",children:r&&r.map(function(e,t){return(0,n.jsx)(c,{index:t,highlight:e},e)})}),i&&(0,n.jsx)("div",{className:"border-primary mt-4 flex flex-col border-t pt-4",children:i})]})},d=r(94184),f=r.n(d),p=r(76068),m=function(e){var t=e.header,r=e.items;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.i.Tr,{children:(0,n.jsx)(p.i.Td,{hideBorders:!0,colSpan:3,className:"truncate px-0 py-2 align-middle",children:(0,n.jsx)(o.X2,{lg:!0,half:!0})})},t),r.map(function(e){return(0,n.jsxs)(p.i.Tr,{children:[(0,n.jsx)(p.i.Td,{hideBorders:!0,className:"w-[300px] truncate px-0 py-2 align-middle",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,n.jsx)(o.X2,{md:!0,short:!0}),(0,n.jsx)(o.X2,{md:!0,extraLong:!0})]})}),(0,n.jsx)(p.i.Td,{hideBorders:!0,className:"w-[150px] truncate px-0 py-2 align-middle",children:(0,n.jsx)(o.X2,{md:!0,long:!0})}),(0,n.jsx)(p.i.Td,{hideBorders:!0,className:"flex w-[200px] truncate px-0 py-2 align-middle",children:(0,n.jsx)(o.X2,{md:!0,long:!0})})]},e)})]})};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(){return(0,n.jsx)(p.i,{className:"skeleton-loader skeleton-loader--admin-member-edit-modal-access-community-member-access-content-table w-min",children:(0,n.jsx)(p.i.TableBody,{children:[["1",["2","3","4"]],["5",["6","7"]],["8",["9","10","11"]]].map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],i=t[1];return(0,n.jsx)(m,{header:r,items:i},r)})})})},y=function(){return(0,n.jsx)(u,{badge:!0,highlights:["1","2","3"],children:(0,n.jsx)(h,{})})},v=r(67805),g=r(96486),x=function(e){var t=e.withContainer,r=e.children;return t?(0,n.jsx)("div",{className:"skeleton-loader--card-view__container",children:r}):(0,n.jsx)(n.Fragment,{children:r})},j=function(e){return(0,n.jsx)("div",{className:"py-1.5",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,full:!0})]})]})},e)},O=r(67294),w=r(99410),S=r(3158),_=r(93296),N=function(){return(0,n.jsxs)(o.mw,{children:[(0,n.jsx)("div",{className:"!border-tertiary z-[2] !rounded-md !border-r-2",children:(0,n.jsx)(o.qE,{sm:!0})}),(0,n.jsx)("div",{className:"!border-tertiary z-[1] !ml-[-5px] !rounded-md !border-r-2",children:(0,n.jsx)(o.qE,{sm:!0})}),(0,n.jsx)("div",{className:"!ml-[-5px]",children:(0,n.jsx)(o.qE,{sm:!0})})]})},P=function(e){var t=e.count;return(0,n.jsx)("div",{className:"border-primary bg-primary w-full rounded-2xl border p-2",children:(0,g.times)(void 0===t?5:t,function(e){return(0,n.jsx)("div",{className:"flex p-4",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0,half:!0}),(0,n.jsx)(o.X2,{sm:!0})]}),(0,n.jsxs)("div",{className:"mr-4 flex items-center space-x-8",children:[(0,n.jsx)(N,{}),(0,n.jsx)(o.X2,{lg:!0,className:"!h-6"})]})]})})]})},e)})})},k=function(){return(0,n.jsxs)("div",{className:"skeleton-loader__member-card !rounded-2xl",children:[(0,n.jsx)(o.mw,{children:(0,n.jsx)(o.qE,{lg:!0})}),(0,n.jsxs)(o.RN,{children:[(0,n.jsx)(o.X2,{lg:!0}),(0,n.jsx)(o.X2,{half:!0})]}),(0,n.jsx)(o.X2,{x2l:!0,full:!0})]})},D=r(1364),E=r(64743),A=function(e){return(0,n.jsx)("div",{className:"p-5",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,full:!0})]})]})},e)},T=function(e){return(0,n.jsx)("div",{className:"p-5",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{lg:!0}),(0,n.jsx)(o.X2,{lg:!0,full:!0})]})]})},e)},C=r(51169),I=function(e){return(0,n.jsx)("div",{className:"skeleton-loader--right-sidebar__item",children:(0,n.jsxs)(o.mw,{children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{children:[(0,n.jsx)(o.X2,{}),(0,n.jsx)(o.X2,{xs:!0,half:!0})]})]})},e)},M=r(47661),L={"app-bar":function(e){var t=e.showMemberAvatarsRow;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"hidden h-16 items-center px-4 md:flex",children:[(0,n.jsx)("div",{style:{flex:"0 0 308px"},children:(0,n.jsx)(o.RN,{inline:!0,full:!0,children:(0,n.jsx)(o.X2,{xxl:!0})})}),(0,n.jsxs)(o.RN,{inline:!0,full:!0,children:[(0,n.jsx)(o.X2,{squareLarge:!0}),(0,n.jsx)(o.X2,{lg:!0,half:!0})]}),(0,n.jsx)("div",{className:"skeleton-loader--main-header-desktop__actions",children:(0,n.jsxs)(o.RN,{inline:!0,full:!0,children:[(0,n.jsxs)("div",{className:"mr-4 flex space-x-4",children:[(0,n.jsx)(o.X2,{square:!0}),(0,n.jsx)(o.X2,{square:!0}),(0,n.jsx)(o.X2,{square:!0}),void 0!==t&&t&&(0,n.jsx)(N,{})]}),(0,n.jsx)(o.X2,{x2l:!0,long:!0})]})})]}),(0,n.jsxs)("div",{className:"skeleton-loader skeleton-loader--main-header-mobile",children:[(0,n.jsx)(o.RN,{children:(0,n.jsx)(o.X2,{square:!0})}),(0,n.jsx)("div",{className:"skeleton-loader--main-header-mobile__logo",children:(0,n.jsx)(o.RN,{inline:!0,full:!0,children:(0,n.jsx)(o.X2,{xxl:!0})})}),(0,n.jsx)(o.mw,{children:(0,n.jsx)(o.qE,{sm:!0})})]})]})},"right-sidebar":function(e){var t=e.count;return(0,n.jsxs)("div",{className:"sidebar__members",children:[(0,n.jsx)("div",{className:"sidebar__block sidebar__right block",children:(0,n.jsx)("div",{className:"skeleton-loader skeleton-loader--right-sidebar",children:(0,g.times)(3,I)})}),(0,n.jsx)("div",{className:"sidebar__block sidebar__right block",children:(0,n.jsx)("div",{className:"skeleton-loader skeleton-loader--right-sidebar",children:(0,g.times)(void 0===t?1:t,I)})})]})},"feed-view":function(e){var t=e.count;return(0,n.jsx)(n.Fragment,{children:(0,g.times)(void 0===t?1:t,function(e){return(0,n.jsxs)("div",{className:"skeleton-loader skeleton-loader--feed-view !bg-primary !border-primary !rounded-2xl",children:[(0,n.jsxs)(o.mw,{lg:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{children:[(0,n.jsx)(o.X2,{}),(0,n.jsx)(o.X2,{extraLong:!0,sm:!0})]})]}),(0,n.jsx)("div",{className:"skeleton-loader--feed-view__body",children:(0,n.jsxs)(o.RN,{md:!0,children:[(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,almostFull:!0})]})}),(0,n.jsxs)(o.RN,{inline:!0,children:[(0,n.jsx)(o.X2,{lg:!0,short:!0}),(0,n.jsx)(o.X2,{lg:!0,short:!0})]})]},e)})})},"card-view":function(e){var t=e.count,r=e.withContainer;return(0,n.jsx)(x,{withContainer:void 0===r||r,children:(0,g.times)(void 0===t?1:t,function(e){return(0,n.jsxs)("div",{className:"skeleton-loader skeleton-loader--card-view !bg-primary !border-primary !rounded-2xl",children:[(0,n.jsx)("div",{className:"skeleton-loader--card-view__cover !bg-secondary"}),(0,n.jsxs)("div",{className:"skeleton-loader--card-view__content",children:[(0,n.jsx)("div",{className:"skeleton-loader--card-view__body",children:(0,n.jsxs)(o.RN,{lg:!0,children:[(0,n.jsx)(o.X2,{md:!0,almostFull:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})}),(0,n.jsx)("div",{className:"skeleton-loader--card-view__footer",children:(0,n.jsxs)(o.RN,{lg:!0,inline:!0,children:[(0,n.jsx)(o.X2,{badge:!0}),(0,n.jsx)(o.X2,{badge:!0})]})})]})]},e)})})},"grid-view":function(e){var t=e.count,r=e.columnsCount,i=void 0===r?3:r,o=Array.from({length:void 0===t?1:t},function(e,t){return{id:t+1}}),a=Array.from({length:i},function(){return[]});return o.forEach(function(e,t){return a[t%i].push(e)}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3",children:a.map(function(e){return(0,n.jsx)("div",{className:"flex flex-col gap-6",children:e.map(function(e){return(0,n.jsx)("div",{className:f()("bg-secondary aspect-square",{"mt-4 rounded-md":i<3})},e.id)})},e.map(function(e){return e.id}).join())})})},"list-view":function(e){var t=e.count;return(0,n.jsx)("div",{className:"skeleton-loader skeleton-loader--list-view !border-primary !bg-primary !divide-y !rounded-2xl border",children:(0,g.times)(void 0===t?1:t,function(){return(0,n.jsx)("div",{className:"skeleton-loader--list-view__item !m-0 !border-0 !bg-transparent",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0,half:!0}),(0,n.jsx)(o.X2,{sm:!0})]}),(0,n.jsxs)("div",{className:"mr-4 flex items-center space-x-4",children:[(0,n.jsx)(o.X2,{square:!0,lg:!0}),(0,n.jsx)(o.X2,{square:!0,lg:!0})]})]})})]})},(0,g.uniqueId)())})})},"community-switcher":_.r,"community-sidebar":function(e){var t=e.count;return(0,n.jsxs)("div",{className:"skeleton-loader skeleton-loader--community-sidebar",children:[(0,n.jsx)("div",{className:"skeleton-loader--community-sidebar__header",children:(0,n.jsx)(o.X2,{xl:!0,long:!0})}),(0,g.times)(void 0===t?3:t,function(e){return(0,n.jsx)("div",{className:"skeleton-loader--community-sidebar__item",children:(0,n.jsxs)(o.RN,{xl:!0,children:[(0,n.jsx)(o.X2,{half:!0,lg:!0}),(0,n.jsx)(o.X2,{almostFull:!0}),(0,n.jsx)(o.X2,{almostFull:!0}),(0,n.jsx)(o.X2,{almostFull:!0})]})},e)})]})},"community-sidebar-v2":S.H,"space-header":function(){return(0,n.jsxs)("div",{className:"skeleton-loader skeleton-loader--space-header",children:[(0,n.jsxs)("div",{className:"skeleton-loader--space-header__container",children:[(0,n.jsx)("div",{className:"skeleton-loader--space-header__title",children:(0,n.jsxs)(o.RN,{inline:!0,full:!0,children:[(0,n.jsx)(o.X2,{xxl:!0,short:!0}),(0,n.jsx)(o.X2,{xxl:!0,almostFull:!0})]})}),(0,n.jsx)("div",{className:"skeleton-loader--space-header__actions",children:(0,n.jsxs)(o.RN,{inline:!0,children:[(0,n.jsx)(o.X2,{xl:!0,short:!0}),(0,n.jsx)(o.X2,{xl:!0,short:!0}),(0,n.jsx)(o.X2,{xl:!0,short:!0}),(0,n.jsx)(o.X2,{xxl:!0,long:!0})]})})]}),(0,n.jsxs)("div",{className:"skeleton-loader--space-header__container",children:[(0,n.jsxs)(o.RN,{inline:!0,children:[(0,n.jsx)(o.X2,{xxl:!0,long:!0}),(0,n.jsx)(o.X2,{xxl:!0,long:!0})]}),(0,n.jsx)("div",{className:"skeleton-loader--space-header__actions",children:(0,n.jsx)(o.RN,{inline:!0,children:(0,n.jsx)(o.X2,{xxl:!0,long:!0})})})]})]})},"member-card":k,"space-member-list-page":function(e){var t=e.count;return(0,n.jsx)("div",{className:"space__members-listing",children:(0,g.times)(void 0===t?12:t,function(e){return(0,n.jsx)(k,{},e)})})},"rail-bar":function(){return(0,n.jsx)(C.a,{center:!0})},"rail-member-list":function(){return(0,n.jsx)(n.Fragment,{})},"rail-profile":function(){return(0,n.jsx)(n.Fragment,{})},"messaging-list-page":function(){return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(o.RN,{lg:!0,full:!0,children:(0,n.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from([,,,,].keys()).map(T)})}),(0,n.jsx)(o.RN,{lg:!0,full:!0,children:(0,n.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from([,,,].keys()).map(T)})})]})},"chat-room":function(e){var t=e.hideMessageBox,r=(0,D.k)().isTrialBannerExists,i=(0,E.U)().isMessagingModalOpen;return(0,n.jsxs)("div",{className:f()("bg-primary flex flex-col justify-between py-5",{"lg:h-[calc(100vh-64px)]":!i&&!r,"lg:h-[calc(100vh-112px)]":!i&&r,"lg:h-[calc(100vh-224px)]":i}),children:[(0,n.jsx)(o.RN,{lg:!0,full:!0,children:Array.from([,,,].keys()).map(function(e){return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"px-5 py-3",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})]})}),(0,n.jsx)("div",{className:"px-5 py-3",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,almostFull:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})]})})]},e)})}),!(void 0!==t&&t)&&(0,n.jsx)("div",{className:"bg-primary z-50 w-full p-5",children:(0,n.jsx)("div",{className:"border-primary h-24 w-full rounded-lg border",children:(0,n.jsxs)("div",{className:"flex h-full items-end space-x-3 p-4",children:[(0,n.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"}),(0,n.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"}),(0,n.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"})]})})})]})},"chat-thread":function(){return(0,n.jsxs)("div",{className:"bg-primary flex flex-col justify-between py-5",children:[(0,n.jsxs)(o.RN,{lg:!0,full:!0,children:[(0,n.jsx)("div",{className:"px-5 py-2",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{sm:!0}),(0,n.jsx)(o.X2,{sm:!0,almostFull:!0})]})]})}),(0,n.jsx)("div",{className:"px-5 py-2",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{sm:!0}),(0,n.jsx)(o.X2,{sm:!0,full:!0}),(0,n.jsx)(o.X2,{sm:!0,almostFull:!0})]})]})}),(0,n.jsx)("div",{className:"px-5 py-2",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{sm:!0}),(0,n.jsx)(o.X2,{sm:!0,almostFull:!0})]})]})})]}),(0,n.jsx)("div",{className:"bg-primary z-50 w-full p-5",children:(0,n.jsx)("div",{className:"border-primary h-24 w-full rounded-lg border",children:(0,n.jsx)("div",{className:"flex h-full items-end space-x-3 p-4",children:[,,,].fill(0).map(function(e,t){return(0,n.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"},t)})})})})]})},"chat-threads-list-page":function(){return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})}),(0,n.jsx)(o.RN,{lg:!0,full:!0,children:(0,n.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from([,,,,].keys()).map(A)})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})}),(0,n.jsx)(o.RN,{lg:!0,full:!0,children:(0,n.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from([,,,].keys()).map(A)})})]})},bookmarks:v.x,transcription:M.b,"full-post-view":function(){return(0,n.jsxs)("div",{className:"skeleton-loader !bg-primary !border-primary h-[636px] w-full max-w-2xl !rounded-2xl border",children:[(0,n.jsx)("div",{className:"bg-tertiary h-80 w-full rounded-t-2xl"}),(0,n.jsxs)("div",{className:"grid p-8",children:[(0,n.jsxs)(o.mw,{lg:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{children:[(0,n.jsx)(o.X2,{}),(0,n.jsx)(o.X2,{sm:!0,extraLong:!0})]})]}),(0,n.jsx)("div",{className:"skeleton-loader--feed-view__body",children:(0,n.jsxs)(o.RN,{md:!0,children:[(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,almostFull:!0})]})}),(0,n.jsxs)(o.RN,{inline:!0,children:[(0,n.jsx)(o.X2,{lg:!0,short:!0}),(0,n.jsx)(o.X2,{lg:!0,short:!0}),(0,n.jsx)(o.X2,{lg:!0,short:!0})]})]})]})},"members-avatar-row":N,"members-avatar-row-v3":function(){return(0,n.jsxs)(o.mw,{children:[(0,n.jsx)("div",{className:"!border-tertiary z-[2] !rounded-full !border-r-2",children:(0,n.jsx)(o.qE,{sm:!0,isFullRounded:!0})}),(0,n.jsx)("div",{className:"!border-tertiary z-[1] !ml-[-5px] !rounded-full !border-r-2",children:(0,n.jsx)(o.qE,{sm:!0,isFullRounded:!0})}),(0,n.jsx)("div",{className:"!ml-[-5px]",children:(0,n.jsx)(o.qE,{sm:!0,isFullRounded:!0})})]})},"events-list-view":function(){return(0,n.jsxs)("div",{className:"space-y-12",children:[(0,n.jsx)(P,{count:5}),(0,n.jsx)(P,{count:3})]})},"new-events-list-view":function(e){var t=e.count;return(0,n.jsx)("div",{className:"mx-6 max-w-2xl space-y-9 p-4 pb-12 md:mx-auto",children:(0,g.times)(void 0===t?8:t,function(e){return(0,n.jsxs)("div",{className:"flex h-[90px] w-full items-center space-x-6",children:[(0,n.jsx)("div",{className:"bg-tertiary h-full w-[75px] shrink-0 rounded-md"}),(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsxs)("div",{className:"flex justify-between space-x-8",children:[(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,almostFull:!0})]}),(0,n.jsx)("div",{className:"mr-4",children:(0,n.jsx)(o.X2,{lg:!0,short:!0,className:"!h-6"})})]})})]},e)})})},"new-events-thumbnail-view":function(e){var t=e.count,r=e.disableCoverImage;return(0,n.jsxs)("div",{className:"mx-6 max-w-2xl space-y-9 pb-12 md:mx-auto",children:[!(void 0!==r&&r)&&(0,n.jsxs)("div",{className:"mb-6 flex w-full flex-col items-center space-x-6",children:[(0,n.jsx)("div",{id:"cover-image",className:"bg-tertiary mb-8 h-[244px] w-full shrink-0 rounded-2xl"}),(0,n.jsxs)("div",{className:"skeleton-loader__row-container skeleton-loader__row-container--full !m-0",children:[(0,n.jsxs)("div",{className:"mb-4 flex justify-between space-x-6",children:[(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{xl:!0,half:!0}),(0,n.jsx)(o.X2,{xl:!0,almostFull:!0})]}),(0,n.jsx)("div",{className:"mr-4",children:(0,n.jsx)(o.X2,{lg:!0,short:!0,className:"!h-6"})})]}),(0,n.jsx)("div",{className:"flex justify-between space-x-6",children:(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0,half:!0}),(0,n.jsx)(o.X2,{md:!0,almostFull:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})}),(0,n.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,n.jsx)("div",{className:"bg-tertiary h-8 w-32 rounded-full"}),(0,n.jsx)("div",{className:"bg-tertiary h-8 w-32 rounded-full"}),(0,n.jsx)("div",{className:"bg-tertiary h-8 w-32 rounded-full"})]})]})]}),(0,g.times)(void 0===t?6:t,function(e){return(0,n.jsxs)("div",{className:"flex h-[100px] w-full items-center space-x-6",children:[(0,n.jsx)("div",{className:"bg-tertiary h-[110px] w-[220px] shrink-0 rounded-xl"}),(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsxs)("div",{className:"flex justify-between space-x-6",children:[(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0,full:!0}),(0,n.jsx)(o.X2,{md:!0,almostFull:!0})]}),(0,n.jsx)("div",{className:"mr-4",children:(0,n.jsx)(o.X2,{lg:!0,short:!0,className:"!h-6"})})]})})]},e)})]})},"new-event-detail":function(){return(0,n.jsx)("div",{className:"mx-auto max-w-5xl space-y-9 py-12",children:(0,n.jsxs)("div",{className:"mb-6 flex w-full flex-col items-center space-x-6",children:[(0,n.jsx)("div",{id:"cover-image",className:"bg-tertiary mb-8 h-[244px] w-full shrink-0 rounded-2xl lg:h-[366px]"}),(0,n.jsxs)("div",{className:"!m-0 flex w-full justify-between space-x-6",children:[(0,n.jsxs)("div",{className:"bg-primary w-[720px] rounded-2xl p-6",children:[(0,n.jsxs)("div",{className:"skeleton-loader__row-container skeleton-loader__row-container--full !m-0 pb-6",children:[(0,n.jsxs)("div",{className:"mb-4 space-x-6 space-y-6",children:[(0,n.jsxs)(o.RN,{full:!0,className:"gap-2",children:[(0,n.jsx)(o.X2,{xl:!0,half:!0}),(0,n.jsx)(o.X2,{xl:!0,almostFull:!0})]}),(0,n.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,n.jsx)(o.X2,{squareLarge:!0}),(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"})]})]}),(0,n.jsx)("div",{className:"border-primary flex justify-between space-x-6 border-t pt-6",children:(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsx)(o.X2,{xl:!0,almostFull:!0})})})]}),(0,g.times)(2,function(e){return(0,n.jsx)("div",{className:"border-primary flex w-full items-center space-x-6 border-t py-9 pr-10",children:(0,n.jsxs)(o.RN,{full:!0,className:"gap-2",children:[(0,n.jsx)(o.X2,{lg:!0,short:!0,className:"!h-6"}),(0,n.jsx)(o.X2,{sm:!0,full:!0}),(0,n.jsx)(o.X2,{sm:!0,almostFull:!0}),(0,n.jsx)(o.X2,{sm:!0,full:!0}),(0,n.jsx)(o.X2,{sm:!0,half:!0}),(0,n.jsx)(o.X2,{sm:!0,almostFull:!0}),(0,n.jsx)(o.X2,{sm:!0,full:!0}),(0,n.jsx)(o.X2,{sm:!0,almostFull:!0}),(0,n.jsx)(o.X2,{sm:!0,full:!0}),(0,n.jsx)(o.X2,{sm:!0,half:!0})]})},e)})]}),(0,n.jsxs)("div",{className:"hidden h-full w-[320px] flex-col space-y-6 lg:flex",children:[(0,n.jsxs)("div",{className:"bg-primary h-full rounded-2xl p-6",children:[(0,n.jsxs)("div",{className:"border-primary flex flex-row space-x-6 border-b",children:[(0,n.jsx)("div",{className:"bg-tertiary mb-4 h-[80px] w-[68px] rounded-xl"}),(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"}),(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"})]})]}),(0,n.jsxs)("div",{className:"!mx-0 mb-6 mt-4 flex items-center space-x-6",children:[(0,n.jsx)(o.X2,{squareLarge:!0}),(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"})]}),(0,n.jsx)(o.X2,{x2l:!0,full:!0})]}),(0,n.jsxs)("div",{className:"bg-primary h-full space-y-6 rounded-2xl p-6",children:[(0,n.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,n.jsx)(o.X2,{squareLarge:!0}),(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"})]}),(0,n.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,n.jsx)(o.X2,{squareLarge:!0}),(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"})]}),(0,n.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,n.jsx)(o.X2,{squareLarge:!0}),(0,n.jsx)(o.X2,{md:!0,short:!0,className:"!h-4"})]})]})]})]})]})})},"chat-room-sidebar":function(){return(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(o.RN,{lg:!0,full:!0,children:Array.from([,,,].keys()).map(function(e){return(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"px-6 py-3",children:(0,n.jsxs)(o.mw,{md:!0,full:!0,children:[(0,n.jsx)(o.qE,{}),(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0,half:!0}),(0,n.jsx)(o.X2,{md:!0,full:!0})]})]})})},e)})})})},"chat-threads-list-header":function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.RN,{lg:!0,full:!0,children:(0,n.jsxs)("div",{className:"bg-primary border-primary mb-2 rounded-2xl border p-5",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})}),Array.from([,,,,].keys()).map(j)]})}),(0,n.jsx)(o.RN,{lg:!0,full:!0,children:(0,n.jsxs)("div",{className:"bg-primary border-primary mb-2 rounded-2xl border p-5",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(o.RN,{full:!0,children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)(o.X2,{md:!0,half:!0})]})}),Array.from([,,,].keys()).map(j)]})})]})},"email-preview":function(){return(0,n.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,n.jsx)("div",{className:"bg-tertiary mb-8 h-[175px] w-full rounded-lg"}),(0,n.jsx)("div",{className:"flex w-full items-center",children:(0,n.jsxs)(o.RN,{full:!0,className:"gap-2",children:[(0,n.jsx)(o.X2,{xxl:!0,full:!0}),(0,n.jsx)(o.X2,{xxl:!0,half:!0}),(0,n.jsx)(o.X2,{xxl:!0,almostFull:!0})]})})]})},"event-popover":function(){return(0,n.jsxs)("div",{className:"w-full p-6",children:[(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsx)(o.X2,{lg:!0,short:!0,className:"!h-6"})}),(0,n.jsxs)("div",{className:"mt-6 flex justify-start gap-4",children:[(0,n.jsx)(o.X2,{md:!0,long:!0,className:"!w-32"}),(0,n.jsx)(o.X2,{md:!0,long:!0,className:"!w-32"})]}),(0,n.jsxs)("div",{className:"mt-6 flex justify-between gap-4",children:[(0,n.jsx)(o.X2,{xxl:!0,full:!0}),(0,n.jsx)(o.X2,{xxl:!0,full:!0})]})]})},"event-item":function(e){var t=e.isMobileView;return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(o.RN,{full:!0,children:(0,n.jsx)(o.X2,{lg:!0,short:!0,className:"!h-6"})}),void 0!==t&&t?(0,n.jsxs)("div",{className:"mt-4 flex flex-col justify-start gap-y-3",children:[(0,n.jsx)(o.X2,{md:!0,almostFull:!0}),(0,n.jsx)(o.X2,{md:!0,long:!0,className:"!w-32"})]}):(0,n.jsx)("div",{className:"my-4 flex flex-col justify-start gap-y-3",children:(0,n.jsx)(o.X2,{md:!0,almostFull:!0})})]})},row:i.X,"access-registry-card":u,"community-member-access-control":function(e){var t=e.className;return(0,n.jsxs)("div",{className:f()("skeleton-loader skeleton-loader--admin-member-edit-modal-community-member-access-control flex flex-col gap-y-12 py-12",t),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(i.X,{lg:!0,long:!0}),(0,n.jsx)(i.X,{sm:!0,extraLong:!0})]}),(0,n.jsx)(i.X,{xl:!0,full:!0})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)(i.X,{lg:!0,long:!0}),(0,n.jsx)(y,{}),(0,n.jsx)(u,{highlights:["1"],children:(0,n.jsx)(h,{})})]})]})},"community-member-access-group-card-control":y,"mobile-home-segments":function(){return(0,n.jsxs)("div",{className:"bg-tertiary border-primary flex flex-col gap-10 gap-y-2 rounded-lg border p-6",children:[(0,n.jsx)("div",{className:"border-primary bg-primary h-14"}),(0,n.jsx)("div",{className:"border-primary bg-primary h-14"}),(0,n.jsx)("div",{className:"border-primary bg-primary h-14"}),(0,n.jsx)("div",{className:"border-primary bg-primary h-14"})]})},"plan-selector":function(e){var t=e.cardCount,r=void 0===t?4:t,i=(0,O.useMemo)(function(){return Array.from({length:r},function(){return(0,w.x0)()})},[r]);return(0,n.jsx)("div",{className:"mt-4 flex w-full justify-center",children:(0,n.jsx)("ul",{className:"border-primary flex w-full flex-col overflow-hidden rounded-2xl border bg-white dark:border-zinc-700 dark:bg-zinc-800",children:i.map(function(e){return(0,n.jsx)("div",{className:"border-primary cursor-pointer border-b p-4 last:border-none sm:p-6 dark:border-zinc-700",children:(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex items-start",children:(0,n.jsx)(o.X2,{square:!0,md:!0})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,n.jsx)(o.X2,{xl:!0,long:!0}),(0,n.jsx)(o.X2,{badge:!0,lg:!0})]}),(0,n.jsx)("div",{className:"mt-2 hidden sm:block",children:(0,n.jsx)(o.X2,{almostFull:!0,lg:!0})})]})]})}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1 align-middle",children:[(0,n.jsx)(o.X2,{xl:!0,long:!0}),(0,n.jsx)(o.X2,{lg:!0,short:!0})]}),(0,n.jsx)("div",{className:"mt-2 hidden sm:block",children:(0,n.jsx)(o.X2,{lg:!0,long:!0})})]})]})},e)})})})},"vertical-plan-card":function(e){var t=e.cardCount,r=void 0===t?3:t,i=(0,O.useMemo)(function(){return Array.from({length:r},function(e,t){return t})},[r]);return(0,n.jsx)("div",{className:"mt-5 flex flex-col flex-wrap items-center justify-center gap-5 md:flex-row md:justify-around lg:flex-nowrap lg:justify-between",children:i.map(function(e){return(0,n.jsxs)("div",{className:"border-primary flex h-[600px] w-[310px] flex-col items-start gap-y-4 rounded-2xl border px-6 py-5",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(o.X2,{md:!0}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(o.X2,{xl:!0,half:!0})}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(o.X2,{lg:!0,md:!0})})]}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(o.X2,{full:!0,md:!0})}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(o.X2,{lg:!0,almostFull:!0})}),(0,n.jsxs)("div",{className:"mt-7 flex w-full flex-col gap-y-3",children:[(0,n.jsx)(o.X2,{sm:!0}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0}),(0,n.jsx)(o.X2,{almostFull:!0,sm:!0})]})]})]},e)})})},"storage-distribution":function(){return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 animate-pulse rounded-lg border p-6",children:[(0,n.jsx)(o.RN,{lg:!0,children:(0,n.jsx)(o.X2,{xl:!0})}),(0,n.jsx)(o.RN,{lg:!0,className:"mt-4 overflow-hidden rounded-full",children:(0,n.jsx)(o.X2,{full:!0,xxl:!0})})]})},checklist:function(){var e=(0,O.useMemo)(function(){return Array.from({length:4},function(){return(0,w.x0)()})},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(i.X,{className:"w-1/4"}),(0,n.jsx)(i.X,{className:"w-1/4"})]}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(i.X,{className:"mt-2 h-2 w-1/2",long:!0,almostFull:!0})})]}),e.map(function(e){return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"border-primary h-px w-full border-t"}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between p-6",children:[(0,n.jsx)(i.X,{className:"w-1/2 shrink-0",long:!0}),(0,n.jsx)(i.X,{square:!0,sm:!0})]})]},e)})]})}},R=function(e){var t=e.variant,r=e.show,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["variant","show"]),o=L[t];return(void 0===r||r)&&o?(0,n.jsx)(o,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i)):null}},67805:function(e,t,r){r.d(t,{x:()=>o});var n=r(85893),i=r(64470),o=function(){return(0,n.jsx)("div",{className:"h-10 w-full",children:(0,n.jsxs)(i.mw,{lg:!0,full:!0,children:[(0,n.jsx)(i.X2,{lg:!0,extraLong:!0}),(0,n.jsx)(i.X2,{lg:!0,extraLong:!0}),(0,n.jsx)(i.X2,{lg:!0,extraLong:!0}),(0,n.jsx)(i.X2,{lg:!0,extraLong:!0})]})})}},3158:function(e,t,r){r.d(t,{H:()=>l});var n=r(85893),i=r(96486),o=r(64470),a="ml-6",l=function(e){var t=e.count;return(0,n.jsx)("div",{className:"relative grid h-[calc(100vh-65px)] grid-rows-[1fr]",children:(0,n.jsxs)("div",{className:"h-full max-w-[18.5rem] overflow-hidden pb-0 pl-0",children:[(0,n.jsx)("div",{className:"flex h-20 min-h-[5rem] items-center px-6",children:(0,n.jsx)(o.X2,{long:!0})}),(0,n.jsx)("div",{className:"space-y-5",children:(0,i.times)(void 0===t?5:t,function(e){return(0,n.jsx)("div",{className:"items-center px-6",children:(0,n.jsxs)(o.RN,{xl:!0,children:[(0,n.jsx)(o.X2,{half:!0,lg:!0}),(0,n.jsx)(o.X2,{almostFull:!0,className:a}),(0,n.jsx)(o.X2,{almostFull:!0,className:a}),(0,n.jsx)(o.X2,{almostFull:!0,className:"mb-2"})]})},e)})})]})})}},93296:function(e,t,r){r.d(t,{r:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a=r(96486),l=r(64470),s=function(e){var t=e.count;return(0,n.jsx)("div",{"data-testid":"community-switcher-skeleton",className:o()("border-primary bg-primary flex h-screen w-full max-w-[4.5rem] flex-col items-center gap-4 overflow-y-auto border-r p-4"),children:(0,a.times)(void 0===t?5:t,function(){return(0,n.jsx)(l.X2,{squareExtraLarge:!0},(0,a.uniqueId)())})})}},47661:function(e,t,r){r.d(t,{b:()=>o});var n=r(85893),i=r(64470),o=function(){return(0,n.jsxs)("div",{className:"h-10 w-full",children:[(0,n.jsxs)("div",{className:"flex cursor-pointer items-start gap-3 p-1",children:[(0,n.jsx)(i.X2,{lg:!0,short:!0}),(0,n.jsx)(i.X2,{lg:!0,almostFull:!0})]}),(0,n.jsxs)("div",{className:"flex cursor-pointer items-start gap-3 p-1",children:[(0,n.jsx)(i.X2,{lg:!0,short:!0}),(0,n.jsx)(i.X2,{lg:!0,almostFull:!0})]}),(0,n.jsxs)("div",{className:"flex cursor-pointer items-start gap-3 p-1",children:[(0,n.jsx)(i.X2,{lg:!0,short:!0}),(0,n.jsx)(i.X2,{lg:!0,almostFull:!0})]})]})}},45555:function(e,t,r){r.d(t,{i:()=>m});var n=r(85893),i=r(23929),o=r(94184),a=r.n(o),l=r(27175),s=r(67294),c=r(80171);function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var d=(0,s.forwardRef)(function(e,t){var r=e["aria-valuenow"];return(0,n.jsx)(c.T,{content:r,children:(0,n.jsx)("span",u({ref:t},e))})});function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}d.displayName="Thumb";var m=Object.assign({},{Root:function(e){var t=e.className,r=p(e,["className"]);return(0,n.jsx)(i.fC,f({className:a()("relative flex h-1 w-full touch-none select-none items-center rounded-md bg-gray-200",t)},r))},Track:function(e){var t=e.className,r=p(e,["className"]);return(0,n.jsx)(i.fQ,f({className:a()("relative h-1 grow rounded-full",t)},r))},Range:function(e){var t=e.className,r=p(e,["className"]),o=(0,l.r)();return(0,n.jsx)(i.e6,f({className:a()("absolute h-full rounded-full",{"bg-brand":"primary"===o,"bg-circle":"circle"===o},t)},r))},Thumb:function(e){var t,r,o=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className"]);return(0,n.jsx)(i.bU,(t=u({className:a()("before:bg-brand bg-primary shadow-c-slider relative block h-4 w-4 rounded-xl before:absolute before:inset-1/2 before:h-2 before:w-2 before:-translate-x-1/2 before:-translate-y-1/2 before:rounded-xl",o),asChild:!0},l),r=r={children:(0,n.jsx)(d,{})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}})},41782:function(e,t,r){r.d(t,{D:()=>l,d:()=>a});var n=r(85893),i=r(67294),o=(0,i.createContext)({item:{},listeners:{}});o.displayName="ListItemData";var a=function(){return(0,i.useContext)(o)},l=function(e){var t=e.item,r=e.listeners,i=e.children;return(0,n.jsx)(o.Provider,{value:{item:t,listeners:r},children:i})}},37585:function(e,t,r){r.d(t,{d:()=>c,y:()=>u});var n=r(85893),i=r(67294),o=r(45587),a=r(96486);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=(0,i.createContext)({activeItem:{},distance:0,items:[],lockedHorizontalAxis:!1,lockedVerticalAxis:!1,onSort:a.noop,setActiveItem:a.noop,useAnimation:!1,useDragHandle:!1});s.displayName="SortableListData";var c=function(){return(0,i.useContext)(s)},u=function(e){var t,r=e.children,c=e.distance,u=e.items,d=e.lockedHorizontalAxis,f=e.lockedVerticalAxis,p=e.onDragEnd,m=e.onDragOver,b=e.onDragStart,h=e.onSort,y=e.useAnimation,v=e.useDragHandle,g=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=g[0],j=g[1],O=function(e){var t=e.active,r=e.over;if(t.id!==r.id){var n=u.findIndex(function(e){return e.id===t.id}),i=u.findIndex(function(e){return e.id===r.id});h((0,o.Rp)(u,n,i))}};return(0,n.jsx)(s.Provider,{value:{activeItem:x,distance:void 0===c?0:c,items:u,lockedHorizontalAxis:void 0!==d&&d,lockedVerticalAxis:void 0!==f&&f,onDragEnd:function(e){return j(null),(0,a.isFunction)(p)?p(e):O(e)},onDragOver:m,onDragStart:(0,a.isFunction)(b)?b:function(e){j(u.find(function(t){return t.id===e.active.id}))},onSort:h,setActiveItem:j,useAnimation:void 0===y||y,useDragHandle:void 0!==v&&v},children:r})}},64714:function(e,t,r){r.d(t,{dw:()=>o.d,yx:()=>o.y,dI:()=>l.d,LB:()=>f,Fo:()=>a});var n=r(85893),i=r(45587),o=r(37585),a=function(e){var t,r=e.id,a=e.items,l=e.children,s=(0,o.d)(),c=s.items,u=s.lockedVerticalAxis,d=s.lockedHorizontalAxis;return u?t=i.qw:d&&(t=i.PG),(0,n.jsx)(i.Fo,{id:r,items:null!=a?a:c,strategy:t,children:l})},l=r(41782),s=r(95684),c=r(32339);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var t=e.children,r=e.shouldUseKeyboardSensor,a=(0,o.d)(),l=a.lockedVerticalAxis,u=a.lockedHorizontalAxis,f=a.onDragStart,p=a.onDragEnd,m=a.onDragOver,b=a.distance,h=(0,s.VT)(s.we,{activationConstraint:{distance:b}}),y=(0,s.VT)(s.Lg,{coordinateGetter:i.is}),v=[h];r&&v.push(y);var g=s.Dy.apply(void 0,d(v)),x=[c.hg].concat(d(l?[c.DL]:[]),d(u?[c.K7]:[]));return(0,n.jsx)(s.LB,{sensors:g,modifiers:x,collisionDetection:s.pE,onDragStart:f,onDragEnd:p,onDragOver:m,children:t})}},89213:function(e,t,r){r.d(t,{y:()=>u});var n=r(85893),i=r(95684),o=r(32339),a=r(73935),l=r(96561),s=r(37585),c=r(51256),u=function(e){var t,r,u,d=e.children,f=e.portalTo,p=e.shouldRestrictToParent,m=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","portalTo","shouldRestrictToParent"]),b=(0,l.useFrame)(),h=null==b||null==(u=b.document)?void 0:u.documentElement,y=(0,s.d)(),v=y.activeItem,g=y.useAnimation,x=(void 0===f?null:f)||h||window.document.body;return(0,n.jsx)(n.Fragment,{children:(0,a.createPortal)((0,n.jsx)(i.y9,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({adjustScale:!0,dropAnimation:{duration:100*!!g}},void 0!==p&&p&&{modifiers:[o.F4]},m),r=r={children:v?(0,n.jsx)(c.g,{item:v,isDragOverlay:!0,children:d}):null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),x)})}},49705:function(e,t,r){r.d(t,{c:()=>s});var n=r(85893),i=r(45587),o=r(37585),a=r(51256);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=function(e){var t,r,s=e.item,c=e.disabled,u=e.dataTestId,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["item","disabled","dataTestId"]),f=s.id,p=(0,o.d)().useAnimation,m=(0,i.nB)((t=l({id:f},!p&&{transition:{duration:0,easing:"linear"}}),r=r={disabled:void 0!==c&&c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),b=m.attributes,h=m.listeners,y=m.transform,v=m.transition,g=m.isDragging,x=m.setNodeRef;return(0,n.jsx)(a.g,l({ref:x,item:s,attributes:b,listeners:h,transform:y,transition:v,isDragging:g,dataTestId:void 0===u?"":u},d))}},45185:function(e,t,r){r.d(t,{a:()=>l});var n=r(85893),i=r(94184),o=r.n(i),a=r(64714),l=function(e){var t,r,i=e.gap,l=e.className,s=e.children,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["gap","className","children"]);return(0,n.jsx)(a.Fo,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),r=r={children:(0,n.jsx)("ul",{className:o()("grid gap-".concat(void 0===i?2:i),void 0===l?"":l),children:s})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},51256:function(e,t,r){r.d(t,{g:()=>d});var n=r(67294),i=r(85893),o=r(24285),a=r(94184),l=r.n(a),s=r(41782),c=r(37585),u=(0,n.forwardRef)(function(e,t){var r,n,a=e.item,u=e.transform,d=e.transition,f=e.listeners,p=e.attributes,m=e.isDragging,b=e.isDragOverlay,h=e.placeholder,y=e.className,v=e.children,g=e.dataTestId,x=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["item","transform","transition","listeners","attributes","isDragging","isDragOverlay","placeholder","className","children","dataTestId"]),j=(0,c.d)().useDragHandle,O={transform:o.ux.Transform.toString(u),transition:d};return(0,i.jsx)("li",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,style:O,className:l()("w-full min-w-0 list-none",{"cursor-auto":j,"cursor-move":!j},y)},p,x,!j&&f),n=n={"data-testid":void 0===g?"":g,children:(0,i.jsx)(s.D,{item:a,listeners:f,children:!(void 0!==m&&m&&!(void 0!==b&&b))&&v?v:h?(0,i.jsx)(h,{}):(0,i.jsx)("div",{className:"h-10"})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))});u.displayName="ListItem";var d=(0,n.memo)(u);d.displayName="ListItemMemo"},44081:function(e,t,r){r.d(t,{cm:()=>l,dI:()=>i.dI,dw:()=>i.dw,Fo:()=>i.Fo});var n=r(85893),i=r(64714),o=r(89213),a=r(49705),l=Object.assign(function(e){var t,r,o=e.children,a=e.shouldUseKeyboardSensor,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","shouldUseKeyboardSensor"]);return(0,n.jsx)(i.yx,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={children:(0,n.jsx)(i.LB,{shouldUseKeyboardSensor:void 0===a||a,children:o})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{List:r(45185).a,Item:a.c,DragOverlay:o.y})},95342:function(e,t,r){r.d(t,{O:()=>s});var n=r(85893),i=r(94184),o=r.n(i),a={success:"text-v2-success",warning:"text-v2-warning-900",danger:"text-v2-danger",default:"text-dark",info:"text-v2-info"},l={success:"bg-v2-success-100",warning:"bg-v2-warning-100",danger:"bg-v2-danger-100",default:"bg-secondary",info:"bg-blue-100"},s=function(e){var t=e.children,r=e.variant,i=void 0===r?"default":r,s=e.textTransform,c=a[i]||a.default,u=l[i]||l.default;return(0,n.jsx)("span",{className:o()("rounded-md px-2 py-1 text-xs font-semibold",c,u,s),"data-testid":"status-badge",children:t})}},76987:function(e,t,r){r.d(t,{r:()=>u});var n=r(85893),i=r(95665),o=r(94184),a=r.n(o),l=r(50308),s=r.n(l),c=r(57363),u=function(e){var t=e.as,r=e.checked,o=void 0!==r&&r,l=e.onChange,u=void 0===l?s():l,d=e.disabled,f=void 0!==d&&d;return(0,n.jsx)(i.r,{as:void 0===t?"button":t,checked:o,onChange:u,disabled:f,className:a()("disabled:bg-disabled relative mb-0 flex h-4 w-6 items-center rounded-full transition-colors disabled:cursor-not-allowed",{"bg-toggle-checked":o,"bg-toggle-unchecked":!o}),children:(0,n.jsx)("span",{className:a()("text-darkest inline-block h-2.5 w-2.5 rounded-full transition-transform",{"bg-toggle-circle-checked translate-x-2.5":o,"bg-toggle-circle-unchecked translate-x-1":!o}),children:(0,n.jsx)(c.JO,{type:"10-circle-check",size:10,style:{width:"auto",display:"block"},className:a()("text-selector-active transition-opacity",{"opacity-30":o&&f,"opacity-100":o&&!f,"opacity-0":!o}),useWithStrokeCurrentColor:!0})})})}},76068:function(e,t,r){r.d(t,{i:()=>d});var n=r(85893),i=r(94184),o=r.n(i),a=r(41553),l=r(23560),s=r.n(l);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=Object.assign(function(e){var t=e.className,r=e.children;return(0,n.jsx)("table",{className:o()("bg-primary min-w-full border-separate border-spacing-0",t),children:r})},{TableHead:function(e){var t=e.isSticky,r=e.className,i=e.children;return(0,n.jsx)("thead",{className:o()({"bg-primary border-primary sticky top-0 border-t":t},r),children:i})},TableHeaderText:function(e){var t=e.children,r=e.className;return(0,n.jsx)("span",{className:o()("flex",r),children:(0,n.jsx)(a.Z.LabelXxs,{leading:"leading-tight",color:"text-default",children:t})})},TableBody:function(e){var t,r,i=e.className,a=e.children,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","children"]);return(0,n.jsx)("tbody",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:o()("divide-primary divide-y",i)},l),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Th:function(e){var t,r,i=e.className,a=e.children,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","children"]);return(0,n.jsx)("th",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:o()("border-primary whitespace-nowrap border-b px-4 pb-3 pt-5 text-left leading-tight first:pl-0 last:pr-0",i)},l),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Tr:function(e){var t=e.onClick,r=e.className,i=e.children,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","className","children"]),l=s()(t);return(0,n.jsx)("tr",u(c(u(c({},l&&{onClick:t}),{className:o()("group",{"cursor-pointer":l},r)}),a),{children:i}))},Td:function(e){var t,r,i=e.colSpan,a=e.className,l=e.onClick,s=e.children,c=e.hideBorders,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["colSpan","className","onClick","children","hideBorders"]);return(0,n.jsx)("td",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({colSpan:i,className:o()("break-words p-3 align-top first:pl-0 last:pr-0",{"cursor-pointer":!!l,"border-primary border-b py-5":!(void 0!==c&&c)},a),onClick:l},u),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},TableFoot:function(e){var t=e.className,r=e.children;return(0,n.jsx)("tfoot",{className:t,children:r})}})},80909:function(e,t,r){r.d(t,{V:()=>o});var n=r(85893),i=r(86735),o=function(e){var t=e.content_type;return"application/pdf"==t?(0,n.jsx)(i.Q3,{}):(null==t?void 0:t.startsWith("audio"))?(0,n.jsx)(i.Bb,{}):(null==t?void 0:t.startsWith("video"))?(0,n.jsx)(i.nk,{}):(0,n.jsx)(i.$B,{})}},71575:function(e,t,r){r.d(t,{P:()=>l});var n=r(61767);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var a=function(e){try{var t=window.location.host,r=new URL(e).host;return t===r}catch(e){return!1}},l=n.ZP.extend({inclusive:!1,addOptions:function(){var e;return o(i({},null==(e=this.parent)?void 0:e.call(this)),{openInternalLinksInCurrentTab:!1})},addAttributes:function(){var e,t=this;return o(i({},null==(e=this.parent)?void 0:e.call(this)),{target:{default:this.options.HTMLAttributes.target,renderHTML:function(e){return{target:t.options.openInternalLinksInCurrentTab&&a(e.href)?null:e.target}}}})},addPasteRules:function(){var e;return((null==(e=this.parent)?void 0:e.call(this))||[]).map(function(e){return o(i({},e),{find:function(t){var r,n="function"==typeof e.find&&null!=(r=e.find(t))?r:[];if(!n.length)return n;var i=t.match(/\{\{\s*(?![%}])([^{}"]|"[^"]*")+\s*\}\}/g);return(null==i?void 0:i.length)?n.filter(function(e){return!i.some(function(t){return t.includes(e.text)})}):n}})})},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i]):not([class *= "mention__name"])'}]}})},19625:function(e,t,r){r.d(t,{Uc:()=>i,jF:()=>o,lK:()=>a});var n=r(84326),i=function(e,t){var r=0,n=0,i=0,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(i+=u,e<i){n=e-(i-u);break}r++}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{groupIndex:r,insideGroupIndex:n}},o=function(e){return({space:(0,n.t)("tiptap.extensions.entities.spaces"),post:(0,n.t)("tiptap.extensions.entities.posts"),event:(0,n.t)("tiptap.extensions.entities.events"),lesson:(0,n.t)("tiptap.extensions.entities.lessons"),course:(0,n.t)("tiptap.extensions.entities.courses")})[e]},a=function(e){var t="space"===e.type||"Space"===e.type;return"comment"===e.type||"Comment"===e.type?e.comment:t?"#"+e.name:e.name}},2386:function(e,t,r){r.d(t,{Y:()=>M});var n=r(88897),i=r(8744),o=r(53397),a=r(92007),l=r(13735),s=r(5606),c=r(65010),u=r(85893),d=r(84326),f=r(52950),p=r(72727),m=r(80171),b=r(91667),h=r(23627),y=r(19625),v=function(e){var t=e.node,r=(0,p.L)(),n=r.navigateToUrl,o=r.isElectron,a=(0,h.p)(),l=(0,b.S)()||a,s=l.sgidToObjectMap,c=l.localSgidToObjectMap,v=(void 0===c?{}:c)[t.attrs.sgid]||(void 0===s?{}:s)[t.attrs.sgid],g=function(){var e=v.url;o?n(e):window.open(e,"_blank","noreferrer")},x=(0,f.k)(g);if(!v)return(0,u.jsx)(i.T5,{as:"span",children:(0,u.jsx)(m.T,{interactive:!1,content:(0,d.t)("unavailable_entity_message"),placement:"top",children:(0,u.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 px-0.5 font-medium",children:(0,d.t)("unavailable_entity")})})});var j="space"===v.type||"Space"===v.type,O=(0,y.lK)(v);return(0,u.jsx)(i.T5,{as:"span",children:(0,u.jsx)(m.T,{interactive:!1,content:O,placement:"top",disabled:!O,children:(0,u.jsxs)("span",{onClick:g,onKeyDown:x,role:"button",contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 px-0.5 text-left font-medium",tabIndex:0,children:[j&&"#",v.name||(0,d.t)("tiptap.entity_untitled")]})})})},g=r(67294),x=r(96486),j=r(88767),O=r(41553),w=r(93199),S=r(13532),_=r(1943),N=r(594),P=r(94184),k=r.n(P),D=r(85924),E=r(80219),A=function(e){var t=e.entity,r=e.handleClick,n=e.isSelected,i=t||{},o=i.name,a=i.emoji,l=i.custom_emoji_url,s=i.custom_emoji_dark_url,c=(0,D.TC)().currentAppearance;return(0,u.jsx)(m.T,{interactive:!1,content:o,disabled:(null==o?void 0:o.length)<40,children:(0,u.jsxs)("button",{type:"button",className:k()("hover:bg-tertiary flex w-full cursor-pointer items-center truncate px-6 py-2.5 text-left",{"bg-tertiary":n}),onClick:r,children:["space"===t.type&&(0,u.jsx)(E.S,{className:"!text-dark mr-2 flex !h-5 !w-auto items-center",emoji:a,customEmojiUrl:l,customEmojiDarkUrl:s,appearance:c}),(0,u.jsx)(O.Z.LabelSm,{weight:"medium",children:(0,x.truncate)(o,{length:40})})]})})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=(0,g.forwardRef)(function(e,t){var r,n=e.query,i=e.command,o=(0,b.S)(),a=(0,h.p)(),l=(o||a).addToLocalSgidToObjectMap,s=(0,_.O)().setPopupsVisible,c=(r=(0,g.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return T(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],f=c[1],p=(0,j.useQuery)(["entities",n],function(){return(0,w.UT)(S.av.searchV2.advanced.index({params:{query:n,per_page:10,page:1,type:"entity_list"}}))},{select:function(e){return(e.records||[]).map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={label:e.name},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})},enabled:!!n,retry:1,keepPreviousData:!0}),m=p.data,v=void 0===m?[]:m,P=p.isLoading,k=(0,x.isArray)(v)&&v.length>0,D=function(e){e&&(l({sgid:e.sgid,object:e}),i(e))};(0,g.useEffect)(function(){n&&!P&&k?s(!0):s(!1)},[k,n,P,s]);var E=Object.values((0,x.groupBy)(v,"type")),C=E.map(function(e){return e.length}),I=(0,x.flatten)(E),M=(0,g.useCallback)(function(e,t){var r=(0,y.Uc)(d,C),n=r.groupIndex,i=r.insideGroupIndex;return n===e&&i===t},[d,C]);return((0,N.h)({selectedIndex:d,setSelectedIndex:f,ref:t,items:I,selectItem:function(e){D(I[e])}}),k)?(0,u.jsx)("div",{className:"bg-primary border-primary relative max-h-[550px] min-w-[250px] max-w-[320px] space-y-6 overflow-auto rounded-lg border pt-4 text-sm shadow-md",children:E.map(function(e,t){var r=e[0].type;return(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("div",{className:"px-6 pb-2",children:(0,u.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,y.jF)(r)})}),e.map(function(e,r){return(0,u.jsx)(A,{entity:e,handleClick:function(){D(e),(0,x.defer)(function(){return s(!1)})},isSelected:M(t,r)},e.id)})]},r)})}):(0,u.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[320px] bg-transparent"})});C.displayName="EntityList";var I=function(e){var t=e.href,r=e.command,n=(0,b.S)(),i=(0,h.p)(),o=(n||i).addToLocalSgidToObjectMap;return(0,j.useQuery)(S.av.richTextFields.unfurlURLs({params:{urls:[t]}}),{initialData:[],onSuccess:function(e){var t,n=null!=(t=null==e?void 0:e[0])?t:{type:"",sgid:""};n.type&&(o({sgid:n.sgid,object:n}),r(n.sgid))}}),null};I.displayName="EntityPaste";var M=n.NB.create({name:"entity",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1100,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},addOptions:function(){return{portalTargetId:null}},parseHTML:function(){return[{tag:"entity-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["entity-react",(0,n.P1)(t)]},addNodeView:function(){return(0,i.fW)(v)},addProseMirrorPlugins:function(){var e=this,t=this.editor,r=this.name;return[new a.Sy({key:new a.H$("entityLinkPaste"),props:{handlePaste:function(e,n){if(!e.state.selection.empty)return!1;var o=n.clipboardData.getData("text/plain").trim(),a=RegExp("^https?://".concat(window.location.host,"/c/[-\\]_.~!*'();:@&=+$,/?%#[A-z0-9]*$"),"g").exec(o);if(!a)return!1;var l=a[0],s=e.state.selection.ranges[0].$from.pos;t.chain().focus().insertContentAt(s,{type:"text",text:l,marks:[{type:"link",attrs:{href:l,target:"_blank"}}]}).run();var u=new i.M_(I,{props:{href:l,command:function(e){(0,c.R)({editor:t,range:{from:s,to:s+l.length},name:r,attrs:{sgid:e}}),u.destroy()}},editor:t});return!0}}}),(0,o.ZP)({editor:this.editor,char:"#",allowSpaces:!0,pluginKey:new a.H$("entity"),command:function(t){var r=t.editor,n=t.range,i=t.props;return(0,c.R)({editor:r,range:n,name:e.name,attrs:i})},allow:function(t){var r=t.state,n=t.range;return(0,c.k)({state:r,range:n,name:e.name})},render:function(){var r,n,o=(0,s.D)(e.options.portalTargetId);return{onStart:function(e){r=new i.M_(C,{props:e,editor:e.editor}),n=(0,l.ZP)(o,{getReferenceClientRect:function(){var t;return(null==(t=e.clientRect)?void 0:t.call(e))||new DOMRect(0,0,0,0)},content:r.element,appendTo:function(){return o||document.body},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var i;if("Space"===e.event.code){var o=t.getText();if((null==o?void 0:o.at(-1))==" ")return n[0].hide(),!1}else if("Escape"===e.event.code)return n[0].hide(),!1;return null==(i=r.ref)?void 0:i.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}})},9467:function(e,t,r){r.d(t,{X:()=>S,A:()=>_});var n=r(85893),i=r(67294),o=r(96486),a=r(58533),l=r(1943),s=r(51169),c=r(91667),u=r(23627),d=r(594),f=r(94184),p=r.n(f),m=r(41553),b=r(57363),h=r(98363),y=function(e){var t=e.member,r=e.isSelected,i=e.handleClick;return(0,n.jsxs)("button",{type:"button","data-testid":"mention-item",className:p()("hover:bg-tertiary flex w-full cursor-pointer items-center px-3 py-1.5",{"bg-tertiary":r}),onClick:i,children:[(0,n.jsx)("div",{className:"mr-3",children:"group_mention"===t.type?(0,n.jsx)(b.JO,{type:"20-members",size:20,className:"!text-darkest ml-1 mr-2"}):(0,n.jsx)(h.s,{size:"8",name:t.name,src:t.avatar_url})}),(0,n.jsx)(m.Z.LabelSm,{weight:"medium",children:t.name})]})},v=function(e){var t=e.spaceId,r=e.isDirectMessaging,n=e.isThread,i=e.editorType,o=e.isUpdate,a=e.disableGroupMentions;return"block"===i?"post":n||o||a?"thread":t?"space":r?"direct":"group_chat"},g=r(88767),x=r(93199),j=r(13532),O=function(e){var t=e.query,r=e.scope,n=void 0===r?"space":r,i=e.spaceId,a=(0,g.useInfiniteQuery)(["entities",t],function(e){var r,o=e.pageParam;return r=void 0===o?1:o,(0,x.UT)(j.av.searchV2.advanced.index({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({query:t,per_page:20,page:r,type:"mentions",mention_scope:n,order:"relevance"},i&&{space_id:i})}))},{select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,o.flatten)(r.map(function(e){return e.records})),pageParams:r.map(function(e){return e.page}),pagesList:r}},enabled:!!t,retry:1,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),l=a.data,s=(void 0===l?{}:l).pages;return{items:void 0===s?[]:s,isLoading:a.isLoading,fetchNextPage:a.fetchNextPage,hasNextPage:a.hasNextPage}};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S="mentionList",_=(0,i.forwardRef)(function(e,t){var r,f=e.query,p=e.command,m=(0,c.S)(),b=(0,u.p)(),h=m||b,g=h.addToLocalSgidToObjectMap,x=h.spaceId,j=h.chatProps,_=h.type,N=h.isUpdate,P=j||{},k=P.isThread,D=P.isDirectMessaging,E=P.disableGroupMentions,A=(0,l.O)().setPopupsVisible,T=O({query:f,spaceId:x,scope:v({spaceId:x,isDirectMessaging:D,isThread:k,editorType:_,isUpdate:N,disableGroupMentions:E})}),C=T.items,I=T.fetchNextPage,M=T.hasNextPage,L=T.isLoading,R=(0,o.isArray)(C)&&C.length>0,F=(r=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return w(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),$=F[0],U=F[1],X=function(e){var t=C[e];t&&(g({sgid:t.sgid,object:t}),p(t))};return((0,i.useEffect)(function(){return U(0)},[C]),(0,d.h)({selectedIndex:$,setSelectedIndex:U,ref:t,items:C,selectItem:X}),(0,i.useEffect)(function(){f&&!L&&R?A(!0):A(!1)},[R,f,A,L]),R)?(0,n.jsx)("div",{className:"bg-primary border-primary relative flex max-h-[50vh] min-w-[250px] max-w-[320px] flex-col space-y-0.5 overflow-y-auto rounded border py-1.5 text-sm shadow-md",id:S,children:(0,n.jsx)(a.Z,{scrollThreshold:.8,next:I,hasMore:!!M,dataLength:C.length,loader:(0,n.jsx)(s.a,{center:!0}),scrollableTarget:"mentionList",children:C.map(function(e,t){return(0,n.jsx)(y,{member:e,handleClick:function(){X(t),(0,o.defer)(function(){return A(!1)})},isSelected:t===$},e.id)})})}):(0,n.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[320px] bg-transparent"})});_.displayName="MentionList"},6812:function(e,t,r){r.d(t,{z:()=>j});var n=r(88897),i=r(8744),o=r(53397),a=r(92007),l=r(13735),s=r(5606),c=r(65010),u=r(9467),d=r(85893),f=r(94184),p=r.n(f),m=r(60983),b=r(41342),h=r(59834),y=r(91667),v=r(23627),g=["GroupMention","group_mention"],x=function(e){var t,r,n=e.node,o=(0,b.N3)(),a=(0,y.S)(),l=(0,v.p)(),s=a||l,c=s.sgidToObjectMap,u=s.localSgidToObjectMap,f=s.type,x=s.disableMentionClicks,j=void 0!==x&&x,O=(void 0===u?{}:u)[n.attrs.sgid]||(void 0===c?{}:c)[n.attrs.sgid],w=(0,h.O)({public_uid:null==O?void 0:O.public_uid});if(!O)return null;var S="chat"===f,_="CommunityMember"===O.type,N=g.some(function(e){return e===O.type}),P=N||_&&O.id===(null==o?void 0:o.id),k=p()("mx-0.5 rounded-sm px-0.5 py-[1px] font-normal",N?"text-[#42464D]":"text-circle cursor-pointer",P?"bg-amber-100":"bg-indigo-100");return(0,d.jsx)(i.T5,{as:"span",children:(0,d.jsx)(m.C,{communityMemberId:O.id,name:O.name,publicUid:O.public_uid,headline:O.headline,avatarURL:O.avatar_url,side:"top",sideOffset:10,disabled:j||N,children:(0,d.jsxs)("span",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({contentEditable:!1,className:S?k:"text-link cursor-pointer font-medium"},j||N?{}:w),r=r={children:[S?"@":"",O.name]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})},j=n.NB.create({name:"mention",group:"inline",inline:!0,selectable:!0,atom:!0,addOptions:function(){return{portalTargetId:null}},addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"mention-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["mention-react",(0,n.P1)(t)]},addNodeView:function(){return(0,i.fW)(x)},addProseMirrorPlugins:function(){var e=this,t=(0,s.D)(this.options.portalTargetId);return[(0,o.ZP)({editor:this.editor,char:"@",allowSpaces:!0,pluginKey:new a.H$("mention"),command:function(t){var r=t.editor,n=t.range,i=t.props;return(0,c.R)({editor:r,range:n,name:e.name,attrs:i})},allow:function(t){var r=t.state,n=t.range;return(0,c.k)({state:r,range:n,name:e.name})},render:function(){var e,r;return{onStart:function(n){e=new i.M_(u.A,{props:n,editor:n.editor});var o={top:0,left:0,width:0,height:0,right:0,bottom:0,x:0,y:0,toJSON:function(){return""}};r=(0,l.ZP)(t,{getReferenceClientRect:function(){var e;return(null==(e=n.clientRect)?void 0:e.call(n))||o},appendTo:function(){return t||document.body},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",popperOptions:{modifiers:[{name:"offset",options:{offset:[-20,0]}}]}})},onUpdate:function(t){var n;e.updateProps(t),null==(n=r[0])||n.setProps({getReferenceClientRect:t.clientRect})},onKeyDown:function(t){var n;return"Escape"===t.event.key?(r[0].hide(),!0):null==(n=e.ref)?void 0:n.onKeyDown(t)},onExit:function(){var t;null==(t=r[0])||t.destroy(),null==e||e.destroy()}}}})]}})},594:function(e,t,r){r.d(t,{h:()=>a});var n=r(67294),i=r(96486),o=r(1943),a=function(e){var t=e.selectedIndex,r=e.setSelectedIndex,a=e.items,l=e.ref,s=e.selectItem,c=(0,o.O)().setPopupsVisible;(0,n.useImperativeHandle)(l,function(){return{onKeyDown:function(e){switch(e.event.key){case"ArrowUp":return r((Number(t)+Number(a.length)-1)%a.length),!0;case"ArrowDown":return r((Number(t)+1)%a.length),!0;case"Enter":if(!a.length)return!1;return s(t),(0,i.defer)(function(){return c(!1)}),!0;default:return c(!1),!1}}}},[a,t,s,c,r])}},65010:function(e,t,r){r.d(t,{R:()=>n,k:()=>i});var n=function(e){var t,r=e.editor,n=e.range,i=e.name,o=e.attrs,a=r.view.state.selection.$to.nodeAfter;(null==a||null==(t=a.text)?void 0:t.startsWith(" "))&&(n.to+=1),r.chain().focus().insertContentAt(n,[{type:i,attrs:o},{type:"text",text:" "}]).run()},i=function(e){var t=e.state,r=e.range,n=e.name,i=t.doc.resolve(r.from),o=t.schema.nodes[n];return!!i.parent.type.contentMatch.matchType(o)}},63395:function(e,t,r){r.d(t,{a:()=>n});var n=r(77447).Z.extend({parseHTML:function(){return[{tag:"u"}]}})},31464:function(e,t,r){r.d(t,{l:()=>o});var n=r(85893),i=r(57363),o=function(e){var t=e.type,r=e.iconSize;return(0,n.jsx)("span",{className:"flex items-center",children:(0,n.jsx)(i.JO,{type:t,size:void 0===r?20:r,useWithFillCurrentColor:!0})})}},4583:function(e,t,r){r.d(t,{p:()=>f});var n=r(85893),i=r(45697),o=r.n(i),a=r(94184),l=r.n(a),s=r(23560),c=r.n(s),u=r(70434),d=r(31464),f=function(e){var t=e.label,r=e.isActive,i=e.onClick,o=e.tooltipPlacement,a=e.iconType,s=(0,n.jsx)("button",{type:"button",onClick:function(){return c()(i)&&i()},className:l()("rounded border p-1.5","text-dark","hover:bg-secondary",{"bg-tertiary text-dark border-light":r,"border-transparent":!r}),children:(0,n.jsx)(d.l,{type:a})});return t?(0,n.jsx)(u.Y,{content:t,placement:void 0===o?"top":o,theme:"text-modifiers-tooltip",children:s}):(0,n.jsx)(n.Fragment,{children:s})};f.propTypes={label:o().string,isActive:o().bool,onClick:o().func,tooltipPlacement:o().string,iconType:o().string}},22148:function(e,t,r){r.d(t,{E:()=>i});var n=r(88897),i=function(e){var t=e.view,r=e.state,i=e.from,o=e.to,a=r.doc,l=r.selection,s=l.empty,c=l.$from.node(),u=!a.textBetween(i,o).length&&(0,n.xh)(l),d=t.hasFocus(),f=["paragraph","heading"].includes(c.type.name);return d&&!s&&f&&!u}},13467:function(e,t,r){r.d(t,{o:()=>c});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(53529),s=r(57363),c=(0,i.forwardRef)(function(e,t){var r,o,c=e.icon,u=e.isLight,d=e.shouldAnimateSpin,f=e.className,p=e.disabled,m=e.size,b=void 0===m?20:m,h=e.isSendButton,y=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["icon","isLight","shouldAnimateSpin","className","disabled","size","isSendButton"]),v=(0,l.TC)().isDarkAppearance,g=(0,i.useMemo)(function(){return"28-message-send"===c?v?"28-message-send-dark":"28-message-send":c},[c,v]);return(0,n.jsx)("button",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,type:"button",className:a()("flex h-7 w-7 items-center justify-center rounded",{"hover:bg-tertiary focus-visible:bg-tertiary p-1":!h,"cursor-not-allowed":p},f),disabled:p},y),o=o={children:(0,n.jsx)(s.JO,{type:g,size:b,className:a()(28===b?"h-7 !w-7":"h-5 w-5",{"text-default dark:text-dark":u,"text-light dark:text-default":!u,"animate-spin":d,"!text-brand":h&&u,"!text-disabled":h&&!u})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r))});c.displayName="MenuIconButton"},91667:function(e,t,r){r.d(t,{S:()=>o,i:()=>i});var n=r(67294),i=(0,n.createContext)(null);i.displayName="TipTapEditorContext";var o=function(){return(0,n.useContext)(i)}},22767:function(e,t,r){r.d(t,{$:()=>i});var n=r(85893),i=function(){return(0,n.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},21728:function(e,t,r){r.d(t,{B7:()=>m,$j:()=>d.$,KN:()=>u});var n=r(85893),i=r(67294),o=r(84326),a=r(57363),l=r(1168),s=r(36565),c=r(86678),u=function(e){var t=e.onClose,r=(0,i.useMemo)(function(){return(0,s.zs)()},[]),u=(0,c.Y)({recordingId:r}),f=u.isRecording,p=u.status,b=u.isBusy,h=u.isError,y=u.onSubmit,v=u.setServerError;(0,c.r)({onClose:t,recordingId:r,setServerError:v});var g=(0,o.t)("tiptap.voice_message.".concat(p));return(0,n.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex h-full w-full items-center justify-center rounded-lg",children:(0,n.jsxs)("div",{className:(0,l.A)("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":f}),children:[(0,n.jsx)("button",{type:"submit",onClick:t,className:"bg-primary flex items-center justify-center rounded-full p-2",children:(0,n.jsx)(a.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,n.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,n.jsx)("div",{className:"min-w-[160px]",children:g}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,n.jsx)(m,{isRecording:f})}),(0,n.jsx)(a.JO,{type:"20-microphone",className:(0,l.A)("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":f})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:y,disabled:b,children:b?(0,n.jsx)(d.$,{}):(0,n.jsx)(a.JO,{type:h?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})},d=r(22767),f=r(4393);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t,r=e.isRecording,o=(t=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return p(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1];return(0,i.useEffect)(function(){if(r){var e=setInterval(function(){l(function(e){return e+1})},1e3);return function(){return clearInterval(e)}}return function(){}},[r]),(0,n.jsx)("div",{children:(0,f.He)(a)})}},99165:function(e,t,r){r.d(t,{Fq:()=>n,K2:()=>o,mq:()=>i,x4:()=>a});var n=60,i={WAITING_FOR_MIC_PERMISSION:"waiting_for_mic_permission",RECORDING:"recording",PROCESSING:"processing",UPLOADING:"uploading",UPLOAD_ERROR:"upload_error",SERVER_ERROR:"server_error"},o="VOICE_MESSAGE_PROCESSED",a="VOICE_MESSAGE_ERROR"},36565:function(e,t,r){r.d(t,{PW:()=>a,Rl:()=>s,g5:()=>l,zs:()=>o});var n=r(99165);function i(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var o=function(){return Math.random().toString(36).slice(2,9)},a=function(e){return{isRecording:e===n.mq.RECORDING,isBusy:e===n.mq.UPLOADING||e===n.mq.PROCESSING,isError:e===n.mq.UPLOAD_ERROR||e===n.mq.SERVER_ERROR}},l=function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,navigator.permissions.query({name:"microphone"})];case 1:if("granted"!==t.sent().state)throw Error("Microphone permission not granted");return[3,3];case 2:return t.sent(),e(n.mq.WAITING_FOR_MIC_PERMISSION),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function l(e){i(a,n,o,l,s,"next",e)}function s(e){i(a,n,o,l,s,"throw",e)}l(void 0)})})()},s=function(){if(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return null;var e=navigator.userAgent.match(/Version\/(\d+(\.\d+)?)/);return e?Number(e[1]):null}},86678:function(e,t,r){r.d(t,{r:()=>S,Y:()=>g});var n=r(67294),i=r(29656),o=r(51606),a=r(99165),l=r(36565),s=r(96486),c=r(13532);function u(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,l,"next",e)}function l(e){u(o,n,i,a,l,"throw",e)}a(void 0)})}}function f(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var p={accept:"application/json","content-type":"application/json"},m=function(e,t,r){return d(function(){var n;return f(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fetch(c.av.voiceMessages.processFileUrl(),{method:"POST",headers:p,body:JSON.stringify({object_id:e,recording_id:t})})];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),(0,s.isFunction)(r)&&r(),console.error("Error processing audio file:",n),[3,3];case 3:return[2]}})})()};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,l,"next",e)}function l(e){h(o,n,i,a,l,"throw",e)}a(void 0)})}}function v(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){var t,r=e.recordingId,s=(t=(0,n.useState)(a.mq.RECORDING),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],h=s[1],g=(0,n.useRef)(null),x=(0,n.useRef)(null),j=(0,n.useRef)(null),O=(0,n.useRef)([]),w=(0,n.useRef)(null),S=(0,n.useRef)(!1),_=(0,n.useRef)(null),N=(0,l.PW)(u),P=N.isRecording,k=N.isBusy,D=N.isError,E=(0,n.useCallback)(function(){j.current&&x.current&&(j.current.stop(),j.current=null,x.current.getTracks().forEach(function(e){return e.stop()}),x.current=null,O.current=[],w.current&&clearTimeout(w.current))},[]),A=(0,n.useCallback)(function(){return y(function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,l.g5)(h),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 1:return x.current=e=t.sent(),j.current=new MediaRecorder(e),j.current.addEventListener("dataavailable",function(e){O.current.push(e.data)}),j.current.addEventListener("stop",function(){if(S.current){S.current=!1;return}h(a.mq.UPLOADING);var e=new Blob(O.current,{type:"audio/mp4"});g.current=new o.Z,g.current.use(i.Z,{shouldUseMultipart:!1,getUploadParameters:function(e){return y(function(){var t;return v(this,function(r){switch(r.label){case 0:var n;return r.trys.push([0,2,,3]),[4,(n=e.data,d(function(){var e,t;return f(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(c.av.voiceMessages.signedUploadUrl(),{method:"POST",headers:p,body:JSON.stringify({filename:n.name,contentType:n.type})})];case 1:return[4,r.sent().json()];case 2:return[2,{method:(e=r.sent()).method,url:e.url,fields:e.fields,headers:{"Content-Type":n.type}}];case 3:throw t=r.sent(),L(),console.error("Error uploading audio file:",t),t;case 4:return[2]}})})())];case 1:if(!(t=r.sent()))throw Error("Failed to get upload parameters");return[2,t];case 2:return console.error(r.sent()),[2,{url:"",error:"Failed to get upload parameters"}];case 3:return[2]}})})()}}),g.current.addFile({name:"audio.mp4",data:e}),g.current.upload(),g.current.on("upload-success",function(e,t){var n,i=null==t||null==(n=t.uploadURL)?void 0:n.split(".com/")[1].split("/")[0];i?(_.current=i,m(i,r,M),h(a.mq.PROCESSING)):L()}),g.current.on("upload-error",function(){return L()})}),j.current.start(),h(a.mq.RECORDING),w.current=setTimeout(function(){return E()},60*a.Fq*1e3),[3,3];case 2:return console.error("Error accessing microphone:",t.sent()),[3,3];case 3:return[2]}})})()},[E,r]),T=(0,n.useCallback)(function(){S.current=!0,E()},[E]),C=function(){h(a.mq.UPLOADING),g.current&&g.current.retryAll()},I=function(){h(a.mq.PROCESSING),_.current?m(_.current,r):L()},M=function(){return h(a.mq.SERVER_ERROR)},L=function(){return h(a.mq.UPLOAD_ERROR)};return(0,n.useEffect)(function(){return A(),function(){T()}},[A,T]),{setServerError:M,status:u,isRecording:P,isBusy:k,isError:D,onSubmit:function(){D?u===a.mq.UPLOAD_ERROR?C():I():E()}}},x=r(84579),j=r(41342),O=r(91667);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,i=((0,j.wh)().currentCommunityMember||{}).id,o=(0,O.S)(),l=o.localAttachments,s=o.setLocalAttachments;(0,x.I)(void 0===i?0:i,function(e){if((e.event===a.K2||e.event===a.x4)&&e.json_message.recording_id===r)if(e.event===a.K2)s(((function(e){if(Array.isArray(e))return w(e)})(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}])),t();else e.event===a.x4&&n()})}},65121:function(e,t,r){r.d(t,{T:()=>tZ});var n=r(85893),i=r(67294),o=r(8744),a=r(94184),l=r.n(a),s=r(96486),c=r(7391),u=r(46977),d=r(84326),f=r(72048),p=r(54578),m=r(82859),b=r(24804),h=r(4583),y=r(22148),v=r(26703),g=r(34982),x=function(e){var t=e.editor,r=e.allowBubbleMenuOverflow,i=(0,g.K)(),a=(0,v.k)("top",void 0===r||r),l=[{name:"bold",iconType:"20-character-bold",label:(0,d.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,d.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"strike",iconType:"20-character-strike",label:(0,d.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,d.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"link",iconType:"20-character-link",label:(0,d.t)("tiptap.bubble_menu.link"),onClick:function(){return i.show({editor:t})}}];return(0,n.jsx)("div",{children:(0,n.jsx)(o.NM,{editor:t,tippyOptions:a,shouldShow:y.E,children:(0,n.jsx)("div",{className:"bg-primary border-primary divide-primary flex gap-1 divide-x rounded-lg border p-1 shadow-sm",children:(0,n.jsx)("div",{children:l.map(function(e){return(0,n.jsx)(h.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isActive:t.isActive(e.name)},e),e.name)})})})})})},j=r(1943),O=r(57363),w=function(){return(0,n.jsxs)("p",{className:"text-light bg-secondary/90 absolute left-0 top-0 z-20 flex h-full w-full items-center justify-center space-x-2 rounded-lg",children:[(0,n.jsx)(O.JO,{size:20,type:"20-attachment"}),(0,n.jsx)("span",{children:(0,d.t)("tiptap.drag_and_drop_file")})]})},S=r(56070),_=r(18490),N=r(13466),P=r(43557),k=r(99961),D=r(15567),E=r(51127),A=r(75481),T=r(32018),C=r(91077),I=r(38621),M=r(87597),L=r(55963),R=r(56364),F=r(88897),$=function(e){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.splitListItem("listItem")},function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]})},U=F.hj.create({name:"desktopKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return $({editor:e})},Enter:function(){return!0}}}}),X=F.hj.create({name:"mobileKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return $({editor:e})},Enter:function(){return $({editor:e})}}}}),B=r(63395),z=r(35218),q=r(27753),Z=r(92007),H=r(65010),V=r(41342),W=r(52950),J=r(63549),G=r(80171),K=r(91667),Q=r(23627),Y=r(41553),ee=r(93199),et=r(13532);function er(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var en=function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(Object.prototype.hasOwnProperty.call(l,e)&&!0===l[e])return!0}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!1},ei=function(e){var t,r=e.chatRoomUuid,n=e.messageId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,ee.UT)(et.av.chatRoomMessages.show({uuid:r,id:n}))];case 1:if(e.sent())return[2,!0];return[2,void 0];case 2:return console.error("No chat message access",e.sent()),[2,!1];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){er(o,n,i,a,l,"next",e)}function l(e){er(o,n,i,a,l,"throw",e)}a(void 0)})})()};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ea(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function el(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var es=function(e){var t=e.node,r=el((0,i.useState)(!1),2),a=r[0],l=r[1],s=(0,V.N3)(),c=el((0,b.k)(),2),u=c[0],f=c[1],p=(0,Q.p)(),m=(0,K.S)(),h=m||p,y=h.sgidToObjectMap,v=h.localSgidToObjectMap,g=m.addMessageAttachments,x=m.removeMessageAttachments,j=m.chatRoomAccessArr,O=void 0===j?[]:j,w=m.setShouldShowPrivateMessageConfirmationOnSubmit,S=m.editor,_=(void 0===v?{}:v)[t.attrs.sgid]||(void 0===y?{}:y)[t.attrs.sgid],N=(0,W.k)(function(){D()});if((0,i.useEffect)(function(){return _?(g(_),_.is_private_message&&w(!0)):l(!0),function(){x(_),(null==_?void 0:_.is_private_message)&&w(!1)}},[_]),(0,i.useEffect)(function(){if(a){var e=setTimeout(function(){l(!1)},1e3);return function(){return clearTimeout(e)}}},[a]),a)return(0,n.jsx)(o.T5,{as:"span",children:(0,n.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,d.t)("tiptap.extensions.entities.loading")})});if(!_)return(0,n.jsx)(o.T5,{as:"span",children:(0,n.jsx)(G.T,{interactive:!1,content:(0,d.t)("unavailable_entity_message"),placement:"top",children:(0,n.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,d.t)("unavailable_entity")})})});var P=_.data,k=_.sender,D=function(){var e;return(e=function(){var e,t,r,n,i,o,a;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:if(e=O.length>0,t=!S.isEditable&&!e,r=k.community_member_id===(null==s?void 0:s.id),n=function(){return!!S.isEditable||en(_.id,O)},i=function(){return ei({chatRoomUuid:P.chat_room_uuid,messageId:_.id})},!r)return[3,1];return o=!0,[3,5];case 1:if(!t)return[3,3];return[4,i()];case 2:return a=l.sent(),[3,4];case 3:a=n(),l.label=4;case 4:o=a,l.label=5;case 5:return o?window.open(P.url,"_blank","noreferrer"):f(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ea(o,n,i,a,l,"next",e)}function l(e){ea(o,n,i,a,l,"throw",e)}a(void 0)})})()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.T5,{as:"span",children:(0,n.jsx)(G.T,{interactive:!1,content:P.url,placement:"top",children:(0,n.jsx)("span",{role:"button",id:"message-link-".concat(P.id),contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 py-[1px] font-medium",onClick:D,onKeyDown:N,tabIndex:0,children:P.label})})}),(0,n.jsx)(J.c,{isOpen:u,title:(0,d.t)("messaging.actions.unable_to_open_link.title"),onConfirm:f,confirmVariant:"danger",confirmText:(0,d.t)("close"),children:(0,n.jsx)(Y.Z.BodyMd,{children:(0,d.t)("messaging.actions.unable_to_open_link.description")})})]})},ec=r(88767),eu=r(70442),ed=r(58808),ef=function(){var e,t=(0,eu.TH)().pathname.includes("/messages"),r=(0,V.L2)().data,n=(0,ed.z)({forEdition:!1}).currentLesson,i=void 0===n?{}:n;return{chatRoomUuid:t?null==(e=window.location.pathname)?void 0:e.split("messages/")[1]:(null==r?void 0:r.chat_room_uuid)||(null==i?void 0:i.chat_room_uuid)}},ep=function(e){var t=e.href,r=e.command,n=(0,K.S)(),i=(0,Q.p)(),o=(n||i).addToLocalSgidToObjectMap,a=ef().chatRoomUuid;return(0,ec.useQuery)(et.av.richTextFields.unfurlURLs({params:{urls:[t],open_chat_room_uuid:a}}),{initialData:[],onSuccess:function(e){var t,n=null!=(t=null==e?void 0:e[0])?t:{type:"",sgid:""};n.type&&(o({sgid:n.sgid,object:n}),r(n.sgid))}}),null};ep.displayName="ChatMessagePaste";var em=F.NB.create({name:"message",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1200,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"chat-message-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["chat-message-react",(0,F.P1)(t)]},addNodeView:function(){return(0,o.fW)(es)},addProseMirrorPlugins:function(){var e=this.editor,t=this.name;return[new Z.Sy({key:new Z.H$("chatMessageLinkPaste"),props:{handlePaste:function(r,n){var i=n.clipboardData.getData("text/plain");if(!i.includes("#message_"))return!1;var a=r.state.selection.ranges[0].$from.pos;e.chain().focus().insertContentAt(a,{type:"text",text:i,marks:[{type:"link",attrs:{href:i,target:"_blank"}}]}).run();var l=new o.M_(ep,{props:{href:i,command:function(r){(0,H.R)({editor:e,range:{from:a,to:a+i.length},name:t,attrs:{sgid:r}}),l.destroy()}},editor:e});return!0}}})]}}),eb=r(71575),eh=r(57338),ey=function(){var e=(0,K.S)().editedAt,t=(0,eh.H)(e||new Date),r=t.day,i=t.time;return(0,n.jsx)(o.T5,{as:"span",children:(0,n.jsx)(G.T,{content:"".concat(r," at ").concat(i),disabled:!e,children:(0,n.jsx)("span",{style:{color:"#717680"},className:"ml-0.5 cursor-default",children:(0,d.t)("edited")})})})},ev=F.NB.create({name:"editedlabel",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{id:{default:(0,s.random)()}}},parseHTML:function(){return[{tag:"edited-label"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["edited-label",(0,F.P1)(t)]},addNodeView:function(){return(0,o.fW)(ey)},addCommands:function(){return{addEditedLabelNode:function(){return function(e){var t=e.commands;return e.editor.isEmpty?t.insertContent({type:"paragraph",content:[{type:"text",text:""},{type:"editedlabel"}]}):t.insertContent({type:"editedlabel"})}}}}}),eg=F.hj.create({name:"emojiReplacer",addInputRules:function(){return[(0,F.DS)({find:/-___- $/,replace:"\uD83D\uDE11 "}),(0,F.DS)({find:/:'-\) $/,replace:"\uD83D\uDE02 "}),(0,F.DS)({find:/':-\) $/,replace:"\uD83D\uDE05 "}),(0,F.DS)({find:/':-D $/,replace:"\uD83D\uDE05 "}),(0,F.DS)({find:/>:-\) $/,replace:"\uD83D\uDE06 "}),(0,F.DS)({find:/-__- $/,replace:"\uD83D\uDE11 "}),(0,F.DS)({find:/':-\( $/,replace:"\uD83D\uDE13 "}),(0,F.DS)({find:/:'-\( $/,replace:"\uD83D\uDE22 "}),(0,F.DS)({find:/>:-\( $/,replace:"\uD83D\uDE20 "}),(0,F.DS)({find:/O:-\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/0:-3 $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/0:-\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/0;\^\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/O;-\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/0;-\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/O:-3 $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/:'\) $/,replace:"\uD83D\uDE02 "}),(0,F.DS)({find:/:-D $/,replace:"\uD83D\uDE03 "}),(0,F.DS)({find:/':\) $/,replace:"\uD83D\uDE05 "}),(0,F.DS)({find:/'=\) $/,replace:"\uD83D\uDE05 "}),(0,F.DS)({find:/':D $/,replace:"\uD83D\uDE05 "}),(0,F.DS)({find:/'=D $/,replace:"\uD83D\uDE05 "}),(0,F.DS)({find:/>:\) $/,replace:"\uD83D\uDE06 "}),(0,F.DS)({find:/>;\) $/,replace:"\uD83D\uDE06 "}),(0,F.DS)({find:/>=\) $/,replace:"\uD83D\uDE06 "}),(0,F.DS)({find:/;-\) $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/\*-\) $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/;-\] $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/;\^\) $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/B-\) $/,replace:"\uD83D\uDE0E "}),(0,F.DS)({find:/8-\) $/,replace:"\uD83D\uDE0E "}),(0,F.DS)({find:/B-D $/,replace:"\uD83D\uDE0E "}),(0,F.DS)({find:/8-D $/,replace:"\uD83D\uDE0E "}),(0,F.DS)({find:/:-\* $/,replace:"\uD83D\uDE18 "}),(0,F.DS)({find:/:\^\* $/,replace:"\uD83D\uDE18 "}),(0,F.DS)({find:/:-\) $/,replace:"\uD83D\uDE42 "}),(0,F.DS)({find:/-_- $/,replace:"\uD83D\uDE11 "}),(0,F.DS)({find:/:-X $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/:-# $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/:-x $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/>.< $/,replace:"\uD83D\uDE23 "}),(0,F.DS)({find:/:-O $/,replace:"\uD83D\uDE2E "}),(0,F.DS)({find:/:-o $/,replace:"\uD83D\uDE2E "}),(0,F.DS)({find:/O_O $/,replace:"\uD83D\uDE2E "}),(0,F.DS)({find:/>:O $/,replace:"\uD83D\uDE2E "}),(0,F.DS)({find:/:-P $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:-p $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:- $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:- $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:-b $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/>:P $/,replace:"\uD83D\uDE1C "}),(0,F.DS)({find:/X-P $/,replace:"\uD83D\uDE1C "}),(0,F.DS)({find:/x-p $/,replace:"\uD83D\uDE1C "}),(0,F.DS)({find:/':\( $/,replace:"\uD83D\uDE13 "}),(0,F.DS)({find:/'=\( $/,replace:"\uD83D\uDE13 "}),(0,F.DS)({find:/>:\\ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/>:\/ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/:-\/ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/:-. $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/>:\[ $/,replace:"\uD83D\uDE1E "}),(0,F.DS)({find:/:-\( $/,replace:"\uD83D\uDE1E "}),(0,F.DS)({find:/:-\[ $/,replace:"\uD83D\uDE1E "}),(0,F.DS)({find:/:'\( $/,replace:"\uD83D\uDE22 "}),(0,F.DS)({find:/;-\( $/,replace:"\uD83D\uDE22 "}),(0,F.DS)({find:/#-\) $/,replace:"\uD83D\uDE35 "}),(0,F.DS)({find:/%-\) $/,replace:"\uD83D\uDE35 "}),(0,F.DS)({find:/X-\) $/,replace:"\uD83D\uDE35 "}),(0,F.DS)({find:/>:\( $/,replace:"\uD83D\uDE20 "}),(0,F.DS)({find:/0:3 $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/0:\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/O:\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/O=\) $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/O:3 $/,replace:"\uD83D\uDE07 "}),(0,F.DS)({find:/<\/3 $/,replace:"\uD83D\uDC94 "}),(0,F.DS)({find:/:D $/,replace:"\uD83D\uDE03 "}),(0,F.DS)({find:/=D $/,replace:"\uD83D\uDE03 "}),(0,F.DS)({find:/;\) $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/\*\) $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/;\] $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/;D $/,replace:"\uD83D\uDE09 "}),(0,F.DS)({find:/B\) $/,replace:"\uD83D\uDE0E "}),(0,F.DS)({find:/8\) $/,replace:"\uD83D\uDE0E "}),(0,F.DS)({find:/:\* $/,replace:"\uD83D\uDE18 "}),(0,F.DS)({find:/=\* $/,replace:"\uD83D\uDE18 "}),(0,F.DS)({find:/:\) $/,replace:"\uD83D\uDE42 "}),(0,F.DS)({find:/=\] $/,replace:"\uD83D\uDE42 "}),(0,F.DS)({find:/=\) $/,replace:"\uD83D\uDE42 "}),(0,F.DS)({find:/:\] $/,replace:"\uD83D\uDE42 "}),(0,F.DS)({find:/:X $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/:# $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/=X $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/=x $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/:x $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/=# $/,replace:"\uD83D\uDE36 "}),(0,F.DS)({find:/:O $/,replace:"\uD83D\uDE2E "}),(0,F.DS)({find:/:o $/,replace:"\uD83D\uDE2E "}),(0,F.DS)({find:/:P $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/=P $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:p $/,replace:"\uD83D\uDE1B  "}),(0,F.DS)({find:/=p $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/: $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/: $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:b $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/d: $/,replace:"\uD83D\uDE1B "}),(0,F.DS)({find:/:\/ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/:\\ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/=\/ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/=\\ $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/:L $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/=L $/,replace:"\uD83D\uDE15 "}),(0,F.DS)({find:/:\( $/,replace:"\uD83D\uDE1E "}),(0,F.DS)({find:/:\[ $/,replace:"\uD83D\uDE1E "}),(0,F.DS)({find:/=\( $/,replace:"\uD83D\uDE1E "}),(0,F.DS)({find:/;\( $/,replace:"\uD83D\uDE22 "}),(0,F.DS)({find:/D: $/,replace:"\uD83D\uDE28 "}),(0,F.DS)({find:/:\$ $/,replace:"\uD83D\uDE33 "}),(0,F.DS)({find:/=\$ $/,replace:"\uD83D\uDE33 "}),(0,F.DS)({find:/#\) $/,replace:"\uD83D\uDE35 "}),(0,F.DS)({find:/%\) $/,replace:"\uD83D\uDE35 "}),(0,F.DS)({find:/X\) $/,replace:"\uD83D\uDE35 "}),(0,F.DS)({find:/:@ $/,replace:"\uD83D\uDE20 "}),(0,F.DS)({find:/<3 $/,replace:" "}),(0,F.DS)({find:/\/shrug $/,replace:"\xaf\\_()_/\xaf"})]}}),ex=r(2386),ej=r(6812);function eO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var ew=function(e){var t=e.placeholder,r=e.maxLength,n=e.menubarProps,i=e.type,o=e.shouldDisableEntities,a=e.shouldDisableMentions,l=e.portalTargetId,s=void 0===l?null:l,c="workflow"==i;return[P.Z,C.Z,L.Z,S.ZP,A.ZP,M.ZP,D.ZP.configure({HTMLAttributes:{class:"highlight-class"}}),B.a,ev,E.Z,(0,m.P4)()?X:U,eb.P.configure({openOnClick:!1,autolink:!0,validate:function(e){return!(n.dynamicVariables||q.q).map(function(e){return e.label.replace(/{{|}}/g,"")}).some(function(t){return t.includes(e)})}}),I.Z.configure({placeholder:t,emptyEditorClass:"is-editor-empty"}),eO({},!c&&!(void 0!==a&&a)&&ej.z.configure({portalTargetId:s})),eO({},!(void 0!==o&&o)&&ex.Y.configure({portalTargetId:s})),eO({},"chat"==i&&em),k.Z.extend({addKeyboardShortcuts:function(){return{}}}),eg,N.Z.configure({limit:void 0===r?null:r}),_.ZP,T.ZP,z.E.configure({type:i}),R.r.configure({portalTargetId:s})]},eS=r(39905),e_=r(45111),eN=r(5606),eP=r(13467),ek=r(21728),eD=r(36565);function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eA=function(){var e=(0,eD.Rl)();return!!(e&&e>=18.4&&e<=19)},eT=function(e){var t,r=e.isLight,o=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eE(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eE(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1];return eA()?null:(0,n.jsxs)("div",{children:[(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.voice_message.action"),dataTestId:"add_voice_message",children:(0,n.jsx)(eP.o,{type:"submit",onClick:function(){return l(!0)},"aria-label":(0,d.t)("tiptap.voice_message.action"),icon:"20-mic-2",isLight:r,iconClassName:"relative top-[2px] left-[2px]"})}),a&&(0,n.jsx)(ek.KN,{onClose:function(){return l(!1)}})]})},eC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"message-scroll-view",t=document.getElementById(e);t&&(t.scrollTop=t.scrollHeight)},eI=function(e){var t=!1;try{e.state.doc.descendants(function(e){"editedlabel"==e.type.name&&(t=!0)})}catch(e){console.error(e)}return t},eM=r(84142),eL=r(73935),eR=r(35834),eF=r(58533),e$=r(4186),eU=r(18317);function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eB=function(e){var t=e.gif,r=e.close,i=(0,K.S)(),o=i.localAttachments,a=void 0===o?[]:o,l=i.setLocalAttachments;return(0,n.jsx)("button",{type:"submit",onClick:function(){var e="video"===t.type;l(((function(e){if(Array.isArray(e))return eX(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return eX(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eX(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{url:t.images.original.url,id:t.id,content_type:e?"video/mp4":"image/gif",toUpload:!0,progress:0}])),r()},"aria-label":t.title,children:(0,n.jsx)("img",{loading:"eager",alt:"",width:180,src:t.images.preview_gif.url})})},ez=function(e){var t=e.query,r=e.setQuery;return(0,n.jsx)("div",{className:"p-2 pb-0",children:(0,n.jsx)("input",{type:"text",placeholder:d.Z.t("tiptap.search_giphy"),onChange:function(e){return r(e.target.value)},value:t||"",className:"bg-secondary placeholder:text-light w-full rounded border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})};function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eZ=function(e){var t,r=e.close,o=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eq(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1],c=(0,ec.useInfiniteQuery)(["chat-members-search",a],function(e){var t=e.pageParam,r=void 0===t?1:t;return a?eU.y(a,{offset:r,limit:10}):eU.q({offset:r,limit:10})},{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),u=c.data,f=c.fetchNextPage,p=c.hasNextPage,m=c.isLoading,b=(0,i.useMemo)(function(){var e;return(0,s.uniqBy)((0,s.flatten)(null==u||null==(e=u.pages)?void 0:e.map(function(e){return e.data})),"id")},[u]);return(0,n.jsxs)("div",{className:"bg-primary border-primary flex w-[360px] flex-col space-y-1 rounded border shadow","data-testid":"giphy-picker",children:[(0,n.jsx)(ez,{query:a,setQuery:l}),(0,n.jsxs)("div",{className:"h-[360px]",children:[!b.length&&(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:m?(0,n.jsx)(O.JO,{type:"loader"}):(0,n.jsx)("span",{children:(0,d.t)("tiptap.no_results_found")})}),!!b.length&&(0,n.jsx)(eF.Z,{dataLength:b.length,next:f,hasMore:!!p,scrollThreshold:.6,height:360,loader:(0,n.jsx)("div",{className:"col-span-2 flex justify-center py-3",children:(0,n.jsx)(O.JO,{type:"loader"})}),className:"mb-2 p-2",children:(0,n.jsx)(e$.Z,{columnsCount:2,gutter:"8",children:b.map(function(e){return(0,n.jsx)(eB,{gif:e,close:r},e.id)})})})]})]})};function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eH(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eW=function(e){var t=e.isLight,r=eV((0,i.useState)(null),2),o=r[0],a=r[1],l=eV((0,i.useState)(null),2),s=l[0],c=l[1],u=(0,eR.D)(o,s,{placement:"top",modifiers:[{name:"offset",enabled:!0,options:{offset:[80,10]}}]}),f=u.styles,p=u.attributes,m=(0,K.S)().portalTargetId,b=(0,eN.D)(m);return(0,n.jsx)(eM.J,{className:"relative",children:function(e){var r,i,o=e.open,l=e.close;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.add_gif"),dataTestId:"add_gif_message",children:(0,n.jsx)(eM.J.Button,{as:eP.o,ref:a,isLight:t,icon:"20-gif-2","aria-label":(0,d.t)("tiptap.add_gif")})}),o&&(0,eL.createPortal)((0,n.jsx)(eM.J.Panel,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({static:!0,className:"z-[1060]",ref:c,style:f.popper},p.popper),i=i={children:(0,n.jsx)(eZ,{close:l})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r)),b||document.body)]})}})},eJ=function(e){var t=e.editor,r=e.handleSubmit,i=e.openFilePicker,o=e.isUploading,a=e.editorHasNoContent,s=e.isFocused,c=e.isSubmitting,u=e.isUpdate,f=e.isLiveStream,p=e.submitButtonLabel,m=e.submittingLabel,b=e.portalTargetId,h=(0,V.Cc)().record.voice_messages_enabled,y=b?(0,eN.D)(b):null,v=s||document.getElementById("tiptapMessageTextBox")===document.activeElement||!a();return(0,n.jsxs)("div",{className:l()("flex items-end justify-between",p?"mt-3":"mt-4"),children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.add_image"),dataTestId:"add_image_message",children:(0,n.jsx)(eP.o,{onClick:i,"aria-label":(0,d.t)("tiptap.add_image"),icon:"20-image-2",isLight:v})}),(0,n.jsx)(e_.c,{portalTo:y,placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).insertContent(" ").run()},targetWrapperClassName:"!flex",target:(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.add_emoji"),dataTestId:"add_emoji_message",children:(0,n.jsx)(eP.o,{"aria-label":(0,d.t)("tiptap.add_image"),icon:"20-reaction",isLight:v})})}),(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,n.jsx)(eP.o,{onClick:function(){t.chain().focus().insertContent(" #").run()},"aria-label":(0,d.t)("add_entity"),icon:"20-hash",isLight:v})}),(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.add_mention"),dataTestId:"add_mention_message",children:(0,n.jsx)(eP.o,{onClick:function(){t.chain().focus().insertContent(" @").run()},"aria-label":(0,d.t)("add_mention"),icon:"20-mention",isLight:v})}),(0,n.jsx)(eW,{isLight:v}),(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("tiptap.attach_file"),dataTestId:"add_attachment_message",children:(0,n.jsx)(eP.o,{onClick:i,"aria-label":(0,d.t)("tiptap.attach_file"),icon:"20-attachment",isLight:v})}),h&&!(void 0!==f&&f)&&!u&&(0,n.jsx)(eT,{isLight:v})]}),p?(0,n.jsx)(eS.z,{type:"submit",variant:"circle",onClick:r,disabled:c||a()||o,small:!0,className:"!px-4",children:c&&m||p}):(0,n.jsx)(G.T,{placement:"bottom",interactive:!1,content:(0,d.t)("chat_space.send_message"),dataTestId:"submit_button_message",children:(0,n.jsx)(eP.o,{type:"submit",onClick:r,disabled:c||a()||o,id:"tiptap-send","aria-label":(0,d.t)("chat_space.send_message"),icon:o||c?"loader":"28-message-send",size:o||c?20:28,isLight:!a(),shouldAnimateSpin:o||c,isSendButton:!0})})]})},eG=r(44830),eK=r(94849),eQ=r(36353),eY=r(12367),e0=r(63793),e1=r(37614),e2=r(56755),e3=r.n(e2),e8=r(80909),e6=function(e){var t=e.attachment;return(0,n.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,n.jsx)("div",{className:"mb-1 flex items-center",children:(0,n.jsx)(e8.V,{content_type:t.content_type})}),(0,n.jsxs)("div",{className:"flex flex-col truncate",children:[(0,n.jsx)("div",{className:"truncate text-left",children:(0,n.jsx)(Y.Z.LabelSm,{weight:"semibold",children:t.filename})}),(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(Y.Z.LabelXs,{weight:"regular",children:e3()(t.byte_size)})})]})]})},e5=r(71068),e4=function(e){var t=e.queuedForCancellation,r=e.removeCurrentAttachment,i=e.progress,o=e.isUploading;return(0,n.jsxs)("button",{type:"button",onClick:function(e){t.current=!0,r(),e.preventDefault()},className:"border-primary bg-tertiary group absolute right-0 top-0 -m-2 flex h-[22px] w-[22px] cursor-pointer items-center justify-center rounded-full border",children:[o&&(0,n.jsx)("div",{className:"flex items-center group-hover:hidden",children:(0,n.jsx)(e5.D,{percentage:i,size:14,strokeWidth:2})}),(0,n.jsx)(G.T,{content:d.Z.t("tiptap.remove_attachment"),children:(0,n.jsx)("div",{className:l()({"hidden group-hover:block":o}),children:(0,n.jsx)(O.JO,{type:"close"})})})]})},e9=function(e){var t=e.url;return(0,n.jsx)("button",{type:"submit",className:"from-primary pointer-events-none absolute right-0 -my-2 hidden h-full items-center rounded-md bg-gradient-to-l px-1 pl-36 group-hover:flex",children:(0,n.jsx)("a",{className:"bg-primary pointer-events-auto p-2",href:t,download:!0,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(O.JO,{type:"download"})})})};function e7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function tt(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){te(o,n,i,a,l,"next",e)}function l(e){te(o,n,i,a,l,"throw",e)}a(void 0)})}}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||ti(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){if(e){if("string"==typeof e)return e7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e7(e,t)}}function to(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ta=function(e){var t,r,o,a,s,c,u=e.attachmentsForGalleryPreview,f=e.attachment,p=e.index,m=e.shouldShowEnlarged,b=(0,K.S)(),h=b.editor,y=b.setLocalAttachments,v=b.shouldScrollIntoView,g=(0,eY.T)().show,x=(0,eQ.Op)().scrollerId,j=tn((0,i.useState)(0),2),w=j[0],S=j[1],_=tn((0,i.useState)(!1),2),N=_[0],P=_[1],k=tn((0,i.useState)(!1),2),D=k[0],E=k[1],A=(0,i.useRef)(!1),T=f.image_variants||{},C=(0,i.useCallback)(function(e){y(function(t){var r=function(e){if(Array.isArray(e))return e7(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||ti(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return r[p]=e,r})},[p,y]),I=function(e){var t=e.url,r=e.filename,n=e.content_type;return tt(function(){var e,i;return to(this,function(o){switch(o.label){case 0:return[4,fetch(t)];case 1:return e=o.sent(),i=File.bind,[4,e.blob()];case 2:return[2,new(i.apply(File,[void 0,[o.sent()],r,{type:n}]))]}})})()},M=(0,i.useCallback)(function(){return tt(function(){var e,t;return to(this,function(r){switch(r.label){case 0:if(E(!0),t=f.file)return[3,2];return[4,I({url:f.url,filename:"".concat(f.id,".").concat(f.content_type.split("/")[1]),content_type:f.content_type})];case 1:t=r.sent(),r.label=2;case 2:return e=t,new eK.TX(e,(0,et.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(t){A.current&&(e.abort(),E(!1)),S(t.loaded/t.total*100)})}}).create(function(e,t){if(e)throw Error("Direct upload failed: ".concat(String(e)));var r,n,i=(0,et.Gd)({signed_id:t.signed_id,filename:t.filename});C((r=tr({},t),n=n={url:i,uploaded:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)),E(!1)}),[2]}})})()},[f,C]);(0,i.useEffect)(function(){f.toUpload&&!D&&M()},[f,D,M]);var L=eG.$.isImage(f.content_type),R=!!(null==(t=f.metadata)?void 0:t.voice_message),F=eG.$.isNativelySupportedVideo(f.content_type),$=(0,eG.c)(f.content_type),U=f.url;h.isEditable||(U=m?null!=(s=T.small)?s:f.url:null!=(c=T.thumbnail)?c:f.url),U=null!=U?U:null==f?void 0:f.url;var X=L||F;return(0,n.jsxs)("button",{type:"button",onClick:function(){return!h.isEditable&&$&&g({attachments:u,startIndex:u.findIndex(function(e){return e.url==f.url})})},className:l()("relative flex max-w-[264px] cursor-pointer",{"h-[60px] min-w-[150px] px-4 py-2":!X&&!R,"h-[60px] w-[60px]":X&&!m&&!R,"h-[200px] w-auto min-w-[150px]":X&&m&&!R,"border-tertiary bg-tertiary group gap-2 rounded-md border":!R}),children:[h.isEditable&&(0,n.jsx)(e4,{isUploading:D,progress:w,queuedForCancellation:A,removeCurrentAttachment:function(){y(function(e){return e.filter(function(e,t){return t!==p})})}}),F&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e1.W,{src:f.url,type:f.content_type,poster:null==f||null==(r=f.image_variants)?void 0:r.thumbnail,className:"h-full rounded-md border object-cover",controls:!1,preload:"none"}),m?(0,n.jsxs)("div",{className:"absolute bottom-2 left-2 flex items-center rounded bg-black/50 py-0.5 pr-2",children:[(0,n.jsx)(O.JO,{type:"12-play",size:12,className:"h-4 w-4 text-white"}),(0,n.jsx)(Y.Z.BodyXs,{color:"text-white",weight:"font-medium",children:(0,d.t)("tiptap.video")})]}):(0,n.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center rounded bg-black/50 px-0.5 py-1",children:(0,n.jsx)(O.JO,{type:"12-play",size:12,className:"text-white"})})]}),!$&&!h.isEditable&&!R&&(0,n.jsx)(e9,{url:f.url}),L&&(0,n.jsx)("img",tr({loading:"eager",alt:(0,d.t)("tiptap.attachment_previews.image"),className:l()("rounded-md object-cover",N?"border-primary h-full w-full border":"hidden"),src:U},{onLoad:function(){P(!0),v&&eC(x)},onError:function(){P(!0)}})),R&&(0,n.jsx)(e0.z,{src:f.url,controls:["play","progress","current-time"],isVoiceMessage:R,transcriptionId:null==(o=f.metadata)?void 0:o.transcript_id,transcriptionPreview:null==(a=f.metadata)?void 0:a.transcript_preview}),!$&&!R&&(0,n.jsx)(e6,{attachment:f})]})},tl=function(e){var t=e.attachmentsList,r=e.linkMarks,i=(0,K.S)().editor;if(!t.length)return null;var o=1===t.length,a=0===r.length,l=t.filter(function(e){return(0,eG.c)(e.content_type)});return(0,n.jsx)("div",{className:"flex items-center gap-2",children:t.map(function(e,t){return(0,n.jsx)(ta,{index:t,attachmentsForGalleryPreview:l,attachment:e,shouldShowEnlarged:!i.isEditable&&o&&a},e.filename)})})},ts=r(1168),tc=function(e){var t=e.url,r=e.meta,i=t.replace(/(^\w+:|^)\/\//,"");return(0,n.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"border-primary flex min-w-[150px] max-w-[300px] shrink-0 flex-col rounded-md border px-4 py-3 md:max-w-[246px]",children:[(0,n.jsx)("div",{className:"text-dark mb-0.5 truncate text-sm font-medium",children:r.title}),r.description&&(0,n.jsx)("div",{className:"text-light mb-1.5 line-clamp-2 flex-1 text-xs",children:r.description}),(0,n.jsxs)("div",{className:"text-default flex items-center",children:[r.favicon?(0,n.jsx)("img",{loading:"eager",alt:"",src:r.favicon,className:"mr-1.5 h-4 w-4"}):(0,n.jsx)(O.JO,{type:"12-globe",size:12,className:"mr-1 !w-3"}),(0,n.jsx)("div",{className:"flex-1 truncate text-xs",children:i})]})]})},tu=r(8683),td=r(98363);function tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tp(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var tm=function(e){var t,r=e.message,i=(0,V.N3)(),o=(t=(0,b.k)(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tf(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tf(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1],s=(0,K.S)()||{},c=s.chatRoomAccessArr,u=void 0===c?[]:c,f=s.editor,p=r.sender,m=r.data,h=m.url,y=m.chat_room_uuid,v=m.message_body,g=m.sent_at,x=m.attachments_count,j=void 0===x?0:x,O=r.sender.community_member_id,w=r.id,S=(0,tu.TF)(g),_=function(){var e;return(e=function(){var e,t,r,n,o,a,s;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:if(e=u.length>0,t=!f.isEditable&&!e,r=O===(null==i?void 0:i.id),n=function(){return!!f.isEditable||en(w,u)},o=function(){return ei({chatRoomUuid:y,messageId:w})},!r)return[3,1];return a=!0,[3,5];case 1:if(!t)return[3,3];return[4,o()];case 2:return s=c.sent(),[3,4];case 3:s=n(),c.label=4;case 4:a=s,c.label=5;case 5:return a?window.open(h,"_blank","noreferrer"):l(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tp(o,n,i,a,l,"next",e)}function l(e){tp(o,n,i,a,l,"throw",e)}a(void 0)})})()},N=(0,W.k)(function(){_()});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",onClick:_,onKeyDown:N,className:"border-primary focus-visible:border-secondary flex w-full min-w-[150px] max-w-[300px] shrink-0 cursor-pointer flex-row space-x-3 rounded-md border px-4 py-3 text-left",children:[(0,n.jsx)(td.s,{src:p.avatar_url,name:p.name,size:"9"}),(0,n.jsxs)("div",{className:"max-w-[calc(100%-48px)]",children:[(0,n.jsxs)("div",{className:"mb-0.5 flex flex-row space-x-2 truncate",children:[(0,n.jsx)(Y.Z.LabelSm,{weight:"semibold",children:p.name}),(0,n.jsx)(Y.Z.BodyXs,{color:"text-light",children:S})]}),v&&(0,n.jsx)("div",{className:"text-default line-clamp-2 flex-1",children:v}),j>0&&(0,n.jsx)(Y.Z.BodySm,{color:"text-light",children:(0,d.t)("bookmarks.attachments_count",{count:j})})]})]}),(0,n.jsx)(J.c,{isOpen:a,title:(0,d.t)("messaging.actions.unable_to_open_link.title"),onConfirm:l,confirmVariant:"danger",confirmText:(0,d.t)("close"),children:(0,n.jsx)(Y.Z.BodyMd,{children:(0,d.t)("messaging.actions.unable_to_open_link.description")})})]})},tb=function(e){var t=e.linkMarks,r=e.messageAttachments,i=e.hasAttachments,o=e.setHasLinks,a=(0,s.uniq)(t.map(function(e){var t;return null==e||null==(t=e.attrs)?void 0:t.href})),l=(0,ec.useQuery)(et.av.richTextFields.unfurlURLs({params:{urls:a}}),{enabled:a.length>0,keepPreviousData:!0,initialData:[],onSuccess:function(e){o(e.filter(function(e){return a.includes(e.url)&&d(e)}).length>0)}}),c=l.data,u=l.isLoading,d=function(e){return e.title||e.description},f=(void 0===c?[]:c).filter(function(e){return a.includes(e.url)&&d(e)});return!(f.length||r.length)||u?null:(0,n.jsxs)("div",{className:(0,ts.A)("flex gap-2",{"flex-wrap":!i}),children:[r.map(function(e){return(0,n.jsx)(tm,{message:e},e.id)}),f.map(function(e){var t=e.url,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["url"]);return(0,n.jsx)(tc,{url:t,meta:r},t)})]})};function th(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ty(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tg=function(e){var t=e.editor,r=e.type;try{var n=t.getJSON().content,i=[];return((null==n?void 0:n.filter(function(e){return"paragraph"==e.type}))||[]).forEach(function(e){var t;null==e||null==(t=e.content)||t.forEach(function(e){"hardBreak"!==e.type&&e.marks&&e.marks.forEach(function(e){var t;e.type==r&&(i=(t=i,function(e){if(Array.isArray(e))return th(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return th(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return th(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))})})}),i}catch(e){return console.error("Error while fetching marks by type ".concat(r),e),[]}},tx=function(e){var t=e.marks,r=!1;return{marks:t.map(function(e){return"link"==e.type&&"_blank"!==e.attrs.target&&"_self"!==e.attrs.target?(r=!0,tv(ty({},e),{attrs:tv(ty({},e.attrs),{target:"_blank"})})):e}),isMarkUpdated:r}},tj=function(e){var t=e.editor;try{var r=!1,n=t.getJSON().content,i=(void 0===n?[]:n).map(function(e){if("paragraph"==e.type){var t,n=null==(t=e.content)?void 0:t.map(function(e){if("text"===e.type&&e.marks){var t=tx({marks:e.marks}),n=t.marks,i=t.isMarkUpdated;return r=r||i,tv(ty({},e),{marks:n})}return e});return tv(ty({},e),{content:n})}return e});r&&t.commands.setContent(i)}catch(e){console.error("Error while updating link marks",e)}};function tO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tw=function(){var e,t=(0,K.S)(),r=t.editor,o=t.attachments,a=t.localAttachments,s=t.messageAttachments,c=r.isEditable?void 0===a?[]:a:void 0===o?[]:o,u=tg({editor:r,type:"link"}),d=Number(u.length),f=Number(null==c?void 0:c.length),p=Number(null==s?void 0:s.length),m=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tO(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tO(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],h=m[1],y=f>0,v=b&&y;if((0,i.useEffect)(function(){h(d>0)},[d]),!y&&!b&&!(p>0))return null;var g=d+f+p;return(0,n.jsxs)("div",{className:l()("flex items-center gap-x-2 pb-2",r.isEditable?"pt-4":"pt-2",{"overflow-x-auto":g>2}),children:[(0,n.jsx)(tl,{attachmentsList:c,linkMarks:u}),v&&(0,n.jsx)("div",{className:"border-primary mx-0.5 h-16 w-px rounded-lg border-l-2"}),(0,n.jsx)(tb,{linkMarks:u,setHasLinks:h,messageAttachments:s,hasAttachments:y})]})},tS={content:[{content:[],type:"paragraph"}],type:"doc"},t_=r(77818),tN=function(e,t){var r=e.replace(/\r\n?|\n/g,"\n").split("\n"),n=[];r.forEach(function(e,i){if(e.length>0){var o,a={type:"paragraph",content:[{type:"text",text:e}]};(null==(o=r[i+1])?void 0:o.length)==0&&a.content.push({type:"hardBreak"}),n.push(t_.NB.fromJSON(t.doc.type.schema,a))}});var i=t_.HY.from(n);return t_.p2.maxOpen(i)};function tP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tk(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tD=function(e){var t=e.editor;t.isEmpty||tj({editor:t})},tE=function(e){try{if(!e)return;var t=e.content.map(function(e){if("paragraph"==e.type){var t,r=null==(t=e.content)?void 0:t.filter(function(e){return"text"!==e.type||""!==e.text});return tk(tP({},e),{content:r})}return e});return tk(tP({},e),{content:t})}catch(e){console.error("Error while sanitizing jsonContent",e)}},tA=function(e){if(!e||e.isEmpty)return!0;var t=e.getJSON();if(!t)return!0;var r=(t||{}).content;return!r||!r.some(function(e){if("paragraph"===e.type){var t;return null==(t=e.content)?void 0:t.some(function(e){return"mention"===e.type||"entity"===e.type||"message"===e.type})}})},tT=r(83461);function tC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||tL(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tL(e,t){if(e){if("string"==typeof e)return tC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tC(e,t)}}var tR=function(e){var t=e.initialValue,r=tM((0,b.k)(!1),3),n=r[0],o=r[2],a=tM((0,i.useState)(void 0===t?{}:t),2),l=a[0],s=a[1],c=tM((0,i.useState)([]),2),u=c[0],d=c[1];return{isFocused:n,setIsFocused:o,localSgidToObjectMap:l,setLocalSgidToObjectMap:s,addToLocalSgidToObjectMap:function(e){var t=e.sgid,r=e.object;s(function(e){var n,i;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tI(e,t,r[t])})}return e}({},e),i=null!=(i=tI({},t,r))?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n})},messageAttachments:u,setMessageAttachments:d,addMessageAttachments:function(e){d(function(t){return t.some(function(t){return t.id===e.id})?t:((function(e){if(Array.isArray(e))return tC(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tL(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},removeMessageAttachments:function(e){d(function(t){return e?t.filter(function(t){return t.id!==e.id}):t})}}};function tF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t$(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function tU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||tz(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tB(e){return function(e){if(Array.isArray(e))return tF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tz(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tz(e,t){if(e){if("string"==typeof e)return tF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tF(e,t)}}var tq={chatParticipantsCount:0,disableGroupMentions:!1,isChatAdminOrModerator:!1,isDirectMessaging:!1,isThread:!1,isTyping:!1},tZ=function(e){var t,r,a,h,y=e.autofocus,v=e.chatProps,g=void 0===v?tq:v,O=e.chatRoomAccessArr,S=e.className,_=e.disabled,N=e.editable,P=void 0===N||N,k=e.editedAt,D=e.editorClassName,E=e.editorRef,A=e.isChatSpace,T=e.isLiveStream,C=e.isUpdate,I=void 0!==C&&C,M=e.maxLength,L=e.menuBarComponent,R=e.menubarProps,F=void 0===R?{}:R,$=e.messageBoxClassName,U=e.onBlur,X=e.onChange,B=e.onDelete,z=e.onFocus,q=e.onSubmit,Z=e.placeholder,H=void 0===Z?(0,d.t)("message_placeholder"):Z,V=e.portalTargetId,W=e.rich_text_body,J=e.shouldDisableEntities,G=e.shouldDisableMentions,Q=e.shouldRefetch,Y=e.shouldScrollIntoView,ee=e.shouldShowPreviewBlocks,et=void 0===ee||ee,er=e.shouldShowTextModifiersMenu,en=e.showMenuBar,ei=e.spaceId,eo=e.submitOnEnter,ea=e.type,el=void 0===ea?"chat":ea,es=e.value,ec=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["autofocus","chatProps","chatRoomAccessArr","className","disabled","editable","editedAt","editorClassName","editorRef","isChatSpace","isLiveStream","isUpdate","maxLength","menuBarComponent","menubarProps","messageBoxClassName","onBlur","onChange","onDelete","onFocus","onSubmit","placeholder","portalTargetId","rich_text_body","shouldDisableEntities","shouldDisableMentions","shouldRefetch","shouldScrollIntoView","shouldShowPreviewBlocks","shouldShowTextModifiersMenu","showMenuBar","spaceId","submitOnEnter","type","value"]),eu=tX((0,b.k)(),2),ed=eu[0],ef=eu[1],ep=tX((0,b.k)(),2),em=ep[0],eb=ep[1],eh=tX((0,i.useState)(!1),2),ey=eh[0],ev=eh[1],eg="workflow"===el,ex=(P&&eg?{body:(null==es?void 0:es.body)||es,sgids_to_object_map:(null==es?void 0:es.localSgidToObjectMap)||{}}:void 0===W?{}:W)||{},ej=ex.body,eO=ex.attachments,eS=void 0===eO?[]:eO,e_=ex.sgids_to_object_map,eN=void 0===e_?{}:e_,eP=(0,j.O)().arePopupsVisible,ek=tR({initialValue:I||eg?eN:{}}),eD=ek.isFocused,eE=ek.setIsFocused,eA=ek.localSgidToObjectMap,eT=ek.addToLocalSgidToObjectMap,eC=ek.setLocalSgidToObjectMap,eM=ek.messageAttachments,eL=ek.addMessageAttachments,eR=ek.removeMessageAttachments,eF=ek.setMessageAttachments,e$=(0,i.useRef)(eA);e$.current=eA;var eU=tX((0,i.useState)(!1),2),eX=eU[0],eB=eU[1],ez=tX((0,i.useState)(P?eS:[]),2),eq=ez[0],eZ=ez[1],eH=!!k,eV=(0,s.debounce)(function(e){(0,s.isFunction)(X)&&X({body:e.getJSON(),localSgidToObjectMap:e$.current})},500),eW=(0,i.useMemo)(function(){return eg?tE((null==es?void 0:es.body)||es||ej):tE(es||ej)},[eg,es,ej]),eG=(0,o.jE)({editable:P,content:eW,onUpdate:function(e){var t=e.editor;tD({editor:t}),eV(t)},onFocus:function(){eE(!0),(0,s.isFunction)(z)&&z()},onBlur:function(){eE(!1),(0,s.isFunction)(U)&&U()},autofocus:void 0!==y&&y,extensions:ew({placeholder:H,maxLength:M,menubarProps:F,type:el,shouldDisableEntities:void 0!==J&&J,shouldDisableMentions:void 0!==G&&G,portalTargetId:V}),editorProps:{transformPastedHTML:function(e){var t=(0,tT.n)(e);return t.length&&(0,tT.S)({sgids:t,setLocalSgidToObjectMap:eC}),e},clipboardTextParser:tN,attributes:{class:l()(D,"tiptap-editor")}}}),eK=eq.some(function(e){return e.progress>=0}),eQ=function(){var e,t;return(null==eG||null==(t=eG.state)||null==(e=t.doc)?void 0:e.textContent.trim().length)===0},eY=function(){return tA(eG)&&((null==eG?void 0:eG.isEmpty)||eQ())},e0=function(){null==eG||eG.commands.clearContent(),eZ([]),eC({}),eF([])},e1=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e=function(){var e,r,n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if((e=eY()&&!eq.length)&&!I||eK)return[2];if(e&&I)return[2,null==B?void 0:B()];if(r=Object.values(eA).some(function(e){return"group_mention"==e.type}),!t&&r)return ef(),[2];if(ey)return eb(),[2];if(!(0,s.isFunction)(q))return[3,5];n=q({body:eY()?tS:null==eG?void 0:eG.getJSON(),attachments:eq.map(function(e){return e.signed_id}),localAttachments:eq,localSgidToObjectMap:eA}),i.label=1;case 1:return i.trys.push([1,3,4,5]),eB(!0),[4,n];case 2:return i.sent(),[3,5];case 3:return console.error(i.sent()),[3,5];case 4:return eB(!1),e0(),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){t$(o,n,i,a,l,"next",e)}function l(e){t$(o,n,i,a,l,"throw",e)}a(void 0)})})()};(0,u.y1)("enter",function(){e1()},{enabled:eD&&(void 0===eo||eo)&&!eP&&!(0,m.P4)()&&!function(e){if(!e)return!1;var t=e.getText();return/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/.test(t)}(eG),enableOnContentEditable:!0},[eG,eq,eP,eD,ey]);var e2=function(e){return eZ(function(t){return tB(t).concat(tB(e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,byte_size:e.size,content_type:e.type,toUpload:!0,progress:0}})))})},e3=(0,c.uI)({onDrop:e2,noClick:!0}),e8=e3.getRootProps,e6=e3.getInputProps,e5=e3.isDragActive,e4=e3.open,e9=e6();if((0,i.useEffect)(function(){Q&&!P&&eG&&eG.commands.setContent(eW),!P&&eH&&eG&&"addEditedLabelNode"in eG.commands&&"function"==typeof eG.commands.addEditedLabelNode&&requestAnimationFrame(function(){eI(eG)||eG.chain().focus("end").addEditedLabelNode().run()})},[eW,eG,Q,eH,P]),!eG)return null;E&&(E.current=eG);var e7=(null==eG||null==(h=eG.storage)||null==(a=h.characterCount)?void 0:a.characters())||0,te="".concat(String(e7),"/").concat(String(M)),tt=g.isTyping;return(0,n.jsxs)(K.i.Provider,{value:{addMessageAttachments:eL,addToLocalSgidToObjectMap:eT,attachments:eS,chatProps:g,chatRoomAccessArr:void 0===O?[]:O,editedAt:k,editor:eG,isUpdate:I,localAttachments:eq,localSgidToObjectMap:eA,messageAttachments:eM,portalTargetId:V,removeMessageAttachments:eR,setLocalAttachments:eZ,setShouldShowPrivateMessageConfirmationOnSubmit:ev,sgidToObjectMap:eN,shouldRefetch:Q,shouldScrollIntoView:Y,spaceId:ei,type:el},children:[eG.isEditable?(0,n.jsxs)("div",(t=tU({className:l()("text-dark relative flex flex-col px-4 py-3 text-sm transition-colors",void 0!==A&&A?"md:mb-6":"mb-6","bg-secondary-dark focus-within:bg-primary hover:bg-primary active:bg-primary hover:border-dark border-hover rounded-xl border active:border-very-dark focus-within:border-very-dark hover:focus-within:border-very-dark",{"border-none":e5,"border-light":!eY(),"pointer-events-none opacity-70":void 0!==_&&_||eX,"!mb-0":tt,"!bg-primary":I},S)},ec,e8()),r=r={onPaste:function(e){var t,r;(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&(e.preventDefault(),e2(Array.from(e.clipboardData.files)))},"data-testid":"tiptap-editor",children:[e5&&(0,n.jsx)(w,{}),(0,n.jsx)("input",tU({},e9)),(0,n.jsxs)("div",{className:l()("chat-message-word-wrap max-h-[300px] cursor-text overflow-auto",$),children:[(0,n.jsx)(o.kg,{editor:eG}),M&&(0,n.jsx)("div",{className:"text-gray-400",children:te})]}),eG&&(void 0===er||er)&&(0,n.jsx)(x,{editor:eG,allowBubbleMenuOverflow:"chat"!==el}),et&&(0,n.jsx)(tw,{}),(void 0===en||en)&&(0,n.jsx)(void 0===L?eJ:L,tU({isSubmitting:eX,isUploading:eK,openFilePicker:e4,editor:eG,handleSubmit:e1,editorHasNoContent:function(){return!I&&eY()&&!eq.length},isFocused:eD,isUpdate:I,isLiveStream:void 0!==T&&T,portalTargetId:V},F))]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)):(0,n.jsxs)(n.Fragment,{children:[!eY()&&(0,n.jsx)(o.kg,{editor:eG}),et&&!I&&(0,n.jsx)(tw,{})]}),(0,n.jsx)(f.s,{shouldShowConfirmationModal:ed,toggleConfirmationModal:ef,handleSubmit:e1,chatParticipantsCount:g.chatParticipantsCount}),em&&(0,n.jsx)(p.u,{shouldShowPrivateMessageConfirmationModal:em,togglePrivateMessageConfirmationModal:eb,handleSubmit:e1,setShouldShowPrivateMessageConfirmationOnSubmit:ev,shouldShowPrivateMessageConfirmationOnSubmit:ey})]})}},1943:function(e,t,r){r.d(t,{O:()=>n});var n=(0,r(64100).Ue)(function(e){return{arePopupsVisible:!1,setPopupsVisible:function(t){return e({arePopupsVisible:t})}}})},4614:function(e,t,r){r.d(t,{$U:()=>i,F_:()=>s,H9:()=>o,Ln:()=>n,Om:()=>a,Z9:()=>l});var n=function(e){return{body:{type:"doc",content:e.bodyContent},inline_attachments:e.inlineAttachments}},i=function(e){return{type:"text",text:e.text}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.content;return{type:"paragraph",content:void 0===t?[]:t}},a=function(e){return{type:"file",attrs:{signed_id:e.file.signed_id}}},l=function(e){return o({content:[i({text:e.text})]})},s=function(e){return{type:"mention",attrs:{sgid:e.sgid}}}},44830:function(e,t,r){r.d(t,{$:()=>o,c:()=>a});var n=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},i=function(e){return["video/mp4","video/mpeg","video/ogg"].includes(e)},o={isImage:n,isVideo:function(e){return e.startsWith("video/")},isNativelySupportedVideo:i,isAudio:function(e){return["audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(e)},isPDF:function(e){return e.startsWith("application/pdf")}},a=function(e){return n(e)||i(e)}},5606:function(e,t,r){r.d(t,{D:()=>n});var n=function(e){return(e?document.getElementById(e):null)||document.body}},83461:function(e,t,r){r.d(t,{S:()=>l,n:()=>a});var n=r(93199),i=r(13532);function o(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var a=function(e){return Array.from(new DOMParser().parseFromString(e,"text/html").querySelectorAll("[data-sgid]")).map(function(e){return String(e.getAttribute("data-sgid"))})},l=function(e){var t,r=e.sgids,a=e.setLocalSgidToObjectMap;return(t=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,n.UT)(i.av.richTextFields.fetchSgidRecords({params:{sgids:r}}))];case 1:return e=t.sent(),a(function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t,e)}),[3,3];case 2:return console.error(t.sent()),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function l(e){o(a,n,i,l,s,"next",e)}function s(e){o(a,n,i,l,s,"throw",e)}l(void 0)})})()}},26703:function(e,t,r){r.d(t,{k:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return{duration:[200,150],arrow:!1,placement:e,theme:"text-modifiers",animation:"shift-away-subtle",maxWidth:"none",popperOptions:{strategy:"fixed",modifiers:[{name:"preventOverflow",options:{boundary:t?"clippingParents":"scrollParent",rootBoundary:"viewport",altAxis:!0,altBoundary:!0,tether:!1,padding:8}}]},interactive:!0,interactiveBorder:20,interactiveDebounce:75,trigger:"manual",hideOnClick:!1,delay:[100,0]}}},87498:function(e,t,r){r.d(t,{u:()=>c});var n=r(85893),i=r(84326),o=r(39905),a=r(51466),l=r(34519),s=r(93920);function c(e){var t=e.inputRef,r=e.submitButtonVariant,c=e.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.u_.Body,{children:(0,n.jsx)(a.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"url",label:(0,i.t)("tiptap.extensions.link.link"),children:(0,n.jsx)(s.R,{name:"url",ref:t})})}),(0,n.jsxs)(l.u_.Footer,{className:"px-5 md:px-8",children:[(0,n.jsx)(o.z,{full:!0,type:"submit",variant:void 0===r?"primary":r,children:(0,i.t)("tiptap.extensions.link.save")}),c]})]})}},45031:function(e,t,r){r.d(t,{b:()=>a});var n=r(85893),i=r(84326),o=r(34519);function a(e){var t=e.isEditable,r=e.onClose;return(0,n.jsxs)(o.u_.Header,{children:[(0,n.jsx)(o.u_.Title,{className:"text-center",size:"md",children:t?(0,i.t)("tiptap.extensions.link.edit"):(0,i.t)("tiptap.extensions.link.add")}),(0,n.jsx)(o.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(o.u_.CloseButton,{onClick:r})})]})}},48874:function(e,t,r){r.d(t,{R:()=>a});var n=r(85893),i=r(84326),o=r(39905);function a(e){var t=e.isEditable,r=e.onClick;return void 0!==t&&t?(0,n.jsx)("div",{className:"mt-4 flex justify-end",children:(0,n.jsx)(o.z,{full:!0,variant:"secondary",type:"button",onClick:r,children:(0,i.t)("tiptap.extensions.link.remove")})}):null}},34982:function(e,t,r){r.d(t,{K:()=>m});var n=r(85893),i=r(67294),o=r(57105),a=r(51466),l=r(34519),s=r(87498),c=r(45031),u=r(48874),d=r(78885),f=function(e){var t,r=e.editor,f=e.isAdminUsageContext,p=(0,o.dd)(),m=r.isActive("link"),b=(0,i.useRef)(null),h=null==(t=r.getAttributes("link"))?void 0:t.href;return(0,n.jsxs)(l.u_,{isOpen:p.visible,onClose:p.hide,initialFocus:b,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(c.b,{isEditable:m,onClose:p.hide}),(0,n.jsx)(a.l,{onSubmit:function(e){var t=e.url;r.chain().focus().extendMarkRange("link").setLink({href:t}).run(),p.hide()},defaultValues:{url:h},validationSchema:d.T,autoComplete:"off",children:(0,n.jsx)(s.u,{inputRef:b,submitButtonVariant:void 0!==f&&f?"circle":"primary",children:(0,n.jsx)(u.R,{isEditable:m,onClick:function(){r.chain().focus().extendMarkRange("link").unsetLink().run(),p.hide()}})})})]})]})},p=o.gk.create(function(e){var t=e.editor,r=e.isAdminUsageContext;return(0,n.jsx)(f,{editor:t,isAdminUsageContext:r})}),m=function(){return(0,o.dd)(p)}},78885:function(e,t,r){r.d(t,{T:()=>o});var n=r(65978),i=r(84326),o=n.Ry().shape({url:n.Vo(function(e){return e.startsWith("mailto:")?n.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,(0,i.t)("link_url_invalid")).required((0,i.t)("link_url_required")):n.Z_().url((0,i.t)("link_url_invalid")).required((0,i.t)("link_url_required"))})})},44815:function(e,t,r){r.d(t,{t:()=>a});var n=r(67294),i=r(96486);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t,r=e.optionsCount,a=void 0===r?0:r,l=e.onEnter,s=(t=(0,n.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1];return(0,n.useEffect)(function(){var e=function(e){if(["ArrowDown","ArrowUp","Enter"].includes(e.key)&&("Enter"!==e.key||!e.shiftKey))switch(e.preventDefault(),e.key){case"ArrowDown":u((c+1)%a);break;case"ArrowUp":u((c-1+a)%a);break;case"Enter":(0,i.isFunction)(l)&&l(c)}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[c,l,a]),{activeIndex:c,setActiveIndex:u}}},2038:function(e,t,r){r.d(t,{Y:()=>w});var n=r(85893),i=r(67294),o=r(84326),a=r(57105),l=r(85924),s=r(41553),c=r(34519),u=r(96486),d=r(65978),f=r(39905),p=r(51466),m=r(41420),b=r(91152),h=r(71863),y=r(93920),v=r(89808),g="settings.emails.builder";function x(e){var t=e.inputRef,r=e.editor,i=e.range,a=e.onClose,l=e.defaultValues,s=e.isWithinEmailEditor,c=!!l.label;return(0,n.jsxs)(p.l,{defaultValues:l,onSubmit:function(e){r.chain().focus().insertContentAt(i,[{type:"cta",attrs:s?e:(0,u.omit)(e,"text_color")},!c&&{type:"hardBreak"}].filter(Boolean)).run(),a()},validationSchema:d.Ry().shape(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:d.Z_().required((0,o.t)([g,"errors.label_is_required"])),url:d.Z_().transform(function(e,t){return(0,v.R)(t)}).url((0,o.t)([g,"errors.url_is_required"])).required((0,o.t)([g,"errors.url_is_required"])),color:d.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,o.t)([g,"errors.color_is_required"])).required((0,o.t)([g,"errors.color_is_required"]))},s&&{text_color:d.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,o.t)([g,"errors.color_is_required"])).required((0,o.t)([g,"errors.color_is_required"]))})),shouldStopPropagation:!0,noValidate:!0,children:[(0,n.jsxs)("div",{className:"flex flex-col pb-4",children:[(0,n.jsx)(h.c,{name:"label",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.label"),required:!0,children:(0,n.jsx)(b.y,{ref:t,name:"label",label:(0,o.t)("email_editor.cta.label"),placeholder:(0,o.t)("email_editor.cta.label"),autocomplete:"off"})}),(0,n.jsx)(h.c,{name:"url",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.url"),required:!0,children:(0,n.jsx)(y.R,{label:(0,o.t)("email_editor.cta.url"),name:"url",autocomplete:"off"})}),(0,n.jsx)(h.c,{name:"color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.color"),required:!0,children:(0,n.jsx)(m.s,{name:"color"})}),s&&(0,n.jsx)(h.c,{name:"text_color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.text_color"),required:!0,children:(0,n.jsx)(m.s,{name:"text_color"})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-x-3 pb-5 pt-2.5",children:[(0,n.jsx)(f.z,{type:"button",onClick:a,variant:"secondary-light",children:(0,o.t)("cancel")}),(0,n.jsx)(f.z,{type:"submit",variant:"circle",children:(0,o.t)("email_editor.cta.save")})]})]})}var j=function(e){var t,r,u,d,f,p,m,b=e.editor,h=e.range,y=e.isWithinEmailEditor,v=(0,a.dd)(),g=(0,l.TC)(),j=(0,i.useRef)(null);if(!b)return null;var O=null!=(p=g.brandColor.light)?p:"#000000",w=null!=(m=g.brandTextColor.light)?m:"#FFFFFF",S=(r=(t=b.isActive("cta")?b.getAttributes("cta"):{}).label,u=t.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:void 0===r?"":r,url:void 0===u?"":u,color:void 0===(d=t.color)?O:d,text_color:void 0===(f=t.text_color)?w:f},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["label","url","color","text_color"]))),_=!!S.label;return(0,n.jsxs)(c.u_,{isOpen:v.visible,onClose:v.remove,initialFocus:j,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsxs)(c.u_.Content,{children:[(0,n.jsxs)(c.u_.Header,{children:[(0,n.jsx)(c.u_.Title,{size:"sm",children:(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:_?(0,o.t)("email_editor.cta.edit_title"):(0,o.t)("email_editor.cta.title")})}),(0,n.jsx)(c.u_.HeaderActions,{children:(0,n.jsx)(c.u_.CloseButton,{onClick:v.remove})})]}),(0,n.jsx)(c.u_.Body,{children:(0,n.jsx)(x,{inputRef:j,range:h,editor:b,onClose:v.remove,defaultValues:S,isWithinEmailEditor:void 0!==y&&y})})]})]})},O=a.gk.create(function(e){var t=e.editor,r=e.range,i=e.isWithinEmailEditor;return(0,n.jsx)(j,{editor:t,range:r,isWithinEmailEditor:i})}),w=function(){return(0,a.dd)(O)}},35218:function(e,t,r){r.d(t,{E:()=>d});var n=r(88897),i=r(55786),o=r(83311),a=function(){return function(e){var t=e.tr,r=e.state,n=e.dispatch;try{var i=(0,o.GJ)(r.doc,r.selection.$from.pos,-1);if(null==i)return!1;return t.join(i,2),n&&n(t),!0}catch(e){return!1}}},l=function(e,t){for(var r=t.selection.$from,i=(0,n.jo)(e,t.schema),o=null,a=r.depth,l=r.pos,s=null;a>0&&null===s;)r.node(a).type===i?s=a:(a-=1,l-=1);return null===s?null:{$pos:t.doc.resolve(l),depth:s}},s=function(e,t){var r,n=t.selection.$anchor,i=t.doc.resolve(n.pos-2);return 0!==i.index()&&(null==(r=i.nodeBefore)?void 0:r.type.name)===e},c=function(e){var t=e.selection,r=t.$from,n=t.$to;return!(r.parentOffset>0||r.pos!==n.pos)},u=function(e,t,r){if(!r)return!1;var i=(0,n.jo)(e,t.schema),o=!1;return r.descendants(function(e){e.type===i&&(o=!0)}),o},d=i.Z.extend({addCommands:function(){return{joinListItemBackward:a}},addKeyboardShortcuts:function(){var e,t,r,i,o=this,a=null==(i=this.parent)?void 0:i.call(this);return(e=this.options)&&"string"==typeof e.type&&"chat"===this.options.type&&(null==a||delete a.Enter),t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={Backspace:function(){if(o.editor.commands.undoInputRule())return!0;var e,t=o.editor.state.selection.$from.node(),r=(null==t||null==(e=t.content)?void 0:e.size)===0;if((0,n.Ig)(o.editor.state,o.name)&&r)return o.editor.commands.lift(o.name),!0;if(!c(o.editor.state))return!1;var i=l(o.name,o.editor.state);if(!i){var a=o.editor.state.doc.resolve(o.editor.state.selection.$from.pos-2).nodeBefore;if((null==a?void 0:a.type.name)!==o.name||!r)return!1;throw Error("ListItem error (intentional)")}var d=o.editor.state.doc.resolve(i.$pos.pos-2).node(i.depth),f=u(o.name,o.editor.state,d);return!s(o.name,o.editor.state)||f||r?o.editor.chain().liftListItem(o.name).run():o.editor.commands.joinListItemBackward(o.name)}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}})},17905:function(e,t,r){r.d(t,{E:()=>b});var n=r(85893),i=r(84326),o=r(39905),a=r(51466),l=r(21804),s=r(88767),c=r(57105),u=r(93199),d=r(13532),f=r(60878),p=function(e){var t=e.editor,r=e.range,n=e.addToLocalSgidToObjectMap,o=(0,f.pm)(),a=(0,c.dd)();return(0,s.useMutation)(function(e){return(0,u.Cu)(d.av.richTextFields.createOembed({params:{url:e}}))},{onSuccess:function(e){if(!(null==e?void 0:e.oembed))return o.error((0,i.t)("courses.edit.lesson.embed_failed"));t.chain().focus().insertContentAt(r,{type:"embed",attrs:{sgid:e.sgid}}).run(),n({sgid:e.sgid,object:e.oembed}),a.remove()},onError:function(e,n){"string"==typeof n&&(t.chain().focus().insertContentAt(r,{type:"paragraph",content:[{type:"text",text:n,marks:[{type:"link",attrs:{href:n,target:"_blank"}}]}]}).run(),a.remove())}})},m=r(41553),b=function(e){var t=e.addToLocalSgidToObjectMap,r=e.editor,s=e.range,c=e.inputRef,u=e.provider,d=p({addToLocalSgidToObjectMap:t,editor:r,range:s});return(0,n.jsx)(a.l,{onSubmit:function(e){var t=e.url;return d.mutate(t)},defaultValues:{url:""},validationSchema:(0,l.o)(),autoComplete:"off",children:(0,n.jsxs)("div",{className:"mb-6 flex h-full flex-col items-center rounded-md",role:"tabpanel",children:[(0,n.jsx)(a.l.Item,{name:"url",fullWidth:!0,hideBorder:!0,hideLabel:!0,hideDescription:!0,className:"!pt-0",placeholder:(0,i.t)("courses.edit.lesson.embed_placeholder"),children:(0,n.jsx)(a.l.Input,{ref:c})}),(0,n.jsxs)("div",{className:"mt-4 text-center",children:[(0,n.jsx)(o.z,{disabled:d.isLoading,type:"submit",variant:"circle",children:d.isLoading?(0,i.t)("courses.edit.lesson.embedding"):(0,i.t)("courses.edit.lesson.embed_media")}),(0,n.jsx)("div",{className:"mt-2",children:u?(0,n.jsxs)(m.Z.LabelSm,{weight:"semibold",children:[(0,i.t)("tiptap.extensions.embed.provider_description.works_with",{provider:u}),(0,n.jsx)("a",{href:"https://iframely.com/domains",target:"_blank",rel:"noreferrer",children:(0,i.t)("tiptap.extensions.embed.provider_description.providers")})]}):(0,n.jsxs)(m.Z.LabelSm,{weight:"semibold",children:[(0,i.t)("tiptap.extensions.embed.description.start"),(0,n.jsx)("a",{href:"https://iframely.com/domains",target:"_blank",rel:"noreferrer",children:(0,i.t)("tiptap.extensions.embed.description.providers")}),(0,i.t)("tiptap.extensions.embed.description.end")]})})]})]})})}},56516:function(e,t,r){r.d(t,{d:()=>d});var n=r(85893),i=r(67294),o=r(84326),a=r(57105),l=r(17905),s=r(34519),c=function(e){var t=e.editor,r=e.range,c=e.addToLocalSgidToObjectMap,u=e.provider,d=(0,a.dd)(),f=(0,i.useRef)(null);return(0,n.jsxs)(s.u_,{isOpen:d.visible,onClose:d.remove,initialFocus:f,children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(s.u_.Header,{children:[(0,n.jsx)(s.u_.Title,{size:"sm",children:u?(0,o.t)("tiptap.extensions.embed.add_provider",{provider:u}):(0,o.t)("tiptap.extensions.embed.add")}),(0,n.jsx)(s.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(s.u_.CloseButton,{onClick:d.remove})})]}),(0,n.jsx)(s.u_.Body,{children:(0,n.jsx)(l.E,{inputRef:f,addToLocalSgidToObjectMap:c,editor:t,range:r,provider:u})})]})]})},u=a.gk.create(function(e){var t=e.editor,r=e.range,i=e.addToLocalSgidToObjectMap,o=e.provider;return(0,n.jsx)(c,{editor:t,range:r,provider:o,addToLocalSgidToObjectMap:i})}),d=function(){return(0,a.dd)(u)}},21804:function(e,t,r){r.d(t,{o:()=>o});var n=r(65978),i=r(84326),o=function(){var e=(0,i.t)("courses.edit.lesson.embed_invalid_url");return n.Ry().shape({url:n.Z_().required(e).url(e)})}},63793:function(e,t,r){r.d(t,{z:()=>I});var n=r(85893),i=r(67294),o=r(94184),a=r.n(o),l=r(21443),s=r.n(l),c=r(41342),u=r(78456),d=r(45697),f=r.n(d),p=r(84142),m=r(96486),b=r(73935),h=r(35834),y=r(84326),v=r(41553),g=r(57363),x=r(47661),j=r(38431),O=r(16295),w=r(65648),S=r(40881),_=r(39869),N=r(96378),P=r(74050),k=function(e){var t,r=e.toggleFullscreen,i=e.togglePopup,o=e.onSeek,a=e.mediaTranscriptId,l=e.currentTime,s=e.onFullscreenSeek,c=e.renderFullscreenPlayer,u=e.isFullscreen,d="function"==typeof c,f=(0,N.g)(),p=f.containerRef,m=f.shouldAutoScroll,b=(0,P.q)(a).parsedWebvtt,h=null!=(t=null==b?void 0:b.cues)?t:[],k=!!(null==h?void 0:h.length);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-primary ml-2 flex h-72 w-96 flex-col rounded-md p-4 shadow-sm",children:[(0,n.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(g.JO,{type:"16-star-ai",viewBox:"0 0 20 16",className:"mr-1"}),(0,n.jsx)(v.Z.LabelMd,{as:"div",color:"text-dark",weight:"bold",children:(0,y.t)("media_player.transcript")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[d&&(0,n.jsx)(w.d,{onClick:r}),(0,n.jsx)(j.P,{onClick:i})]})]}),(0,n.jsxs)("div",{className:"grow overflow-auto",ref:p,children:[!k&&(0,n.jsx)(x.b,{}),k&&h.map(function(e){return(0,n.jsx)(O.N,{cue:e,isCurrentCue:(0,_.O4)(e,l),shouldScroll:m,onSeek:o},"transcript-".concat(a,"-").concat(e.startTime))})]})]}),d&&k&&(0,n.jsx)(S.n,{isOpen:u,onClose:r,cues:h,onSeek:s,currentTime:l,children:c()})]})};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var t=e.mediaTranscriptId,r=e.onSeek,o=e.onFullscreenSeek,a=e.onFullscreenToggle,l=e.renderFullscreenPlayer,s=e.currentTime,c=e.transcriptPreview,u=E((0,i.useState)(!1),2),d=u[0],f=u[1],g=function(){null==a||a(),f(!d)},x=(0,i.useRef)(null),j=E((0,i.useState)(null),2),O=j[0],w=j[1],S=E((0,i.useState)(null),2),_=S[0],N=S[1],P=(0,h.D)(O,_,{placement:"auto-end",modifiers:[{name:"offset",options:{offset:[0,5]}}]}),D=P.styles,A=P.attributes,T=function(){var e;return null==(e=x.current)?void 0:e.click()};return(0,n.jsx)(p.J,{className:"relative",children:function(e){var i,a,u=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("blockquote",{children:[(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(v.Z.BodyXs,{as:"div",children:c})}),(0,n.jsx)(p.J.Button,{as:"div",className:"flex",ref:w,children:(0,n.jsx)("button",{type:"button",className:"text-link text-xs hover:underline",ref:x,children:u?(0,y.t)("media_player.hide_transcript"):(0,y.t)("media_player.show_transcript")})})]}),(0,b.createPortal)((0,n.jsx)(p.J.Panel,(i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",className:"z-[10000]",ref:N,style:D.popper},A.popper),a=a={children:(0,n.jsx)(k,{toggleFullscreen:g,togglePopup:T,onSeek:r,mediaTranscriptId:t,currentTime:s,onFullscreenSeek:null!=o?o:m.noop,renderFullscreenPlayer:null!=l?l:m.noop,isFullscreen:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}),i)),document.getElementById("headless-ui-popover-root")||document.body)]})}})},T=function(e){var t=e.transcriptionId,r=e.transcriptionPreview,i=e.audioPlayer;return(0,n.jsxs)("div",{className:"mt-2 flex",children:[(0,n.jsx)("div",{className:"mr-2 h-auto w-1 rounded bg-gray-300"}),(0,n.jsx)(A,{mediaTranscriptId:t,onSeek:function(e){i.currentTime=e,i.play()},transcriptPreview:r})]})};function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}T.propTypes={transcriptionId:f().number.isRequired,transcriptionPreview:f().string.isRequired,audioPlayer:f().instanceOf(HTMLAudioElement).isRequired};var I=function(e){var t=e.src,r=e.downloadUrl,o=e.controls,l=void 0===o?["play","progress","current-time","mute","volume","settings"]:o,d=e.isVoiceMessage,f=void 0!==d&&d,p=e.transcriptionId,m=e.transcriptionPreview,b=(0,c.wh)().currentCommunityMember,h=(0,u.vb)(b),y=(0,i.useRef)(null),v=h&&!f?((function(e){if(Array.isArray(e))return C(e)})(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return C(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["download"]):l;return(0,i.useEffect)(function(){if(y.current){var e=new(s())(y.current,{controls:v,invertTime:!1,speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},storage:{enabled:!1},urls:{download:null!=r?r:t}});return function(){return e.destroy()}}},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:a()("post-audio-player",{"default mt-2":!f,"voice-message":f}),children:(0,n.jsx)("audio",{ref:y,preload:"metadata",controls:!0,children:(0,n.jsx)("source",{src:t})})}),p&&m&&(null==y?void 0:y.current)&&(0,n.jsx)(T,{transcriptionId:p,transcriptionPreview:m,audioPlayer:y.current})]})}},79895:function(e,t,r){r.d(t,{Z:()=>g});var n=r(85893),i=r(67294),o=r(96486),a=r(7391),l=r(84326),s=r(57105),c=r(57363),u=r(39905),d=r(60878),f=r(41553),p=r(17905),m=r(34519),b=r(11944);function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var y=function(e){var t,r,y=e.editor,v=e.range,g=void 0===v?{from:0,to:0}:v,x=e.addToLocalSgidToObjectMap,j=void 0===x?o.noop:x,O=e.type,w=void 0===O?"file":O,S=e.maxFileUploadSize,_=void 0===S?0x100000000:S,N=(0,s.dd)(),P=(0,d.pm)(),k=(0,i.useCallback)(function(e){var t=e[0];"too-many-files"===t.errors[0].code&&P.error((0,l.t)("tiptap.one_file_limit")),"file-too-large"===t.errors[0].code&&P.error((0,l.t)("tiptap.file_too_large",{size:(0,l.G)(_)}))},[P]),D=(0,a.uI)({onDropAccepted:function(e){y.chain().focus().deleteRange(g).run(),e.forEach(function(e){y.chain().focus().insertContent({type:"file-loader",attrs:{file:e}}).run()}),N.remove()},onDropRejected:k,noClick:!0,multiple:!0,maxSize:_}),E=D.getRootProps,A=D.getInputProps,T=D.open,C="video"===w?(0,l.t)("tiptap.drag_and_drop_any_video"):(0,l.t)("tiptap.drag_and_drop_".concat(w));return(0,n.jsxs)(m.u_,{isOpen:N.visible,onClose:N.remove,children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsxs)(m.u_.Content,{size:"lg",children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{size:"sm",children:(0,l.t)("tiptap.attach_".concat(w))}),(0,n.jsx)(m.u_.HeaderActions,{children:(0,n.jsx)(m.u_.CloseButton,{onClick:N.remove})})]}),(0,n.jsx)(m.u_.Body,{className:"!px-5 md:!px-8",children:(0,n.jsxs)(b.O.Group,{className:"overflow-hidden",children:["video"==w&&(0,n.jsxs)(b.O.List,{className:"border-primary border-b",children:[(0,n.jsx)(b.O,{children:(0,l.t)("tiptap.upload")}),(0,n.jsx)(b.O,{children:(0,l.t)("tiptap.embed_link")})]}),(0,n.jsxs)(b.O.Panels,{children:[(0,n.jsx)(b.O.Panel,{children:(0,n.jsxs)("div",(t=h({className:"border-primary mb-6 mt-2 flex min-h-[220px] flex-col items-center justify-center rounded-md border border-dotted"},E()),r=r={children:[(0,n.jsx)("input",h({},A())),(0,n.jsx)(c.JO,{size:42,className:"h-[42px] !w-[42px]",type:"new-file-plus"}),(0,n.jsx)("div",{className:"text-dark my-4",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:C})}),(0,n.jsx)(u.z,{type:"button",onClick:T,variant:"circle",children:(0,l.t)("tiptap.choose_".concat(w))})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}),(0,n.jsx)(b.O.Panel,{className:"px-px py-5",children:(0,n.jsx)(p.E,{addToLocalSgidToObjectMap:j,editor:y,range:g,provider:(0,l.t)("tiptap.extensions.embed.provider_description.top_video_providers")})})]})]})})]})]})},v=s.gk.create(function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments,o=e.addToLocalSgidToObjectMap,a=e.type,l=e.maxSize;return(0,n.jsx)(y,{editor:t,range:r,type:a,addToLocalInlineAttachments:i,addToLocalSgidToObjectMap:o,maxSize:l})}),g=function(){return(0,s.dd)(v)}},7963:function(e,t,r){r.d(t,{v:()=>m});var n=r(85893),i=r(67294),o=r(57105),a=r(51466),l=r(34519),s=r(87498),c=r(45031),u=r(48874),d=r(78885),f=function(e){var t=e.editor,r=(0,o.dd)(),f=(0,i.useRef)(null),p=t.getAttributes("image").href,m=!!p,b=r.hide;return(0,n.jsxs)(l.u_,{isOpen:r.visible,onClose:b,initialFocus:f,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(c.b,{isEditable:m,onClose:b}),(0,n.jsx)(a.l,{onSubmit:function(e){var r=e.url;t.chain().updateAttributes("image",{href:r}).run(),b()},defaultValues:{url:p},validationSchema:d.T,autoComplete:"off",children:(0,n.jsx)(s.u,{inputRef:f,submitButtonVariant:"circle",children:(0,n.jsx)(u.R,{isEditable:m,onClick:function(){t.chain().updateAttributes("image",{href:null}).run(),b()}})})})]})]})},p=o.gk.create(function(e){var t=e.editor;return(0,n.jsx)(f,{editor:t})}),m=function(){return(0,o.dd)(p)}},6233:function(e,t,r){r.d(t,{d:()=>k});var n=r(85893),i=r(57105),o=r(67294),a=r(94184),l=r.n(a),s=r(96486),c=r(84326),u=r(34519),d=r(40432),f=r(57363),p=r(83525),m=r(2898),b=r(14408),h=r(6729),y=r(15392),v=r(25815),g=r(41553);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function O(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,l,"next",e)}function l(e){j(o,n,i,a,l,"throw",e)}a(void 0)})}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var _=function(e){var t=e.isOpen,r=e.onClose,i=e.onComplete,a=w((0,o.useState)([]),2),x=a[0],j=a[1],_=w((0,o.useState)(0),2),N=_[0],P=_[1],k=w((0,o.useState)(""),2),D=k[0],E=k[1],A=w((0,o.useState)(!1),2),T=A[0],C=A[1],I=w((0,o.useState)(""),2),M=I[0],L=I[1],R=function(e,t,r){C(!1),P(0),i({url:e,signed_id:t,content_type:r})},F=function(e){new v.Q(e,R,"","",P).start()},$=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},U=function(e){var t=e.url,r=e.id,n=void 0===r?(0,s.uniqueId)():r;return O(function(){var e,r,i;return S(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),C(!0),[4,fetch(t)];case 1:return[4,(e=o.sent()).blob()];case 2:return r=o.sent(),$(null!=(i=e.headers.get("content-type"))?i:"")?F(new File([r],n,{type:"image/jpeg"})):(E(c.Z.t("image_upload.invalid_file_type_error")),C(!1)),[3,4];case 3:return o.sent(),E(c.Z.t("image_upload.embed_network_error")),C(!1),[3,4];case 4:return[2]}})})()},X=function(e){return O(function(){var t,r,n;return S(this,function(i){switch(i.label){case 0:if(!e.trim().length)return[2];return[4,y.q.search.getPhotos({query:e.trim(),page:1,perPage:30,orientation:"landscape"})];case 1:return(n=(null==(r=i.sent())||null==(t=r.response)?void 0:t.results)||[]).length>=1&&j(n),[2]}})})()};return(0,o.useEffect)(function(){X("wallpapers")},[]),(0,n.jsxs)(u.u_,{isOpen:t,onClose:r,className:"editor-modal trix-modal__upload",children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{className:"relative transition-all duration-200",size:T?"sm":"lg",children:[!T&&(0,n.jsx)("div",{className:"absolute right-4 top-4",children:(0,n.jsx)(u.u_.CloseButton,{onClick:r})}),(0,n.jsx)(u.u_.Body,{children:T?(0,n.jsxs)("div",{className:l()("bg-primary pointer-events-none flex w-full flex-col items-center justify-center py-6"),children:[(0,n.jsx)(f.JO,{type:"loader"}),(0,n.jsx)("div",{className:"mt-2 flex flex-col items-center",children:N?(0,n.jsx)(g.Z.LabelSm,{weight:"medium",children:c.Z.t("image_upload.progress",{progress:N})}):(0,n.jsx)(g.Z.LabelSm,{weight:"medium",children:c.Z.t("image_upload.preparing")})})]}):(0,n.jsxs)(d.m,{defaultValue:c.Z.t("upload"),controlled:!1,children:[(0,n.jsx)("div",{label:c.Z.t("upload"),children:(0,n.jsx)("div",{className:"pb-4",children:(0,n.jsx)(m.p,{imageError:D,insertFiles:function(e){var t=null==e?void 0:e[0];t&&$(t.type)?(C(!0),E(""),F(t)):E(c.Z.t("image_upload.invalid_file_type_error"))}})})}),(0,n.jsx)("div",{label:(0,n.jsx)(b.$,{}),className:"unsplash-tab",children:(0,n.jsx)(h.A,{unsplashResults:x,searchUnsplash:X,addUnsplash:function(e){return U({url:e.urls.regular,id:e.id})}})}),(0,n.jsx)("div",{label:c.Z.t("image_upload.embed"),children:(0,n.jsx)(p.u,{imageError:D,embedUrl:M,onChangeEmbedUrl:function(e){return L(e.target.value)},addEmbed:function(){return U({url:M})}})})]})})]})]})},N=function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,a=e.isWithinEmailEditor,l=(0,i.dd)();return(0,n.jsx)(_,{onComplete:function(e){var n=e.url,i=e.signed_id,s=e.content_type;o({url:n,signed_id:i,content_type:s});var c={url:n,signed_id:i,content_type:s,width_ratio:1,alignment:"center",use_intrinsic_size:!1};a&&(c={url:n,signed_id:i,content_type:s,width_ratio:0,alignment:"left",use_intrinsic_size:!0}),t.chain().focus().insertContentAt(r,[{type:"image",attrs:c},{type:"hardBreak"}]).run(),l.remove()},isOpen:l.visible,onClose:l.remove})},P=i.gk.create(function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments,o=e.isWithinEmailEditor;return(0,n.jsx)(N,{editor:t,range:r,addToLocalInlineAttachments:i,isWithinEmailEditor:o})}),k=function(){return(0,i.dd)(P)}},95973:function(e,t,r){r.d(t,{h:()=>x,k:()=>g});var n=r(85893),i=r(67294),o=r(96486),a=r(49708),l=r(1943),s=r(594),c=r(52997);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var f=function(e){var t,r=(t=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1];return(0,i.useEffect)(function(){var t;(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return t=e,(")"===e||"("===e)&&(t=":".concat(e)),[4,(0,c.S)()];case 1:return[4,r.sent().SearchIndex.search(t||"face")];case 2:return o(r.sent().filter(function(e){var t,r;return null==e||null==(r=e.skins)||null==(t=r[0])?void 0:t.native})),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){d(o,n,i,a,l,"next",e)}function l(e){d(o,n,i,a,l,"throw",e)}a(void 0)})})()},[e]),{emojis:n}},p=r(94184),m=r.n(p),b=r(41553),h=function(e){var t=e.emoji,r=e.index,i=e.isSelected,a=e.setSelectedIndex,s=e.insertEmoji,c=(0,l.O)().setPopupsVisible,u=function(){a(r)};return(0,n.jsxs)("button",{type:"button",tabIndex:0,id:"emoji-".concat(t.id),onClick:function(){s(t),(0,o.defer)(function(){return c(!1)})},onMouseOver:u,onFocus:u,className:m()("text-light flex w-full cursor-pointer items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":i}),children:[(0,n.jsx)("span",{className:"text-base",children:t.skins[0].native}),(0,n.jsx)("div",{className:"truncate",children:(0,n.jsxs)(b.Z.LabelSm,{children:[":",t.id,":"]})})]},t.id)};function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var g="emojiList",x=(0,i.forwardRef)(function(e,t){var r,u=e.editor,d=e.range,p=e.query,m=(r=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],x=m[1],j=(0,l.O)().setPopupsVisible;(0,a.M)({options:{onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,(0,c.S)()];case 1:return(0,t.sent().init)({data:e}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){v(o,n,i,a,l,"next",e)}function l(e){v(o,n,i,a,l,"throw",e)}a(void 0)})})()}}});var O=f(p).emojis;(0,i.useEffect)(function(){j(!0)},[j]);var w=function(e){u.chain().focus().deleteRange(d).insertContent(e.skins[0].native).insertContent(" ").run()};return((0,i.useEffect)(function(){var e,t;null==(e=document.getElementById("emoji-".concat(null==(t=O[b])?void 0:t.id)))||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[b,O]),(0,s.h)({selectedIndex:b,setSelectedIndex:x,ref:t,items:O,selectItem:function(e){w(O[e])}}),(0,o.isEmpty)(O))?(0,n.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[300px] bg-transparent"}):(0,n.jsx)("div",{ref:t,className:"border-primary bg-primary relative max-h-[50vh] min-w-[250px] max-w-[300px] overflow-auto rounded border py-1.5 text-sm shadow-md",id:g,children:O.map(function(e,t){var r=t===b;return(0,n.jsx)(h,{emoji:e,index:t,setSelectedIndex:x,isSelected:r,insertEmoji:w},e.id)})})});x.displayName="EmojiPicker"},52997:function(e,t,r){r.d(t,{S:()=>n});var n=function(){return r.e("8901").then(r.bind(r,6431))}},56364:function(e,t,r){r.d(t,{r:()=>u});var n=r(88897),i=r(8744),o=r(53397),a=r(92007),l=r(13735),s=r(5606),c=r(95973),u=n.hj.create({addOptions:function(){return{portalTargetId:null}},addProseMirrorPlugins:function(){var e=(0,s.D)(this.options.portalTargetId);return[(0,o.ZP)({editor:this.editor,char:":",pluginKey:new a.H$("emoji"),render:function(){var t,r;return{onStart:function(n){t=new i.M_(c.h,{props:n,editor:n.editor}),r=(0,l.ZP)(e,{getReferenceClientRect:function(){var e;return(null==(e=n.clientRect)?void 0:e.call(n))||new DOMRect(0,0,0,0)},content:t.element,appendTo:function(){return e||document.body},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(e){var n;t.updateProps(e),null==(n=r[0])||n.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var n;return"Escape"===e.event.key?(r[0].hide(),!0):null==(n=t.ref)?void 0:n.onKeyDown(e)},onExit:function(){var e;null==(e=r[0])||e.destroy(),null==t||t.destroy()}}}})]}})},42275:function(e,t,r){r.d(t,{W:()=>i,v:()=>o});var n=function(e){var t;return(null==e||null==(t=e.$cursor)?void 0:t.pos)!==null},i=function(e){var t=e.editor;if(n(t.state.selection)){var r,i,o,a=null==(o=t.state)||null==(i=o.selection)||null==(r=i.$cursor)?void 0:r.pos;if(a>0){var l=Math.max(0,a-1),s=a&&t.state.doc.nodeAt(l);s&&(null==s?void 0:s.isText)&&(s.textBetween(l,a," ").endsWith(" ")||t.chain().focus().insertContent(" ").run())}}return t.chain().focus().insertContent("/").run()},o=function(e){var t=e.editor.state.selection;return{from:t.from,to:t.to}}},52988:function(e,t,r){r.d(t,{o:()=>u});var n=r(85893),i=r(76234),o=r(84326),a=r(80171),l=r(45111),s=r(75148),c=r(42275),u=function(e){var t=e.editor,r=e.portalId,u=e.showImagePickerModal,d=e.showFileUploadModal,f=e.showGiphyPickerModal,p=e.showPollModal,m=e.disabledExtensions,b=e.showVoiceMessageModal;return t&&r?(0,n.jsx)(i.Z,{container:function(){return document.getElementById(r)},children:(0,n.jsxs)("ul",{className:"flex list-none items-center gap-1.5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.open_slash_commands_menu"),dataTestId:"open_slash_commands_menu",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-add-circle",ariaLabel:(0,o.t)("tiptap.open_slash_commands_menu"),onClick:function(){(0,c.W)({editor:t})}})})}),(0,n.jsx)("li",{children:!m.entities&&(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,o.t)("tiptap.add_entity"),name:"20-tiptap-entity",onClick:function(){t.chain().focus().insertContent(" #").run()}})})}),(0,n.jsx)("li",{className:"hidden md:flex",children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.attach_file"),dataTestId:"attach_file",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,o.t)("tiptap.attach_file"),name:"20-attach",onClick:function(){return d({editor:t,range:(0,c.v)({editor:t})})}})})}),(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.attach_video"),dataTestId:"attach_video",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-video",ariaLabel:(0,o.t)("tiptap.attach_video"),onClick:function(){return d({editor:t,range:(0,c.v)({editor:t}),type:"video"})}})})}),(0,n.jsx)("li",{className:"hidden md:flex",children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.add_gif"),dataTestId:"add_gif",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-gif",ariaLabel:(0,o.t)("tiptap.add_gif"),onClick:function(){return f({editor:t,range:(0,c.v)({editor:t})})}})})}),(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.add_image"),dataTestId:"add_image",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,o.t)("tiptap.add_image"),onClick:function(){return u({editor:t,range:(0,c.v)({editor:t})})},name:"20-file-image"})})}),!m.emojipicker&&(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.add_emoji"),dataTestId:"add_emoji",children:(0,n.jsx)(l.c,{placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).run()},as:"li",shouldEmojiPickerRenderAsPortal:!0,targetWrapperClassName:"!flex",target:(0,n.jsx)(s.h,{iconSize:20,ariaLabel:(0,o.t)("tiptap.add_emoji"),iconClassName:"!text-dark",name:"20-emoji"})})}),!m.poll&&(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.add_poll"),dataTestId:"add_poll",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-editor-poll",ariaLabel:(0,o.t)("tiptap.add_poll"),onClick:function(){return p({editor:t,range:(0,c.v)({editor:t})})}})})}),!m.voice_message&&(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,o.t)("tiptap.record_voice_message"),dataTestId:"record_voice_message",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-microphone",ariaLabel:(0,o.t)("tiptap.record_voice_message"),onClick:function(){return b({editor:t,range:(0,c.v)({editor:t})})}})})})]})}):null}},66522:function(e,t,r){r.d(t,{$:()=>n,M:()=>i});var n={LEFT:"left",CENTER:"center",RIGHT:"right"},i=["paragraph","heading","listItem","blockquote"]},41928:function(e,t,r){r.d(t,{m:()=>i});var n=r(41342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.text_editor_text_alignment_enabled)}},23627:function(e,t,r){r.d(t,{R:()=>nm,p:()=>np});var n=r(85893),i=r(67294),o=r(19512),a=r(56070),l=r(18490),s=r(50511),c=r(43557),u=r(59687),d=r(44306),f=r(85856),p=r(99961),m=r(18e3),b=r(15567),h=r(51127),y=r(67338),v=r(75481),g=r(32018),x=r(91077),j=r(38621),O=r(87597),w=r(55963),S=r(1242),_=r(89290),N=r(8744),P=r(94184),k=r.n(P),D=r(96486),E=r(30168),A=r(24804),T=r(2386),C=r(83461),I=r(88897),M=r(56755),L=r.n(M),R=r(88767),F=r(84326),$=r(57363),U=r(80909),X=r(57105),B=r(98471),z=r(34519),q=function(e){var t=e.file,r=(0,X.dd)();return"application/pdf"!==t.content_type?null:(0,n.jsx)(z.u_,{isOpen:r.visible,onClose:r.remove,children:(0,n.jsx)(z.u_.Overlay,{children:(0,n.jsxs)(z.u_.Content,{size:"full",children:[(0,n.jsxs)(z.u_.Header,{children:[(0,n.jsx)(z.u_.Title,{size:"sm",children:t.filename}),(0,n.jsxs)(z.u_.HeaderActions,{children:[(0,n.jsx)("a",{href:t.url,download:!0,className:"text-dark hover:text-darkest focus:text-dark flex items-center justify-center",children:(0,n.jsx)($.JO,{type:"16-download",size:16})}),(0,n.jsx)(z.u_.CloseButton,{onClick:r.remove})]})]}),(0,n.jsx)(z.u_.Body,{children:(0,n.jsx)(B.X,{className:"h-full w-full",src:t.url})})]})})})},Z=X.gk.create(function(e){var t=e.file;return(0,n.jsx)(q,{file:t})}),H=r(41553),V=r(13532),W=r(44830),J=r(63793),G=r(29379),K=function(e){var t,r=e.attachment,i=e.isTranscodingEnabled;return(0,n.jsx)(N.T5,{as:"div",id:"file-wrapper",children:(0,n.jsx)(G.T,{src:r.url,type:r.content_type,mediaTranscoding:r.media_transcoding,mediaTranscriptId:r.media_transcript_id,isDownloadable:r.is_downloadable,isTranscodingEnabled:void 0!==i&&i,poster:null==r||null==(t=r.image_variants)?void 0:t.thumbnail,variants:r.video_variants,signedId:r.signed_id})})},Q=function(e){var t=e.onClick;return(0,n.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute -right-2.5 -top-2.5 flex scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:t,"aria-label":(0,F.t)("close"),children:(0,n.jsx)($.JO,{type:"close"})})};function Y(e){var t=e.attachment,r=e.isEditable,i=e.onDelete;return(0,n.jsx)(N.T5,{as:"div",id:"file-wrapper",children:(0,n.jsxs)("div",{className:"group relative inline-block pe-4",children:[(0,n.jsx)("a",{href:t.url,download:!0,target:"_blank",rel:"noreferrer",children:t.filename}),r&&(0,n.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute right-0 top-0 flex -translate-y-1/2 translate-x-1/2 scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:i,"aria-label":(0,F.t)("delete"),children:(0,n.jsx)($.JO,{type:"close"})})]})})}var ee=function(e){var t,r,i=e.attachment,o=e.isEditable,a=e.onDelete;return(0,n.jsxs)(N.T5,{id:"file-wrapper",as:"div",className:"group relative max-w-[500px]",children:[o&&(0,n.jsx)(Q,{onClick:a}),(0,n.jsx)(J.z,{src:i.url,controls:["play","progress","current-time"],isVoiceMessage:!0,transcriptionId:null==(t=i.metadata)?void 0:t.transcript_id,transcriptionPreview:null==(r=i.metadata)?void 0:r.transcript_preview})]})},et=function(e){var t,r,i,o,a,l,s,c,u=e.node,d=e.editor,f=e.deleteNode,p=d.isEditable,m=(0,X.dd)(Z),b=null!=(c=np())?c:{},h=b.localInlineAttachments,y=b.inlineAttachments,v=b.addToLocalInlineAttachments,g=b.shouldPreviewFilesAsLinks,x=null==(i=u.attrs)?void 0:i.signed_id,j=(null==h?void 0:h.find(function(e){return e.signed_id===x}))||(null==y?void 0:y.find(function(e){return e.signed_id===x})),O=(0,R.useQuery)(V.av.richTextFields.fetchAttachment({signedId:x}),{enabled:!j&&p,retry:!1,retryOnMount:!1,onSuccess:v}).isLoading,w=function(e){f(),e.preventDefault(),e.stopPropagation()};if(O)return(0,n.jsx)(N.T5,{as:"div",className:"my-4",children:(0,n.jsx)($.JO,{type:"loader",size:16})});if(!j)return null;if(g)return(0,n.jsx)(Y,{attachment:j,isEditable:p,onDelete:w});var S=W.$.isNativelySupportedVideo(j.content_type),_=W.$.isVideo(j.content_type)&&!!j.media_transcoding,P=S||_,E=W.$.isAudio(j.content_type),A=W.$.isPDF(j.content_type),T=!P&&!E&&!A,C=!!(null==(o=j.metadata)?void 0:o.voice_message),I=E?{}:{href:j.url,download:!0};return P?(0,n.jsx)(K,{attachment:j,isTranscodingEnabled:_}):C?(0,n.jsx)(ee,{attachment:j,isEditable:p,onDelete:w}):(0,n.jsxs)(N.T5,{as:"div",id:"file-wrapper",className:k()("bg-secondary hover:bg-tertiary border-primary group relative w-full flex-col rounded border px-3 py-2",{"max-w-[350px]":T,"max-w-[500px]":E||A}),children:[p&&(0,n.jsx)(Q,{onClick:w}),(0,n.jsxs)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},I),r=r={className:"inline-flex items-center space-x-3 truncate",children:[(0,n.jsx)(U.V,{content_type:j.content_type}),(0,n.jsxs)("div",{className:"flex flex-col truncate",children:[(0,n.jsx)(H.Z.LabelSm,{weight:"semibold",children:(0,D.truncate)(j.filename,{length:35})}),(0,n.jsx)(H.Z.LabelXs,{weight:"regular",children:L()(j.byte_size)})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),A&&(0,n.jsxs)("div",{className:"relative mt-2 flex max-h-[500px] items-center justify-center overflow-hidden",children:[(0,n.jsx)("button",{type:"button",onClick:function(){m.show({file:j})},className:"absolute left-0 top-0 h-full w-full cursor-zoom-in","aria-label":(0,F.t)("view_attachment")}),(null==(a=j.image_variants)?void 0:a.thumbnail)&&(0,n.jsx)("img",{loading:"lazy",className:"h-48 w-full object-cover object-top",src:j.image_variants.thumbnail,alt:(0,F.t)("tiptap.pdf_preview")})]}),E&&(0,n.jsx)(J.z,{src:(null==(s=j.audio_variants)||null==(l=s.optimized)?void 0:l.url)||j.url,downloadUrl:j.url})]})},er=I.NB.create({name:"file",group:"block",atom:!0,addAttributes:function(){return{signed_id:{default:null}}},parseHTML:function(){return[{tag:"file-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-react",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(et)}}),en=r(79895),ei=r(56364),eo=r(21728),ea=r(36565),el=r(86678),es=r(1168),ec=r(84579),eu=r(99165),ed=r(41342),ef=function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,i=e.addToLocalInlineAttachments,o=e.editor,a=e.range,l=((0,ed.wh)().currentCommunityMember||{}).id;(0,ec.I)(void 0===l?0:l,function(e){(e.event===eu.K2||e.event===eu.x4)&&e.json_message.recording_id===r&&(e.event===eu.K2?(i({url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}),o.chain().focus().deleteRange(a).insertContent({type:"file",attrs:{signed_id:e.json_message.signed_id}}).run(),t()):e.event===eu.x4&&n())})},ep=function(e){var t=e.onClose,r=e.addToLocalInlineAttachments,o=e.editor,a=e.range,l=(0,i.useMemo)(function(){return(0,ea.zs)()},[]),s=(0,el.Y)({recordingId:l}),c=s.isRecording,u=s.status,d=s.isBusy,f=s.isError,p=s.onSubmit;ef({onClose:t,recordingId:l,setServerError:s.setServerError,addToLocalInlineAttachments:r,editor:o,range:a});var m=(0,F.t)("tiptap.voice_message.".concat(u));return(0,n.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex h-full w-full items-center justify-center rounded-lg",children:(0,n.jsxs)("div",{className:(0,es.A)("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":c}),children:[(0,n.jsx)("button",{type:"button",onClick:t,className:"bg-primary flex items-center justify-center rounded-full p-2",children:(0,n.jsx)($.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,n.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,n.jsx)("div",{className:"min-w-[160px]",children:m}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,n.jsx)(eo.B7,{isRecording:c})}),(0,n.jsx)($.JO,{type:"20-microphone",className:(0,es.A)("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":c})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:p,disabled:d,children:d?(0,n.jsx)(eo.$j,{}):(0,n.jsx)($.JO,{type:f?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})},em=function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments,o=void 0===i?D.noop:i,a=(0,X.dd)();return(0,n.jsxs)(z.u_,{isOpen:a.visible,onClose:a.remove,children:[(0,n.jsx)(z.u_.Overlay,{}),(0,n.jsxs)(z.u_.Content,{size:"md",children:[(0,n.jsx)(z.u_.Header,{children:(0,n.jsx)(z.u_.Title,{size:"sm",children:(0,F.t)("tiptap.voice_message.action")})}),(0,n.jsx)(z.u_.Body,{children:(0,n.jsx)(ep,{onClose:a.remove,addToLocalInlineAttachments:o,editor:t,range:r})})]})]})},eb=X.gk.create(function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments;return(0,n.jsx)(em,{editor:t,range:r,addToLocalInlineAttachments:i})}),eh=r(71575),ey=r(6812),ev=r(63395),eg=r(42275),ex=r(17617),ej=r(31464),eO=function(e){var t=e.isActive,r=e.onClick,i=e.iconType;return(0,n.jsx)("button",{type:"button",onClick:r,className:k()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded p-1",{"bg-text-editor-modifier-active":void 0!==t&&t}),children:(0,n.jsx)(ej.l,{type:i,iconSize:16})})},ew=r(2038),eS=function(e){var t=e.editor,r=e.node,i=e.updateAttributes,o=e.deleteNode,a=(0,ew.Y)(),l=(0,ex.ef)(),s=(np()||{}).isWithinEmailEditor;return(0,n.jsx)("div",{className:k()("absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",{invisible:!l}),children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier flex overflow-hidden rounded-lg p-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(eO,{onClick:function(){i({alignment:"left",full_width:!1})},isActive:"left"==r.attrs.alignment,iconType:"16-image-left"}),(0,n.jsx)(eO,{onClick:function(){i({alignment:"center",full_width:!1})},isActive:"center"==r.attrs.alignment&&!r.attrs.full_width,iconType:"16-image-centre"}),(0,n.jsx)(eO,{onClick:function(){i({alignment:"center",full_width:!0})},isActive:"center"==r.attrs.alignment&&r.attrs.full_width,iconType:"16-image-full-width"}),(0,n.jsx)(eO,{onClick:function(){i({alignment:"right",full_width:!1})},isActive:"right"==r.attrs.alignment,iconType:"16-image-right"})]}),(0,n.jsx)("span",{className:"m-1 inline-block w-px self-stretch bg-gray-500","aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(eO,{iconType:"16-edit",onClick:function(){return a.show({editor:t,range:(0,eg.v)({editor:t}),isWithinEmailEditor:s})}}),(0,n.jsx)(eO,{onClick:o,iconType:"16-trash"})]})]})})},e_=function(e){var t=e.editor,r=e.node,i=e.updateAttributes,o=e.deleteNode,a=e.selected,l=t.isEditable,s=(0,ew.Y)(),c=(np()||{}).isWithinEmailEditor;return(0,n.jsxs)(N.T5,{as:"div",className:k()("group relative my-2 flex items-center rounded-lg border py-4",{"justify-center":"center"===r.attrs.alignment,"justify-start":"left"===r.attrs.alignment,"justify-end":"right"===r.attrs.alignment},{"border-transparent":!l,"hover:border-dark border-transparent":l&&!a,"border-circle":l&&a}),children:[(0,n.jsx)("a",{style:{backgroundColor:r.attrs.color,color:r.attrs.text_color},className:k()("tiptap-cta focus-visible:!outline-secondary group relative block rounded-full px-6 py-2.5 font-bold mix-blend-difference transition-opacity hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",r.attrs.full_width?"w-[350px] text-center":"w-auto",!r.attrs.text_color&&"!text-white"),target:"_blank",href:r.attrs.url,rel:"noreferrer",onClick:function(e){l&&(e.preventDefault(),s.show({editor:t,range:(0,eg.v)({editor:t}),isWithinEmailEditor:c}).catch(console.error))},children:r.attrs.label}),l&&(0,n.jsx)(eS,{editor:t,node:r,updateAttributes:i,deleteNode:o})]})},eN=I.NB.create({name:"cta",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},label:{default:null},color:{default:null},text_color:{default:"#FFFFFF"},full_width:{default:!1},alignment:{default:"center"}}},parseHTML:function(){return[{tag:"cta-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["cta-react",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(e_)}}),eP=I.hj.create({name:"disableModEnter",addKeyboardShortcuts:function(){return{"Mod-Enter":function(){return!0}}}}),ek=r(93199);function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eE=(0,r(64100).Ue)(function(e){return{failedLinkEmbeds:[],addFailedLinkEmbed:function(t){e(function(e){var r;return{failedLinkEmbeds:((function(e){if(Array.isArray(e))return eD(e)})(r=e.failedLinkEmbeds)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return eD(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eD(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t])}})}}}),eA=I.NB.create({name:"embed-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{href:{default:null},text:{default:null}}},parseHTML:function(){return[{tag:"embed-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-loader",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(eT)},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){var t=eE.getState().failedLinkEmbeds,r=e.editor.state;if(r.selection.$from.pos>0){var n=r.doc.resolve(r.selection.$from.pos-1).marks(),i=r.doc.resolve(r.selection.$from.pos).marks();if(n.some(function(e){return"link"===e.type.name})&&!i.some(function(e){return"link"===e.type.name})){var o=n.find(function(e){return"link"===e.type.name}),a=o.attrs,l=r.doc.nodeAt(r.selection.$from.pos-1),s=a.href===l.text;return!t.includes(a.href)&&!!l&&!!o&&!!s&&(e.editor.chain().focus().setTextSelection(r.selection.$from.pos-1).extendMarkRange("link").deleteSelection().run(),e.editor.view.dispatch(e.editor.view.state.tr.insert(e.editor.view.state.selection.anchor,e.editor.schema.nodes["embed-loader"].create({href:a.href,text:l.text})).setMeta("addToHistory",!1)),!0)}return!1}}}}}),eT=function(e){var t=e.node,r=e.editor,o=e.HTMLAttributes,a=e.getPos,l=np().addToLocalSgidToObjectMap,s=eE().addFailedLinkEmbed,c=function(){var e=r.state,n=r.view.dispatch,i=a();i&&n(e.tr.delete(i,i+t.nodeSize).setMeta("addToHistory",!1))},u=(0,R.useMutation)(function(e){return(0,ek.Cu)(V.av.richTextFields.createOembed({params:{url:e}}))},{onSuccess:function(e){c(),r.chain().focus().insertContent({type:"embed",attrs:{sgid:e.sgid}}).run(),l({sgid:e.sgid,object:e.oembed})},onError:function(){s(t.attrs.href),c(),r.chain().focus().insertContent({type:"text",text:t.attrs.text,marks:[{type:"link",attrs:{href:t.attrs.href}}]}).run()}}),d=r.isEditable;return(0,i.useEffect)(function(){if(d){var e=t.attrs.href;return u.mutate(e),function(){u.reset()}}},[]),(0,n.jsxs)(N.T5,{as:"span",HTMLAttributes:o,children:[(0,n.jsx)("a",{href:t.attrs.href,className:k()({"pointer-events-none mr-px animate-pulse":d}),target:"_blank",rel:"noopener noreferrer",children:t.attrs.text}),d&&(0,n.jsx)($.JO,{type:"loader",className:"mb-[3px]",size:14})]})},eC=r(30355),eI=r(71290),eM=r(29832),eL=r(61217);function eR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function e$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eR(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eX=function(e){var t=e.onComplete,r=eU((0,i.useState)("idle"),2),n=r[0],o=r[1],a=eU((0,i.useState)(null),2),l=a[0],s=a[1],c=eU((0,i.useState)(null),2),u=c[0],d=c[1],f=(0,R.useMutation)(function(e){return eI.O.create({blobSignedId:e.signed_id})},{onError:function(){s("processing_failed"),o("failed")}}).mutate,p=(0,eM.S)({onUploadStarted:function(){return o("uploading")},onUploadComplete:function(e){if(d(e),W.$.isVideo(e.content_type)&&!W.$.isNativelySupportedVideo(e.content_type))o("processing"),f(e);else{var r=e.signed_id,n=e.filename,i=(0,V.Gd)({signed_id:r,filename:n});t(e$(eF({},e),{url:i})),o("succeeded")}},onUploadFailed:function(){s("upload_failed"),o("failed")}}),m=p.uppy,b=p.progress;return(0,eL.k)({enabled:"processing"===n&&!!(null==u?void 0:u.signed_id),signedId:null==u?void 0:u.signed_id,onSuccess:function(e){if(u){var r=u.signed_id,n=u.filename,i=(0,V.Gd)({signed_id:r,filename:n});t(e$(eF({},u),{url:i,media_transcoding:{status:"succeeded"},video_variants:{original:i,hls:e}})),o("succeeded")}},onError:function(){s("processing_failed"),o("failed")}}),{status:n,progress:b,error:l,addFile:(0,i.useCallback)(function(e){o("preparing"),s(null),d(null),m.addFile(e)},[m]),cancelUpload:(0,i.useCallback)(function(){o("idle"),s(null),d(null),m.cancelAll()},[m])}},eB="tiptap.file_upload",ez=I.NB.create({name:"file-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{file:{default:null}}},parseHTML:function(){return[{tag:"file-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-loader",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(eq)}}),eq=function(e){var t,r=e.node,o=e.editor,a=e.HTMLAttributes,l=e.getPos,s=o.isEditable,c=r.attrs.file,u=np()||{},d=u.addToLocalInlineAttachments,f=u.isWithinEmailEditor,p=function(e){e&&o.view.dispatch(o.state.tr.delete(e,e+r.nodeSize).setMeta("addToHistory",!1))},m=eX({onComplete:function(e){var t=e.signed_id,r=e.content_type,n=W.$.isImage(r),i=l();null==d||d(e),p(i),o.view.dispatch((0,eC.SJ)(o.state.tr.insert(i,o.schema.nodes[n?"image":"file"].create({signed_id:t,alignment:f?"left":"center",use_intrinsic_size:f}))))}}),b=m.status,h=m.progress,y=m.error,v=m.addFile,g=m.cancelUpload,x=null!=(t=File)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](c):c instanceof t;return((0,i.useEffect)(function(){if(s)return x?(v(c),function(){return g()}):void p(l())},[]),s&&x)?(0,n.jsx)(N.T5,{as:"div",HTMLAttributes:a,children:(0,n.jsxs)("div",{className:"bg-secondary border-primary relative my-2 inline-flex w-full space-x-3 rounded border px-3 py-2 md:w-[75%] lg:w-[50%]",children:["failed"===b?(0,n.jsx)($.JO,{type:"20-alert",className:"!h-5 !w-5",size:20}):(0,n.jsx)($.JO,{type:"loader",className:"animate-spin",size:24}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(H.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,D.truncate)(c.name,{length:15})}),(0,n.jsx)(H.Z.LabelSm,{children:function(){switch(b){case"preparing":return(0,F.t)([eB,"preparing"]);case"uploading":return(0,F.t)([eB,"uploading"],{progress:h.toFixed(0)});case"processing":return(0,F.t)([eB,"processing"]);case"failed":return(0,F.t)([eB,"errors",y||""]);default:return""}}()})]})]})}):null},eZ=r(58533),eH=r(4186),eV=r(18317),eW=r(22974),eJ=r(20624),eG=r(51169),eK=(0,i.forwardRef)(function(e,t){var r=e.query,i=e.setQuery;return(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)("input",{ref:t,type:"text",placeholder:F.Z.t("tiptap.search_giphy"),onChange:function(e){return i(e.target.value)},value:r,className:"bg-secondary placeholder:text-light w-full rounded border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})});function eQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eY(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function e0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eQ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}eK.displayName="SearchBox";var e1=function(e){var t=e.editor,r=e.range,o=void 0===r?{from:0,to:0}:r,a=e.addToLocalInlineAttachments,l=void 0===a?D.noop:a,s=(0,X.dd)(),c=e0((0,i.useState)(""),2),u=c[0],d=c[1],f=e0((0,i.useState)(!1),2),p=f[0],m=f[1],b=(0,i.useRef)(null),h=(0,R.useInfiniteQuery)(["chat-members-search",u],function(e){var t=e.pageParam,r=void 0===t?1:t;return u?eV.y(u,{offset:r,limit:10}):eV.q({offset:r,limit:10})},{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),y=h.data,v=h.fetchNextPage,g=h.hasNextPage,x=h.isLoading,j=(0,i.useMemo)(function(){var e;return(0,D.uniqBy)((0,D.flatten)(null==y||null==(e=y.pages)?void 0:e.map(function(e){return e.data})),"id")},[y]),O=(0,eW.A)(),w=O.uploadFile,S=O.status,_=O.isError,N=O.response,P=O.progress,k=!_&&"uploading"===S,E=function(){if(N.signed_id&&N.filename&&N.content_type){var e=N.signed_id,r=N.filename,n=N.content_type,i=(0,V.Gd)({signed_id:e,filename:r});l({url:i,signed_id:e,content_type:n}),(0,D.defer)(function(){t.chain().focus().insertContentAt(o,[{type:"image",attrs:{url:i,signed_id:e,content_type:n,width_ratio:1}},{type:"hardBreak"}]).run(),s.remove()})}},A=function(e){var t;return(t=function(){var t,r,n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return m(!0),[4,fetch(e.images.original.url)];case 1:return t=i.sent(),r="video"==e.type?"video/mp4":"image/gif",n=File.bind,[4,t.blob()];case 2:return w(new(n.apply(File,[void 0,[i.sent()],"".concat(e.id,".").concat(r.split("/")[1]),{type:r}]))),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){eY(o,n,i,a,l,"next",e)}function l(e){eY(o,n,i,a,l,"throw",e)}a(void 0)})})()};return(0,i.useEffect)(function(){"uploading"===S&&m(!1),"completed"===S&&N&&E()},[S,N]),(0,n.jsxs)(z.u_,{isOpen:s.visible,onClose:s.remove,initialFocus:b,children:[(0,n.jsx)(z.u_.Overlay,{}),(0,n.jsxs)(z.u_.Content,{size:"lg",children:[(0,n.jsxs)(z.u_.Header,{children:[(0,n.jsx)(z.u_.Title,{size:"sm",children:(0,F.t)("tiptap.add_gif")}),(0,n.jsx)(z.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(z.u_.CloseButton,{onClick:s.remove})})]}),(0,n.jsx)(z.u_.Body,{children:k||p?(0,n.jsx)("div",{className:"bg-primary pointer-events-none flex min-h-[240px] w-full flex-col items-center justify-center py-6",children:(0,n.jsxs)("div",{className:"mb-4 flex flex-col items-center",children:[(0,n.jsx)(eG.a,{center:!0}),P?(0,n.jsx)(H.Z.LabelSm,{weight:"medium",children:(0,F.t)("tiptap.progress",{progress:P.toFixed(0)})}):(0,n.jsx)(H.Z.LabelSm,{weight:"medium",children:(0,F.t)("tiptap.preparing")})]})}):(0,n.jsxs)("div",{className:"bg-primary border-primary flex w-full flex-col space-y-1",children:[(0,n.jsx)(eK,{ref:b,query:u,setQuery:d}),x&&(0,n.jsx)(eJ.m,{}),!!j.length&&(0,n.jsx)(eZ.Z,{dataLength:j.length,next:v,hasMore:!!g,scrollThreshold:.6,height:360,loader:(0,n.jsx)("div",{className:"col-span-3 flex justify-center py-3",children:(0,n.jsx)(eJ.m,{})}),className:"mb-2 py-2",children:(0,n.jsx)(eH.Z,{columnsCount:3,gutter:"8",children:j.map(function(e){return(0,n.jsx)("button",{type:"submit",onClick:function(){return A(e)},"aria-label":e.title,children:(0,n.jsx)("img",{loading:"lazy",alt:"",className:"rounded",width:180,src:e.images.preview_gif.url})},e.id)})})})]})})]})]})},e2=X.gk.create(function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments;return(0,n.jsx)(e1,{editor:t,range:r,addToLocalInlineAttachments:i})}),e3=r(60589),e8=r(60622),e6=r(43544),e5=r(75148),e4=r(46977),e9=r(51466),e7=r(73578),te=r(60878),tt=function(e){var t=e.sgid,r=e.options;return(0,R.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryKey:["poll",t],queryFn:function(){if(!t)throw Error("sgid is required");return(0,ek.UT)(V.av.polls.showBySgid(t))},enabled:!!t},void 0===r?{}:r))},tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options;return(0,R.useMutation)(function(e){return(0,ek.pC)(V.av.polls.undo(e))},void 0===t?{}:t)},tn=function(){var e=(0,te.pm)(),t=(0,R.useMutation)({mutationFn:function(e){return(0,ek.Cu)(V.av.polls.exportCsv(e))},onSuccess:function(t){e.success((0,F.t)("export_member_csv.message",{email:t.email}))},onError:function(t){e.error(t.message)}});return{handleExportPollResponses:t.mutate,isExporting:t.isLoading}},ti=r(52293),to=r(44081),ta=r(49705),tl=r(45185),ts=r(88004),tc=r(65978),tu=function(e){return new Set(e.map(function(e){return e.value.trim()})).size===e.length},td={value:""},tf=function(e){var t,r,i,o,a,l=e.index,s=e.insert,c=e.fields,u=e.remove,d=e.disabled,f=(0,to.dI)().listeners,p=(0,e4.y1)("enter",function(e){e.preventDefault(),s(l+1,td)},{enabled:c.length<5,enableOnFormTags:["INPUT"]}),m=(0,ti.cl)({name:"options"}).errors,b=null==m||null==(a=m.options)||null==(o=a[l])||null==(i=o.value)?void 0:i.message;return(0,n.jsxs)("div",{className:k()("group flex items-center justify-between md:pl-2",{"form-group--has-error":b}),children:[(0,n.jsx)(ts.h,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"16-drag-handle",className:"invisible mr-1 hidden cursor-move group-hover:visible md:block"},f),r=r={children:(0,n.jsx)($.JO,{type:"16-drag-handle",size:16})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),(0,n.jsx)(e9.l.Input,{ref:p,id:"poll_options-".concat(l),name:"poll_options.".concat(l,".value"),placeholder:(0,F.t)("tiptap.extensions.poll.option_placeholder",{number:l+1}),disabled:d}),!d&&(0,n.jsx)(e5.h,{className:k()("border-primary invisible ml-2 rounded-full border",{"group-hover:visible":c.length>1}),name:"20-close",onClick:function(){c.length>1&&u(l)},iconSize:20,buttonSize:32,ariaLabel:(0,F.t)("close")})]})},tp=function(){var e=(0,to.dI)().item;return(0,n.jsx)("div",{className:"h-auto w-full pl-8 pr-10",children:(0,n.jsx)("input",{disabled:!0,className:"border-primary bg-tertiary z-50 w-full rounded-md border-2 border-dashed px-4 py-[11px] leading-[1.25]",value:null==e?void 0:e.value})})},tm=function(e){var t,r=e.disabled,i=(0,ti.Dq)({name:"poll_options"}),o=i.insert,a=i.fields,l=i.remove,s=i.replace,c=(0,(0,ti.Gc)().watch)("poll_options"),u=a.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,c[t])}),d=(0,ti.cl)({name:"poll_options"}).errors;return(0,n.jsxs)("div",{className:"md:pr-8",children:[(0,n.jsx)(to.cm,{shouldUseKeyboardSensor:!1,items:u,onSort:s,lockedVerticalAxis:!0,distance:10,useDragHandle:!0,children:(0,n.jsxs)(tl.a,{gap:2,className:k()({"mb-2":u.length>=5}),children:[u.map(function(e,t){return(0,n.jsx)(ta.c,{tabIndex:-1,item:e,disabled:1===u.length||r,placeholder:tp,dataTestId:"poll-option-item",children:(0,n.jsx)(tf,{index:t,insert:o,fields:u,remove:l,disabled:r},e.id)},e.id)}),!r&&u.length<5&&(0,n.jsxs)("button",{type:"button",tabIndex:0,className:"hover:bg-tertiary inline-flex w-fit cursor-pointer items-center space-x-1 rounded-md p-1 pr-1.5 md:ml-8",onClick:function(){return o(u.length,td)},children:[(0,n.jsx)($.JO,{type:"20-plus-v2",size:20}),(0,n.jsx)("div",{children:(0,n.jsx)(H.Z.LabelSm,{weight:"medium",children:(0,F.t)("tiptap.extensions.poll.add_option")})})]})]})}),d.poll_options&&(0,n.jsx)("p",{className:"form-group__error pl-5 md:pl-8",children:null==(t=d.poll_options.message)?void 0:t.toString()})]})},tb=r(64608),th=function(){return(0,(0,ti.Gc)().watch)("enable_poll_duration")?(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(tb.x,{datePlaceholder:(0,F.t)("tiptap.extensions.poll.settings.cutoff_date_placeholder"),timePlaceholder:(0,F.t)("tiptap.extensions.poll.settings.cutoff_time_placeholder"),name:"closes_at",minDate:new Date})}):null},ty=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.useMutation)(function(e){return(0,ek.Cu)(V.av.polls.create(),e)},e)},tv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.useMutation)(function(e){return(0,ek.aU)(V.av.polls.update(e.id),e)},e)},tg=r(39905),tx=function(e){var t=e.isEdit,r=e.isLoading,i=(0,X.dd)();return(0,n.jsxs)("footer",{className:"border-primary flex justify-end gap-x-4 border-t px-5 py-4","data-testid":"poll-modal-footer",children:[(0,n.jsx)(tg.z,{onClick:i.remove,variant:"secondary",type:"button",children:(0,F.t)("tiptap.extensions.poll.cancel")}),(0,n.jsx)(tg.z,{variant:"circle",type:"submit",disabled:r,children:t?(0,F.t)("tiptap.extensions.poll.save"):(0,F.t)("tiptap.extensions.poll.insert")})]})},tj=function(e){var t,r=e.initialFocusRef,i=e.onComplete,o=e.isEdit,a=e.pollSgid,l=e.closeModal,s=(0,X.dd)(),c=(0,te.pm)().success,u=tt({sgid:a,options:{enabled:!!a&&o}}),d=u.data,f=u.isLoading,p=(0,R.useQueryClient)(),m=ty({onSuccess:function(e){i(e),s.remove()}}),b=m.mutate,h=m.isLoading,y=tv({onSuccess:function(e){c((0,F.t)("tiptap.extensions.poll.edit_success")),p.setQueryData(["poll",e.sgid],e),i(e),s.remove()}}),v=y.mutate,g=y.isLoading;if((0,e4.y1)("mod+enter",function(e){e.preventDefault(),e.stopPropagation()}),f)return(0,n.jsx)(eJ.m,{});var x=!o||!(null==d||null==(t=d.results)?void 0:t.total_responses),j=o?{title:null==d?void 0:d.title,poll_options:null==d?void 0:d.poll_options,allow_members_to_view_results:null==d?void 0:d.allow_members_to_view_results,enable_poll_duration:!!(null==d?void 0:d.closes_at),closes_at:null==d?void 0:d.closes_at}:{title:"",poll_options:[td],allow_members_to_view_results:!0,enable_poll_duration:!1,closes_at:null};return(0,n.jsxs)(e9.l,{onSubmit:function(e){if(e.enable_poll_duration||(e.closes_at=null),o&&d){var t,r;v((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={id:d.id},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}else b(e)},defaultValues:j,validationSchema:tc.Ry().shape({title:tc.Z_().required((0,F.t)("tiptap.extensions.poll.validation_errors.title_required")),poll_options:tc.IX().of(tc.Ry().shape({value:tc.Z_().required((0,F.t)("tiptap.extensions.poll.validation_errors.option_value_required"))})).min(2,(0,F.t)("tiptap.extensions.poll.validation_errors.options_minimum")).max(5,(0,F.t)("tiptap.extensions.poll.validation_errors.options_maximum",{maximum:5})).test("unique-option-values",(0,F.t)("tiptap.extensions.poll.validation_errors.options_unique"),tu).required((0,F.t)("tiptap.extensions.poll.validation_errors.options_minimum"))}),className:"h-full",formClassName:"h-full flex flex-col mb-0",children:[(0,n.jsxs)(z.u_.Header,{children:[(0,n.jsx)(z.u_.Title,{size:"sm",children:(0,F.t)(o?"tiptap.extensions.poll.edit":"tiptap.extensions.poll.title")}),(0,n.jsx)(z.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-4",children:(0,n.jsx)(z.u_.CloseButton,{onClick:l})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto px-5 py-4 md:px-0",children:[(0,n.jsx)("div",{className:"md:px-8",children:(0,n.jsx)(e9.l.Item,{name:"title",label:(0,F.t)("tiptap.extensions.poll.ask_a_question"),placeholder:(0,F.t)("tiptap.extensions.poll.question_placeholder"),hideDescription:!0,hideBorder:!0,isFirstChild:!0,children:(0,n.jsx)(e9.l.Input,{ref:r})})}),(0,n.jsx)(e9.l.Item,{label:(0,F.t)("tiptap.extensions.poll.options"),hideBorder:!0,hideDescription:!0,tooltipText:x?"":(0,F.t)("tiptap.extensions.poll.cannot_edit_options"),labelWrapperClassName:"md:px-8",children:(0,n.jsx)(tm,{disabled:!x})}),(0,n.jsxs)("div",{className:"md:px-8",children:[(0,n.jsx)("div",{className:"border-primary mt-2 border-b"}),(0,n.jsx)(e7.l,{fieldId:"",hideBorder:!0,label:(0,F.t)("tiptap.extensions.poll.settings.title")}),(0,n.jsx)(e9.l.Checkbox,{id:"allow_members_to_view_results",name:"allow_members_to_view_results",label:(0,F.t)("tiptap.extensions.poll.settings.allow_members_to_view_results"),description:"",className:"!mt-0"}),(0,n.jsx)(e9.l.Checkbox,{id:"enable_poll_duration",name:"enable_poll_duration",label:(0,F.t)("tiptap.extensions.poll.settings.poll_duration"),rules:{},description:"",className:"!mt-2"}),(0,n.jsx)(th,{})]})]}),(0,n.jsx)(tx,{isEdit:!0,isLoading:g||h})]})},tO=function(e){var t=e.pollSgid,r=(0,X.dd)(),o=(0,i.useRef)(null),a=(0,R.useQueryClient)();return(0,n.jsxs)(z.u_,{isOpen:r.visible,onClose:r.remove,initialFocus:o,children:[(0,n.jsx)(z.u_.Overlay,{}),(0,n.jsx)(z.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,n.jsx)(tj,{isEdit:!0,pollSgid:t,closeModal:r.remove,onComplete:function(){return a.removeQueries(["poll",t])},initialFocusRef:o})})]})},tw=r(67803),tS=r(76972),t_=r(69690),tN=r(11699),tP=r(43271),tk=r(80171);function tD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tE=function(e){var t,r,o=e.poll,a=e.canUndo,l=e.undo,s=o.results&&"total_responses"in o.results,c=(t=(0,i.useState)(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tD(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tD(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=function(){if(o.closes_at){var e=new Date(o.closes_at),t=new Date,r=(0,tw.Z)(e,t),n=(0,tS.Z)(e,t)%24,i=(0,t_.Z)(e,t)%60,a=(0,tN.Z)(e,t)%60;return r>0?(0,F.t)("tiptap.extensions.poll.days_left",{count:r}):n>0?(0,F.t)("tiptap.extensions.poll.hours_left",{count:n}):i>0?(0,F.t)("tiptap.extensions.poll.minutes_left",{count:i}):a>0?(0,F.t)("tiptap.extensions.poll.seconds_left",{count:a}):(0,F.t)("tiptap.extensions.poll.closed")}};return(0,i.useEffect)(function(){if(o.closes_at&&(d(f()),10>(0,t_.Z)(new Date(o.closes_at),new Date))){var e=setInterval(function(){return d(f())},1e3);return function(){return clearInterval(e)}}},[]),(0,n.jsxs)("div",{className:"flex items-center space-x-1","data-testid":"poll-footer",children:[s&&(0,n.jsx)(H.Z.LabelSm,{weight:"regular","data-testid":"poll-total-votes",children:(0,F.t)("tiptap.extensions.poll.votes",{count:(null==(r=o.results)?void 0:r.total_responses)||0})}),s&&o.closes_at&&(0,n.jsx)("span",{className:"mx-px",children:(0,F.t)("separator_dot")}),o.closes_at&&(0,n.jsx)(tk.T,{className:"flex items-center",content:(0,F.t)("tiptap.extensions.poll.closes_at",{date:(0,tP.default)(new Date(o.closes_at),"MMMM do, yyyy, h:mm a")}),dataTestId:"poll-closes-at",children:(0,n.jsx)(H.Z.LabelSm,{weight:"regular",children:u})}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mx-px",children:(0,F.t)("separator_dot")}),(0,n.jsx)("button",{type:"button",className:"focus:bg-secondary hover:bg-secondary flex items-center rounded px-0.5",onClick:l,children:(0,n.jsx)(H.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,F.t)("tiptap.extensions.poll.undo")})})]})]})},tA=function(e){return e.checked?(0,n.jsx)("div",{className:"border-secondary bg-dark-primary-button my-0.5 flex h-5 w-5 items-center justify-center rounded-full",children:(0,n.jsx)("div",{className:"bg-primary h-2 w-2 rounded-full"})}):(0,n.jsx)("div",{className:"border-primary bg-primary my-0.5 h-5 w-5 rounded-full border"})},tT=r(80301),tC=r(83780),tI=function(e){var t,r=e.pollOptionId,o=e.pollId,a=e.pollValue,l=e.percentage,s=(0,X.dd)(),c=(0,tC.m)(V.av.polls.voteList({pollId:o,pollOptionId:r,params:{per_page:15}}),{enabled:!!o&&!!r},["poll-vote-list",o,r]),u=c.data,d=c.isLoading,f=c.fetchNextPage,p=c.hasNextPage,m=c.mapPages,b=(0,i.useMemo)(function(){return(0,D.flatten)(m(function(e){return e.records}))},[m]),h=null==u||null==(t=u.pages[0])?void 0:t.count;return(0,n.jsxs)(z.u_,{isOpen:s.visible,onClose:s.remove,children:[(0,n.jsx)(z.u_.Overlay,{}),(0,n.jsxs)(z.u_.Content,{shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(z.u_.Header,{children:[(0,n.jsx)(z.u_.Title,{size:"sm",children:a}),(0,n.jsx)(z.u_.HeaderActions,{children:(0,n.jsx)(z.u_.CloseButton,{onClick:s.hide})})]}),!d&&(0,n.jsx)(H.Z.LabelSm,{weight:"regular",children:(0,n.jsxs)("div",{className:"space-x-1 px-5 pb-4 md:px-8",children:[(0,n.jsxs)("span",{children:[l,"%"]}),(0,n.jsx)("span",{children:(0,F.t)("separator_dot")}),(0,n.jsx)("span",{children:(0,F.t)("tiptap.extensions.poll.votes",{count:h})})]})}),(0,n.jsx)(z.u_.Body,{id:"post-likes-modal-".concat(o,"-").concat(r),className:"overflow-auto pb-4 pt-0 sm:max-h-80",children:d?(0,n.jsx)(eJ.m,{}):(0,n.jsx)(eZ.Z,{scrollThreshold:.75,next:f,hasMore:p||!1,loader:(0,n.jsx)(eJ.m,{}),scrollableTarget:"post-likes-modal-".concat(o,"-").concat(r),dataLength:b.length,className:"flex flex-col space-y-4",children:b.map(function(e){return(0,n.jsx)(tT.N,{member:e.community_member,hideModal:s.hide},e.id)})})})]})]})},tM=function(e){var t,r,i,o,a=e.option,l=e.selectedOptionId,s=e.setSelectedOptionId,c=e.canRespond,u=e.poll,d=e.shouldShowResults,f=(0,R.useQueryClient)(),p=(0,X.dd)(X.gk.create(function(e){return(0,n.jsx)(tI,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})).show,m=(0,R.useMutation)(function(e){return(0,ek.Cu)(V.av.polls.respond(u.id),{poll_option_id:e})},{onSuccess:function(e){(0,D.isEmpty)(e)||f.setQueryData(["poll",u.sgid],function(t){if(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),n=n={community_member_response_option_id:a.id,results:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}})}}),b=null!=(o=null==(i=u.results)||null==(r=i.detailed_results)||null==(t=r.find(function(e){return e.poll_option_id===a.id}))?void 0:t.percentage)?o:0,h=l===a.id,y="closed"===u.status,v=!c||y||!!l;return(0,n.jsxs)("div",{className:k()("relative flex w-full items-start overflow-hidden rounded-lg border p-3.5",{"hover:border-dark hover:bg-secondary focus:border-dark group":!v,"border-darkest":h,"border-primary":!h}),"data-testid":"poll-option",children:[(0,n.jsxs)("button",{type:"button",disabled:v,onClick:function(){c&&s(a.id),m.mutate(a.id)},className:"flex w-full items-start","data-testid":"select-poll-option",children:[d&&(0,n.jsx)("div",{className:"bg-tertiary absolute inset-y-0 left-0 -z-10 h-full w-full",style:{width:"".concat(b,"%")}}),!y&&(0,n.jsx)(tA,{checked:h}),(0,n.jsx)("div",{className:"ml-3 mr-4 flex-1 text-left",children:(0,n.jsx)(H.Z.LabelMd,{weight:"regular",children:a.value})})]},a.id),d&&(0,n.jsxs)("div",{className:"flex shrink-0 items-center space-x-1","data-testid":"poll-option-info",children:[(0,n.jsxs)(H.Z.LabelSm,{weight:"regular",children:[b,"%"]}),(0,n.jsx)(e5.h,{ariaLabel:"",name:"16-chevron-right",iconSize:16,onClick:function(){p({pollId:u.id,pollOptionId:a.id,pollValue:a.value,percentage:b})},dataTestId:"open-poll-option-info"})]})]})};function tL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||t$(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tF(e){return function(e){if(Array.isArray(e))return tL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t$(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t$(e,t){if(e){if("string"==typeof e)return tL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tL(e,t)}}var tU=function(e){var t=e.poll,r=e.isEditable,o=e.deleteNode,a=(0,ed.wh)().currentCommunityMember,l=(0,ed.L2)().data,s=(0,e3.Y_)(l),c=tn(),u=c.handleExportPollResponses,d=c.isExporting,f=(0,X.dd)(X.gk.create(function(e){return(0,n.jsx)(tO,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})),p=tR((0,i.useState)(!t.community_member_response_option_id&&!!a),2),m=p[0],b=p[1],h=tR((0,i.useState)(t.community_member_response_option_id),2),y=h[0],v=h[1],g=tR((0,i.useState)(0),2),x=g[0],j=g[1],O=!!(t.results&&"detailed_results"in t.results),w=tr();(0,i.useEffect)(function(){y&&(0,D.delay)(function(){b(!1)},15e3)},[y]);var S=!!(y&&m&&x<1);return(0,n.jsx)(e8.T,{children:(0,n.jsxs)("div",{className:"border-primary space-y-4 rounded-lg border px-6 py-5","data-testid":"poll-wrapper",children:[(0,n.jsxs)("div",{className:"text-darkest flex items-start justify-between","data-testid":"poll-header",children:[(0,n.jsx)(H.Z.TitleSm,{weight:"semibold",children:t.title}),(r||s)&&(0,n.jsx)(e6.Lt,{direction:"bottom-end",linkType:"button",button:(0,n.jsx)("div",{children:(0,n.jsx)(e6.Lt.MenuButton,{children:(0,n.jsx)(e5.h,{ariaLabel:(0,F.t)("options_dropdown"),name:"16-menu-dots-horizontal"})})}),options:tF(r?[{label:(0,F.t)("tiptap.extensions.poll.edit"),onClick:function(){return f.show({pollSgid:t.sgid})},value:"edit"},{label:(0,F.t)("tiptap.extensions.poll.remove"),value:"remove",onClick:function(){return o()}}]:[]).concat(tF(s?[{label:(0,F.t)("tiptap.extensions.poll.export_responses_csv"),value:"export_csv",onClick:function(){return u(t.id)},isDisabled:d}]:[])),dataTestId:"poll-".concat(t.id,"-").concat(r?"edit":"view","-actions")})]}),(0,n.jsx)("div",{className:"space-y-3","data-testid":"poll-options",children:t.poll_options.map(function(e){return(0,n.jsx)(tM,{poll:t,option:e,canRespond:m,selectedOptionId:y,setSelectedOptionId:v,shouldShowResults:O},e.id)})}),(0,n.jsx)(tE,{poll:t,canUndo:S,undo:function(){v(void 0),b(!0),j(x+1),w.mutate(t.id)}})]})})},tX=function(e){var t,r,i=e.node,o=e.editor,a=e.deleteNode,l=tt({sgid:null==(t=i.attrs)?void 0:t.sgid,options:{enabled:!!(null==(r=i.attrs)?void 0:r.sgid)}}),s=l.data,c=l.isLoading;return(0,n.jsx)(N.T5,{as:"div",children:c||!s?(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(eJ.m,{})}):(0,n.jsx)(tU,{deleteNode:a,isEditable:o.isEditable,poll:s})})},tB=I.NB.create({name:"poll",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"polls-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["polls-react",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(tX)}}),tz=function(e){var t=e.editor,r=e.range,o=e.addToLocalSgidToObjectMap,a=(0,X.dd)(),l=(0,i.useRef)(null);return(0,n.jsxs)(z.u_,{isOpen:a.visible,onClose:a.remove,initialFocus:l,className:"h-full max-h-full overflow-visible",children:[(0,n.jsx)(z.u_.Overlay,{}),(0,n.jsx)(z.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,n.jsx)(tj,{closeModal:a.remove,onComplete:function(e){t.chain().focus().insertContentAt(r,[{type:"poll",attrs:{sgid:e.sgid}},{type:"hardBreak"}]).run(),o({sgid:e.sgid,object:e})},initialFocusRef:l})})]})},tq=r(92007);function tZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tH=function(e){var t=e.types,r=e.node;return r&&(Array.isArray(t)&&t.includes(r.type)||r.type===t)},tV=I.hj.create({name:"trailingNode",addOptions:function(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins:function(){var e=this,t=new tq.H$(this.name),r=Object.entries(this.editor.schema.nodes).map(function(e){return(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tZ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tZ(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1]}).filter(function(t){return e.options.notAfter.includes(t.name)});return[new tq.Sy({key:t,appendTransaction:function(r,n,i){var o=i.doc,a=i.tr,l=i.schema,s=t.getState(i),c=o.content.size,u=l.nodes[e.options.node];if(s)return a.insert(c,u.create())},state:{init:function(e,t){var n=t.tr.doc.lastChild;return n&&!tH({node:n,types:r})},apply:function(e,t){return e.docChanged?!tH({node:e.doc.lastChild,types:r}):t}}})]}}),tW=r(45697),tJ=r.n(tW),tG=r(85924),tK=r(4583),tQ=r(22148),tY=r(26703),t0=r(34982),t1=r(66522),t2=r(41928),t3=r(43066),t8=r(25362),t6=r(46582),t5=r(68204);function t4(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var t9=function(){var e=(0,t6.b)(),t=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,Promise.all(Object.keys(r).map(function(e){return t8.ZP.hide(e)}))];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){t4(o,n,i,a,l,"next",e)}function l(e){t4(o,n,i,a,l,"throw",e)}a(void 0)})})()},r=(0,i.useContext)(t8.ZP.NiceModalContext);return{openUpgradeModal:function(){e.show({feature:t5.Kj,onSuccess:t}).catch(function(e){console.error("Error showing Community AI Modal:",e)})}}},t7=function(){var e,t=(0,ed.wh)(),r=t.currentCommunityMember,n=t.currentCommunity,i=t.isLoading;return{shouldShowCopilot:!i&&!!(null==r||null==(e=r.policies)?void 0:e.can_use_copilot),shouldShowPlanUpgradeModal:!i&&!(null==n?void 0:n.community_ai_feature_flag_enabled)&&!(null==n?void 0:n.content_copilot_ui_enabled)&&(null==r?void 0:r.is_admin)}},re=function(e){var t=e.editor,r=t9().openUpgradeModal,i=t7().shouldShowPlanUpgradeModal,o=function(){var e=t.state,r=e.selection.$to.after(),n=e.selection.$from.pos,i=e.selection.$to.pos;t.chain().focus().setHighlight({color:"#B3D8FF"}).run(),t.commands.insertContentAt(r,{type:"aicopilot",attrs:{placeholder:(0,F.t)("tiptap.extensions.ai_copilot.input.edit_placeholder"),range:{from:n,to:i}}})};return(0,n.jsx)("button",{type:"button",onClick:function(){i?r():o()},className:"text-dark hover:bg-secondary rounded-md p-1.5 pr-2 transition-colors",children:(0,n.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,n.jsx)($.JO,{type:"16-ask-ai-gradient",size:16}),(0,n.jsx)(H.Z.LabelSm,{weight:"medium",color:"from-ai-start to-ai-end bg-gradient-to-r bg-clip-text text-transparent",children:(0,F.t)("tiptap.bubble_menu.ai_copilot")})]})})},rt=function(e,t){return(0,n.jsx)(n.Fragment,{children:t.map(function(t){return(0,n.jsx)(tK.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isActive:(0,D.isFunction)(t.isActiveFn)?t.isActiveFn():e.isActive(t.name)},t),t.name)})})},rr=function(e){var t=e.editor,r=e.shouldShowCopilot,i=e.showListsInTextModifierMenu,o=void 0!==i&&i,a=e.placement,l=e.headingLevels,s=e.allowBubbleMenuOverflow,c=(0,t0.K)(),u=(0,tG.ww)().isAdminUsageContext,d=np(),f=(null==d?void 0:d.isWithinEmailEditor)||!1,p=(0,t2.m)(),m=(0,tY.k)(void 0===a?"top":a,void 0===s||s),b=[{name:"bold",iconType:"20-character-bold",label:(0,F.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,F.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"h1",iconType:"16-heading1",label:(0,F.t)("tiptap.bubble_menu.h1"),onClick:function(){return t.chain().focus().toggleHeading({level:1}).run()},isActiveFn:function(){return t.isActive("heading",{level:1})}},{name:"h2",iconType:"20-character-h2",label:(0,F.t)("tiptap.bubble_menu.h2"),onClick:function(){return t.chain().focus().toggleHeading({level:2}).run()},isActiveFn:function(){return t.isActive("heading",{level:2})}},{name:"h3",iconType:"20-character-h3",label:(0,F.t)("tiptap.bubble_menu.h3"),onClick:function(){return t.chain().focus().toggleHeading({level:3}).run()},isActiveFn:function(){return t.isActive("heading",{level:3})}},{name:"strike",iconType:"20-character-strike",label:(0,F.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,F.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"link",iconType:"20-character-link",label:(0,F.t)("tiptap.bubble_menu.link"),onClick:function(){return c.show({editor:t,isAdminUsageContext:u})}},{name:"bullet_list",iconType:"16-editor-ul",label:(0,F.t)("tiptap.bubble_menu.bullet_list"),onClick:function(){return t.chain().focus().toggleBulletList().run()}},{name:"ordered_list",iconType:"16-editor-ol",label:(0,F.t)("tiptap.bubble_menu.ordered_list"),onClick:function(){return t.chain().focus().toggleOrderedList().run()}}].filter(function(e){return("h1"!==e.name||!!l.includes(1))&&("h2"!==e.name||!!l.includes(2))&&("h3"!==e.name||!!l.includes(3))&&("bullet_list"!==e.name||!!o)&&!("ordered_list"===e.name&&!o)}),h=[{name:"align-left",iconType:"20-alignment-left",label:(0,F.t)("settings.emails.builder.align_left"),onClick:function(){return t.chain().focus().setTextAlign(t1.$.LEFT).run()},isActiveFn:function(){return(0,t3.K)(t,t1.$.LEFT)}},{name:"align-center",iconType:"20-alignment-center",label:(0,F.t)("settings.emails.builder.align_center"),onClick:function(){return t.chain().focus().setTextAlign(t1.$.CENTER).run()},isActiveFn:function(){return(0,t3.K)(t,t1.$.CENTER)}},{name:"align-right",iconType:"20-alignment-right",label:(0,F.t)("settings.emails.builder.align_right"),onClick:function(){return t.chain().focus().setTextAlign(t1.$.RIGHT).run()},isActiveFn:function(){return(0,t3.K)(t,t1.$.RIGHT)}}];return(0,n.jsx)(N.NM,{editor:t,tippyOptions:m,shouldShow:tQ.E,children:(0,n.jsxs)("div",{className:"bg-primary border-primary divide-primary flex gap-1 divide-x rounded-lg border p-1 shadow-sm",children:[void 0!==r&&r&&(0,n.jsx)(re,{editor:t}),(0,n.jsx)("div",{children:rt(t,b)}),p&&f&&(0,n.jsx)("div",{className:"flex items-center justify-center pl-2",children:rt(t,h)})]})})};function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}rr.propTypes={editor:tJ().object.isRequired,shouldShowCopilot:tJ().bool,showListsInTextModifierMenu:tJ().bool,placement:tJ().oneOf(["top","bottom"]),headingLevels:tJ().arrayOf(tJ().number),allowBubbleMenuOverflow:tJ().bool};var ri=(0,i.createContext)({});ri.displayName="AiBlockContext";var ro=function(){return(0,i.useContext)(ri)},ra=function(e){var t,r=e.children,o=e.editor,a=e.node,l=e.getPos,s=e.deleteNode,c=a.attrs.range,u=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rn(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rn(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1];return(0,n.jsx)(ri.Provider,{value:{editor:o,node:a,getPos:l,deleteNode:s,isLoadingResponse:d,setIsLoadingResponse:f,cleanupNode:function(){c&&(o.commands.setTextSelection({from:0,to:o.state.doc.content.size}),o.chain().focus().unsetHighlight().run()),o.commands.setTextSelection(l()+1),s()}},children:r})};ra.propTypes={children:tJ().element.isRequired};var rl=function(e){var t=e.children,r=(0,i.useRef)(null),o=ro(),a=o.isLoadingResponse,l=o.cleanupNode;return(0,e4.y1)("esc",l,{enableOnFormTags:["INPUT"],enableOnContentEditable:!0,enabled:!a}),(0,i.useEffect)(function(){var e=function(e){if(a){e.preventDefault(),e.stopPropagation();return}r.current&&!r.current.contains(e.target)&&l()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[a,l]),(0,n.jsx)("div",{ref:r,children:t})},rs=r(50815),rc=(0,i.forwardRef)(function(e,t){var r=e.className,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className"]);return(0,n.jsx)(rs.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,autoComplete:"off",minRows:1,maxRows:3,type:"text",className:k()("text-dark placeholder:text-default w-full resize-none border-0 bg-transparent p-0 leading-5 outline-none focus:ring-0",r)},i))});rc.displayName="Input";var ru=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:k()("bg-primary flex items-start gap-3 rounded-md px-4 py-2.5 shadow-md",r),children:t})};ru.AiIcon=function(){return(0,n.jsx)("span",{className:"flex items-start",children:(0,n.jsx)($.JO,{type:"20-ask-ai-gradient",size:20,className:"h-5 w-5"})})},ru.Input=rc,ru.LoadingIcon=function(){return(0,n.jsx)("span",{className:"flex animate-spin items-center overflow-hidden",children:(0,n.jsx)($.JO,{type:"20-stardust-gradient",size:20,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})})},ru.Text=function(e){var t,r,i=e.hasGradient,o=e.children;return(0,n.jsx)(H.Z.LabelMd,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({weight:"medium"},i&&{color:"text-transparent bg-clip-text bg-gradient-to-r from-ai-start to-ai-end"}),r=r={children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ru.EditOptions=function(e){var t=e.options,r=e.onClick,o=e.activeIndex,a=e.setActiveIndex,l=e.shouldShowEnterIcon,s=(0,i.useRef)(null);return(0,i.useEffect)(function(){s.current&&s.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[o]),(0,n.jsxs)("div",{className:"bg-primary text-dark border-primary absolute top-full mt-1 max-h-80 w-80 overflow-auto rounded-lg border p-2 shadow-xl",children:[(0,n.jsx)("div",{className:"px-4 py-0.5",children:(0,n.jsx)(H.Z.LabelXxs,{color:"text-light",weight:"semibold",children:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.title")})}),t.map(function(e,t){var i=function(){return a(t)};return(0,n.jsxs)("button",{ref:t===o?s:null,type:"button",onMouseOver:i,onFocus:i,className:k()("text-default hover:text-dark flex w-full items-center gap-2 rounded-md px-4 py-2 text-left text-sm font-normal transition-colors",{"bg-secondary":t===o}),onClick:function(){return r({item:e,index:t})},children:[(0,n.jsx)("span",{className:"flex items-center",children:(0,n.jsx)($.JO,{type:"16-thunder",className:"!h-4 !w-4",size:16})}),(0,n.jsx)("span",{className:"text-dark",children:e.label}),t===o&&l&&(0,n.jsx)("span",{className:"ml-auto flex items-center",children:(0,n.jsx)($.JO,{type:"16-arrow-enter",className:"!h-4 !w-4",size:16})})]},e.label)})]})};var rd=function(){return(0,n.jsxs)(ru,{children:[(0,n.jsx)(ru.LoadingIcon,{}),(0,n.jsx)(ru.Text,{hasGradient:!0,children:(0,F.t)("tiptap.extensions.ai_copilot.input.generating")})]})},rf="help_write",rp=r(30242);function rm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rb(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var rh=function(){var e,t=(e=(0,A.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rm(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rm(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return{createCompletion:function(e){var t,r=e.type,i=e.previous_text,o=void 0===i?"":i,a=e.user_prompt,l=e.title,s=e.onOpen,c=e.onMessage,u=e.onClose;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return n(!0),[4,(0,rp.L)("/internal_api/copilot/completions",{method:"POST",body:JSON.stringify({context:{title:l,previous_text:o,type:r,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?s():e.status>=400&&e.status<500&&429!==e.status&&n(!1)},onmessage:function(e){c(JSON.parse(e.data).content)},onclose:function(){n(!1),u()},onerror:function(e){throw n(!1),e}})];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){rb(o,n,i,a,l,"next",e)}function l(e){rb(o,n,i,a,l,"throw",e)}a(void 0)})})()},isLoading:r}},ry=r(50308),rv=r.n(ry),rg=r(40539),rx=function(e){var t=e.isLoading,r=(0,ed.Zh)().setIsSubmitEnabled,n=void 0===r?rv():r,o=(0,rg.D)().setIsSubmitEnabled,a=void 0===o?rv():o;(0,i.useEffect)(function(){n(!t),a(!t)},[t,n,a])},rj=r(44815),rO=[{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.suggest_ideas.label"),value:"suggest_ideas"},{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.outline.label"),value:"outline"},{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.paragraph.label"),value:"paragraph"},{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.conclusion.label"),value:"conclusion"}],rw=function(e){var t=e.onClick,r=(0,rj.t)({optionsCount:rO.length,onEnter:function(e){t(rO[e].value,(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.".concat(rO[e].value,".prompt_prefix")))}}),i=r.activeIndex,o=r.setActiveIndex;return(0,n.jsx)(ru.EditOptions,{activeIndex:i,setActiveIndex:o,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:rO,shouldShowEnterIcon:!0})};function rS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rS(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rN=function(){var e,t,r=r_((0,i.useState)(""),2),o=r[0],a=r[1],l=r_((0,i.useState)(!1),2),s=l[0],c=l[1],u=(0,i.useRef)(null),d=rh(),f=d.createCompletion,p=d.isLoading,m=np().aiCopilotTitle,b=ro(),h=b.editor,y=b.node,v=b.getPos,g=b.setIsLoadingResponse,x=r_((0,i.useState)(rf),2),j=x[0],O=x[1];rx({isLoading:p}),(0,i.useEffect)(function(){u.current.focus()},[]),(0,i.useEffect)(function(){g(p)},[p,g]);var w=function(e){e.stopPropagation(),e.preventDefault(),o&&!s&&(c(!0),f({type:j,title:m,user_prompt:o,previous_text:h.state.doc.textBetween(0,v(),"\n",". "),onMessage:_,onOpen:N,onClose:S}))},S=function(){O(rf),a(""),c(!1),u.current.focus()},_=function(e){h.commands.insertContent(e),P()},N=function(){h.commands.insertContentAt(v(),"\n"),a("")},P=function(){document.querySelectorAll(["[data-ai-scrollable]"]).forEach(function(e){e.scrollTop=e.scrollTop+24})};return p?(0,n.jsx)(rd,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{onSubmit:w,children:(0,n.jsxs)(ru,{children:[(0,n.jsx)(ru.AiIcon,{}),(0,n.jsx)(ru.Input,{ref:u,id:"input-".concat(null==(e=y.attrs)?void 0:e.id),placeholder:null==(t=y.attrs)?void 0:t.placeholder,onChange:function(e){return a(e.target.value)},value:o,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(e))}})]})}),!o&&(0,n.jsx)(rw,{onClick:function(e,t){O(e),a(t),u.current.focus()}})]})},rP=r(795);function rk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rD(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var rE=function(){var e,t=(e=(0,A.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rk(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rk(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return{createEdition:function(e){var t,r=e.type,i=e.selected_text,o=void 0===i?"":i,a=e.user_prompt,l=e.onOpen,s=e.onMessage,c=e.onClose;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return n(!0),[4,(0,rp.L)("/internal_api/copilot/editions",{method:"POST",body:JSON.stringify({context:{selected_text:o,type:r,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?l():e.status>=400&&e.status<500&&429!==e.status&&n(!1)},onmessage:function(e){s(JSON.parse(e.data).content)},onclose:function(){n(!1),c()},onerror:function(){n(!1)}})];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){rD(o,n,i,a,l,"next",e)}function l(e){rD(o,n,i,a,l,"throw",e)}a(void 0)})})()},isLoading:r}},rA=function(e){var t=e.onClick,r="tiptap.extensions.ai_copilot.prompt_options.editions",i=[{label:(0,F.t)("".concat(r,".improve_writing")),value:"improve_writing"},{label:(0,F.t)("".concat(r,".fix_text")),value:"fix_text"},{label:(0,F.t)("".concat(r,".make_shorter")),value:"make_shorter"},{label:(0,F.t)("".concat(r,".make_longer")),value:"make_longer"},{label:(0,F.t)("".concat(r,".simplify_language")),value:"simplify_language"},{label:(0,F.t)("".concat(r,".summarize")),value:"summarize"},{label:(0,F.t)("".concat(r,".explain")),value:"explain"},{label:(0,F.t)("".concat(r,".translate_spanish")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_french")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_dutch")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_italian")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_portuguese")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_english")),value:"translate"}],o=(0,rj.t)({optionsCount:i.length,onEnter:function(e){t(i[e].value,i[e].label)}}),a=o.activeIndex,l=o.setActiveIndex;return(0,n.jsx)(ru.EditOptions,{activeIndex:a,setActiveIndex:l,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:i,shouldShowEnterIcon:!0})},rT=function(e){var t=e.promptResponse,r=ro(),i=r.node,o=r.editor,a=r.cleanupNode,l=i.attrs.range,s=o.state.selection.$to.after(),c=[{label:(0,F.t)("tiptap.replace_selection"),value:"replace",onClick:function(){o.commands.setTextSelection(l),o.commands.insertContentAt(l,t),a()}},{label:(0,F.t)("tiptap.insert_bellow"),value:"insert_below",onClick:function(){o.commands.insertContentAt(s,t),a()}}],u=function(e){(0,D.isFunction)(c[e].onClick)&&c[e].onClick()},d=(0,rj.t)({optionsCount:c.length,onEnter:function(e){u(e)}}),f=d.activeIndex,p=d.setActiveIndex;return(0,n.jsx)(ru.EditOptions,{activeIndex:f,setActiveIndex:p,onClick:function(e){return u(e.index)},options:c,shouldShowEnterIcon:!0})};function rC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rC(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rM=function(){var e,t,r=(0,i.useRef)(null),o=rI((0,i.useState)(""),2),a=o[0],l=o[1],s=rI((0,i.useState)(!1),2),c=s[0],u=s[1],d=rE(),f=d.createEdition,p=d.isLoading,m=rI((0,i.useState)(""),2),b=m[0],h=m[1],y=rI((0,i.useState)(""),2),v=y[0],g=y[1],x=ro(),j=x.node,O=x.editor,w=j.attrs.range,S=O.state.doc.textBetween(w.from,w.to,"\n",". "),_=rI((0,i.useState)(!1),2),N=_[0],P=_[1];rx({isLoading:p}),(0,i.useEffect)(function(){!p&&b&&P(!0)},[p,b]),(0,i.useEffect)(function(){r.current.focus()},[]),(0,i.useEffect)(function(){a&&E()},[v]);var k=function(e){h(function(t){return t+e})},D=function(){l(""),g(""),u(!1),r.current.focus()},E=function(){a&&!c&&(h(""),u(!0),f({type:v||"improve_writing",user_prompt:a,selected_text:S,onMessage:k,onOpen:function(){l("")},onClose:D}))},A=function(e){e.stopPropagation(),e.preventDefault(),E()};return(0,n.jsxs)("div",{className:"bg-primary rounded-md",children:[b&&(0,n.jsx)("div",{className:"select-none p-4",children:(0,n.jsx)(rP.w,{content:b})}),p?(0,n.jsx)(rd,{}):(0,n.jsx)("form",{onSubmit:A,children:(0,n.jsxs)(ru,{children:[(0,n.jsx)(ru.AiIcon,{}),(0,n.jsx)(ru.Input,{ref:r,id:"input-".concat(null==(e=j.attrs)?void 0:e.id),placeholder:null==(t=j.attrs)?void 0:t.placeholder,onChange:function(e){return l(e.target.value)},value:a,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A(e))}})]})}),!a&&!b&&(0,n.jsx)(rA,{onClick:function(e,t){l(t),g(e)}}),N&&!a&&(0,n.jsx)(rT,{promptResponse:b})]})},rL=function(e){var t=e.editor,r=e.node,i=e.getPos,o=e.deleteNode,a=r.attrs.range;return t7().shouldShowCopilot?(0,n.jsx)(ra,{editor:t,node:r,getPos:i,deleteNode:o,children:(0,n.jsx)(N.T5,{children:(0,n.jsx)(rl,{children:(0,n.jsx)("div",{className:"mx-auto my-4 flex items-center justify-center",children:(0,n.jsx)("div",{className:"from-ai-start to-ai-end relative z-10 w-full rounded-lg bg-gradient-to-r p-0.5 shadow-xl",children:a?(0,n.jsx)(rM,{}):(0,n.jsx)(rN,{})})})})})}):null},rR=I.NB.create({name:"aicopilot",group:"block",selectable:!1,atom:!0,renderHTML:function(e){return["aicopilot",e.HTMLAttributes,0]},addAttributes:function(){return{placeholder:{default:null},id:{default:(0,D.random)()},range:{default:null},type:{default:"completion"}}},parseHTML:function(){return[{tag:"aicopilot"}]},addNodeView:function(){return(0,N.fW)(rL)},addCommands:function(){return{addAiCopilotNode:function(){return function(e){return e.commands.insertContent({type:"aicopilot",attrs:{placeholder:(0,F.t)("tiptap.extensions.ai_copilot.input.placeholder")}})}}}}}),rF=r(35218),r$=r(66007),rU=function(e){var t,r=e.node,i=e.editor.isEditable,o=np()||{},a=o.sgidToObjectMap,l=o.localSgidToObjectMap,s=o.addToLocalSgidToObjectMap,c=null==r||null==(t=r.attrs)?void 0:t.sgid,u=a[c]||l[c];return(0,R.useQuery)(V.av.richTextFields.fetchOembed({sgid:c}),{enabled:!u&&i,retry:!1,retryOnMount:!1,onSuccess:function(e){null==s||s({sgid:c,object:e})}}).isLoading?(0,n.jsx)(N.T5,{as:"div",children:(0,n.jsx)($.JO,{type:"loader",size:16})}):u?!u.html&&u.url?(0,n.jsx)(N.T5,{as:"div",children:(0,n.jsxs)("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"bg-secondary hover:bg-tertiary border-primary group relative inline-flex max-w-full items-center justify-between space-x-4 break-all rounded border px-3 py-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(H.Z.LabelSm,{weight:"semibold",children:(0,D.truncate)(u.title,{length:100})})}),u.description&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(H.Z.LabelSm,{children:(0,D.truncate)(u.description,{length:100})})}),(0,n.jsx)("div",{children:(0,n.jsx)(H.Z.LabelSm,{color:"text-light",children:(0,D.truncate)(u.url,{length:100})})})]}),u.thumbnail_url&&(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)("img",{loading:"lazy",src:u.thumbnail_url,alt:u.title,className:"h-16 w-16 rounded object-contain"})})]})}):(0,n.jsx)(N.T5,{as:"div",children:(0,n.jsx)(r$.Z,{className:"overflow-auto",html:u.html})}):null},rX=I.NB.create({name:"embed",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"embed-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-react",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(rU)}}),rB=r(56516),rz=r(12367),rq=function(e){var t=e.isActive,r=e.onClick,i=e.iconType;return(0,n.jsx)("button",{type:"button",onClick:r,className:k()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded p-1",{"bg-text-editor-modifier-active":t}),children:(0,n.jsx)(ej.l,{type:i,iconSize:16})})},rZ=r(7963),rH=function(e){var t=e.editor,r=e.node,i=e.updateAttributes,o=e.deleteNode,a=r.attrs,l=a.use_intrinsic_size&&"left"===a.alignment,s="right"===a.alignment,c=1===a.width_ratio,u=a.use_intrinsic_size&&"center"===a.alignment,d=(0,rZ.v)();return(0,n.jsx)("div",{className:(0,es.A)("invisible absolute left-0 top-0 inline-flex w-full -translate-y-full items-center pb-1 hover:visible group-hover:visible group-active:visible",{"justify-start":l,"justify-center":u,"justify-end":s||c},{"justify-end":!l&&!s&&!c&&!u}),children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier flex rounded-md p-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(rq,{onClick:function(){i({alignment:"left",width_ratio:0,use_intrinsic_size:!0})},isActive:l,iconType:"16-image-left"}),(0,n.jsx)(rq,{onClick:function(){i({alignment:"center",width_ratio:0,use_intrinsic_size:!0})},isActive:u,iconType:"16-image-centre"}),(0,n.jsx)(rq,{onClick:function(){i({alignment:null,width_ratio:1,use_intrinsic_size:!0})},isActive:c,iconType:"16-image-full-width"}),(0,n.jsx)(rq,{onClick:function(){i({alignment:"right",width_ratio:0,use_intrinsic_size:!0})},isActive:s,iconType:"16-image-right"})]}),(0,n.jsx)("span",{className:"text-default m-1 inline-block w-px self-stretch bg-current","aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(rq,{onClick:function(){return d.show({editor:t})},isActive:!!a.href,iconType:"16-interface-link"}),(0,n.jsx)(rq,{onClick:o,isActive:!1,iconType:"16-trash"})]})]})})};function rV(e){var t=e.href,r=e.isEditable,i=e.children;return!t||void 0!==r&&r?(0,n.jsx)(n.Fragment,{children:i}):(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:i})}var rW=function(e){var t=e.attachmentMeta,r=e.node,i=e.editor,o=e.updateAttributes,a=e.deleteNode,l=r.attrs,s=l.alignment,c=l.width_ratio,u=l.href,d=1===c,f=i.isEditable;return(0,n.jsx)(N.T5,{as:"div",children:(0,n.jsx)("div",{className:"group relative",children:(0,n.jsx)("div",{className:(0,es.A)("flex",{"justify-center":"center"===s,"justify-start":"left"===s,"justify-end":"right"===s}),children:(0,n.jsxs)("div",{className:(0,es.A)("relative inline-block",{grow:d}),children:[(0,n.jsx)(rV,{href:u,isEditable:f,children:(0,n.jsx)("img",{loading:"lazy",alt:"",className:(0,es.A)("max-w-full",{"w-full":d}),src:t.url})}),f&&(0,n.jsx)(rH,{editor:i,node:r,deleteNode:a,updateAttributes:o})]})})})})},rJ=r(41877),rG=function(e){var t=e.node,r=e.updateAttributes;return(0,n.jsx)("div",{className:"invisible absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier space-x-1 overflow-hidden rounded-md p-1 text-sm",children:[(0,n.jsx)(rq,{onClick:function(){r({alignment:"left",width_ratio:.5})},isActive:"left"==t.attrs.alignment,iconType:"16-image-left"}),(0,n.jsx)(rq,{onClick:function(){r({alignment:"center",width_ratio:1})},isActive:"center"==t.attrs.alignment,iconType:"16-image-centre"})]})})},rK=function(e){var t,r=e.node,i=e.editor,o=e.attachmentMeta,a=e.onClickOpenAttachmentGallery,l=e.updateAttributes,s=e.deleteNode,c=(0,ed.wh)().currentCommunitySettings,u=(null!=(t=np())?t:{}).isWithinEmailEditor,d=null==c?void 0:c.progressive_image_loading_on_post_space_enabled,f=i.isEditable,p=(0,W.c)(o.content_type),m=f&&!u,b=f&&u,h=1;r.attrs.width_ratio?h=r.attrs.width_ratio:r.attrs.width&&(h="100%"===r.attrs.width?1:.5);var y="".concat(100*h,"%");return(0,n.jsxs)("div",{style:{width:y},className:k()("group relative",{"mx-auto":"center"===r.attrs.alignment}),children:[(0,n.jsx)("button",{type:"button",className:"w-full",onClick:a,"aria-label":(0,F.t)("tiptap.extensions.image_preview.view_attachment"),disabled:!f&&!p,children:d?(0,n.jsx)(rJ.Q,{alt:"",src:o.url,className:k()("w-full",{"cursor-zoom-in":!f&&p}),srcVariants:null==o?void 0:o.image_variants}):(0,n.jsx)("img",{loading:"lazy",alt:"",className:k()("w-full",{"cursor-zoom-in":!f&&p}),src:o.url})}),m&&(0,n.jsx)(rG,{node:r,updateAttributes:l}),b&&(0,n.jsx)(rH,{editor:i,node:r,updateAttributes:l,deleteNode:s})]})},rQ=function(e){var t,r,i=e.editor,o=e.node,a=e.updateAttributes,l=e.deleteNode,s=(0,rz.T)().show,c=i.isEditable,u=null!=(r=np())?r:{},d=u.localInlineAttachments,f=u.inlineAttachments,p=u.addToLocalInlineAttachments,m=u.isWithinEmailEditor,b=null==(t=o.attrs)?void 0:t.signed_id,h=(null==d?void 0:d.find(function(e){return e.signed_id===b}))||(null==f?void 0:f.find(function(e){return e.signed_id===b})),y=null==f?void 0:f.filter(function(e){return(0,W.c)(e.content_type)});return(0,R.useQuery)(V.av.richTextFields.fetchAttachment({signedId:b}),{enabled:!h&&c,retry:!1,retryOnMount:!1,onSuccess:p}).isLoading?(0,n.jsx)(N.T5,{as:"div",className:"my-4",children:(0,n.jsx)($.JO,{type:"loader",size:16})}):h?m&&(o.attrs.use_intrinsic_size||o.attrs.href)?(0,n.jsx)(N.T5,{as:"div",children:(0,n.jsx)(rW,{node:o,editor:i,attachmentMeta:h,updateAttributes:a,deleteNode:l})}):(0,n.jsx)(N.T5,{as:"div",children:(0,n.jsx)(rK,{node:o,editor:i,attachmentMeta:h,onClickOpenAttachmentGallery:function(){c||s({attachments:y,startIndex:null==y?void 0:y.findIndex(function(e){return e.signed_id==h.signed_id})})},updateAttributes:a,deleteNode:l})}):null},rY=I.NB.create({name:"image",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},signed_id:{default:null},content_type:{default:null},width:{},width_ratio:{},alignment:{default:"center"},use_intrinsic_size:{default:!1},href:{default:null}}},parseHTML:function(){return[{tag:"img-resizable"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["img-resizable",(0,I.P1)(t)]},addNodeView:function(){return(0,N.fW)(rQ)}}),r0=r(6233),r1=r(53397),r2=r(13735),r3=function(e){var t,r=e.activeMenuIndex,o=e.setActiveMenuIndex,a=e.flattenedCommands,l=e.item,s=e.editor,c=e.range,u=(null==(t=a[r])?void 0:t.name)===l.name,d=(0,i.useRef)();(0,i.useEffect)(function(){u&&d.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[u]);var f=function(){o(a.findIndex(function(e){return e.name===l.name}))};return(0,n.jsxs)("button",{type:"button",ref:d,onClick:function(){document.exitPointerLock&&document.exitPointerLock(),l.command({editor:s,range:c})},onMouseOver:f,onFocus:f,className:k()("text-dark flex items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":u}),children:[(0,n.jsx)($.JO,{type:l.icon,size:16}),(0,n.jsx)("div",{children:(0,n.jsx)(H.Z.LabelSm,{children:l.title})})]},l.name)},r8=function(e){var t=e.editor,r=e.range,n=e.activeMenuIndex,o=e.setActiveMenuIndex,a=e.items,l=e.ref,s=function(){n<a.length-1?o(n+1):o(0)},c=function(){n>0?o(n-1):o(a.length-1)},u=function(){var e;return null==(e=a[n])?void 0:e.command({editor:t,range:r})};(0,i.useImperativeHandle)(l,function(){return{onKeyDown:function(e){var t=e.event;if(["ArrowDown","ArrowUp","Enter"].includes(t.key)){switch(t.preventDefault(),t.stopPropagation(),document.body.requestPointerLock&&document.body.requestPointerLock(),t.key){case"ArrowDown":s();break;case"ArrowUp":c();break;case"Enter":u(),document.exitPointerLock&&document.exitPointerLock()}return!0}return!1}}})};function r6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var r5=(0,i.forwardRef)(function(e,t){var r,o=e.items,a=e.editor,l=e.range,s=(r=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return r6(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r6(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],d=o.flatMap(function(e){return e.commands});return(r8({ref:t,editor:a,range:l,items:d,activeMenuIndex:c,setActiveMenuIndex:u}),(0,i.useEffect)(function(){if(document.exitPointerLock){var e=function(){document.exitPointerLock()};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}},[]),o.length)?(0,n.jsx)("div",{className:"bg-primary border-primary relative max-h-[50vh] min-w-[250px] max-w-[320px] overflow-auto rounded border py-2 text-sm shadow-md","data-testid":"slash-commands-list",children:(0,n.jsx)("div",{className:"flex flex-col",children:o.map(function(e){return e.commands.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 px-5 py-2 uppercase first:pt-2",children:(0,n.jsx)(H.Z.LabelXxs,{color:"text-light",children:e.name})},e.name),e.commands.map(function(e){return(0,n.jsx)(r3,{activeMenuIndex:c,setActiveMenuIndex:u,flattenedCommands:d,item:e,editor:a,range:l},e.name)})]}):null})})}):null});r5.displayName="CommandsList";var r4=[{name:"youtube",title:(0,F.t)("tiptap.slash_commands.youtube")},{name:"wistia",title:(0,F.t)("tiptap.slash_commands.wistia")},{name:"vimeo",title:(0,F.t)("tiptap.slash_commands.vimeo")},{name:"loom",title:(0,F.t)("tiptap.slash_commands.loom")},{name:"soundcloud",title:(0,F.t)("tiptap.slash_commands.soundcloud")},{name:"spotify",title:(0,F.t)("tiptap.slash_commands.spotify")},{name:"simplecast",title:(0,F.t)("tiptap.slash_commands.simplecast")},{name:"instagram",title:(0,F.t)("tiptap.slash_commands.instagram")},{name:"facebook",title:(0,F.t)("tiptap.slash_commands.facebook")},{name:"twitter",title:(0,F.t)("tiptap.slash_commands.twitter")},{name:"typeform",title:(0,F.t)("tiptap.slash_commands.typeform")},{name:"airtable",title:(0,F.t)("tiptap.slash_commands.airtable")},{name:"github",title:(0,F.t)("tiptap.slash_commands.github")},{name:"google-maps",title:(0,F.t)("tiptap.slash_commands.google_maps")},{name:"codepen",title:(0,F.t)("tiptap.slash_commands.codepen")}];function r9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var r7=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,i=e.showGiphyPickerModal,o=e.showPollModal,a=e.showCTASettingsModal,l=e.showVoiceMessageModal,s=e.openUpgradeModal,c=e.shouldShowPlanUpgradeModal,u=r4.map(function(e){var r=e.name,n=e.title;return{name:r,title:n,icon:"16-editor-".concat(r),command:function(e){return t({editor:e.editor,range:e.range,provider:n})}}}),d=[{name:"ai_copilot",title:(0,F.t)("tiptap.slash_commands.co_pilot"),icon:"20-community-ai",command:function(e){var t=e.editor,r=e.range;c?s():t.chain().focus().deleteRange(r).addAiCopilotNode().run()}},{name:"paragraph",title:(0,F.t)("tiptap.slash_commands.paragraph"),icon:"16-editor-paragraph",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("paragraph").run()}},{name:"h1",title:(0,F.t)("tiptap.slash_commands.heading_1"),icon:"16-heading1",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:1}).run()}},{name:"h2",title:(0,F.t)("tiptap.slash_commands.heading_2"),icon:"16-editor-h2",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:2}).run()}},{name:"h3",title:(0,F.t)("tiptap.slash_commands.heading_3"),icon:"16-editor-h3",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:3}).run()}},{name:"ordered_list",title:(0,F.t)("tiptap.slash_commands.number_list"),icon:"16-editor-ol",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleOrderedList().run()}},{name:"bullet_list",title:(0,F.t)("tiptap.slash_commands.bullet_list"),icon:"16-editor-ul",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBulletList().run()}},{name:"block-quote",title:(0,F.t)("tiptap.slash_commands.blockquote"),icon:"16-editor-quote",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBlockquote().run()}},{name:"divider",title:(0,F.t)("tiptap.slash_commands.divider"),icon:"16-editor-divider",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setHorizontalRule().run()}},{name:"code",title:(0,F.t)("tiptap.slash_commands.code"),icon:"16-editor-code",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleCodeBlock().run()}},{name:"emoji",title:(0,F.t)("tiptap.slash_commands.emoji"),icon:"16-editor-emoji",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent(":").run()}},{name:"mention",title:(0,F.t)("tiptap.slash_commands.mention"),icon:"16-editor-mention",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent("@").run()}},{name:"cta",title:(0,F.t)("tiptap.slash_commands.cta"),icon:"16-link",command:a}],f=[{name:"poll",title:(0,F.t)("tiptap.slash_commands.poll"),icon:"16-editor-poll",command:o},{name:"image",title:(0,F.t)("tiptap.slash_commands.image"),icon:"16-editor-image",command:r},{name:"file",title:(0,F.t)("tiptap.slash_commands.file"),icon:"16-editor-file",command:n},{name:"audio",title:(0,F.t)("tiptap.slash_commands.audio"),icon:"16-editor-audio",command:function(e){return n({editor:e.editor,range:e.range,type:"audio"})}},{name:"voice_message",title:(0,F.t)("tiptap.slash_commands.voice_message"),icon:"16-microphone",command:l},{name:"video",title:(0,F.t)("tiptap.slash_commands.video"),icon:"16-editor-video",command:function(e){return n({editor:e.editor,range:e.range,type:"video"})}},{name:"pdf",title:(0,F.t)("tiptap.slash_commands.pdf"),icon:"16-editor-pdf",command:function(e){return n({editor:e.editor,range:e.range,type:"pdf"})}},{name:"giphy",title:(0,F.t)("tiptap.slash_commands.giphy"),icon:"16-editor-giphy",command:i}],p=[{name:"embed",title:(0,F.t)("tiptap.slash_commands.embed"),icon:"16-editor-embed",command:t}].concat(function(e){if(Array.isArray(e))return r9(e)}(u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return r9(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r9(e,t)}}(u)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return[{name:(0,F.t)("tiptap.slash_commands.basic"),commands:d},{name:(0,F.t)("tiptap.slash_commands.upload"),commands:f},{name:(0,F.t)("tiptap.slash_commands.embed"),commands:p}]};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nn={ai_copilot:["ai_copilot"],mention:["mention"],poll:["poll"],cta:["cta"]};let ni=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,i=e.showGiphyPickerModal,o=e.showPollModal,a=e.showCTASettingsModal,l=e.showVoiceMessageModal,s=e.disabledExtensions,c=e.disabledSlashMenuCategories,u=e.disabledSlashMenuCommands,d=e.shouldShowPlanUpgradeModal,f=e.openUpgradeModal,p=e.headingLevels;Object.entries(nn).forEach(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ne(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];s[r]&&n.forEach(function(e){u[e]=!0})});var m=function(e,t){if("Basic"===t.name){var r=t.commands.filter(function(e){return p.includes(1)?p.includes(2)?!!p.includes(3)||"h3"!==e.name:"h2"!==e.name:"h1"!==e.name});if(r.length>0)return e.push(nr(nt({},t),{commands:r})),e}return e.push(t),e};return I.hj.create({addOptions:function(){return{suggestion:{char:"/",pluginKey:new tq.H$("slash-commands"),items:function(e){var s=e.query;return Object.values(r7({showEmbedModal:t,showImagePickerModal:r,showFileUploadModal:n,showGiphyPickerModal:i,showPollModal:o,showCTASettingsModal:a,showVoiceMessageModal:l,shouldShowPlanUpgradeModal:d,openUpgradeModal:f})).map(function(e){return nr(nt({},e),{commands:e.commands.filter(function(e){return!u[e.name]&&e.title.toLowerCase().includes(s.toLowerCase())})})}).filter(function(e){return!c[e.name]&&!(0,D.isEmpty)(e.commands)}).reduce(m,[])},render:function(){var e,t;return{onStart:function(r){e=new N.M_(r5,{props:r,editor:r.editor}),t=(0,r2.ZP)("body",{getReferenceClientRect:r.clientRect,appendTo:function(){return r.editor.options.element},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",zIndex:999,onHidden:function(){e.destroy()}})},onUpdate:function(r){e.updateProps(r),r.items.length<1?(t[0].hide(),e&&e.destroy()):(t[0].show(),t[0].setProps({getReferenceClientRect:r.clientRect}))},onKeyDown:function(r){var n;return"Escape"===r.event.key?(t[0].hide(),r.event.preventDefault(),r.event.stopPropagation(),!0):null==(n=e.ref)?void 0:n.onKeyDown(r)},onExit:function(){t&&t[0].destroy(),e&&e.destroy()}}}}}},addProseMirrorPlugins:function(){return[(0,r1.ZP)(nt({editor:this.editor},this.options.suggestion))]}})};function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){na(e,t,r[t])})}return e}function ns(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||nu(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(e,t){if(e){if("string"==typeof e)return no(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return no(e,t)}}var nd=function(e){return!!e},nf=(0,i.createContext)(null);nf.displayName="BlockEditorContext";var np=function(){return(0,i.useContext)(nf)};Promise.all([r.e("2781"),r.e("3309")]).then(r.bind(r,31251)).then(function(e){e.default.highlightAll()}).catch(console.error);var nm=function(e){var t=e.aiCopilotTitle,r=e.allowBubbleMenuOverflow,P=e.className,I=e.disabledExtensions,M=e.disabledSlashMenuCategories,L=e.disabledSlashMenuCommands,R=e.disableMentionClicks,F=e.editorClassName,$=e.editorRef,U=e.inlineAttachments,B=e.isVoiceMessageAllowed,z=void 0!==B&&B,q=e.onChange,Z=e.onFocusChange,H=e.onLocalAttachmentsChange,V=e.onLocalSgidToObjectMapChange,W=e.openInternalLinksInCurrentTab,J=e.placeholder,G=e.readOnly,K=void 0!==G&&G,Q=e.sgidToObjectMap,Y=e.shouldPreviewFilesAsLinks,ee=e.shouldShowTextModifiersMenu,et=e.spaceId,eo=e.textModifierPlacement,ea=e.showListsInTextModifierMenu,el=e.maxFileUploadSize,es=e.toolbars,ec=e.value,eu=e.shouldRefetch,ed=void 0!==eu&&eu,ef=e.headingLevels,ep=void 0===ef?[2,3]:ef,em=e.isWithinEmailEditor,eg=void 0!==em&&em,ex=(0,rB.d)(),ej=(0,r0.d)(),eO=(0,en.Z)(),eS=(0,ew.Y)(),e_=(0,X.dd)(e2),ek=(0,X.dd)(X.gk.create(function(e){return(0,n.jsx)(tz,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})),eD=(0,X.dd)(eb),eE=nc((0,i.useState)({}),2),eT=eE[0],eC=eE[1],eI=nc((0,i.useState)([]),2),eM=eI[0],eL=eI[1],eR=nc((0,A.k)(!1),3),eF=eR[0],e$=eR[2],eU=t7(),eX=eU.shouldShowCopilot,eB=eU.shouldShowPlanUpgradeModal,eq=t9().openUpgradeModal,eZ=(0,t2.m)(),eH=nc([void 0===I?[]:I,void 0===M?[]:M,void 0===L?[]:L].map(function(e){return Object.fromEntries(e.map(function(e){return[e,!0]}))}),3),eV=eH[0],eW=eH[1],eJ=eH[2];eV.ai_copilot=eV.ai_copilot||!(eX||eB)||K,eV.voice_message=eV.voice_message||!z,eJ.voice_message=eJ.voice_message||!z;var eG=function(e){var t=e.sgid,r=e.object;eC(function(e){return ns(nl({},e),na({},t,r))}),(0,D.isFunction)(V)&&V(ns(nl({},eT),na({},t,r)))},eK=function(e){eL(function(t){var r=((function(e){if(Array.isArray(e))return no(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||nu(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]);return(0,D.isFunction)(H)&&H(r),r})},eQ=function(e){return ej.show(ns(nl({},e),{addToLocalInlineAttachments:eK,isWithinEmailEditor:eg}))},eY=function(e){return e_.show(ns(nl({},e),{addToLocalInlineAttachments:eK}))},e0=function(e){return eO.show(ns(nl({},e),{maxFileUploadSize:el,addToLocalInlineAttachments:eK,addToLocalSgidToObjectMap:eG}))},e1=function(e){return ek.show(ns(nl({},e),{addToLocalSgidToObjectMap:eG}))},e3=function(e){return eD.show(ns(nl({},e),{addToLocalInlineAttachments:eK}))},e8=[!eV.blockquote&&o.ZP,a.ZP,v.ZP,O.ZP,ev.a,c.Z,d.Z,f.Z,p.Z,!eV.code_block&&s.Z.configure({lowlight:E.$,HTMLAttributes:{spellCheck:"false"}}),!eV.headings&&m.Z.configure({levels:ep}),h.Z,l.ZP,rF.E,g.ZP,x.Z,w.Z,eZ&&eg&&S.Z.configure({types:Array.from(t1.M),alignments:[t1.$.LEFT,t1.$.RIGHT,t1.$.CENTER]}),_.ZP,b.ZP.configure({multicolor:!0}),eh.P.configure({openInternalLinksInCurrentTab:void 0===W||W,openOnClick:!1,autolink:!1}),j.Z.configure({placeholder:J,emptyEditorClass:"is-block-editor-empty text-light",emptyNodeClass:"is-empty",showOnlyWhenEditable:!1,showOnlyCurrent:!0}),!eV.horizontal_rule&&y.Z,!eV.file&&er,ei.r,eA,!eV.ai_copilot&&rR,!eV.slash_commands&&ni({showEmbedModal:function(e){return ex.show(ns(nl({},e),{addToLocalSgidToObjectMap:eG}))},showImagePickerModal:eQ,showFileUploadModal:e0,showGiphyPickerModal:eY,showPollModal:e1,showCTASettingsModal:function(e){return eS.show(ns(nl({},e),{addToLocalSgidToObjectMap:eG,isWithinEmailEditor:eg}))},showVoiceMessageModal:e3,disabledExtensions:eV,disabledSlashMenuCategories:eW,disabledSlashMenuCommands:eJ,shouldShowPlanUpgradeModal:eB,openUpgradeModal:eq,headingLevels:ep}),!eV.embeds&&rX,!eV.image&&rY,!eV.mention&&ey.z,!eV.entities&&T.Y,!eV.poll&&tB,!eV.cta&&eN,!K&&tV,eP,ez,u.Z.configure({width:2})].filter(nd);(0,i.useEffect)(function(){(0,D.isFunction)(Z)&&Z(eF)},[eF,Z]);var e6=(0,D.debounce)(function(e){var t=e.editor.getJSON();q&&q(t)},200),e5=(0,N.jE)({extensions:e8,onUpdate:e6,onFocus:function(){e$(!0)},onBlur:function(){e$(!1)},content:ec,editable:!K,editorProps:{transformPastedHTML:function(e){var t=(0,C.n)(e);return t.length&&(0,C.S)({sgids:t,setLocalSgidToObjectMap:eC}),e},attributes:{focus:"",class:k()("z-0 max-w-none whitespace-pre-wrap bg-transparent border-none ring-0 circle-block-editor text-dark",F),"data-readonly":K}}});$&&($.current=e5),(0,i.useEffect)(function(){ed&&K&&e5&&(0,D.defer)(function(){return e5.commands.setContent(ec)})},[e5,ec,ed,K]),(0,i.useEffect)(function(){e5&&K===e5.isEditable&&e5.setEditable(!K)},[K,e5]);var e4=function(e){!eV.file&&e5&&e5.chain().focus().insertContent(Array.from(e).map(function(e){return{type:"file-loader",attrs:{file:e}}})).run()};return(0,n.jsxs)(nf.Provider,{value:{sgidToObjectMap:void 0===Q?{}:Q,inlineAttachments:void 0===U?[]:U,localSgidToObjectMap:eT,addToLocalSgidToObjectMap:eG,localInlineAttachments:eM,addToLocalInlineAttachments:eK,spaceId:et,aiCopilotTitle:t,shouldPreviewFilesAsLinks:void 0!==Y&&Y,type:"block",disableMentionClicks:void 0!==R&&R,isWithinEmailEditor:eg},children:[e5&&(void 0===ee||ee)&&(0,n.jsx)(rr,{shouldShowCopilot:!eV.ai_copilot,editor:e5,headingLevels:ep,placement:void 0===eo?"top":eo,showListsInTextModifierMenu:void 0!==ea&&ea,allowBubbleMenuOverflow:void 0===r||r}),es&&es.map(function(e){var t=e.portalId,r=e.component;return(0,n.jsx)(r,{editor:e5,isEditorFocused:eF,portalId:t,showImagePickerModal:eQ,showFileUploadModal:e0,showGiphyPickerModal:eY,showPollModal:e1,showVoiceMessageModal:e3,disabledExtensions:eV},"editor-toolbar-for-".concat(t))}),(0,n.jsx)(N.kg,{onPaste:function(e){var t,r;(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&e4(e.clipboardData.files)},onDrop:function(e){if(!e5)return null;e.preventDefault();var t={left:e.clientX,top:e.clientY},r=e5.view.posAtCoords(t);if(r)return Array.from(e.dataTransfer.files).forEach(function(e){e5.chain().focus().insertContentAt(r.pos,{type:"file-loader",attrs:{file:e}}).run()})},className:P,editor:e5,"data-testid":"tip-tap-editor-content"})]})}},43066:function(e,t,r){r.d(t,{K:()=>i});var n=r(66522),i=function(e,t){var r=n.M.some(function(r){return e.isActive(r,{textAlign:t})});return t===n.$.LEFT?r||!n.M.some(function(t){return[n.$.CENTER,n.$.RIGHT].some(function(r){return e.isActive(t,{textAlign:r})})}):r}},79659:function(e,t,r){r.d(t,{Z:()=>l});var n=r(85893),i=r(94184),o=r.n(i),a=r(84326),l=function(e){var t=e.field,r=e.value,i=e.disabled,l=e.onChange,s=e.variant,c=void 0===s?"default":s,u=e.className,d=e.labelClassName,f=e.wrapperClassName,p=e.label,m=void 0===p?(0,a.t)("toggle_switch"):p;return(0,n.jsxs)("div",{className:o()("toggle-switch",f,{"toggle-switch--small":"default"===c,"toggle-switch--large":"large"===c}),id:"field-".concat(t),children:[(0,n.jsx)("input",{type:"checkbox",name:t,id:"checkbox-".concat(t),checked:void 0!==r&&r,onChange:l,disabled:void 0!==i&&i,className:o()("peer",u)}),(0,n.jsx)("label",{htmlFor:"checkbox-".concat(t),className:o()("bg-toggle-unchecked before:bg-toggle-circle-unchecked peer-checked:bg-toggle-checked before:peer-checked:bg-toggle-circle-checked relative",d),children:(0,n.jsx)("span",{className:"sr-only",children:m})})]})}},79840:function(e,t,r){r.d(t,{sI:()=>p,Zh:()=>n.Z});var n=r(79659),i=r(85893),o=r(94184),a=r.n(o),l=r(50308),s=r.n(l),c=r(84326),u=r(57363),d=r(80171),f=r(76987),p=function(e){var t=e.label,r=void 0===t?(0,c.t)("toggle_switch"):t,o=e.field,l=e.value,p=void 0!==l&&l,m=e.onChange,b=void 0===m?s():m,h=e.tooltipText,y=e.className,v=e.labelClassName,g=e.toggleSwitchClassName,x=e.toggleSwitchLabelClassName,j=e.variant,O=void 0===j?"default":j,w=e.disabled;return(0,i.jsxs)("div",{className:a()("flex flex-row items-center justify-between",y),children:[h?(0,i.jsxs)("span",{className:"text-default flex items-center",children:[r,(0,i.jsx)(d.T,{content:h,className:"inline-flex",children:(0,i.jsx)(u.JO,{type:"question-mark",className:"ml-2 !w-3"})})]}):(0,i.jsx)("span",{className:a()("text-default",v),children:r}),(0,i.jsx)("div",{id:"field-".concat(o),className:"flex items-center",children:"small"===O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"checkbox",name:o,id:"checkbox-".concat(o),checked:p,onChange:b,className:"peer hidden"}),(0,i.jsxs)("label",{className:"m-0",htmlFor:"checkbox-".concat(o),children:[(0,i.jsx)(f.r,{as:"span",checked:p,onChange:b}),(0,i.jsx)("span",{className:"sr-only",children:r})]})]}):(0,i.jsx)(n.Z,{field:o,value:p,onChange:b,variant:O,disabled:void 0!==w&&w,wrapperClassName:g,labelClassName:x})})]})}},38431:function(e,t,r){r.d(t,{P:()=>s});var n=r(85893),i=r(84326),o=r(80171),a=r(75148),l=(0,i.t)("close"),s=function(e){var t=e.onClick;return(0,n.jsx)(o.T,{content:l,interactive:!1,children:(0,n.jsx)(a.h,{name:"close",variant:"secondary",onClick:t,ariaLabel:l})})}},16295:function(e,t,r){r.d(t,{N:()=>c});var n=r(85893),i=r(94184),o=r.n(i),a=r(5179),l=r(41553),s=r(39869),c=function(e){var t,r=e.cue,i=e.isCurrentCue,c=void 0!==i&&i,u=e.shouldScroll,d=e.onSeek,f=(0,a.g)(c&&(void 0===u||u));return(0,n.jsxs)("button",{type:"button",className:o()("flex cursor-pointer items-start gap-3 p-1 text-left hover:underline",{"bg-secondary":c}),onClick:function(e){e.stopPropagation(),d(r.startTime)},ref:f,children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(l.Z.BodySm,{as:"div",color:c?"text-dark":"text-light",weight:c?"semibold":"normal",children:(0,s.Ly)(null==(t=r.startTime)?void 0:t.toString())})}),(0,n.jsx)(l.Z.LabelSm,{as:"div",color:"text-dark",weight:c?"semibold":"normal",children:r.text})]})}},65648:function(e,t,r){r.d(t,{d:()=>s});var n=r(85893),i=r(84326),o=r(80171),a=r(75148),l=(0,i.t)("live_streams.room.button_tooltips.fullscreen"),s=function(e){var t=e.onClick;return(0,n.jsx)(o.T,{content:l,interactive:!1,children:(0,n.jsx)(a.h,{name:"fullscreen",variant:"secondary",onClick:t,ariaLabel:l})})}},40881:function(e,t,r){r.d(t,{n:()=>b});var n=r(85893),i=r(67294),o=r(84326),a=r(57363),l=r(37416),s=r(41553),c=r(16295),u=r(96486),d=function(e){var t=e.onChange,r=void 0===t?u.noop:t;return(0,n.jsx)("input",{type:"search",placeholder:(0,o.t)("media_player.search"),className:"shadow-xs placeholder:text-light border-primary w-full rounded-lg placeholder:opacity-100",onChange:r})},f=r(39869),p=r(96378);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t,r=e.isOpen,u=e.onClose,b=e.cues,h=e.onSeek,y=e.currentTime,v=e.children,g=(t=(0,i.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=g[0],j=g[1],O=(0,p.g)(),w=O.containerRef,S=O.shouldAutoScroll,_=b.filter(function(e){return!x||e.text.toLowerCase().includes(x.toLowerCase())});return(0,n.jsx)(l.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!0,isOpen:r,contentPortalId:"fullscreen-transcripts-portal",position:"bottom",onClose:u,children:(0,n.jsxs)("div",{className:"relative flex h-full items-stretch",children:[(0,n.jsx)("div",{className:"bg-dark relative grow",children:(0,n.jsx)("div",{id:"transcripts-fullscreenmodal-player",className:"absolute inset-0",children:v})}),(0,n.jsxs)("div",{className:"border-primary flex w-1/3 max-w-sm shrink-0 flex-col border-l",children:[(0,n.jsxs)("div",{className:"border-primary mb-2 flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,n.jsx)(a.JO,{type:"20-ai",size:20}),(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:(0,o.t)("media_player.transcript")})]}),(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)(d,{onChange:function(e){return j(e.target.value)}})}),(0,n.jsx)("div",{className:"relative grow",children:(0,n.jsx)("div",{className:"absolute inset-0 overflow-auto p-4",ref:w,children:_.map(function(e){return(0,n.jsx)(c.N,{cue:e,isCurrentCue:(0,f.O4)(e,y),shouldScroll:S,onSeek:h},"transcript-fullscreen-".concat(e.startTime))})})})]})]})})}},39869:function(e,t,r){r.d(t,{Ly:()=>o,O4:()=>a});var n=r(96486),i=function(e){return(0,n.padStart)(e.toString(),2,"0")},o=function(e){var t=Number(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),o=Math.floor(t-3600*r-60*n);return r?"".concat(i(r),":").concat(i(n),":").concat(i(o)):"".concat(i(n),":").concat(i(o))},a=function(e,t){if(!e)return!1;var r=e.startTime,n=e.endTime;return t>=r&&t<n}},96378:function(e,t,r){r.d(t,{g:()=>o});var n=r(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=function(){var e,t=(0,n.useRef)(null),r=(e=(0,n.useState)(!0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],l=t.current;return(0,n.useEffect)(function(){var e=function(){return a(!1)};return null==l||l.addEventListener("mousewheel",e),function(){return null==l?void 0:l.removeEventListener("mousewheel",e)}},[l]),{containerRef:t,shouldAutoScroll:o}}},51751:function(e,t,r){r.d(t,{B:()=>e$});var n=r(85893),i=r(67294),o=r(41342),a=r(78456),l=r(13532),s=r(61217),c=r(4244),u=r(84994),d=r(94184),f=r.n(d);r(69077);var p=r(99196),m=r(96486),b=r(21443),h=r.n(b),y=r(84326),v=r(34502),g=function(e){var t=e.id,r=e.contentType,o=e.children,a=e.poster,l=e.preload,s=void 0===l?"none":l,c=e.signedId,u=null==r?void 0:r.match("audio.*"),d=(0,i.useRef)(null);return((0,v.p)(d,c),u)?(0,n.jsx)("audio",{id:t,preload:s,controls:!0,children:o}):(0,n.jsx)("video",{id:t,preload:s,controls:!0,poster:a,"data-poster":a,"data-testid":"media-player",ref:d,children:o})},x=r(64061),j=r.n(x);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e){var t;return null!=(t=HTMLMediaElement)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t},S=function(e){var t,r=e.id,n=e.renderKey,o=e.src,a=e.enabled,l=void 0===a||a,s=e.autoStartLoadEnabled,c=void 0!==s&&s,u=(0,i.useRef)(null),d=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],m=d[1],b=(0,i.useRef)(!1);return(0,i.useEffect)(function(){if(l&&o&&r){var e=document.getElementById(r);if(w(e))return u.current=new p.ZP({autoStartLoad:c}),u.current.loadSource(o),u.current.attachMedia(e),u.current.once(p.ZP.Events.MANIFEST_PARSED,function(){if(u.current&&!b.current){var e=u.current.levels;m({default:e[e.length-1].height,options:e.map(function(e){return e.height}),forced:!0,onChange:function(t){e.forEach(function(e,r){u.current&&e.height===t&&(u.current.currentLevel=r)})}}),b.current=!0}}),u.current.on(p.ZP.Events.ERROR,function(e,t){t.fatal&&j().notify(Error("HlsPlaybackError"),function(e){e.severity="error",e.context=window.location.href,e.addMetadata("request",{data:t})})}),function(){var e;null==(e=u.current)||e.destroy(),u.current=null}}},[n,r,o,l,c]),{quality:f,startLoad:(0,i.useCallback)(function(){var e;return null==(e=u.current)?void 0:e.startLoad()},[])}};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||k(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}var D=(0,i.memo)(function(e){var t=e.captionsUrl,r=e.contentType,o=e.downloadUrl,a=e.isDownloadable,l=void 0!==a&&a,s=e.onTimeUpdate,c=e.onEnded,u=e.playerRef,d=void 0===u?null:u,b=e.poster,v=e.src,x=e.startTime,j=e.preload,O=void 0===j?"none":j,w=e.onProgress,_=e.menuPosition,k=e.signedId,D=N((0,i.useState)((0,m.uniqueId)("plyr-container-")),2),E=D[0],A=D[1],T=(0,i.useRef)((0,m.uniqueId)("plyr-")),C=(0,i.useRef)(null),I=N((0,i.useState)(!1),2),M=I[0],L=I[1],R=p.ZP.isSupported(),F=v.endsWith(".m3u8")&&R,$="none"!==O,U=S({id:T.current,renderKey:E,src:v,enabled:F,autoStartLoadEnabled:$}),X=U.quality,B=U.startLoad,z=(0,i.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({controls:["play-large","play","progress","current-time","mute","volume"].concat(P(t?["captions"]:[]),["settings","pip","fullscreen"],P(l?["download"]:[])),urls:{download:o},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]}},X?{quality:X}:{})},[t,o,X,l]);(0,i.useEffect)(function(){return function(){var e;null==(e=C.current)||e.destroy(),A((0,m.uniqueId)("plyr-container-"))}},[z]),(0,i.useEffect)(function(){C.current=new(h())("#".concat(T.current),z),d&&(d.current={plyr:C.current})},[z,E,d]);var q=function(){C.current&&(C.current.currentTime=x)},Z=function(){C.current&&(0,m.isFunction)(c)&&c()};return(0,i.useEffect)(function(){return x&&C.current&&C.current.once("canplay",q),C.current&&(C.current.once("ended",Z),(0,m.isFunction)(w)&&C.current.on("timeupdate",w)),function(){var e,t;null==(e=C.current)||e.off("canplay",q),(0,m.isFunction)(w)&&(null==(t=C.current)||t.off("timeupdate",w))}},[C.current]),(0,i.useEffect)(function(){if(x&&C.current)return C.current.once("play",q),function(){var e;return null==(e=C.current)?void 0:e.off("play",q)}},[C.current]),(0,i.useEffect)(function(){if(C.current&&F&&!$)return C.current.once("play",B),function(){var e;return null==(e=C.current)?void 0:e.off("play",B)}},[E,F,$,B]),(0,i.useEffect)(function(){var e,t=function(){C.current&&s&&s(C.current.currentTime)};return s&&(null==(e=C.current)||e.on("timeupdate",t)),function(){if(s){var e;null==(e=C.current)||e.off("timeupdate",t)}}},[s,C.current]),(0,i.useEffect)(function(){if(C.current){var e=function(){return L(!0)},t=function(){return L(!1)};return C.current.on("enterfullscreen",e),C.current.on("exitfullscreen",t),function(){var r,n;null==(r=C.current)||r.off("enterfullscreen",e),null==(n=C.current)||n.off("exitfullscreen",t)}}},[C.current]),(0,n.jsx)("div",{className:f()("plyr-container",{"plyr-container--fullscreen":M,"plyr-container__menu--bottom":"bottom"===(void 0===_?"top":_)}),children:(0,n.jsxs)(g,{id:T.current,contentType:r,poster:b,preload:O,signedId:k,children:[!F&&(0,n.jsx)("source",{src:v,type:r}),t&&(0,n.jsx)("track",{kind:"captions",label:(0,y.t)("default"),src:t,srcLang:"en"})]})},E)});D.displayName="MediaPlayer";var E=r(88767),A=r(51630),T=r(60878),C=function(e){var t=(0,T.pm)(),r=t.success,n=t.error,i=(0,E.useQueryClient)(),o=(0,E.useQuery)(["mediaSettings",e],function(){return A.Ss.show(e)},{enabled:!!e}),a=o.data,l=o.isLoading,s=o.refetch,c=(0,E.useMutation)(function(t){return A.Ss.update(e,t)},{onSuccess:function(){r((0,y.t)("media_settings.success")),s(),i.invalidateQueries(["mediaSettings",e])},onError:function(e){n((0,y.t)("media_settings.error")),console.error(e)}}),u=c.mutate;return{mediaSettings:a,isLoading:l,isUpdating:c.isLoading,update:u,refetch:s}},I=r(1168),M=r(39905),L=r(51466),R=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,i=e.isUpdatingMediaSettings,o=e.closePopover,a={make_downloadable:t.make_downloadable,custom_thumbnail:t.custom_thumbnail_signed_id};return(0,n.jsxs)(L.l,{id:"download-settings",onSubmit:function(e){var n,i;r((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={id:t.id},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)),o()},defaultValues:a,children:[(0,n.jsx)(L.l.Item,{name:"make_downloadable",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:i,children:(0,n.jsx)(L.l.ToggleSwitch,{variant:"small",name:"make_downloadable"})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(M.z,{type:"submit",variant:"circle",disabled:i,className:"mt-3",children:(0,y.t)("save")})})]})},F=r(52293),$=r(13411),U=r(85277),X=r(57363),B=r(29576);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var q=function(e){var t,r=e.name,o=e.errorMessage,a=e.onChange,l=(0,T.pm)().error,s=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return z(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],d=(0,i.useRef)(null);return(0,i.useEffect)(function(){o&&l(o)},[o]),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:(0,I.A)("bg-primary flex cursor-pointer rounded-md border border-gray-600 px-2 py-1.5 text-sm",{"justify-center":!c,"hover:bg-selector-active":!c,"border-red-500":o}),children:[!c&&(0,n.jsx)("span",{children:(0,y.t)("media_player.transcript_menu.file_type.user_file")}),c&&(0,n.jsxs)("span",{className:"flex gap-2",children:[(0,n.jsx)(X.JO,{type:"20-attach",size:20,className:"shrink-0"}),(0,n.jsx)("span",{className:"grow",children:(0,m.truncate)(c,{length:17,omission:"..."})}),(0,n.jsx)(X.JO,{type:"16-close",size:16,onClick:function(e){e.preventDefault(),e.stopPropagation(),d.current&&(d.current.value=""),a(""),u(null)},className:"shrink-0"})]}),(0,n.jsx)("input",{type:"file",name:r,onChange:function(e){var t,r=null==(t=e.target.files)?void 0:t[0];if(r){var n=new FileReader;n.onload=function(){a(n.result)},n.readAsDataURL(r),u(r.name)}},className:"hidden",itemType:"text/vtt",accept:".vtt",ref:d})]})})},Z=function(e){var t=e.name,r=e.rules,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","rules"]),o=(0,F.Gc)(),a=o.control,l=o.formState.errors,s=(0,m.get)(l,t),c="string"==typeof(null==s?void 0:s.message)?s.message:"";return(0,n.jsx)(F.Qr,{control:a,name:t,rules:r,render:function(e){var r,o,a=e.field.onChange;return(0,n.jsx)(q,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),o=o={name:t,onChange:a,errorMessage:c},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r))}})},H=function(e){var t=e.onChange,r=e.value,i=e.supportsAi,o=e.aiFileDownloadUrl,a="ai"===r,s=a&&!i&&!o,c=a&&!!o;return(0,n.jsx)($.E,{value:r,name:"file_type",onChange:t,className:"w-full",children:(0,n.jsxs)("div",{className:(0,I.A)("flex flex-col items-stretch gap-3",{"flex-col-reverse":!i}),children:[(0,n.jsxs)(B.R,{value:"ai",className:"py-4",children:[(0,n.jsx)($.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,y.t)("media_player.transcript_menu.file_type.ai")}),(0,n.jsxs)($.E.Description,{as:"span",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,y.t)("media_player.transcript_menu.file_type.ai_description"),s&&(0,n.jsx)(M.z,{variant:"circle",onClick:function(e){e.preventDefault(),window.open((0,l.xn)(),"_blank")},children:(0,y.t)("media_player.transcript_menu.file_type.upgrade_label")}),c&&(0,n.jsxs)(M.z,{variant:"secondary",onClick:function(e){e.preventDefault(),window.open(o,"_blank")},children:[(0,n.jsx)(X.JO,{type:"16-download",className:"mr-1.5",size:16}),(0,y.t)("media_player.transcript_menu.file_type.download_vtt_label")]})]})]}),(0,n.jsxs)(B.R,{value:"user",className:"py-4",children:[(0,n.jsx)($.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,y.t)("media_player.transcript_menu.file_type.user")}),(0,n.jsxs)($.E.Description,{as:"div",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,y.t)("media_player.transcript_menu.file_type.user_description"),"user"===r&&(0,n.jsx)(Z,{name:"user_webvtt_file",rules:{validate:function(e){if(!e)return!0;var t,r=atob(e.replace(/data:\S+,/,"")),n=new U.WebVTTParser().parse(r);return null==n||null==(t=n.errors)||!t.length||(0,y.t)("media_player.transcript_menu.file_type.user_file_error")}}})]})]})]})})},V=function(e){var t=e.name,r=e.rules,i=e.supportsAi,o=e.aiFileDownloadUrl,a=(0,F.Gc)().control;return(0,n.jsx)(F.Qr,{control:a,name:t,rules:r,render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,n.jsx)(H,{onChange:r,value:a,supportsAi:i,aiFileDownloadUrl:o})}})},W="media_player.transcript_menu",J=function(e){var t=e.isUpdating,r=e.supportsAi,i=e.aiFileDownloadUrl,o=(0,(0,F.Gc)().watch)("enabled"),a=function(e){return"ai"!==e||!!r||(0,y.t)("media_player.transcript_menu.file_type.ai_not_supported_error")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.l.Item,{name:"enabled",translationRoot:W,hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:t,children:(0,n.jsx)(L.l.ToggleSwitch,{variant:"small",name:"enabled"})}),o&&(0,n.jsx)(L.l.Item,{name:"selected_file",translationRoot:W,hideBorder:!0,fullWidth:!0,inline:!0,hideLabel:!0,hideDescription:!0,isDisabled:t,rules:{validate:a},className:"flex flex-col",children:(0,n.jsx)(V,{name:"selected_file",rules:{validate:a},supportsAi:r,aiFileDownloadUrl:i})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(M.z,{type:"submit",variant:"circle",disabled:t,className:"mt-1",children:(0,y.t)("save")})})]})},G=function(e){var t=e.mediaTranscript,r=e.updateAsync,i=e.isUpdating;if(!t)return null;var o={enabled:!!(null==t?void 0:t.enabled),selected_file:null==t?void 0:t.selected_file};return(0,n.jsx)(L.l,{id:"media-transcript",onSubmit:function(e){null==r||r(e)},defaultValues:o,children:(0,n.jsx)(J,{isUpdating:!!i,supportsAi:!!(null==t?void 0:t.supports_ai),aiFileDownloadUrl:(null==t?void 0:t.is_ai_ready)?null==t?void 0:t.webvtt_file_url:""})})},K=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary border-light absolute right-0 top-1 w-80 cursor-default rounded-lg border p-5",children:t})},Q=(0,i.forwardRef)(function(e,t){var r=e.iconType,i=e.onClick;return(0,n.jsx)("button",{ref:t,type:"button",onClick:i,className:"bg-primary text-dark border-light hover:bg-secondary flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border",children:(0,n.jsx)(X.JO,{type:r,size:16})})});Q.displayName="Button";var Y=r(84142),ee=r(50312),et=r(54443),er=r(35834),en=r(69293);function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eo(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function el(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ec={strategy:"fixed",placement:"bottom-end"},eu={enter:"transition ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},ed=Object.assign(function(e){var t=e.iconType,r=e.isOpen,o=e.onToggle,a=e.children,l=es((0,i.useState)(null),2),s=l[0],c=l[1],u=es((0,i.useState)(null),2),d=u[0],f=u[1],p=(0,i.useRef)(null),m=(0,er.D)(d,s,ec),b=m.styles,h=m.attributes;return(0,en.Z)(p,function(e){if(eo(e.target,Node)){var t;eo(e,MouseEvent)&&eo(e.target,Node)&&(null==d?void 0:d.contains(e.target))||eo(t=e.target,Element)&&null!==t.closest(".modal__box")||o()}}),(0,n.jsxs)(Y.J,{as:"div",className:"relative",children:[(0,n.jsx)(Q,{iconType:t,onClick:o,ref:f}),(0,n.jsx)(ee.u,el(ea({},eu),{show:r,children:r&&(0,n.jsx)(et.h,{as:i.Fragment,children:(0,n.jsx)(Y.J.Panel,el(ea({ref:c,style:b.popper},h.popper),{className:"z-20",children:(0,n.jsx)("div",{ref:p,children:(0,n.jsx)(K,{children:a})})}))})}))]})},{Body:K,Button:Q}),ef=r(795),ep=r(6394),em=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,i=e.isUpdatingMediaSettings,o=e.closePopover;return(0,n.jsxs)(L.l,{id:"thumbnail-image-settings",onSubmit:function(e){var n,i;r((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={id:t.id},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)),o()},shouldStopPropagation:!0,defaultValues:{custom_thumbnail:t.custom_thumbnail_signed_id},children:[(0,n.jsx)(L.l.Item,{name:"custom_thumbnail",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,hideDescription:!0,className:"!p-0",children:(0,n.jsx)(ep.D,{name:"custom_thumbnail",aspectRatio:16/9,hideUnsplash:!0,showAddCoverBtn:!0,changeImageText:(0,y.t)("replace"),title:(0,y.t)("media_settings.thumbnail_title"),customAddCoverBtn:(0,n.jsxs)("div",{className:"bg-primary border-primary text-dark my-2 flex w-full cursor-pointer flex-col items-center justify-center rounded-lg border border-dashed px-4 py-5 text-center",children:[(0,n.jsx)("div",{className:"bg-tertiary flex h-8 w-8 items-center justify-center rounded-full",children:(0,n.jsx)(X.JO,{type:"plus",viewBox:"0 0 20 20"})}),(0,n.jsx)("span",{className:"mt-0.5 text-xs",children:(0,n.jsx)(ef.w,{content:(0,y.t)("media_settings.image_upload_description")})})]})})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(M.z,{type:"submit",variant:"circle",disabled:i,className:"mt-3",children:(0,y.t)("save")})})]})};function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eh=function(e){var t,r,l=e.mediaTranscript,s=e.canEditTranscript,c=e.updateAsyncTranscript,u=e.isUpdatingTranscript,d=e.signedId,f=e.contentType,p=(0,o.wh)().currentCommunityMember,m=(0,a.vb)(p),b=null==f?void 0:f.match("audio.*"),h=null==(r=window.webview)?void 0:r.isInsideMobileWebview,y=C(d||""),v=y.mediaSettings,g=y.update,x=y.isUpdating,j=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eb(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eb(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=j[0],w=j[1],S=function(e){w(O===e?null:e)};return(0,n.jsxs)("div",{className:(0,I.A)("invisible absolute z-10 flex gap-3 group-hover:visible",{"!visible":O,"right-4 top-4":!b,"bottom-12 right-2.5":b}),children:[v&&m&&!h&&(0,n.jsxs)(n.Fragment,{children:[!b&&(0,n.jsx)(ed,{isOpen:"thumbnail"===O,onToggle:function(){return S("thumbnail")},iconType:"16-file-image",children:(0,n.jsx)(em,{mediaSettings:v,updateMediaSettings:g,isUpdatingMediaSettings:x,closePopover:function(){return S("thumbnail")}})}),(0,n.jsx)(ed,{isOpen:"download"===O,onToggle:function(){return S("download")},iconType:"16-download",children:(0,n.jsx)(R,{mediaSettings:v,updateMediaSettings:g,isUpdatingMediaSettings:x,closePopover:function(){return S("download")}})})]}),s&&(0,n.jsx)(ed,{isOpen:"transcript"===O,onToggle:function(){return S("transcript")},iconType:"16-transcript",children:(0,n.jsx)(G,{mediaTranscript:l,updateAsync:c,isUpdating:u})})]})},ey=r(41553),ev="media_player.transcoding",eg=function(e){var t=e.status,r="failed"===t?"failed":"in_progress";return(0,n.jsxs)("div",{className:"absolute left-0 top-0 z-10 h-full w-full",children:[(0,n.jsx)("div",{className:"h-full w-full bg-black opacity-80"}),(0,n.jsx)("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:(0,n.jsxs)("div",{className:"w-10/12 max-w-[360px] text-center",children:[(0,n.jsxs)("div",{className:"space-x-2",children:["failed"===t&&(0,n.jsx)(X.JO,{type:"20-alert",size:20,className:"!h-4 !w-4 !text-white"}),(0,n.jsx)(ey.Z.LabelSm,{color:"text-white",weight:"semibold",children:(0,y.t)([ev,r,"title"])})]}),(0,n.jsx)(ey.Z.LabelSm,{color:"text-white",children:(0,y.t)([ev,r,"description"])})]})})]})},ex=r(63271);function ej(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eO=function(e){var t,r=e.url,o=e.onNewMediaTranscript,a=e.onMediaTranscriptUpdated,s=e.mediaTranscript,c=e.isLoading,u=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ej(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ej(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],p=(0,i.useRef)(!1),m=function(){return f(!0)};(0,ex.s)({channel:"MediaTranscriptChannel",url:r,onMessageReceive:function(e){var t,r;"newMediaTranscript"===e.event?(m(),null==o||o(null==(t=e.json_message)?void 0:t.id)):"mediaTranscriptUpdated"===e.event&&(p.current||m(),null==a||a(null==(r=e.json_message)?void 0:r.id))}});var b=null==s?void 0:s.supports_ai;return!d||c?null:(0,n.jsxs)("div",{className:"bg-primary absolute left-5 top-5 z-10 flex w-2/3 max-w-sm items-start gap-3 rounded-md p-4 shadow-xl",children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(X.JO,{type:"20-ai"})}),(0,n.jsxs)("div",{className:"flex grow flex-col gap-4",children:[(0,n.jsx)(ey.Z.LabelSm,{as:"div",children:(0,y.t)("media_player.transcript_notification_message")}),!b&&(0,n.jsxs)(ey.Z.LabelSm,{as:"div",children:[(0,n.jsx)("span",{children:"".concat((0,y.t)("media_player.transcript_notification_upgrade_message")," ")}),(0,n.jsx)("a",{className:"cursor-pointer",href:(0,l.xn)(),target:"_blank",rel:"noreferrer",children:(0,y.t)("media_player.transcript_notification_upgrade_link")})]})]}),(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(X.JO,{type:"20-close",onClick:function(){p.current=!0,f(!1)},className:"cursor-pointer"})})]})},ew=r(38431),eS=r(16295),e_=r(65648),eN=r(40881),eP=r(39869),ek=r(96378);function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eA=function(e){var t=e.onSeek,r=e.onFullscreenSeek,o=e.onFullscreenToggle,a=e.renderFullscreenPlayer,l=e.cues,s=void 0===l?[]:l,c=e.currentTime,u=(0,i.useRef)(null),d=eE((0,i.useState)(!1),2),f=d[0],p=d[1],m=eE((0,i.useState)(!1),2),b=m[0],h=m[1],v=function(){return p(!f)};(0,en.Z)(u,function(){return p(!1)});var g=(0,ek.g)(),x=g.containerRef,j=g.shouldAutoScroll,O=function(){null==o||o(),p(!1),h(!b)};if(!(null==s?void 0:s.length))return null;var w=s[0]||{text:"",startTime:0};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("blockquote",{children:[(0,n.jsx)(ey.Z.BodyXs,{as:"div",children:w.text}),(0,n.jsx)("div",{children:(0,n.jsxs)("button",{type:"button",className:"text-link relative cursor-pointer text-xs hover:underline",onClick:v,ref:u,children:[f?(0,y.t)("media_player.hide_transcript"):(0,y.t)("media_player.show_transcript"),f&&(0,n.jsxs)("div",{className:"bg-primary border-light absolute bottom-0 left-full z-20 ml-2 flex h-72 w-96 flex-col rounded-md border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,n.jsx)(ey.Z.BodyMd,{as:"div",color:"text-dark",children:(0,y.t)("media_player.transcript")}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(e_.d,{onClick:O}),(0,n.jsx)(ew.P,{onClick:v})]})]}),(0,n.jsx)("div",{className:"grow overflow-auto",ref:x,children:s.map(function(e){return(0,n.jsx)(eS.N,{cue:e,isCurrentCue:(0,eP.O4)(e,c),shouldScroll:j,onSeek:t},"transcript-".concat(e.startTime))})})]})]})})]}),(0,n.jsx)(eN.n,{isOpen:b,onClose:O,cues:s,onSeek:r,currentTime:c,children:a()})]})},eT=r(64100),eC=r(11621);function eI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eM=(0,eT.Ue)()((0,eC.tJ)(function(e,t){return{blobs:[],saveProgress:function(t,r){e(function(e){var n;return{blobs:[{signedId:t,progress:r}].concat(function(e){if(Array.isArray(e))return eI(e)}(n=e.blobs.filter(function(e){return e.signedId!==t}).slice(0,99))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return eI(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eI(e,t)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}})},getProgress:function(e){var r,n=t().blobs.find(function(t){return t.signedId===e});return null!=(r=null==n?void 0:n.progress)?r:0},deleteProgress:function(t){e(function(e){return{blobs:e.blobs.filter(function(e){return e.signedId!==t})}})}}},{name:"media-progress",version:1})),eL=r(74050);function eR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eR(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e$=(0,i.memo)(function(e){var t,r=e.src,d=e.poster,f=e.type,p=e.mediaTranscoding,m=e.mediaTranscriptId,b=e.isDownloadable,h=void 0!==b&&b,y=e.isTranscodingEnabled,v=void 0!==y&&y,g=e.downloadUrl,x=e.variants,j=e.preload,O=void 0===j?"none":j,w=e.signedId,S=e.onProgress,_=e.menuPosition,N=void 0===_?"top":_,P=(0,o.wh)(),k=P.currentCommunityMember,E=P.currentCommunitySettings,A=(0,a.vb)(k),T=(0,u.S)(),I=(0,i.useRef)(null),M=(0,i.useRef)(null),L=eF((0,i.useState)(null),2),R=L[0],F=L[1],$=v?null==x?void 0:x.hls:null,U=eF((0,i.useState)(null!=$?$:r),2),X=U[0],B=U[1],z=X.endsWith(".m3u8"),q=["video/mp4","video/mpeg","video/ogg","audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(f),Z=z||q,H=f.match("video.*"),V=eM(function(e){return e.getProgress(w||"")}),W=eM(function(e){return e.deleteProgress}),J=eM(function(e){return e.saveProgress}),G=function(){w&&W(w)},K=eF((0,i.useState)(V),2),Q=K[0],Y=K[1],ee=m||R,et=!!(null==E?void 0:E.community_ai_settings_enabled),er=C(w||"").mediaSettings;(0,i.useEffect)(function(){Q&&w&&J(w,Q)},[Q,w,J]);var en=(0,s.k)({enabled:v&&!Z,signedId:w,mediaTranscoding:p,onSuccess:function(e){return e&&B(e)}}).status,ei=(0,eL.q)(ee),eo=ei.parsedWebvtt,ea=ei.mediaTranscript,el=ei.canEdit,es=ei.updateAsync,ec=ei.isUpdating,eu=ei.isLoading,ed=ei.refetch,ef=null!=(t=null==eo?void 0:eo.cues)?t:[],ep=er?er.poster_url:d;(0,i.useEffect)(function(){if(ep){var e=I.current;e&&(e.plyr.poster=ep)}},[ep]);var em=v&&!Z&&"succeeded"!==en,eb=et&&(null==ea?void 0:ea.enabled)&&(null==ea?void 0:ea.is_ready),ey=et&&!m&&(null==k?void 0:k.is_admin),ev="number"==typeof m?String(m):"",ex=eb?l.CG.showVtt({id:ev}):void 0,ej=T&&w&&H;return(0,n.jsxs)("div",{className:"group relative",children:[em&&(0,n.jsx)(eg,{status:en}),(0,n.jsx)(D,{captionsUrl:ex,contentType:f,downloadUrl:null!=g?g:null==x?void 0:x.original,isDownloadable:h||A,onTimeUpdate:Y,playerRef:I,poster:ep,src:X,menuPosition:N,startTime:Q,preload:O,onEnded:G,onProgress:S,signedId:w}),ej?(0,n.jsx)(c.H,{signedId:w}):(0,n.jsx)(eh,{signedId:w,mediaTranscript:ea,canEditTranscript:el,updateAsyncTranscript:es,isUpdatingTranscript:ec,contentType:f}),eb&&(0,n.jsx)(eA,{onSeek:function(e){var t=I.current;t&&(t.plyr.currentTime=e)},onFullscreenSeek:function(e){var t=M.current;t&&(t.plyr.currentTime=e)},renderFullscreenPlayer:function(){return(0,n.jsx)(D,{captionsUrl:ex,contentType:f,downloadUrl:null!=g?g:null==x?void 0:x.original,isDownloadable:h||A,onTimeUpdate:Y,playerRef:M,poster:ep,src:X,startTime:Q,preload:O,onEnded:G,onProgress:S,menuPosition:N,signedId:w})},onFullscreenToggle:function(){var e=I.current;e&&e.plyr.pause()},cues:ef,currentTime:Q}),ey&&(0,n.jsx)(eO,{url:r,onNewMediaTranscript:F,onMediaTranscriptUpdated:function(e){ee!==e?F(e):ed()},mediaTranscript:ea,isLoading:eu})]})});e$.displayName="TranscriptsPlayerComponent"},29379:function(e,t,r){r.d(t,{T:()=>l});var n=r(85893);r(69077);var i=r(71738),o=r(60878),a=r(51751),l=function(e){return(0,n.jsx)(i.aH,{children:(0,n.jsx)(o.VW,{children:(0,n.jsx)(a.B,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})}},74050:function(e,t,r){r.d(t,{q:()=>d});var n=r(88767),i=r(84326),o=r(51630),a=r(60878),l=r(67294),s=r(85277),c=r(13532),u=function(e){var t=e||{},r=t.id,i=t.enabled,o=t.is_ready,a=(0,n.useQuery)(["mediaTranscript","webvtt",r],function(){var e;return fetch(c.CG.showVtt({id:null!=(e=null==r?void 0:r.toString())?e:""})).then(function(e){return e.text()})},{enabled:!!r&&o&&i}),u=a.data,d=a.isError,f=a.refetch;return{parsedWebvtt:(0,l.useMemo)(function(){return!u||d?null:new s.WebVTTParser().parse(u)},[u,d]),refetch:f}},d=function(e){var t=(0,a.pm)(),r=t.success,l=t.error,s=(0,n.useQuery)(["mediaTranscript",e],function(){return o.ac.show(null!=e?e:-1)},{enabled:!!e}),c=s.data,d=s.isLoading,f=s.refetch,p=u(c)||{},m=p.parsedWebvtt,b=p.refetch,h=(0,n.useMutation)(function(t){return o.ac.update(null!=e?e:-1,t)},{onSuccess:function(){r((0,i.t)("media_player.transcript_menu.success")),f(),b()},onError:function(e){l((0,i.t)("media_player.transcript_menu.error")),console.error(e)}}),y=h.mutateAsync,v=h.mutate,g=h.isLoading,x=null==c?void 0:c.can_edit;return{mediaTranscript:c,canEdit:x,isLoading:d,isUpdating:g,parsedWebvtt:m,update:v,updateAsync:y,refetch:f}}},28414:function(e,t,r){r.d(t,{Y:()=>u});var n=r(85893),i=r(94184),o=r.n(i),a=r(96486),l=r(70434),s=function(e){var t=e.className,r=e.children;return(0,n.jsx)("span",{className:o()("truncate",t),children:r})},c="flex min-w-0",u=function(e){var t,r,i=e.className,u=e.tooltipOptions,d=e.children;return(0,a.isEmpty)(u)||(0,a.isEmpty)(null==u?void 0:u.content)?(0,n.jsx)("span",{className:o()(c,i),children:(0,n.jsx)(s,{children:d})}):(0,n.jsx)(l.Y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),r=r={className:o()(c,null==u?void 0:u.className),children:(0,n.jsx)(s,{children:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},98363:function(e,t,r){r.d(t,{s:()=>s});var n=r(85893),i=r(67142),o=r(84326),a=r(83031),l=function(e,t){var r=e!==(0,o.t)("no_name");return(e||t)&&r?t:a},s=function(e){var t=e.hasBorder,r=e.isFullRounded,o=e.name,a=e.size,s=l(o,e.src);return(0,n.jsx)(i.sJ,{hasBorder:t,isFullRounded:void 0===r||r,name:o,size:a,src:s})}},37614:function(e,t,r){r.d(t,{W:()=>l});var n=r(85893),i=r(94184),o=r.n(i),a=r(13532),l=function(e){var t,r,i=e.src,l=e.type,s=e.poster,c=e.rounded,u=e.isInset,d=void 0!==u&&u,f=e.mediaTranscriptId,p=e.preload,m=e.controlsList,b=e.description,h=void 0===b?"":b,y=e.className,v=e.shouldAutoPlay,g=e.styles,x=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["src","type","poster","rounded","isInset","mediaTranscriptId","preload","controlsList","description","className","shouldAutoPlay","styles"]);return(0,n.jsxs)("video",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:o()(y,{"wb-rounded-md":(void 0===c||c)&&!d,"wb-h-full wb-w-full wb-bg-black":d}),controls:!0,controlsList:void 0===m?"nodownload":m,preload:void 0===p?"metadata":p,poster:s,autoPlay:void 0!==v&&v,style:g},x),r=r={children:[(0,n.jsx)("source",{src:i,type:l}),h&&(0,n.jsx)("p",{className:"wb-sr-only",children:h}),f&&(0,n.jsx)("track",{kind:"captions",src:a.CG.showVtt({id:String(f)})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},770:function(e,t,r){r.d(t,{t:()=>a});var n=r(85893),i=r(94184),o=r.n(i),a=function(e){var t=e.children,r=e.backgroundNone,i=void 0!==r&&r,a=e.className;return(0,n.jsx)("div",{className:o()("rounded-md bg-none px-4 py-5 sm:p-6",{"bg-none":i,"bg-tertiary":!i},void 0===a?"":a),children:t})}}}]);
//# sourceMappingURL=/packs/js/5154-309ed9e07e288d72.js.map